define("TencentCloudMonitorGrafanaApp", ["@grafana/data","@grafana/runtime","@grafana/ui","angular","emotion","app/core/core_module","app/core/table_model","app/core/utils/kbn","app/plugins/sdk","lodash","moment","react","react-dom","rxjs"], function(__WEBPACK_EXTERNAL_MODULE__grafana_data__, __WEBPACK_EXTERNAL_MODULE__grafana_runtime__, __WEBPACK_EXTERNAL_MODULE__grafana_ui__, __WEBPACK_EXTERNAL_MODULE_angular__, __WEBPACK_EXTERNAL_MODULE_emotion__, __WEBPACK_EXTERNAL_MODULE_grafana_app_core_core_module__, __WEBPACK_EXTERNAL_MODULE_grafana_app_core_table_model__, __WEBPACK_EXTERNAL_MODULE_grafana_app_core_utils_kbn__, __WEBPACK_EXTERNAL_MODULE_grafana_app_plugins_sdk__, __WEBPACK_EXTERNAL_MODULE_lodash__, __WEBPACK_EXTERNAL_MODULE_moment__, __WEBPACK_EXTERNAL_MODULE_react__, __WEBPACK_EXTERNAL_MODULE_react_dom__, __WEBPACK_EXTERNAL_MODULE_rxjs__) { return /******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "/";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./datasource/module.ts");
/******/ })
/************************************************************************/
/******/ ({

/***/ "../node_modules/@grafana/toolkit/node_modules/webpack/buildin/global.js":
/*!*******************************************************************************!*\
  !*** ../node_modules/@grafana/toolkit/node_modules/webpack/buildin/global.js ***!
  \*******************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

var g;

// This works in non-strict mode
g = (function() {
	return this;
})();

try {
	// This works if eval is allowed (see CSP)
	g = g || new Function("return this")();
} catch (e) {
	// This works if the window reference is available
	if (typeof window === "object") g = window;
}

// g can still be undefined, but nothing to do about it...
// We return undefined, instead of nothing here, so it's
// easier to handle this case. if(!global) { ...}

module.exports = g;


/***/ }),

/***/ "../node_modules/@xobotyi/scrollbar-width/dist/index.esm.js":
/*!******************************************************************!*\
  !*** ../node_modules/@xobotyi/scrollbar-width/dist/index.esm.js ***!
  \******************************************************************/
/*! exports provided: scrollbarWidth */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "scrollbarWidth", function() { return e; });
var e=function(t){if("undefined"==typeof document)return 0;if(document.body&&(!document.readyState||"loading"!==document.readyState)){if(!0!==t&&"number"==typeof e.__cache)return e.__cache;var o=document.createElement("div"),d=o.style;d.display="block",d.position="absolute",d.width="100px",d.height="100px",d.left="-999px",d.top="-999px",d.overflow="scroll",document.body.insertBefore(o,null);var n=o.clientWidth;if(0!==n)return e.__cache=100-n,document.body.removeChild(o),e.__cache;document.body.removeChild(o)}};


/***/ }),

/***/ "../node_modules/base64-js/index.js":
/*!******************************************!*\
  !*** ../node_modules/base64-js/index.js ***!
  \******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


exports.byteLength = byteLength
exports.toByteArray = toByteArray
exports.fromByteArray = fromByteArray

var lookup = []
var revLookup = []
var Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array

var code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'
for (var i = 0, len = code.length; i < len; ++i) {
  lookup[i] = code[i]
  revLookup[code.charCodeAt(i)] = i
}

// Support decoding URL-safe base64 strings, as Node.js does.
// See: https://en.wikipedia.org/wiki/Base64#URL_applications
revLookup['-'.charCodeAt(0)] = 62
revLookup['_'.charCodeAt(0)] = 63

function getLens (b64) {
  var len = b64.length

  if (len % 4 > 0) {
    throw new Error('Invalid string. Length must be a multiple of 4')
  }

  // Trim off extra bytes after placeholder bytes are found
  // See: https://github.com/beatgammit/base64-js/issues/42
  var validLen = b64.indexOf('=')
  if (validLen === -1) validLen = len

  var placeHoldersLen = validLen === len
    ? 0
    : 4 - (validLen % 4)

  return [validLen, placeHoldersLen]
}

// base64 is 4/3 + up to two characters of the original data
function byteLength (b64) {
  var lens = getLens(b64)
  var validLen = lens[0]
  var placeHoldersLen = lens[1]
  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen
}

function _byteLength (b64, validLen, placeHoldersLen) {
  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen
}

function toByteArray (b64) {
  var tmp
  var lens = getLens(b64)
  var validLen = lens[0]
  var placeHoldersLen = lens[1]

  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen))

  var curByte = 0

  // if there are placeholders, only get up to the last complete 4 chars
  var len = placeHoldersLen > 0
    ? validLen - 4
    : validLen

  var i
  for (i = 0; i < len; i += 4) {
    tmp =
      (revLookup[b64.charCodeAt(i)] << 18) |
      (revLookup[b64.charCodeAt(i + 1)] << 12) |
      (revLookup[b64.charCodeAt(i + 2)] << 6) |
      revLookup[b64.charCodeAt(i + 3)]
    arr[curByte++] = (tmp >> 16) & 0xFF
    arr[curByte++] = (tmp >> 8) & 0xFF
    arr[curByte++] = tmp & 0xFF
  }

  if (placeHoldersLen === 2) {
    tmp =
      (revLookup[b64.charCodeAt(i)] << 2) |
      (revLookup[b64.charCodeAt(i + 1)] >> 4)
    arr[curByte++] = tmp & 0xFF
  }

  if (placeHoldersLen === 1) {
    tmp =
      (revLookup[b64.charCodeAt(i)] << 10) |
      (revLookup[b64.charCodeAt(i + 1)] << 4) |
      (revLookup[b64.charCodeAt(i + 2)] >> 2)
    arr[curByte++] = (tmp >> 8) & 0xFF
    arr[curByte++] = tmp & 0xFF
  }

  return arr
}

function tripletToBase64 (num) {
  return lookup[num >> 18 & 0x3F] +
    lookup[num >> 12 & 0x3F] +
    lookup[num >> 6 & 0x3F] +
    lookup[num & 0x3F]
}

function encodeChunk (uint8, start, end) {
  var tmp
  var output = []
  for (var i = start; i < end; i += 3) {
    tmp =
      ((uint8[i] << 16) & 0xFF0000) +
      ((uint8[i + 1] << 8) & 0xFF00) +
      (uint8[i + 2] & 0xFF)
    output.push(tripletToBase64(tmp))
  }
  return output.join('')
}

function fromByteArray (uint8) {
  var tmp
  var len = uint8.length
  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes
  var parts = []
  var maxChunkLength = 16383 // must be multiple of 3

  // go through the array every three bytes, we'll deal with trailing stuff later
  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {
    parts.push(encodeChunk(uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)))
  }

  // pad the end with zeros, but make sure to not forget the extra bytes
  if (extraBytes === 1) {
    tmp = uint8[len - 1]
    parts.push(
      lookup[tmp >> 2] +
      lookup[(tmp << 4) & 0x3F] +
      '=='
    )
  } else if (extraBytes === 2) {
    tmp = (uint8[len - 2] << 8) + uint8[len - 1]
    parts.push(
      lookup[tmp >> 10] +
      lookup[(tmp >> 4) & 0x3F] +
      lookup[(tmp << 2) & 0x3F] +
      '='
    )
  }

  return parts.join('')
}


/***/ }),

/***/ "../node_modules/buffer/index.js":
/*!***************************************!*\
  !*** ../node_modules/buffer/index.js ***!
  \***************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(global) {/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
/* eslint-disable no-proto */



var base64 = __webpack_require__(/*! base64-js */ "../node_modules/base64-js/index.js")
var ieee754 = __webpack_require__(/*! ieee754 */ "../node_modules/ieee754/index.js")
var isArray = __webpack_require__(/*! isarray */ "../node_modules/isarray/index.js")

exports.Buffer = Buffer
exports.SlowBuffer = SlowBuffer
exports.INSPECT_MAX_BYTES = 50

/**
 * If `Buffer.TYPED_ARRAY_SUPPORT`:
 *   === true    Use Uint8Array implementation (fastest)
 *   === false   Use Object implementation (most compatible, even IE6)
 *
 * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,
 * Opera 11.6+, iOS 4.2+.
 *
 * Due to various browser bugs, sometimes the Object implementation will be used even
 * when the browser supports typed arrays.
 *
 * Note:
 *
 *   - Firefox 4-29 lacks support for adding new properties to `Uint8Array` instances,
 *     See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.
 *
 *   - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.
 *
 *   - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of
 *     incorrect length in some situations.

 * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they
 * get the Object implementation, which is slower but behaves correctly.
 */
Buffer.TYPED_ARRAY_SUPPORT = global.TYPED_ARRAY_SUPPORT !== undefined
  ? global.TYPED_ARRAY_SUPPORT
  : typedArraySupport()

/*
 * Export kMaxLength after typed array support is determined.
 */
exports.kMaxLength = kMaxLength()

function typedArraySupport () {
  try {
    var arr = new Uint8Array(1)
    arr.__proto__ = {__proto__: Uint8Array.prototype, foo: function () { return 42 }}
    return arr.foo() === 42 && // typed array instances can be augmented
        typeof arr.subarray === 'function' && // chrome 9-10 lack `subarray`
        arr.subarray(1, 1).byteLength === 0 // ie10 has broken `subarray`
  } catch (e) {
    return false
  }
}

function kMaxLength () {
  return Buffer.TYPED_ARRAY_SUPPORT
    ? 0x7fffffff
    : 0x3fffffff
}

function createBuffer (that, length) {
  if (kMaxLength() < length) {
    throw new RangeError('Invalid typed array length')
  }
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    // Return an augmented `Uint8Array` instance, for best performance
    that = new Uint8Array(length)
    that.__proto__ = Buffer.prototype
  } else {
    // Fallback: Return an object instance of the Buffer class
    if (that === null) {
      that = new Buffer(length)
    }
    that.length = length
  }

  return that
}

/**
 * The Buffer constructor returns instances of `Uint8Array` that have their
 * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of
 * `Uint8Array`, so the returned instances will have all the node `Buffer` methods
 * and the `Uint8Array` methods. Square bracket notation works as expected -- it
 * returns a single octet.
 *
 * The `Uint8Array` prototype remains unmodified.
 */

function Buffer (arg, encodingOrOffset, length) {
  if (!Buffer.TYPED_ARRAY_SUPPORT && !(this instanceof Buffer)) {
    return new Buffer(arg, encodingOrOffset, length)
  }

  // Common case.
  if (typeof arg === 'number') {
    if (typeof encodingOrOffset === 'string') {
      throw new Error(
        'If encoding is specified then the first argument must be a string'
      )
    }
    return allocUnsafe(this, arg)
  }
  return from(this, arg, encodingOrOffset, length)
}

Buffer.poolSize = 8192 // not used by this implementation

// TODO: Legacy, not needed anymore. Remove in next major version.
Buffer._augment = function (arr) {
  arr.__proto__ = Buffer.prototype
  return arr
}

function from (that, value, encodingOrOffset, length) {
  if (typeof value === 'number') {
    throw new TypeError('"value" argument must not be a number')
  }

  if (typeof ArrayBuffer !== 'undefined' && value instanceof ArrayBuffer) {
    return fromArrayBuffer(that, value, encodingOrOffset, length)
  }

  if (typeof value === 'string') {
    return fromString(that, value, encodingOrOffset)
  }

  return fromObject(that, value)
}

/**
 * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError
 * if value is a number.
 * Buffer.from(str[, encoding])
 * Buffer.from(array)
 * Buffer.from(buffer)
 * Buffer.from(arrayBuffer[, byteOffset[, length]])
 **/
Buffer.from = function (value, encodingOrOffset, length) {
  return from(null, value, encodingOrOffset, length)
}

if (Buffer.TYPED_ARRAY_SUPPORT) {
  Buffer.prototype.__proto__ = Uint8Array.prototype
  Buffer.__proto__ = Uint8Array
  if (typeof Symbol !== 'undefined' && Symbol.species &&
      Buffer[Symbol.species] === Buffer) {
    // Fix subarray() in ES2016. See: https://github.com/feross/buffer/pull/97
    Object.defineProperty(Buffer, Symbol.species, {
      value: null,
      configurable: true
    })
  }
}

function assertSize (size) {
  if (typeof size !== 'number') {
    throw new TypeError('"size" argument must be a number')
  } else if (size < 0) {
    throw new RangeError('"size" argument must not be negative')
  }
}

function alloc (that, size, fill, encoding) {
  assertSize(size)
  if (size <= 0) {
    return createBuffer(that, size)
  }
  if (fill !== undefined) {
    // Only pay attention to encoding if it's a string. This
    // prevents accidentally sending in a number that would
    // be interpretted as a start offset.
    return typeof encoding === 'string'
      ? createBuffer(that, size).fill(fill, encoding)
      : createBuffer(that, size).fill(fill)
  }
  return createBuffer(that, size)
}

/**
 * Creates a new filled Buffer instance.
 * alloc(size[, fill[, encoding]])
 **/
Buffer.alloc = function (size, fill, encoding) {
  return alloc(null, size, fill, encoding)
}

function allocUnsafe (that, size) {
  assertSize(size)
  that = createBuffer(that, size < 0 ? 0 : checked(size) | 0)
  if (!Buffer.TYPED_ARRAY_SUPPORT) {
    for (var i = 0; i < size; ++i) {
      that[i] = 0
    }
  }
  return that
}

/**
 * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.
 * */
Buffer.allocUnsafe = function (size) {
  return allocUnsafe(null, size)
}
/**
 * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.
 */
Buffer.allocUnsafeSlow = function (size) {
  return allocUnsafe(null, size)
}

function fromString (that, string, encoding) {
  if (typeof encoding !== 'string' || encoding === '') {
    encoding = 'utf8'
  }

  if (!Buffer.isEncoding(encoding)) {
    throw new TypeError('"encoding" must be a valid string encoding')
  }

  var length = byteLength(string, encoding) | 0
  that = createBuffer(that, length)

  var actual = that.write(string, encoding)

  if (actual !== length) {
    // Writing a hex string, for example, that contains invalid characters will
    // cause everything after the first invalid character to be ignored. (e.g.
    // 'abxxcd' will be treated as 'ab')
    that = that.slice(0, actual)
  }

  return that
}

function fromArrayLike (that, array) {
  var length = array.length < 0 ? 0 : checked(array.length) | 0
  that = createBuffer(that, length)
  for (var i = 0; i < length; i += 1) {
    that[i] = array[i] & 255
  }
  return that
}

function fromArrayBuffer (that, array, byteOffset, length) {
  array.byteLength // this throws if `array` is not a valid ArrayBuffer

  if (byteOffset < 0 || array.byteLength < byteOffset) {
    throw new RangeError('\'offset\' is out of bounds')
  }

  if (array.byteLength < byteOffset + (length || 0)) {
    throw new RangeError('\'length\' is out of bounds')
  }

  if (byteOffset === undefined && length === undefined) {
    array = new Uint8Array(array)
  } else if (length === undefined) {
    array = new Uint8Array(array, byteOffset)
  } else {
    array = new Uint8Array(array, byteOffset, length)
  }

  if (Buffer.TYPED_ARRAY_SUPPORT) {
    // Return an augmented `Uint8Array` instance, for best performance
    that = array
    that.__proto__ = Buffer.prototype
  } else {
    // Fallback: Return an object instance of the Buffer class
    that = fromArrayLike(that, array)
  }
  return that
}

function fromObject (that, obj) {
  if (Buffer.isBuffer(obj)) {
    var len = checked(obj.length) | 0
    that = createBuffer(that, len)

    if (that.length === 0) {
      return that
    }

    obj.copy(that, 0, 0, len)
    return that
  }

  if (obj) {
    if ((typeof ArrayBuffer !== 'undefined' &&
        obj.buffer instanceof ArrayBuffer) || 'length' in obj) {
      if (typeof obj.length !== 'number' || isnan(obj.length)) {
        return createBuffer(that, 0)
      }
      return fromArrayLike(that, obj)
    }

    if (obj.type === 'Buffer' && isArray(obj.data)) {
      return fromArrayLike(that, obj.data)
    }
  }

  throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.')
}

function checked (length) {
  // Note: cannot use `length < kMaxLength()` here because that fails when
  // length is NaN (which is otherwise coerced to zero.)
  if (length >= kMaxLength()) {
    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +
                         'size: 0x' + kMaxLength().toString(16) + ' bytes')
  }
  return length | 0
}

function SlowBuffer (length) {
  if (+length != length) { // eslint-disable-line eqeqeq
    length = 0
  }
  return Buffer.alloc(+length)
}

Buffer.isBuffer = function isBuffer (b) {
  return !!(b != null && b._isBuffer)
}

Buffer.compare = function compare (a, b) {
  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {
    throw new TypeError('Arguments must be Buffers')
  }

  if (a === b) return 0

  var x = a.length
  var y = b.length

  for (var i = 0, len = Math.min(x, y); i < len; ++i) {
    if (a[i] !== b[i]) {
      x = a[i]
      y = b[i]
      break
    }
  }

  if (x < y) return -1
  if (y < x) return 1
  return 0
}

Buffer.isEncoding = function isEncoding (encoding) {
  switch (String(encoding).toLowerCase()) {
    case 'hex':
    case 'utf8':
    case 'utf-8':
    case 'ascii':
    case 'latin1':
    case 'binary':
    case 'base64':
    case 'ucs2':
    case 'ucs-2':
    case 'utf16le':
    case 'utf-16le':
      return true
    default:
      return false
  }
}

Buffer.concat = function concat (list, length) {
  if (!isArray(list)) {
    throw new TypeError('"list" argument must be an Array of Buffers')
  }

  if (list.length === 0) {
    return Buffer.alloc(0)
  }

  var i
  if (length === undefined) {
    length = 0
    for (i = 0; i < list.length; ++i) {
      length += list[i].length
    }
  }

  var buffer = Buffer.allocUnsafe(length)
  var pos = 0
  for (i = 0; i < list.length; ++i) {
    var buf = list[i]
    if (!Buffer.isBuffer(buf)) {
      throw new TypeError('"list" argument must be an Array of Buffers')
    }
    buf.copy(buffer, pos)
    pos += buf.length
  }
  return buffer
}

function byteLength (string, encoding) {
  if (Buffer.isBuffer(string)) {
    return string.length
  }
  if (typeof ArrayBuffer !== 'undefined' && typeof ArrayBuffer.isView === 'function' &&
      (ArrayBuffer.isView(string) || string instanceof ArrayBuffer)) {
    return string.byteLength
  }
  if (typeof string !== 'string') {
    string = '' + string
  }

  var len = string.length
  if (len === 0) return 0

  // Use a for loop to avoid recursion
  var loweredCase = false
  for (;;) {
    switch (encoding) {
      case 'ascii':
      case 'latin1':
      case 'binary':
        return len
      case 'utf8':
      case 'utf-8':
      case undefined:
        return utf8ToBytes(string).length
      case 'ucs2':
      case 'ucs-2':
      case 'utf16le':
      case 'utf-16le':
        return len * 2
      case 'hex':
        return len >>> 1
      case 'base64':
        return base64ToBytes(string).length
      default:
        if (loweredCase) return utf8ToBytes(string).length // assume utf8
        encoding = ('' + encoding).toLowerCase()
        loweredCase = true
    }
  }
}
Buffer.byteLength = byteLength

function slowToString (encoding, start, end) {
  var loweredCase = false

  // No need to verify that "this.length <= MAX_UINT32" since it's a read-only
  // property of a typed array.

  // This behaves neither like String nor Uint8Array in that we set start/end
  // to their upper/lower bounds if the value passed is out of range.
  // undefined is handled specially as per ECMA-262 6th Edition,
  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.
  if (start === undefined || start < 0) {
    start = 0
  }
  // Return early if start > this.length. Done here to prevent potential uint32
  // coercion fail below.
  if (start > this.length) {
    return ''
  }

  if (end === undefined || end > this.length) {
    end = this.length
  }

  if (end <= 0) {
    return ''
  }

  // Force coersion to uint32. This will also coerce falsey/NaN values to 0.
  end >>>= 0
  start >>>= 0

  if (end <= start) {
    return ''
  }

  if (!encoding) encoding = 'utf8'

  while (true) {
    switch (encoding) {
      case 'hex':
        return hexSlice(this, start, end)

      case 'utf8':
      case 'utf-8':
        return utf8Slice(this, start, end)

      case 'ascii':
        return asciiSlice(this, start, end)

      case 'latin1':
      case 'binary':
        return latin1Slice(this, start, end)

      case 'base64':
        return base64Slice(this, start, end)

      case 'ucs2':
      case 'ucs-2':
      case 'utf16le':
      case 'utf-16le':
        return utf16leSlice(this, start, end)

      default:
        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)
        encoding = (encoding + '').toLowerCase()
        loweredCase = true
    }
  }
}

// The property is used by `Buffer.isBuffer` and `is-buffer` (in Safari 5-7) to detect
// Buffer instances.
Buffer.prototype._isBuffer = true

function swap (b, n, m) {
  var i = b[n]
  b[n] = b[m]
  b[m] = i
}

Buffer.prototype.swap16 = function swap16 () {
  var len = this.length
  if (len % 2 !== 0) {
    throw new RangeError('Buffer size must be a multiple of 16-bits')
  }
  for (var i = 0; i < len; i += 2) {
    swap(this, i, i + 1)
  }
  return this
}

Buffer.prototype.swap32 = function swap32 () {
  var len = this.length
  if (len % 4 !== 0) {
    throw new RangeError('Buffer size must be a multiple of 32-bits')
  }
  for (var i = 0; i < len; i += 4) {
    swap(this, i, i + 3)
    swap(this, i + 1, i + 2)
  }
  return this
}

Buffer.prototype.swap64 = function swap64 () {
  var len = this.length
  if (len % 8 !== 0) {
    throw new RangeError('Buffer size must be a multiple of 64-bits')
  }
  for (var i = 0; i < len; i += 8) {
    swap(this, i, i + 7)
    swap(this, i + 1, i + 6)
    swap(this, i + 2, i + 5)
    swap(this, i + 3, i + 4)
  }
  return this
}

Buffer.prototype.toString = function toString () {
  var length = this.length | 0
  if (length === 0) return ''
  if (arguments.length === 0) return utf8Slice(this, 0, length)
  return slowToString.apply(this, arguments)
}

Buffer.prototype.equals = function equals (b) {
  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')
  if (this === b) return true
  return Buffer.compare(this, b) === 0
}

Buffer.prototype.inspect = function inspect () {
  var str = ''
  var max = exports.INSPECT_MAX_BYTES
  if (this.length > 0) {
    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ')
    if (this.length > max) str += ' ... '
  }
  return '<Buffer ' + str + '>'
}

Buffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {
  if (!Buffer.isBuffer(target)) {
    throw new TypeError('Argument must be a Buffer')
  }

  if (start === undefined) {
    start = 0
  }
  if (end === undefined) {
    end = target ? target.length : 0
  }
  if (thisStart === undefined) {
    thisStart = 0
  }
  if (thisEnd === undefined) {
    thisEnd = this.length
  }

  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {
    throw new RangeError('out of range index')
  }

  if (thisStart >= thisEnd && start >= end) {
    return 0
  }
  if (thisStart >= thisEnd) {
    return -1
  }
  if (start >= end) {
    return 1
  }

  start >>>= 0
  end >>>= 0
  thisStart >>>= 0
  thisEnd >>>= 0

  if (this === target) return 0

  var x = thisEnd - thisStart
  var y = end - start
  var len = Math.min(x, y)

  var thisCopy = this.slice(thisStart, thisEnd)
  var targetCopy = target.slice(start, end)

  for (var i = 0; i < len; ++i) {
    if (thisCopy[i] !== targetCopy[i]) {
      x = thisCopy[i]
      y = targetCopy[i]
      break
    }
  }

  if (x < y) return -1
  if (y < x) return 1
  return 0
}

// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,
// OR the last index of `val` in `buffer` at offset <= `byteOffset`.
//
// Arguments:
// - buffer - a Buffer to search
// - val - a string, Buffer, or number
// - byteOffset - an index into `buffer`; will be clamped to an int32
// - encoding - an optional encoding, relevant is val is a string
// - dir - true for indexOf, false for lastIndexOf
function bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {
  // Empty buffer means no match
  if (buffer.length === 0) return -1

  // Normalize byteOffset
  if (typeof byteOffset === 'string') {
    encoding = byteOffset
    byteOffset = 0
  } else if (byteOffset > 0x7fffffff) {
    byteOffset = 0x7fffffff
  } else if (byteOffset < -0x80000000) {
    byteOffset = -0x80000000
  }
  byteOffset = +byteOffset  // Coerce to Number.
  if (isNaN(byteOffset)) {
    // byteOffset: it it's undefined, null, NaN, "foo", etc, search whole buffer
    byteOffset = dir ? 0 : (buffer.length - 1)
  }

  // Normalize byteOffset: negative offsets start from the end of the buffer
  if (byteOffset < 0) byteOffset = buffer.length + byteOffset
  if (byteOffset >= buffer.length) {
    if (dir) return -1
    else byteOffset = buffer.length - 1
  } else if (byteOffset < 0) {
    if (dir) byteOffset = 0
    else return -1
  }

  // Normalize val
  if (typeof val === 'string') {
    val = Buffer.from(val, encoding)
  }

  // Finally, search either indexOf (if dir is true) or lastIndexOf
  if (Buffer.isBuffer(val)) {
    // Special case: looking for empty string/buffer always fails
    if (val.length === 0) {
      return -1
    }
    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)
  } else if (typeof val === 'number') {
    val = val & 0xFF // Search for a byte value [0-255]
    if (Buffer.TYPED_ARRAY_SUPPORT &&
        typeof Uint8Array.prototype.indexOf === 'function') {
      if (dir) {
        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)
      } else {
        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)
      }
    }
    return arrayIndexOf(buffer, [ val ], byteOffset, encoding, dir)
  }

  throw new TypeError('val must be string, number or Buffer')
}

function arrayIndexOf (arr, val, byteOffset, encoding, dir) {
  var indexSize = 1
  var arrLength = arr.length
  var valLength = val.length

  if (encoding !== undefined) {
    encoding = String(encoding).toLowerCase()
    if (encoding === 'ucs2' || encoding === 'ucs-2' ||
        encoding === 'utf16le' || encoding === 'utf-16le') {
      if (arr.length < 2 || val.length < 2) {
        return -1
      }
      indexSize = 2
      arrLength /= 2
      valLength /= 2
      byteOffset /= 2
    }
  }

  function read (buf, i) {
    if (indexSize === 1) {
      return buf[i]
    } else {
      return buf.readUInt16BE(i * indexSize)
    }
  }

  var i
  if (dir) {
    var foundIndex = -1
    for (i = byteOffset; i < arrLength; i++) {
      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {
        if (foundIndex === -1) foundIndex = i
        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize
      } else {
        if (foundIndex !== -1) i -= i - foundIndex
        foundIndex = -1
      }
    }
  } else {
    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength
    for (i = byteOffset; i >= 0; i--) {
      var found = true
      for (var j = 0; j < valLength; j++) {
        if (read(arr, i + j) !== read(val, j)) {
          found = false
          break
        }
      }
      if (found) return i
    }
  }

  return -1
}

Buffer.prototype.includes = function includes (val, byteOffset, encoding) {
  return this.indexOf(val, byteOffset, encoding) !== -1
}

Buffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {
  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)
}

Buffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {
  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)
}

function hexWrite (buf, string, offset, length) {
  offset = Number(offset) || 0
  var remaining = buf.length - offset
  if (!length) {
    length = remaining
  } else {
    length = Number(length)
    if (length > remaining) {
      length = remaining
    }
  }

  // must be an even number of digits
  var strLen = string.length
  if (strLen % 2 !== 0) throw new TypeError('Invalid hex string')

  if (length > strLen / 2) {
    length = strLen / 2
  }
  for (var i = 0; i < length; ++i) {
    var parsed = parseInt(string.substr(i * 2, 2), 16)
    if (isNaN(parsed)) return i
    buf[offset + i] = parsed
  }
  return i
}

function utf8Write (buf, string, offset, length) {
  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)
}

function asciiWrite (buf, string, offset, length) {
  return blitBuffer(asciiToBytes(string), buf, offset, length)
}

function latin1Write (buf, string, offset, length) {
  return asciiWrite(buf, string, offset, length)
}

function base64Write (buf, string, offset, length) {
  return blitBuffer(base64ToBytes(string), buf, offset, length)
}

function ucs2Write (buf, string, offset, length) {
  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)
}

Buffer.prototype.write = function write (string, offset, length, encoding) {
  // Buffer#write(string)
  if (offset === undefined) {
    encoding = 'utf8'
    length = this.length
    offset = 0
  // Buffer#write(string, encoding)
  } else if (length === undefined && typeof offset === 'string') {
    encoding = offset
    length = this.length
    offset = 0
  // Buffer#write(string, offset[, length][, encoding])
  } else if (isFinite(offset)) {
    offset = offset | 0
    if (isFinite(length)) {
      length = length | 0
      if (encoding === undefined) encoding = 'utf8'
    } else {
      encoding = length
      length = undefined
    }
  // legacy write(string, encoding, offset, length) - remove in v0.13
  } else {
    throw new Error(
      'Buffer.write(string, encoding, offset[, length]) is no longer supported'
    )
  }

  var remaining = this.length - offset
  if (length === undefined || length > remaining) length = remaining

  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {
    throw new RangeError('Attempt to write outside buffer bounds')
  }

  if (!encoding) encoding = 'utf8'

  var loweredCase = false
  for (;;) {
    switch (encoding) {
      case 'hex':
        return hexWrite(this, string, offset, length)

      case 'utf8':
      case 'utf-8':
        return utf8Write(this, string, offset, length)

      case 'ascii':
        return asciiWrite(this, string, offset, length)

      case 'latin1':
      case 'binary':
        return latin1Write(this, string, offset, length)

      case 'base64':
        // Warning: maxLength not taken into account in base64Write
        return base64Write(this, string, offset, length)

      case 'ucs2':
      case 'ucs-2':
      case 'utf16le':
      case 'utf-16le':
        return ucs2Write(this, string, offset, length)

      default:
        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)
        encoding = ('' + encoding).toLowerCase()
        loweredCase = true
    }
  }
}

Buffer.prototype.toJSON = function toJSON () {
  return {
    type: 'Buffer',
    data: Array.prototype.slice.call(this._arr || this, 0)
  }
}

function base64Slice (buf, start, end) {
  if (start === 0 && end === buf.length) {
    return base64.fromByteArray(buf)
  } else {
    return base64.fromByteArray(buf.slice(start, end))
  }
}

function utf8Slice (buf, start, end) {
  end = Math.min(buf.length, end)
  var res = []

  var i = start
  while (i < end) {
    var firstByte = buf[i]
    var codePoint = null
    var bytesPerSequence = (firstByte > 0xEF) ? 4
      : (firstByte > 0xDF) ? 3
      : (firstByte > 0xBF) ? 2
      : 1

    if (i + bytesPerSequence <= end) {
      var secondByte, thirdByte, fourthByte, tempCodePoint

      switch (bytesPerSequence) {
        case 1:
          if (firstByte < 0x80) {
            codePoint = firstByte
          }
          break
        case 2:
          secondByte = buf[i + 1]
          if ((secondByte & 0xC0) === 0x80) {
            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)
            if (tempCodePoint > 0x7F) {
              codePoint = tempCodePoint
            }
          }
          break
        case 3:
          secondByte = buf[i + 1]
          thirdByte = buf[i + 2]
          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {
            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)
            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {
              codePoint = tempCodePoint
            }
          }
          break
        case 4:
          secondByte = buf[i + 1]
          thirdByte = buf[i + 2]
          fourthByte = buf[i + 3]
          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {
            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)
            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {
              codePoint = tempCodePoint
            }
          }
      }
    }

    if (codePoint === null) {
      // we did not generate a valid codePoint so insert a
      // replacement char (U+FFFD) and advance only 1 byte
      codePoint = 0xFFFD
      bytesPerSequence = 1
    } else if (codePoint > 0xFFFF) {
      // encode to utf16 (surrogate pair dance)
      codePoint -= 0x10000
      res.push(codePoint >>> 10 & 0x3FF | 0xD800)
      codePoint = 0xDC00 | codePoint & 0x3FF
    }

    res.push(codePoint)
    i += bytesPerSequence
  }

  return decodeCodePointsArray(res)
}

// Based on http://stackoverflow.com/a/22747272/680742, the browser with
// the lowest limit is Chrome, with 0x10000 args.
// We go 1 magnitude less, for safety
var MAX_ARGUMENTS_LENGTH = 0x1000

function decodeCodePointsArray (codePoints) {
  var len = codePoints.length
  if (len <= MAX_ARGUMENTS_LENGTH) {
    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()
  }

  // Decode in chunks to avoid "call stack size exceeded".
  var res = ''
  var i = 0
  while (i < len) {
    res += String.fromCharCode.apply(
      String,
      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)
    )
  }
  return res
}

function asciiSlice (buf, start, end) {
  var ret = ''
  end = Math.min(buf.length, end)

  for (var i = start; i < end; ++i) {
    ret += String.fromCharCode(buf[i] & 0x7F)
  }
  return ret
}

function latin1Slice (buf, start, end) {
  var ret = ''
  end = Math.min(buf.length, end)

  for (var i = start; i < end; ++i) {
    ret += String.fromCharCode(buf[i])
  }
  return ret
}

function hexSlice (buf, start, end) {
  var len = buf.length

  if (!start || start < 0) start = 0
  if (!end || end < 0 || end > len) end = len

  var out = ''
  for (var i = start; i < end; ++i) {
    out += toHex(buf[i])
  }
  return out
}

function utf16leSlice (buf, start, end) {
  var bytes = buf.slice(start, end)
  var res = ''
  for (var i = 0; i < bytes.length; i += 2) {
    res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256)
  }
  return res
}

Buffer.prototype.slice = function slice (start, end) {
  var len = this.length
  start = ~~start
  end = end === undefined ? len : ~~end

  if (start < 0) {
    start += len
    if (start < 0) start = 0
  } else if (start > len) {
    start = len
  }

  if (end < 0) {
    end += len
    if (end < 0) end = 0
  } else if (end > len) {
    end = len
  }

  if (end < start) end = start

  var newBuf
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    newBuf = this.subarray(start, end)
    newBuf.__proto__ = Buffer.prototype
  } else {
    var sliceLen = end - start
    newBuf = new Buffer(sliceLen, undefined)
    for (var i = 0; i < sliceLen; ++i) {
      newBuf[i] = this[i + start]
    }
  }

  return newBuf
}

/*
 * Need to make sure that buffer isn't trying to write out of bounds.
 */
function checkOffset (offset, ext, length) {
  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')
  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')
}

Buffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {
  offset = offset | 0
  byteLength = byteLength | 0
  if (!noAssert) checkOffset(offset, byteLength, this.length)

  var val = this[offset]
  var mul = 1
  var i = 0
  while (++i < byteLength && (mul *= 0x100)) {
    val += this[offset + i] * mul
  }

  return val
}

Buffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {
  offset = offset | 0
  byteLength = byteLength | 0
  if (!noAssert) {
    checkOffset(offset, byteLength, this.length)
  }

  var val = this[offset + --byteLength]
  var mul = 1
  while (byteLength > 0 && (mul *= 0x100)) {
    val += this[offset + --byteLength] * mul
  }

  return val
}

Buffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 1, this.length)
  return this[offset]
}

Buffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 2, this.length)
  return this[offset] | (this[offset + 1] << 8)
}

Buffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 2, this.length)
  return (this[offset] << 8) | this[offset + 1]
}

Buffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 4, this.length)

  return ((this[offset]) |
      (this[offset + 1] << 8) |
      (this[offset + 2] << 16)) +
      (this[offset + 3] * 0x1000000)
}

Buffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 4, this.length)

  return (this[offset] * 0x1000000) +
    ((this[offset + 1] << 16) |
    (this[offset + 2] << 8) |
    this[offset + 3])
}

Buffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {
  offset = offset | 0
  byteLength = byteLength | 0
  if (!noAssert) checkOffset(offset, byteLength, this.length)

  var val = this[offset]
  var mul = 1
  var i = 0
  while (++i < byteLength && (mul *= 0x100)) {
    val += this[offset + i] * mul
  }
  mul *= 0x80

  if (val >= mul) val -= Math.pow(2, 8 * byteLength)

  return val
}

Buffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {
  offset = offset | 0
  byteLength = byteLength | 0
  if (!noAssert) checkOffset(offset, byteLength, this.length)

  var i = byteLength
  var mul = 1
  var val = this[offset + --i]
  while (i > 0 && (mul *= 0x100)) {
    val += this[offset + --i] * mul
  }
  mul *= 0x80

  if (val >= mul) val -= Math.pow(2, 8 * byteLength)

  return val
}

Buffer.prototype.readInt8 = function readInt8 (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 1, this.length)
  if (!(this[offset] & 0x80)) return (this[offset])
  return ((0xff - this[offset] + 1) * -1)
}

Buffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 2, this.length)
  var val = this[offset] | (this[offset + 1] << 8)
  return (val & 0x8000) ? val | 0xFFFF0000 : val
}

Buffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 2, this.length)
  var val = this[offset + 1] | (this[offset] << 8)
  return (val & 0x8000) ? val | 0xFFFF0000 : val
}

Buffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 4, this.length)

  return (this[offset]) |
    (this[offset + 1] << 8) |
    (this[offset + 2] << 16) |
    (this[offset + 3] << 24)
}

Buffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 4, this.length)

  return (this[offset] << 24) |
    (this[offset + 1] << 16) |
    (this[offset + 2] << 8) |
    (this[offset + 3])
}

Buffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 4, this.length)
  return ieee754.read(this, offset, true, 23, 4)
}

Buffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 4, this.length)
  return ieee754.read(this, offset, false, 23, 4)
}

Buffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 8, this.length)
  return ieee754.read(this, offset, true, 52, 8)
}

Buffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 8, this.length)
  return ieee754.read(this, offset, false, 52, 8)
}

function checkInt (buf, value, offset, ext, max, min) {
  if (!Buffer.isBuffer(buf)) throw new TypeError('"buffer" argument must be a Buffer instance')
  if (value > max || value < min) throw new RangeError('"value" argument is out of bounds')
  if (offset + ext > buf.length) throw new RangeError('Index out of range')
}

Buffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {
  value = +value
  offset = offset | 0
  byteLength = byteLength | 0
  if (!noAssert) {
    var maxBytes = Math.pow(2, 8 * byteLength) - 1
    checkInt(this, value, offset, byteLength, maxBytes, 0)
  }

  var mul = 1
  var i = 0
  this[offset] = value & 0xFF
  while (++i < byteLength && (mul *= 0x100)) {
    this[offset + i] = (value / mul) & 0xFF
  }

  return offset + byteLength
}

Buffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {
  value = +value
  offset = offset | 0
  byteLength = byteLength | 0
  if (!noAssert) {
    var maxBytes = Math.pow(2, 8 * byteLength) - 1
    checkInt(this, value, offset, byteLength, maxBytes, 0)
  }

  var i = byteLength - 1
  var mul = 1
  this[offset + i] = value & 0xFF
  while (--i >= 0 && (mul *= 0x100)) {
    this[offset + i] = (value / mul) & 0xFF
  }

  return offset + byteLength
}

Buffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)
  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)
  this[offset] = (value & 0xff)
  return offset + 1
}

function objectWriteUInt16 (buf, value, offset, littleEndian) {
  if (value < 0) value = 0xffff + value + 1
  for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; ++i) {
    buf[offset + i] = (value & (0xff << (8 * (littleEndian ? i : 1 - i)))) >>>
      (littleEndian ? i : 1 - i) * 8
  }
}

Buffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = (value & 0xff)
    this[offset + 1] = (value >>> 8)
  } else {
    objectWriteUInt16(this, value, offset, true)
  }
  return offset + 2
}

Buffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = (value >>> 8)
    this[offset + 1] = (value & 0xff)
  } else {
    objectWriteUInt16(this, value, offset, false)
  }
  return offset + 2
}

function objectWriteUInt32 (buf, value, offset, littleEndian) {
  if (value < 0) value = 0xffffffff + value + 1
  for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; ++i) {
    buf[offset + i] = (value >>> (littleEndian ? i : 3 - i) * 8) & 0xff
  }
}

Buffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset + 3] = (value >>> 24)
    this[offset + 2] = (value >>> 16)
    this[offset + 1] = (value >>> 8)
    this[offset] = (value & 0xff)
  } else {
    objectWriteUInt32(this, value, offset, true)
  }
  return offset + 4
}

Buffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = (value >>> 24)
    this[offset + 1] = (value >>> 16)
    this[offset + 2] = (value >>> 8)
    this[offset + 3] = (value & 0xff)
  } else {
    objectWriteUInt32(this, value, offset, false)
  }
  return offset + 4
}

Buffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) {
    var limit = Math.pow(2, 8 * byteLength - 1)

    checkInt(this, value, offset, byteLength, limit - 1, -limit)
  }

  var i = 0
  var mul = 1
  var sub = 0
  this[offset] = value & 0xFF
  while (++i < byteLength && (mul *= 0x100)) {
    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {
      sub = 1
    }
    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF
  }

  return offset + byteLength
}

Buffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) {
    var limit = Math.pow(2, 8 * byteLength - 1)

    checkInt(this, value, offset, byteLength, limit - 1, -limit)
  }

  var i = byteLength - 1
  var mul = 1
  var sub = 0
  this[offset + i] = value & 0xFF
  while (--i >= 0 && (mul *= 0x100)) {
    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {
      sub = 1
    }
    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF
  }

  return offset + byteLength
}

Buffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)
  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)
  if (value < 0) value = 0xff + value + 1
  this[offset] = (value & 0xff)
  return offset + 1
}

Buffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = (value & 0xff)
    this[offset + 1] = (value >>> 8)
  } else {
    objectWriteUInt16(this, value, offset, true)
  }
  return offset + 2
}

Buffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = (value >>> 8)
    this[offset + 1] = (value & 0xff)
  } else {
    objectWriteUInt16(this, value, offset, false)
  }
  return offset + 2
}

Buffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = (value & 0xff)
    this[offset + 1] = (value >>> 8)
    this[offset + 2] = (value >>> 16)
    this[offset + 3] = (value >>> 24)
  } else {
    objectWriteUInt32(this, value, offset, true)
  }
  return offset + 4
}

Buffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)
  if (value < 0) value = 0xffffffff + value + 1
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = (value >>> 24)
    this[offset + 1] = (value >>> 16)
    this[offset + 2] = (value >>> 8)
    this[offset + 3] = (value & 0xff)
  } else {
    objectWriteUInt32(this, value, offset, false)
  }
  return offset + 4
}

function checkIEEE754 (buf, value, offset, ext, max, min) {
  if (offset + ext > buf.length) throw new RangeError('Index out of range')
  if (offset < 0) throw new RangeError('Index out of range')
}

function writeFloat (buf, value, offset, littleEndian, noAssert) {
  if (!noAssert) {
    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)
  }
  ieee754.write(buf, value, offset, littleEndian, 23, 4)
  return offset + 4
}

Buffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {
  return writeFloat(this, value, offset, true, noAssert)
}

Buffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {
  return writeFloat(this, value, offset, false, noAssert)
}

function writeDouble (buf, value, offset, littleEndian, noAssert) {
  if (!noAssert) {
    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)
  }
  ieee754.write(buf, value, offset, littleEndian, 52, 8)
  return offset + 8
}

Buffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {
  return writeDouble(this, value, offset, true, noAssert)
}

Buffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {
  return writeDouble(this, value, offset, false, noAssert)
}

// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)
Buffer.prototype.copy = function copy (target, targetStart, start, end) {
  if (!start) start = 0
  if (!end && end !== 0) end = this.length
  if (targetStart >= target.length) targetStart = target.length
  if (!targetStart) targetStart = 0
  if (end > 0 && end < start) end = start

  // Copy 0 bytes; we're done
  if (end === start) return 0
  if (target.length === 0 || this.length === 0) return 0

  // Fatal error conditions
  if (targetStart < 0) {
    throw new RangeError('targetStart out of bounds')
  }
  if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds')
  if (end < 0) throw new RangeError('sourceEnd out of bounds')

  // Are we oob?
  if (end > this.length) end = this.length
  if (target.length - targetStart < end - start) {
    end = target.length - targetStart + start
  }

  var len = end - start
  var i

  if (this === target && start < targetStart && targetStart < end) {
    // descending copy from end
    for (i = len - 1; i >= 0; --i) {
      target[i + targetStart] = this[i + start]
    }
  } else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {
    // ascending copy from start
    for (i = 0; i < len; ++i) {
      target[i + targetStart] = this[i + start]
    }
  } else {
    Uint8Array.prototype.set.call(
      target,
      this.subarray(start, start + len),
      targetStart
    )
  }

  return len
}

// Usage:
//    buffer.fill(number[, offset[, end]])
//    buffer.fill(buffer[, offset[, end]])
//    buffer.fill(string[, offset[, end]][, encoding])
Buffer.prototype.fill = function fill (val, start, end, encoding) {
  // Handle string cases:
  if (typeof val === 'string') {
    if (typeof start === 'string') {
      encoding = start
      start = 0
      end = this.length
    } else if (typeof end === 'string') {
      encoding = end
      end = this.length
    }
    if (val.length === 1) {
      var code = val.charCodeAt(0)
      if (code < 256) {
        val = code
      }
    }
    if (encoding !== undefined && typeof encoding !== 'string') {
      throw new TypeError('encoding must be a string')
    }
    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {
      throw new TypeError('Unknown encoding: ' + encoding)
    }
  } else if (typeof val === 'number') {
    val = val & 255
  }

  // Invalid ranges are not set to a default, so can range check early.
  if (start < 0 || this.length < start || this.length < end) {
    throw new RangeError('Out of range index')
  }

  if (end <= start) {
    return this
  }

  start = start >>> 0
  end = end === undefined ? this.length : end >>> 0

  if (!val) val = 0

  var i
  if (typeof val === 'number') {
    for (i = start; i < end; ++i) {
      this[i] = val
    }
  } else {
    var bytes = Buffer.isBuffer(val)
      ? val
      : utf8ToBytes(new Buffer(val, encoding).toString())
    var len = bytes.length
    for (i = 0; i < end - start; ++i) {
      this[i + start] = bytes[i % len]
    }
  }

  return this
}

// HELPER FUNCTIONS
// ================

var INVALID_BASE64_RE = /[^+\/0-9A-Za-z-_]/g

function base64clean (str) {
  // Node strips out invalid characters like \n and \t from the string, base64-js does not
  str = stringtrim(str).replace(INVALID_BASE64_RE, '')
  // Node converts strings with length < 2 to ''
  if (str.length < 2) return ''
  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not
  while (str.length % 4 !== 0) {
    str = str + '='
  }
  return str
}

function stringtrim (str) {
  if (str.trim) return str.trim()
  return str.replace(/^\s+|\s+$/g, '')
}

function toHex (n) {
  if (n < 16) return '0' + n.toString(16)
  return n.toString(16)
}

function utf8ToBytes (string, units) {
  units = units || Infinity
  var codePoint
  var length = string.length
  var leadSurrogate = null
  var bytes = []

  for (var i = 0; i < length; ++i) {
    codePoint = string.charCodeAt(i)

    // is surrogate component
    if (codePoint > 0xD7FF && codePoint < 0xE000) {
      // last char was a lead
      if (!leadSurrogate) {
        // no lead yet
        if (codePoint > 0xDBFF) {
          // unexpected trail
          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)
          continue
        } else if (i + 1 === length) {
          // unpaired lead
          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)
          continue
        }

        // valid lead
        leadSurrogate = codePoint

        continue
      }

      // 2 leads in a row
      if (codePoint < 0xDC00) {
        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)
        leadSurrogate = codePoint
        continue
      }

      // valid surrogate pair
      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000
    } else if (leadSurrogate) {
      // valid bmp char, but last char was a lead
      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)
    }

    leadSurrogate = null

    // encode utf8
    if (codePoint < 0x80) {
      if ((units -= 1) < 0) break
      bytes.push(codePoint)
    } else if (codePoint < 0x800) {
      if ((units -= 2) < 0) break
      bytes.push(
        codePoint >> 0x6 | 0xC0,
        codePoint & 0x3F | 0x80
      )
    } else if (codePoint < 0x10000) {
      if ((units -= 3) < 0) break
      bytes.push(
        codePoint >> 0xC | 0xE0,
        codePoint >> 0x6 & 0x3F | 0x80,
        codePoint & 0x3F | 0x80
      )
    } else if (codePoint < 0x110000) {
      if ((units -= 4) < 0) break
      bytes.push(
        codePoint >> 0x12 | 0xF0,
        codePoint >> 0xC & 0x3F | 0x80,
        codePoint >> 0x6 & 0x3F | 0x80,
        codePoint & 0x3F | 0x80
      )
    } else {
      throw new Error('Invalid code point')
    }
  }

  return bytes
}

function asciiToBytes (str) {
  var byteArray = []
  for (var i = 0; i < str.length; ++i) {
    // Node's code seems to be doing this and not & 0x7F..
    byteArray.push(str.charCodeAt(i) & 0xFF)
  }
  return byteArray
}

function utf16leToBytes (str, units) {
  var c, hi, lo
  var byteArray = []
  for (var i = 0; i < str.length; ++i) {
    if ((units -= 2) < 0) break

    c = str.charCodeAt(i)
    hi = c >> 8
    lo = c % 256
    byteArray.push(lo)
    byteArray.push(hi)
  }

  return byteArray
}

function base64ToBytes (str) {
  return base64.toByteArray(base64clean(str))
}

function blitBuffer (src, dst, offset, length) {
  for (var i = 0; i < length; ++i) {
    if ((i + offset >= dst.length) || (i >= src.length)) break
    dst[i + offset] = src[i]
  }
  return i
}

function isnan (val) {
  return val !== val // eslint-disable-line no-self-compare
}

/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../@grafana/toolkit/node_modules/webpack/buildin/global.js */ "../node_modules/@grafana/toolkit/node_modules/webpack/buildin/global.js")))

/***/ }),

/***/ "../node_modules/copy-to-clipboard/index.js":
/*!**************************************************!*\
  !*** ../node_modules/copy-to-clipboard/index.js ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var deselectCurrent = __webpack_require__(/*! toggle-selection */ "../node_modules/toggle-selection/index.js");

var clipboardToIE11Formatting = {
  "text/plain": "Text",
  "text/html": "Url",
  "default": "Text"
}

var defaultMessage = "Copy to clipboard: #{key}, Enter";

function format(message) {
  var copyKey = (/mac os x/i.test(navigator.userAgent) ? "⌘" : "Ctrl") + "+C";
  return message.replace(/#{\s*key\s*}/g, copyKey);
}

function copy(text, options) {
  var debug,
    message,
    reselectPrevious,
    range,
    selection,
    mark,
    success = false;
  if (!options) {
    options = {};
  }
  debug = options.debug || false;
  try {
    reselectPrevious = deselectCurrent();

    range = document.createRange();
    selection = document.getSelection();

    mark = document.createElement("span");
    mark.textContent = text;
    // reset user styles for span element
    mark.style.all = "unset";
    // prevents scrolling to the end of the page
    mark.style.position = "fixed";
    mark.style.top = 0;
    mark.style.clip = "rect(0, 0, 0, 0)";
    // used to preserve spaces and line breaks
    mark.style.whiteSpace = "pre";
    // do not inherit user-select (it may be `none`)
    mark.style.webkitUserSelect = "text";
    mark.style.MozUserSelect = "text";
    mark.style.msUserSelect = "text";
    mark.style.userSelect = "text";
    mark.addEventListener("copy", function(e) {
      e.stopPropagation();
      if (options.format) {
        e.preventDefault();
        if (typeof e.clipboardData === "undefined") { // IE 11
          debug && console.warn("unable to use e.clipboardData");
          debug && console.warn("trying IE specific stuff");
          window.clipboardData.clearData();
          var format = clipboardToIE11Formatting[options.format] || clipboardToIE11Formatting["default"]
          window.clipboardData.setData(format, text);
        } else { // all other browsers
          e.clipboardData.clearData();
          e.clipboardData.setData(options.format, text);
        }
      }
      if (options.onCopy) {
        e.preventDefault();
        options.onCopy(e.clipboardData);
      }
    });

    document.body.appendChild(mark);

    range.selectNodeContents(mark);
    selection.addRange(range);

    var successful = document.execCommand("copy");
    if (!successful) {
      throw new Error("copy command was unsuccessful");
    }
    success = true;
  } catch (err) {
    debug && console.error("unable to copy using execCommand: ", err);
    debug && console.warn("trying IE specific stuff");
    try {
      window.clipboardData.setData(options.format || "text", text);
      options.onCopy && options.onCopy(window.clipboardData);
      success = true;
    } catch (err) {
      debug && console.error("unable to copy using clipboardData: ", err);
      debug && console.error("falling back to prompt");
      message = format("message" in options ? options.message : defaultMessage);
      window.prompt(message, text);
    }
  } finally {
    if (selection) {
      if (typeof selection.removeRange == "function") {
        selection.removeRange(range);
      } else {
        selection.removeAllRanges();
      }
    }

    if (mark) {
      document.body.removeChild(mark);
    }
    reselectPrevious();
  }

  return success;
}

module.exports = copy;


/***/ }),

/***/ "../node_modules/css-loader/dist/cjs.js?!../node_modules/postcss-loader/src/index.js?!../node_modules/less-loader/dist/cjs.js?!./datasource/log-service/index.less":
/*!**********************************************************************************************************************************************************************************************!*\
  !*** ../node_modules/css-loader/dist/cjs.js??ref--10-1!../node_modules/postcss-loader/src??ref--10-2!../node_modules/less-loader/dist/cjs.js??ref--10-3!./datasource/log-service/index.less ***!
  \**********************************************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

// Imports
var ___CSS_LOADER_API_IMPORT___ = __webpack_require__(/*! ../../../node_modules/css-loader/dist/runtime/api.js */ "../node_modules/css-loader/dist/runtime/api.js");
exports = ___CSS_LOADER_API_IMPORT___(true);
// Module
exports.push([module.i, ".log-service-monospaced-font-family {\n  font-family: RobotoMono-Regular, monospace, Roboto, sans-serif;\n}\n.log-service-monospaced-font-family button,\n.log-service-monospaced-font-family input,\n.log-service-monospaced-font-family select,\n.log-service-monospaced-font-family textarea {\n  font-family: RobotoMono-Regular, monospace, Roboto, sans-serif;\n}\n", "",{"version":3,"sources":["index.less"],"names":[],"mappings":"AAAA;EACE,8DAA8D;AAChE;AACA;;;;EAIE,8DAA8D;AAChE","file":"index.less","sourcesContent":[".log-service-monospaced-font-family {\n  font-family: RobotoMono-Regular, monospace, Roboto, sans-serif;\n}\n.log-service-monospaced-font-family button,\n.log-service-monospaced-font-family input,\n.log-service-monospaced-font-family select,\n.log-service-monospaced-font-family textarea {\n  font-family: RobotoMono-Regular, monospace, Roboto, sans-serif;\n}\n"]}]);
// Exports
module.exports = exports;


/***/ }),

/***/ "../node_modules/css-loader/dist/cjs.js?!../node_modules/postcss-loader/src/index.js?!../node_modules/sass-loader/dist/cjs.js!./datasource/query-ctrl/css/query_editor.css":
/*!******************************************************************************************************************************************************************************************!*\
  !*** ../node_modules/css-loader/dist/cjs.js??ref--8-1!../node_modules/postcss-loader/src??ref--8-2!../node_modules/sass-loader/dist/cjs.js!./datasource/query-ctrl/css/query_editor.css ***!
  \******************************************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

// Imports
var ___CSS_LOADER_API_IMPORT___ = __webpack_require__(/*! ../../../../node_modules/css-loader/dist/runtime/api.js */ "../node_modules/css-loader/dist/runtime/api.js");
exports = ___CSS_LOADER_API_IMPORT___(true);
// Module
exports.push([module.i, ".tc-sub-params {\n  margin-top: 4px;\n  margin-left: 125px;\n}\n\n.tc-sub-params .gf-form-inline {\n  min-height: 42px;\n}\n\n.tc-sub-params .gf-form-inline .gf-form-label {\n  margin-bottom: 2px;\n}\n\n.tc-sub-params .tc-info-label {\n  margin-bottom: 6px;\n}\n\n.tc-sub-params .tc-info-label > a {\n  margin-left: 10px;\n}\n\n.tc-switch {\n  border-left: 1px solid #262628;\n  margin-bottom: 0 !important;\n}\n\n.tc-condition-block {\n  margin-right: 10px;\n  display: inline-block;\n}\n\n.tc-condition-block .tc-condition-input {\n  border-radius: 0;\n}\n\n.tc-condition-block .tc-condition-minus {\n  vertical-align: top;\n  border-radius: 0 3px 3px 0;\n}\n\n.tc-condition-block .tc-condition-dropdown {\n  display: inline-block;\n}\n\n.tc-condition-block > input {\n  display: inline-block;\n  margin-right: 0;\n}\n\n.tc-condition-block > label {\n  display: inline-block;\n}\n\n.tc-condition-add {\n  display: inline-block;\n  vertical-align: top;\n}\n\n.tc-condition-add > label {\n  border-radius: 3px;\n}\n\n.filtered-color {\n  color: #ff851b;\n}\n\n.secret-tips {\n  position: absolute;\n  right: -25px;\n  border-radius: 2px;\n  background: #1b1b1b;\n  padding: 10px;\n  top: -35px;\n  width: 300px;\n  border: 1px solid #2c3235;\n}\n\n.secret-tips-tri {\n  position: absolute;\n  width: 15px;\n  height: 15px;\n  left: -8px;\n  top: 60px;\n  background: #1b1b1b;\n  border: 1px solid #2c3235;\n  border-top: 0;\n  border-right: 0;\n  transform: rotate(45deg);\n}\n\n.rc-cascader-menu-item {\n  min-width: 160px;\n  font-size: 14px;\n}", "",{"version":3,"sources":["query_editor.css"],"names":[],"mappings":"AAAA;EACE,eAAe;EACf,kBAAkB;AACpB;;AAEA;EACE,gBAAgB;AAClB;;AAEA;EACE,kBAAkB;AACpB;;AAEA;EACE,kBAAkB;AACpB;;AAEA;EACE,iBAAiB;AACnB;;AAEA;EACE,8BAA8B;EAC9B,2BAA2B;AAC7B;;AAEA;EACE,kBAAkB;EAClB,qBAAqB;AACvB;;AAEA;EACE,gBAAgB;AAClB;;AAEA;EACE,mBAAmB;EACnB,0BAA0B;AAC5B;;AAEA;EACE,qBAAqB;AACvB;;AAEA;EACE,qBAAqB;EACrB,eAAe;AACjB;;AAEA;EACE,qBAAqB;AACvB;;AAEA;EACE,qBAAqB;EACrB,mBAAmB;AACrB;;AAEA;EACE,kBAAkB;AACpB;;AAEA;EACE,cAAc;AAChB;;AAEA;EACE,kBAAkB;EAClB,YAAY;EACZ,kBAAkB;EAClB,mBAAmB;EACnB,aAAa;EACb,UAAU;EACV,YAAY;EACZ,yBAAyB;AAC3B;;AAEA;EACE,kBAAkB;EAClB,WAAW;EACX,YAAY;EACZ,UAAU;EACV,SAAS;EACT,mBAAmB;EACnB,yBAAyB;EACzB,aAAa;EACb,eAAe;EACf,wBAAwB;AAC1B;;AAEA;EACE,gBAAgB;EAChB,eAAe;AACjB","file":"query_editor.css","sourcesContent":[".tc-sub-params {\n  margin-top: 4px;\n  margin-left: 125px;\n}\n\n.tc-sub-params .gf-form-inline {\n  min-height: 42px;\n}\n\n.tc-sub-params .gf-form-inline .gf-form-label {\n  margin-bottom: 2px;\n}\n\n.tc-sub-params .tc-info-label {\n  margin-bottom: 6px;\n}\n\n.tc-sub-params .tc-info-label > a {\n  margin-left: 10px;\n}\n\n.tc-switch {\n  border-left: 1px solid #262628;\n  margin-bottom: 0 !important;\n}\n\n.tc-condition-block {\n  margin-right: 10px;\n  display: inline-block;\n}\n\n.tc-condition-block .tc-condition-input {\n  border-radius: 0;\n}\n\n.tc-condition-block .tc-condition-minus {\n  vertical-align: top;\n  border-radius: 0 3px 3px 0;\n}\n\n.tc-condition-block .tc-condition-dropdown {\n  display: inline-block;\n}\n\n.tc-condition-block > input {\n  display: inline-block;\n  margin-right: 0;\n}\n\n.tc-condition-block > label {\n  display: inline-block;\n}\n\n.tc-condition-add {\n  display: inline-block;\n  vertical-align: top;\n}\n\n.tc-condition-add > label {\n  border-radius: 3px;\n}\n\n.filtered-color {\n  color: #ff851b;\n}\n\n.secret-tips {\n  position: absolute;\n  right: -25px;\n  border-radius: 2px;\n  background: #1b1b1b;\n  padding: 10px;\n  top: -35px;\n  width: 300px;\n  border: 1px solid #2c3235;\n}\n\n.secret-tips-tri {\n  position: absolute;\n  width: 15px;\n  height: 15px;\n  left: -8px;\n  top: 60px;\n  background: #1b1b1b;\n  border: 1px solid #2c3235;\n  border-top: 0;\n  border-right: 0;\n  transform: rotate(45deg);\n}\n\n.rc-cascader-menu-item {\n  min-width: 160px;\n  font-size: 14px;\n}"]}]);
// Exports
module.exports = exports;


/***/ }),

/***/ "../node_modules/css-loader/dist/runtime/api.js":
/*!******************************************************!*\
  !*** ../node_modules/css-loader/dist/runtime/api.js ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


/*
  MIT License http://www.opensource.org/licenses/mit-license.php
  Author Tobias Koppers @sokra
*/
// css base code, injected by the css-loader
// eslint-disable-next-line func-names
module.exports = function (useSourceMap) {
  var list = []; // return the list of modules as css string

  list.toString = function toString() {
    return this.map(function (item) {
      var content = cssWithMappingToString(item, useSourceMap);

      if (item[2]) {
        return "@media ".concat(item[2], " {").concat(content, "}");
      }

      return content;
    }).join('');
  }; // import a list of modules into the list
  // eslint-disable-next-line func-names


  list.i = function (modules, mediaQuery, dedupe) {
    if (typeof modules === 'string') {
      // eslint-disable-next-line no-param-reassign
      modules = [[null, modules, '']];
    }

    var alreadyImportedModules = {};

    if (dedupe) {
      for (var i = 0; i < this.length; i++) {
        // eslint-disable-next-line prefer-destructuring
        var id = this[i][0];

        if (id != null) {
          alreadyImportedModules[id] = true;
        }
      }
    }

    for (var _i = 0; _i < modules.length; _i++) {
      var item = [].concat(modules[_i]);

      if (dedupe && alreadyImportedModules[item[0]]) {
        // eslint-disable-next-line no-continue
        continue;
      }

      if (mediaQuery) {
        if (!item[2]) {
          item[2] = mediaQuery;
        } else {
          item[2] = "".concat(mediaQuery, " and ").concat(item[2]);
        }
      }

      list.push(item);
    }
  };

  return list;
};

function cssWithMappingToString(item, useSourceMap) {
  var content = item[1] || ''; // eslint-disable-next-line prefer-destructuring

  var cssMapping = item[3];

  if (!cssMapping) {
    return content;
  }

  if (useSourceMap && typeof btoa === 'function') {
    var sourceMapping = toComment(cssMapping);
    var sourceURLs = cssMapping.sources.map(function (source) {
      return "/*# sourceURL=".concat(cssMapping.sourceRoot || '').concat(source, " */");
    });
    return [content].concat(sourceURLs).concat([sourceMapping]).join('\n');
  }

  return [content].join('\n');
} // Adapted from convert-source-map (MIT)


function toComment(sourceMap) {
  // eslint-disable-next-line no-undef
  var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));
  var data = "sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(base64);
  return "/*# ".concat(data, " */");
}

/***/ }),

/***/ "../node_modules/eventemitter3/index.js":
/*!**********************************************!*\
  !*** ../node_modules/eventemitter3/index.js ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var has = Object.prototype.hasOwnProperty
  , prefix = '~';

/**
 * Constructor to create a storage for our `EE` objects.
 * An `Events` instance is a plain object whose properties are event names.
 *
 * @constructor
 * @private
 */
function Events() {}

//
// We try to not inherit from `Object.prototype`. In some engines creating an
// instance in this way is faster than calling `Object.create(null)` directly.
// If `Object.create(null)` is not supported we prefix the event names with a
// character to make sure that the built-in object properties are not
// overridden or used as an attack vector.
//
if (Object.create) {
  Events.prototype = Object.create(null);

  //
  // This hack is needed because the `__proto__` property is still inherited in
  // some old browsers like Android 4, iPhone 5.1, Opera 11 and Safari 5.
  //
  if (!new Events().__proto__) prefix = false;
}

/**
 * Representation of a single event listener.
 *
 * @param {Function} fn The listener function.
 * @param {*} context The context to invoke the listener with.
 * @param {Boolean} [once=false] Specify if the listener is a one-time listener.
 * @constructor
 * @private
 */
function EE(fn, context, once) {
  this.fn = fn;
  this.context = context;
  this.once = once || false;
}

/**
 * Add a listener for a given event.
 *
 * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.
 * @param {(String|Symbol)} event The event name.
 * @param {Function} fn The listener function.
 * @param {*} context The context to invoke the listener with.
 * @param {Boolean} once Specify if the listener is a one-time listener.
 * @returns {EventEmitter}
 * @private
 */
function addListener(emitter, event, fn, context, once) {
  if (typeof fn !== 'function') {
    throw new TypeError('The listener must be a function');
  }

  var listener = new EE(fn, context || emitter, once)
    , evt = prefix ? prefix + event : event;

  if (!emitter._events[evt]) emitter._events[evt] = listener, emitter._eventsCount++;
  else if (!emitter._events[evt].fn) emitter._events[evt].push(listener);
  else emitter._events[evt] = [emitter._events[evt], listener];

  return emitter;
}

/**
 * Clear event by name.
 *
 * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.
 * @param {(String|Symbol)} evt The Event name.
 * @private
 */
function clearEvent(emitter, evt) {
  if (--emitter._eventsCount === 0) emitter._events = new Events();
  else delete emitter._events[evt];
}

/**
 * Minimal `EventEmitter` interface that is molded against the Node.js
 * `EventEmitter` interface.
 *
 * @constructor
 * @public
 */
function EventEmitter() {
  this._events = new Events();
  this._eventsCount = 0;
}

/**
 * Return an array listing the events for which the emitter has registered
 * listeners.
 *
 * @returns {Array}
 * @public
 */
EventEmitter.prototype.eventNames = function eventNames() {
  var names = []
    , events
    , name;

  if (this._eventsCount === 0) return names;

  for (name in (events = this._events)) {
    if (has.call(events, name)) names.push(prefix ? name.slice(1) : name);
  }

  if (Object.getOwnPropertySymbols) {
    return names.concat(Object.getOwnPropertySymbols(events));
  }

  return names;
};

/**
 * Return the listeners registered for a given event.
 *
 * @param {(String|Symbol)} event The event name.
 * @returns {Array} The registered listeners.
 * @public
 */
EventEmitter.prototype.listeners = function listeners(event) {
  var evt = prefix ? prefix + event : event
    , handlers = this._events[evt];

  if (!handlers) return [];
  if (handlers.fn) return [handlers.fn];

  for (var i = 0, l = handlers.length, ee = new Array(l); i < l; i++) {
    ee[i] = handlers[i].fn;
  }

  return ee;
};

/**
 * Return the number of listeners listening to a given event.
 *
 * @param {(String|Symbol)} event The event name.
 * @returns {Number} The number of listeners.
 * @public
 */
EventEmitter.prototype.listenerCount = function listenerCount(event) {
  var evt = prefix ? prefix + event : event
    , listeners = this._events[evt];

  if (!listeners) return 0;
  if (listeners.fn) return 1;
  return listeners.length;
};

/**
 * Calls each of the listeners registered for a given event.
 *
 * @param {(String|Symbol)} event The event name.
 * @returns {Boolean} `true` if the event had listeners, else `false`.
 * @public
 */
EventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {
  var evt = prefix ? prefix + event : event;

  if (!this._events[evt]) return false;

  var listeners = this._events[evt]
    , len = arguments.length
    , args
    , i;

  if (listeners.fn) {
    if (listeners.once) this.removeListener(event, listeners.fn, undefined, true);

    switch (len) {
      case 1: return listeners.fn.call(listeners.context), true;
      case 2: return listeners.fn.call(listeners.context, a1), true;
      case 3: return listeners.fn.call(listeners.context, a1, a2), true;
      case 4: return listeners.fn.call(listeners.context, a1, a2, a3), true;
      case 5: return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;
      case 6: return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;
    }

    for (i = 1, args = new Array(len -1); i < len; i++) {
      args[i - 1] = arguments[i];
    }

    listeners.fn.apply(listeners.context, args);
  } else {
    var length = listeners.length
      , j;

    for (i = 0; i < length; i++) {
      if (listeners[i].once) this.removeListener(event, listeners[i].fn, undefined, true);

      switch (len) {
        case 1: listeners[i].fn.call(listeners[i].context); break;
        case 2: listeners[i].fn.call(listeners[i].context, a1); break;
        case 3: listeners[i].fn.call(listeners[i].context, a1, a2); break;
        case 4: listeners[i].fn.call(listeners[i].context, a1, a2, a3); break;
        default:
          if (!args) for (j = 1, args = new Array(len -1); j < len; j++) {
            args[j - 1] = arguments[j];
          }

          listeners[i].fn.apply(listeners[i].context, args);
      }
    }
  }

  return true;
};

/**
 * Add a listener for a given event.
 *
 * @param {(String|Symbol)} event The event name.
 * @param {Function} fn The listener function.
 * @param {*} [context=this] The context to invoke the listener with.
 * @returns {EventEmitter} `this`.
 * @public
 */
EventEmitter.prototype.on = function on(event, fn, context) {
  return addListener(this, event, fn, context, false);
};

/**
 * Add a one-time listener for a given event.
 *
 * @param {(String|Symbol)} event The event name.
 * @param {Function} fn The listener function.
 * @param {*} [context=this] The context to invoke the listener with.
 * @returns {EventEmitter} `this`.
 * @public
 */
EventEmitter.prototype.once = function once(event, fn, context) {
  return addListener(this, event, fn, context, true);
};

/**
 * Remove the listeners of a given event.
 *
 * @param {(String|Symbol)} event The event name.
 * @param {Function} fn Only remove the listeners that match this function.
 * @param {*} context Only remove the listeners that have this context.
 * @param {Boolean} once Only remove one-time listeners.
 * @returns {EventEmitter} `this`.
 * @public
 */
EventEmitter.prototype.removeListener = function removeListener(event, fn, context, once) {
  var evt = prefix ? prefix + event : event;

  if (!this._events[evt]) return this;
  if (!fn) {
    clearEvent(this, evt);
    return this;
  }

  var listeners = this._events[evt];

  if (listeners.fn) {
    if (
      listeners.fn === fn &&
      (!once || listeners.once) &&
      (!context || listeners.context === context)
    ) {
      clearEvent(this, evt);
    }
  } else {
    for (var i = 0, events = [], length = listeners.length; i < length; i++) {
      if (
        listeners[i].fn !== fn ||
        (once && !listeners[i].once) ||
        (context && listeners[i].context !== context)
      ) {
        events.push(listeners[i]);
      }
    }

    //
    // Reset the array, or remove it completely if we have no more listeners.
    //
    if (events.length) this._events[evt] = events.length === 1 ? events[0] : events;
    else clearEvent(this, evt);
  }

  return this;
};

/**
 * Remove all listeners, or those of the specified event.
 *
 * @param {(String|Symbol)} [event] The event name.
 * @returns {EventEmitter} `this`.
 * @public
 */
EventEmitter.prototype.removeAllListeners = function removeAllListeners(event) {
  var evt;

  if (event) {
    evt = prefix ? prefix + event : event;
    if (this._events[evt]) clearEvent(this, evt);
  } else {
    this._events = new Events();
    this._eventsCount = 0;
  }

  return this;
};

//
// Alias methods names because people roll like that.
//
EventEmitter.prototype.off = EventEmitter.prototype.removeListener;
EventEmitter.prototype.addListener = EventEmitter.prototype.on;

//
// Expose the prefix.
//
EventEmitter.prefixed = prefix;

//
// Allow `EventEmitter` to be imported as module namespace.
//
EventEmitter.EventEmitter = EventEmitter;

//
// Expose the module.
//
if (true) {
  module.exports = EventEmitter;
}


/***/ }),

/***/ "../node_modules/fast-deep-equal/react.js":
/*!************************************************!*\
  !*** ../node_modules/fast-deep-equal/react.js ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


// do not edit .js files directly - edit src/index.jst



module.exports = function equal(a, b) {
  if (a === b) return true;

  if (a && b && typeof a == 'object' && typeof b == 'object') {
    if (a.constructor !== b.constructor) return false;

    var length, i, keys;
    if (Array.isArray(a)) {
      length = a.length;
      if (length != b.length) return false;
      for (i = length; i-- !== 0;)
        if (!equal(a[i], b[i])) return false;
      return true;
    }



    if (a.constructor === RegExp) return a.source === b.source && a.flags === b.flags;
    if (a.valueOf !== Object.prototype.valueOf) return a.valueOf() === b.valueOf();
    if (a.toString !== Object.prototype.toString) return a.toString() === b.toString();

    keys = Object.keys(a);
    length = keys.length;
    if (length !== Object.keys(b).length) return false;

    for (i = length; i-- !== 0;)
      if (!Object.prototype.hasOwnProperty.call(b, keys[i])) return false;

    for (i = length; i-- !== 0;) {
      var key = keys[i];

      if (key === '_owner' && a.$$typeof) {
        // React-specific: avoid traversing React elements' _owner.
        //  _owner contains circular references
        // and is not needed when comparing the actual elements (and not their owners)
        continue;
      }

      if (!equal(a[key], b[key])) return false;
    }

    return true;
  }

  // true if both NaN, false otherwise
  return a!==a && b!==b;
};


/***/ }),

/***/ "../node_modules/fast-shallow-equal/index.js":
/*!***************************************************!*\
  !*** ../node_modules/fast-shallow-equal/index.js ***!
  \***************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

var keyList = Object.keys;

exports.equal = function equal (a, b) {
  if (a === b) return true;
  if (!(a instanceof Object) || !(b instanceof Object)) return false;

  var keys = keyList(a);
  var length = keys.length;

  for (var i = 0; i < length; i++)
    if (!(keys[i] in b)) return false;

  for (var i = 0; i < length; i++)
    if (a[keys[i]] !== b[keys[i]]) return false;

  return length === keyList(b).length;
};


/***/ }),

/***/ "../node_modules/ieee754/index.js":
/*!****************************************!*\
  !*** ../node_modules/ieee754/index.js ***!
  \****************************************/
/*! no static exports found */
/***/ (function(module, exports) {

/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
exports.read = function (buffer, offset, isLE, mLen, nBytes) {
  var e, m
  var eLen = (nBytes * 8) - mLen - 1
  var eMax = (1 << eLen) - 1
  var eBias = eMax >> 1
  var nBits = -7
  var i = isLE ? (nBytes - 1) : 0
  var d = isLE ? -1 : 1
  var s = buffer[offset + i]

  i += d

  e = s & ((1 << (-nBits)) - 1)
  s >>= (-nBits)
  nBits += eLen
  for (; nBits > 0; e = (e * 256) + buffer[offset + i], i += d, nBits -= 8) {}

  m = e & ((1 << (-nBits)) - 1)
  e >>= (-nBits)
  nBits += mLen
  for (; nBits > 0; m = (m * 256) + buffer[offset + i], i += d, nBits -= 8) {}

  if (e === 0) {
    e = 1 - eBias
  } else if (e === eMax) {
    return m ? NaN : ((s ? -1 : 1) * Infinity)
  } else {
    m = m + Math.pow(2, mLen)
    e = e - eBias
  }
  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)
}

exports.write = function (buffer, value, offset, isLE, mLen, nBytes) {
  var e, m, c
  var eLen = (nBytes * 8) - mLen - 1
  var eMax = (1 << eLen) - 1
  var eBias = eMax >> 1
  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)
  var i = isLE ? 0 : (nBytes - 1)
  var d = isLE ? 1 : -1
  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0

  value = Math.abs(value)

  if (isNaN(value) || value === Infinity) {
    m = isNaN(value) ? 1 : 0
    e = eMax
  } else {
    e = Math.floor(Math.log(value) / Math.LN2)
    if (value * (c = Math.pow(2, -e)) < 1) {
      e--
      c *= 2
    }
    if (e + eBias >= 1) {
      value += rt / c
    } else {
      value += rt * Math.pow(2, 1 - eBias)
    }
    if (value * c >= 2) {
      e++
      c /= 2
    }

    if (e + eBias >= eMax) {
      m = 0
      e = eMax
    } else if (e + eBias >= 1) {
      m = ((value * c) - 1) * Math.pow(2, mLen)
      e = e + eBias
    } else {
      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)
      e = 0
    }
  }

  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}

  e = (e << mLen) | m
  eLen += mLen
  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}

  buffer[offset + i - d] |= s * 128
}


/***/ }),

/***/ "../node_modules/isarray/index.js":
/*!****************************************!*\
  !*** ../node_modules/isarray/index.js ***!
  \****************************************/
/*! no static exports found */
/***/ (function(module, exports) {

var toString = {}.toString;

module.exports = Array.isArray || function (arr) {
  return toString.call(arr) == '[object Array]';
};


/***/ }),

/***/ "../node_modules/js-cookie/src/js.cookie.js":
/*!**************************************************!*\
  !*** ../node_modules/js-cookie/src/js.cookie.js ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_RESULT__;/*!
 * JavaScript Cookie v2.2.1
 * https://github.com/js-cookie/js-cookie
 *
 * Copyright 2006, 2015 Klaus Hartl & Fagner Brack
 * Released under the MIT license
 */
;(function (factory) {
	var registeredInModuleLoader;
	if (true) {
		!(__WEBPACK_AMD_DEFINE_FACTORY__ = (factory),
				__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?
				(__WEBPACK_AMD_DEFINE_FACTORY__.call(exports, __webpack_require__, exports, module)) :
				__WEBPACK_AMD_DEFINE_FACTORY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));
		registeredInModuleLoader = true;
	}
	if (true) {
		module.exports = factory();
		registeredInModuleLoader = true;
	}
	if (!registeredInModuleLoader) {
		var OldCookies = window.Cookies;
		var api = window.Cookies = factory();
		api.noConflict = function () {
			window.Cookies = OldCookies;
			return api;
		};
	}
}(function () {
	function extend () {
		var i = 0;
		var result = {};
		for (; i < arguments.length; i++) {
			var attributes = arguments[ i ];
			for (var key in attributes) {
				result[key] = attributes[key];
			}
		}
		return result;
	}

	function decode (s) {
		return s.replace(/(%[0-9A-Z]{2})+/g, decodeURIComponent);
	}

	function init (converter) {
		function api() {}

		function set (key, value, attributes) {
			if (typeof document === 'undefined') {
				return;
			}

			attributes = extend({
				path: '/'
			}, api.defaults, attributes);

			if (typeof attributes.expires === 'number') {
				attributes.expires = new Date(new Date() * 1 + attributes.expires * 864e+5);
			}

			// We're using "expires" because "max-age" is not supported by IE
			attributes.expires = attributes.expires ? attributes.expires.toUTCString() : '';

			try {
				var result = JSON.stringify(value);
				if (/^[\{\[]/.test(result)) {
					value = result;
				}
			} catch (e) {}

			value = converter.write ?
				converter.write(value, key) :
				encodeURIComponent(String(value))
					.replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g, decodeURIComponent);

			key = encodeURIComponent(String(key))
				.replace(/%(23|24|26|2B|5E|60|7C)/g, decodeURIComponent)
				.replace(/[\(\)]/g, escape);

			var stringifiedAttributes = '';
			for (var attributeName in attributes) {
				if (!attributes[attributeName]) {
					continue;
				}
				stringifiedAttributes += '; ' + attributeName;
				if (attributes[attributeName] === true) {
					continue;
				}

				// Considers RFC 6265 section 5.2:
				// ...
				// 3.  If the remaining unparsed-attributes contains a %x3B (";")
				//     character:
				// Consume the characters of the unparsed-attributes up to,
				// not including, the first %x3B (";") character.
				// ...
				stringifiedAttributes += '=' + attributes[attributeName].split(';')[0];
			}

			return (document.cookie = key + '=' + value + stringifiedAttributes);
		}

		function get (key, json) {
			if (typeof document === 'undefined') {
				return;
			}

			var jar = {};
			// To prevent the for loop in the first place assign an empty array
			// in case there are no cookies at all.
			var cookies = document.cookie ? document.cookie.split('; ') : [];
			var i = 0;

			for (; i < cookies.length; i++) {
				var parts = cookies[i].split('=');
				var cookie = parts.slice(1).join('=');

				if (!json && cookie.charAt(0) === '"') {
					cookie = cookie.slice(1, -1);
				}

				try {
					var name = decode(parts[0]);
					cookie = (converter.read || converter)(cookie, name) ||
						decode(cookie);

					if (json) {
						try {
							cookie = JSON.parse(cookie);
						} catch (e) {}
					}

					jar[name] = cookie;

					if (key === name) {
						break;
					}
				} catch (e) {}
			}

			return key ? jar[key] : jar;
		}

		api.set = set;
		api.get = function (key) {
			return get(key, false /* read as raw */);
		};
		api.getJSON = function (key) {
			return get(key, true /* read as json */);
		};
		api.remove = function (key, attributes) {
			set(key, '', extend(attributes, {
				expires: -1
			}));
		};

		api.defaults = {};

		api.withConverter = init;

		return api;
	}

	return init(function () {});
}));


/***/ }),

/***/ "../node_modules/nano-css/addon/__dev__/warnOnMissingDependencies.js":
/*!***************************************************************************!*\
  !*** ../node_modules/nano-css/addon/__dev__/warnOnMissingDependencies.js ***!
  \***************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var pkgName = 'nano-css';

module.exports = function warnOnMissingDependencies (addon, renderer, deps) {
    var missing = [];

    for (var i = 0; i < deps.length; i++) {
        var name = deps[i];

        if (!renderer[name]) {
            missing.push(name);
        }
    }

    if (missing.length) {
        var str = 'Addon "' + addon + '" is missing the following dependencies:';

        for (var j = 0; j < missing.length; j++) {
            str += '\n require("' + pkgName + '/addon/' + missing[j] + '").addon(nano);';
        }

        throw new Error(str);
    }
};


/***/ }),

/***/ "../node_modules/nano-css/addon/cssom.js":
/*!***********************************************!*\
  !*** ../node_modules/nano-css/addon/cssom.js ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


exports.addon = function (renderer) {
    // CSSOM support only browser environment.
    if (!renderer.client) return;

    if (true) {
        __webpack_require__(/*! ./__dev__/warnOnMissingDependencies */ "../node_modules/nano-css/addon/__dev__/warnOnMissingDependencies.js")('cssom', renderer, ['sh']);
    }

    // Style sheet for media queries.
    document.head.appendChild(renderer.msh = document.createElement('style'));

    renderer.createRule = function (selector, prelude) {
        var rawCss = selector + '{}';
        if (prelude) rawCss = prelude + '{' + rawCss + '}';
        var sheet = prelude ? renderer.msh.sheet : renderer.sh.sheet;
        var index = sheet.insertRule(rawCss, sheet.cssRules.length);
        var rule = (sheet.cssRules || sheet.rules)[index];

        // Keep track of `index` where rule was inserted in the sheet. This is
        // needed for rule deletion.
        rule.index = index;

        if (prelude) {
            // If rule has media query (it has prelude), move style (CSSStyleDeclaration)
            // object to the "top" to normalize it with a rule without the media
            // query, so that both rules have `.style` property available.
            var selectorRule = (rule.cssRules || rule.rules)[0];
            rule.style = selectorRule.style;
            rule.styleMap = selectorRule.styleMap;
        }

        return rule;
    };
};


/***/ }),

/***/ "../node_modules/nano-css/addon/vcssom.js":
/*!************************************************!*\
  !*** ../node_modules/nano-css/addon/vcssom.js ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var removeRule = __webpack_require__(/*! ./vcssom/removeRule */ "../node_modules/nano-css/addon/vcssom/removeRule.js").removeRule;

exports.addon = function (renderer) {
    // VCSSOM support only browser environment.
    if (!renderer.client) return;

    if (true) {
        __webpack_require__(/*! ./__dev__/warnOnMissingDependencies */ "../node_modules/nano-css/addon/__dev__/warnOnMissingDependencies.js")('cssom', renderer, ['createRule']); // cssom
    }

    var kebab = renderer.kebab;

    function VRule (selector, prelude) {
        this.rule = renderer.createRule(selector, prelude);
        this.decl = {};
    }
    VRule.prototype.diff = function (newDecl) {
        var oldDecl = this.decl;
        var style = this.rule.style;
        var property;
        for (property in oldDecl)
            if (newDecl[property] === undefined)
                style.removeProperty(property);
        for (property in newDecl)
            if (newDecl[property] !== oldDecl[property])
                style.setProperty(kebab(property), newDecl[property]);
        this.decl = newDecl;
    };
    VRule.prototype.del = function () {
        removeRule(this.rule);
    };

    function VSheet () {
        /**
         * {
         *   '<at-rule-prelude>': {
         *     '<selector>': {
         *       color: 'red
         *     }
         *   }
         * }
         */
        this.tree = {};
    }
    VSheet.prototype.diff = function (newTree) {
        var oldTree = this.tree;

        // Remove media queries not present in new tree.
        for (var prelude in oldTree) {
            if (newTree[prelude] === undefined) {
                var rules = oldTree[prelude];
                for (var selector in rules)
                    rules[selector].del();
            }
        }

        for (var prelude in newTree) {
            if (oldTree[prelude] === undefined) {
                // Whole media query is new.
                for (var selector in newTree[prelude]) {
                    var rule = new VRule(selector, prelude);
                    rule.diff(newTree[prelude][selector]);
                    newTree[prelude][selector] = rule;
                }
            } else {
                // Old tree already has rules with this media query.
                var oldRules = oldTree[prelude];
                var newRules = newTree[prelude];

                // Remove rules not present in new tree.
                for (var selector in oldRules)
                    if (!newRules[selector])
                        oldRules[selector].del();

                // Apply new rules.
                for (var selector in newRules) {
                    var rule = oldRules[selector];
                    if (rule) {
                        rule.diff(newRules[selector]);
                        newRules[selector] = rule;
                    } else {
                        rule = new VRule(selector, prelude);
                        rule.diff(newRules[selector]);
                        newRules[selector] = rule;
                    }
                }
            }
        }

        this.tree = newTree;
    };

    renderer.VRule = VRule;
    renderer.VSheet = VSheet;
};


/***/ }),

/***/ "../node_modules/nano-css/addon/vcssom/cssToTree.js":
/*!**********************************************************!*\
  !*** ../node_modules/nano-css/addon/vcssom/cssToTree.js ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

function cssToTree (tree, css, selector, prelude) {
    var declarations = {};
    var hasDeclarations = false;
    var key, value;

    for (key in css) {
        value = css[key];
        if (typeof value !== 'object') {
            hasDeclarations = true;
            declarations[key] = value;
        }
    }

    if (hasDeclarations) {
        if (!tree[prelude]) tree[prelude] = {};
        tree[prelude][selector] = declarations;
    }

    for (key in css) {
        value = css[key];
        if (typeof value === 'object') {
            if (key[0] === '@') {
                cssToTree(tree, value, selector, key);
            } else {
                var hasCurrentSymbol = key.indexOf('&') > -1;
                var selectorParts = selector.split(',');
                if (hasCurrentSymbol) {
                    for (var i = 0; i < selectorParts.length; i++) {
                        selectorParts[i] = key.replace(/&/g, selectorParts[i]);
                    }
                } else {
                    for (var i = 0; i < selectorParts.length; i++) {
                        selectorParts[i] = selectorParts[i] + ' ' + key;
                    }
                }
                cssToTree(tree, value, selectorParts.join(','), prelude);
            }
        }
    }
};

exports.cssToTree = cssToTree;


/***/ }),

/***/ "../node_modules/nano-css/addon/vcssom/removeRule.js":
/*!***********************************************************!*\
  !*** ../node_modules/nano-css/addon/vcssom/removeRule.js ***!
  \***********************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

function removeRule (rule) {
    var maxIndex = rule.index;
    var sh = rule.parentStyleSheet;
    var rules = sh.cssRules || sh.rules;
    maxIndex = Math.max(maxIndex, rules.length - 1);
    while (maxIndex >= 0) {
        if (rules[maxIndex] === rule) {
            sh.deleteRule(maxIndex);
            break;
        }
        maxIndex--;
    }
}

exports.removeRule = removeRule;


/***/ }),

/***/ "../node_modules/nano-css/index.js":
/*!*****************************************!*\
  !*** ../node_modules/nano-css/index.js ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var KEBAB_REGEX = /[A-Z]/g;

var hash = function (str) {
    var h = 5381, i = str.length;

    while (i) h = (h * 33) ^ str.charCodeAt(--i);

    return '_' + (h >>> 0).toString(36);
};

exports.create = function (config) {
    config = config || {};
    var assign = config.assign || Object.assign;
    var client = typeof window === 'object';

    // Check if we are really in browser environment.
    if (true) {
        if (client) {
            if ((typeof document !== 'object') || !document.getElementsByTagName('HTML')) {
                console.error(
                    'nano-css detected browser environment because of "window" global, but ' +
                    '"document" global seems to be defective.'
                );
            }
        }
    }

    var renderer = assign({
        raw: '',
        pfx: '_',
        client: client,
        assign: assign,
        stringify: JSON.stringify,
        kebab: function (prop) {
            return prop.replace(KEBAB_REGEX, '-$&').toLowerCase();
        },
        decl: function (key, value) {
            key = renderer.kebab(key);
            return key + ':' + value + ';';
        },
        hash: function (obj) {
            return hash(renderer.stringify(obj));
        },
        selector: function (parent, selector) {
            return parent + (selector[0] === ':' ? ''  : ' ') + selector;
        },
        putRaw: function (rawCssRule) {
            renderer.raw += rawCssRule;
        }
    }, config);

    if (renderer.client) {
        if (!renderer.sh)
            document.head.appendChild(renderer.sh = document.createElement('style'));

        if (true) {
            renderer.sh.setAttribute('data-nano-css-dev', '');

            // Test style sheet used in DEV mode to test if .insetRule() would throw.
            renderer.shTest = document.createElement('style');
            renderer.shTest.setAttribute('data-nano-css-dev-tests', '');
            document.head.appendChild(renderer.shTest);
        }

        renderer.putRaw = function (rawCssRule) {
            // .insertRule() is faster than .appendChild(), that's why we use it in PROD.
            // But CSS injected using .insertRule() is not displayed in Chrome Devtools,
            // that's why we use .appendChild in DEV.
            if (false) { var sheet; } else {
                // Test if .insertRule() works in dev mode. Unknown pseudo-selectors will throw when
                // .insertRule() is used, but .appendChild() will not throw.
                try {
                    renderer.shTest.sheet.insertRule(rawCssRule, renderer.shTest.sheet.cssRules.length);
                } catch (error) {
                    if (config.verbose) {
                        console.error(error);
                    }
                }

                // Insert pretty-printed CSS for dev mode.
                renderer.sh.appendChild(document.createTextNode(rawCssRule));
            }
        };
    }

    renderer.put = function (selector, decls, atrule) {
        var str = '';
        var prop, value;
        var postponed = [];

        for (prop in decls) {
            value = decls[prop];

            if ((value instanceof Object) && !(value instanceof Array)) {
                postponed.push(prop);
            } else {
                if (( true) && !renderer.sourcemaps) {
                    str += '    ' + renderer.decl(prop, value, selector, atrule) + '\n';
                } else {
                    str += renderer.decl(prop, value, selector, atrule);
                }
            }
        }

        if (str) {
            if (( true) && !renderer.sourcemaps) {
                str = '\n' + selector + ' {\n' + str + '}\n';
            } else {
                str = selector + '{' + str + '}';
            }
            renderer.putRaw(atrule ? atrule + '{' + str + '}' : str);
        }

        for (var i = 0; i < postponed.length; i++) {
            prop = postponed[i];

            if (prop[0] === '@' && prop !== '@font-face') {
                renderer.putAt(selector, decls[prop], prop);
            } else {
                renderer.put(renderer.selector(selector, prop), decls[prop], atrule);
            }
        }
    };

    renderer.putAt = renderer.put;

    return renderer;
};


/***/ }),

/***/ "../node_modules/qs/lib/formats.js":
/*!*****************************************!*\
  !*** ../node_modules/qs/lib/formats.js ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var replace = String.prototype.replace;
var percentTwenties = /%20/g;

module.exports = {
    'default': 'RFC3986',
    formatters: {
        RFC1738: function (value) {
            return replace.call(value, percentTwenties, '+');
        },
        RFC3986: function (value) {
            return value;
        }
    },
    RFC1738: 'RFC1738',
    RFC3986: 'RFC3986'
};


/***/ }),

/***/ "../node_modules/qs/lib/index.js":
/*!***************************************!*\
  !*** ../node_modules/qs/lib/index.js ***!
  \***************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var stringify = __webpack_require__(/*! ./stringify */ "../node_modules/qs/lib/stringify.js");
var parse = __webpack_require__(/*! ./parse */ "../node_modules/qs/lib/parse.js");
var formats = __webpack_require__(/*! ./formats */ "../node_modules/qs/lib/formats.js");

module.exports = {
    formats: formats,
    parse: parse,
    stringify: stringify
};


/***/ }),

/***/ "../node_modules/qs/lib/parse.js":
/*!***************************************!*\
  !*** ../node_modules/qs/lib/parse.js ***!
  \***************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var utils = __webpack_require__(/*! ./utils */ "../node_modules/qs/lib/utils.js");

var has = Object.prototype.hasOwnProperty;

var defaults = {
    allowDots: false,
    allowPrototypes: false,
    arrayLimit: 20,
    decoder: utils.decode,
    delimiter: '&',
    depth: 5,
    parameterLimit: 1000,
    plainObjects: false,
    strictNullHandling: false
};

var parseValues = function parseQueryStringValues(str, options) {
    var obj = {};
    var cleanStr = options.ignoreQueryPrefix ? str.replace(/^\?/, '') : str;
    var limit = options.parameterLimit === Infinity ? undefined : options.parameterLimit;
    var parts = cleanStr.split(options.delimiter, limit);

    for (var i = 0; i < parts.length; ++i) {
        var part = parts[i];

        var bracketEqualsPos = part.indexOf(']=');
        var pos = bracketEqualsPos === -1 ? part.indexOf('=') : bracketEqualsPos + 1;

        var key, val;
        if (pos === -1) {
            key = options.decoder(part, defaults.decoder);
            val = options.strictNullHandling ? null : '';
        } else {
            key = options.decoder(part.slice(0, pos), defaults.decoder);
            val = options.decoder(part.slice(pos + 1), defaults.decoder);
        }
        if (has.call(obj, key)) {
            obj[key] = [].concat(obj[key]).concat(val);
        } else {
            obj[key] = val;
        }
    }

    return obj;
};

var parseObject = function (chain, val, options) {
    var leaf = val;

    for (var i = chain.length - 1; i >= 0; --i) {
        var obj;
        var root = chain[i];

        if (root === '[]') {
            obj = [];
            obj = obj.concat(leaf);
        } else {
            obj = options.plainObjects ? Object.create(null) : {};
            var cleanRoot = root.charAt(0) === '[' && root.charAt(root.length - 1) === ']' ? root.slice(1, -1) : root;
            var index = parseInt(cleanRoot, 10);
            if (
                !isNaN(index)
                && root !== cleanRoot
                && String(index) === cleanRoot
                && index >= 0
                && (options.parseArrays && index <= options.arrayLimit)
            ) {
                obj = [];
                obj[index] = leaf;
            } else {
                obj[cleanRoot] = leaf;
            }
        }

        leaf = obj;
    }

    return leaf;
};

var parseKeys = function parseQueryStringKeys(givenKey, val, options) {
    if (!givenKey) {
        return;
    }

    // Transform dot notation to bracket notation
    var key = options.allowDots ? givenKey.replace(/\.([^.[]+)/g, '[$1]') : givenKey;

    // The regex chunks

    var brackets = /(\[[^[\]]*])/;
    var child = /(\[[^[\]]*])/g;

    // Get the parent

    var segment = brackets.exec(key);
    var parent = segment ? key.slice(0, segment.index) : key;

    // Stash the parent if it exists

    var keys = [];
    if (parent) {
        // If we aren't using plain objects, optionally prefix keys
        // that would overwrite object prototype properties
        if (!options.plainObjects && has.call(Object.prototype, parent)) {
            if (!options.allowPrototypes) {
                return;
            }
        }

        keys.push(parent);
    }

    // Loop through children appending to the array until we hit depth

    var i = 0;
    while ((segment = child.exec(key)) !== null && i < options.depth) {
        i += 1;
        if (!options.plainObjects && has.call(Object.prototype, segment[1].slice(1, -1))) {
            if (!options.allowPrototypes) {
                return;
            }
        }
        keys.push(segment[1]);
    }

    // If there's a remainder, just add whatever is left

    if (segment) {
        keys.push('[' + key.slice(segment.index) + ']');
    }

    return parseObject(keys, val, options);
};

module.exports = function (str, opts) {
    var options = opts ? utils.assign({}, opts) : {};

    if (options.decoder !== null && options.decoder !== undefined && typeof options.decoder !== 'function') {
        throw new TypeError('Decoder has to be a function.');
    }

    options.ignoreQueryPrefix = options.ignoreQueryPrefix === true;
    options.delimiter = typeof options.delimiter === 'string' || utils.isRegExp(options.delimiter) ? options.delimiter : defaults.delimiter;
    options.depth = typeof options.depth === 'number' ? options.depth : defaults.depth;
    options.arrayLimit = typeof options.arrayLimit === 'number' ? options.arrayLimit : defaults.arrayLimit;
    options.parseArrays = options.parseArrays !== false;
    options.decoder = typeof options.decoder === 'function' ? options.decoder : defaults.decoder;
    options.allowDots = typeof options.allowDots === 'boolean' ? options.allowDots : defaults.allowDots;
    options.plainObjects = typeof options.plainObjects === 'boolean' ? options.plainObjects : defaults.plainObjects;
    options.allowPrototypes = typeof options.allowPrototypes === 'boolean' ? options.allowPrototypes : defaults.allowPrototypes;
    options.parameterLimit = typeof options.parameterLimit === 'number' ? options.parameterLimit : defaults.parameterLimit;
    options.strictNullHandling = typeof options.strictNullHandling === 'boolean' ? options.strictNullHandling : defaults.strictNullHandling;

    if (str === '' || str === null || typeof str === 'undefined') {
        return options.plainObjects ? Object.create(null) : {};
    }

    var tempObj = typeof str === 'string' ? parseValues(str, options) : str;
    var obj = options.plainObjects ? Object.create(null) : {};

    // Iterate over the keys and setup the new object

    var keys = Object.keys(tempObj);
    for (var i = 0; i < keys.length; ++i) {
        var key = keys[i];
        var newObj = parseKeys(key, tempObj[key], options);
        obj = utils.merge(obj, newObj, options);
    }

    return utils.compact(obj);
};


/***/ }),

/***/ "../node_modules/qs/lib/stringify.js":
/*!*******************************************!*\
  !*** ../node_modules/qs/lib/stringify.js ***!
  \*******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var utils = __webpack_require__(/*! ./utils */ "../node_modules/qs/lib/utils.js");
var formats = __webpack_require__(/*! ./formats */ "../node_modules/qs/lib/formats.js");

var arrayPrefixGenerators = {
    brackets: function brackets(prefix) { // eslint-disable-line func-name-matching
        return prefix + '[]';
    },
    indices: function indices(prefix, key) { // eslint-disable-line func-name-matching
        return prefix + '[' + key + ']';
    },
    repeat: function repeat(prefix) { // eslint-disable-line func-name-matching
        return prefix;
    }
};

var toISO = Date.prototype.toISOString;

var defaults = {
    delimiter: '&',
    encode: true,
    encoder: utils.encode,
    encodeValuesOnly: false,
    serializeDate: function serializeDate(date) { // eslint-disable-line func-name-matching
        return toISO.call(date);
    },
    skipNulls: false,
    strictNullHandling: false
};

var stringify = function stringify( // eslint-disable-line func-name-matching
    object,
    prefix,
    generateArrayPrefix,
    strictNullHandling,
    skipNulls,
    encoder,
    filter,
    sort,
    allowDots,
    serializeDate,
    formatter,
    encodeValuesOnly
) {
    var obj = object;
    if (typeof filter === 'function') {
        obj = filter(prefix, obj);
    } else if (obj instanceof Date) {
        obj = serializeDate(obj);
    } else if (obj === null) {
        if (strictNullHandling) {
            return encoder && !encodeValuesOnly ? encoder(prefix, defaults.encoder) : prefix;
        }

        obj = '';
    }

    if (typeof obj === 'string' || typeof obj === 'number' || typeof obj === 'boolean' || utils.isBuffer(obj)) {
        if (encoder) {
            var keyValue = encodeValuesOnly ? prefix : encoder(prefix, defaults.encoder);
            return [formatter(keyValue) + '=' + formatter(encoder(obj, defaults.encoder))];
        }
        return [formatter(prefix) + '=' + formatter(String(obj))];
    }

    var values = [];

    if (typeof obj === 'undefined') {
        return values;
    }

    var objKeys;
    if (Array.isArray(filter)) {
        objKeys = filter;
    } else {
        var keys = Object.keys(obj);
        objKeys = sort ? keys.sort(sort) : keys;
    }

    for (var i = 0; i < objKeys.length; ++i) {
        var key = objKeys[i];

        if (skipNulls && obj[key] === null) {
            continue;
        }

        if (Array.isArray(obj)) {
            values = values.concat(stringify(
                obj[key],
                generateArrayPrefix(prefix, key),
                generateArrayPrefix,
                strictNullHandling,
                skipNulls,
                encoder,
                filter,
                sort,
                allowDots,
                serializeDate,
                formatter,
                encodeValuesOnly
            ));
        } else {
            values = values.concat(stringify(
                obj[key],
                prefix + (allowDots ? '.' + key : '[' + key + ']'),
                generateArrayPrefix,
                strictNullHandling,
                skipNulls,
                encoder,
                filter,
                sort,
                allowDots,
                serializeDate,
                formatter,
                encodeValuesOnly
            ));
        }
    }

    return values;
};

module.exports = function (object, opts) {
    var obj = object;
    var options = opts ? utils.assign({}, opts) : {};

    if (options.encoder !== null && options.encoder !== undefined && typeof options.encoder !== 'function') {
        throw new TypeError('Encoder has to be a function.');
    }

    var delimiter = typeof options.delimiter === 'undefined' ? defaults.delimiter : options.delimiter;
    var strictNullHandling = typeof options.strictNullHandling === 'boolean' ? options.strictNullHandling : defaults.strictNullHandling;
    var skipNulls = typeof options.skipNulls === 'boolean' ? options.skipNulls : defaults.skipNulls;
    var encode = typeof options.encode === 'boolean' ? options.encode : defaults.encode;
    var encoder = typeof options.encoder === 'function' ? options.encoder : defaults.encoder;
    var sort = typeof options.sort === 'function' ? options.sort : null;
    var allowDots = typeof options.allowDots === 'undefined' ? false : options.allowDots;
    var serializeDate = typeof options.serializeDate === 'function' ? options.serializeDate : defaults.serializeDate;
    var encodeValuesOnly = typeof options.encodeValuesOnly === 'boolean' ? options.encodeValuesOnly : defaults.encodeValuesOnly;
    if (typeof options.format === 'undefined') {
        options.format = formats['default'];
    } else if (!Object.prototype.hasOwnProperty.call(formats.formatters, options.format)) {
        throw new TypeError('Unknown format option provided.');
    }
    var formatter = formats.formatters[options.format];
    var objKeys;
    var filter;

    if (typeof options.filter === 'function') {
        filter = options.filter;
        obj = filter('', obj);
    } else if (Array.isArray(options.filter)) {
        filter = options.filter;
        objKeys = filter;
    }

    var keys = [];

    if (typeof obj !== 'object' || obj === null) {
        return '';
    }

    var arrayFormat;
    if (options.arrayFormat in arrayPrefixGenerators) {
        arrayFormat = options.arrayFormat;
    } else if ('indices' in options) {
        arrayFormat = options.indices ? 'indices' : 'repeat';
    } else {
        arrayFormat = 'indices';
    }

    var generateArrayPrefix = arrayPrefixGenerators[arrayFormat];

    if (!objKeys) {
        objKeys = Object.keys(obj);
    }

    if (sort) {
        objKeys.sort(sort);
    }

    for (var i = 0; i < objKeys.length; ++i) {
        var key = objKeys[i];

        if (skipNulls && obj[key] === null) {
            continue;
        }

        keys = keys.concat(stringify(
            obj[key],
            key,
            generateArrayPrefix,
            strictNullHandling,
            skipNulls,
            encode ? encoder : null,
            filter,
            sort,
            allowDots,
            serializeDate,
            formatter,
            encodeValuesOnly
        ));
    }

    var joined = keys.join(delimiter);
    var prefix = options.addQueryPrefix === true ? '?' : '';

    return joined.length > 0 ? prefix + joined : '';
};


/***/ }),

/***/ "../node_modules/qs/lib/utils.js":
/*!***************************************!*\
  !*** ../node_modules/qs/lib/utils.js ***!
  \***************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var has = Object.prototype.hasOwnProperty;

var hexTable = (function () {
    var array = [];
    for (var i = 0; i < 256; ++i) {
        array.push('%' + ((i < 16 ? '0' : '') + i.toString(16)).toUpperCase());
    }

    return array;
}());

var compactQueue = function compactQueue(queue) {
    var obj;

    while (queue.length) {
        var item = queue.pop();
        obj = item.obj[item.prop];

        if (Array.isArray(obj)) {
            var compacted = [];

            for (var j = 0; j < obj.length; ++j) {
                if (typeof obj[j] !== 'undefined') {
                    compacted.push(obj[j]);
                }
            }

            item.obj[item.prop] = compacted;
        }
    }

    return obj;
};

var arrayToObject = function arrayToObject(source, options) {
    var obj = options && options.plainObjects ? Object.create(null) : {};
    for (var i = 0; i < source.length; ++i) {
        if (typeof source[i] !== 'undefined') {
            obj[i] = source[i];
        }
    }

    return obj;
};

var merge = function merge(target, source, options) {
    if (!source) {
        return target;
    }

    if (typeof source !== 'object') {
        if (Array.isArray(target)) {
            target.push(source);
        } else if (typeof target === 'object') {
            if (options.plainObjects || options.allowPrototypes || !has.call(Object.prototype, source)) {
                target[source] = true;
            }
        } else {
            return [target, source];
        }

        return target;
    }

    if (typeof target !== 'object') {
        return [target].concat(source);
    }

    var mergeTarget = target;
    if (Array.isArray(target) && !Array.isArray(source)) {
        mergeTarget = arrayToObject(target, options);
    }

    if (Array.isArray(target) && Array.isArray(source)) {
        source.forEach(function (item, i) {
            if (has.call(target, i)) {
                if (target[i] && typeof target[i] === 'object') {
                    target[i] = merge(target[i], item, options);
                } else {
                    target.push(item);
                }
            } else {
                target[i] = item;
            }
        });
        return target;
    }

    return Object.keys(source).reduce(function (acc, key) {
        var value = source[key];

        if (has.call(acc, key)) {
            acc[key] = merge(acc[key], value, options);
        } else {
            acc[key] = value;
        }
        return acc;
    }, mergeTarget);
};

var assign = function assignSingleSource(target, source) {
    return Object.keys(source).reduce(function (acc, key) {
        acc[key] = source[key];
        return acc;
    }, target);
};

var decode = function (str) {
    try {
        return decodeURIComponent(str.replace(/\+/g, ' '));
    } catch (e) {
        return str;
    }
};

var encode = function encode(str) {
    // This code was originally written by Brian White (mscdex) for the io.js core querystring library.
    // It has been adapted here for stricter adherence to RFC 3986
    if (str.length === 0) {
        return str;
    }

    var string = typeof str === 'string' ? str : String(str);

    var out = '';
    for (var i = 0; i < string.length; ++i) {
        var c = string.charCodeAt(i);

        if (
            c === 0x2D // -
            || c === 0x2E // .
            || c === 0x5F // _
            || c === 0x7E // ~
            || (c >= 0x30 && c <= 0x39) // 0-9
            || (c >= 0x41 && c <= 0x5A) // a-z
            || (c >= 0x61 && c <= 0x7A) // A-Z
        ) {
            out += string.charAt(i);
            continue;
        }

        if (c < 0x80) {
            out = out + hexTable[c];
            continue;
        }

        if (c < 0x800) {
            out = out + (hexTable[0xC0 | (c >> 6)] + hexTable[0x80 | (c & 0x3F)]);
            continue;
        }

        if (c < 0xD800 || c >= 0xE000) {
            out = out + (hexTable[0xE0 | (c >> 12)] + hexTable[0x80 | ((c >> 6) & 0x3F)] + hexTable[0x80 | (c & 0x3F)]);
            continue;
        }

        i += 1;
        c = 0x10000 + (((c & 0x3FF) << 10) | (string.charCodeAt(i) & 0x3FF));
        out += hexTable[0xF0 | (c >> 18)]
            + hexTable[0x80 | ((c >> 12) & 0x3F)]
            + hexTable[0x80 | ((c >> 6) & 0x3F)]
            + hexTable[0x80 | (c & 0x3F)];
    }

    return out;
};

var compact = function compact(value) {
    var queue = [{ obj: { o: value }, prop: 'o' }];
    var refs = [];

    for (var i = 0; i < queue.length; ++i) {
        var item = queue[i];
        var obj = item.obj[item.prop];

        var keys = Object.keys(obj);
        for (var j = 0; j < keys.length; ++j) {
            var key = keys[j];
            var val = obj[key];
            if (typeof val === 'object' && val !== null && refs.indexOf(val) === -1) {
                queue.push({ obj: obj, prop: key });
                refs.push(val);
            }
        }
    }

    return compactQueue(queue);
};

var isRegExp = function isRegExp(obj) {
    return Object.prototype.toString.call(obj) === '[object RegExp]';
};

var isBuffer = function isBuffer(obj) {
    if (obj === null || typeof obj === 'undefined') {
        return false;
    }

    return !!(obj.constructor && obj.constructor.isBuffer && obj.constructor.isBuffer(obj));
};

module.exports = {
    arrayToObject: arrayToObject,
    assign: assign,
    compact: compact,
    decode: decode,
    encode: encode,
    isBuffer: isBuffer,
    isRegExp: isRegExp,
    merge: merge
};


/***/ }),

/***/ "../node_modules/react-universal-interface/lib/addClassDecoratorSupport.js":
/*!*********************************************************************************!*\
  !*** ../node_modules/react-universal-interface/lib/addClassDecoratorSupport.js ***!
  \*********************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var wrapInStatefulComponent_1 = tslib_1.__importDefault(__webpack_require__(/*! ./wrapInStatefulComponent */ "../node_modules/react-universal-interface/lib/wrapInStatefulComponent.js"));
var addClassDecoratorSupport = function (Comp) {
    var isSFC = !Comp.prototype;
    return !isSFC ? Comp : wrapInStatefulComponent_1.default(Comp);
};
exports.default = addClassDecoratorSupport;
//# sourceMappingURL=addClassDecoratorSupport.js.map

/***/ }),

/***/ "../node_modules/react-universal-interface/lib/createEnhancer.js":
/*!***********************************************************************!*\
  !*** ../node_modules/react-universal-interface/lib/createEnhancer.js ***!
  \***********************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.divWrapper = void 0;
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var React = tslib_1.__importStar(__webpack_require__(/*! react */ "react"));
var addClassDecoratorSupport_1 = tslib_1.__importDefault(__webpack_require__(/*! ./addClassDecoratorSupport */ "../node_modules/react-universal-interface/lib/addClassDecoratorSupport.js"));
var h = React.createElement;
var noWrap = function (Comp, propName, props, state) {
    var _a;
    return h(Comp, propName ? tslib_1.__assign((_a = {}, _a[propName] = state, _a), props) : tslib_1.__assign(tslib_1.__assign({}, state), props));
};
exports.divWrapper = function (Comp, propName, props, state) {
    return h('div', null, noWrap(Comp, propName, props, state));
};
var createEnhancer = function (Facc, prop, wrapper) {
    if (wrapper === void 0) { wrapper = noWrap; }
    var enhancer = function (Comp, propName, faccProps) {
        if (propName === void 0) { propName = prop; }
        if (faccProps === void 0) { faccProps = null; }
        var isClassDecoratorMethodCall = typeof Comp === 'string';
        if (isClassDecoratorMethodCall) {
            return function (Klass) { return enhancer(Klass, Comp || prop, propName); };
        }
        var Enhanced = function (props) {
            return h(Facc, faccProps, function (state) { return wrapper(Comp, propName, props, state); });
        };
        if (true) {
            Enhanced.displayName = (Facc.displayName || Facc.name) + "(" + (Comp.displayName || Comp.name) + ")";
        }
        return isClassDecoratorMethodCall ? addClassDecoratorSupport_1.default(Enhanced) : Enhanced;
    };
    return enhancer;
};
exports.default = createEnhancer;
//# sourceMappingURL=createEnhancer.js.map

/***/ }),

/***/ "../node_modules/react-universal-interface/lib/hookToRenderProp.js":
/*!*************************************************************************!*\
  !*** ../node_modules/react-universal-interface/lib/hookToRenderProp.js ***!
  \*************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var render_1 = tslib_1.__importDefault(__webpack_require__(/*! ./render */ "../node_modules/react-universal-interface/lib/render.js"));
var defaultMapPropsToArgs = function (props) { return [props]; };
var hookToRenderProp = function (hook, mapPropsToArgs) {
    if (mapPropsToArgs === void 0) { mapPropsToArgs = defaultMapPropsToArgs; }
    return function (props) { return render_1.default(props, hook.apply(void 0, mapPropsToArgs(props))); };
};
exports.default = hookToRenderProp;
//# sourceMappingURL=hookToRenderProp.js.map

/***/ }),

/***/ "../node_modules/react-universal-interface/lib/index.js":
/*!**************************************************************!*\
  !*** ../node_modules/react-universal-interface/lib/index.js ***!
  \**************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.hookToRenderProp = exports.createEnhancer = exports.render = void 0;
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var render_1 = tslib_1.__importDefault(__webpack_require__(/*! ./render */ "../node_modules/react-universal-interface/lib/render.js"));
exports.render = render_1.default;
var createEnhancer_1 = tslib_1.__importDefault(__webpack_require__(/*! ./createEnhancer */ "../node_modules/react-universal-interface/lib/createEnhancer.js"));
exports.createEnhancer = createEnhancer_1.default;
var hookToRenderProp_1 = tslib_1.__importDefault(__webpack_require__(/*! ./hookToRenderProp */ "../node_modules/react-universal-interface/lib/hookToRenderProp.js"));
exports.hookToRenderProp = hookToRenderProp_1.default;
//# sourceMappingURL=index.js.map

/***/ }),

/***/ "../node_modules/react-universal-interface/lib/render.js":
/*!***************************************************************!*\
  !*** ../node_modules/react-universal-interface/lib/render.js ***!
  \***************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var react_1 = __webpack_require__(/*! react */ "react");
var isReact16Plus = parseInt(react_1.version.substr(0, react_1.version.indexOf('.'))) > 15;
var isFn = function (fn) { return typeof fn === 'function'; };
var render = function (props, data) {
    var more = [];
    for (var _i = 2; _i < arguments.length; _i++) {
        more[_i - 2] = arguments[_i];
    }
    if (true) {
        if (typeof props !== 'object') {
            throw new TypeError('renderChildren(props, data) first argument must be a props object.');
        }
        var children_1 = props.children, render_1 = props.render;
        if (isFn(children_1) && isFn(render_1)) {
            console.warn('Both "render" and "children" are specified for in a universal interface component. ' +
                'Children will be used.');
            console.trace();
        }
        if (typeof data !== 'object') {
            console.warn('Universal component interface normally expects data to be an object, ' +
                ("\"" + typeof data + "\" received."));
            console.trace();
        }
    }
    var render = props.render, _a = props.children, children = _a === void 0 ? render : _a, component = props.component, _b = props.comp, comp = _b === void 0 ? component : _b;
    if (isFn(children))
        return children.apply(void 0, tslib_1.__spreadArrays([data], more));
    if (comp) {
        return react_1.createElement(comp, data);
    }
    if (children instanceof Array)
        return isReact16Plus ? children : react_1.createElement.apply(void 0, tslib_1.__spreadArrays(['div', null], children));
    if (children && (children instanceof Object)) {
        if (true) {
            if (!children.type || ((typeof children.type !== 'string') && (typeof children.type !== 'function') && (typeof children.type !== 'symbol'))) {
                console.warn('Universal component interface received object as children, ' +
                    'expected React element, but received unexpected React "type".');
                console.trace();
            }
            if (typeof children.type === 'string')
                return children;
            return react_1.cloneElement(children, Object.assign({}, children.props, data));
        }
        else {}
    }
    return children || null;
};
exports.default = render;
//# sourceMappingURL=render.js.map

/***/ }),

/***/ "../node_modules/react-universal-interface/lib/wrapInStatefulComponent.js":
/*!********************************************************************************!*\
  !*** ../node_modules/react-universal-interface/lib/wrapInStatefulComponent.js ***!
  \********************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var React = tslib_1.__importStar(__webpack_require__(/*! react */ "react"));
var wrapInStatefulComponent = function (Comp) {
    var Decorated = (function (_super) {
        tslib_1.__extends(class_1, _super);
        function class_1() {
            return _super !== null && _super.apply(this, arguments) || this;
        }
        class_1.prototype.render = function () {
            return Comp(this.props, this.context);
        };
        return class_1;
    }(React.Component));
    if (true) {
        Decorated.displayName = "Decorated(" + (Comp.displayName || Comp.name) + ")";
    }
    return Decorated;
};
exports.default = wrapInStatefulComponent;
//# sourceMappingURL=wrapInStatefulComponent.js.map

/***/ }),

/***/ "../node_modules/react-use/esm/factory/createBreakpoint.js":
/*!*****************************************************************!*\
  !*** ../node_modules/react-use/esm/factory/createBreakpoint.js ***!
  \*****************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _misc_util__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../misc/util */ "../node_modules/react-use/esm/misc/util.js");


var createBreakpoint = function (breakpoints) {
    if (breakpoints === void 0) { breakpoints = { laptopL: 1440, laptop: 1024, tablet: 768 }; }
    return function () {
        var _a = Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])(_misc_util__WEBPACK_IMPORTED_MODULE_1__["isBrowser"] ? window.innerWidth : 0), screen = _a[0], setScreen = _a[1];
        Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
            var setSideScreen = function () {
                setScreen(window.innerWidth);
            };
            setSideScreen();
            Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["on"])(window, 'resize', setSideScreen);
            return function () {
                Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["off"])(window, 'resize', setSideScreen);
            };
        });
        var sortedBreakpoints = Object(react__WEBPACK_IMPORTED_MODULE_0__["useMemo"])(function () { return Object.entries(breakpoints).sort(function (a, b) { return (a[1] >= b[1] ? 1 : -1); }); }, [breakpoints]);
        var result = sortedBreakpoints.reduce(function (acc, _a) {
            var name = _a[0], width = _a[1];
            if (screen >= width) {
                return name;
            }
            else {
                return acc;
            }
        }, sortedBreakpoints[0][0]);
        return result;
    };
};
/* harmony default export */ __webpack_exports__["default"] = (createBreakpoint);


/***/ }),

/***/ "../node_modules/react-use/esm/factory/createGlobalState.js":
/*!******************************************************************!*\
  !*** ../node_modules/react-use/esm/factory/createGlobalState.js ***!
  \******************************************************************/
/*! exports provided: createGlobalState, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createGlobalState", function() { return createGlobalState; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _misc_hookState__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../misc/hookState */ "../node_modules/react-use/esm/misc/hookState.js");
/* harmony import */ var _useEffectOnce__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../useEffectOnce */ "../node_modules/react-use/esm/useEffectOnce.js");
/* harmony import */ var _useIsomorphicLayoutEffect__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../useIsomorphicLayoutEffect */ "../node_modules/react-use/esm/useIsomorphicLayoutEffect.js");




function createGlobalState(initialState) {
    var store = {
        state: initialState instanceof Function ? initialState() : initialState,
        setState: function (nextState) {
            store.state = Object(_misc_hookState__WEBPACK_IMPORTED_MODULE_1__["resolveHookState"])(nextState, store.state);
            store.setters.forEach(function (setter) { return setter(store.state); });
        },
        setters: [],
    };
    return function () {
        var _a = Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])(store.state), globalState = _a[0], stateSetter = _a[1];
        Object(_useEffectOnce__WEBPACK_IMPORTED_MODULE_2__["default"])(function () { return function () {
            store.setters = store.setters.filter(function (setter) { return setter !== stateSetter; });
        }; });
        Object(_useIsomorphicLayoutEffect__WEBPACK_IMPORTED_MODULE_3__["default"])(function () {
            if (!store.setters.includes(stateSetter)) {
                store.setters.push(stateSetter);
            }
        });
        return [globalState, store.setState];
    };
}
/* harmony default export */ __webpack_exports__["default"] = (createGlobalState);


/***/ }),

/***/ "../node_modules/react-use/esm/factory/createHTMLMediaHook.js":
/*!********************************************************************!*\
  !*** ../node_modules/react-use/esm/factory/createHTMLMediaHook.js ***!
  \********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return createHTMLMediaHook; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../node_modules/react-use/node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _useSetState__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../useSetState */ "../node_modules/react-use/esm/useSetState.js");
/* harmony import */ var _misc_parseTimeRanges__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../misc/parseTimeRanges */ "../node_modules/react-use/esm/misc/parseTimeRanges.js");





function createHTMLMediaHook(tag) {
    return function (elOrProps) {
        var element;
        var props;
        if (react__WEBPACK_IMPORTED_MODULE_1__["isValidElement"](elOrProps)) {
            element = elOrProps;
            props = element.props;
        }
        else {
            props = elOrProps;
        }
        var _a = Object(_useSetState__WEBPACK_IMPORTED_MODULE_2__["default"])({
            buffered: [],
            time: 0,
            duration: 0,
            paused: true,
            muted: false,
            volume: 1,
            playing: false,
        }), state = _a[0], setState = _a[1];
        var ref = Object(react__WEBPACK_IMPORTED_MODULE_1__["useRef"])(null);
        var wrapEvent = function (userEvent, proxyEvent) {
            return function (event) {
                try {
                    proxyEvent && proxyEvent(event);
                }
                finally {
                    userEvent && userEvent(event);
                }
            };
        };
        var onPlay = function () { return setState({ paused: false }); };
        var onPlaying = function () { return setState({ playing: true }); };
        var onWaiting = function () { return setState({ playing: false }); };
        var onPause = function () { return setState({ paused: true, playing: false }); };
        var onVolumeChange = function () {
            var el = ref.current;
            if (!el) {
                return;
            }
            setState({
                muted: el.muted,
                volume: el.volume,
            });
        };
        var onDurationChange = function () {
            var el = ref.current;
            if (!el) {
                return;
            }
            var duration = el.duration, buffered = el.buffered;
            setState({
                duration: duration,
                buffered: Object(_misc_parseTimeRanges__WEBPACK_IMPORTED_MODULE_3__["default"])(buffered),
            });
        };
        var onTimeUpdate = function () {
            var el = ref.current;
            if (!el) {
                return;
            }
            setState({ time: el.currentTime });
        };
        var onProgress = function () {
            var el = ref.current;
            if (!el) {
                return;
            }
            setState({ buffered: Object(_misc_parseTimeRanges__WEBPACK_IMPORTED_MODULE_3__["default"])(el.buffered) });
        };
        if (element) {
            element = react__WEBPACK_IMPORTED_MODULE_1__["cloneElement"](element, Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])(Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])({ controls: false }, props), { ref: ref, onPlay: wrapEvent(props.onPlay, onPlay), onPlaying: wrapEvent(props.onPlaying, onPlaying), onWaiting: wrapEvent(props.onWaiting, onWaiting), onPause: wrapEvent(props.onPause, onPause), onVolumeChange: wrapEvent(props.onVolumeChange, onVolumeChange), onDurationChange: wrapEvent(props.onDurationChange, onDurationChange), onTimeUpdate: wrapEvent(props.onTimeUpdate, onTimeUpdate), onProgress: wrapEvent(props.onProgress, onProgress) }));
        }
        else {
            element = react__WEBPACK_IMPORTED_MODULE_1__["createElement"](tag, Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])(Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])({ controls: false }, props), { ref: ref, onPlay: wrapEvent(props.onPlay, onPlay), onPlaying: wrapEvent(props.onPlaying, onPlaying), onWaiting: wrapEvent(props.onWaiting, onWaiting), onPause: wrapEvent(props.onPause, onPause), onVolumeChange: wrapEvent(props.onVolumeChange, onVolumeChange), onDurationChange: wrapEvent(props.onDurationChange, onDurationChange), onTimeUpdate: wrapEvent(props.onTimeUpdate, onTimeUpdate), onProgress: wrapEvent(props.onProgress, onProgress) })); // TODO: fix this typing.
        }
        // Some browsers return `Promise` on `.play()` and may throw errors
        // if one tries to execute another `.play()` or `.pause()` while that
        // promise is resolving. So we prevent that with this lock.
        // See: https://bugs.chromium.org/p/chromium/issues/detail?id=593273
        var lockPlay = false;
        var controls = {
            play: function () {
                var el = ref.current;
                if (!el) {
                    return undefined;
                }
                if (!lockPlay) {
                    var promise = el.play();
                    var isPromise = typeof promise === 'object';
                    if (isPromise) {
                        lockPlay = true;
                        var resetLock = function () {
                            lockPlay = false;
                        };
                        promise.then(resetLock, resetLock);
                    }
                    return promise;
                }
                return undefined;
            },
            pause: function () {
                var el = ref.current;
                if (el && !lockPlay) {
                    return el.pause();
                }
            },
            seek: function (time) {
                var el = ref.current;
                if (!el || state.duration === undefined) {
                    return;
                }
                time = Math.min(state.duration, Math.max(0, time));
                el.currentTime = time;
            },
            volume: function (volume) {
                var el = ref.current;
                if (!el) {
                    return;
                }
                volume = Math.min(1, Math.max(0, volume));
                el.volume = volume;
                setState({ volume: volume });
            },
            mute: function () {
                var el = ref.current;
                if (!el) {
                    return;
                }
                el.muted = true;
            },
            unmute: function () {
                var el = ref.current;
                if (!el) {
                    return;
                }
                el.muted = false;
            },
        };
        Object(react__WEBPACK_IMPORTED_MODULE_1__["useEffect"])(function () {
            var el = ref.current;
            if (!el) {
                if (true) {
                    if (tag === 'audio') {
                        console.error('useAudio() ref to <audio> element is empty at mount. ' +
                            'It seem you have not rendered the audio element, which it ' +
                            'returns as the first argument const [audio] = useAudio(...).');
                    }
                    else if (tag === 'video') {
                        console.error('useVideo() ref to <video> element is empty at mount. ' +
                            'It seem you have not rendered the video element, which it ' +
                            'returns as the first argument const [video] = useVideo(...).');
                    }
                }
                return;
            }
            setState({
                volume: el.volume,
                muted: el.muted,
                paused: el.paused,
            });
            // Start media, if autoPlay requested.
            if (props.autoPlay && el.paused) {
                controls.play();
            }
        }, [props.src]);
        return [element, state, controls, ref];
    };
}


/***/ }),

/***/ "../node_modules/react-use/esm/factory/createMemo.js":
/*!***********************************************************!*\
  !*** ../node_modules/react-use/esm/factory/createMemo.js ***!
  \***********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);

var createMemo = function (fn) {
    return function () {
        var args = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            args[_i] = arguments[_i];
        }
        return Object(react__WEBPACK_IMPORTED_MODULE_0__["useMemo"])(function () { return fn.apply(void 0, args); }, args);
    };
};
/* harmony default export */ __webpack_exports__["default"] = (createMemo);


/***/ }),

/***/ "../node_modules/react-use/esm/factory/createReducer.js":
/*!**************************************************************!*\
  !*** ../node_modules/react-use/esm/factory/createReducer.js ***!
  \**************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _useUpdateEffect__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../useUpdateEffect */ "../node_modules/react-use/esm/useUpdateEffect.js");


function composeMiddleware(chain) {
    return function (context, dispatch) {
        return chain.reduceRight(function (res, middleware) {
            return middleware(context)(res);
        }, dispatch);
    };
}
var createReducer = function () {
    var middlewares = [];
    for (var _i = 0; _i < arguments.length; _i++) {
        middlewares[_i] = arguments[_i];
    }
    var composedMiddleware = composeMiddleware(middlewares);
    return function (reducer, initialState, initializer) {
        if (initializer === void 0) { initializer = function (value) { return value; }; }
        var ref = Object(react__WEBPACK_IMPORTED_MODULE_0__["useRef"])(initializer(initialState));
        var _a = Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])(ref.current), setState = _a[1];
        var dispatch = Object(react__WEBPACK_IMPORTED_MODULE_0__["useCallback"])(function (action) {
            ref.current = reducer(ref.current, action);
            setState(ref.current);
            return action;
        }, [reducer]);
        var dispatchRef = Object(react__WEBPACK_IMPORTED_MODULE_0__["useRef"])(composedMiddleware({
            getState: function () { return ref.current; },
            dispatch: function () {
                var args = [];
                for (var _i = 0; _i < arguments.length; _i++) {
                    args[_i] = arguments[_i];
                }
                return dispatchRef.current.apply(dispatchRef, args);
            },
        }, dispatch));
        Object(_useUpdateEffect__WEBPACK_IMPORTED_MODULE_1__["default"])(function () {
            dispatchRef.current = composedMiddleware({
                getState: function () { return ref.current; },
                dispatch: function () {
                    var args = [];
                    for (var _i = 0; _i < arguments.length; _i++) {
                        args[_i] = arguments[_i];
                    }
                    return dispatchRef.current.apply(dispatchRef, args);
                },
            }, dispatch);
        }, [dispatch]);
        return [ref.current, dispatchRef.current];
    };
};
/* harmony default export */ __webpack_exports__["default"] = (createReducer);


/***/ }),

/***/ "../node_modules/react-use/esm/factory/createReducerContext.js":
/*!*********************************************************************!*\
  !*** ../node_modules/react-use/esm/factory/createReducerContext.js ***!
  \*********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);

var createReducerContext = function (reducer, defaultInitialState) {
    var context = Object(react__WEBPACK_IMPORTED_MODULE_0__["createContext"])(undefined);
    var providerFactory = function (props, children) { return Object(react__WEBPACK_IMPORTED_MODULE_0__["createElement"])(context.Provider, props, children); };
    var ReducerProvider = function (_a) {
        var children = _a.children, initialState = _a.initialState;
        var state = Object(react__WEBPACK_IMPORTED_MODULE_0__["useReducer"])(reducer, initialState !== undefined ? initialState : defaultInitialState);
        return providerFactory({ value: state }, children);
    };
    var useReducerContext = function () {
        var state = Object(react__WEBPACK_IMPORTED_MODULE_0__["useContext"])(context);
        if (state == null) {
            throw new Error("useReducerContext must be used inside a ReducerProvider.");
        }
        return state;
    };
    return [useReducerContext, ReducerProvider, context];
};
/* harmony default export */ __webpack_exports__["default"] = (createReducerContext);


/***/ }),

/***/ "../node_modules/react-use/esm/factory/createStateContext.js":
/*!*******************************************************************!*\
  !*** ../node_modules/react-use/esm/factory/createStateContext.js ***!
  \*******************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);

var createStateContext = function (defaultInitialValue) {
    var context = Object(react__WEBPACK_IMPORTED_MODULE_0__["createContext"])(undefined);
    var providerFactory = function (props, children) { return Object(react__WEBPACK_IMPORTED_MODULE_0__["createElement"])(context.Provider, props, children); };
    var StateProvider = function (_a) {
        var children = _a.children, initialValue = _a.initialValue;
        var state = Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])(initialValue !== undefined ? initialValue : defaultInitialValue);
        return providerFactory({ value: state }, children);
    };
    var useStateContext = function () {
        var state = Object(react__WEBPACK_IMPORTED_MODULE_0__["useContext"])(context);
        if (state == null) {
            throw new Error("useStateContext must be used inside a StateProvider.");
        }
        return state;
    };
    return [useStateContext, StateProvider, context];
};
/* harmony default export */ __webpack_exports__["default"] = (createStateContext);


/***/ }),

/***/ "../node_modules/react-use/esm/index.js":
/*!**********************************************!*\
  !*** ../node_modules/react-use/esm/index.js ***!
  \**********************************************/
/*! exports provided: createMemo, createReducerContext, createReducer, createStateContext, useAsync, useAsyncFn, useAsyncRetry, useAudio, useBattery, useBeforeUnload, useBoolean, useClickAway, useCookie, useCopyToClipboard, useCounter, useCss, useCustomCompareEffect, useDebounce, useDeepCompareEffect, useDefault, useDrop, useDropArea, useEffectOnce, useEnsuredForwardedRef, ensuredForwardRef, useEvent, useError, useFavicon, useFullscreen, useGeolocation, useGetSet, useGetSetState, useHarmonicIntervalFn, useHover, useHoverDirty, useIdle, useIntersection, useInterval, useIsomorphicLayoutEffect, useKey, createBreakpoint, useKeyPress, useKeyPressEvent, useLatest, useLifecycles, useList, useLocalStorage, useLocation, useLockBodyScroll, useLogger, useLongPress, useMap, useMedia, useMediaDevices, useMediatedState, useMethods, useMotion, useMount, useMountedState, useMouse, useMouseHovered, useMouseWheel, useNetworkState, useNumber, useObservable, useOrientation, usePageLeave, usePermission, usePrevious, usePreviousDistinct, usePromise, useQueue, useRaf, useRafLoop, useRafState, useSearchParam, useScratch, useScroll, useScrolling, useSessionStorage, useSetState, useShallowCompareEffect, useSize, useSlider, useSpeech, useStartTyping, useStateWithHistory, useStateList, useThrottle, useThrottleFn, useTimeout, useTimeoutFn, useTitle, useToggle, useTween, useUnmount, useUnmountPromise, useUpdate, useUpdateEffect, useUpsert, useVibrate, useVideo, useStateValidator, useScrollbarWidth, useMultiStateValidator, useWindowScroll, useWindowSize, useMeasure, useRendersCount, useFirstMountState, useSet, createGlobalState, useHash */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _factory_createMemo__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./factory/createMemo */ "../node_modules/react-use/esm/factory/createMemo.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "createMemo", function() { return _factory_createMemo__WEBPACK_IMPORTED_MODULE_0__["default"]; });

/* harmony import */ var _factory_createReducerContext__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./factory/createReducerContext */ "../node_modules/react-use/esm/factory/createReducerContext.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "createReducerContext", function() { return _factory_createReducerContext__WEBPACK_IMPORTED_MODULE_1__["default"]; });

/* harmony import */ var _factory_createReducer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./factory/createReducer */ "../node_modules/react-use/esm/factory/createReducer.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "createReducer", function() { return _factory_createReducer__WEBPACK_IMPORTED_MODULE_2__["default"]; });

/* harmony import */ var _factory_createStateContext__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./factory/createStateContext */ "../node_modules/react-use/esm/factory/createStateContext.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "createStateContext", function() { return _factory_createStateContext__WEBPACK_IMPORTED_MODULE_3__["default"]; });

/* harmony import */ var _useAsync__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./useAsync */ "../node_modules/react-use/esm/useAsync.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useAsync", function() { return _useAsync__WEBPACK_IMPORTED_MODULE_4__["default"]; });

/* harmony import */ var _useAsyncFn__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./useAsyncFn */ "../node_modules/react-use/esm/useAsyncFn.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useAsyncFn", function() { return _useAsyncFn__WEBPACK_IMPORTED_MODULE_5__["default"]; });

/* harmony import */ var _useAsyncRetry__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./useAsyncRetry */ "../node_modules/react-use/esm/useAsyncRetry.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useAsyncRetry", function() { return _useAsyncRetry__WEBPACK_IMPORTED_MODULE_6__["default"]; });

/* harmony import */ var _useAudio__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./useAudio */ "../node_modules/react-use/esm/useAudio.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useAudio", function() { return _useAudio__WEBPACK_IMPORTED_MODULE_7__["default"]; });

/* harmony import */ var _useBattery__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./useBattery */ "../node_modules/react-use/esm/useBattery.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useBattery", function() { return _useBattery__WEBPACK_IMPORTED_MODULE_8__["default"]; });

/* harmony import */ var _useBeforeUnload__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./useBeforeUnload */ "../node_modules/react-use/esm/useBeforeUnload.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useBeforeUnload", function() { return _useBeforeUnload__WEBPACK_IMPORTED_MODULE_9__["default"]; });

/* harmony import */ var _useBoolean__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./useBoolean */ "../node_modules/react-use/esm/useBoolean.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useBoolean", function() { return _useBoolean__WEBPACK_IMPORTED_MODULE_10__["default"]; });

/* harmony import */ var _useClickAway__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./useClickAway */ "../node_modules/react-use/esm/useClickAway.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useClickAway", function() { return _useClickAway__WEBPACK_IMPORTED_MODULE_11__["default"]; });

/* harmony import */ var _useCookie__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./useCookie */ "../node_modules/react-use/esm/useCookie.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useCookie", function() { return _useCookie__WEBPACK_IMPORTED_MODULE_12__["default"]; });

/* harmony import */ var _useCopyToClipboard__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./useCopyToClipboard */ "../node_modules/react-use/esm/useCopyToClipboard.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useCopyToClipboard", function() { return _useCopyToClipboard__WEBPACK_IMPORTED_MODULE_13__["default"]; });

/* harmony import */ var _useCounter__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./useCounter */ "../node_modules/react-use/esm/useCounter.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useCounter", function() { return _useCounter__WEBPACK_IMPORTED_MODULE_14__["default"]; });

/* harmony import */ var _useCss__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./useCss */ "../node_modules/react-use/esm/useCss.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useCss", function() { return _useCss__WEBPACK_IMPORTED_MODULE_15__["default"]; });

/* harmony import */ var _useCustomCompareEffect__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./useCustomCompareEffect */ "../node_modules/react-use/esm/useCustomCompareEffect.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useCustomCompareEffect", function() { return _useCustomCompareEffect__WEBPACK_IMPORTED_MODULE_16__["default"]; });

/* harmony import */ var _useDebounce__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./useDebounce */ "../node_modules/react-use/esm/useDebounce.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useDebounce", function() { return _useDebounce__WEBPACK_IMPORTED_MODULE_17__["default"]; });

/* harmony import */ var _useDeepCompareEffect__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./useDeepCompareEffect */ "../node_modules/react-use/esm/useDeepCompareEffect.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useDeepCompareEffect", function() { return _useDeepCompareEffect__WEBPACK_IMPORTED_MODULE_18__["default"]; });

/* harmony import */ var _useDefault__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./useDefault */ "../node_modules/react-use/esm/useDefault.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useDefault", function() { return _useDefault__WEBPACK_IMPORTED_MODULE_19__["default"]; });

/* harmony import */ var _useDrop__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./useDrop */ "../node_modules/react-use/esm/useDrop.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useDrop", function() { return _useDrop__WEBPACK_IMPORTED_MODULE_20__["default"]; });

/* harmony import */ var _useDropArea__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./useDropArea */ "../node_modules/react-use/esm/useDropArea.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useDropArea", function() { return _useDropArea__WEBPACK_IMPORTED_MODULE_21__["default"]; });

/* harmony import */ var _useEffectOnce__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./useEffectOnce */ "../node_modules/react-use/esm/useEffectOnce.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useEffectOnce", function() { return _useEffectOnce__WEBPACK_IMPORTED_MODULE_22__["default"]; });

/* harmony import */ var _useEnsuredForwardedRef__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./useEnsuredForwardedRef */ "../node_modules/react-use/esm/useEnsuredForwardedRef.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useEnsuredForwardedRef", function() { return _useEnsuredForwardedRef__WEBPACK_IMPORTED_MODULE_23__["default"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ensuredForwardRef", function() { return _useEnsuredForwardedRef__WEBPACK_IMPORTED_MODULE_23__["ensuredForwardRef"]; });

/* harmony import */ var _useEvent__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ./useEvent */ "../node_modules/react-use/esm/useEvent.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useEvent", function() { return _useEvent__WEBPACK_IMPORTED_MODULE_24__["default"]; });

/* harmony import */ var _useError__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ./useError */ "../node_modules/react-use/esm/useError.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useError", function() { return _useError__WEBPACK_IMPORTED_MODULE_25__["default"]; });

/* harmony import */ var _useFavicon__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ./useFavicon */ "../node_modules/react-use/esm/useFavicon.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useFavicon", function() { return _useFavicon__WEBPACK_IMPORTED_MODULE_26__["default"]; });

/* harmony import */ var _useFullscreen__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ./useFullscreen */ "../node_modules/react-use/esm/useFullscreen.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useFullscreen", function() { return _useFullscreen__WEBPACK_IMPORTED_MODULE_27__["default"]; });

/* harmony import */ var _useGeolocation__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ./useGeolocation */ "../node_modules/react-use/esm/useGeolocation.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useGeolocation", function() { return _useGeolocation__WEBPACK_IMPORTED_MODULE_28__["default"]; });

/* harmony import */ var _useGetSet__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ./useGetSet */ "../node_modules/react-use/esm/useGetSet.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useGetSet", function() { return _useGetSet__WEBPACK_IMPORTED_MODULE_29__["default"]; });

/* harmony import */ var _useGetSetState__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! ./useGetSetState */ "../node_modules/react-use/esm/useGetSetState.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useGetSetState", function() { return _useGetSetState__WEBPACK_IMPORTED_MODULE_30__["default"]; });

/* harmony import */ var _useHarmonicIntervalFn__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! ./useHarmonicIntervalFn */ "../node_modules/react-use/esm/useHarmonicIntervalFn.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useHarmonicIntervalFn", function() { return _useHarmonicIntervalFn__WEBPACK_IMPORTED_MODULE_31__["default"]; });

/* harmony import */ var _useHover__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! ./useHover */ "../node_modules/react-use/esm/useHover.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useHover", function() { return _useHover__WEBPACK_IMPORTED_MODULE_32__["default"]; });

/* harmony import */ var _useHoverDirty__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! ./useHoverDirty */ "../node_modules/react-use/esm/useHoverDirty.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useHoverDirty", function() { return _useHoverDirty__WEBPACK_IMPORTED_MODULE_33__["default"]; });

/* harmony import */ var _useIdle__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(/*! ./useIdle */ "../node_modules/react-use/esm/useIdle.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useIdle", function() { return _useIdle__WEBPACK_IMPORTED_MODULE_34__["default"]; });

/* harmony import */ var _useIntersection__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(/*! ./useIntersection */ "../node_modules/react-use/esm/useIntersection.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useIntersection", function() { return _useIntersection__WEBPACK_IMPORTED_MODULE_35__["default"]; });

/* harmony import */ var _useInterval__WEBPACK_IMPORTED_MODULE_36__ = __webpack_require__(/*! ./useInterval */ "../node_modules/react-use/esm/useInterval.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useInterval", function() { return _useInterval__WEBPACK_IMPORTED_MODULE_36__["default"]; });

/* harmony import */ var _useIsomorphicLayoutEffect__WEBPACK_IMPORTED_MODULE_37__ = __webpack_require__(/*! ./useIsomorphicLayoutEffect */ "../node_modules/react-use/esm/useIsomorphicLayoutEffect.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useIsomorphicLayoutEffect", function() { return _useIsomorphicLayoutEffect__WEBPACK_IMPORTED_MODULE_37__["default"]; });

/* harmony import */ var _useKey__WEBPACK_IMPORTED_MODULE_38__ = __webpack_require__(/*! ./useKey */ "../node_modules/react-use/esm/useKey.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useKey", function() { return _useKey__WEBPACK_IMPORTED_MODULE_38__["default"]; });

/* harmony import */ var _factory_createBreakpoint__WEBPACK_IMPORTED_MODULE_39__ = __webpack_require__(/*! ./factory/createBreakpoint */ "../node_modules/react-use/esm/factory/createBreakpoint.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "createBreakpoint", function() { return _factory_createBreakpoint__WEBPACK_IMPORTED_MODULE_39__["default"]; });

/* harmony import */ var _useKeyPress__WEBPACK_IMPORTED_MODULE_40__ = __webpack_require__(/*! ./useKeyPress */ "../node_modules/react-use/esm/useKeyPress.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useKeyPress", function() { return _useKeyPress__WEBPACK_IMPORTED_MODULE_40__["default"]; });

/* harmony import */ var _useKeyPressEvent__WEBPACK_IMPORTED_MODULE_41__ = __webpack_require__(/*! ./useKeyPressEvent */ "../node_modules/react-use/esm/useKeyPressEvent.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useKeyPressEvent", function() { return _useKeyPressEvent__WEBPACK_IMPORTED_MODULE_41__["default"]; });

/* harmony import */ var _useLatest__WEBPACK_IMPORTED_MODULE_42__ = __webpack_require__(/*! ./useLatest */ "../node_modules/react-use/esm/useLatest.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useLatest", function() { return _useLatest__WEBPACK_IMPORTED_MODULE_42__["default"]; });

/* harmony import */ var _useLifecycles__WEBPACK_IMPORTED_MODULE_43__ = __webpack_require__(/*! ./useLifecycles */ "../node_modules/react-use/esm/useLifecycles.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useLifecycles", function() { return _useLifecycles__WEBPACK_IMPORTED_MODULE_43__["default"]; });

/* harmony import */ var _useList__WEBPACK_IMPORTED_MODULE_44__ = __webpack_require__(/*! ./useList */ "../node_modules/react-use/esm/useList.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useList", function() { return _useList__WEBPACK_IMPORTED_MODULE_44__["default"]; });

/* harmony import */ var _useLocalStorage__WEBPACK_IMPORTED_MODULE_45__ = __webpack_require__(/*! ./useLocalStorage */ "../node_modules/react-use/esm/useLocalStorage.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useLocalStorage", function() { return _useLocalStorage__WEBPACK_IMPORTED_MODULE_45__["default"]; });

/* harmony import */ var _useLocation__WEBPACK_IMPORTED_MODULE_46__ = __webpack_require__(/*! ./useLocation */ "../node_modules/react-use/esm/useLocation.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useLocation", function() { return _useLocation__WEBPACK_IMPORTED_MODULE_46__["default"]; });

/* harmony import */ var _useLockBodyScroll__WEBPACK_IMPORTED_MODULE_47__ = __webpack_require__(/*! ./useLockBodyScroll */ "../node_modules/react-use/esm/useLockBodyScroll.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useLockBodyScroll", function() { return _useLockBodyScroll__WEBPACK_IMPORTED_MODULE_47__["default"]; });

/* harmony import */ var _useLogger__WEBPACK_IMPORTED_MODULE_48__ = __webpack_require__(/*! ./useLogger */ "../node_modules/react-use/esm/useLogger.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useLogger", function() { return _useLogger__WEBPACK_IMPORTED_MODULE_48__["default"]; });

/* harmony import */ var _useLongPress__WEBPACK_IMPORTED_MODULE_49__ = __webpack_require__(/*! ./useLongPress */ "../node_modules/react-use/esm/useLongPress.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useLongPress", function() { return _useLongPress__WEBPACK_IMPORTED_MODULE_49__["default"]; });

/* harmony import */ var _useMap__WEBPACK_IMPORTED_MODULE_50__ = __webpack_require__(/*! ./useMap */ "../node_modules/react-use/esm/useMap.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useMap", function() { return _useMap__WEBPACK_IMPORTED_MODULE_50__["default"]; });

/* harmony import */ var _useMedia__WEBPACK_IMPORTED_MODULE_51__ = __webpack_require__(/*! ./useMedia */ "../node_modules/react-use/esm/useMedia.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useMedia", function() { return _useMedia__WEBPACK_IMPORTED_MODULE_51__["default"]; });

/* harmony import */ var _useMediaDevices__WEBPACK_IMPORTED_MODULE_52__ = __webpack_require__(/*! ./useMediaDevices */ "../node_modules/react-use/esm/useMediaDevices.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useMediaDevices", function() { return _useMediaDevices__WEBPACK_IMPORTED_MODULE_52__["default"]; });

/* harmony import */ var _useMediatedState__WEBPACK_IMPORTED_MODULE_53__ = __webpack_require__(/*! ./useMediatedState */ "../node_modules/react-use/esm/useMediatedState.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useMediatedState", function() { return _useMediatedState__WEBPACK_IMPORTED_MODULE_53__["useMediatedState"]; });

/* harmony import */ var _useMethods__WEBPACK_IMPORTED_MODULE_54__ = __webpack_require__(/*! ./useMethods */ "../node_modules/react-use/esm/useMethods.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useMethods", function() { return _useMethods__WEBPACK_IMPORTED_MODULE_54__["default"]; });

/* harmony import */ var _useMotion__WEBPACK_IMPORTED_MODULE_55__ = __webpack_require__(/*! ./useMotion */ "../node_modules/react-use/esm/useMotion.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useMotion", function() { return _useMotion__WEBPACK_IMPORTED_MODULE_55__["default"]; });

/* harmony import */ var _useMount__WEBPACK_IMPORTED_MODULE_56__ = __webpack_require__(/*! ./useMount */ "../node_modules/react-use/esm/useMount.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useMount", function() { return _useMount__WEBPACK_IMPORTED_MODULE_56__["default"]; });

/* harmony import */ var _useMountedState__WEBPACK_IMPORTED_MODULE_57__ = __webpack_require__(/*! ./useMountedState */ "../node_modules/react-use/esm/useMountedState.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useMountedState", function() { return _useMountedState__WEBPACK_IMPORTED_MODULE_57__["default"]; });

/* harmony import */ var _useMouse__WEBPACK_IMPORTED_MODULE_58__ = __webpack_require__(/*! ./useMouse */ "../node_modules/react-use/esm/useMouse.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useMouse", function() { return _useMouse__WEBPACK_IMPORTED_MODULE_58__["default"]; });

/* harmony import */ var _useMouseHovered__WEBPACK_IMPORTED_MODULE_59__ = __webpack_require__(/*! ./useMouseHovered */ "../node_modules/react-use/esm/useMouseHovered.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useMouseHovered", function() { return _useMouseHovered__WEBPACK_IMPORTED_MODULE_59__["default"]; });

/* harmony import */ var _useMouseWheel__WEBPACK_IMPORTED_MODULE_60__ = __webpack_require__(/*! ./useMouseWheel */ "../node_modules/react-use/esm/useMouseWheel.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useMouseWheel", function() { return _useMouseWheel__WEBPACK_IMPORTED_MODULE_60__["default"]; });

/* harmony import */ var _useNetworkState__WEBPACK_IMPORTED_MODULE_61__ = __webpack_require__(/*! ./useNetworkState */ "../node_modules/react-use/esm/useNetworkState.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useNetworkState", function() { return _useNetworkState__WEBPACK_IMPORTED_MODULE_61__["default"]; });

/* harmony import */ var _useNumber__WEBPACK_IMPORTED_MODULE_62__ = __webpack_require__(/*! ./useNumber */ "../node_modules/react-use/esm/useNumber.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useNumber", function() { return _useNumber__WEBPACK_IMPORTED_MODULE_62__["default"]; });

/* harmony import */ var _useObservable__WEBPACK_IMPORTED_MODULE_63__ = __webpack_require__(/*! ./useObservable */ "../node_modules/react-use/esm/useObservable.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useObservable", function() { return _useObservable__WEBPACK_IMPORTED_MODULE_63__["default"]; });

/* harmony import */ var _useOrientation__WEBPACK_IMPORTED_MODULE_64__ = __webpack_require__(/*! ./useOrientation */ "../node_modules/react-use/esm/useOrientation.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useOrientation", function() { return _useOrientation__WEBPACK_IMPORTED_MODULE_64__["default"]; });

/* harmony import */ var _usePageLeave__WEBPACK_IMPORTED_MODULE_65__ = __webpack_require__(/*! ./usePageLeave */ "../node_modules/react-use/esm/usePageLeave.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "usePageLeave", function() { return _usePageLeave__WEBPACK_IMPORTED_MODULE_65__["default"]; });

/* harmony import */ var _usePermission__WEBPACK_IMPORTED_MODULE_66__ = __webpack_require__(/*! ./usePermission */ "../node_modules/react-use/esm/usePermission.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "usePermission", function() { return _usePermission__WEBPACK_IMPORTED_MODULE_66__["default"]; });

/* harmony import */ var _usePrevious__WEBPACK_IMPORTED_MODULE_67__ = __webpack_require__(/*! ./usePrevious */ "../node_modules/react-use/esm/usePrevious.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "usePrevious", function() { return _usePrevious__WEBPACK_IMPORTED_MODULE_67__["default"]; });

/* harmony import */ var _usePreviousDistinct__WEBPACK_IMPORTED_MODULE_68__ = __webpack_require__(/*! ./usePreviousDistinct */ "../node_modules/react-use/esm/usePreviousDistinct.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "usePreviousDistinct", function() { return _usePreviousDistinct__WEBPACK_IMPORTED_MODULE_68__["default"]; });

/* harmony import */ var _usePromise__WEBPACK_IMPORTED_MODULE_69__ = __webpack_require__(/*! ./usePromise */ "../node_modules/react-use/esm/usePromise.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "usePromise", function() { return _usePromise__WEBPACK_IMPORTED_MODULE_69__["default"]; });

/* harmony import */ var _useQueue__WEBPACK_IMPORTED_MODULE_70__ = __webpack_require__(/*! ./useQueue */ "../node_modules/react-use/esm/useQueue.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useQueue", function() { return _useQueue__WEBPACK_IMPORTED_MODULE_70__["default"]; });

/* harmony import */ var _useRaf__WEBPACK_IMPORTED_MODULE_71__ = __webpack_require__(/*! ./useRaf */ "../node_modules/react-use/esm/useRaf.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useRaf", function() { return _useRaf__WEBPACK_IMPORTED_MODULE_71__["default"]; });

/* harmony import */ var _useRafLoop__WEBPACK_IMPORTED_MODULE_72__ = __webpack_require__(/*! ./useRafLoop */ "../node_modules/react-use/esm/useRafLoop.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useRafLoop", function() { return _useRafLoop__WEBPACK_IMPORTED_MODULE_72__["default"]; });

/* harmony import */ var _useRafState__WEBPACK_IMPORTED_MODULE_73__ = __webpack_require__(/*! ./useRafState */ "../node_modules/react-use/esm/useRafState.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useRafState", function() { return _useRafState__WEBPACK_IMPORTED_MODULE_73__["default"]; });

/* harmony import */ var _useSearchParam__WEBPACK_IMPORTED_MODULE_74__ = __webpack_require__(/*! ./useSearchParam */ "../node_modules/react-use/esm/useSearchParam.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useSearchParam", function() { return _useSearchParam__WEBPACK_IMPORTED_MODULE_74__["default"]; });

/* harmony import */ var _useScratch__WEBPACK_IMPORTED_MODULE_75__ = __webpack_require__(/*! ./useScratch */ "../node_modules/react-use/esm/useScratch.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useScratch", function() { return _useScratch__WEBPACK_IMPORTED_MODULE_75__["default"]; });

/* harmony import */ var _useScroll__WEBPACK_IMPORTED_MODULE_76__ = __webpack_require__(/*! ./useScroll */ "../node_modules/react-use/esm/useScroll.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useScroll", function() { return _useScroll__WEBPACK_IMPORTED_MODULE_76__["default"]; });

/* harmony import */ var _useScrolling__WEBPACK_IMPORTED_MODULE_77__ = __webpack_require__(/*! ./useScrolling */ "../node_modules/react-use/esm/useScrolling.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useScrolling", function() { return _useScrolling__WEBPACK_IMPORTED_MODULE_77__["default"]; });

/* harmony import */ var _useSessionStorage__WEBPACK_IMPORTED_MODULE_78__ = __webpack_require__(/*! ./useSessionStorage */ "../node_modules/react-use/esm/useSessionStorage.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useSessionStorage", function() { return _useSessionStorage__WEBPACK_IMPORTED_MODULE_78__["default"]; });

/* harmony import */ var _useSetState__WEBPACK_IMPORTED_MODULE_79__ = __webpack_require__(/*! ./useSetState */ "../node_modules/react-use/esm/useSetState.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useSetState", function() { return _useSetState__WEBPACK_IMPORTED_MODULE_79__["default"]; });

/* harmony import */ var _useShallowCompareEffect__WEBPACK_IMPORTED_MODULE_80__ = __webpack_require__(/*! ./useShallowCompareEffect */ "../node_modules/react-use/esm/useShallowCompareEffect.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useShallowCompareEffect", function() { return _useShallowCompareEffect__WEBPACK_IMPORTED_MODULE_80__["default"]; });

/* harmony import */ var _useSize__WEBPACK_IMPORTED_MODULE_81__ = __webpack_require__(/*! ./useSize */ "../node_modules/react-use/esm/useSize.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useSize", function() { return _useSize__WEBPACK_IMPORTED_MODULE_81__["default"]; });

/* harmony import */ var _useSlider__WEBPACK_IMPORTED_MODULE_82__ = __webpack_require__(/*! ./useSlider */ "../node_modules/react-use/esm/useSlider.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useSlider", function() { return _useSlider__WEBPACK_IMPORTED_MODULE_82__["default"]; });

/* harmony import */ var _useSpeech__WEBPACK_IMPORTED_MODULE_83__ = __webpack_require__(/*! ./useSpeech */ "../node_modules/react-use/esm/useSpeech.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useSpeech", function() { return _useSpeech__WEBPACK_IMPORTED_MODULE_83__["default"]; });

/* harmony import */ var _useStartTyping__WEBPACK_IMPORTED_MODULE_84__ = __webpack_require__(/*! ./useStartTyping */ "../node_modules/react-use/esm/useStartTyping.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useStartTyping", function() { return _useStartTyping__WEBPACK_IMPORTED_MODULE_84__["default"]; });

/* harmony import */ var _useStateWithHistory__WEBPACK_IMPORTED_MODULE_85__ = __webpack_require__(/*! ./useStateWithHistory */ "../node_modules/react-use/esm/useStateWithHistory.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useStateWithHistory", function() { return _useStateWithHistory__WEBPACK_IMPORTED_MODULE_85__["useStateWithHistory"]; });

/* harmony import */ var _useStateList__WEBPACK_IMPORTED_MODULE_86__ = __webpack_require__(/*! ./useStateList */ "../node_modules/react-use/esm/useStateList.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useStateList", function() { return _useStateList__WEBPACK_IMPORTED_MODULE_86__["default"]; });

/* harmony import */ var _useThrottle__WEBPACK_IMPORTED_MODULE_87__ = __webpack_require__(/*! ./useThrottle */ "../node_modules/react-use/esm/useThrottle.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useThrottle", function() { return _useThrottle__WEBPACK_IMPORTED_MODULE_87__["default"]; });

/* harmony import */ var _useThrottleFn__WEBPACK_IMPORTED_MODULE_88__ = __webpack_require__(/*! ./useThrottleFn */ "../node_modules/react-use/esm/useThrottleFn.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useThrottleFn", function() { return _useThrottleFn__WEBPACK_IMPORTED_MODULE_88__["default"]; });

/* harmony import */ var _useTimeout__WEBPACK_IMPORTED_MODULE_89__ = __webpack_require__(/*! ./useTimeout */ "../node_modules/react-use/esm/useTimeout.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useTimeout", function() { return _useTimeout__WEBPACK_IMPORTED_MODULE_89__["default"]; });

/* harmony import */ var _useTimeoutFn__WEBPACK_IMPORTED_MODULE_90__ = __webpack_require__(/*! ./useTimeoutFn */ "../node_modules/react-use/esm/useTimeoutFn.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useTimeoutFn", function() { return _useTimeoutFn__WEBPACK_IMPORTED_MODULE_90__["default"]; });

/* harmony import */ var _useTitle__WEBPACK_IMPORTED_MODULE_91__ = __webpack_require__(/*! ./useTitle */ "../node_modules/react-use/esm/useTitle.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useTitle", function() { return _useTitle__WEBPACK_IMPORTED_MODULE_91__["default"]; });

/* harmony import */ var _useToggle__WEBPACK_IMPORTED_MODULE_92__ = __webpack_require__(/*! ./useToggle */ "../node_modules/react-use/esm/useToggle.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useToggle", function() { return _useToggle__WEBPACK_IMPORTED_MODULE_92__["default"]; });

/* harmony import */ var _useTween__WEBPACK_IMPORTED_MODULE_93__ = __webpack_require__(/*! ./useTween */ "../node_modules/react-use/esm/useTween.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useTween", function() { return _useTween__WEBPACK_IMPORTED_MODULE_93__["default"]; });

/* harmony import */ var _useUnmount__WEBPACK_IMPORTED_MODULE_94__ = __webpack_require__(/*! ./useUnmount */ "../node_modules/react-use/esm/useUnmount.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useUnmount", function() { return _useUnmount__WEBPACK_IMPORTED_MODULE_94__["default"]; });

/* harmony import */ var _useUnmountPromise__WEBPACK_IMPORTED_MODULE_95__ = __webpack_require__(/*! ./useUnmountPromise */ "../node_modules/react-use/esm/useUnmountPromise.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useUnmountPromise", function() { return _useUnmountPromise__WEBPACK_IMPORTED_MODULE_95__["default"]; });

/* harmony import */ var _useUpdate__WEBPACK_IMPORTED_MODULE_96__ = __webpack_require__(/*! ./useUpdate */ "../node_modules/react-use/esm/useUpdate.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useUpdate", function() { return _useUpdate__WEBPACK_IMPORTED_MODULE_96__["default"]; });

/* harmony import */ var _useUpdateEffect__WEBPACK_IMPORTED_MODULE_97__ = __webpack_require__(/*! ./useUpdateEffect */ "../node_modules/react-use/esm/useUpdateEffect.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useUpdateEffect", function() { return _useUpdateEffect__WEBPACK_IMPORTED_MODULE_97__["default"]; });

/* harmony import */ var _useUpsert__WEBPACK_IMPORTED_MODULE_98__ = __webpack_require__(/*! ./useUpsert */ "../node_modules/react-use/esm/useUpsert.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useUpsert", function() { return _useUpsert__WEBPACK_IMPORTED_MODULE_98__["default"]; });

/* harmony import */ var _useVibrate__WEBPACK_IMPORTED_MODULE_99__ = __webpack_require__(/*! ./useVibrate */ "../node_modules/react-use/esm/useVibrate.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useVibrate", function() { return _useVibrate__WEBPACK_IMPORTED_MODULE_99__["default"]; });

/* harmony import */ var _useVideo__WEBPACK_IMPORTED_MODULE_100__ = __webpack_require__(/*! ./useVideo */ "../node_modules/react-use/esm/useVideo.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useVideo", function() { return _useVideo__WEBPACK_IMPORTED_MODULE_100__["default"]; });

/* harmony import */ var _useStateValidator__WEBPACK_IMPORTED_MODULE_101__ = __webpack_require__(/*! ./useStateValidator */ "../node_modules/react-use/esm/useStateValidator.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useStateValidator", function() { return _useStateValidator__WEBPACK_IMPORTED_MODULE_101__["default"]; });

/* harmony import */ var _useScrollbarWidth__WEBPACK_IMPORTED_MODULE_102__ = __webpack_require__(/*! ./useScrollbarWidth */ "../node_modules/react-use/esm/useScrollbarWidth.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useScrollbarWidth", function() { return _useScrollbarWidth__WEBPACK_IMPORTED_MODULE_102__["useScrollbarWidth"]; });

/* harmony import */ var _useMultiStateValidator__WEBPACK_IMPORTED_MODULE_103__ = __webpack_require__(/*! ./useMultiStateValidator */ "../node_modules/react-use/esm/useMultiStateValidator.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useMultiStateValidator", function() { return _useMultiStateValidator__WEBPACK_IMPORTED_MODULE_103__["useMultiStateValidator"]; });

/* harmony import */ var _useWindowScroll__WEBPACK_IMPORTED_MODULE_104__ = __webpack_require__(/*! ./useWindowScroll */ "../node_modules/react-use/esm/useWindowScroll.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useWindowScroll", function() { return _useWindowScroll__WEBPACK_IMPORTED_MODULE_104__["default"]; });

/* harmony import */ var _useWindowSize__WEBPACK_IMPORTED_MODULE_105__ = __webpack_require__(/*! ./useWindowSize */ "../node_modules/react-use/esm/useWindowSize.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useWindowSize", function() { return _useWindowSize__WEBPACK_IMPORTED_MODULE_105__["default"]; });

/* harmony import */ var _useMeasure__WEBPACK_IMPORTED_MODULE_106__ = __webpack_require__(/*! ./useMeasure */ "../node_modules/react-use/esm/useMeasure.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useMeasure", function() { return _useMeasure__WEBPACK_IMPORTED_MODULE_106__["default"]; });

/* harmony import */ var _useRendersCount__WEBPACK_IMPORTED_MODULE_107__ = __webpack_require__(/*! ./useRendersCount */ "../node_modules/react-use/esm/useRendersCount.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useRendersCount", function() { return _useRendersCount__WEBPACK_IMPORTED_MODULE_107__["useRendersCount"]; });

/* harmony import */ var _useFirstMountState__WEBPACK_IMPORTED_MODULE_108__ = __webpack_require__(/*! ./useFirstMountState */ "../node_modules/react-use/esm/useFirstMountState.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useFirstMountState", function() { return _useFirstMountState__WEBPACK_IMPORTED_MODULE_108__["useFirstMountState"]; });

/* harmony import */ var _useSet__WEBPACK_IMPORTED_MODULE_109__ = __webpack_require__(/*! ./useSet */ "../node_modules/react-use/esm/useSet.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useSet", function() { return _useSet__WEBPACK_IMPORTED_MODULE_109__["default"]; });

/* harmony import */ var _factory_createGlobalState__WEBPACK_IMPORTED_MODULE_110__ = __webpack_require__(/*! ./factory/createGlobalState */ "../node_modules/react-use/esm/factory/createGlobalState.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "createGlobalState", function() { return _factory_createGlobalState__WEBPACK_IMPORTED_MODULE_110__["createGlobalState"]; });

/* harmony import */ var _useHash__WEBPACK_IMPORTED_MODULE_111__ = __webpack_require__(/*! ./useHash */ "../node_modules/react-use/esm/useHash.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useHash", function() { return _useHash__WEBPACK_IMPORTED_MODULE_111__["useHash"]; });









































// not exported because of peer dependency
// export { default as useKeyboardJs } from './useKeyboardJs';












































// not exported because of peer dependency
// export { default as useSpring } from './useSpring';






























/***/ }),

/***/ "../node_modules/react-use/esm/misc/hookState.js":
/*!*******************************************************!*\
  !*** ../node_modules/react-use/esm/misc/hookState.js ***!
  \*******************************************************/
/*! exports provided: resolveHookState */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "resolveHookState", function() { return resolveHookState; });
function resolveHookState(nextState, currentState) {
    if (typeof nextState === 'function') {
        return nextState.length ? nextState(currentState) : nextState();
    }
    return nextState;
}


/***/ }),

/***/ "../node_modules/react-use/esm/misc/isDeepEqual.js":
/*!*********************************************************!*\
  !*** ../node_modules/react-use/esm/misc/isDeepEqual.js ***!
  \*********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var fast_deep_equal_react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! fast-deep-equal/react */ "../node_modules/fast-deep-equal/react.js");
/* harmony import */ var fast_deep_equal_react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(fast_deep_equal_react__WEBPACK_IMPORTED_MODULE_0__);

/* harmony default export */ __webpack_exports__["default"] = (fast_deep_equal_react__WEBPACK_IMPORTED_MODULE_0___default.a);


/***/ }),

/***/ "../node_modules/react-use/esm/misc/parseTimeRanges.js":
/*!*************************************************************!*\
  !*** ../node_modules/react-use/esm/misc/parseTimeRanges.js ***!
  \*************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return parseTimeRanges; });
function parseTimeRanges(ranges) {
    var result = [];
    for (var i = 0; i < ranges.length; i++) {
        result.push({
            start: ranges.start(i),
            end: ranges.end(i),
        });
    }
    return result;
}


/***/ }),

/***/ "../node_modules/react-use/esm/misc/util.js":
/*!**************************************************!*\
  !*** ../node_modules/react-use/esm/misc/util.js ***!
  \**************************************************/
/*! exports provided: noop, on, off, isBrowser, isNavigator */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "noop", function() { return noop; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "on", function() { return on; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "off", function() { return off; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isBrowser", function() { return isBrowser; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isNavigator", function() { return isNavigator; });
var noop = function () { };
function on(obj) {
    var args = [];
    for (var _i = 1; _i < arguments.length; _i++) {
        args[_i - 1] = arguments[_i];
    }
    if (obj && obj.addEventListener) {
        obj.addEventListener.apply(obj, args);
    }
}
function off(obj) {
    var args = [];
    for (var _i = 1; _i < arguments.length; _i++) {
        args[_i - 1] = arguments[_i];
    }
    if (obj && obj.removeEventListener) {
        obj.removeEventListener.apply(obj, args);
    }
}
var isBrowser = typeof window !== 'undefined';
var isNavigator = typeof navigator !== 'undefined';


/***/ }),

/***/ "../node_modules/react-use/esm/useAsync.js":
/*!*************************************************!*\
  !*** ../node_modules/react-use/esm/useAsync.js ***!
  \*************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return useAsync; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _useAsyncFn__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./useAsyncFn */ "../node_modules/react-use/esm/useAsyncFn.js");


function useAsync(fn, deps) {
    if (deps === void 0) { deps = []; }
    var _a = Object(_useAsyncFn__WEBPACK_IMPORTED_MODULE_1__["default"])(fn, deps, {
        loading: true,
    }), state = _a[0], callback = _a[1];
    Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
        callback();
    }, [callback]);
    return state;
}


/***/ }),

/***/ "../node_modules/react-use/esm/useAsyncFn.js":
/*!***************************************************!*\
  !*** ../node_modules/react-use/esm/useAsyncFn.js ***!
  \***************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return useAsyncFn; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../node_modules/react-use/node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _useMountedState__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./useMountedState */ "../node_modules/react-use/esm/useMountedState.js");



function useAsyncFn(fn, deps, initialState) {
    if (deps === void 0) { deps = []; }
    if (initialState === void 0) { initialState = { loading: false }; }
    var lastCallId = Object(react__WEBPACK_IMPORTED_MODULE_1__["useRef"])(0);
    var isMounted = Object(_useMountedState__WEBPACK_IMPORTED_MODULE_2__["default"])();
    var _a = Object(react__WEBPACK_IMPORTED_MODULE_1__["useState"])(initialState), state = _a[0], set = _a[1];
    var callback = Object(react__WEBPACK_IMPORTED_MODULE_1__["useCallback"])(function () {
        var args = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            args[_i] = arguments[_i];
        }
        var callId = ++lastCallId.current;
        if (!state.loading) {
            set(function (prevState) { return (Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])(Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])({}, prevState), { loading: true })); });
        }
        return fn.apply(void 0, args).then(function (value) {
            isMounted() && callId === lastCallId.current && set({ value: value, loading: false });
            return value;
        }, function (error) {
            isMounted() && callId === lastCallId.current && set({ error: error, loading: false });
            return error;
        });
    }, deps);
    return [state, callback];
}


/***/ }),

/***/ "../node_modules/react-use/esm/useAsyncRetry.js":
/*!******************************************************!*\
  !*** ../node_modules/react-use/esm/useAsyncRetry.js ***!
  \******************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../node_modules/react-use/node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _useAsync__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./useAsync */ "../node_modules/react-use/esm/useAsync.js");



var useAsyncRetry = function (fn, deps) {
    if (deps === void 0) { deps = []; }
    var _a = Object(react__WEBPACK_IMPORTED_MODULE_1__["useState"])(0), attempt = _a[0], setAttempt = _a[1];
    var state = Object(_useAsync__WEBPACK_IMPORTED_MODULE_2__["default"])(fn, Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__spreadArrays"])(deps, [attempt]));
    var stateLoading = state.loading;
    var retry = Object(react__WEBPACK_IMPORTED_MODULE_1__["useCallback"])(function () {
        if (stateLoading) {
            if (true) {
                console.log('You are calling useAsyncRetry hook retry() method while loading in progress, this is a no-op.');
            }
            return;
        }
        setAttempt(function (currentAttempt) { return currentAttempt + 1; });
    }, Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__spreadArrays"])(deps, [stateLoading]));
    return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])(Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])({}, state), { retry: retry });
};
/* harmony default export */ __webpack_exports__["default"] = (useAsyncRetry);


/***/ }),

/***/ "../node_modules/react-use/esm/useAudio.js":
/*!*************************************************!*\
  !*** ../node_modules/react-use/esm/useAudio.js ***!
  \*************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _factory_createHTMLMediaHook__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./factory/createHTMLMediaHook */ "../node_modules/react-use/esm/factory/createHTMLMediaHook.js");

var useAudio = Object(_factory_createHTMLMediaHook__WEBPACK_IMPORTED_MODULE_0__["default"])('audio');
/* harmony default export */ __webpack_exports__["default"] = (useAudio);


/***/ }),

/***/ "../node_modules/react-use/esm/useBattery.js":
/*!***************************************************!*\
  !*** ../node_modules/react-use/esm/useBattery.js ***!
  \***************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _misc_util__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./misc/util */ "../node_modules/react-use/esm/misc/util.js");
/* harmony import */ var _misc_isDeepEqual__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./misc/isDeepEqual */ "../node_modules/react-use/esm/misc/isDeepEqual.js");



var nav = _misc_util__WEBPACK_IMPORTED_MODULE_1__["isNavigator"] ? navigator : undefined;
var isBatteryApiSupported = nav && typeof nav.getBattery === 'function';
function useBatteryMock() {
    return { isSupported: false };
}
function useBattery() {
    var _a = Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])({ isSupported: true, fetched: false }), state = _a[0], setState = _a[1];
    Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
        var isMounted = true;
        var battery = null;
        var handleChange = function () {
            if (!isMounted || !battery) {
                return;
            }
            var newState = {
                isSupported: true,
                fetched: true,
                level: battery.level,
                charging: battery.charging,
                dischargingTime: battery.dischargingTime,
                chargingTime: battery.chargingTime,
            };
            !Object(_misc_isDeepEqual__WEBPACK_IMPORTED_MODULE_2__["default"])(state, newState) && setState(newState);
        };
        nav.getBattery().then(function (bat) {
            if (!isMounted) {
                return;
            }
            battery = bat;
            Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["on"])(battery, 'chargingchange', handleChange);
            Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["on"])(battery, 'chargingtimechange', handleChange);
            Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["on"])(battery, 'dischargingtimechange', handleChange);
            Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["on"])(battery, 'levelchange', handleChange);
            handleChange();
        });
        return function () {
            isMounted = false;
            if (battery) {
                Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["off"])(battery, 'chargingchange', handleChange);
                Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["off"])(battery, 'chargingtimechange', handleChange);
                Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["off"])(battery, 'dischargingtimechange', handleChange);
                Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["off"])(battery, 'levelchange', handleChange);
            }
        };
    }, []);
    return state;
}
/* harmony default export */ __webpack_exports__["default"] = (isBatteryApiSupported ? useBattery : useBatteryMock);


/***/ }),

/***/ "../node_modules/react-use/esm/useBeforeUnload.js":
/*!********************************************************!*\
  !*** ../node_modules/react-use/esm/useBeforeUnload.js ***!
  \********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _misc_util__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./misc/util */ "../node_modules/react-use/esm/misc/util.js");


var useBeforeUnload = function (enabled, message) {
    if (enabled === void 0) { enabled = true; }
    var handler = Object(react__WEBPACK_IMPORTED_MODULE_0__["useCallback"])(function (event) {
        var finalEnabled = typeof enabled === 'function' ? enabled() : true;
        if (!finalEnabled) {
            return;
        }
        event.preventDefault();
        if (message) {
            event.returnValue = message;
        }
        return message;
    }, [enabled, message]);
    Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
        if (!enabled) {
            return;
        }
        Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["on"])(window, 'beforeunload', handler);
        return function () { return Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["off"])(window, 'beforeunload', handler); };
    }, [enabled, handler]);
};
/* harmony default export */ __webpack_exports__["default"] = (useBeforeUnload);


/***/ }),

/***/ "../node_modules/react-use/esm/useBoolean.js":
/*!***************************************************!*\
  !*** ../node_modules/react-use/esm/useBoolean.js ***!
  \***************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _useToggle__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./useToggle */ "../node_modules/react-use/esm/useToggle.js");

/* harmony default export */ __webpack_exports__["default"] = (_useToggle__WEBPACK_IMPORTED_MODULE_0__["default"]);


/***/ }),

/***/ "../node_modules/react-use/esm/useClickAway.js":
/*!*****************************************************!*\
  !*** ../node_modules/react-use/esm/useClickAway.js ***!
  \*****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _misc_util__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./misc/util */ "../node_modules/react-use/esm/misc/util.js");


var defaultEvents = ['mousedown', 'touchstart'];
var useClickAway = function (ref, onClickAway, events) {
    if (events === void 0) { events = defaultEvents; }
    var savedCallback = Object(react__WEBPACK_IMPORTED_MODULE_0__["useRef"])(onClickAway);
    Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
        savedCallback.current = onClickAway;
    }, [onClickAway]);
    Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
        var handler = function (event) {
            var el = ref.current;
            el && !el.contains(event.target) && savedCallback.current(event);
        };
        for (var _i = 0, events_1 = events; _i < events_1.length; _i++) {
            var eventName = events_1[_i];
            Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["on"])(document, eventName, handler);
        }
        return function () {
            for (var _i = 0, events_2 = events; _i < events_2.length; _i++) {
                var eventName = events_2[_i];
                Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["off"])(document, eventName, handler);
            }
        };
    }, [events, ref]);
};
/* harmony default export */ __webpack_exports__["default"] = (useClickAway);


/***/ }),

/***/ "../node_modules/react-use/esm/useCookie.js":
/*!**************************************************!*\
  !*** ../node_modules/react-use/esm/useCookie.js ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var js_cookie__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! js-cookie */ "../node_modules/js-cookie/src/js.cookie.js");
/* harmony import */ var js_cookie__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(js_cookie__WEBPACK_IMPORTED_MODULE_1__);


var useCookie = function (cookieName) {
    var _a = Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])(function () { return js_cookie__WEBPACK_IMPORTED_MODULE_1___default.a.get(cookieName) || null; }), value = _a[0], setValue = _a[1];
    var updateCookie = Object(react__WEBPACK_IMPORTED_MODULE_0__["useCallback"])(function (newValue, options) {
        js_cookie__WEBPACK_IMPORTED_MODULE_1___default.a.set(cookieName, newValue, options);
        setValue(newValue);
    }, [cookieName]);
    var deleteCookie = Object(react__WEBPACK_IMPORTED_MODULE_0__["useCallback"])(function () {
        js_cookie__WEBPACK_IMPORTED_MODULE_1___default.a.remove(cookieName);
        setValue(null);
    }, [cookieName]);
    return [value, updateCookie, deleteCookie];
};
/* harmony default export */ __webpack_exports__["default"] = (useCookie);


/***/ }),

/***/ "../node_modules/react-use/esm/useCopyToClipboard.js":
/*!***********************************************************!*\
  !*** ../node_modules/react-use/esm/useCopyToClipboard.js ***!
  \***********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var copy_to_clipboard__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! copy-to-clipboard */ "../node_modules/copy-to-clipboard/index.js");
/* harmony import */ var copy_to_clipboard__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(copy_to_clipboard__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _useMountedState__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./useMountedState */ "../node_modules/react-use/esm/useMountedState.js");
/* harmony import */ var _useSetState__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./useSetState */ "../node_modules/react-use/esm/useSetState.js");




var useCopyToClipboard = function () {
    var isMounted = Object(_useMountedState__WEBPACK_IMPORTED_MODULE_2__["default"])();
    var _a = Object(_useSetState__WEBPACK_IMPORTED_MODULE_3__["default"])({
        value: undefined,
        error: undefined,
        noUserInteraction: true,
    }), state = _a[0], setState = _a[1];
    var copyToClipboard = Object(react__WEBPACK_IMPORTED_MODULE_1__["useCallback"])(function (value) {
        if (!isMounted()) {
            return;
        }
        var noUserInteraction;
        var normalizedValue;
        try {
            // only strings and numbers casted to strings can be copied to clipboard
            if (typeof value !== 'string' && typeof value !== 'number') {
                var error = new Error("Cannot copy typeof " + typeof value + " to clipboard, must be a string");
                if (true)
                    console.error(error);
                setState({
                    value: value,
                    error: error,
                    noUserInteraction: true,
                });
                return;
            }
            // empty strings are also considered invalid
            else if (value === '') {
                var error = new Error("Cannot copy empty string to clipboard.");
                if (true)
                    console.error(error);
                setState({
                    value: value,
                    error: error,
                    noUserInteraction: true,
                });
                return;
            }
            normalizedValue = value.toString();
            noUserInteraction = copy_to_clipboard__WEBPACK_IMPORTED_MODULE_0___default()(normalizedValue);
            setState({
                value: normalizedValue,
                error: undefined,
                noUserInteraction: noUserInteraction,
            });
        }
        catch (error) {
            setState({
                value: normalizedValue,
                error: error,
                noUserInteraction: noUserInteraction,
            });
        }
    }, []);
    return [state, copyToClipboard];
};
/* harmony default export */ __webpack_exports__["default"] = (useCopyToClipboard);


/***/ }),

/***/ "../node_modules/react-use/esm/useCounter.js":
/*!***************************************************!*\
  !*** ../node_modules/react-use/esm/useCounter.js ***!
  \***************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return useCounter; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _useGetSet__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./useGetSet */ "../node_modules/react-use/esm/useGetSet.js");
/* harmony import */ var _misc_hookState__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./misc/hookState */ "../node_modules/react-use/esm/misc/hookState.js");



function useCounter(initialValue, max, min) {
    if (initialValue === void 0) { initialValue = 0; }
    if (max === void 0) { max = null; }
    if (min === void 0) { min = null; }
    var init = Object(_misc_hookState__WEBPACK_IMPORTED_MODULE_2__["resolveHookState"])(initialValue);
    typeof init !== 'number' &&
        console.error('initialValue has to be a number, got ' + typeof initialValue);
    if (typeof min === 'number') {
        init = Math.max(init, min);
    }
    else if (min !== null) {
        console.error('min has to be a number, got ' + typeof min);
    }
    if (typeof max === 'number') {
        init = Math.min(init, max);
    }
    else if (max !== null) {
        console.error('max has to be a number, got ' + typeof max);
    }
    var _a = Object(_useGetSet__WEBPACK_IMPORTED_MODULE_1__["default"])(init), get = _a[0], setInternal = _a[1];
    return [
        get(),
        Object(react__WEBPACK_IMPORTED_MODULE_0__["useMemo"])(function () {
            var set = function (newState) {
                var prevState = get();
                var rState = Object(_misc_hookState__WEBPACK_IMPORTED_MODULE_2__["resolveHookState"])(newState, prevState);
                if (prevState !== rState) {
                    if (typeof min === 'number') {
                        rState = Math.max(rState, min);
                    }
                    if (typeof max === 'number') {
                        rState = Math.min(rState, max);
                    }
                    prevState !== rState && setInternal(rState);
                }
            };
            return {
                get: get,
                set: set,
                inc: function (delta) {
                    if (delta === void 0) { delta = 1; }
                    var rDelta = Object(_misc_hookState__WEBPACK_IMPORTED_MODULE_2__["resolveHookState"])(delta, get());
                    if (typeof rDelta !== 'number') {
                        console.error('delta has to be a number or function returning a number, got ' + typeof rDelta);
                    }
                    set(function (num) { return num + rDelta; });
                },
                dec: function (delta) {
                    if (delta === void 0) { delta = 1; }
                    var rDelta = Object(_misc_hookState__WEBPACK_IMPORTED_MODULE_2__["resolveHookState"])(delta, get());
                    if (typeof rDelta !== 'number') {
                        console.error('delta has to be a number or function returning a number, got ' + typeof rDelta);
                    }
                    set(function (num) { return num - rDelta; });
                },
                reset: function (value) {
                    if (value === void 0) { value = init; }
                    var rValue = Object(_misc_hookState__WEBPACK_IMPORTED_MODULE_2__["resolveHookState"])(value, get());
                    if (typeof rValue !== 'number') {
                        console.error('value has to be a number or function returning a number, got ' + typeof rValue);
                    }
                    // eslint-disable-next-line react-hooks/exhaustive-deps
                    init = rValue;
                    set(rValue);
                },
            };
        }, [init, min, max]),
    ];
}


/***/ }),

/***/ "../node_modules/react-use/esm/useCss.js":
/*!***********************************************!*\
  !*** ../node_modules/react-use/esm/useCss.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var nano_css__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! nano-css */ "../node_modules/nano-css/index.js");
/* harmony import */ var nano_css__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(nano_css__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var nano_css_addon_cssom__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! nano-css/addon/cssom */ "../node_modules/nano-css/addon/cssom.js");
/* harmony import */ var nano_css_addon_cssom__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(nano_css_addon_cssom__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var nano_css_addon_vcssom__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! nano-css/addon/vcssom */ "../node_modules/nano-css/addon/vcssom.js");
/* harmony import */ var nano_css_addon_vcssom__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(nano_css_addon_vcssom__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var nano_css_addon_vcssom_cssToTree__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! nano-css/addon/vcssom/cssToTree */ "../node_modules/nano-css/addon/vcssom/cssToTree.js");
/* harmony import */ var nano_css_addon_vcssom_cssToTree__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(nano_css_addon_vcssom_cssToTree__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _useIsomorphicLayoutEffect__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./useIsomorphicLayoutEffect */ "../node_modules/react-use/esm/useIsomorphicLayoutEffect.js");






var nano = Object(nano_css__WEBPACK_IMPORTED_MODULE_0__["create"])();
Object(nano_css_addon_cssom__WEBPACK_IMPORTED_MODULE_1__["addon"])(nano);
Object(nano_css_addon_vcssom__WEBPACK_IMPORTED_MODULE_2__["addon"])(nano);
var counter = 0;
var useCss = function (css) {
    var className = Object(react__WEBPACK_IMPORTED_MODULE_4__["useMemo"])(function () { return 'react-use-css-' + (counter++).toString(36); }, []);
    var sheet = Object(react__WEBPACK_IMPORTED_MODULE_4__["useMemo"])(function () { return new nano.VSheet(); }, []);
    Object(_useIsomorphicLayoutEffect__WEBPACK_IMPORTED_MODULE_5__["default"])(function () {
        var tree = {};
        Object(nano_css_addon_vcssom_cssToTree__WEBPACK_IMPORTED_MODULE_3__["cssToTree"])(tree, css, '.' + className, '');
        sheet.diff(tree);
        return function () {
            sheet.diff({});
        };
    });
    return className;
};
/* harmony default export */ __webpack_exports__["default"] = (useCss);


/***/ }),

/***/ "../node_modules/react-use/esm/useCustomCompareEffect.js":
/*!***************************************************************!*\
  !*** ../node_modules/react-use/esm/useCustomCompareEffect.js ***!
  \***************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);

var isPrimitive = function (val) { return val !== Object(val); };
var useCustomCompareEffect = function (effect, deps, depsEqual) {
    if (true) {
        if (!(deps instanceof Array) || !deps.length) {
            console.warn('`useCustomCompareEffect` should not be used with no dependencies. Use React.useEffect instead.');
        }
        if (deps.every(isPrimitive)) {
            console.warn('`useCustomCompareEffect` should not be used with dependencies that are all primitive values. Use React.useEffect instead.');
        }
        if (typeof depsEqual !== 'function') {
            console.warn('`useCustomCompareEffect` should be used with depsEqual callback for comparing deps list');
        }
    }
    var ref = Object(react__WEBPACK_IMPORTED_MODULE_0__["useRef"])(undefined);
    if (!ref.current || !depsEqual(deps, ref.current)) {
        ref.current = deps;
    }
    Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(effect, ref.current);
};
/* harmony default export */ __webpack_exports__["default"] = (useCustomCompareEffect);


/***/ }),

/***/ "../node_modules/react-use/esm/useDebounce.js":
/*!****************************************************!*\
  !*** ../node_modules/react-use/esm/useDebounce.js ***!
  \****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return useDebounce; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _useTimeoutFn__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./useTimeoutFn */ "../node_modules/react-use/esm/useTimeoutFn.js");


function useDebounce(fn, ms, deps) {
    if (ms === void 0) { ms = 0; }
    if (deps === void 0) { deps = []; }
    var _a = Object(_useTimeoutFn__WEBPACK_IMPORTED_MODULE_1__["default"])(fn, ms), isReady = _a[0], cancel = _a[1], reset = _a[2];
    Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(reset, deps);
    return [isReady, cancel];
}


/***/ }),

/***/ "../node_modules/react-use/esm/useDeepCompareEffect.js":
/*!*************************************************************!*\
  !*** ../node_modules/react-use/esm/useDeepCompareEffect.js ***!
  \*************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _useCustomCompareEffect__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./useCustomCompareEffect */ "../node_modules/react-use/esm/useCustomCompareEffect.js");
/* harmony import */ var _misc_isDeepEqual__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./misc/isDeepEqual */ "../node_modules/react-use/esm/misc/isDeepEqual.js");


var isPrimitive = function (val) { return val !== Object(val); };
var useDeepCompareEffect = function (effect, deps) {
    if (true) {
        if (!(deps instanceof Array) || !deps.length) {
            console.warn('`useDeepCompareEffect` should not be used with no dependencies. Use React.useEffect instead.');
        }
        if (deps.every(isPrimitive)) {
            console.warn('`useDeepCompareEffect` should not be used with dependencies that are all primitive values. Use React.useEffect instead.');
        }
    }
    Object(_useCustomCompareEffect__WEBPACK_IMPORTED_MODULE_0__["default"])(effect, deps, _misc_isDeepEqual__WEBPACK_IMPORTED_MODULE_1__["default"]);
};
/* harmony default export */ __webpack_exports__["default"] = (useDeepCompareEffect);


/***/ }),

/***/ "../node_modules/react-use/esm/useDefault.js":
/*!***************************************************!*\
  !*** ../node_modules/react-use/esm/useDefault.js ***!
  \***************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);

var useDefault = function (defaultValue, initialValue) {
    var _a = Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])(initialValue), value = _a[0], setValue = _a[1];
    if (value === undefined || value === null) {
        return [defaultValue, setValue];
    }
    return [value, setValue];
};
/* harmony default export */ __webpack_exports__["default"] = (useDefault);


/***/ }),

/***/ "../node_modules/react-use/esm/useDrop.js":
/*!************************************************!*\
  !*** ../node_modules/react-use/esm/useDrop.js ***!
  \************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../node_modules/react-use/node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _misc_util__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./misc/util */ "../node_modules/react-use/esm/misc/util.js");



var createProcess = function (options) { return function (dataTransfer, event) {
    var uri = dataTransfer.getData('text/uri-list');
    if (uri) {
        (options.onUri || _misc_util__WEBPACK_IMPORTED_MODULE_2__["noop"])(uri, event);
        return;
    }
    if (dataTransfer.files && dataTransfer.files.length) {
        (options.onFiles || _misc_util__WEBPACK_IMPORTED_MODULE_2__["noop"])(Array.from(dataTransfer.files), event);
        return;
    }
    if (event.clipboardData) {
        var text = event.clipboardData.getData('text');
        (options.onText || _misc_util__WEBPACK_IMPORTED_MODULE_2__["noop"])(text, event);
        return;
    }
}; };
var useDrop = function (options, args) {
    if (options === void 0) { options = {}; }
    if (args === void 0) { args = []; }
    var onFiles = options.onFiles, onText = options.onText, onUri = options.onUri;
    var _a = Object(react__WEBPACK_IMPORTED_MODULE_1__["useState"])(false), over = _a[0], setOverRaw = _a[1];
    var setOver = Object(react__WEBPACK_IMPORTED_MODULE_1__["useCallback"])(setOverRaw, []);
    var process = Object(react__WEBPACK_IMPORTED_MODULE_1__["useMemo"])(function () { return createProcess(options); }, [onFiles, onText, onUri]);
    Object(react__WEBPACK_IMPORTED_MODULE_1__["useEffect"])(function () {
        var onDragOver = function (event) {
            event.preventDefault();
            setOver(true);
        };
        var onDragEnter = function (event) {
            event.preventDefault();
            setOver(true);
        };
        var onDragLeave = function () {
            setOver(false);
        };
        var onDragExit = function () {
            setOver(false);
        };
        var onDrop = function (event) {
            event.preventDefault();
            setOver(false);
            process(event.dataTransfer, event);
        };
        var onPaste = function (event) {
            process(event.clipboardData, event);
        };
        Object(_misc_util__WEBPACK_IMPORTED_MODULE_2__["on"])(document, 'dragover', onDragOver);
        Object(_misc_util__WEBPACK_IMPORTED_MODULE_2__["on"])(document, 'dragenter', onDragEnter);
        Object(_misc_util__WEBPACK_IMPORTED_MODULE_2__["on"])(document, 'dragleave', onDragLeave);
        Object(_misc_util__WEBPACK_IMPORTED_MODULE_2__["on"])(document, 'dragexit', onDragExit);
        Object(_misc_util__WEBPACK_IMPORTED_MODULE_2__["on"])(document, 'drop', onDrop);
        if (onText) {
            Object(_misc_util__WEBPACK_IMPORTED_MODULE_2__["on"])(document, 'paste', onPaste);
        }
        return function () {
            Object(_misc_util__WEBPACK_IMPORTED_MODULE_2__["off"])(document, 'dragover', onDragOver);
            Object(_misc_util__WEBPACK_IMPORTED_MODULE_2__["off"])(document, 'dragenter', onDragEnter);
            Object(_misc_util__WEBPACK_IMPORTED_MODULE_2__["off"])(document, 'dragleave', onDragLeave);
            Object(_misc_util__WEBPACK_IMPORTED_MODULE_2__["off"])(document, 'dragexit', onDragExit);
            Object(_misc_util__WEBPACK_IMPORTED_MODULE_2__["off"])(document, 'drop', onDrop);
            Object(_misc_util__WEBPACK_IMPORTED_MODULE_2__["off"])(document, 'paste', onPaste);
        };
    }, Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__spreadArrays"])([process], args));
    return { over: over };
};
/* harmony default export */ __webpack_exports__["default"] = (useDrop);


/***/ }),

/***/ "../node_modules/react-use/esm/useDropArea.js":
/*!****************************************************!*\
  !*** ../node_modules/react-use/esm/useDropArea.js ***!
  \****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _useMountedState__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./useMountedState */ "../node_modules/react-use/esm/useMountedState.js");
/* harmony import */ var _misc_util__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./misc/util */ "../node_modules/react-use/esm/misc/util.js");



/*
const defaultState: DropAreaState = {
  over: false,
};
*/
var createProcess = function (options, mounted) { return function (dataTransfer, event) {
    var uri = dataTransfer.getData('text/uri-list');
    if (uri) {
        (options.onUri || _misc_util__WEBPACK_IMPORTED_MODULE_2__["noop"])(uri, event);
        return;
    }
    if (dataTransfer.files && dataTransfer.files.length) {
        (options.onFiles || _misc_util__WEBPACK_IMPORTED_MODULE_2__["noop"])(Array.from(dataTransfer.files), event);
        return;
    }
    if (dataTransfer.items && dataTransfer.items.length) {
        dataTransfer.items[0].getAsString(function (text) {
            if (mounted) {
                (options.onText || _misc_util__WEBPACK_IMPORTED_MODULE_2__["noop"])(text, event);
            }
        });
    }
}; };
var createBond = function (process, setOver) { return ({
    onDragOver: function (event) {
        event.preventDefault();
    },
    onDragEnter: function (event) {
        event.preventDefault();
        setOver(true);
    },
    onDragLeave: function () {
        setOver(false);
    },
    onDrop: function (event) {
        event.preventDefault();
        event.persist();
        setOver(false);
        process(event.dataTransfer, event);
    },
    onPaste: function (event) {
        event.persist();
        process(event.clipboardData, event);
    },
}); };
var useDropArea = function (options) {
    if (options === void 0) { options = {}; }
    var onFiles = options.onFiles, onText = options.onText, onUri = options.onUri;
    var isMounted = Object(_useMountedState__WEBPACK_IMPORTED_MODULE_1__["default"])();
    var _a = Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])(false), over = _a[0], setOver = _a[1];
    var process = Object(react__WEBPACK_IMPORTED_MODULE_0__["useMemo"])(function () { return createProcess(options, isMounted()); }, [onFiles, onText, onUri]);
    var bond = Object(react__WEBPACK_IMPORTED_MODULE_0__["useMemo"])(function () { return createBond(process, setOver); }, [process, setOver]);
    return [bond, { over: over }];
};
/* harmony default export */ __webpack_exports__["default"] = (useDropArea);


/***/ }),

/***/ "../node_modules/react-use/esm/useEffectOnce.js":
/*!******************************************************!*\
  !*** ../node_modules/react-use/esm/useEffectOnce.js ***!
  \******************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);

var useEffectOnce = function (effect) {
    Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(effect, []);
};
/* harmony default export */ __webpack_exports__["default"] = (useEffectOnce);


/***/ }),

/***/ "../node_modules/react-use/esm/useEnsuredForwardedRef.js":
/*!***************************************************************!*\
  !*** ../node_modules/react-use/esm/useEnsuredForwardedRef.js ***!
  \***************************************************************/
/*! exports provided: default, ensuredForwardRef */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return useEnsuredForwardedRef; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ensuredForwardRef", function() { return ensuredForwardRef; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);

function useEnsuredForwardedRef(forwardedRef) {
    var ensuredRef = Object(react__WEBPACK_IMPORTED_MODULE_0__["useRef"])(forwardedRef && forwardedRef.current);
    Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
        if (!forwardedRef) {
            return;
        }
        forwardedRef.current = ensuredRef.current;
    }, [forwardedRef]);
    return ensuredRef;
}
function ensuredForwardRef(Component) {
    return Object(react__WEBPACK_IMPORTED_MODULE_0__["forwardRef"])(function (props, ref) {
        var ensuredRef = useEnsuredForwardedRef(ref);
        return Component(props, ensuredRef);
    });
}


/***/ }),

/***/ "../node_modules/react-use/esm/useError.js":
/*!*************************************************!*\
  !*** ../node_modules/react-use/esm/useError.js ***!
  \*************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);

var useError = function () {
    var _a = Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])(null), error = _a[0], setError = _a[1];
    Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
        if (error) {
            throw error;
        }
    }, [error]);
    var dispatchError = Object(react__WEBPACK_IMPORTED_MODULE_0__["useCallback"])(function (err) {
        setError(err);
    }, []);
    return dispatchError;
};
/* harmony default export */ __webpack_exports__["default"] = (useError);


/***/ }),

/***/ "../node_modules/react-use/esm/useEvent.js":
/*!*************************************************!*\
  !*** ../node_modules/react-use/esm/useEvent.js ***!
  \*************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _misc_util__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./misc/util */ "../node_modules/react-use/esm/misc/util.js");


var defaultTarget = _misc_util__WEBPACK_IMPORTED_MODULE_1__["isBrowser"] ? window : null;
var isListenerType1 = function (target) {
    return !!target.addEventListener;
};
var isListenerType2 = function (target) {
    return !!target.on;
};
var useEvent = function (name, handler, target, options) {
    if (target === void 0) { target = defaultTarget; }
    Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
        if (!handler) {
            return;
        }
        if (!target) {
            return;
        }
        if (isListenerType1(target)) {
            Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["on"])(target, name, handler, options);
        }
        else if (isListenerType2(target)) {
            target.on(name, handler, options);
        }
        return function () {
            if (isListenerType1(target)) {
                Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["off"])(target, name, handler, options);
            }
            else if (isListenerType2(target)) {
                target.off(name, handler, options);
            }
        };
    }, [name, handler, target, JSON.stringify(options)]);
};
/* harmony default export */ __webpack_exports__["default"] = (useEvent);


/***/ }),

/***/ "../node_modules/react-use/esm/useFavicon.js":
/*!***************************************************!*\
  !*** ../node_modules/react-use/esm/useFavicon.js ***!
  \***************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);

var useFavicon = function (href) {
    Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
        var link = document.querySelector("link[rel*='icon']") || document.createElement('link');
        link.type = 'image/x-icon';
        link.rel = 'shortcut icon';
        link.href = href;
        document.getElementsByTagName('head')[0].appendChild(link);
    }, [href]);
};
/* harmony default export */ __webpack_exports__["default"] = (useFavicon);


/***/ }),

/***/ "../node_modules/react-use/esm/useFirstMountState.js":
/*!***********************************************************!*\
  !*** ../node_modules/react-use/esm/useFirstMountState.js ***!
  \***********************************************************/
/*! exports provided: useFirstMountState */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "useFirstMountState", function() { return useFirstMountState; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);

function useFirstMountState() {
    var isFirst = Object(react__WEBPACK_IMPORTED_MODULE_0__["useRef"])(true);
    if (isFirst.current) {
        isFirst.current = false;
        return true;
    }
    return isFirst.current;
}


/***/ }),

/***/ "../node_modules/react-use/esm/useFullscreen.js":
/*!******************************************************!*\
  !*** ../node_modules/react-use/esm/useFullscreen.js ***!
  \******************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var screenfull__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! screenfull */ "../node_modules/screenfull/dist/screenfull.js");
/* harmony import */ var screenfull__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(screenfull__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _useIsomorphicLayoutEffect__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./useIsomorphicLayoutEffect */ "../node_modules/react-use/esm/useIsomorphicLayoutEffect.js");
/* harmony import */ var _misc_util__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./misc/util */ "../node_modules/react-use/esm/misc/util.js");




var useFullscreen = function (ref, enabled, options) {
    if (options === void 0) { options = {}; }
    var video = options.video, _a = options.onClose, onClose = _a === void 0 ? _misc_util__WEBPACK_IMPORTED_MODULE_3__["noop"] : _a;
    var _b = Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])(enabled), isFullscreen = _b[0], setIsFullscreen = _b[1];
    Object(_useIsomorphicLayoutEffect__WEBPACK_IMPORTED_MODULE_2__["default"])(function () {
        if (!enabled) {
            return;
        }
        if (!ref.current) {
            return;
        }
        var onWebkitEndFullscreen = function () {
            if (video === null || video === void 0 ? void 0 : video.current) {
                Object(_misc_util__WEBPACK_IMPORTED_MODULE_3__["off"])(video.current, 'webkitendfullscreen', onWebkitEndFullscreen);
            }
            onClose();
        };
        var onChange = function () {
            if (screenfull__WEBPACK_IMPORTED_MODULE_1___default.a.isEnabled) {
                var isScreenfullFullscreen = screenfull__WEBPACK_IMPORTED_MODULE_1___default.a.isFullscreen;
                setIsFullscreen(isScreenfullFullscreen);
                if (!isScreenfullFullscreen) {
                    onClose();
                }
            }
        };
        if (screenfull__WEBPACK_IMPORTED_MODULE_1___default.a.isEnabled) {
            try {
                screenfull__WEBPACK_IMPORTED_MODULE_1___default.a.request(ref.current);
                setIsFullscreen(true);
            }
            catch (error) {
                onClose(error);
                setIsFullscreen(false);
            }
            screenfull__WEBPACK_IMPORTED_MODULE_1___default.a.on('change', onChange);
        }
        else if (video && video.current && video.current.webkitEnterFullscreen) {
            video.current.webkitEnterFullscreen();
            Object(_misc_util__WEBPACK_IMPORTED_MODULE_3__["on"])(video.current, 'webkitendfullscreen', onWebkitEndFullscreen);
            setIsFullscreen(true);
        }
        else {
            onClose();
            setIsFullscreen(false);
        }
        return function () {
            setIsFullscreen(false);
            if (screenfull__WEBPACK_IMPORTED_MODULE_1___default.a.isEnabled) {
                try {
                    screenfull__WEBPACK_IMPORTED_MODULE_1___default.a.off('change', onChange);
                    screenfull__WEBPACK_IMPORTED_MODULE_1___default.a.exit();
                }
                catch (_a) { }
            }
            else if (video && video.current && video.current.webkitExitFullscreen) {
                Object(_misc_util__WEBPACK_IMPORTED_MODULE_3__["off"])(video.current, 'webkitendfullscreen', onWebkitEndFullscreen);
                video.current.webkitExitFullscreen();
            }
        };
    }, [enabled, video, ref]);
    return isFullscreen;
};
/* harmony default export */ __webpack_exports__["default"] = (useFullscreen);


/***/ }),

/***/ "../node_modules/react-use/esm/useGeolocation.js":
/*!*******************************************************!*\
  !*** ../node_modules/react-use/esm/useGeolocation.js ***!
  \*******************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../node_modules/react-use/node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);


var useGeolocation = function (options) {
    var _a = Object(react__WEBPACK_IMPORTED_MODULE_1__["useState"])({
        loading: true,
        accuracy: null,
        altitude: null,
        altitudeAccuracy: null,
        heading: null,
        latitude: null,
        longitude: null,
        speed: null,
        timestamp: Date.now(),
    }), state = _a[0], setState = _a[1];
    var mounted = true;
    var watchId;
    var onEvent = function (event) {
        if (mounted) {
            setState({
                loading: false,
                accuracy: event.coords.accuracy,
                altitude: event.coords.altitude,
                altitudeAccuracy: event.coords.altitudeAccuracy,
                heading: event.coords.heading,
                latitude: event.coords.latitude,
                longitude: event.coords.longitude,
                speed: event.coords.speed,
                timestamp: event.timestamp,
            });
        }
    };
    var onEventError = function (error) {
        return mounted && setState(function (oldState) { return (Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])(Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])({}, oldState), { loading: false, error: error })); });
    };
    Object(react__WEBPACK_IMPORTED_MODULE_1__["useEffect"])(function () {
        navigator.geolocation.getCurrentPosition(onEvent, onEventError, options);
        watchId = navigator.geolocation.watchPosition(onEvent, onEventError, options);
        return function () {
            mounted = false;
            navigator.geolocation.clearWatch(watchId);
        };
    }, []);
    return state;
};
/* harmony default export */ __webpack_exports__["default"] = (useGeolocation);


/***/ }),

/***/ "../node_modules/react-use/esm/useGetSet.js":
/*!**************************************************!*\
  !*** ../node_modules/react-use/esm/useGetSet.js ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return useGetSet; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _useUpdate__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./useUpdate */ "../node_modules/react-use/esm/useUpdate.js");
/* harmony import */ var _misc_hookState__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./misc/hookState */ "../node_modules/react-use/esm/misc/hookState.js");



function useGetSet(initialState) {
    var state = Object(react__WEBPACK_IMPORTED_MODULE_0__["useRef"])(Object(_misc_hookState__WEBPACK_IMPORTED_MODULE_2__["resolveHookState"])(initialState));
    var update = Object(_useUpdate__WEBPACK_IMPORTED_MODULE_1__["default"])();
    return Object(react__WEBPACK_IMPORTED_MODULE_0__["useMemo"])(function () { return [
        function () { return state.current; },
        function (newState) {
            state.current = Object(_misc_hookState__WEBPACK_IMPORTED_MODULE_2__["resolveHookState"])(newState, state.current);
            update();
        },
    ]; }, []);
}


/***/ }),

/***/ "../node_modules/react-use/esm/useGetSetState.js":
/*!*******************************************************!*\
  !*** ../node_modules/react-use/esm/useGetSetState.js ***!
  \*******************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../node_modules/react-use/node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _useUpdate__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./useUpdate */ "../node_modules/react-use/esm/useUpdate.js");



var useGetSetState = function (initialState) {
    if (initialState === void 0) { initialState = {}; }
    if (true) {
        if (typeof initialState !== 'object') {
            console.error('useGetSetState initial state must be an object.');
        }
    }
    var update = Object(_useUpdate__WEBPACK_IMPORTED_MODULE_2__["default"])();
    var state = Object(react__WEBPACK_IMPORTED_MODULE_1__["useRef"])(Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])({}, initialState));
    var get = Object(react__WEBPACK_IMPORTED_MODULE_1__["useCallback"])(function () { return state.current; }, []);
    var set = Object(react__WEBPACK_IMPORTED_MODULE_1__["useCallback"])(function (patch) {
        if (!patch) {
            return;
        }
        if (true) {
            if (typeof patch !== 'object') {
                console.error('useGetSetState setter patch must be an object.');
            }
        }
        Object.assign(state.current, patch);
        update();
    }, []);
    return [get, set];
};
/* harmony default export */ __webpack_exports__["default"] = (useGetSetState);


/***/ }),

/***/ "../node_modules/react-use/esm/useHarmonicIntervalFn.js":
/*!**************************************************************!*\
  !*** ../node_modules/react-use/esm/useHarmonicIntervalFn.js ***!
  \**************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var set_harmonic_interval__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! set-harmonic-interval */ "../node_modules/set-harmonic-interval/lib/index.esm.js");


var useHarmonicIntervalFn = function (fn, delay) {
    if (delay === void 0) { delay = 0; }
    var latestCallback = Object(react__WEBPACK_IMPORTED_MODULE_0__["useRef"])(function () { });
    Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
        latestCallback.current = fn;
    });
    Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
        if (delay !== null) {
            var interval_1 = Object(set_harmonic_interval__WEBPACK_IMPORTED_MODULE_1__["setHarmonicInterval"])(function () { return latestCallback.current(); }, delay);
            return function () { return Object(set_harmonic_interval__WEBPACK_IMPORTED_MODULE_1__["clearHarmonicInterval"])(interval_1); };
        }
        return undefined;
    }, [delay]);
};
/* harmony default export */ __webpack_exports__["default"] = (useHarmonicIntervalFn);


/***/ }),

/***/ "../node_modules/react-use/esm/useHash.js":
/*!************************************************!*\
  !*** ../node_modules/react-use/esm/useHash.js ***!
  \************************************************/
/*! exports provided: useHash */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "useHash", function() { return useHash; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _useLifecycles__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./useLifecycles */ "../node_modules/react-use/esm/useLifecycles.js");
/* harmony import */ var _misc_util__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./misc/util */ "../node_modules/react-use/esm/misc/util.js");



/**
 * read and write url hash, response to url hash change
 */
var useHash = function () {
    var _a = Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])(function () { return window.location.hash; }), hash = _a[0], setHash = _a[1];
    var onHashChange = Object(react__WEBPACK_IMPORTED_MODULE_0__["useCallback"])(function () {
        setHash(window.location.hash);
    }, []);
    Object(_useLifecycles__WEBPACK_IMPORTED_MODULE_1__["default"])(function () {
        Object(_misc_util__WEBPACK_IMPORTED_MODULE_2__["on"])(window, 'hashchange', onHashChange);
    }, function () {
        Object(_misc_util__WEBPACK_IMPORTED_MODULE_2__["off"])(window, 'hashchange', onHashChange);
    });
    var _setHash = Object(react__WEBPACK_IMPORTED_MODULE_0__["useCallback"])(function (newHash) {
        if (newHash !== hash) {
            window.location.hash = newHash;
        }
    }, [hash]);
    return [hash, _setHash];
};


/***/ }),

/***/ "../node_modules/react-use/esm/useHover.js":
/*!*************************************************!*\
  !*** ../node_modules/react-use/esm/useHover.js ***!
  \*************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _misc_util__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./misc/util */ "../node_modules/react-use/esm/misc/util.js");


var useState = react__WEBPACK_IMPORTED_MODULE_0__["useState"];
var useHover = function (element) {
    var _a = useState(false), state = _a[0], setState = _a[1];
    var onMouseEnter = function (originalOnMouseEnter) { return function (event) {
        (originalOnMouseEnter || _misc_util__WEBPACK_IMPORTED_MODULE_1__["noop"])(event);
        setState(true);
    }; };
    var onMouseLeave = function (originalOnMouseLeave) { return function (event) {
        (originalOnMouseLeave || _misc_util__WEBPACK_IMPORTED_MODULE_1__["noop"])(event);
        setState(false);
    }; };
    if (typeof element === 'function') {
        element = element(state);
    }
    var el = react__WEBPACK_IMPORTED_MODULE_0__["cloneElement"](element, {
        onMouseEnter: onMouseEnter(element.props.onMouseEnter),
        onMouseLeave: onMouseLeave(element.props.onMouseLeave),
    });
    return [el, state];
};
/* harmony default export */ __webpack_exports__["default"] = (useHover);


/***/ }),

/***/ "../node_modules/react-use/esm/useHoverDirty.js":
/*!******************************************************!*\
  !*** ../node_modules/react-use/esm/useHoverDirty.js ***!
  \******************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _misc_util__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./misc/util */ "../node_modules/react-use/esm/misc/util.js");


// kudos: https://usehooks.com/
var useHoverDirty = function (ref, enabled) {
    if (enabled === void 0) { enabled = true; }
    if (true) {
        if (typeof ref !== 'object' || typeof ref.current === 'undefined') {
            console.error('useHoverDirty expects a single ref argument.');
        }
    }
    var _a = Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])(false), value = _a[0], setValue = _a[1];
    Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
        var onMouseOver = function () { return setValue(true); };
        var onMouseOut = function () { return setValue(false); };
        if (enabled && ref && ref.current) {
            Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["on"])(ref.current, 'mouseover', onMouseOver);
            Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["on"])(ref.current, 'mouseout', onMouseOut);
        }
        // fixes react-hooks/exhaustive-deps warning about stale ref elements
        var current = ref.current;
        return function () {
            if (enabled && current) {
                Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["off"])(current, 'mouseover', onMouseOver);
                Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["off"])(current, 'mouseout', onMouseOut);
            }
        };
    }, [enabled, ref]);
    return value;
};
/* harmony default export */ __webpack_exports__["default"] = (useHoverDirty);


/***/ }),

/***/ "../node_modules/react-use/esm/useIdle.js":
/*!************************************************!*\
  !*** ../node_modules/react-use/esm/useIdle.js ***!
  \************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var throttle_debounce__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! throttle-debounce */ "../node_modules/throttle-debounce/esm/index.js");
/* harmony import */ var _misc_util__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./misc/util */ "../node_modules/react-use/esm/misc/util.js");



var defaultEvents = ['mousemove', 'mousedown', 'resize', 'keydown', 'touchstart', 'wheel'];
var oneMinute = 60e3;
var useIdle = function (ms, initialState, events) {
    if (ms === void 0) { ms = oneMinute; }
    if (initialState === void 0) { initialState = false; }
    if (events === void 0) { events = defaultEvents; }
    var _a = Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])(initialState), state = _a[0], setState = _a[1];
    Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
        var mounted = true;
        var timeout;
        var localState = state;
        var set = function (newState) {
            if (mounted) {
                localState = newState;
                setState(newState);
            }
        };
        var onEvent = Object(throttle_debounce__WEBPACK_IMPORTED_MODULE_1__["throttle"])(50, function () {
            if (localState) {
                set(false);
            }
            clearTimeout(timeout);
            timeout = setTimeout(function () { return set(true); }, ms);
        });
        var onVisibility = function () {
            if (!document.hidden) {
                onEvent();
            }
        };
        for (var i = 0; i < events.length; i++) {
            Object(_misc_util__WEBPACK_IMPORTED_MODULE_2__["on"])(window, events[i], onEvent);
        }
        Object(_misc_util__WEBPACK_IMPORTED_MODULE_2__["on"])(document, 'visibilitychange', onVisibility);
        timeout = setTimeout(function () { return set(true); }, ms);
        return function () {
            mounted = false;
            for (var i = 0; i < events.length; i++) {
                Object(_misc_util__WEBPACK_IMPORTED_MODULE_2__["off"])(window, events[i], onEvent);
            }
            Object(_misc_util__WEBPACK_IMPORTED_MODULE_2__["off"])(document, 'visibilitychange', onVisibility);
        };
    }, [ms, events]);
    return state;
};
/* harmony default export */ __webpack_exports__["default"] = (useIdle);


/***/ }),

/***/ "../node_modules/react-use/esm/useIntersection.js":
/*!********************************************************!*\
  !*** ../node_modules/react-use/esm/useIntersection.js ***!
  \********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);

var useIntersection = function (ref, options) {
    var _a = Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])(null), intersectionObserverEntry = _a[0], setIntersectionObserverEntry = _a[1];
    Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
        if (ref.current && typeof IntersectionObserver === 'function') {
            var handler = function (entries) {
                setIntersectionObserverEntry(entries[0]);
            };
            var observer_1 = new IntersectionObserver(handler, options);
            observer_1.observe(ref.current);
            return function () {
                setIntersectionObserverEntry(null);
                observer_1.disconnect();
            };
        }
        return function () { };
    }, [ref.current, options.threshold, options.root, options.rootMargin]);
    return intersectionObserverEntry;
};
/* harmony default export */ __webpack_exports__["default"] = (useIntersection);


/***/ }),

/***/ "../node_modules/react-use/esm/useInterval.js":
/*!****************************************************!*\
  !*** ../node_modules/react-use/esm/useInterval.js ***!
  \****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);

var useInterval = function (callback, delay) {
    var savedCallback = Object(react__WEBPACK_IMPORTED_MODULE_0__["useRef"])(function () { });
    Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
        savedCallback.current = callback;
    });
    Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
        if (delay !== null) {
            var interval_1 = setInterval(function () { return savedCallback.current(); }, delay || 0);
            return function () { return clearInterval(interval_1); };
        }
        return undefined;
    }, [delay]);
};
/* harmony default export */ __webpack_exports__["default"] = (useInterval);


/***/ }),

/***/ "../node_modules/react-use/esm/useIsomorphicLayoutEffect.js":
/*!******************************************************************!*\
  !*** ../node_modules/react-use/esm/useIsomorphicLayoutEffect.js ***!
  \******************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _misc_util__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./misc/util */ "../node_modules/react-use/esm/misc/util.js");


var useIsomorphicLayoutEffect = _misc_util__WEBPACK_IMPORTED_MODULE_1__["isBrowser"] ? react__WEBPACK_IMPORTED_MODULE_0__["useLayoutEffect"] : react__WEBPACK_IMPORTED_MODULE_0__["useEffect"];
/* harmony default export */ __webpack_exports__["default"] = (useIsomorphicLayoutEffect);


/***/ }),

/***/ "../node_modules/react-use/esm/useKey.js":
/*!***********************************************!*\
  !*** ../node_modules/react-use/esm/useKey.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _useEvent__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./useEvent */ "../node_modules/react-use/esm/useEvent.js");
/* harmony import */ var _misc_util__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./misc/util */ "../node_modules/react-use/esm/misc/util.js");



var createKeyPredicate = function (keyFilter) {
    return typeof keyFilter === 'function'
        ? keyFilter
        : typeof keyFilter === 'string'
            ? function (event) { return event.key === keyFilter; }
            : keyFilter
                ? function () { return true; }
                : function () { return false; };
};
var useKey = function (key, fn, opts, deps) {
    if (fn === void 0) { fn = _misc_util__WEBPACK_IMPORTED_MODULE_2__["noop"]; }
    if (opts === void 0) { opts = {}; }
    if (deps === void 0) { deps = [key]; }
    var _a = opts.event, event = _a === void 0 ? 'keydown' : _a, target = opts.target, options = opts.options;
    var useMemoHandler = Object(react__WEBPACK_IMPORTED_MODULE_0__["useMemo"])(function () {
        var predicate = createKeyPredicate(key);
        var handler = function (handlerEvent) {
            if (predicate(handlerEvent)) {
                return fn(handlerEvent);
            }
        };
        return handler;
    }, deps);
    Object(_useEvent__WEBPACK_IMPORTED_MODULE_1__["default"])(event, useMemoHandler, target, options);
};
/* harmony default export */ __webpack_exports__["default"] = (useKey);


/***/ }),

/***/ "../node_modules/react-use/esm/useKeyPress.js":
/*!****************************************************!*\
  !*** ../node_modules/react-use/esm/useKeyPress.js ***!
  \****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _useKey__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./useKey */ "../node_modules/react-use/esm/useKey.js");


var useKeyPress = function (keyFilter) {
    var _a = Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])([false, null]), state = _a[0], set = _a[1];
    Object(_useKey__WEBPACK_IMPORTED_MODULE_1__["default"])(keyFilter, function (event) { return set([true, event]); }, { event: 'keydown' }, [state]);
    Object(_useKey__WEBPACK_IMPORTED_MODULE_1__["default"])(keyFilter, function (event) { return set([false, event]); }, { event: 'keyup' }, [state]);
    return state;
};
/* harmony default export */ __webpack_exports__["default"] = (useKeyPress);


/***/ }),

/***/ "../node_modules/react-use/esm/useKeyPressEvent.js":
/*!*********************************************************!*\
  !*** ../node_modules/react-use/esm/useKeyPressEvent.js ***!
  \*********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _useKeyPress__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./useKeyPress */ "../node_modules/react-use/esm/useKeyPress.js");
/* harmony import */ var _useUpdateEffect__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./useUpdateEffect */ "../node_modules/react-use/esm/useUpdateEffect.js");


var useKeyPressEvent = function (key, keydown, keyup, useKeyPress) {
    if (useKeyPress === void 0) { useKeyPress = _useKeyPress__WEBPACK_IMPORTED_MODULE_0__["default"]; }
    var _a = useKeyPress(key), pressed = _a[0], event = _a[1];
    Object(_useUpdateEffect__WEBPACK_IMPORTED_MODULE_1__["default"])(function () {
        if (!pressed && keyup) {
            keyup(event);
        }
        else if (pressed && keydown) {
            keydown(event);
        }
    }, [pressed]);
};
/* harmony default export */ __webpack_exports__["default"] = (useKeyPressEvent);


/***/ }),

/***/ "../node_modules/react-use/esm/useLatest.js":
/*!**************************************************!*\
  !*** ../node_modules/react-use/esm/useLatest.js ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);

var useLatest = function (value) {
    var ref = Object(react__WEBPACK_IMPORTED_MODULE_0__["useRef"])(value);
    ref.current = value;
    return ref;
};
/* harmony default export */ __webpack_exports__["default"] = (useLatest);


/***/ }),

/***/ "../node_modules/react-use/esm/useLifecycles.js":
/*!******************************************************!*\
  !*** ../node_modules/react-use/esm/useLifecycles.js ***!
  \******************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);

var useLifecycles = function (mount, unmount) {
    Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
        if (mount) {
            mount();
        }
        return function () {
            if (unmount) {
                unmount();
            }
        };
    }, []);
};
/* harmony default export */ __webpack_exports__["default"] = (useLifecycles);


/***/ }),

/***/ "../node_modules/react-use/esm/useList.js":
/*!************************************************!*\
  !*** ../node_modules/react-use/esm/useList.js ***!
  \************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _useUpdate__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./useUpdate */ "../node_modules/react-use/esm/useUpdate.js");
/* harmony import */ var _misc_hookState__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./misc/hookState */ "../node_modules/react-use/esm/misc/hookState.js");



function useList(initialList) {
    if (initialList === void 0) { initialList = []; }
    var list = Object(react__WEBPACK_IMPORTED_MODULE_0__["useRef"])(Object(_misc_hookState__WEBPACK_IMPORTED_MODULE_2__["resolveHookState"])(initialList));
    var update = Object(_useUpdate__WEBPACK_IMPORTED_MODULE_1__["default"])();
    var actions = Object(react__WEBPACK_IMPORTED_MODULE_0__["useMemo"])(function () {
        var a = {
            set: function (newList) {
                list.current = Object(_misc_hookState__WEBPACK_IMPORTED_MODULE_2__["resolveHookState"])(newList, list.current);
                update();
            },
            push: function () {
                var items = [];
                for (var _i = 0; _i < arguments.length; _i++) {
                    items[_i] = arguments[_i];
                }
                items.length && actions.set(function (curr) { return curr.concat(items); });
            },
            updateAt: function (index, item) {
                actions.set(function (curr) {
                    var arr = curr.slice();
                    arr[index] = item;
                    return arr;
                });
            },
            insertAt: function (index, item) {
                actions.set(function (curr) {
                    var arr = curr.slice();
                    index > arr.length ? (arr[index] = item) : arr.splice(index, 0, item);
                    return arr;
                });
            },
            update: function (predicate, newItem) {
                actions.set(function (curr) { return curr.map(function (item) { return (predicate(item, newItem) ? newItem : item); }); });
            },
            updateFirst: function (predicate, newItem) {
                var index = list.current.findIndex(function (item) { return predicate(item, newItem); });
                index >= 0 && actions.updateAt(index, newItem);
            },
            upsert: function (predicate, newItem) {
                var index = list.current.findIndex(function (item) { return predicate(item, newItem); });
                index >= 0 ? actions.updateAt(index, newItem) : actions.push(newItem);
            },
            sort: function (compareFn) {
                actions.set(function (curr) { return curr.slice().sort(compareFn); });
            },
            filter: function (callbackFn, thisArg) {
                actions.set(function (curr) { return curr.slice().filter(callbackFn, thisArg); });
            },
            removeAt: function (index) {
                actions.set(function (curr) {
                    var arr = curr.slice();
                    arr.splice(index, 1);
                    return arr;
                });
            },
            clear: function () {
                actions.set([]);
            },
            reset: function () {
                actions.set(Object(_misc_hookState__WEBPACK_IMPORTED_MODULE_2__["resolveHookState"])(initialList).slice());
            },
        };
        /**
         * @deprecated Use removeAt method instead
         */
        a.remove = a.removeAt;
        return a;
    }, []);
    return [list.current, actions];
}
/* harmony default export */ __webpack_exports__["default"] = (useList);


/***/ }),

/***/ "../node_modules/react-use/esm/useLocalStorage.js":
/*!********************************************************!*\
  !*** ../node_modules/react-use/esm/useLocalStorage.js ***!
  \********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _misc_util__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./misc/util */ "../node_modules/react-use/esm/misc/util.js");


var useLocalStorage = function (key, initialValue, options) {
    if (!_misc_util__WEBPACK_IMPORTED_MODULE_1__["isBrowser"]) {
        return [initialValue, _misc_util__WEBPACK_IMPORTED_MODULE_1__["noop"], _misc_util__WEBPACK_IMPORTED_MODULE_1__["noop"]];
    }
    if (!key) {
        throw new Error('useLocalStorage key may not be falsy');
    }
    var deserializer = options
        ? options.raw
            ? function (value) { return value; }
            : options.deserializer
        : JSON.parse;
    // eslint-disable-next-line react-hooks/rules-of-hooks
    var initializer = Object(react__WEBPACK_IMPORTED_MODULE_0__["useRef"])(function (key) {
        try {
            var serializer = options ? (options.raw ? String : options.serializer) : JSON.stringify;
            var localStorageValue = localStorage.getItem(key);
            if (localStorageValue !== null) {
                return deserializer(localStorageValue);
            }
            else {
                initialValue && localStorage.setItem(key, serializer(initialValue));
                return initialValue;
            }
        }
        catch (_a) {
            // If user is in private mode or has storage restriction
            // localStorage can throw. JSON.parse and JSON.stringify
            // can throw, too.
            return initialValue;
        }
    });
    // eslint-disable-next-line react-hooks/rules-of-hooks
    var _a = Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])(function () { return initializer.current(key); }), state = _a[0], setState = _a[1];
    // eslint-disable-next-line react-hooks/rules-of-hooks
    Object(react__WEBPACK_IMPORTED_MODULE_0__["useLayoutEffect"])(function () { return setState(initializer.current(key)); }, [key]);
    // eslint-disable-next-line react-hooks/rules-of-hooks
    var set = Object(react__WEBPACK_IMPORTED_MODULE_0__["useCallback"])(function (valOrFunc) {
        try {
            var newState = typeof valOrFunc === 'function' ? valOrFunc(state) : valOrFunc;
            if (typeof newState === 'undefined')
                return;
            var value = void 0;
            if (options)
                if (options.raw)
                    if (typeof newState === 'string')
                        value = newState;
                    else
                        value = JSON.stringify(newState);
                else if (options.serializer)
                    value = options.serializer(newState);
                else
                    value = JSON.stringify(newState);
            else
                value = JSON.stringify(newState);
            localStorage.setItem(key, value);
            setState(deserializer(value));
        }
        catch (_a) {
            // If user is in private mode or has storage restriction
            // localStorage can throw. Also JSON.stringify can throw.
        }
    }, [key, setState]);
    // eslint-disable-next-line react-hooks/rules-of-hooks
    var remove = Object(react__WEBPACK_IMPORTED_MODULE_0__["useCallback"])(function () {
        try {
            localStorage.removeItem(key);
            setState(undefined);
        }
        catch (_a) {
            // If user is in private mode or has storage restriction
            // localStorage can throw.
        }
    }, [key, setState]);
    return [state, set, remove];
};
/* harmony default export */ __webpack_exports__["default"] = (useLocalStorage);


/***/ }),

/***/ "../node_modules/react-use/esm/useLocation.js":
/*!****************************************************!*\
  !*** ../node_modules/react-use/esm/useLocation.js ***!
  \****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _misc_util__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./misc/util */ "../node_modules/react-use/esm/misc/util.js");


var patchHistoryMethod = function (method) {
    var history = window.history;
    var original = history[method];
    history[method] = function (state) {
        var result = original.apply(this, arguments);
        var event = new Event(method.toLowerCase());
        event.state = state;
        window.dispatchEvent(event);
        return result;
    };
};
if (_misc_util__WEBPACK_IMPORTED_MODULE_1__["isBrowser"]) {
    patchHistoryMethod('pushState');
    patchHistoryMethod('replaceState');
}
var useLocationServer = function () { return ({
    trigger: 'load',
    length: 1,
}); };
var buildState = function (trigger) {
    var _a = window.history, state = _a.state, length = _a.length;
    var _b = window.location, hash = _b.hash, host = _b.host, hostname = _b.hostname, href = _b.href, origin = _b.origin, pathname = _b.pathname, port = _b.port, protocol = _b.protocol, search = _b.search;
    return {
        trigger: trigger,
        state: state,
        length: length,
        hash: hash,
        host: host,
        hostname: hostname,
        href: href,
        origin: origin,
        pathname: pathname,
        port: port,
        protocol: protocol,
        search: search,
    };
};
var useLocationBrowser = function () {
    var _a = Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])(buildState('load')), state = _a[0], setState = _a[1];
    Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
        var onPopstate = function () { return setState(buildState('popstate')); };
        var onPushstate = function () { return setState(buildState('pushstate')); };
        var onReplacestate = function () { return setState(buildState('replacestate')); };
        Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["on"])(window, 'popstate', onPopstate);
        Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["on"])(window, 'pushstate', onPushstate);
        Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["on"])(window, 'replacestate', onReplacestate);
        return function () {
            Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["off"])(window, 'popstate', onPopstate);
            Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["off"])(window, 'pushstate', onPushstate);
            Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["off"])(window, 'replacestate', onReplacestate);
        };
    }, []);
    return state;
};
var hasEventConstructor = typeof Event === 'function';
/* harmony default export */ __webpack_exports__["default"] = (_misc_util__WEBPACK_IMPORTED_MODULE_1__["isBrowser"] && hasEventConstructor ? useLocationBrowser : useLocationServer);


/***/ }),

/***/ "../node_modules/react-use/esm/useLockBodyScroll.js":
/*!**********************************************************!*\
  !*** ../node_modules/react-use/esm/useLockBodyScroll.js ***!
  \**********************************************************/
/*! exports provided: getClosestBody, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getClosestBody", function() { return getClosestBody; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _misc_util__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./misc/util */ "../node_modules/react-use/esm/misc/util.js");


function getClosestBody(el) {
    if (!el) {
        return null;
    }
    else if (el.tagName === 'BODY') {
        return el;
    }
    else if (el.tagName === 'IFRAME') {
        var document_1 = el.contentDocument;
        return document_1 ? document_1.body : null;
    }
    else if (!el.offsetParent) {
        return null;
    }
    return getClosestBody(el.offsetParent);
}
function preventDefault(rawEvent) {
    var e = rawEvent || window.event;
    // Do not prevent if the event has more than one touch (usually meaning this is a multi touch gesture like pinch to zoom).
    if (e.touches.length > 1)
        return true;
    if (e.preventDefault)
        e.preventDefault();
    return false;
}
var isIosDevice = _misc_util__WEBPACK_IMPORTED_MODULE_1__["isBrowser"] &&
    window.navigator &&
    window.navigator.platform &&
    /iP(ad|hone|od)/.test(window.navigator.platform);
var bodies = new Map();
var doc = typeof document === 'object' ? document : undefined;
var documentListenerAdded = false;
/* harmony default export */ __webpack_exports__["default"] = (!doc
    ? function useLockBodyMock(_locked, _elementRef) {
        if (_locked === void 0) { _locked = true; }
    }
    : function useLockBody(locked, elementRef) {
        if (locked === void 0) { locked = true; }
        var bodyRef = Object(react__WEBPACK_IMPORTED_MODULE_0__["useRef"])(doc.body);
        elementRef = elementRef || bodyRef;
        var lock = function (body) {
            var bodyInfo = bodies.get(body);
            if (!bodyInfo) {
                bodies.set(body, { counter: 1, initialOverflow: body.style.overflow });
                if (isIosDevice) {
                    if (!documentListenerAdded) {
                        Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["on"])(document, 'touchmove', preventDefault, { passive: false });
                        documentListenerAdded = true;
                    }
                }
                else {
                    body.style.overflow = 'hidden';
                }
            }
            else {
                bodies.set(body, {
                    counter: bodyInfo.counter + 1,
                    initialOverflow: bodyInfo.initialOverflow,
                });
            }
        };
        var unlock = function (body) {
            var bodyInfo = bodies.get(body);
            if (bodyInfo) {
                if (bodyInfo.counter === 1) {
                    bodies.delete(body);
                    if (isIosDevice) {
                        body.ontouchmove = null;
                        if (documentListenerAdded) {
                            Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["off"])(document, 'touchmove', preventDefault);
                            documentListenerAdded = false;
                        }
                    }
                    else {
                        body.style.overflow = bodyInfo.initialOverflow;
                    }
                }
                else {
                    bodies.set(body, {
                        counter: bodyInfo.counter - 1,
                        initialOverflow: bodyInfo.initialOverflow,
                    });
                }
            }
        };
        Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
            var body = getClosestBody(elementRef.current);
            if (!body) {
                return;
            }
            if (locked) {
                lock(body);
            }
            else {
                unlock(body);
            }
        }, [locked, elementRef.current]);
        // clean up, on un-mount
        Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
            var body = getClosestBody(elementRef.current);
            if (!body) {
                return;
            }
            return function () {
                unlock(body);
            };
        }, []);
    });


/***/ }),

/***/ "../node_modules/react-use/esm/useLogger.js":
/*!**************************************************!*\
  !*** ../node_modules/react-use/esm/useLogger.js ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../node_modules/react-use/node_modules/tslib/tslib.es6.js");
/* harmony import */ var _useEffectOnce__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./useEffectOnce */ "../node_modules/react-use/esm/useEffectOnce.js");
/* harmony import */ var _useUpdateEffect__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./useUpdateEffect */ "../node_modules/react-use/esm/useUpdateEffect.js");



var useLogger = function (componentName) {
    var rest = [];
    for (var _i = 1; _i < arguments.length; _i++) {
        rest[_i - 1] = arguments[_i];
    }
    Object(_useEffectOnce__WEBPACK_IMPORTED_MODULE_1__["default"])(function () {
        console.log.apply(console, Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__spreadArrays"])([componentName + " mounted"], rest));
        return function () { return console.log(componentName + " unmounted"); };
    });
    Object(_useUpdateEffect__WEBPACK_IMPORTED_MODULE_2__["default"])(function () {
        console.log.apply(console, Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__spreadArrays"])([componentName + " updated"], rest));
    });
};
/* harmony default export */ __webpack_exports__["default"] = (useLogger);


/***/ }),

/***/ "../node_modules/react-use/esm/useLongPress.js":
/*!*****************************************************!*\
  !*** ../node_modules/react-use/esm/useLongPress.js ***!
  \*****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _misc_util__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./misc/util */ "../node_modules/react-use/esm/misc/util.js");


var isTouchEvent = function (ev) {
    return 'touches' in ev;
};
var preventDefault = function (ev) {
    if (!isTouchEvent(ev))
        return;
    if (ev.touches.length < 2 && ev.preventDefault) {
        ev.preventDefault();
    }
};
var useLongPress = function (callback, _a) {
    var _b = _a === void 0 ? {} : _a, _c = _b.isPreventDefault, isPreventDefault = _c === void 0 ? true : _c, _d = _b.delay, delay = _d === void 0 ? 300 : _d;
    var timeout = Object(react__WEBPACK_IMPORTED_MODULE_0__["useRef"])();
    var target = Object(react__WEBPACK_IMPORTED_MODULE_0__["useRef"])();
    var start = Object(react__WEBPACK_IMPORTED_MODULE_0__["useCallback"])(function (event) {
        // prevent ghost click on mobile devices
        if (isPreventDefault && event.target) {
            Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["on"])(event.target, 'touchend', preventDefault, { passive: false });
            target.current = event.target;
        }
        timeout.current = setTimeout(function () { return callback(event); }, delay);
    }, [callback, delay, isPreventDefault]);
    var clear = Object(react__WEBPACK_IMPORTED_MODULE_0__["useCallback"])(function () {
        // clearTimeout and removeEventListener
        timeout.current && clearTimeout(timeout.current);
        if (isPreventDefault && target.current) {
            Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["off"])(target.current, 'touchend', preventDefault);
        }
    }, [isPreventDefault]);
    return {
        onMouseDown: function (e) { return start(e); },
        onTouchStart: function (e) { return start(e); },
        onMouseUp: clear,
        onMouseLeave: clear,
        onTouchEnd: clear,
    };
};
/* harmony default export */ __webpack_exports__["default"] = (useLongPress);


/***/ }),

/***/ "../node_modules/react-use/esm/useMap.js":
/*!***********************************************!*\
  !*** ../node_modules/react-use/esm/useMap.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../node_modules/react-use/node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);


var useMap = function (initialMap) {
    if (initialMap === void 0) { initialMap = {}; }
    var _a = Object(react__WEBPACK_IMPORTED_MODULE_1__["useState"])(initialMap), map = _a[0], set = _a[1];
    var stableActions = Object(react__WEBPACK_IMPORTED_MODULE_1__["useMemo"])(function () { return ({
        set: function (key, entry) {
            set(function (prevMap) {
                var _a;
                return (Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])(Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])({}, prevMap), (_a = {}, _a[key] = entry, _a)));
            });
        },
        setAll: function (newMap) {
            set(newMap);
        },
        remove: function (key) {
            set(function (prevMap) {
                var _a = prevMap, _b = key, omit = _a[_b], rest = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__rest"])(_a, [typeof _b === "symbol" ? _b : _b + ""]);
                return rest;
            });
        },
        reset: function () { return set(initialMap); },
    }); }, [set]);
    var utils = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])({ get: Object(react__WEBPACK_IMPORTED_MODULE_1__["useCallback"])(function (key) { return map[key]; }, [map]) }, stableActions);
    return [map, utils];
};
/* harmony default export */ __webpack_exports__["default"] = (useMap);


/***/ }),

/***/ "../node_modules/react-use/esm/useMeasure.js":
/*!***************************************************!*\
  !*** ../node_modules/react-use/esm/useMeasure.js ***!
  \***************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _useIsomorphicLayoutEffect__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./useIsomorphicLayoutEffect */ "../node_modules/react-use/esm/useIsomorphicLayoutEffect.js");
/* harmony import */ var _misc_util__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./misc/util */ "../node_modules/react-use/esm/misc/util.js");



var defaultState = {
    x: 0,
    y: 0,
    width: 0,
    height: 0,
    top: 0,
    left: 0,
    bottom: 0,
    right: 0,
};
function useMeasure() {
    var _a = Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])(null), element = _a[0], ref = _a[1];
    var _b = Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])(defaultState), rect = _b[0], setRect = _b[1];
    var observer = Object(react__WEBPACK_IMPORTED_MODULE_0__["useMemo"])(function () {
        return new window.ResizeObserver(function (entries) {
            if (entries[0]) {
                var _a = entries[0].contentRect, x = _a.x, y = _a.y, width = _a.width, height = _a.height, top_1 = _a.top, left = _a.left, bottom = _a.bottom, right = _a.right;
                setRect({ x: x, y: y, width: width, height: height, top: top_1, left: left, bottom: bottom, right: right });
            }
        });
    }, []);
    Object(_useIsomorphicLayoutEffect__WEBPACK_IMPORTED_MODULE_1__["default"])(function () {
        if (!element)
            return;
        observer.observe(element);
        return function () {
            observer.disconnect();
        };
    }, [element]);
    return [ref, rect];
}
/* harmony default export */ __webpack_exports__["default"] = (_misc_util__WEBPACK_IMPORTED_MODULE_2__["isBrowser"] && typeof window.ResizeObserver !== 'undefined'
    ? useMeasure
    : (function () { return [_misc_util__WEBPACK_IMPORTED_MODULE_2__["noop"], defaultState]; }));


/***/ }),

/***/ "../node_modules/react-use/esm/useMedia.js":
/*!*************************************************!*\
  !*** ../node_modules/react-use/esm/useMedia.js ***!
  \*************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _misc_util__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./misc/util */ "../node_modules/react-use/esm/misc/util.js");


var getInitialState = function (query, defaultState) {
    // Prevent a React hydration mismatch when a default value is provided by not defaulting to window.matchMedia(query).matches.
    if (defaultState !== undefined) {
        return defaultState;
    }
    if (_misc_util__WEBPACK_IMPORTED_MODULE_1__["isBrowser"]) {
        return window.matchMedia(query).matches;
    }
    // A default value has not been provided, and you are rendering on the server, warn of a possible hydration mismatch when defaulting to false.
    if (true) {
        console.warn('`useMedia` When server side rendering, defaultState should be defined to prevent a hydration mismatches.');
    }
    return false;
};
var useMedia = function (query, defaultState) {
    var _a = Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])(getInitialState(query, defaultState)), state = _a[0], setState = _a[1];
    Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
        var mounted = true;
        var mql = window.matchMedia(query);
        var onChange = function () {
            if (!mounted) {
                return;
            }
            setState(!!mql.matches);
        };
        mql.addListener(onChange);
        setState(mql.matches);
        return function () {
            mounted = false;
            mql.removeListener(onChange);
        };
    }, [query]);
    return state;
};
/* harmony default export */ __webpack_exports__["default"] = (useMedia);


/***/ }),

/***/ "../node_modules/react-use/esm/useMediaDevices.js":
/*!********************************************************!*\
  !*** ../node_modules/react-use/esm/useMediaDevices.js ***!
  \********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _misc_util__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./misc/util */ "../node_modules/react-use/esm/misc/util.js");


var useMediaDevices = function () {
    var _a = Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])({}), state = _a[0], setState = _a[1];
    Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
        var mounted = true;
        var onChange = function () {
            navigator.mediaDevices
                .enumerateDevices()
                .then(function (devices) {
                if (mounted) {
                    setState({
                        devices: devices.map(function (_a) {
                            var deviceId = _a.deviceId, groupId = _a.groupId, kind = _a.kind, label = _a.label;
                            return ({
                                deviceId: deviceId,
                                groupId: groupId,
                                kind: kind,
                                label: label,
                            });
                        }),
                    });
                }
            })
                .catch(_misc_util__WEBPACK_IMPORTED_MODULE_1__["noop"]);
        };
        Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["on"])(navigator.mediaDevices, 'devicechange', onChange);
        onChange();
        return function () {
            mounted = false;
            Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["off"])(navigator.mediaDevices, 'devicechange', onChange);
        };
    }, []);
    return state;
};
var useMediaDevicesMock = function () { return ({}); };
/* harmony default export */ __webpack_exports__["default"] = (_misc_util__WEBPACK_IMPORTED_MODULE_1__["isNavigator"] && !!navigator.mediaDevices ? useMediaDevices : useMediaDevicesMock);


/***/ }),

/***/ "../node_modules/react-use/esm/useMediatedState.js":
/*!*********************************************************!*\
  !*** ../node_modules/react-use/esm/useMediatedState.js ***!
  \*********************************************************/
/*! exports provided: useMediatedState */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "useMediatedState", function() { return useMediatedState; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);

function useMediatedState(mediator, initialState) {
    var mediatorFn = Object(react__WEBPACK_IMPORTED_MODULE_0__["useRef"])(mediator);
    var _a = Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])(initialState), state = _a[0], setMediatedState = _a[1];
    var setState = Object(react__WEBPACK_IMPORTED_MODULE_0__["useCallback"])(function (newState) {
        if (mediatorFn.current.length === 2) {
            mediatorFn.current(newState, setMediatedState);
        }
        else {
            setMediatedState(mediatorFn.current(newState));
        }
    }, [state]);
    return [state, setState];
}


/***/ }),

/***/ "../node_modules/react-use/esm/useMethods.js":
/*!***************************************************!*\
  !*** ../node_modules/react-use/esm/useMethods.js ***!
  \***************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);

var useMethods = function (createMethods, initialState) {
    var reducer = Object(react__WEBPACK_IMPORTED_MODULE_0__["useMemo"])(function () { return function (reducerState, action) {
        var _a;
        return (_a = createMethods(reducerState))[action.type].apply(_a, action.payload);
    }; }, [createMethods]);
    var _a = Object(react__WEBPACK_IMPORTED_MODULE_0__["useReducer"])(reducer, initialState), state = _a[0], dispatch = _a[1];
    var wrappedMethods = Object(react__WEBPACK_IMPORTED_MODULE_0__["useMemo"])(function () {
        var actionTypes = Object.keys(createMethods(initialState));
        return actionTypes.reduce(function (acc, type) {
            acc[type] = function () {
                var payload = [];
                for (var _i = 0; _i < arguments.length; _i++) {
                    payload[_i] = arguments[_i];
                }
                return dispatch({ type: type, payload: payload });
            };
            return acc;
        }, {});
    }, [createMethods, initialState]);
    return [state, wrappedMethods];
};
/* harmony default export */ __webpack_exports__["default"] = (useMethods);


/***/ }),

/***/ "../node_modules/react-use/esm/useMotion.js":
/*!**************************************************!*\
  !*** ../node_modules/react-use/esm/useMotion.js ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _misc_util__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./misc/util */ "../node_modules/react-use/esm/misc/util.js");


var defaultState = {
    acceleration: {
        x: null,
        y: null,
        z: null,
    },
    accelerationIncludingGravity: {
        x: null,
        y: null,
        z: null,
    },
    rotationRate: {
        alpha: null,
        beta: null,
        gamma: null,
    },
    interval: 16,
};
var useMotion = function (initialState) {
    if (initialState === void 0) { initialState = defaultState; }
    var _a = Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])(initialState), state = _a[0], setState = _a[1];
    Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
        var handler = function (event) {
            var acceleration = event.acceleration, accelerationIncludingGravity = event.accelerationIncludingGravity, rotationRate = event.rotationRate, interval = event.interval;
            setState({
                acceleration: {
                    x: acceleration.x,
                    y: acceleration.y,
                    z: acceleration.z,
                },
                accelerationIncludingGravity: {
                    x: accelerationIncludingGravity.x,
                    y: accelerationIncludingGravity.y,
                    z: accelerationIncludingGravity.z,
                },
                rotationRate: {
                    alpha: rotationRate.alpha,
                    beta: rotationRate.beta,
                    gamma: rotationRate.gamma,
                },
                interval: interval,
            });
        };
        Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["on"])(window, 'devicemotion', handler);
        return function () {
            Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["off"])(window, 'devicemotion', handler);
        };
    }, []);
    return state;
};
/* harmony default export */ __webpack_exports__["default"] = (useMotion);


/***/ }),

/***/ "../node_modules/react-use/esm/useMount.js":
/*!*************************************************!*\
  !*** ../node_modules/react-use/esm/useMount.js ***!
  \*************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _useEffectOnce__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./useEffectOnce */ "../node_modules/react-use/esm/useEffectOnce.js");

var useMount = function (fn) {
    Object(_useEffectOnce__WEBPACK_IMPORTED_MODULE_0__["default"])(function () {
        fn();
    });
};
/* harmony default export */ __webpack_exports__["default"] = (useMount);


/***/ }),

/***/ "../node_modules/react-use/esm/useMountedState.js":
/*!********************************************************!*\
  !*** ../node_modules/react-use/esm/useMountedState.js ***!
  \********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return useMountedState; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);

function useMountedState() {
    var mountedRef = Object(react__WEBPACK_IMPORTED_MODULE_0__["useRef"])(false);
    var get = Object(react__WEBPACK_IMPORTED_MODULE_0__["useCallback"])(function () { return mountedRef.current; }, []);
    Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
        mountedRef.current = true;
        return function () {
            mountedRef.current = false;
        };
    }, []);
    return get;
}


/***/ }),

/***/ "../node_modules/react-use/esm/useMouse.js":
/*!*************************************************!*\
  !*** ../node_modules/react-use/esm/useMouse.js ***!
  \*************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _useRafState__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./useRafState */ "../node_modules/react-use/esm/useRafState.js");
/* harmony import */ var _misc_util__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./misc/util */ "../node_modules/react-use/esm/misc/util.js");



var useMouse = function (ref) {
    if (true) {
        if (typeof ref !== 'object' || typeof ref.current === 'undefined') {
            console.error('useMouse expects a single ref argument.');
        }
    }
    var _a = Object(_useRafState__WEBPACK_IMPORTED_MODULE_1__["default"])({
        docX: 0,
        docY: 0,
        posX: 0,
        posY: 0,
        elX: 0,
        elY: 0,
        elH: 0,
        elW: 0,
    }), state = _a[0], setState = _a[1];
    Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
        var moveHandler = function (event) {
            if (ref && ref.current) {
                var _a = ref.current.getBoundingClientRect(), left = _a.left, top_1 = _a.top, elW = _a.width, elH = _a.height;
                var posX = left + window.pageXOffset;
                var posY = top_1 + window.pageYOffset;
                var elX = event.pageX - posX;
                var elY = event.pageY - posY;
                setState({
                    docX: event.pageX,
                    docY: event.pageY,
                    posX: posX,
                    posY: posY,
                    elX: elX,
                    elY: elY,
                    elH: elH,
                    elW: elW,
                });
            }
        };
        Object(_misc_util__WEBPACK_IMPORTED_MODULE_2__["on"])(document, 'mousemove', moveHandler);
        return function () {
            Object(_misc_util__WEBPACK_IMPORTED_MODULE_2__["off"])(document, 'mousemove', moveHandler);
        };
    }, [ref]);
    return state;
};
/* harmony default export */ __webpack_exports__["default"] = (useMouse);


/***/ }),

/***/ "../node_modules/react-use/esm/useMouseHovered.js":
/*!********************************************************!*\
  !*** ../node_modules/react-use/esm/useMouseHovered.js ***!
  \********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _useHoverDirty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./useHoverDirty */ "../node_modules/react-use/esm/useHoverDirty.js");
/* harmony import */ var _useMouse__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./useMouse */ "../node_modules/react-use/esm/useMouse.js");


var nullRef = { current: null };
var useMouseHovered = function (ref, options) {
    if (options === void 0) { options = {}; }
    var whenHovered = !!options.whenHovered;
    var bound = !!options.bound;
    var isHovered = Object(_useHoverDirty__WEBPACK_IMPORTED_MODULE_0__["default"])(ref, whenHovered);
    var state = Object(_useMouse__WEBPACK_IMPORTED_MODULE_1__["default"])(whenHovered && !isHovered ? nullRef : ref);
    if (bound) {
        state.elX = Math.max(0, Math.min(state.elX, state.elW));
        state.elY = Math.max(0, Math.min(state.elY, state.elH));
    }
    return state;
};
/* harmony default export */ __webpack_exports__["default"] = (useMouseHovered);


/***/ }),

/***/ "../node_modules/react-use/esm/useMouseWheel.js":
/*!******************************************************!*\
  !*** ../node_modules/react-use/esm/useMouseWheel.js ***!
  \******************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _misc_util__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./misc/util */ "../node_modules/react-use/esm/misc/util.js");


/* harmony default export */ __webpack_exports__["default"] = (function () {
    var _a = Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])(0), mouseWheelScrolled = _a[0], setMouseWheelScrolled = _a[1];
    Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
        var updateScroll = function (e) {
            setMouseWheelScrolled(e.deltaY + mouseWheelScrolled);
        };
        Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["on"])(window, 'wheel', updateScroll, false);
        return function () { return Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["off"])(window, 'wheel', updateScroll); };
    });
    return mouseWheelScrolled;
});


/***/ }),

/***/ "../node_modules/react-use/esm/useMultiStateValidator.js":
/*!***************************************************************!*\
  !*** ../node_modules/react-use/esm/useMultiStateValidator.js ***!
  \***************************************************************/
/*! exports provided: useMultiStateValidator */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "useMultiStateValidator", function() { return useMultiStateValidator; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);

function useMultiStateValidator(states, validator, initialValidity) {
    if (initialValidity === void 0) { initialValidity = [undefined]; }
    if (typeof states !== 'object') {
        throw new Error('states expected to be an object or array, got ' + typeof states);
    }
    var validatorInner = Object(react__WEBPACK_IMPORTED_MODULE_0__["useRef"])(validator);
    var statesInner = Object(react__WEBPACK_IMPORTED_MODULE_0__["useRef"])(states);
    validatorInner.current = validator;
    statesInner.current = states;
    var _a = Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])(initialValidity), validity = _a[0], setValidity = _a[1];
    var validate = Object(react__WEBPACK_IMPORTED_MODULE_0__["useCallback"])(function () {
        if (validatorInner.current.length >= 2) {
            validatorInner.current(statesInner.current, setValidity);
        }
        else {
            setValidity(validatorInner.current(statesInner.current));
        }
    }, [setValidity]);
    Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
        validate();
    }, Object.values(states));
    return [validity, validate];
}


/***/ }),

/***/ "../node_modules/react-use/esm/useNetworkState.js":
/*!********************************************************!*\
  !*** ../node_modules/react-use/esm/useNetworkState.js ***!
  \********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return useNetworkState; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _misc_util__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./misc/util */ "../node_modules/react-use/esm/misc/util.js");


var nav = _misc_util__WEBPACK_IMPORTED_MODULE_1__["isNavigator"] ? navigator : undefined;
var conn = nav && (nav.connection || nav.mozConnection || nav.webkitConnection);
function getConnectionState(previousState) {
    var online = nav === null || nav === void 0 ? void 0 : nav.onLine;
    var previousOnline = previousState === null || previousState === void 0 ? void 0 : previousState.online;
    return {
        online: online,
        previous: previousOnline,
        since: online !== previousOnline ? new Date() : previousState === null || previousState === void 0 ? void 0 : previousState.since,
        downlink: conn === null || conn === void 0 ? void 0 : conn.downlink,
        downlinkMax: conn === null || conn === void 0 ? void 0 : conn.downlinkMax,
        effectiveType: conn === null || conn === void 0 ? void 0 : conn.effectiveType,
        rtt: conn === null || conn === void 0 ? void 0 : conn.rtt,
        saveData: conn === null || conn === void 0 ? void 0 : conn.saveData,
        type: conn === null || conn === void 0 ? void 0 : conn.type,
    };
}
function useNetworkState(initialState) {
    var _a = Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])(initialState !== null && initialState !== void 0 ? initialState : getConnectionState), state = _a[0], setState = _a[1];
    Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
        var handleStateChange = function () {
            setState(getConnectionState);
        };
        Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["on"])(window, 'online', handleStateChange, { passive: true });
        Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["on"])(window, 'offline', handleStateChange, { passive: true });
        if (conn) {
            Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["on"])(conn, 'change', handleStateChange, { passive: true });
        }
        return function () {
            Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["off"])(window, 'online', handleStateChange);
            Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["off"])(window, 'offline', handleStateChange);
            if (conn) {
                Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["off"])(conn, 'change', handleStateChange);
            }
        };
    }, []);
    return state;
}


/***/ }),

/***/ "../node_modules/react-use/esm/useNumber.js":
/*!**************************************************!*\
  !*** ../node_modules/react-use/esm/useNumber.js ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _useCounter__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./useCounter */ "../node_modules/react-use/esm/useCounter.js");

/* harmony default export */ __webpack_exports__["default"] = (_useCounter__WEBPACK_IMPORTED_MODULE_0__["default"]);


/***/ }),

/***/ "../node_modules/react-use/esm/useObservable.js":
/*!******************************************************!*\
  !*** ../node_modules/react-use/esm/useObservable.js ***!
  \******************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _useIsomorphicLayoutEffect__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./useIsomorphicLayoutEffect */ "../node_modules/react-use/esm/useIsomorphicLayoutEffect.js");


function useObservable(observable$, initialValue) {
    var _a = Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])(initialValue), value = _a[0], update = _a[1];
    Object(_useIsomorphicLayoutEffect__WEBPACK_IMPORTED_MODULE_1__["default"])(function () {
        var s = observable$.subscribe(update);
        return function () { return s.unsubscribe(); };
    }, [observable$]);
    return value;
}
/* harmony default export */ __webpack_exports__["default"] = (useObservable);


/***/ }),

/***/ "../node_modules/react-use/esm/useOrientation.js":
/*!*******************************************************!*\
  !*** ../node_modules/react-use/esm/useOrientation.js ***!
  \*******************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _misc_util__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./misc/util */ "../node_modules/react-use/esm/misc/util.js");


var defaultState = {
    angle: 0,
    type: 'landscape-primary',
};
var useOrientation = function (initialState) {
    if (initialState === void 0) { initialState = defaultState; }
    var _a = Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])(initialState), state = _a[0], setState = _a[1];
    Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
        var screen = window.screen;
        var mounted = true;
        var onChange = function () {
            if (mounted) {
                var orientation_1 = screen.orientation;
                if (orientation_1) {
                    var angle = orientation_1.angle, type = orientation_1.type;
                    setState({ angle: angle, type: type });
                }
                else if (window.orientation !== undefined) {
                    setState({
                        angle: typeof window.orientation === 'number' ? window.orientation : 0,
                        type: '',
                    });
                }
                else {
                    setState(initialState);
                }
            }
        };
        Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["on"])(window, 'orientationchange', onChange);
        onChange();
        return function () {
            mounted = false;
            Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["off"])(window, 'orientationchange', onChange);
        };
    }, []);
    return state;
};
/* harmony default export */ __webpack_exports__["default"] = (useOrientation);


/***/ }),

/***/ "../node_modules/react-use/esm/usePageLeave.js":
/*!*****************************************************!*\
  !*** ../node_modules/react-use/esm/usePageLeave.js ***!
  \*****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _misc_util__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./misc/util */ "../node_modules/react-use/esm/misc/util.js");


var usePageLeave = function (onPageLeave, args) {
    if (args === void 0) { args = []; }
    Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
        if (!onPageLeave) {
            return;
        }
        var handler = function (event) {
            event = event ? event : window.event;
            var from = event.relatedTarget || event.toElement;
            if (!from || from.nodeName === 'HTML') {
                onPageLeave();
            }
        };
        Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["on"])(document, 'mouseout', handler);
        return function () {
            Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["off"])(document, 'mouseout', handler);
        };
    }, args);
};
/* harmony default export */ __webpack_exports__["default"] = (usePageLeave);


/***/ }),

/***/ "../node_modules/react-use/esm/usePermission.js":
/*!******************************************************!*\
  !*** ../node_modules/react-use/esm/usePermission.js ***!
  \******************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _misc_util__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./misc/util */ "../node_modules/react-use/esm/misc/util.js");


// const usePermission = <T extends PermissionDescriptor>(permissionDesc: T): IState => {
var usePermission = function (permissionDesc) {
    var _a = Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])(''), state = _a[0], setState = _a[1];
    Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
        var mounted = true;
        var permissionStatus = null;
        var onChange = function () {
            if (!mounted) {
                return;
            }
            setState(function () { var _a; return (_a = permissionStatus === null || permissionStatus === void 0 ? void 0 : permissionStatus.state) !== null && _a !== void 0 ? _a : ''; });
        };
        navigator.permissions
            .query(permissionDesc)
            .then(function (status) {
            permissionStatus = status;
            Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["on"])(permissionStatus, 'change', onChange);
            onChange();
        })
            .catch(_misc_util__WEBPACK_IMPORTED_MODULE_1__["noop"]);
        return function () {
            permissionStatus && Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["off"])(permissionStatus, 'change', onChange);
            mounted = false;
            permissionStatus = null;
        };
    }, [permissionDesc]);
    return state;
};
/* harmony default export */ __webpack_exports__["default"] = (usePermission);


/***/ }),

/***/ "../node_modules/react-use/esm/usePrevious.js":
/*!****************************************************!*\
  !*** ../node_modules/react-use/esm/usePrevious.js ***!
  \****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return usePrevious; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);

function usePrevious(state) {
    var ref = Object(react__WEBPACK_IMPORTED_MODULE_0__["useRef"])();
    Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
        ref.current = state;
    });
    return ref.current;
}


/***/ }),

/***/ "../node_modules/react-use/esm/usePreviousDistinct.js":
/*!************************************************************!*\
  !*** ../node_modules/react-use/esm/usePreviousDistinct.js ***!
  \************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return usePreviousDistinct; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _useFirstMountState__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./useFirstMountState */ "../node_modules/react-use/esm/useFirstMountState.js");


var strictEquals = function (prev, next) { return prev === next; };
function usePreviousDistinct(value, compare) {
    if (compare === void 0) { compare = strictEquals; }
    var prevRef = Object(react__WEBPACK_IMPORTED_MODULE_0__["useRef"])();
    var curRef = Object(react__WEBPACK_IMPORTED_MODULE_0__["useRef"])(value);
    var isFirstMount = Object(_useFirstMountState__WEBPACK_IMPORTED_MODULE_1__["useFirstMountState"])();
    if (!isFirstMount && !compare(curRef.current, value)) {
        prevRef.current = curRef.current;
        curRef.current = value;
    }
    return prevRef.current;
}


/***/ }),

/***/ "../node_modules/react-use/esm/usePromise.js":
/*!***************************************************!*\
  !*** ../node_modules/react-use/esm/usePromise.js ***!
  \***************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _useMountedState__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./useMountedState */ "../node_modules/react-use/esm/useMountedState.js");


var usePromise = function () {
    var isMounted = Object(_useMountedState__WEBPACK_IMPORTED_MODULE_1__["default"])();
    return Object(react__WEBPACK_IMPORTED_MODULE_0__["useCallback"])(function (promise) {
        return new Promise(function (resolve, reject) {
            var onValue = function (value) {
                isMounted() && resolve(value);
            };
            var onError = function (error) {
                isMounted() && reject(error);
            };
            promise.then(onValue, onError);
        });
    }, []);
};
/* harmony default export */ __webpack_exports__["default"] = (usePromise);


/***/ }),

/***/ "../node_modules/react-use/esm/useQueue.js":
/*!*************************************************!*\
  !*** ../node_modules/react-use/esm/useQueue.js ***!
  \*************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../node_modules/react-use/node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);


var useQueue = function (initialValue) {
    if (initialValue === void 0) { initialValue = []; }
    var _a = Object(react__WEBPACK_IMPORTED_MODULE_1__["useState"])(initialValue), state = _a[0], set = _a[1];
    return {
        add: function (value) {
            set(function (queue) { return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__spreadArrays"])(queue, [value]); });
        },
        remove: function () {
            var result;
            set(function (_a) {
                var first = _a[0], rest = _a.slice(1);
                result = first;
                return rest;
            });
            return result;
        },
        get first() {
            return state[0];
        },
        get last() {
            return state[state.length - 1];
        },
        get size() {
            return state.length;
        },
    };
};
/* harmony default export */ __webpack_exports__["default"] = (useQueue);


/***/ }),

/***/ "../node_modules/react-use/esm/useRaf.js":
/*!***********************************************!*\
  !*** ../node_modules/react-use/esm/useRaf.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _useIsomorphicLayoutEffect__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./useIsomorphicLayoutEffect */ "../node_modules/react-use/esm/useIsomorphicLayoutEffect.js");


var useRaf = function (ms, delay) {
    if (ms === void 0) { ms = 1e12; }
    if (delay === void 0) { delay = 0; }
    var _a = Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])(0), elapsed = _a[0], set = _a[1];
    Object(_useIsomorphicLayoutEffect__WEBPACK_IMPORTED_MODULE_1__["default"])(function () {
        var raf;
        var timerStop;
        var start;
        var onFrame = function () {
            var time = Math.min(1, (Date.now() - start) / ms);
            set(time);
            loop();
        };
        var loop = function () {
            raf = requestAnimationFrame(onFrame);
        };
        var onStart = function () {
            timerStop = setTimeout(function () {
                cancelAnimationFrame(raf);
                set(1);
            }, ms);
            start = Date.now();
            loop();
        };
        var timerDelay = setTimeout(onStart, delay);
        return function () {
            clearTimeout(timerStop);
            clearTimeout(timerDelay);
            cancelAnimationFrame(raf);
        };
    }, [ms, delay]);
    return elapsed;
};
/* harmony default export */ __webpack_exports__["default"] = (useRaf);


/***/ }),

/***/ "../node_modules/react-use/esm/useRafLoop.js":
/*!***************************************************!*\
  !*** ../node_modules/react-use/esm/useRafLoop.js ***!
  \***************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return useRafLoop; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);

function useRafLoop(callback, initiallyActive) {
    if (initiallyActive === void 0) { initiallyActive = true; }
    var raf = Object(react__WEBPACK_IMPORTED_MODULE_0__["useRef"])(null);
    var rafActivity = Object(react__WEBPACK_IMPORTED_MODULE_0__["useRef"])(false);
    var rafCallback = Object(react__WEBPACK_IMPORTED_MODULE_0__["useRef"])(callback);
    rafCallback.current = callback;
    var step = Object(react__WEBPACK_IMPORTED_MODULE_0__["useCallback"])(function (time) {
        if (rafActivity.current) {
            rafCallback.current(time);
            raf.current = requestAnimationFrame(step);
        }
    }, []);
    var result = Object(react__WEBPACK_IMPORTED_MODULE_0__["useMemo"])(function () {
        return [
            function () {
                // stop
                if (rafActivity.current) {
                    rafActivity.current = false;
                    raf.current && cancelAnimationFrame(raf.current);
                }
            },
            function () {
                // start
                if (!rafActivity.current) {
                    rafActivity.current = true;
                    raf.current = requestAnimationFrame(step);
                }
            },
            function () { return rafActivity.current; },
        ];
    }, []);
    Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
        if (initiallyActive) {
            result[1]();
        }
        return result[0];
        // eslint-disable-next-line react-hooks/exhaustive-deps
    }, []);
    return result;
}


/***/ }),

/***/ "../node_modules/react-use/esm/useRafState.js":
/*!****************************************************!*\
  !*** ../node_modules/react-use/esm/useRafState.js ***!
  \****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _useUnmount__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./useUnmount */ "../node_modules/react-use/esm/useUnmount.js");


var useRafState = function (initialState) {
    var frame = Object(react__WEBPACK_IMPORTED_MODULE_0__["useRef"])(0);
    var _a = Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])(initialState), state = _a[0], setState = _a[1];
    var setRafState = Object(react__WEBPACK_IMPORTED_MODULE_0__["useCallback"])(function (value) {
        cancelAnimationFrame(frame.current);
        frame.current = requestAnimationFrame(function () {
            setState(value);
        });
    }, []);
    Object(_useUnmount__WEBPACK_IMPORTED_MODULE_1__["default"])(function () {
        cancelAnimationFrame(frame.current);
    });
    return [state, setRafState];
};
/* harmony default export */ __webpack_exports__["default"] = (useRafState);


/***/ }),

/***/ "../node_modules/react-use/esm/useRendersCount.js":
/*!********************************************************!*\
  !*** ../node_modules/react-use/esm/useRendersCount.js ***!
  \********************************************************/
/*! exports provided: useRendersCount */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "useRendersCount", function() { return useRendersCount; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);

function useRendersCount() {
    return ++Object(react__WEBPACK_IMPORTED_MODULE_0__["useRef"])(0).current;
}


/***/ }),

/***/ "../node_modules/react-use/esm/useScratch.js":
/*!***************************************************!*\
  !*** ../node_modules/react-use/esm/useScratch.js ***!
  \***************************************************/
/*! exports provided: ScratchSensor, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ScratchSensor", function() { return ScratchSensor; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../node_modules/react-use/node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react_universal_interface__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react-universal-interface */ "../node_modules/react-universal-interface/lib/index.js");
/* harmony import */ var react_universal_interface__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_universal_interface__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _useLatest__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./useLatest */ "../node_modules/react-use/esm/useLatest.js");
/* harmony import */ var _misc_util__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./misc/util */ "../node_modules/react-use/esm/misc/util.js");





var useScratch = function (params) {
    if (params === void 0) { params = {}; }
    var disabled = params.disabled;
    var paramsRef = Object(_useLatest__WEBPACK_IMPORTED_MODULE_3__["default"])(params);
    var _a = Object(react__WEBPACK_IMPORTED_MODULE_1__["useState"])({ isScratching: false }), state = _a[0], setState = _a[1];
    var refState = Object(react__WEBPACK_IMPORTED_MODULE_1__["useRef"])(state);
    var refScratching = Object(react__WEBPACK_IMPORTED_MODULE_1__["useRef"])(false);
    var refAnimationFrame = Object(react__WEBPACK_IMPORTED_MODULE_1__["useRef"])(null);
    var _b = Object(react__WEBPACK_IMPORTED_MODULE_1__["useState"])(null), el = _b[0], setEl = _b[1];
    Object(react__WEBPACK_IMPORTED_MODULE_1__["useEffect"])(function () {
        if (disabled)
            return;
        if (!el)
            return;
        var onMoveEvent = function (docX, docY) {
            cancelAnimationFrame(refAnimationFrame.current);
            refAnimationFrame.current = requestAnimationFrame(function () {
                var _a = el.getBoundingClientRect(), left = _a.left, top = _a.top;
                var elX = left + window.scrollX;
                var elY = top + window.scrollY;
                var x = docX - elX;
                var y = docY - elY;
                setState(function (oldState) {
                    var newState = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])(Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])({}, oldState), { dx: x - (oldState.x || 0), dy: y - (oldState.y || 0), end: Date.now(), isScratching: true });
                    refState.current = newState;
                    (paramsRef.current.onScratch || _misc_util__WEBPACK_IMPORTED_MODULE_4__["noop"])(newState);
                    return newState;
                });
            });
        };
        var onMouseMove = function (event) {
            onMoveEvent(event.pageX, event.pageY);
        };
        var onTouchMove = function (event) {
            onMoveEvent(event.changedTouches[0].pageX, event.changedTouches[0].pageY);
        };
        var onMouseUp;
        var onTouchEnd;
        var stopScratching = function () {
            if (!refScratching.current)
                return;
            refScratching.current = false;
            refState.current = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])(Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])({}, refState.current), { isScratching: false });
            (paramsRef.current.onScratchEnd || _misc_util__WEBPACK_IMPORTED_MODULE_4__["noop"])(refState.current);
            setState({ isScratching: false });
            Object(_misc_util__WEBPACK_IMPORTED_MODULE_4__["off"])(window, 'mousemove', onMouseMove);
            Object(_misc_util__WEBPACK_IMPORTED_MODULE_4__["off"])(window, 'touchmove', onTouchMove);
            Object(_misc_util__WEBPACK_IMPORTED_MODULE_4__["off"])(window, 'mouseup', onMouseUp);
            Object(_misc_util__WEBPACK_IMPORTED_MODULE_4__["off"])(window, 'touchend', onTouchEnd);
        };
        onMouseUp = stopScratching;
        onTouchEnd = stopScratching;
        var startScratching = function (docX, docY) {
            if (!refScratching.current)
                return;
            var _a = el.getBoundingClientRect(), left = _a.left, top = _a.top;
            var elX = left + window.scrollX;
            var elY = top + window.scrollY;
            var x = docX - elX;
            var y = docY - elY;
            var time = Date.now();
            var newState = {
                isScratching: true,
                start: time,
                end: time,
                docX: docX,
                docY: docY,
                x: x,
                y: y,
                dx: 0,
                dy: 0,
                elH: el.offsetHeight,
                elW: el.offsetWidth,
                elX: elX,
                elY: elY,
            };
            refState.current = newState;
            (paramsRef.current.onScratchStart || _misc_util__WEBPACK_IMPORTED_MODULE_4__["noop"])(newState);
            setState(newState);
            Object(_misc_util__WEBPACK_IMPORTED_MODULE_4__["on"])(window, 'mousemove', onMouseMove);
            Object(_misc_util__WEBPACK_IMPORTED_MODULE_4__["on"])(window, 'touchmove', onTouchMove);
            Object(_misc_util__WEBPACK_IMPORTED_MODULE_4__["on"])(window, 'mouseup', onMouseUp);
            Object(_misc_util__WEBPACK_IMPORTED_MODULE_4__["on"])(window, 'touchend', onTouchEnd);
        };
        var onMouseDown = function (event) {
            refScratching.current = true;
            startScratching(event.pageX, event.pageY);
        };
        var onTouchStart = function (event) {
            refScratching.current = true;
            startScratching(event.changedTouches[0].pageX, event.changedTouches[0].pageY);
        };
        Object(_misc_util__WEBPACK_IMPORTED_MODULE_4__["on"])(el, 'mousedown', onMouseDown);
        Object(_misc_util__WEBPACK_IMPORTED_MODULE_4__["on"])(el, 'touchstart', onTouchStart);
        return function () {
            Object(_misc_util__WEBPACK_IMPORTED_MODULE_4__["off"])(el, 'mousedown', onMouseDown);
            Object(_misc_util__WEBPACK_IMPORTED_MODULE_4__["off"])(el, 'touchstart', onTouchStart);
            Object(_misc_util__WEBPACK_IMPORTED_MODULE_4__["off"])(window, 'mousemove', onMouseMove);
            Object(_misc_util__WEBPACK_IMPORTED_MODULE_4__["off"])(window, 'touchmove', onTouchMove);
            Object(_misc_util__WEBPACK_IMPORTED_MODULE_4__["off"])(window, 'mouseup', onMouseUp);
            Object(_misc_util__WEBPACK_IMPORTED_MODULE_4__["off"])(window, 'touchend', onTouchEnd);
            if (refAnimationFrame.current)
                cancelAnimationFrame(refAnimationFrame.current);
            refAnimationFrame.current = null;
            refScratching.current = false;
            refState.current = { isScratching: false };
            setState(refState.current);
        };
    }, [el, disabled, paramsRef]);
    return [setEl, state];
};
var ScratchSensor = function (props) {
    var children = props.children, params = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__rest"])(props, ["children"]);
    var _a = useScratch(params), ref = _a[0], state = _a[1];
    var element = Object(react_universal_interface__WEBPACK_IMPORTED_MODULE_2__["render"])(props, state);
    return Object(react__WEBPACK_IMPORTED_MODULE_1__["cloneElement"])(element, Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])(Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])({}, element.props), { ref: function (el) {
            if (element.props.ref) {
                if (typeof element.props.ref === 'object')
                    element.props.ref.current = el;
                if (typeof element.props.ref === 'function')
                    element.props.ref(el);
            }
            ref(el);
        } }));
};
/* harmony default export */ __webpack_exports__["default"] = (useScratch);


/***/ }),

/***/ "../node_modules/react-use/esm/useScroll.js":
/*!**************************************************!*\
  !*** ../node_modules/react-use/esm/useScroll.js ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _useRafState__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./useRafState */ "../node_modules/react-use/esm/useRafState.js");
/* harmony import */ var _misc_util__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./misc/util */ "../node_modules/react-use/esm/misc/util.js");



var useScroll = function (ref) {
    if (true) {
        if (typeof ref !== 'object' || typeof ref.current === 'undefined') {
            console.error('`useScroll` expects a single ref argument.');
        }
    }
    var _a = Object(_useRafState__WEBPACK_IMPORTED_MODULE_1__["default"])({
        x: 0,
        y: 0,
    }), state = _a[0], setState = _a[1];
    Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
        var handler = function () {
            if (ref.current) {
                setState({
                    x: ref.current.scrollLeft,
                    y: ref.current.scrollTop,
                });
            }
        };
        if (ref.current) {
            Object(_misc_util__WEBPACK_IMPORTED_MODULE_2__["on"])(ref.current, 'scroll', handler, {
                capture: false,
                passive: true,
            });
        }
        return function () {
            if (ref.current) {
                Object(_misc_util__WEBPACK_IMPORTED_MODULE_2__["off"])(ref.current, 'scroll', handler);
            }
        };
    }, [ref]);
    return state;
};
/* harmony default export */ __webpack_exports__["default"] = (useScroll);


/***/ }),

/***/ "../node_modules/react-use/esm/useScrollbarWidth.js":
/*!**********************************************************!*\
  !*** ../node_modules/react-use/esm/useScrollbarWidth.js ***!
  \**********************************************************/
/*! exports provided: useScrollbarWidth */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "useScrollbarWidth", function() { return useScrollbarWidth; });
/* harmony import */ var _xobotyi_scrollbar_width__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @xobotyi/scrollbar-width */ "../node_modules/@xobotyi/scrollbar-width/dist/index.esm.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);


function useScrollbarWidth() {
    var _a = Object(react__WEBPACK_IMPORTED_MODULE_1__["useState"])(Object(_xobotyi_scrollbar_width__WEBPACK_IMPORTED_MODULE_0__["scrollbarWidth"])()), sbw = _a[0], setSbw = _a[1];
    // this needed to ensure the scrollbar width in case hook called before the DOM is ready
    Object(react__WEBPACK_IMPORTED_MODULE_1__["useEffect"])(function () {
        if (typeof sbw !== 'undefined') {
            return;
        }
        var raf = requestAnimationFrame(function () {
            setSbw(Object(_xobotyi_scrollbar_width__WEBPACK_IMPORTED_MODULE_0__["scrollbarWidth"])());
        });
        return function () { return cancelAnimationFrame(raf); };
    }, []);
    return sbw;
}


/***/ }),

/***/ "../node_modules/react-use/esm/useScrolling.js":
/*!*****************************************************!*\
  !*** ../node_modules/react-use/esm/useScrolling.js ***!
  \*****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _misc_util__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./misc/util */ "../node_modules/react-use/esm/misc/util.js");


var useScrolling = function (ref) {
    var _a = Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])(false), scrolling = _a[0], setScrolling = _a[1];
    Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
        if (ref.current) {
            var scrollingTimeout_1;
            var handleScrollEnd_1 = function () {
                setScrolling(false);
            };
            var handleScroll_1 = function () {
                setScrolling(true);
                clearTimeout(scrollingTimeout_1);
                scrollingTimeout_1 = setTimeout(function () { return handleScrollEnd_1(); }, 150);
            };
            Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["on"])(ref.current, 'scroll', handleScroll_1, false);
            return function () {
                if (ref.current) {
                    Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["off"])(ref.current, 'scroll', handleScroll_1, false);
                }
            };
        }
        return function () { };
    }, [ref]);
    return scrolling;
};
/* harmony default export */ __webpack_exports__["default"] = (useScrolling);


/***/ }),

/***/ "../node_modules/react-use/esm/useSearchParam.js":
/*!*******************************************************!*\
  !*** ../node_modules/react-use/esm/useSearchParam.js ***!
  \*******************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _misc_util__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./misc/util */ "../node_modules/react-use/esm/misc/util.js");


var getValue = function (search, param) { return new URLSearchParams(search).get(param); };
var useSearchParam = function (param) {
    var location = window.location;
    var _a = Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])(function () { return getValue(location.search, param); }), value = _a[0], setValue = _a[1];
    Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
        var onChange = function () {
            setValue(getValue(location.search, param));
        };
        Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["on"])(window, 'popstate', onChange);
        Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["on"])(window, 'pushstate', onChange);
        Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["on"])(window, 'replacestate', onChange);
        return function () {
            Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["off"])(window, 'popstate', onChange);
            Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["off"])(window, 'pushstate', onChange);
            Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["off"])(window, 'replacestate', onChange);
        };
    }, []);
    return value;
};
var useSearchParamServer = function () { return null; };
/* harmony default export */ __webpack_exports__["default"] = (_misc_util__WEBPACK_IMPORTED_MODULE_1__["isBrowser"] ? useSearchParam : useSearchParamServer);


/***/ }),

/***/ "../node_modules/react-use/esm/useSessionStorage.js":
/*!**********************************************************!*\
  !*** ../node_modules/react-use/esm/useSessionStorage.js ***!
  \**********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _misc_util__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./misc/util */ "../node_modules/react-use/esm/misc/util.js");


var useSessionStorage = function (key, initialValue, raw) {
    if (!_misc_util__WEBPACK_IMPORTED_MODULE_1__["isBrowser"]) {
        return [initialValue, function () { }];
    }
    // eslint-disable-next-line react-hooks/rules-of-hooks
    var _a = Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])(function () {
        try {
            var sessionStorageValue = sessionStorage.getItem(key);
            if (typeof sessionStorageValue !== 'string') {
                sessionStorage.setItem(key, raw ? String(initialValue) : JSON.stringify(initialValue));
                return initialValue;
            }
            else {
                return raw ? sessionStorageValue : JSON.parse(sessionStorageValue || 'null');
            }
        }
        catch (_a) {
            // If user is in private mode or has storage restriction
            // sessionStorage can throw. JSON.parse and JSON.stringify
            // can throw, too.
            return initialValue;
        }
    }), state = _a[0], setState = _a[1];
    // eslint-disable-next-line react-hooks/rules-of-hooks
    Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
        try {
            var serializedState = raw ? String(state) : JSON.stringify(state);
            sessionStorage.setItem(key, serializedState);
        }
        catch (_a) {
            // If user is in private mode or has storage restriction
            // sessionStorage can throw. Also JSON.stringify can throw.
        }
    });
    return [state, setState];
};
/* harmony default export */ __webpack_exports__["default"] = (useSessionStorage);


/***/ }),

/***/ "../node_modules/react-use/esm/useSet.js":
/*!***********************************************!*\
  !*** ../node_modules/react-use/esm/useSet.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../node_modules/react-use/node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);


var useSet = function (initialSet) {
    if (initialSet === void 0) { initialSet = new Set(); }
    var _a = Object(react__WEBPACK_IMPORTED_MODULE_1__["useState"])(initialSet), set = _a[0], setSet = _a[1];
    var stableActions = Object(react__WEBPACK_IMPORTED_MODULE_1__["useMemo"])(function () {
        var add = function (item) { return setSet(function (prevSet) { return new Set(Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__spreadArrays"])(Array.from(prevSet), [item])); }); };
        var remove = function (item) {
            return setSet(function (prevSet) { return new Set(Array.from(prevSet).filter(function (i) { return i !== item; })); });
        };
        var toggle = function (item) {
            return setSet(function (prevSet) {
                return prevSet.has(item)
                    ? new Set(Array.from(prevSet).filter(function (i) { return i !== item; }))
                    : new Set(Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__spreadArrays"])(Array.from(prevSet), [item]));
            });
        };
        return { add: add, remove: remove, toggle: toggle, reset: function () { return setSet(initialSet); } };
    }, [setSet]);
    var utils = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])({ has: Object(react__WEBPACK_IMPORTED_MODULE_1__["useCallback"])(function (item) { return set.has(item); }, [set]) }, stableActions);
    return [set, utils];
};
/* harmony default export */ __webpack_exports__["default"] = (useSet);


/***/ }),

/***/ "../node_modules/react-use/esm/useSetState.js":
/*!****************************************************!*\
  !*** ../node_modules/react-use/esm/useSetState.js ***!
  \****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);

var useSetState = function (initialState) {
    if (initialState === void 0) { initialState = {}; }
    var _a = Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])(initialState), state = _a[0], set = _a[1];
    var setState = Object(react__WEBPACK_IMPORTED_MODULE_0__["useCallback"])(function (patch) {
        set(function (prevState) {
            return Object.assign({}, prevState, patch instanceof Function ? patch(prevState) : patch);
        });
    }, []);
    return [state, setState];
};
/* harmony default export */ __webpack_exports__["default"] = (useSetState);


/***/ }),

/***/ "../node_modules/react-use/esm/useShallowCompareEffect.js":
/*!****************************************************************!*\
  !*** ../node_modules/react-use/esm/useShallowCompareEffect.js ***!
  \****************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var fast_shallow_equal__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! fast-shallow-equal */ "../node_modules/fast-shallow-equal/index.js");
/* harmony import */ var fast_shallow_equal__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(fast_shallow_equal__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _useCustomCompareEffect__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./useCustomCompareEffect */ "../node_modules/react-use/esm/useCustomCompareEffect.js");


var isPrimitive = function (val) { return val !== Object(val); };
var shallowEqualDepsList = function (prevDeps, nextDeps) {
    return prevDeps.every(function (dep, index) { return Object(fast_shallow_equal__WEBPACK_IMPORTED_MODULE_0__["equal"])(dep, nextDeps[index]); });
};
var useShallowCompareEffect = function (effect, deps) {
    if (true) {
        if (!(deps instanceof Array) || !deps.length) {
            console.warn('`useShallowCompareEffect` should not be used with no dependencies. Use React.useEffect instead.');
        }
        if (deps.every(isPrimitive)) {
            console.warn('`useShallowCompareEffect` should not be used with dependencies that are all primitive values. Use React.useEffect instead.');
        }
    }
    Object(_useCustomCompareEffect__WEBPACK_IMPORTED_MODULE_1__["default"])(effect, deps, shallowEqualDepsList);
};
/* harmony default export */ __webpack_exports__["default"] = (useShallowCompareEffect);


/***/ }),

/***/ "../node_modules/react-use/esm/useSize.js":
/*!************************************************!*\
  !*** ../node_modules/react-use/esm/useSize.js ***!
  \************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../node_modules/react-use/node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _misc_util__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./misc/util */ "../node_modules/react-use/esm/misc/util.js");



var useState = react__WEBPACK_IMPORTED_MODULE_1__["useState"], useEffect = react__WEBPACK_IMPORTED_MODULE_1__["useEffect"], useRef = react__WEBPACK_IMPORTED_MODULE_1__["useRef"];
var DRAF = function (callback) { return setTimeout(callback, 35); };
var useSize = function (element, _a) {
    var _b = _a === void 0 ? {} : _a, _c = _b.width, width = _c === void 0 ? Infinity : _c, _d = _b.height, height = _d === void 0 ? Infinity : _d;
    if (!_misc_util__WEBPACK_IMPORTED_MODULE_2__["isBrowser"]) {
        return [
            typeof element === 'function' ? element({ width: width, height: height }) : element,
            { width: width, height: height },
        ];
    }
    // eslint-disable-next-line react-hooks/rules-of-hooks
    var _e = useState({ width: width, height: height }), state = _e[0], setState = _e[1];
    if (typeof element === 'function') {
        element = element(state);
    }
    var style = element.props.style || {};
    // eslint-disable-next-line react-hooks/rules-of-hooks
    var ref = useRef(null);
    var window = null;
    var setSize = function () {
        var iframe = ref.current;
        var size = iframe
            ? {
                width: iframe.offsetWidth,
                height: iframe.offsetHeight,
            }
            : { width: width, height: height };
        setState(size);
    };
    var onWindow = function (windowToListenOn) {
        Object(_misc_util__WEBPACK_IMPORTED_MODULE_2__["on"])(windowToListenOn, 'resize', setSize);
        DRAF(setSize);
    };
    // eslint-disable-next-line react-hooks/rules-of-hooks
    useEffect(function () {
        var iframe = ref.current;
        if (!iframe) {
            // iframe will be undefined if component is already unmounted
            return;
        }
        if (iframe.contentWindow) {
            window = iframe.contentWindow;
            onWindow(window);
        }
        else {
            var onLoad_1 = function () {
                Object(_misc_util__WEBPACK_IMPORTED_MODULE_2__["on"])(iframe, 'load', onLoad_1);
                window = iframe.contentWindow;
                onWindow(window);
            };
            Object(_misc_util__WEBPACK_IMPORTED_MODULE_2__["off"])(iframe, 'load', onLoad_1);
        }
        return function () {
            if (window && window.removeEventListener) {
                Object(_misc_util__WEBPACK_IMPORTED_MODULE_2__["off"])(window, 'resize', setSize);
            }
        };
    }, []);
    style.position = 'relative';
    var sized = react__WEBPACK_IMPORTED_MODULE_1__["cloneElement"].apply(react__WEBPACK_IMPORTED_MODULE_1__, Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__spreadArrays"])([element, { style: style }], Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__spreadArrays"])([
        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]('iframe', {
            ref: ref,
            style: {
                background: 'transparent',
                border: 'none',
                height: '100%',
                left: 0,
                position: 'absolute',
                top: 0,
                width: '100%',
                zIndex: -1,
            },
        })
    ], react__WEBPACK_IMPORTED_MODULE_1__["Children"].toArray(element.props.children))));
    return [sized, state];
};
/* harmony default export */ __webpack_exports__["default"] = (useSize);


/***/ }),

/***/ "../node_modules/react-use/esm/useSlider.js":
/*!**************************************************!*\
  !*** ../node_modules/react-use/esm/useSlider.js ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _misc_util__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./misc/util */ "../node_modules/react-use/esm/misc/util.js");
/* harmony import */ var _useMountedState__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./useMountedState */ "../node_modules/react-use/esm/useMountedState.js");
/* harmony import */ var _useSetState__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./useSetState */ "../node_modules/react-use/esm/useSetState.js");




var useSlider = function (ref, options) {
    if (options === void 0) { options = {}; }
    var isMounted = Object(_useMountedState__WEBPACK_IMPORTED_MODULE_2__["default"])();
    var isSliding = Object(react__WEBPACK_IMPORTED_MODULE_0__["useRef"])(false);
    var valueRef = Object(react__WEBPACK_IMPORTED_MODULE_0__["useRef"])(0);
    var frame = Object(react__WEBPACK_IMPORTED_MODULE_0__["useRef"])(0);
    var _a = Object(_useSetState__WEBPACK_IMPORTED_MODULE_3__["default"])({
        isSliding: false,
        value: 0,
    }), state = _a[0], setState = _a[1];
    valueRef.current = state.value;
    Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
        if (_misc_util__WEBPACK_IMPORTED_MODULE_1__["isBrowser"]) {
            var styles = options.styles === undefined ? true : options.styles;
            var reverse_1 = options.reverse === undefined ? false : options.reverse;
            if (ref.current && styles) {
                ref.current.style.userSelect = 'none';
            }
            var startScrubbing_1 = function () {
                if (!isSliding.current && isMounted()) {
                    (options.onScrubStart || _misc_util__WEBPACK_IMPORTED_MODULE_1__["noop"])();
                    isSliding.current = true;
                    setState({ isSliding: true });
                    bindEvents_1();
                }
            };
            var stopScrubbing_1 = function () {
                if (isSliding.current && isMounted()) {
                    (options.onScrubStop || _misc_util__WEBPACK_IMPORTED_MODULE_1__["noop"])(valueRef.current);
                    isSliding.current = false;
                    setState({ isSliding: false });
                    unbindEvents_1();
                }
            };
            var onMouseDown_1 = function (event) {
                startScrubbing_1();
                onMouseMove_1(event);
            };
            var onMouseMove_1 = options.vertical
                ? function (event) { return onScrub_1(event.clientY); }
                : function (event) { return onScrub_1(event.clientX); };
            var onTouchStart_1 = function (event) {
                startScrubbing_1();
                onTouchMove_1(event);
            };
            var onTouchMove_1 = options.vertical
                ? function (event) { return onScrub_1(event.changedTouches[0].clientY); }
                : function (event) { return onScrub_1(event.changedTouches[0].clientX); };
            var bindEvents_1 = function () {
                Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["on"])(document, 'mousemove', onMouseMove_1);
                Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["on"])(document, 'mouseup', stopScrubbing_1);
                Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["on"])(document, 'touchmove', onTouchMove_1);
                Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["on"])(document, 'touchend', stopScrubbing_1);
            };
            var unbindEvents_1 = function () {
                Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["off"])(document, 'mousemove', onMouseMove_1);
                Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["off"])(document, 'mouseup', stopScrubbing_1);
                Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["off"])(document, 'touchmove', onTouchMove_1);
                Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["off"])(document, 'touchend', stopScrubbing_1);
            };
            var onScrub_1 = function (clientXY) {
                cancelAnimationFrame(frame.current);
                frame.current = requestAnimationFrame(function () {
                    if (isMounted() && ref.current) {
                        var rect = ref.current.getBoundingClientRect();
                        var pos = options.vertical ? rect.top : rect.left;
                        var length_1 = options.vertical ? rect.height : rect.width;
                        // Prevent returning 0 when element is hidden by CSS
                        if (!length_1) {
                            return;
                        }
                        var value = (clientXY - pos) / length_1;
                        if (value > 1) {
                            value = 1;
                        }
                        else if (value < 0) {
                            value = 0;
                        }
                        if (reverse_1) {
                            value = 1 - value;
                        }
                        setState({
                            value: value,
                        });
                        (options.onScrub || _misc_util__WEBPACK_IMPORTED_MODULE_1__["noop"])(value);
                    }
                });
            };
            Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["on"])(ref.current, 'mousedown', onMouseDown_1);
            Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["on"])(ref.current, 'touchstart', onTouchStart_1);
            return function () {
                Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["off"])(ref.current, 'mousedown', onMouseDown_1);
                Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["off"])(ref.current, 'touchstart', onTouchStart_1);
            };
        }
        else {
            return undefined;
        }
    }, [ref, options.vertical]);
    return state;
};
/* harmony default export */ __webpack_exports__["default"] = (useSlider);


/***/ }),

/***/ "../node_modules/react-use/esm/useSpeech.js":
/*!**************************************************!*\
  !*** ../node_modules/react-use/esm/useSpeech.js ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../node_modules/react-use/node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);


var Status;
(function (Status) {
    Status[Status["init"] = 0] = "init";
    Status[Status["play"] = 1] = "play";
    Status[Status["pause"] = 2] = "pause";
    Status[Status["end"] = 3] = "end";
})(Status || (Status = {}));
var useSpeech = function (text, options) {
    var mounted = Object(react__WEBPACK_IMPORTED_MODULE_1__["useRef"])(false);
    var _a = Object(react__WEBPACK_IMPORTED_MODULE_1__["useState"])(function () {
        var _a = options.voice || {}, _b = _a.lang, lang = _b === void 0 ? 'default' : _b, _c = _a.name, name = _c === void 0 ? '' : _c;
        return {
            isPlaying: false,
            status: Status[Status.init],
            lang: options.lang || 'default',
            voiceInfo: { lang: lang, name: name },
            rate: options.rate || 1,
            pitch: options.pitch || 1,
            volume: options.volume || 1,
        };
    }), state = _a[0], setState = _a[1];
    var handlePlay = Object(react__WEBPACK_IMPORTED_MODULE_1__["useCallback"])(function () {
        if (!mounted.current) {
            return;
        }
        setState(function (preState) {
            return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])(Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])({}, preState), { isPlaying: true, status: Status[Status.play] });
        });
    }, []);
    var handlePause = Object(react__WEBPACK_IMPORTED_MODULE_1__["useCallback"])(function () {
        if (!mounted.current) {
            return;
        }
        setState(function (preState) {
            return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])(Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])({}, preState), { isPlaying: false, status: Status[Status.pause] });
        });
    }, []);
    var handleEnd = Object(react__WEBPACK_IMPORTED_MODULE_1__["useCallback"])(function () {
        if (!mounted.current) {
            return;
        }
        setState(function (preState) {
            return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])(Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])({}, preState), { isPlaying: false, status: Status[Status.end] });
        });
    }, []);
    Object(react__WEBPACK_IMPORTED_MODULE_1__["useEffect"])(function () {
        mounted.current = true;
        var utterance = new SpeechSynthesisUtterance(text);
        options.lang && (utterance.lang = options.lang);
        options.voice && (utterance.voice = options.voice);
        utterance.rate = options.rate || 1;
        utterance.pitch = options.pitch || 1;
        utterance.volume = options.volume || 1;
        utterance.onstart = handlePlay;
        utterance.onpause = handlePause;
        utterance.onresume = handlePlay;
        utterance.onend = handleEnd;
        window.speechSynthesis.speak(utterance);
        return function () {
            mounted.current = false;
        };
    }, []);
    return state;
};
/* harmony default export */ __webpack_exports__["default"] = (useSpeech);


/***/ }),

/***/ "../node_modules/react-use/esm/useStartTyping.js":
/*!*******************************************************!*\
  !*** ../node_modules/react-use/esm/useStartTyping.js ***!
  \*******************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _useIsomorphicLayoutEffect__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./useIsomorphicLayoutEffect */ "../node_modules/react-use/esm/useIsomorphicLayoutEffect.js");
/* harmony import */ var _misc_util__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./misc/util */ "../node_modules/react-use/esm/misc/util.js");


var isFocusedElementEditable = function () {
    var activeElement = document.activeElement, body = document.body;
    if (!activeElement) {
        return false;
    }
    // If not element has focus, we assume it is not editable, too.
    if (activeElement === body) {
        return false;
    }
    // Assume <input> and <textarea> elements are editable.
    switch (activeElement.tagName) {
        case 'INPUT':
        case 'TEXTAREA':
            return true;
    }
    // Check if any other focused element id editable.
    return activeElement.hasAttribute('contenteditable');
};
var isTypedCharGood = function (_a) {
    var keyCode = _a.keyCode, metaKey = _a.metaKey, ctrlKey = _a.ctrlKey, altKey = _a.altKey;
    if (metaKey || ctrlKey || altKey) {
        return false;
    }
    // 0...9
    if (keyCode >= 48 && keyCode <= 57) {
        return true;
    }
    // a...z
    if (keyCode >= 65 && keyCode <= 90) {
        return true;
    }
    // All other keys.
    return false;
};
var useStartTyping = function (onStartTyping) {
    Object(_useIsomorphicLayoutEffect__WEBPACK_IMPORTED_MODULE_0__["default"])(function () {
        var keydown = function (event) {
            !isFocusedElementEditable() && isTypedCharGood(event) && onStartTyping(event);
        };
        Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["on"])(document, 'keydown', keydown);
        return function () {
            Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["off"])(document, 'keydown', keydown);
        };
    }, []);
};
/* harmony default export */ __webpack_exports__["default"] = (useStartTyping);


/***/ }),

/***/ "../node_modules/react-use/esm/useStateList.js":
/*!*****************************************************!*\
  !*** ../node_modules/react-use/esm/useStateList.js ***!
  \*****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return useStateList; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../node_modules/react-use/node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _useMountedState__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./useMountedState */ "../node_modules/react-use/esm/useMountedState.js");
/* harmony import */ var _useUpdate__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./useUpdate */ "../node_modules/react-use/esm/useUpdate.js");
/* harmony import */ var _useUpdateEffect__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./useUpdateEffect */ "../node_modules/react-use/esm/useUpdateEffect.js");





function useStateList(stateSet) {
    if (stateSet === void 0) { stateSet = []; }
    var isMounted = Object(_useMountedState__WEBPACK_IMPORTED_MODULE_2__["default"])();
    var update = Object(_useUpdate__WEBPACK_IMPORTED_MODULE_3__["default"])();
    var index = Object(react__WEBPACK_IMPORTED_MODULE_1__["useRef"])(0);
    // If new state list is shorter that before - switch to the last element
    Object(_useUpdateEffect__WEBPACK_IMPORTED_MODULE_4__["default"])(function () {
        if (stateSet.length <= index.current) {
            index.current = stateSet.length - 1;
            update();
        }
    }, [stateSet.length]);
    var actions = Object(react__WEBPACK_IMPORTED_MODULE_1__["useMemo"])(function () { return ({
        next: function () { return actions.setStateAt(index.current + 1); },
        prev: function () { return actions.setStateAt(index.current - 1); },
        setStateAt: function (newIndex) {
            // do nothing on unmounted component
            if (!isMounted())
                return;
            // do nothing on empty states list
            if (!stateSet.length)
                return;
            // in case new index is equal current - do nothing
            if (newIndex === index.current)
                return;
            // it gives the ability to travel through the left and right borders.
            // 4ex: if list contains 5 elements, attempt to set index 9 will bring use to 5th element
            // in case of negative index it will start counting from the right, so -17 will bring us to 4th element
            index.current =
                newIndex >= 0
                    ? newIndex % stateSet.length
                    : stateSet.length + (newIndex % stateSet.length);
            update();
        },
        setState: function (state) {
            // do nothing on unmounted component
            if (!isMounted())
                return;
            var newIndex = stateSet.length ? stateSet.indexOf(state) : -1;
            if (newIndex === -1) {
                throw new Error("State '" + state + "' is not a valid state (does not exist in state list)");
            }
            index.current = newIndex;
            update();
        },
    }); }, [stateSet]);
    return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])({ state: stateSet[index.current], currentIndex: index.current }, actions);
}


/***/ }),

/***/ "../node_modules/react-use/esm/useStateValidator.js":
/*!**********************************************************!*\
  !*** ../node_modules/react-use/esm/useStateValidator.js ***!
  \**********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return useStateValidator; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);

function useStateValidator(state, validator, initialState) {
    if (initialState === void 0) { initialState = [undefined]; }
    var validatorInner = Object(react__WEBPACK_IMPORTED_MODULE_0__["useRef"])(validator);
    var stateInner = Object(react__WEBPACK_IMPORTED_MODULE_0__["useRef"])(state);
    validatorInner.current = validator;
    stateInner.current = state;
    var _a = Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])(initialState), validity = _a[0], setValidity = _a[1];
    var validate = Object(react__WEBPACK_IMPORTED_MODULE_0__["useCallback"])(function () {
        if (validatorInner.current.length >= 2) {
            validatorInner.current(stateInner.current, setValidity);
        }
        else {
            setValidity(validatorInner.current(stateInner.current));
        }
    }, [setValidity]);
    Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
        validate();
    }, [state]);
    return [validity, validate];
}


/***/ }),

/***/ "../node_modules/react-use/esm/useStateWithHistory.js":
/*!************************************************************!*\
  !*** ../node_modules/react-use/esm/useStateWithHistory.js ***!
  \************************************************************/
/*! exports provided: useStateWithHistory */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "useStateWithHistory", function() { return useStateWithHistory; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _useFirstMountState__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./useFirstMountState */ "../node_modules/react-use/esm/useFirstMountState.js");
/* harmony import */ var _misc_hookState__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./misc/hookState */ "../node_modules/react-use/esm/misc/hookState.js");



function useStateWithHistory(initialState, capacity, initialHistory) {
    if (capacity === void 0) { capacity = 10; }
    if (capacity < 1) {
        throw new Error("Capacity has to be greater than 1, got '" + capacity + "'");
    }
    var isFirstMount = Object(_useFirstMountState__WEBPACK_IMPORTED_MODULE_1__["useFirstMountState"])();
    var _a = Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])(initialState), state = _a[0], innerSetState = _a[1];
    var history = Object(react__WEBPACK_IMPORTED_MODULE_0__["useRef"])((initialHistory !== null && initialHistory !== void 0 ? initialHistory : []));
    var historyPosition = Object(react__WEBPACK_IMPORTED_MODULE_0__["useRef"])(0);
    // do the states manipulation only on first mount, no sense to load re-renders with useless calculations
    if (isFirstMount) {
        if (history.current.length) {
            // if last element of history !== initial - push initial to history
            if (history.current[history.current.length - 1] !== initialState) {
                history.current.push(initialState);
            }
            // if initial history bigger that capacity - crop the first elements out
            if (history.current.length > capacity) {
                history.current = history.current.slice(history.current.length - capacity);
            }
        }
        else {
            // initiate the history with initial state
            history.current.push(initialState);
        }
        historyPosition.current = history.current.length && history.current.length - 1;
    }
    var setState = Object(react__WEBPACK_IMPORTED_MODULE_0__["useCallback"])(function (newState) {
        innerSetState(function (currentState) {
            newState = Object(_misc_hookState__WEBPACK_IMPORTED_MODULE_2__["resolveHookState"])(newState, currentState);
            // is state has changed
            if (newState !== currentState) {
                // if current position is not the last - pop element to the right
                if (historyPosition.current < history.current.length - 1) {
                    history.current = history.current.slice(0, historyPosition.current + 1);
                }
                historyPosition.current = history.current.push(newState) - 1;
                // if capacity is reached - shift first elements
                if (history.current.length > capacity) {
                    history.current = history.current.slice(history.current.length - capacity);
                }
            }
            return newState;
        });
    }, [state, capacity]);
    var historyState = Object(react__WEBPACK_IMPORTED_MODULE_0__["useMemo"])(function () { return ({
        history: history.current,
        position: historyPosition.current,
        capacity: capacity,
        back: function (amount) {
            if (amount === void 0) { amount = 1; }
            // don't do anything if we already at the left border
            if (!historyPosition.current) {
                return;
            }
            innerSetState(function () {
                historyPosition.current -= Math.min(amount, historyPosition.current);
                return history.current[historyPosition.current];
            });
        },
        forward: function (amount) {
            if (amount === void 0) { amount = 1; }
            // don't do anything if we already at the right border
            if (historyPosition.current === history.current.length - 1) {
                return;
            }
            innerSetState(function () {
                historyPosition.current = Math.min(historyPosition.current + amount, history.current.length - 1);
                return history.current[historyPosition.current];
            });
        },
        go: function (position) {
            if (position === historyPosition.current) {
                return;
            }
            innerSetState(function () {
                historyPosition.current =
                    position < 0
                        ? Math.max(history.current.length + position, 0)
                        : Math.min(history.current.length - 1, position);
                return history.current[historyPosition.current];
            });
        },
    }); }, [state]);
    return [state, setState, historyState];
}


/***/ }),

/***/ "../node_modules/react-use/esm/useThrottle.js":
/*!****************************************************!*\
  !*** ../node_modules/react-use/esm/useThrottle.js ***!
  \****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _useUnmount__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./useUnmount */ "../node_modules/react-use/esm/useUnmount.js");


var useThrottle = function (value, ms) {
    if (ms === void 0) { ms = 200; }
    var _a = Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])(value), state = _a[0], setState = _a[1];
    var timeout = Object(react__WEBPACK_IMPORTED_MODULE_0__["useRef"])();
    var nextValue = Object(react__WEBPACK_IMPORTED_MODULE_0__["useRef"])(null);
    var hasNextValue = Object(react__WEBPACK_IMPORTED_MODULE_0__["useRef"])(0);
    Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
        if (!timeout.current) {
            setState(value);
            var timeoutCallback_1 = function () {
                if (hasNextValue.current) {
                    hasNextValue.current = false;
                    setState(nextValue.current);
                    timeout.current = setTimeout(timeoutCallback_1, ms);
                }
                else {
                    timeout.current = undefined;
                }
            };
            timeout.current = setTimeout(timeoutCallback_1, ms);
        }
        else {
            nextValue.current = value;
            hasNextValue.current = true;
        }
    }, [value]);
    Object(_useUnmount__WEBPACK_IMPORTED_MODULE_1__["default"])(function () {
        timeout.current && clearTimeout(timeout.current);
    });
    return state;
};
/* harmony default export */ __webpack_exports__["default"] = (useThrottle);


/***/ }),

/***/ "../node_modules/react-use/esm/useThrottleFn.js":
/*!******************************************************!*\
  !*** ../node_modules/react-use/esm/useThrottleFn.js ***!
  \******************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _useUnmount__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./useUnmount */ "../node_modules/react-use/esm/useUnmount.js");


var useThrottleFn = function (fn, ms, args) {
    if (ms === void 0) { ms = 200; }
    var _a = Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])(null), state = _a[0], setState = _a[1];
    var timeout = Object(react__WEBPACK_IMPORTED_MODULE_0__["useRef"])();
    var nextArgs = Object(react__WEBPACK_IMPORTED_MODULE_0__["useRef"])();
    Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
        if (!timeout.current) {
            setState(fn.apply(void 0, args));
            var timeoutCallback_1 = function () {
                if (nextArgs.current) {
                    setState(fn.apply(void 0, nextArgs.current));
                    nextArgs.current = undefined;
                    timeout.current = setTimeout(timeoutCallback_1, ms);
                }
                else {
                    timeout.current = undefined;
                }
            };
            timeout.current = setTimeout(timeoutCallback_1, ms);
        }
        else {
            nextArgs.current = args;
        }
    }, args);
    Object(_useUnmount__WEBPACK_IMPORTED_MODULE_1__["default"])(function () {
        timeout.current && clearTimeout(timeout.current);
    });
    return state;
};
/* harmony default export */ __webpack_exports__["default"] = (useThrottleFn);


/***/ }),

/***/ "../node_modules/react-use/esm/useTimeout.js":
/*!***************************************************!*\
  !*** ../node_modules/react-use/esm/useTimeout.js ***!
  \***************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return useTimeout; });
/* harmony import */ var _useTimeoutFn__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./useTimeoutFn */ "../node_modules/react-use/esm/useTimeoutFn.js");
/* harmony import */ var _useUpdate__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./useUpdate */ "../node_modules/react-use/esm/useUpdate.js");


function useTimeout(ms) {
    if (ms === void 0) { ms = 0; }
    var update = Object(_useUpdate__WEBPACK_IMPORTED_MODULE_1__["default"])();
    return Object(_useTimeoutFn__WEBPACK_IMPORTED_MODULE_0__["default"])(update, ms);
}


/***/ }),

/***/ "../node_modules/react-use/esm/useTimeoutFn.js":
/*!*****************************************************!*\
  !*** ../node_modules/react-use/esm/useTimeoutFn.js ***!
  \*****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return useTimeoutFn; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);

function useTimeoutFn(fn, ms) {
    if (ms === void 0) { ms = 0; }
    var ready = Object(react__WEBPACK_IMPORTED_MODULE_0__["useRef"])(false);
    var timeout = Object(react__WEBPACK_IMPORTED_MODULE_0__["useRef"])();
    var callback = Object(react__WEBPACK_IMPORTED_MODULE_0__["useRef"])(fn);
    var isReady = Object(react__WEBPACK_IMPORTED_MODULE_0__["useCallback"])(function () { return ready.current; }, []);
    var set = Object(react__WEBPACK_IMPORTED_MODULE_0__["useCallback"])(function () {
        ready.current = false;
        timeout.current && clearTimeout(timeout.current);
        timeout.current = setTimeout(function () {
            ready.current = true;
            callback.current();
        }, ms);
    }, [ms]);
    var clear = Object(react__WEBPACK_IMPORTED_MODULE_0__["useCallback"])(function () {
        ready.current = null;
        timeout.current && clearTimeout(timeout.current);
    }, []);
    // update ref when function changes
    Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
        callback.current = fn;
    }, [fn]);
    // set on mount, clear on unmount
    Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
        set();
        return clear;
    }, [ms]);
    return [isReady, clear, set];
}


/***/ }),

/***/ "../node_modules/react-use/esm/useTitle.js":
/*!*************************************************!*\
  !*** ../node_modules/react-use/esm/useTitle.js ***!
  \*************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);

var DEFAULT_USE_TITLE_OPTIONS = {
    restoreOnUnmount: false,
};
function useTitle(title, options) {
    if (options === void 0) { options = DEFAULT_USE_TITLE_OPTIONS; }
    var prevTitleRef = Object(react__WEBPACK_IMPORTED_MODULE_0__["useRef"])(document.title);
    if (document.title !== title)
        document.title = title;
    Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
        if (options && options.restoreOnUnmount) {
            return function () {
                document.title = prevTitleRef.current;
            };
        }
        else {
            return;
        }
    }, []);
}
/* harmony default export */ __webpack_exports__["default"] = (typeof document !== 'undefined' ? useTitle : function (_title) { });


/***/ }),

/***/ "../node_modules/react-use/esm/useToggle.js":
/*!**************************************************!*\
  !*** ../node_modules/react-use/esm/useToggle.js ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);

var toggleReducer = function (state, nextValue) {
    return typeof nextValue === 'boolean' ? nextValue : !state;
};
var useToggle = function (initialValue) {
    return Object(react__WEBPACK_IMPORTED_MODULE_0__["useReducer"])(toggleReducer, initialValue);
};
/* harmony default export */ __webpack_exports__["default"] = (useToggle);


/***/ }),

/***/ "../node_modules/react-use/esm/useTween.js":
/*!*************************************************!*\
  !*** ../node_modules/react-use/esm/useTween.js ***!
  \*************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var ts_easing__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ts-easing */ "../node_modules/ts-easing/lib/index.js");
/* harmony import */ var ts_easing__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(ts_easing__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _useRaf__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./useRaf */ "../node_modules/react-use/esm/useRaf.js");


var useTween = function (easingName, ms, delay) {
    if (easingName === void 0) { easingName = 'inCirc'; }
    if (ms === void 0) { ms = 200; }
    if (delay === void 0) { delay = 0; }
    var fn = ts_easing__WEBPACK_IMPORTED_MODULE_0__["easing"][easingName];
    var t = Object(_useRaf__WEBPACK_IMPORTED_MODULE_1__["default"])(ms, delay);
    if (true) {
        if (typeof fn !== 'function') {
            console.error('useTween() expected "easingName" property to be a valid easing function name, like:' +
                '"' +
                Object.keys(ts_easing__WEBPACK_IMPORTED_MODULE_0__["easing"]).join('", "') +
                '".');
            console.trace();
            return 0;
        }
    }
    return fn(t);
};
/* harmony default export */ __webpack_exports__["default"] = (useTween);


/***/ }),

/***/ "../node_modules/react-use/esm/useUnmount.js":
/*!***************************************************!*\
  !*** ../node_modules/react-use/esm/useUnmount.js ***!
  \***************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _useEffectOnce__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./useEffectOnce */ "../node_modules/react-use/esm/useEffectOnce.js");


var useUnmount = function (fn) {
    var fnRef = Object(react__WEBPACK_IMPORTED_MODULE_0__["useRef"])(fn);
    // update the ref each render so if it change the newest callback will be invoked
    fnRef.current = fn;
    Object(_useEffectOnce__WEBPACK_IMPORTED_MODULE_1__["default"])(function () { return function () { return fnRef.current(); }; });
};
/* harmony default export */ __webpack_exports__["default"] = (useUnmount);


/***/ }),

/***/ "../node_modules/react-use/esm/useUnmountPromise.js":
/*!**********************************************************!*\
  !*** ../node_modules/react-use/esm/useUnmountPromise.js ***!
  \**********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _useEffectOnce__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./useEffectOnce */ "../node_modules/react-use/esm/useEffectOnce.js");


var useUnmountPromise = function () {
    var refUnmounted = Object(react__WEBPACK_IMPORTED_MODULE_0__["useRef"])(false);
    Object(_useEffectOnce__WEBPACK_IMPORTED_MODULE_1__["default"])(function () { return function () {
        refUnmounted.current = true;
    }; });
    var wrapper = Object(react__WEBPACK_IMPORTED_MODULE_0__["useMemo"])(function () {
        var race = function (promise, onError) {
            var newPromise = new Promise(function (resolve, reject) {
                promise.then(function (result) {
                    if (!refUnmounted.current)
                        resolve(result);
                }, function (error) {
                    if (!refUnmounted.current)
                        reject(error);
                    else if (onError)
                        onError(error);
                    else
                        console.error('useUnmountPromise', error);
                });
            });
            return newPromise;
        };
        return race;
    }, []);
    return wrapper;
};
/* harmony default export */ __webpack_exports__["default"] = (useUnmountPromise);


/***/ }),

/***/ "../node_modules/react-use/esm/useUpdate.js":
/*!**************************************************!*\
  !*** ../node_modules/react-use/esm/useUpdate.js ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return useUpdate; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);

var updateReducer = function (num) { return (num + 1) % 1000000; };
function useUpdate() {
    var _a = Object(react__WEBPACK_IMPORTED_MODULE_0__["useReducer"])(updateReducer, 0), update = _a[1];
    return update;
}


/***/ }),

/***/ "../node_modules/react-use/esm/useUpdateEffect.js":
/*!********************************************************!*\
  !*** ../node_modules/react-use/esm/useUpdateEffect.js ***!
  \********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _useFirstMountState__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./useFirstMountState */ "../node_modules/react-use/esm/useFirstMountState.js");


var useUpdateEffect = function (effect, deps) {
    var isFirstMount = Object(_useFirstMountState__WEBPACK_IMPORTED_MODULE_1__["useFirstMountState"])();
    Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
        if (!isFirstMount) {
            return effect();
        }
    }, deps);
};
/* harmony default export */ __webpack_exports__["default"] = (useUpdateEffect);


/***/ }),

/***/ "../node_modules/react-use/esm/useUpsert.js":
/*!**************************************************!*\
  !*** ../node_modules/react-use/esm/useUpsert.js ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return useUpsert; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../node_modules/react-use/node_modules/tslib/tslib.es6.js");
/* harmony import */ var _useList__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./useList */ "../node_modules/react-use/esm/useList.js");


/**
 * @deprecated Use `useList` hook's upsert action instead
 */
function useUpsert(predicate, initialList) {
    if (initialList === void 0) { initialList = []; }
    var _a = Object(_useList__WEBPACK_IMPORTED_MODULE_1__["default"])(initialList), list = _a[0], listActions = _a[1];
    return [
        list,
        Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])(Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])({}, listActions), { upsert: function (newItem) {
                listActions.upsert(predicate, newItem);
            } }),
    ];
}


/***/ }),

/***/ "../node_modules/react-use/esm/useVibrate.js":
/*!***************************************************!*\
  !*** ../node_modules/react-use/esm/useVibrate.js ***!
  \***************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _misc_util__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./misc/util */ "../node_modules/react-use/esm/misc/util.js");


var isVibrationApiSupported = _misc_util__WEBPACK_IMPORTED_MODULE_1__["isNavigator"] && 'vibrate' in navigator;
function useVibrate(enabled, pattern, loop) {
    if (enabled === void 0) { enabled = true; }
    if (pattern === void 0) { pattern = [1000, 1000]; }
    if (loop === void 0) { loop = true; }
    Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
        var interval;
        if (enabled) {
            navigator.vibrate(pattern);
            if (loop) {
                var duration = pattern instanceof Array ? pattern.reduce(function (a, b) { return a + b; }) : pattern;
                interval = setInterval(function () {
                    navigator.vibrate(pattern);
                }, duration);
            }
        }
        return function () {
            if (enabled) {
                navigator.vibrate(0);
                if (loop) {
                    clearInterval(interval);
                }
            }
        };
    }, [enabled]);
}
/* harmony default export */ __webpack_exports__["default"] = (isVibrationApiSupported ? useVibrate : _misc_util__WEBPACK_IMPORTED_MODULE_1__["noop"]);


/***/ }),

/***/ "../node_modules/react-use/esm/useVideo.js":
/*!*************************************************!*\
  !*** ../node_modules/react-use/esm/useVideo.js ***!
  \*************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _factory_createHTMLMediaHook__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./factory/createHTMLMediaHook */ "../node_modules/react-use/esm/factory/createHTMLMediaHook.js");

var useVideo = Object(_factory_createHTMLMediaHook__WEBPACK_IMPORTED_MODULE_0__["default"])('video');
/* harmony default export */ __webpack_exports__["default"] = (useVideo);


/***/ }),

/***/ "../node_modules/react-use/esm/useWindowScroll.js":
/*!********************************************************!*\
  !*** ../node_modules/react-use/esm/useWindowScroll.js ***!
  \********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _misc_util__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./misc/util */ "../node_modules/react-use/esm/misc/util.js");
/* harmony import */ var _useRafState__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./useRafState */ "../node_modules/react-use/esm/useRafState.js");



var useWindowScroll = function () {
    var _a = Object(_useRafState__WEBPACK_IMPORTED_MODULE_2__["default"])(function () { return ({
        x: _misc_util__WEBPACK_IMPORTED_MODULE_1__["isBrowser"] ? window.pageXOffset : 0,
        y: _misc_util__WEBPACK_IMPORTED_MODULE_1__["isBrowser"] ? window.pageYOffset : 0,
    }); }), state = _a[0], setState = _a[1];
    Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
        var handler = function () {
            setState(function (state) {
                var pageXOffset = window.pageXOffset, pageYOffset = window.pageYOffset;
                //Check state for change, return same state if no change happened to prevent rerender
                //(see useState/setState documentation). useState/setState is used internally in useRafState/setState.
                return state.x !== pageXOffset || state.y !== pageYOffset
                    ? {
                        x: pageXOffset,
                        y: pageYOffset,
                    }
                    : state;
            });
        };
        //We have to update window scroll at mount, before subscription.
        //Window scroll may be changed between render and effect handler.
        handler();
        Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["on"])(window, 'scroll', handler, {
            capture: false,
            passive: true,
        });
        return function () {
            Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["off"])(window, 'scroll', handler);
        };
    }, []);
    return state;
};
/* harmony default export */ __webpack_exports__["default"] = (useWindowScroll);


/***/ }),

/***/ "../node_modules/react-use/esm/useWindowSize.js":
/*!******************************************************!*\
  !*** ../node_modules/react-use/esm/useWindowSize.js ***!
  \******************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _useRafState__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./useRafState */ "../node_modules/react-use/esm/useRafState.js");
/* harmony import */ var _misc_util__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./misc/util */ "../node_modules/react-use/esm/misc/util.js");



var useWindowSize = function (initialWidth, initialHeight) {
    if (initialWidth === void 0) { initialWidth = Infinity; }
    if (initialHeight === void 0) { initialHeight = Infinity; }
    var _a = Object(_useRafState__WEBPACK_IMPORTED_MODULE_1__["default"])({
        width: _misc_util__WEBPACK_IMPORTED_MODULE_2__["isBrowser"] ? window.innerWidth : initialWidth,
        height: _misc_util__WEBPACK_IMPORTED_MODULE_2__["isBrowser"] ? window.innerHeight : initialHeight,
    }), state = _a[0], setState = _a[1];
    Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
        if (_misc_util__WEBPACK_IMPORTED_MODULE_2__["isBrowser"]) {
            var handler_1 = function () {
                setState({
                    width: window.innerWidth,
                    height: window.innerHeight,
                });
            };
            Object(_misc_util__WEBPACK_IMPORTED_MODULE_2__["on"])(window, 'resize', handler_1);
            return function () {
                Object(_misc_util__WEBPACK_IMPORTED_MODULE_2__["off"])(window, 'resize', handler_1);
            };
        }
    }, []);
    return state;
};
/* harmony default export */ __webpack_exports__["default"] = (useWindowSize);


/***/ }),

/***/ "../node_modules/react-use/node_modules/tslib/tslib.es6.js":
/*!*****************************************************************!*\
  !*** ../node_modules/react-use/node_modules/tslib/tslib.es6.js ***!
  \*****************************************************************/
/*! exports provided: __extends, __assign, __rest, __decorate, __param, __metadata, __awaiter, __generator, __createBinding, __exportStar, __values, __read, __spread, __spreadArrays, __spreadArray, __await, __asyncGenerator, __asyncDelegator, __asyncValues, __makeTemplateObject, __importStar, __importDefault, __classPrivateFieldGet, __classPrivateFieldSet */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__extends", function() { return __extends; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__assign", function() { return __assign; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__rest", function() { return __rest; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__decorate", function() { return __decorate; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__param", function() { return __param; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__metadata", function() { return __metadata; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__awaiter", function() { return __awaiter; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__generator", function() { return __generator; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__createBinding", function() { return __createBinding; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__exportStar", function() { return __exportStar; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__values", function() { return __values; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__read", function() { return __read; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__spread", function() { return __spread; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__spreadArrays", function() { return __spreadArrays; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__spreadArray", function() { return __spreadArray; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__await", function() { return __await; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__asyncGenerator", function() { return __asyncGenerator; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__asyncDelegator", function() { return __asyncDelegator; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__asyncValues", function() { return __asyncValues; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__makeTemplateObject", function() { return __makeTemplateObject; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__importStar", function() { return __importStar; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__importDefault", function() { return __importDefault; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__classPrivateFieldGet", function() { return __classPrivateFieldGet; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__classPrivateFieldSet", function() { return __classPrivateFieldSet; });
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
/* global Reflect, Promise */

var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
    return extendStatics(d, b);
};

function __extends(d, b) {
    if (typeof b !== "function" && b !== null)
        throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
    extendStatics(d, b);
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
}

var __assign = function() {
    __assign = Object.assign || function __assign(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
        }
        return t;
    }
    return __assign.apply(this, arguments);
}

function __rest(s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
}

function __decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}

function __param(paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
}

function __metadata(metadataKey, metadataValue) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(metadataKey, metadataValue);
}

function __awaiter(thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
}

function __generator(thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
}

var __createBinding = Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
});

function __exportStar(m, o) {
    for (var p in m) if (p !== "default" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);
}

function __values(o) {
    var s = typeof Symbol === "function" && Symbol.iterator, m = s && o[s], i = 0;
    if (m) return m.call(o);
    if (o && typeof o.length === "number") return {
        next: function () {
            if (o && i >= o.length) o = void 0;
            return { value: o && o[i++], done: !o };
        }
    };
    throw new TypeError(s ? "Object is not iterable." : "Symbol.iterator is not defined.");
}

function __read(o, n) {
    var m = typeof Symbol === "function" && o[Symbol.iterator];
    if (!m) return o;
    var i = m.call(o), r, ar = [], e;
    try {
        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);
    }
    catch (error) { e = { error: error }; }
    finally {
        try {
            if (r && !r.done && (m = i["return"])) m.call(i);
        }
        finally { if (e) throw e.error; }
    }
    return ar;
}

/** @deprecated */
function __spread() {
    for (var ar = [], i = 0; i < arguments.length; i++)
        ar = ar.concat(__read(arguments[i]));
    return ar;
}

/** @deprecated */
function __spreadArrays() {
    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;
    for (var r = Array(s), k = 0, i = 0; i < il; i++)
        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)
            r[k] = a[j];
    return r;
}

function __spreadArray(to, from, pack) {
    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {
        if (ar || !(i in from)) {
            if (!ar) ar = Array.prototype.slice.call(from, 0, i);
            ar[i] = from[i];
        }
    }
    return to.concat(ar || Array.prototype.slice.call(from));
}

function __await(v) {
    return this instanceof __await ? (this.v = v, this) : new __await(v);
}

function __asyncGenerator(thisArg, _arguments, generator) {
    if (!Symbol.asyncIterator) throw new TypeError("Symbol.asyncIterator is not defined.");
    var g = generator.apply(thisArg, _arguments || []), i, q = [];
    return i = {}, verb("next"), verb("throw"), verb("return"), i[Symbol.asyncIterator] = function () { return this; }, i;
    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }
    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }
    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }
    function fulfill(value) { resume("next", value); }
    function reject(value) { resume("throw", value); }
    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }
}

function __asyncDelegator(o) {
    var i, p;
    return i = {}, verb("next"), verb("throw", function (e) { throw e; }), verb("return"), i[Symbol.iterator] = function () { return this; }, i;
    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === "return" } : f ? f(v) : v; } : f; }
}

function __asyncValues(o) {
    if (!Symbol.asyncIterator) throw new TypeError("Symbol.asyncIterator is not defined.");
    var m = o[Symbol.asyncIterator], i;
    return m ? m.call(o) : (o = typeof __values === "function" ? __values(o) : o[Symbol.iterator](), i = {}, verb("next"), verb("throw"), verb("return"), i[Symbol.asyncIterator] = function () { return this; }, i);
    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }
    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }
}

function __makeTemplateObject(cooked, raw) {
    if (Object.defineProperty) { Object.defineProperty(cooked, "raw", { value: raw }); } else { cooked.raw = raw; }
    return cooked;
};

var __setModuleDefault = Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
};

function __importStar(mod) {
    if (mod && mod.__esModule) return mod;
    var result = {};
    if (mod != null) for (var k in mod) if (k !== "default" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);
    __setModuleDefault(result, mod);
    return result;
}

function __importDefault(mod) {
    return (mod && mod.__esModule) ? mod : { default: mod };
}

function __classPrivateFieldGet(receiver, state, kind, f) {
    if (kind === "a" && !f) throw new TypeError("Private accessor was defined without a getter");
    if (typeof state === "function" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError("Cannot read private member from an object whose class did not declare it");
    return kind === "m" ? f : kind === "a" ? f.call(receiver) : f ? f.value : state.get(receiver);
}

function __classPrivateFieldSet(receiver, state, value, kind, f) {
    if (kind === "m") throw new TypeError("Private method is not writable");
    if (kind === "a" && !f) throw new TypeError("Private accessor was defined without a setter");
    if (typeof state === "function" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError("Cannot write private member to an object whose class did not declare it");
    return (kind === "a" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;
}


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/AsyncSubject.js":
/*!***********************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/AsyncSubject.js ***!
  \***********************************************************/
/*! exports provided: AsyncSubject */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AsyncSubject", function() { return AsyncSubject; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
/* harmony import */ var _Subject__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Subject */ "../node_modules/rxjs/_esm5/internal/Subject.js");
/* harmony import */ var _Subscription__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Subscription */ "../node_modules/rxjs/_esm5/internal/Subscription.js");
/** PURE_IMPORTS_START tslib,_Subject,_Subscription PURE_IMPORTS_END */



var AsyncSubject = /*@__PURE__*/ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](AsyncSubject, _super);
    function AsyncSubject() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.value = null;
        _this.hasNext = false;
        _this.hasCompleted = false;
        return _this;
    }
    AsyncSubject.prototype._subscribe = function (subscriber) {
        if (this.hasError) {
            subscriber.error(this.thrownError);
            return _Subscription__WEBPACK_IMPORTED_MODULE_2__["Subscription"].EMPTY;
        }
        else if (this.hasCompleted && this.hasNext) {
            subscriber.next(this.value);
            subscriber.complete();
            return _Subscription__WEBPACK_IMPORTED_MODULE_2__["Subscription"].EMPTY;
        }
        return _super.prototype._subscribe.call(this, subscriber);
    };
    AsyncSubject.prototype.next = function (value) {
        if (!this.hasCompleted) {
            this.value = value;
            this.hasNext = true;
        }
    };
    AsyncSubject.prototype.error = function (error) {
        if (!this.hasCompleted) {
            _super.prototype.error.call(this, error);
        }
    };
    AsyncSubject.prototype.complete = function () {
        this.hasCompleted = true;
        if (this.hasNext) {
            _super.prototype.next.call(this, this.value);
        }
        _super.prototype.complete.call(this);
    };
    return AsyncSubject;
}(_Subject__WEBPACK_IMPORTED_MODULE_1__["Subject"]));

//# sourceMappingURL=AsyncSubject.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/BehaviorSubject.js":
/*!**************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/BehaviorSubject.js ***!
  \**************************************************************/
/*! exports provided: BehaviorSubject */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BehaviorSubject", function() { return BehaviorSubject; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
/* harmony import */ var _Subject__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Subject */ "../node_modules/rxjs/_esm5/internal/Subject.js");
/* harmony import */ var _util_ObjectUnsubscribedError__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./util/ObjectUnsubscribedError */ "../node_modules/rxjs/_esm5/internal/util/ObjectUnsubscribedError.js");
/** PURE_IMPORTS_START tslib,_Subject,_util_ObjectUnsubscribedError PURE_IMPORTS_END */



var BehaviorSubject = /*@__PURE__*/ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](BehaviorSubject, _super);
    function BehaviorSubject(_value) {
        var _this = _super.call(this) || this;
        _this._value = _value;
        return _this;
    }
    Object.defineProperty(BehaviorSubject.prototype, "value", {
        get: function () {
            return this.getValue();
        },
        enumerable: true,
        configurable: true
    });
    BehaviorSubject.prototype._subscribe = function (subscriber) {
        var subscription = _super.prototype._subscribe.call(this, subscriber);
        if (subscription && !subscription.closed) {
            subscriber.next(this._value);
        }
        return subscription;
    };
    BehaviorSubject.prototype.getValue = function () {
        if (this.hasError) {
            throw this.thrownError;
        }
        else if (this.closed) {
            throw new _util_ObjectUnsubscribedError__WEBPACK_IMPORTED_MODULE_2__["ObjectUnsubscribedError"]();
        }
        else {
            return this._value;
        }
    };
    BehaviorSubject.prototype.next = function (value) {
        _super.prototype.next.call(this, this._value = value);
    };
    return BehaviorSubject;
}(_Subject__WEBPACK_IMPORTED_MODULE_1__["Subject"]));

//# sourceMappingURL=BehaviorSubject.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/InnerSubscriber.js":
/*!**************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/InnerSubscriber.js ***!
  \**************************************************************/
/*! exports provided: InnerSubscriber */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "InnerSubscriber", function() { return InnerSubscriber; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
/* harmony import */ var _Subscriber__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Subscriber */ "../node_modules/rxjs/_esm5/internal/Subscriber.js");
/** PURE_IMPORTS_START tslib,_Subscriber PURE_IMPORTS_END */


var InnerSubscriber = /*@__PURE__*/ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](InnerSubscriber, _super);
    function InnerSubscriber(parent, outerValue, outerIndex) {
        var _this = _super.call(this) || this;
        _this.parent = parent;
        _this.outerValue = outerValue;
        _this.outerIndex = outerIndex;
        _this.index = 0;
        return _this;
    }
    InnerSubscriber.prototype._next = function (value) {
        this.parent.notifyNext(this.outerValue, value, this.outerIndex, this.index++, this);
    };
    InnerSubscriber.prototype._error = function (error) {
        this.parent.notifyError(error, this);
        this.unsubscribe();
    };
    InnerSubscriber.prototype._complete = function () {
        this.parent.notifyComplete(this);
        this.unsubscribe();
    };
    return InnerSubscriber;
}(_Subscriber__WEBPACK_IMPORTED_MODULE_1__["Subscriber"]));

//# sourceMappingURL=InnerSubscriber.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/Notification.js":
/*!***********************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/Notification.js ***!
  \***********************************************************/
/*! exports provided: NotificationKind, Notification */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "NotificationKind", function() { return NotificationKind; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Notification", function() { return Notification; });
/* harmony import */ var _observable_empty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./observable/empty */ "../node_modules/rxjs/_esm5/internal/observable/empty.js");
/* harmony import */ var _observable_of__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./observable/of */ "../node_modules/rxjs/_esm5/internal/observable/of.js");
/* harmony import */ var _observable_throwError__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./observable/throwError */ "../node_modules/rxjs/_esm5/internal/observable/throwError.js");
/** PURE_IMPORTS_START _observable_empty,_observable_of,_observable_throwError PURE_IMPORTS_END */



var NotificationKind;
/*@__PURE__*/ (function (NotificationKind) {
    NotificationKind["NEXT"] = "N";
    NotificationKind["ERROR"] = "E";
    NotificationKind["COMPLETE"] = "C";
})(NotificationKind || (NotificationKind = {}));
var Notification = /*@__PURE__*/ (function () {
    function Notification(kind, value, error) {
        this.kind = kind;
        this.value = value;
        this.error = error;
        this.hasValue = kind === 'N';
    }
    Notification.prototype.observe = function (observer) {
        switch (this.kind) {
            case 'N':
                return observer.next && observer.next(this.value);
            case 'E':
                return observer.error && observer.error(this.error);
            case 'C':
                return observer.complete && observer.complete();
        }
    };
    Notification.prototype.do = function (next, error, complete) {
        var kind = this.kind;
        switch (kind) {
            case 'N':
                return next && next(this.value);
            case 'E':
                return error && error(this.error);
            case 'C':
                return complete && complete();
        }
    };
    Notification.prototype.accept = function (nextOrObserver, error, complete) {
        if (nextOrObserver && typeof nextOrObserver.next === 'function') {
            return this.observe(nextOrObserver);
        }
        else {
            return this.do(nextOrObserver, error, complete);
        }
    };
    Notification.prototype.toObservable = function () {
        var kind = this.kind;
        switch (kind) {
            case 'N':
                return Object(_observable_of__WEBPACK_IMPORTED_MODULE_1__["of"])(this.value);
            case 'E':
                return Object(_observable_throwError__WEBPACK_IMPORTED_MODULE_2__["throwError"])(this.error);
            case 'C':
                return Object(_observable_empty__WEBPACK_IMPORTED_MODULE_0__["empty"])();
        }
        throw new Error('unexpected notification kind value');
    };
    Notification.createNext = function (value) {
        if (typeof value !== 'undefined') {
            return new Notification('N', value);
        }
        return Notification.undefinedValueNotification;
    };
    Notification.createError = function (err) {
        return new Notification('E', undefined, err);
    };
    Notification.createComplete = function () {
        return Notification.completeNotification;
    };
    Notification.completeNotification = new Notification('C');
    Notification.undefinedValueNotification = new Notification('N', undefined);
    return Notification;
}());

//# sourceMappingURL=Notification.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/Observable.js":
/*!*********************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/Observable.js ***!
  \*********************************************************/
/*! exports provided: Observable */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Observable", function() { return Observable; });
/* harmony import */ var _util_canReportError__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./util/canReportError */ "../node_modules/rxjs/_esm5/internal/util/canReportError.js");
/* harmony import */ var _util_toSubscriber__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./util/toSubscriber */ "../node_modules/rxjs/_esm5/internal/util/toSubscriber.js");
/* harmony import */ var _symbol_observable__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./symbol/observable */ "../node_modules/rxjs/_esm5/internal/symbol/observable.js");
/* harmony import */ var _util_pipe__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./util/pipe */ "../node_modules/rxjs/_esm5/internal/util/pipe.js");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./config */ "../node_modules/rxjs/_esm5/internal/config.js");
/** PURE_IMPORTS_START _util_canReportError,_util_toSubscriber,_symbol_observable,_util_pipe,_config PURE_IMPORTS_END */





var Observable = /*@__PURE__*/ (function () {
    function Observable(subscribe) {
        this._isScalar = false;
        if (subscribe) {
            this._subscribe = subscribe;
        }
    }
    Observable.prototype.lift = function (operator) {
        var observable = new Observable();
        observable.source = this;
        observable.operator = operator;
        return observable;
    };
    Observable.prototype.subscribe = function (observerOrNext, error, complete) {
        var operator = this.operator;
        var sink = Object(_util_toSubscriber__WEBPACK_IMPORTED_MODULE_1__["toSubscriber"])(observerOrNext, error, complete);
        if (operator) {
            sink.add(operator.call(sink, this.source));
        }
        else {
            sink.add(this.source || (_config__WEBPACK_IMPORTED_MODULE_4__["config"].useDeprecatedSynchronousErrorHandling && !sink.syncErrorThrowable) ?
                this._subscribe(sink) :
                this._trySubscribe(sink));
        }
        if (_config__WEBPACK_IMPORTED_MODULE_4__["config"].useDeprecatedSynchronousErrorHandling) {
            if (sink.syncErrorThrowable) {
                sink.syncErrorThrowable = false;
                if (sink.syncErrorThrown) {
                    throw sink.syncErrorValue;
                }
            }
        }
        return sink;
    };
    Observable.prototype._trySubscribe = function (sink) {
        try {
            return this._subscribe(sink);
        }
        catch (err) {
            if (_config__WEBPACK_IMPORTED_MODULE_4__["config"].useDeprecatedSynchronousErrorHandling) {
                sink.syncErrorThrown = true;
                sink.syncErrorValue = err;
            }
            if (Object(_util_canReportError__WEBPACK_IMPORTED_MODULE_0__["canReportError"])(sink)) {
                sink.error(err);
            }
            else {
                console.warn(err);
            }
        }
    };
    Observable.prototype.forEach = function (next, promiseCtor) {
        var _this = this;
        promiseCtor = getPromiseCtor(promiseCtor);
        return new promiseCtor(function (resolve, reject) {
            var subscription;
            subscription = _this.subscribe(function (value) {
                try {
                    next(value);
                }
                catch (err) {
                    reject(err);
                    if (subscription) {
                        subscription.unsubscribe();
                    }
                }
            }, reject, resolve);
        });
    };
    Observable.prototype._subscribe = function (subscriber) {
        var source = this.source;
        return source && source.subscribe(subscriber);
    };
    Observable.prototype[_symbol_observable__WEBPACK_IMPORTED_MODULE_2__["observable"]] = function () {
        return this;
    };
    Observable.prototype.pipe = function () {
        var operations = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            operations[_i] = arguments[_i];
        }
        if (operations.length === 0) {
            return this;
        }
        return Object(_util_pipe__WEBPACK_IMPORTED_MODULE_3__["pipeFromArray"])(operations)(this);
    };
    Observable.prototype.toPromise = function (promiseCtor) {
        var _this = this;
        promiseCtor = getPromiseCtor(promiseCtor);
        return new promiseCtor(function (resolve, reject) {
            var value;
            _this.subscribe(function (x) { return value = x; }, function (err) { return reject(err); }, function () { return resolve(value); });
        });
    };
    Observable.create = function (subscribe) {
        return new Observable(subscribe);
    };
    return Observable;
}());

function getPromiseCtor(promiseCtor) {
    if (!promiseCtor) {
        promiseCtor = _config__WEBPACK_IMPORTED_MODULE_4__["config"].Promise || Promise;
    }
    if (!promiseCtor) {
        throw new Error('no Promise impl found');
    }
    return promiseCtor;
}
//# sourceMappingURL=Observable.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/Observer.js":
/*!*******************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/Observer.js ***!
  \*******************************************************/
/*! exports provided: empty */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "empty", function() { return empty; });
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./config */ "../node_modules/rxjs/_esm5/internal/config.js");
/* harmony import */ var _util_hostReportError__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./util/hostReportError */ "../node_modules/rxjs/_esm5/internal/util/hostReportError.js");
/** PURE_IMPORTS_START _config,_util_hostReportError PURE_IMPORTS_END */


var empty = {
    closed: true,
    next: function (value) { },
    error: function (err) {
        if (_config__WEBPACK_IMPORTED_MODULE_0__["config"].useDeprecatedSynchronousErrorHandling) {
            throw err;
        }
        else {
            Object(_util_hostReportError__WEBPACK_IMPORTED_MODULE_1__["hostReportError"])(err);
        }
    },
    complete: function () { }
};
//# sourceMappingURL=Observer.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/OuterSubscriber.js":
/*!**************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/OuterSubscriber.js ***!
  \**************************************************************/
/*! exports provided: OuterSubscriber */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "OuterSubscriber", function() { return OuterSubscriber; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
/* harmony import */ var _Subscriber__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Subscriber */ "../node_modules/rxjs/_esm5/internal/Subscriber.js");
/** PURE_IMPORTS_START tslib,_Subscriber PURE_IMPORTS_END */


var OuterSubscriber = /*@__PURE__*/ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](OuterSubscriber, _super);
    function OuterSubscriber() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    OuterSubscriber.prototype.notifyNext = function (outerValue, innerValue, outerIndex, innerIndex, innerSub) {
        this.destination.next(innerValue);
    };
    OuterSubscriber.prototype.notifyError = function (error, innerSub) {
        this.destination.error(error);
    };
    OuterSubscriber.prototype.notifyComplete = function (innerSub) {
        this.destination.complete();
    };
    return OuterSubscriber;
}(_Subscriber__WEBPACK_IMPORTED_MODULE_1__["Subscriber"]));

//# sourceMappingURL=OuterSubscriber.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/ReplaySubject.js":
/*!************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/ReplaySubject.js ***!
  \************************************************************/
/*! exports provided: ReplaySubject */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ReplaySubject", function() { return ReplaySubject; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
/* harmony import */ var _Subject__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Subject */ "../node_modules/rxjs/_esm5/internal/Subject.js");
/* harmony import */ var _scheduler_queue__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./scheduler/queue */ "../node_modules/rxjs/_esm5/internal/scheduler/queue.js");
/* harmony import */ var _Subscription__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Subscription */ "../node_modules/rxjs/_esm5/internal/Subscription.js");
/* harmony import */ var _operators_observeOn__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./operators/observeOn */ "../node_modules/rxjs/_esm5/internal/operators/observeOn.js");
/* harmony import */ var _util_ObjectUnsubscribedError__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./util/ObjectUnsubscribedError */ "../node_modules/rxjs/_esm5/internal/util/ObjectUnsubscribedError.js");
/* harmony import */ var _SubjectSubscription__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./SubjectSubscription */ "../node_modules/rxjs/_esm5/internal/SubjectSubscription.js");
/** PURE_IMPORTS_START tslib,_Subject,_scheduler_queue,_Subscription,_operators_observeOn,_util_ObjectUnsubscribedError,_SubjectSubscription PURE_IMPORTS_END */







var ReplaySubject = /*@__PURE__*/ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](ReplaySubject, _super);
    function ReplaySubject(bufferSize, windowTime, scheduler) {
        if (bufferSize === void 0) {
            bufferSize = Number.POSITIVE_INFINITY;
        }
        if (windowTime === void 0) {
            windowTime = Number.POSITIVE_INFINITY;
        }
        var _this = _super.call(this) || this;
        _this.scheduler = scheduler;
        _this._events = [];
        _this._infiniteTimeWindow = false;
        _this._bufferSize = bufferSize < 1 ? 1 : bufferSize;
        _this._windowTime = windowTime < 1 ? 1 : windowTime;
        if (windowTime === Number.POSITIVE_INFINITY) {
            _this._infiniteTimeWindow = true;
            _this.next = _this.nextInfiniteTimeWindow;
        }
        else {
            _this.next = _this.nextTimeWindow;
        }
        return _this;
    }
    ReplaySubject.prototype.nextInfiniteTimeWindow = function (value) {
        if (!this.isStopped) {
            var _events = this._events;
            _events.push(value);
            if (_events.length > this._bufferSize) {
                _events.shift();
            }
        }
        _super.prototype.next.call(this, value);
    };
    ReplaySubject.prototype.nextTimeWindow = function (value) {
        if (!this.isStopped) {
            this._events.push(new ReplayEvent(this._getNow(), value));
            this._trimBufferThenGetEvents();
        }
        _super.prototype.next.call(this, value);
    };
    ReplaySubject.prototype._subscribe = function (subscriber) {
        var _infiniteTimeWindow = this._infiniteTimeWindow;
        var _events = _infiniteTimeWindow ? this._events : this._trimBufferThenGetEvents();
        var scheduler = this.scheduler;
        var len = _events.length;
        var subscription;
        if (this.closed) {
            throw new _util_ObjectUnsubscribedError__WEBPACK_IMPORTED_MODULE_5__["ObjectUnsubscribedError"]();
        }
        else if (this.isStopped || this.hasError) {
            subscription = _Subscription__WEBPACK_IMPORTED_MODULE_3__["Subscription"].EMPTY;
        }
        else {
            this.observers.push(subscriber);
            subscription = new _SubjectSubscription__WEBPACK_IMPORTED_MODULE_6__["SubjectSubscription"](this, subscriber);
        }
        if (scheduler) {
            subscriber.add(subscriber = new _operators_observeOn__WEBPACK_IMPORTED_MODULE_4__["ObserveOnSubscriber"](subscriber, scheduler));
        }
        if (_infiniteTimeWindow) {
            for (var i = 0; i < len && !subscriber.closed; i++) {
                subscriber.next(_events[i]);
            }
        }
        else {
            for (var i = 0; i < len && !subscriber.closed; i++) {
                subscriber.next(_events[i].value);
            }
        }
        if (this.hasError) {
            subscriber.error(this.thrownError);
        }
        else if (this.isStopped) {
            subscriber.complete();
        }
        return subscription;
    };
    ReplaySubject.prototype._getNow = function () {
        return (this.scheduler || _scheduler_queue__WEBPACK_IMPORTED_MODULE_2__["queue"]).now();
    };
    ReplaySubject.prototype._trimBufferThenGetEvents = function () {
        var now = this._getNow();
        var _bufferSize = this._bufferSize;
        var _windowTime = this._windowTime;
        var _events = this._events;
        var eventsCount = _events.length;
        var spliceCount = 0;
        while (spliceCount < eventsCount) {
            if ((now - _events[spliceCount].time) < _windowTime) {
                break;
            }
            spliceCount++;
        }
        if (eventsCount > _bufferSize) {
            spliceCount = Math.max(spliceCount, eventsCount - _bufferSize);
        }
        if (spliceCount > 0) {
            _events.splice(0, spliceCount);
        }
        return _events;
    };
    return ReplaySubject;
}(_Subject__WEBPACK_IMPORTED_MODULE_1__["Subject"]));

var ReplayEvent = /*@__PURE__*/ (function () {
    function ReplayEvent(time, value) {
        this.time = time;
        this.value = value;
    }
    return ReplayEvent;
}());
//# sourceMappingURL=ReplaySubject.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/Scheduler.js":
/*!********************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/Scheduler.js ***!
  \********************************************************/
/*! exports provided: Scheduler */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Scheduler", function() { return Scheduler; });
var Scheduler = /*@__PURE__*/ (function () {
    function Scheduler(SchedulerAction, now) {
        if (now === void 0) {
            now = Scheduler.now;
        }
        this.SchedulerAction = SchedulerAction;
        this.now = now;
    }
    Scheduler.prototype.schedule = function (work, delay, state) {
        if (delay === void 0) {
            delay = 0;
        }
        return new this.SchedulerAction(this, work).schedule(state, delay);
    };
    Scheduler.now = function () { return Date.now(); };
    return Scheduler;
}());

//# sourceMappingURL=Scheduler.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/Subject.js":
/*!******************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/Subject.js ***!
  \******************************************************/
/*! exports provided: SubjectSubscriber, Subject, AnonymousSubject */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SubjectSubscriber", function() { return SubjectSubscriber; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Subject", function() { return Subject; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AnonymousSubject", function() { return AnonymousSubject; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
/* harmony import */ var _Observable__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Observable */ "../node_modules/rxjs/_esm5/internal/Observable.js");
/* harmony import */ var _Subscriber__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Subscriber */ "../node_modules/rxjs/_esm5/internal/Subscriber.js");
/* harmony import */ var _Subscription__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Subscription */ "../node_modules/rxjs/_esm5/internal/Subscription.js");
/* harmony import */ var _util_ObjectUnsubscribedError__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./util/ObjectUnsubscribedError */ "../node_modules/rxjs/_esm5/internal/util/ObjectUnsubscribedError.js");
/* harmony import */ var _SubjectSubscription__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./SubjectSubscription */ "../node_modules/rxjs/_esm5/internal/SubjectSubscription.js");
/* harmony import */ var _internal_symbol_rxSubscriber__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../internal/symbol/rxSubscriber */ "../node_modules/rxjs/_esm5/internal/symbol/rxSubscriber.js");
/** PURE_IMPORTS_START tslib,_Observable,_Subscriber,_Subscription,_util_ObjectUnsubscribedError,_SubjectSubscription,_internal_symbol_rxSubscriber PURE_IMPORTS_END */







var SubjectSubscriber = /*@__PURE__*/ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](SubjectSubscriber, _super);
    function SubjectSubscriber(destination) {
        var _this = _super.call(this, destination) || this;
        _this.destination = destination;
        return _this;
    }
    return SubjectSubscriber;
}(_Subscriber__WEBPACK_IMPORTED_MODULE_2__["Subscriber"]));

var Subject = /*@__PURE__*/ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](Subject, _super);
    function Subject() {
        var _this = _super.call(this) || this;
        _this.observers = [];
        _this.closed = false;
        _this.isStopped = false;
        _this.hasError = false;
        _this.thrownError = null;
        return _this;
    }
    Subject.prototype[_internal_symbol_rxSubscriber__WEBPACK_IMPORTED_MODULE_6__["rxSubscriber"]] = function () {
        return new SubjectSubscriber(this);
    };
    Subject.prototype.lift = function (operator) {
        var subject = new AnonymousSubject(this, this);
        subject.operator = operator;
        return subject;
    };
    Subject.prototype.next = function (value) {
        if (this.closed) {
            throw new _util_ObjectUnsubscribedError__WEBPACK_IMPORTED_MODULE_4__["ObjectUnsubscribedError"]();
        }
        if (!this.isStopped) {
            var observers = this.observers;
            var len = observers.length;
            var copy = observers.slice();
            for (var i = 0; i < len; i++) {
                copy[i].next(value);
            }
        }
    };
    Subject.prototype.error = function (err) {
        if (this.closed) {
            throw new _util_ObjectUnsubscribedError__WEBPACK_IMPORTED_MODULE_4__["ObjectUnsubscribedError"]();
        }
        this.hasError = true;
        this.thrownError = err;
        this.isStopped = true;
        var observers = this.observers;
        var len = observers.length;
        var copy = observers.slice();
        for (var i = 0; i < len; i++) {
            copy[i].error(err);
        }
        this.observers.length = 0;
    };
    Subject.prototype.complete = function () {
        if (this.closed) {
            throw new _util_ObjectUnsubscribedError__WEBPACK_IMPORTED_MODULE_4__["ObjectUnsubscribedError"]();
        }
        this.isStopped = true;
        var observers = this.observers;
        var len = observers.length;
        var copy = observers.slice();
        for (var i = 0; i < len; i++) {
            copy[i].complete();
        }
        this.observers.length = 0;
    };
    Subject.prototype.unsubscribe = function () {
        this.isStopped = true;
        this.closed = true;
        this.observers = null;
    };
    Subject.prototype._trySubscribe = function (subscriber) {
        if (this.closed) {
            throw new _util_ObjectUnsubscribedError__WEBPACK_IMPORTED_MODULE_4__["ObjectUnsubscribedError"]();
        }
        else {
            return _super.prototype._trySubscribe.call(this, subscriber);
        }
    };
    Subject.prototype._subscribe = function (subscriber) {
        if (this.closed) {
            throw new _util_ObjectUnsubscribedError__WEBPACK_IMPORTED_MODULE_4__["ObjectUnsubscribedError"]();
        }
        else if (this.hasError) {
            subscriber.error(this.thrownError);
            return _Subscription__WEBPACK_IMPORTED_MODULE_3__["Subscription"].EMPTY;
        }
        else if (this.isStopped) {
            subscriber.complete();
            return _Subscription__WEBPACK_IMPORTED_MODULE_3__["Subscription"].EMPTY;
        }
        else {
            this.observers.push(subscriber);
            return new _SubjectSubscription__WEBPACK_IMPORTED_MODULE_5__["SubjectSubscription"](this, subscriber);
        }
    };
    Subject.prototype.asObservable = function () {
        var observable = new _Observable__WEBPACK_IMPORTED_MODULE_1__["Observable"]();
        observable.source = this;
        return observable;
    };
    Subject.create = function (destination, source) {
        return new AnonymousSubject(destination, source);
    };
    return Subject;
}(_Observable__WEBPACK_IMPORTED_MODULE_1__["Observable"]));

var AnonymousSubject = /*@__PURE__*/ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](AnonymousSubject, _super);
    function AnonymousSubject(destination, source) {
        var _this = _super.call(this) || this;
        _this.destination = destination;
        _this.source = source;
        return _this;
    }
    AnonymousSubject.prototype.next = function (value) {
        var destination = this.destination;
        if (destination && destination.next) {
            destination.next(value);
        }
    };
    AnonymousSubject.prototype.error = function (err) {
        var destination = this.destination;
        if (destination && destination.error) {
            this.destination.error(err);
        }
    };
    AnonymousSubject.prototype.complete = function () {
        var destination = this.destination;
        if (destination && destination.complete) {
            this.destination.complete();
        }
    };
    AnonymousSubject.prototype._subscribe = function (subscriber) {
        var source = this.source;
        if (source) {
            return this.source.subscribe(subscriber);
        }
        else {
            return _Subscription__WEBPACK_IMPORTED_MODULE_3__["Subscription"].EMPTY;
        }
    };
    return AnonymousSubject;
}(Subject));

//# sourceMappingURL=Subject.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/SubjectSubscription.js":
/*!******************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/SubjectSubscription.js ***!
  \******************************************************************/
/*! exports provided: SubjectSubscription */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SubjectSubscription", function() { return SubjectSubscription; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
/* harmony import */ var _Subscription__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Subscription */ "../node_modules/rxjs/_esm5/internal/Subscription.js");
/** PURE_IMPORTS_START tslib,_Subscription PURE_IMPORTS_END */


var SubjectSubscription = /*@__PURE__*/ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](SubjectSubscription, _super);
    function SubjectSubscription(subject, subscriber) {
        var _this = _super.call(this) || this;
        _this.subject = subject;
        _this.subscriber = subscriber;
        _this.closed = false;
        return _this;
    }
    SubjectSubscription.prototype.unsubscribe = function () {
        if (this.closed) {
            return;
        }
        this.closed = true;
        var subject = this.subject;
        var observers = subject.observers;
        this.subject = null;
        if (!observers || observers.length === 0 || subject.isStopped || subject.closed) {
            return;
        }
        var subscriberIndex = observers.indexOf(this.subscriber);
        if (subscriberIndex !== -1) {
            observers.splice(subscriberIndex, 1);
        }
    };
    return SubjectSubscription;
}(_Subscription__WEBPACK_IMPORTED_MODULE_1__["Subscription"]));

//# sourceMappingURL=SubjectSubscription.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/Subscriber.js":
/*!*********************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/Subscriber.js ***!
  \*********************************************************/
/*! exports provided: Subscriber, SafeSubscriber */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Subscriber", function() { return Subscriber; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SafeSubscriber", function() { return SafeSubscriber; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
/* harmony import */ var _util_isFunction__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./util/isFunction */ "../node_modules/rxjs/_esm5/internal/util/isFunction.js");
/* harmony import */ var _Observer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Observer */ "../node_modules/rxjs/_esm5/internal/Observer.js");
/* harmony import */ var _Subscription__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Subscription */ "../node_modules/rxjs/_esm5/internal/Subscription.js");
/* harmony import */ var _internal_symbol_rxSubscriber__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../internal/symbol/rxSubscriber */ "../node_modules/rxjs/_esm5/internal/symbol/rxSubscriber.js");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./config */ "../node_modules/rxjs/_esm5/internal/config.js");
/* harmony import */ var _util_hostReportError__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./util/hostReportError */ "../node_modules/rxjs/_esm5/internal/util/hostReportError.js");
/** PURE_IMPORTS_START tslib,_util_isFunction,_Observer,_Subscription,_internal_symbol_rxSubscriber,_config,_util_hostReportError PURE_IMPORTS_END */







var Subscriber = /*@__PURE__*/ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](Subscriber, _super);
    function Subscriber(destinationOrNext, error, complete) {
        var _this = _super.call(this) || this;
        _this.syncErrorValue = null;
        _this.syncErrorThrown = false;
        _this.syncErrorThrowable = false;
        _this.isStopped = false;
        switch (arguments.length) {
            case 0:
                _this.destination = _Observer__WEBPACK_IMPORTED_MODULE_2__["empty"];
                break;
            case 1:
                if (!destinationOrNext) {
                    _this.destination = _Observer__WEBPACK_IMPORTED_MODULE_2__["empty"];
                    break;
                }
                if (typeof destinationOrNext === 'object') {
                    if (destinationOrNext instanceof Subscriber) {
                        _this.syncErrorThrowable = destinationOrNext.syncErrorThrowable;
                        _this.destination = destinationOrNext;
                        destinationOrNext.add(_this);
                    }
                    else {
                        _this.syncErrorThrowable = true;
                        _this.destination = new SafeSubscriber(_this, destinationOrNext);
                    }
                    break;
                }
            default:
                _this.syncErrorThrowable = true;
                _this.destination = new SafeSubscriber(_this, destinationOrNext, error, complete);
                break;
        }
        return _this;
    }
    Subscriber.prototype[_internal_symbol_rxSubscriber__WEBPACK_IMPORTED_MODULE_4__["rxSubscriber"]] = function () { return this; };
    Subscriber.create = function (next, error, complete) {
        var subscriber = new Subscriber(next, error, complete);
        subscriber.syncErrorThrowable = false;
        return subscriber;
    };
    Subscriber.prototype.next = function (value) {
        if (!this.isStopped) {
            this._next(value);
        }
    };
    Subscriber.prototype.error = function (err) {
        if (!this.isStopped) {
            this.isStopped = true;
            this._error(err);
        }
    };
    Subscriber.prototype.complete = function () {
        if (!this.isStopped) {
            this.isStopped = true;
            this._complete();
        }
    };
    Subscriber.prototype.unsubscribe = function () {
        if (this.closed) {
            return;
        }
        this.isStopped = true;
        _super.prototype.unsubscribe.call(this);
    };
    Subscriber.prototype._next = function (value) {
        this.destination.next(value);
    };
    Subscriber.prototype._error = function (err) {
        this.destination.error(err);
        this.unsubscribe();
    };
    Subscriber.prototype._complete = function () {
        this.destination.complete();
        this.unsubscribe();
    };
    Subscriber.prototype._unsubscribeAndRecycle = function () {
        var _parentOrParents = this._parentOrParents;
        this._parentOrParents = null;
        this.unsubscribe();
        this.closed = false;
        this.isStopped = false;
        this._parentOrParents = _parentOrParents;
        return this;
    };
    return Subscriber;
}(_Subscription__WEBPACK_IMPORTED_MODULE_3__["Subscription"]));

var SafeSubscriber = /*@__PURE__*/ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](SafeSubscriber, _super);
    function SafeSubscriber(_parentSubscriber, observerOrNext, error, complete) {
        var _this = _super.call(this) || this;
        _this._parentSubscriber = _parentSubscriber;
        var next;
        var context = _this;
        if (Object(_util_isFunction__WEBPACK_IMPORTED_MODULE_1__["isFunction"])(observerOrNext)) {
            next = observerOrNext;
        }
        else if (observerOrNext) {
            next = observerOrNext.next;
            error = observerOrNext.error;
            complete = observerOrNext.complete;
            if (observerOrNext !== _Observer__WEBPACK_IMPORTED_MODULE_2__["empty"]) {
                context = Object.create(observerOrNext);
                if (Object(_util_isFunction__WEBPACK_IMPORTED_MODULE_1__["isFunction"])(context.unsubscribe)) {
                    _this.add(context.unsubscribe.bind(context));
                }
                context.unsubscribe = _this.unsubscribe.bind(_this);
            }
        }
        _this._context = context;
        _this._next = next;
        _this._error = error;
        _this._complete = complete;
        return _this;
    }
    SafeSubscriber.prototype.next = function (value) {
        if (!this.isStopped && this._next) {
            var _parentSubscriber = this._parentSubscriber;
            if (!_config__WEBPACK_IMPORTED_MODULE_5__["config"].useDeprecatedSynchronousErrorHandling || !_parentSubscriber.syncErrorThrowable) {
                this.__tryOrUnsub(this._next, value);
            }
            else if (this.__tryOrSetError(_parentSubscriber, this._next, value)) {
                this.unsubscribe();
            }
        }
    };
    SafeSubscriber.prototype.error = function (err) {
        if (!this.isStopped) {
            var _parentSubscriber = this._parentSubscriber;
            var useDeprecatedSynchronousErrorHandling = _config__WEBPACK_IMPORTED_MODULE_5__["config"].useDeprecatedSynchronousErrorHandling;
            if (this._error) {
                if (!useDeprecatedSynchronousErrorHandling || !_parentSubscriber.syncErrorThrowable) {
                    this.__tryOrUnsub(this._error, err);
                    this.unsubscribe();
                }
                else {
                    this.__tryOrSetError(_parentSubscriber, this._error, err);
                    this.unsubscribe();
                }
            }
            else if (!_parentSubscriber.syncErrorThrowable) {
                this.unsubscribe();
                if (useDeprecatedSynchronousErrorHandling) {
                    throw err;
                }
                Object(_util_hostReportError__WEBPACK_IMPORTED_MODULE_6__["hostReportError"])(err);
            }
            else {
                if (useDeprecatedSynchronousErrorHandling) {
                    _parentSubscriber.syncErrorValue = err;
                    _parentSubscriber.syncErrorThrown = true;
                }
                else {
                    Object(_util_hostReportError__WEBPACK_IMPORTED_MODULE_6__["hostReportError"])(err);
                }
                this.unsubscribe();
            }
        }
    };
    SafeSubscriber.prototype.complete = function () {
        var _this = this;
        if (!this.isStopped) {
            var _parentSubscriber = this._parentSubscriber;
            if (this._complete) {
                var wrappedComplete = function () { return _this._complete.call(_this._context); };
                if (!_config__WEBPACK_IMPORTED_MODULE_5__["config"].useDeprecatedSynchronousErrorHandling || !_parentSubscriber.syncErrorThrowable) {
                    this.__tryOrUnsub(wrappedComplete);
                    this.unsubscribe();
                }
                else {
                    this.__tryOrSetError(_parentSubscriber, wrappedComplete);
                    this.unsubscribe();
                }
            }
            else {
                this.unsubscribe();
            }
        }
    };
    SafeSubscriber.prototype.__tryOrUnsub = function (fn, value) {
        try {
            fn.call(this._context, value);
        }
        catch (err) {
            this.unsubscribe();
            if (_config__WEBPACK_IMPORTED_MODULE_5__["config"].useDeprecatedSynchronousErrorHandling) {
                throw err;
            }
            else {
                Object(_util_hostReportError__WEBPACK_IMPORTED_MODULE_6__["hostReportError"])(err);
            }
        }
    };
    SafeSubscriber.prototype.__tryOrSetError = function (parent, fn, value) {
        if (!_config__WEBPACK_IMPORTED_MODULE_5__["config"].useDeprecatedSynchronousErrorHandling) {
            throw new Error('bad call');
        }
        try {
            fn.call(this._context, value);
        }
        catch (err) {
            if (_config__WEBPACK_IMPORTED_MODULE_5__["config"].useDeprecatedSynchronousErrorHandling) {
                parent.syncErrorValue = err;
                parent.syncErrorThrown = true;
                return true;
            }
            else {
                Object(_util_hostReportError__WEBPACK_IMPORTED_MODULE_6__["hostReportError"])(err);
                return true;
            }
        }
        return false;
    };
    SafeSubscriber.prototype._unsubscribe = function () {
        var _parentSubscriber = this._parentSubscriber;
        this._context = null;
        this._parentSubscriber = null;
        _parentSubscriber.unsubscribe();
    };
    return SafeSubscriber;
}(Subscriber));

//# sourceMappingURL=Subscriber.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/Subscription.js":
/*!***********************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/Subscription.js ***!
  \***********************************************************/
/*! exports provided: Subscription */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Subscription", function() { return Subscription; });
/* harmony import */ var _util_isArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./util/isArray */ "../node_modules/rxjs/_esm5/internal/util/isArray.js");
/* harmony import */ var _util_isObject__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./util/isObject */ "../node_modules/rxjs/_esm5/internal/util/isObject.js");
/* harmony import */ var _util_isFunction__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./util/isFunction */ "../node_modules/rxjs/_esm5/internal/util/isFunction.js");
/* harmony import */ var _util_UnsubscriptionError__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./util/UnsubscriptionError */ "../node_modules/rxjs/_esm5/internal/util/UnsubscriptionError.js");
/** PURE_IMPORTS_START _util_isArray,_util_isObject,_util_isFunction,_util_UnsubscriptionError PURE_IMPORTS_END */




var Subscription = /*@__PURE__*/ (function () {
    function Subscription(unsubscribe) {
        this.closed = false;
        this._parentOrParents = null;
        this._subscriptions = null;
        if (unsubscribe) {
            this._ctorUnsubscribe = true;
            this._unsubscribe = unsubscribe;
        }
    }
    Subscription.prototype.unsubscribe = function () {
        var errors;
        if (this.closed) {
            return;
        }
        var _a = this, _parentOrParents = _a._parentOrParents, _ctorUnsubscribe = _a._ctorUnsubscribe, _unsubscribe = _a._unsubscribe, _subscriptions = _a._subscriptions;
        this.closed = true;
        this._parentOrParents = null;
        this._subscriptions = null;
        if (_parentOrParents instanceof Subscription) {
            _parentOrParents.remove(this);
        }
        else if (_parentOrParents !== null) {
            for (var index = 0; index < _parentOrParents.length; ++index) {
                var parent_1 = _parentOrParents[index];
                parent_1.remove(this);
            }
        }
        if (Object(_util_isFunction__WEBPACK_IMPORTED_MODULE_2__["isFunction"])(_unsubscribe)) {
            if (_ctorUnsubscribe) {
                this._unsubscribe = undefined;
            }
            try {
                _unsubscribe.call(this);
            }
            catch (e) {
                errors = e instanceof _util_UnsubscriptionError__WEBPACK_IMPORTED_MODULE_3__["UnsubscriptionError"] ? flattenUnsubscriptionErrors(e.errors) : [e];
            }
        }
        if (Object(_util_isArray__WEBPACK_IMPORTED_MODULE_0__["isArray"])(_subscriptions)) {
            var index = -1;
            var len = _subscriptions.length;
            while (++index < len) {
                var sub = _subscriptions[index];
                if (Object(_util_isObject__WEBPACK_IMPORTED_MODULE_1__["isObject"])(sub)) {
                    try {
                        sub.unsubscribe();
                    }
                    catch (e) {
                        errors = errors || [];
                        if (e instanceof _util_UnsubscriptionError__WEBPACK_IMPORTED_MODULE_3__["UnsubscriptionError"]) {
                            errors = errors.concat(flattenUnsubscriptionErrors(e.errors));
                        }
                        else {
                            errors.push(e);
                        }
                    }
                }
            }
        }
        if (errors) {
            throw new _util_UnsubscriptionError__WEBPACK_IMPORTED_MODULE_3__["UnsubscriptionError"](errors);
        }
    };
    Subscription.prototype.add = function (teardown) {
        var subscription = teardown;
        if (!teardown) {
            return Subscription.EMPTY;
        }
        switch (typeof teardown) {
            case 'function':
                subscription = new Subscription(teardown);
            case 'object':
                if (subscription === this || subscription.closed || typeof subscription.unsubscribe !== 'function') {
                    return subscription;
                }
                else if (this.closed) {
                    subscription.unsubscribe();
                    return subscription;
                }
                else if (!(subscription instanceof Subscription)) {
                    var tmp = subscription;
                    subscription = new Subscription();
                    subscription._subscriptions = [tmp];
                }
                break;
            default: {
                throw new Error('unrecognized teardown ' + teardown + ' added to Subscription.');
            }
        }
        var _parentOrParents = subscription._parentOrParents;
        if (_parentOrParents === null) {
            subscription._parentOrParents = this;
        }
        else if (_parentOrParents instanceof Subscription) {
            if (_parentOrParents === this) {
                return subscription;
            }
            subscription._parentOrParents = [_parentOrParents, this];
        }
        else if (_parentOrParents.indexOf(this) === -1) {
            _parentOrParents.push(this);
        }
        else {
            return subscription;
        }
        var subscriptions = this._subscriptions;
        if (subscriptions === null) {
            this._subscriptions = [subscription];
        }
        else {
            subscriptions.push(subscription);
        }
        return subscription;
    };
    Subscription.prototype.remove = function (subscription) {
        var subscriptions = this._subscriptions;
        if (subscriptions) {
            var subscriptionIndex = subscriptions.indexOf(subscription);
            if (subscriptionIndex !== -1) {
                subscriptions.splice(subscriptionIndex, 1);
            }
        }
    };
    Subscription.EMPTY = (function (empty) {
        empty.closed = true;
        return empty;
    }(new Subscription()));
    return Subscription;
}());

function flattenUnsubscriptionErrors(errors) {
    return errors.reduce(function (errs, err) { return errs.concat((err instanceof _util_UnsubscriptionError__WEBPACK_IMPORTED_MODULE_3__["UnsubscriptionError"]) ? err.errors : err); }, []);
}
//# sourceMappingURL=Subscription.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/config.js":
/*!*****************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/config.js ***!
  \*****************************************************/
/*! exports provided: config */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "config", function() { return config; });
/** PURE_IMPORTS_START  PURE_IMPORTS_END */
var _enable_super_gross_mode_that_will_cause_bad_things = false;
var config = {
    Promise: undefined,
    set useDeprecatedSynchronousErrorHandling(value) {
        if (value) {
            var error = /*@__PURE__*/ new Error();
            /*@__PURE__*/ console.warn('DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n' + error.stack);
        }
        else if (_enable_super_gross_mode_that_will_cause_bad_things) {
            /*@__PURE__*/ console.log('RxJS: Back to a better error behavior. Thank you. <3');
        }
        _enable_super_gross_mode_that_will_cause_bad_things = value;
    },
    get useDeprecatedSynchronousErrorHandling() {
        return _enable_super_gross_mode_that_will_cause_bad_things;
    },
};
//# sourceMappingURL=config.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/innerSubscribe.js":
/*!*************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/innerSubscribe.js ***!
  \*************************************************************/
/*! exports provided: SimpleInnerSubscriber, ComplexInnerSubscriber, SimpleOuterSubscriber, ComplexOuterSubscriber, innerSubscribe */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SimpleInnerSubscriber", function() { return SimpleInnerSubscriber; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ComplexInnerSubscriber", function() { return ComplexInnerSubscriber; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SimpleOuterSubscriber", function() { return SimpleOuterSubscriber; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ComplexOuterSubscriber", function() { return ComplexOuterSubscriber; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "innerSubscribe", function() { return innerSubscribe; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
/* harmony import */ var _Subscriber__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Subscriber */ "../node_modules/rxjs/_esm5/internal/Subscriber.js");
/* harmony import */ var _Observable__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Observable */ "../node_modules/rxjs/_esm5/internal/Observable.js");
/* harmony import */ var _util_subscribeTo__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./util/subscribeTo */ "../node_modules/rxjs/_esm5/internal/util/subscribeTo.js");
/** PURE_IMPORTS_START tslib,_Subscriber,_Observable,_util_subscribeTo PURE_IMPORTS_END */




var SimpleInnerSubscriber = /*@__PURE__*/ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](SimpleInnerSubscriber, _super);
    function SimpleInnerSubscriber(parent) {
        var _this = _super.call(this) || this;
        _this.parent = parent;
        return _this;
    }
    SimpleInnerSubscriber.prototype._next = function (value) {
        this.parent.notifyNext(value);
    };
    SimpleInnerSubscriber.prototype._error = function (error) {
        this.parent.notifyError(error);
        this.unsubscribe();
    };
    SimpleInnerSubscriber.prototype._complete = function () {
        this.parent.notifyComplete();
        this.unsubscribe();
    };
    return SimpleInnerSubscriber;
}(_Subscriber__WEBPACK_IMPORTED_MODULE_1__["Subscriber"]));

var ComplexInnerSubscriber = /*@__PURE__*/ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](ComplexInnerSubscriber, _super);
    function ComplexInnerSubscriber(parent, outerValue, outerIndex) {
        var _this = _super.call(this) || this;
        _this.parent = parent;
        _this.outerValue = outerValue;
        _this.outerIndex = outerIndex;
        return _this;
    }
    ComplexInnerSubscriber.prototype._next = function (value) {
        this.parent.notifyNext(this.outerValue, value, this.outerIndex, this);
    };
    ComplexInnerSubscriber.prototype._error = function (error) {
        this.parent.notifyError(error);
        this.unsubscribe();
    };
    ComplexInnerSubscriber.prototype._complete = function () {
        this.parent.notifyComplete(this);
        this.unsubscribe();
    };
    return ComplexInnerSubscriber;
}(_Subscriber__WEBPACK_IMPORTED_MODULE_1__["Subscriber"]));

var SimpleOuterSubscriber = /*@__PURE__*/ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](SimpleOuterSubscriber, _super);
    function SimpleOuterSubscriber() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    SimpleOuterSubscriber.prototype.notifyNext = function (innerValue) {
        this.destination.next(innerValue);
    };
    SimpleOuterSubscriber.prototype.notifyError = function (err) {
        this.destination.error(err);
    };
    SimpleOuterSubscriber.prototype.notifyComplete = function () {
        this.destination.complete();
    };
    return SimpleOuterSubscriber;
}(_Subscriber__WEBPACK_IMPORTED_MODULE_1__["Subscriber"]));

var ComplexOuterSubscriber = /*@__PURE__*/ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](ComplexOuterSubscriber, _super);
    function ComplexOuterSubscriber() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    ComplexOuterSubscriber.prototype.notifyNext = function (_outerValue, innerValue, _outerIndex, _innerSub) {
        this.destination.next(innerValue);
    };
    ComplexOuterSubscriber.prototype.notifyError = function (error) {
        this.destination.error(error);
    };
    ComplexOuterSubscriber.prototype.notifyComplete = function (_innerSub) {
        this.destination.complete();
    };
    return ComplexOuterSubscriber;
}(_Subscriber__WEBPACK_IMPORTED_MODULE_1__["Subscriber"]));

function innerSubscribe(result, innerSubscriber) {
    if (innerSubscriber.closed) {
        return undefined;
    }
    if (result instanceof _Observable__WEBPACK_IMPORTED_MODULE_2__["Observable"]) {
        return result.subscribe(innerSubscriber);
    }
    return Object(_util_subscribeTo__WEBPACK_IMPORTED_MODULE_3__["subscribeTo"])(result)(innerSubscriber);
}
//# sourceMappingURL=innerSubscribe.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/observable/ConnectableObservable.js":
/*!*******************************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/observable/ConnectableObservable.js ***!
  \*******************************************************************************/
/*! exports provided: ConnectableObservable, connectableObservableDescriptor */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ConnectableObservable", function() { return ConnectableObservable; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "connectableObservableDescriptor", function() { return connectableObservableDescriptor; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
/* harmony import */ var _Subject__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Subject */ "../node_modules/rxjs/_esm5/internal/Subject.js");
/* harmony import */ var _Observable__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../Observable */ "../node_modules/rxjs/_esm5/internal/Observable.js");
/* harmony import */ var _Subscriber__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../Subscriber */ "../node_modules/rxjs/_esm5/internal/Subscriber.js");
/* harmony import */ var _Subscription__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../Subscription */ "../node_modules/rxjs/_esm5/internal/Subscription.js");
/* harmony import */ var _operators_refCount__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../operators/refCount */ "../node_modules/rxjs/_esm5/internal/operators/refCount.js");
/** PURE_IMPORTS_START tslib,_Subject,_Observable,_Subscriber,_Subscription,_operators_refCount PURE_IMPORTS_END */






var ConnectableObservable = /*@__PURE__*/ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](ConnectableObservable, _super);
    function ConnectableObservable(source, subjectFactory) {
        var _this = _super.call(this) || this;
        _this.source = source;
        _this.subjectFactory = subjectFactory;
        _this._refCount = 0;
        _this._isComplete = false;
        return _this;
    }
    ConnectableObservable.prototype._subscribe = function (subscriber) {
        return this.getSubject().subscribe(subscriber);
    };
    ConnectableObservable.prototype.getSubject = function () {
        var subject = this._subject;
        if (!subject || subject.isStopped) {
            this._subject = this.subjectFactory();
        }
        return this._subject;
    };
    ConnectableObservable.prototype.connect = function () {
        var connection = this._connection;
        if (!connection) {
            this._isComplete = false;
            connection = this._connection = new _Subscription__WEBPACK_IMPORTED_MODULE_4__["Subscription"]();
            connection.add(this.source
                .subscribe(new ConnectableSubscriber(this.getSubject(), this)));
            if (connection.closed) {
                this._connection = null;
                connection = _Subscription__WEBPACK_IMPORTED_MODULE_4__["Subscription"].EMPTY;
            }
        }
        return connection;
    };
    ConnectableObservable.prototype.refCount = function () {
        return Object(_operators_refCount__WEBPACK_IMPORTED_MODULE_5__["refCount"])()(this);
    };
    return ConnectableObservable;
}(_Observable__WEBPACK_IMPORTED_MODULE_2__["Observable"]));

var connectableObservableDescriptor = /*@__PURE__*/ (function () {
    var connectableProto = ConnectableObservable.prototype;
    return {
        operator: { value: null },
        _refCount: { value: 0, writable: true },
        _subject: { value: null, writable: true },
        _connection: { value: null, writable: true },
        _subscribe: { value: connectableProto._subscribe },
        _isComplete: { value: connectableProto._isComplete, writable: true },
        getSubject: { value: connectableProto.getSubject },
        connect: { value: connectableProto.connect },
        refCount: { value: connectableProto.refCount }
    };
})();
var ConnectableSubscriber = /*@__PURE__*/ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](ConnectableSubscriber, _super);
    function ConnectableSubscriber(destination, connectable) {
        var _this = _super.call(this, destination) || this;
        _this.connectable = connectable;
        return _this;
    }
    ConnectableSubscriber.prototype._error = function (err) {
        this._unsubscribe();
        _super.prototype._error.call(this, err);
    };
    ConnectableSubscriber.prototype._complete = function () {
        this.connectable._isComplete = true;
        this._unsubscribe();
        _super.prototype._complete.call(this);
    };
    ConnectableSubscriber.prototype._unsubscribe = function () {
        var connectable = this.connectable;
        if (connectable) {
            this.connectable = null;
            var connection = connectable._connection;
            connectable._refCount = 0;
            connectable._subject = null;
            connectable._connection = null;
            if (connection) {
                connection.unsubscribe();
            }
        }
    };
    return ConnectableSubscriber;
}(_Subject__WEBPACK_IMPORTED_MODULE_1__["SubjectSubscriber"]));
var RefCountOperator = /*@__PURE__*/ (function () {
    function RefCountOperator(connectable) {
        this.connectable = connectable;
    }
    RefCountOperator.prototype.call = function (subscriber, source) {
        var connectable = this.connectable;
        connectable._refCount++;
        var refCounter = new RefCountSubscriber(subscriber, connectable);
        var subscription = source.subscribe(refCounter);
        if (!refCounter.closed) {
            refCounter.connection = connectable.connect();
        }
        return subscription;
    };
    return RefCountOperator;
}());
var RefCountSubscriber = /*@__PURE__*/ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](RefCountSubscriber, _super);
    function RefCountSubscriber(destination, connectable) {
        var _this = _super.call(this, destination) || this;
        _this.connectable = connectable;
        return _this;
    }
    RefCountSubscriber.prototype._unsubscribe = function () {
        var connectable = this.connectable;
        if (!connectable) {
            this.connection = null;
            return;
        }
        this.connectable = null;
        var refCount = connectable._refCount;
        if (refCount <= 0) {
            this.connection = null;
            return;
        }
        connectable._refCount = refCount - 1;
        if (refCount > 1) {
            this.connection = null;
            return;
        }
        var connection = this.connection;
        var sharedConnection = connectable._connection;
        this.connection = null;
        if (sharedConnection && (!connection || sharedConnection === connection)) {
            sharedConnection.unsubscribe();
        }
    };
    return RefCountSubscriber;
}(_Subscriber__WEBPACK_IMPORTED_MODULE_3__["Subscriber"]));
//# sourceMappingURL=ConnectableObservable.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/observable/SubscribeOnObservable.js":
/*!*******************************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/observable/SubscribeOnObservable.js ***!
  \*******************************************************************************/
/*! exports provided: SubscribeOnObservable */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SubscribeOnObservable", function() { return SubscribeOnObservable; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
/* harmony import */ var _Observable__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Observable */ "../node_modules/rxjs/_esm5/internal/Observable.js");
/* harmony import */ var _scheduler_asap__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../scheduler/asap */ "../node_modules/rxjs/_esm5/internal/scheduler/asap.js");
/* harmony import */ var _util_isNumeric__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../util/isNumeric */ "../node_modules/rxjs/_esm5/internal/util/isNumeric.js");
/** PURE_IMPORTS_START tslib,_Observable,_scheduler_asap,_util_isNumeric PURE_IMPORTS_END */




var SubscribeOnObservable = /*@__PURE__*/ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](SubscribeOnObservable, _super);
    function SubscribeOnObservable(source, delayTime, scheduler) {
        if (delayTime === void 0) {
            delayTime = 0;
        }
        if (scheduler === void 0) {
            scheduler = _scheduler_asap__WEBPACK_IMPORTED_MODULE_2__["asap"];
        }
        var _this = _super.call(this) || this;
        _this.source = source;
        _this.delayTime = delayTime;
        _this.scheduler = scheduler;
        if (!Object(_util_isNumeric__WEBPACK_IMPORTED_MODULE_3__["isNumeric"])(delayTime) || delayTime < 0) {
            _this.delayTime = 0;
        }
        if (!scheduler || typeof scheduler.schedule !== 'function') {
            _this.scheduler = _scheduler_asap__WEBPACK_IMPORTED_MODULE_2__["asap"];
        }
        return _this;
    }
    SubscribeOnObservable.create = function (source, delay, scheduler) {
        if (delay === void 0) {
            delay = 0;
        }
        if (scheduler === void 0) {
            scheduler = _scheduler_asap__WEBPACK_IMPORTED_MODULE_2__["asap"];
        }
        return new SubscribeOnObservable(source, delay, scheduler);
    };
    SubscribeOnObservable.dispatch = function (arg) {
        var source = arg.source, subscriber = arg.subscriber;
        return this.add(source.subscribe(subscriber));
    };
    SubscribeOnObservable.prototype._subscribe = function (subscriber) {
        var delay = this.delayTime;
        var source = this.source;
        var scheduler = this.scheduler;
        return scheduler.schedule(SubscribeOnObservable.dispatch, delay, {
            source: source, subscriber: subscriber
        });
    };
    return SubscribeOnObservable;
}(_Observable__WEBPACK_IMPORTED_MODULE_1__["Observable"]));

//# sourceMappingURL=SubscribeOnObservable.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/observable/combineLatest.js":
/*!***********************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/observable/combineLatest.js ***!
  \***********************************************************************/
/*! exports provided: combineLatest, CombineLatestOperator, CombineLatestSubscriber */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "combineLatest", function() { return combineLatest; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CombineLatestOperator", function() { return CombineLatestOperator; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CombineLatestSubscriber", function() { return CombineLatestSubscriber; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
/* harmony import */ var _util_isScheduler__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../util/isScheduler */ "../node_modules/rxjs/_esm5/internal/util/isScheduler.js");
/* harmony import */ var _util_isArray__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../util/isArray */ "../node_modules/rxjs/_esm5/internal/util/isArray.js");
/* harmony import */ var _OuterSubscriber__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../OuterSubscriber */ "../node_modules/rxjs/_esm5/internal/OuterSubscriber.js");
/* harmony import */ var _util_subscribeToResult__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../util/subscribeToResult */ "../node_modules/rxjs/_esm5/internal/util/subscribeToResult.js");
/* harmony import */ var _fromArray__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./fromArray */ "../node_modules/rxjs/_esm5/internal/observable/fromArray.js");
/** PURE_IMPORTS_START tslib,_util_isScheduler,_util_isArray,_OuterSubscriber,_util_subscribeToResult,_fromArray PURE_IMPORTS_END */






var NONE = {};
function combineLatest() {
    var observables = [];
    for (var _i = 0; _i < arguments.length; _i++) {
        observables[_i] = arguments[_i];
    }
    var resultSelector = undefined;
    var scheduler = undefined;
    if (Object(_util_isScheduler__WEBPACK_IMPORTED_MODULE_1__["isScheduler"])(observables[observables.length - 1])) {
        scheduler = observables.pop();
    }
    if (typeof observables[observables.length - 1] === 'function') {
        resultSelector = observables.pop();
    }
    if (observables.length === 1 && Object(_util_isArray__WEBPACK_IMPORTED_MODULE_2__["isArray"])(observables[0])) {
        observables = observables[0];
    }
    return Object(_fromArray__WEBPACK_IMPORTED_MODULE_5__["fromArray"])(observables, scheduler).lift(new CombineLatestOperator(resultSelector));
}
var CombineLatestOperator = /*@__PURE__*/ (function () {
    function CombineLatestOperator(resultSelector) {
        this.resultSelector = resultSelector;
    }
    CombineLatestOperator.prototype.call = function (subscriber, source) {
        return source.subscribe(new CombineLatestSubscriber(subscriber, this.resultSelector));
    };
    return CombineLatestOperator;
}());

var CombineLatestSubscriber = /*@__PURE__*/ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](CombineLatestSubscriber, _super);
    function CombineLatestSubscriber(destination, resultSelector) {
        var _this = _super.call(this, destination) || this;
        _this.resultSelector = resultSelector;
        _this.active = 0;
        _this.values = [];
        _this.observables = [];
        return _this;
    }
    CombineLatestSubscriber.prototype._next = function (observable) {
        this.values.push(NONE);
        this.observables.push(observable);
    };
    CombineLatestSubscriber.prototype._complete = function () {
        var observables = this.observables;
        var len = observables.length;
        if (len === 0) {
            this.destination.complete();
        }
        else {
            this.active = len;
            this.toRespond = len;
            for (var i = 0; i < len; i++) {
                var observable = observables[i];
                this.add(Object(_util_subscribeToResult__WEBPACK_IMPORTED_MODULE_4__["subscribeToResult"])(this, observable, undefined, i));
            }
        }
    };
    CombineLatestSubscriber.prototype.notifyComplete = function (unused) {
        if ((this.active -= 1) === 0) {
            this.destination.complete();
        }
    };
    CombineLatestSubscriber.prototype.notifyNext = function (_outerValue, innerValue, outerIndex) {
        var values = this.values;
        var oldVal = values[outerIndex];
        var toRespond = !this.toRespond
            ? 0
            : oldVal === NONE ? --this.toRespond : this.toRespond;
        values[outerIndex] = innerValue;
        if (toRespond === 0) {
            if (this.resultSelector) {
                this._tryResultSelector(values);
            }
            else {
                this.destination.next(values.slice());
            }
        }
    };
    CombineLatestSubscriber.prototype._tryResultSelector = function (values) {
        var result;
        try {
            result = this.resultSelector.apply(this, values);
        }
        catch (err) {
            this.destination.error(err);
            return;
        }
        this.destination.next(result);
    };
    return CombineLatestSubscriber;
}(_OuterSubscriber__WEBPACK_IMPORTED_MODULE_3__["OuterSubscriber"]));

//# sourceMappingURL=combineLatest.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/observable/concat.js":
/*!****************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/observable/concat.js ***!
  \****************************************************************/
/*! exports provided: concat */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "concat", function() { return concat; });
/* harmony import */ var _of__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./of */ "../node_modules/rxjs/_esm5/internal/observable/of.js");
/* harmony import */ var _operators_concatAll__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../operators/concatAll */ "../node_modules/rxjs/_esm5/internal/operators/concatAll.js");
/** PURE_IMPORTS_START _of,_operators_concatAll PURE_IMPORTS_END */


function concat() {
    var observables = [];
    for (var _i = 0; _i < arguments.length; _i++) {
        observables[_i] = arguments[_i];
    }
    return Object(_operators_concatAll__WEBPACK_IMPORTED_MODULE_1__["concatAll"])()(_of__WEBPACK_IMPORTED_MODULE_0__["of"].apply(void 0, observables));
}
//# sourceMappingURL=concat.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/observable/defer.js":
/*!***************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/observable/defer.js ***!
  \***************************************************************/
/*! exports provided: defer */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "defer", function() { return defer; });
/* harmony import */ var _Observable__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Observable */ "../node_modules/rxjs/_esm5/internal/Observable.js");
/* harmony import */ var _from__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./from */ "../node_modules/rxjs/_esm5/internal/observable/from.js");
/* harmony import */ var _empty__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./empty */ "../node_modules/rxjs/_esm5/internal/observable/empty.js");
/** PURE_IMPORTS_START _Observable,_from,_empty PURE_IMPORTS_END */



function defer(observableFactory) {
    return new _Observable__WEBPACK_IMPORTED_MODULE_0__["Observable"](function (subscriber) {
        var input;
        try {
            input = observableFactory();
        }
        catch (err) {
            subscriber.error(err);
            return undefined;
        }
        var source = input ? Object(_from__WEBPACK_IMPORTED_MODULE_1__["from"])(input) : Object(_empty__WEBPACK_IMPORTED_MODULE_2__["empty"])();
        return source.subscribe(subscriber);
    });
}
//# sourceMappingURL=defer.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/observable/empty.js":
/*!***************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/observable/empty.js ***!
  \***************************************************************/
/*! exports provided: EMPTY, empty */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EMPTY", function() { return EMPTY; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "empty", function() { return empty; });
/* harmony import */ var _Observable__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Observable */ "../node_modules/rxjs/_esm5/internal/Observable.js");
/** PURE_IMPORTS_START _Observable PURE_IMPORTS_END */

var EMPTY = /*@__PURE__*/ new _Observable__WEBPACK_IMPORTED_MODULE_0__["Observable"](function (subscriber) { return subscriber.complete(); });
function empty(scheduler) {
    return scheduler ? emptyScheduled(scheduler) : EMPTY;
}
function emptyScheduled(scheduler) {
    return new _Observable__WEBPACK_IMPORTED_MODULE_0__["Observable"](function (subscriber) { return scheduler.schedule(function () { return subscriber.complete(); }); });
}
//# sourceMappingURL=empty.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/observable/from.js":
/*!**************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/observable/from.js ***!
  \**************************************************************/
/*! exports provided: from */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "from", function() { return from; });
/* harmony import */ var _Observable__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Observable */ "../node_modules/rxjs/_esm5/internal/Observable.js");
/* harmony import */ var _util_subscribeTo__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../util/subscribeTo */ "../node_modules/rxjs/_esm5/internal/util/subscribeTo.js");
/* harmony import */ var _scheduled_scheduled__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../scheduled/scheduled */ "../node_modules/rxjs/_esm5/internal/scheduled/scheduled.js");
/** PURE_IMPORTS_START _Observable,_util_subscribeTo,_scheduled_scheduled PURE_IMPORTS_END */



function from(input, scheduler) {
    if (!scheduler) {
        if (input instanceof _Observable__WEBPACK_IMPORTED_MODULE_0__["Observable"]) {
            return input;
        }
        return new _Observable__WEBPACK_IMPORTED_MODULE_0__["Observable"](Object(_util_subscribeTo__WEBPACK_IMPORTED_MODULE_1__["subscribeTo"])(input));
    }
    else {
        return Object(_scheduled_scheduled__WEBPACK_IMPORTED_MODULE_2__["scheduled"])(input, scheduler);
    }
}
//# sourceMappingURL=from.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/observable/fromArray.js":
/*!*******************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/observable/fromArray.js ***!
  \*******************************************************************/
/*! exports provided: fromArray */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "fromArray", function() { return fromArray; });
/* harmony import */ var _Observable__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Observable */ "../node_modules/rxjs/_esm5/internal/Observable.js");
/* harmony import */ var _util_subscribeToArray__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../util/subscribeToArray */ "../node_modules/rxjs/_esm5/internal/util/subscribeToArray.js");
/* harmony import */ var _scheduled_scheduleArray__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../scheduled/scheduleArray */ "../node_modules/rxjs/_esm5/internal/scheduled/scheduleArray.js");
/** PURE_IMPORTS_START _Observable,_util_subscribeToArray,_scheduled_scheduleArray PURE_IMPORTS_END */



function fromArray(input, scheduler) {
    if (!scheduler) {
        return new _Observable__WEBPACK_IMPORTED_MODULE_0__["Observable"](Object(_util_subscribeToArray__WEBPACK_IMPORTED_MODULE_1__["subscribeToArray"])(input));
    }
    else {
        return Object(_scheduled_scheduleArray__WEBPACK_IMPORTED_MODULE_2__["scheduleArray"])(input, scheduler);
    }
}
//# sourceMappingURL=fromArray.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/observable/merge.js":
/*!***************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/observable/merge.js ***!
  \***************************************************************/
/*! exports provided: merge */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "merge", function() { return merge; });
/* harmony import */ var _Observable__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Observable */ "../node_modules/rxjs/_esm5/internal/Observable.js");
/* harmony import */ var _util_isScheduler__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../util/isScheduler */ "../node_modules/rxjs/_esm5/internal/util/isScheduler.js");
/* harmony import */ var _operators_mergeAll__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../operators/mergeAll */ "../node_modules/rxjs/_esm5/internal/operators/mergeAll.js");
/* harmony import */ var _fromArray__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./fromArray */ "../node_modules/rxjs/_esm5/internal/observable/fromArray.js");
/** PURE_IMPORTS_START _Observable,_util_isScheduler,_operators_mergeAll,_fromArray PURE_IMPORTS_END */




function merge() {
    var observables = [];
    for (var _i = 0; _i < arguments.length; _i++) {
        observables[_i] = arguments[_i];
    }
    var concurrent = Number.POSITIVE_INFINITY;
    var scheduler = null;
    var last = observables[observables.length - 1];
    if (Object(_util_isScheduler__WEBPACK_IMPORTED_MODULE_1__["isScheduler"])(last)) {
        scheduler = observables.pop();
        if (observables.length > 1 && typeof observables[observables.length - 1] === 'number') {
            concurrent = observables.pop();
        }
    }
    else if (typeof last === 'number') {
        concurrent = observables.pop();
    }
    if (scheduler === null && observables.length === 1 && observables[0] instanceof _Observable__WEBPACK_IMPORTED_MODULE_0__["Observable"]) {
        return observables[0];
    }
    return Object(_operators_mergeAll__WEBPACK_IMPORTED_MODULE_2__["mergeAll"])(concurrent)(Object(_fromArray__WEBPACK_IMPORTED_MODULE_3__["fromArray"])(observables, scheduler));
}
//# sourceMappingURL=merge.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/observable/of.js":
/*!************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/observable/of.js ***!
  \************************************************************/
/*! exports provided: of */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "of", function() { return of; });
/* harmony import */ var _util_isScheduler__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../util/isScheduler */ "../node_modules/rxjs/_esm5/internal/util/isScheduler.js");
/* harmony import */ var _fromArray__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./fromArray */ "../node_modules/rxjs/_esm5/internal/observable/fromArray.js");
/* harmony import */ var _scheduled_scheduleArray__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../scheduled/scheduleArray */ "../node_modules/rxjs/_esm5/internal/scheduled/scheduleArray.js");
/** PURE_IMPORTS_START _util_isScheduler,_fromArray,_scheduled_scheduleArray PURE_IMPORTS_END */



function of() {
    var args = [];
    for (var _i = 0; _i < arguments.length; _i++) {
        args[_i] = arguments[_i];
    }
    var scheduler = args[args.length - 1];
    if (Object(_util_isScheduler__WEBPACK_IMPORTED_MODULE_0__["isScheduler"])(scheduler)) {
        args.pop();
        return Object(_scheduled_scheduleArray__WEBPACK_IMPORTED_MODULE_2__["scheduleArray"])(args, scheduler);
    }
    else {
        return Object(_fromArray__WEBPACK_IMPORTED_MODULE_1__["fromArray"])(args);
    }
}
//# sourceMappingURL=of.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/observable/race.js":
/*!**************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/observable/race.js ***!
  \**************************************************************/
/*! exports provided: race, RaceOperator, RaceSubscriber */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "race", function() { return race; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RaceOperator", function() { return RaceOperator; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RaceSubscriber", function() { return RaceSubscriber; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
/* harmony import */ var _util_isArray__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../util/isArray */ "../node_modules/rxjs/_esm5/internal/util/isArray.js");
/* harmony import */ var _fromArray__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./fromArray */ "../node_modules/rxjs/_esm5/internal/observable/fromArray.js");
/* harmony import */ var _OuterSubscriber__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../OuterSubscriber */ "../node_modules/rxjs/_esm5/internal/OuterSubscriber.js");
/* harmony import */ var _util_subscribeToResult__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../util/subscribeToResult */ "../node_modules/rxjs/_esm5/internal/util/subscribeToResult.js");
/** PURE_IMPORTS_START tslib,_util_isArray,_fromArray,_OuterSubscriber,_util_subscribeToResult PURE_IMPORTS_END */





function race() {
    var observables = [];
    for (var _i = 0; _i < arguments.length; _i++) {
        observables[_i] = arguments[_i];
    }
    if (observables.length === 1) {
        if (Object(_util_isArray__WEBPACK_IMPORTED_MODULE_1__["isArray"])(observables[0])) {
            observables = observables[0];
        }
        else {
            return observables[0];
        }
    }
    return Object(_fromArray__WEBPACK_IMPORTED_MODULE_2__["fromArray"])(observables, undefined).lift(new RaceOperator());
}
var RaceOperator = /*@__PURE__*/ (function () {
    function RaceOperator() {
    }
    RaceOperator.prototype.call = function (subscriber, source) {
        return source.subscribe(new RaceSubscriber(subscriber));
    };
    return RaceOperator;
}());

var RaceSubscriber = /*@__PURE__*/ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](RaceSubscriber, _super);
    function RaceSubscriber(destination) {
        var _this = _super.call(this, destination) || this;
        _this.hasFirst = false;
        _this.observables = [];
        _this.subscriptions = [];
        return _this;
    }
    RaceSubscriber.prototype._next = function (observable) {
        this.observables.push(observable);
    };
    RaceSubscriber.prototype._complete = function () {
        var observables = this.observables;
        var len = observables.length;
        if (len === 0) {
            this.destination.complete();
        }
        else {
            for (var i = 0; i < len && !this.hasFirst; i++) {
                var observable = observables[i];
                var subscription = Object(_util_subscribeToResult__WEBPACK_IMPORTED_MODULE_4__["subscribeToResult"])(this, observable, undefined, i);
                if (this.subscriptions) {
                    this.subscriptions.push(subscription);
                }
                this.add(subscription);
            }
            this.observables = null;
        }
    };
    RaceSubscriber.prototype.notifyNext = function (_outerValue, innerValue, outerIndex) {
        if (!this.hasFirst) {
            this.hasFirst = true;
            for (var i = 0; i < this.subscriptions.length; i++) {
                if (i !== outerIndex) {
                    var subscription = this.subscriptions[i];
                    subscription.unsubscribe();
                    this.remove(subscription);
                }
            }
            this.subscriptions = null;
        }
        this.destination.next(innerValue);
    };
    return RaceSubscriber;
}(_OuterSubscriber__WEBPACK_IMPORTED_MODULE_3__["OuterSubscriber"]));

//# sourceMappingURL=race.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/observable/throwError.js":
/*!********************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/observable/throwError.js ***!
  \********************************************************************/
/*! exports provided: throwError */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "throwError", function() { return throwError; });
/* harmony import */ var _Observable__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Observable */ "../node_modules/rxjs/_esm5/internal/Observable.js");
/** PURE_IMPORTS_START _Observable PURE_IMPORTS_END */

function throwError(error, scheduler) {
    if (!scheduler) {
        return new _Observable__WEBPACK_IMPORTED_MODULE_0__["Observable"](function (subscriber) { return subscriber.error(error); });
    }
    else {
        return new _Observable__WEBPACK_IMPORTED_MODULE_0__["Observable"](function (subscriber) { return scheduler.schedule(dispatch, 0, { error: error, subscriber: subscriber }); });
    }
}
function dispatch(_a) {
    var error = _a.error, subscriber = _a.subscriber;
    subscriber.error(error);
}
//# sourceMappingURL=throwError.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/observable/timer.js":
/*!***************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/observable/timer.js ***!
  \***************************************************************/
/*! exports provided: timer */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "timer", function() { return timer; });
/* harmony import */ var _Observable__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Observable */ "../node_modules/rxjs/_esm5/internal/Observable.js");
/* harmony import */ var _scheduler_async__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../scheduler/async */ "../node_modules/rxjs/_esm5/internal/scheduler/async.js");
/* harmony import */ var _util_isNumeric__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../util/isNumeric */ "../node_modules/rxjs/_esm5/internal/util/isNumeric.js");
/* harmony import */ var _util_isScheduler__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../util/isScheduler */ "../node_modules/rxjs/_esm5/internal/util/isScheduler.js");
/** PURE_IMPORTS_START _Observable,_scheduler_async,_util_isNumeric,_util_isScheduler PURE_IMPORTS_END */




function timer(dueTime, periodOrScheduler, scheduler) {
    if (dueTime === void 0) {
        dueTime = 0;
    }
    var period = -1;
    if (Object(_util_isNumeric__WEBPACK_IMPORTED_MODULE_2__["isNumeric"])(periodOrScheduler)) {
        period = Number(periodOrScheduler) < 1 && 1 || Number(periodOrScheduler);
    }
    else if (Object(_util_isScheduler__WEBPACK_IMPORTED_MODULE_3__["isScheduler"])(periodOrScheduler)) {
        scheduler = periodOrScheduler;
    }
    if (!Object(_util_isScheduler__WEBPACK_IMPORTED_MODULE_3__["isScheduler"])(scheduler)) {
        scheduler = _scheduler_async__WEBPACK_IMPORTED_MODULE_1__["async"];
    }
    return new _Observable__WEBPACK_IMPORTED_MODULE_0__["Observable"](function (subscriber) {
        var due = Object(_util_isNumeric__WEBPACK_IMPORTED_MODULE_2__["isNumeric"])(dueTime)
            ? dueTime
            : (+dueTime - scheduler.now());
        return scheduler.schedule(dispatch, due, {
            index: 0, period: period, subscriber: subscriber
        });
    });
}
function dispatch(state) {
    var index = state.index, period = state.period, subscriber = state.subscriber;
    subscriber.next(index);
    if (subscriber.closed) {
        return;
    }
    else if (period === -1) {
        return subscriber.complete();
    }
    state.index = index + 1;
    this.schedule(state, period);
}
//# sourceMappingURL=timer.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/observable/zip.js":
/*!*************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/observable/zip.js ***!
  \*************************************************************/
/*! exports provided: zip, ZipOperator, ZipSubscriber */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "zip", function() { return zip; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ZipOperator", function() { return ZipOperator; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ZipSubscriber", function() { return ZipSubscriber; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
/* harmony import */ var _fromArray__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./fromArray */ "../node_modules/rxjs/_esm5/internal/observable/fromArray.js");
/* harmony import */ var _util_isArray__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../util/isArray */ "../node_modules/rxjs/_esm5/internal/util/isArray.js");
/* harmony import */ var _Subscriber__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../Subscriber */ "../node_modules/rxjs/_esm5/internal/Subscriber.js");
/* harmony import */ var _internal_symbol_iterator__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../internal/symbol/iterator */ "../node_modules/rxjs/_esm5/internal/symbol/iterator.js");
/* harmony import */ var _innerSubscribe__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../innerSubscribe */ "../node_modules/rxjs/_esm5/internal/innerSubscribe.js");
/** PURE_IMPORTS_START tslib,_fromArray,_util_isArray,_Subscriber,_.._internal_symbol_iterator,_innerSubscribe PURE_IMPORTS_END */






function zip() {
    var observables = [];
    for (var _i = 0; _i < arguments.length; _i++) {
        observables[_i] = arguments[_i];
    }
    var resultSelector = observables[observables.length - 1];
    if (typeof resultSelector === 'function') {
        observables.pop();
    }
    return Object(_fromArray__WEBPACK_IMPORTED_MODULE_1__["fromArray"])(observables, undefined).lift(new ZipOperator(resultSelector));
}
var ZipOperator = /*@__PURE__*/ (function () {
    function ZipOperator(resultSelector) {
        this.resultSelector = resultSelector;
    }
    ZipOperator.prototype.call = function (subscriber, source) {
        return source.subscribe(new ZipSubscriber(subscriber, this.resultSelector));
    };
    return ZipOperator;
}());

var ZipSubscriber = /*@__PURE__*/ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](ZipSubscriber, _super);
    function ZipSubscriber(destination, resultSelector, values) {
        if (values === void 0) {
            values = Object.create(null);
        }
        var _this = _super.call(this, destination) || this;
        _this.resultSelector = resultSelector;
        _this.iterators = [];
        _this.active = 0;
        _this.resultSelector = (typeof resultSelector === 'function') ? resultSelector : undefined;
        return _this;
    }
    ZipSubscriber.prototype._next = function (value) {
        var iterators = this.iterators;
        if (Object(_util_isArray__WEBPACK_IMPORTED_MODULE_2__["isArray"])(value)) {
            iterators.push(new StaticArrayIterator(value));
        }
        else if (typeof value[_internal_symbol_iterator__WEBPACK_IMPORTED_MODULE_4__["iterator"]] === 'function') {
            iterators.push(new StaticIterator(value[_internal_symbol_iterator__WEBPACK_IMPORTED_MODULE_4__["iterator"]]()));
        }
        else {
            iterators.push(new ZipBufferIterator(this.destination, this, value));
        }
    };
    ZipSubscriber.prototype._complete = function () {
        var iterators = this.iterators;
        var len = iterators.length;
        this.unsubscribe();
        if (len === 0) {
            this.destination.complete();
            return;
        }
        this.active = len;
        for (var i = 0; i < len; i++) {
            var iterator = iterators[i];
            if (iterator.stillUnsubscribed) {
                var destination = this.destination;
                destination.add(iterator.subscribe());
            }
            else {
                this.active--;
            }
        }
    };
    ZipSubscriber.prototype.notifyInactive = function () {
        this.active--;
        if (this.active === 0) {
            this.destination.complete();
        }
    };
    ZipSubscriber.prototype.checkIterators = function () {
        var iterators = this.iterators;
        var len = iterators.length;
        var destination = this.destination;
        for (var i = 0; i < len; i++) {
            var iterator = iterators[i];
            if (typeof iterator.hasValue === 'function' && !iterator.hasValue()) {
                return;
            }
        }
        var shouldComplete = false;
        var args = [];
        for (var i = 0; i < len; i++) {
            var iterator = iterators[i];
            var result = iterator.next();
            if (iterator.hasCompleted()) {
                shouldComplete = true;
            }
            if (result.done) {
                destination.complete();
                return;
            }
            args.push(result.value);
        }
        if (this.resultSelector) {
            this._tryresultSelector(args);
        }
        else {
            destination.next(args);
        }
        if (shouldComplete) {
            destination.complete();
        }
    };
    ZipSubscriber.prototype._tryresultSelector = function (args) {
        var result;
        try {
            result = this.resultSelector.apply(this, args);
        }
        catch (err) {
            this.destination.error(err);
            return;
        }
        this.destination.next(result);
    };
    return ZipSubscriber;
}(_Subscriber__WEBPACK_IMPORTED_MODULE_3__["Subscriber"]));

var StaticIterator = /*@__PURE__*/ (function () {
    function StaticIterator(iterator) {
        this.iterator = iterator;
        this.nextResult = iterator.next();
    }
    StaticIterator.prototype.hasValue = function () {
        return true;
    };
    StaticIterator.prototype.next = function () {
        var result = this.nextResult;
        this.nextResult = this.iterator.next();
        return result;
    };
    StaticIterator.prototype.hasCompleted = function () {
        var nextResult = this.nextResult;
        return Boolean(nextResult && nextResult.done);
    };
    return StaticIterator;
}());
var StaticArrayIterator = /*@__PURE__*/ (function () {
    function StaticArrayIterator(array) {
        this.array = array;
        this.index = 0;
        this.length = 0;
        this.length = array.length;
    }
    StaticArrayIterator.prototype[_internal_symbol_iterator__WEBPACK_IMPORTED_MODULE_4__["iterator"]] = function () {
        return this;
    };
    StaticArrayIterator.prototype.next = function (value) {
        var i = this.index++;
        var array = this.array;
        return i < this.length ? { value: array[i], done: false } : { value: null, done: true };
    };
    StaticArrayIterator.prototype.hasValue = function () {
        return this.array.length > this.index;
    };
    StaticArrayIterator.prototype.hasCompleted = function () {
        return this.array.length === this.index;
    };
    return StaticArrayIterator;
}());
var ZipBufferIterator = /*@__PURE__*/ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](ZipBufferIterator, _super);
    function ZipBufferIterator(destination, parent, observable) {
        var _this = _super.call(this, destination) || this;
        _this.parent = parent;
        _this.observable = observable;
        _this.stillUnsubscribed = true;
        _this.buffer = [];
        _this.isComplete = false;
        return _this;
    }
    ZipBufferIterator.prototype[_internal_symbol_iterator__WEBPACK_IMPORTED_MODULE_4__["iterator"]] = function () {
        return this;
    };
    ZipBufferIterator.prototype.next = function () {
        var buffer = this.buffer;
        if (buffer.length === 0 && this.isComplete) {
            return { value: null, done: true };
        }
        else {
            return { value: buffer.shift(), done: false };
        }
    };
    ZipBufferIterator.prototype.hasValue = function () {
        return this.buffer.length > 0;
    };
    ZipBufferIterator.prototype.hasCompleted = function () {
        return this.buffer.length === 0 && this.isComplete;
    };
    ZipBufferIterator.prototype.notifyComplete = function () {
        if (this.buffer.length > 0) {
            this.isComplete = true;
            this.parent.notifyInactive();
        }
        else {
            this.destination.complete();
        }
    };
    ZipBufferIterator.prototype.notifyNext = function (innerValue) {
        this.buffer.push(innerValue);
        this.parent.checkIterators();
    };
    ZipBufferIterator.prototype.subscribe = function () {
        return Object(_innerSubscribe__WEBPACK_IMPORTED_MODULE_5__["innerSubscribe"])(this.observable, new _innerSubscribe__WEBPACK_IMPORTED_MODULE_5__["SimpleInnerSubscriber"](this));
    };
    return ZipBufferIterator;
}(_innerSubscribe__WEBPACK_IMPORTED_MODULE_5__["SimpleOuterSubscriber"]));
//# sourceMappingURL=zip.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/operators/audit.js":
/*!**************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/operators/audit.js ***!
  \**************************************************************/
/*! exports provided: audit */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "audit", function() { return audit; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
/* harmony import */ var _innerSubscribe__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../innerSubscribe */ "../node_modules/rxjs/_esm5/internal/innerSubscribe.js");
/** PURE_IMPORTS_START tslib,_innerSubscribe PURE_IMPORTS_END */


function audit(durationSelector) {
    return function auditOperatorFunction(source) {
        return source.lift(new AuditOperator(durationSelector));
    };
}
var AuditOperator = /*@__PURE__*/ (function () {
    function AuditOperator(durationSelector) {
        this.durationSelector = durationSelector;
    }
    AuditOperator.prototype.call = function (subscriber, source) {
        return source.subscribe(new AuditSubscriber(subscriber, this.durationSelector));
    };
    return AuditOperator;
}());
var AuditSubscriber = /*@__PURE__*/ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](AuditSubscriber, _super);
    function AuditSubscriber(destination, durationSelector) {
        var _this = _super.call(this, destination) || this;
        _this.durationSelector = durationSelector;
        _this.hasValue = false;
        return _this;
    }
    AuditSubscriber.prototype._next = function (value) {
        this.value = value;
        this.hasValue = true;
        if (!this.throttled) {
            var duration = void 0;
            try {
                var durationSelector = this.durationSelector;
                duration = durationSelector(value);
            }
            catch (err) {
                return this.destination.error(err);
            }
            var innerSubscription = Object(_innerSubscribe__WEBPACK_IMPORTED_MODULE_1__["innerSubscribe"])(duration, new _innerSubscribe__WEBPACK_IMPORTED_MODULE_1__["SimpleInnerSubscriber"](this));
            if (!innerSubscription || innerSubscription.closed) {
                this.clearThrottle();
            }
            else {
                this.add(this.throttled = innerSubscription);
            }
        }
    };
    AuditSubscriber.prototype.clearThrottle = function () {
        var _a = this, value = _a.value, hasValue = _a.hasValue, throttled = _a.throttled;
        if (throttled) {
            this.remove(throttled);
            this.throttled = undefined;
            throttled.unsubscribe();
        }
        if (hasValue) {
            this.value = undefined;
            this.hasValue = false;
            this.destination.next(value);
        }
    };
    AuditSubscriber.prototype.notifyNext = function () {
        this.clearThrottle();
    };
    AuditSubscriber.prototype.notifyComplete = function () {
        this.clearThrottle();
    };
    return AuditSubscriber;
}(_innerSubscribe__WEBPACK_IMPORTED_MODULE_1__["SimpleOuterSubscriber"]));
//# sourceMappingURL=audit.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/operators/auditTime.js":
/*!******************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/operators/auditTime.js ***!
  \******************************************************************/
/*! exports provided: auditTime */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "auditTime", function() { return auditTime; });
/* harmony import */ var _scheduler_async__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../scheduler/async */ "../node_modules/rxjs/_esm5/internal/scheduler/async.js");
/* harmony import */ var _audit__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./audit */ "../node_modules/rxjs/_esm5/internal/operators/audit.js");
/* harmony import */ var _observable_timer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../observable/timer */ "../node_modules/rxjs/_esm5/internal/observable/timer.js");
/** PURE_IMPORTS_START _scheduler_async,_audit,_observable_timer PURE_IMPORTS_END */



function auditTime(duration, scheduler) {
    if (scheduler === void 0) {
        scheduler = _scheduler_async__WEBPACK_IMPORTED_MODULE_0__["async"];
    }
    return Object(_audit__WEBPACK_IMPORTED_MODULE_1__["audit"])(function () { return Object(_observable_timer__WEBPACK_IMPORTED_MODULE_2__["timer"])(duration, scheduler); });
}
//# sourceMappingURL=auditTime.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/operators/buffer.js":
/*!***************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/operators/buffer.js ***!
  \***************************************************************/
/*! exports provided: buffer */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "buffer", function() { return buffer; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
/* harmony import */ var _innerSubscribe__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../innerSubscribe */ "../node_modules/rxjs/_esm5/internal/innerSubscribe.js");
/** PURE_IMPORTS_START tslib,_innerSubscribe PURE_IMPORTS_END */


function buffer(closingNotifier) {
    return function bufferOperatorFunction(source) {
        return source.lift(new BufferOperator(closingNotifier));
    };
}
var BufferOperator = /*@__PURE__*/ (function () {
    function BufferOperator(closingNotifier) {
        this.closingNotifier = closingNotifier;
    }
    BufferOperator.prototype.call = function (subscriber, source) {
        return source.subscribe(new BufferSubscriber(subscriber, this.closingNotifier));
    };
    return BufferOperator;
}());
var BufferSubscriber = /*@__PURE__*/ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](BufferSubscriber, _super);
    function BufferSubscriber(destination, closingNotifier) {
        var _this = _super.call(this, destination) || this;
        _this.buffer = [];
        _this.add(Object(_innerSubscribe__WEBPACK_IMPORTED_MODULE_1__["innerSubscribe"])(closingNotifier, new _innerSubscribe__WEBPACK_IMPORTED_MODULE_1__["SimpleInnerSubscriber"](_this)));
        return _this;
    }
    BufferSubscriber.prototype._next = function (value) {
        this.buffer.push(value);
    };
    BufferSubscriber.prototype.notifyNext = function () {
        var buffer = this.buffer;
        this.buffer = [];
        this.destination.next(buffer);
    };
    return BufferSubscriber;
}(_innerSubscribe__WEBPACK_IMPORTED_MODULE_1__["SimpleOuterSubscriber"]));
//# sourceMappingURL=buffer.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/operators/bufferCount.js":
/*!********************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/operators/bufferCount.js ***!
  \********************************************************************/
/*! exports provided: bufferCount */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "bufferCount", function() { return bufferCount; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
/* harmony import */ var _Subscriber__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Subscriber */ "../node_modules/rxjs/_esm5/internal/Subscriber.js");
/** PURE_IMPORTS_START tslib,_Subscriber PURE_IMPORTS_END */


function bufferCount(bufferSize, startBufferEvery) {
    if (startBufferEvery === void 0) {
        startBufferEvery = null;
    }
    return function bufferCountOperatorFunction(source) {
        return source.lift(new BufferCountOperator(bufferSize, startBufferEvery));
    };
}
var BufferCountOperator = /*@__PURE__*/ (function () {
    function BufferCountOperator(bufferSize, startBufferEvery) {
        this.bufferSize = bufferSize;
        this.startBufferEvery = startBufferEvery;
        if (!startBufferEvery || bufferSize === startBufferEvery) {
            this.subscriberClass = BufferCountSubscriber;
        }
        else {
            this.subscriberClass = BufferSkipCountSubscriber;
        }
    }
    BufferCountOperator.prototype.call = function (subscriber, source) {
        return source.subscribe(new this.subscriberClass(subscriber, this.bufferSize, this.startBufferEvery));
    };
    return BufferCountOperator;
}());
var BufferCountSubscriber = /*@__PURE__*/ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](BufferCountSubscriber, _super);
    function BufferCountSubscriber(destination, bufferSize) {
        var _this = _super.call(this, destination) || this;
        _this.bufferSize = bufferSize;
        _this.buffer = [];
        return _this;
    }
    BufferCountSubscriber.prototype._next = function (value) {
        var buffer = this.buffer;
        buffer.push(value);
        if (buffer.length == this.bufferSize) {
            this.destination.next(buffer);
            this.buffer = [];
        }
    };
    BufferCountSubscriber.prototype._complete = function () {
        var buffer = this.buffer;
        if (buffer.length > 0) {
            this.destination.next(buffer);
        }
        _super.prototype._complete.call(this);
    };
    return BufferCountSubscriber;
}(_Subscriber__WEBPACK_IMPORTED_MODULE_1__["Subscriber"]));
var BufferSkipCountSubscriber = /*@__PURE__*/ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](BufferSkipCountSubscriber, _super);
    function BufferSkipCountSubscriber(destination, bufferSize, startBufferEvery) {
        var _this = _super.call(this, destination) || this;
        _this.bufferSize = bufferSize;
        _this.startBufferEvery = startBufferEvery;
        _this.buffers = [];
        _this.count = 0;
        return _this;
    }
    BufferSkipCountSubscriber.prototype._next = function (value) {
        var _a = this, bufferSize = _a.bufferSize, startBufferEvery = _a.startBufferEvery, buffers = _a.buffers, count = _a.count;
        this.count++;
        if (count % startBufferEvery === 0) {
            buffers.push([]);
        }
        for (var i = buffers.length; i--;) {
            var buffer = buffers[i];
            buffer.push(value);
            if (buffer.length === bufferSize) {
                buffers.splice(i, 1);
                this.destination.next(buffer);
            }
        }
    };
    BufferSkipCountSubscriber.prototype._complete = function () {
        var _a = this, buffers = _a.buffers, destination = _a.destination;
        while (buffers.length > 0) {
            var buffer = buffers.shift();
            if (buffer.length > 0) {
                destination.next(buffer);
            }
        }
        _super.prototype._complete.call(this);
    };
    return BufferSkipCountSubscriber;
}(_Subscriber__WEBPACK_IMPORTED_MODULE_1__["Subscriber"]));
//# sourceMappingURL=bufferCount.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/operators/bufferTime.js":
/*!*******************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/operators/bufferTime.js ***!
  \*******************************************************************/
/*! exports provided: bufferTime */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "bufferTime", function() { return bufferTime; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
/* harmony import */ var _scheduler_async__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../scheduler/async */ "../node_modules/rxjs/_esm5/internal/scheduler/async.js");
/* harmony import */ var _Subscriber__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../Subscriber */ "../node_modules/rxjs/_esm5/internal/Subscriber.js");
/* harmony import */ var _util_isScheduler__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../util/isScheduler */ "../node_modules/rxjs/_esm5/internal/util/isScheduler.js");
/** PURE_IMPORTS_START tslib,_scheduler_async,_Subscriber,_util_isScheduler PURE_IMPORTS_END */




function bufferTime(bufferTimeSpan) {
    var length = arguments.length;
    var scheduler = _scheduler_async__WEBPACK_IMPORTED_MODULE_1__["async"];
    if (Object(_util_isScheduler__WEBPACK_IMPORTED_MODULE_3__["isScheduler"])(arguments[arguments.length - 1])) {
        scheduler = arguments[arguments.length - 1];
        length--;
    }
    var bufferCreationInterval = null;
    if (length >= 2) {
        bufferCreationInterval = arguments[1];
    }
    var maxBufferSize = Number.POSITIVE_INFINITY;
    if (length >= 3) {
        maxBufferSize = arguments[2];
    }
    return function bufferTimeOperatorFunction(source) {
        return source.lift(new BufferTimeOperator(bufferTimeSpan, bufferCreationInterval, maxBufferSize, scheduler));
    };
}
var BufferTimeOperator = /*@__PURE__*/ (function () {
    function BufferTimeOperator(bufferTimeSpan, bufferCreationInterval, maxBufferSize, scheduler) {
        this.bufferTimeSpan = bufferTimeSpan;
        this.bufferCreationInterval = bufferCreationInterval;
        this.maxBufferSize = maxBufferSize;
        this.scheduler = scheduler;
    }
    BufferTimeOperator.prototype.call = function (subscriber, source) {
        return source.subscribe(new BufferTimeSubscriber(subscriber, this.bufferTimeSpan, this.bufferCreationInterval, this.maxBufferSize, this.scheduler));
    };
    return BufferTimeOperator;
}());
var Context = /*@__PURE__*/ (function () {
    function Context() {
        this.buffer = [];
    }
    return Context;
}());
var BufferTimeSubscriber = /*@__PURE__*/ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](BufferTimeSubscriber, _super);
    function BufferTimeSubscriber(destination, bufferTimeSpan, bufferCreationInterval, maxBufferSize, scheduler) {
        var _this = _super.call(this, destination) || this;
        _this.bufferTimeSpan = bufferTimeSpan;
        _this.bufferCreationInterval = bufferCreationInterval;
        _this.maxBufferSize = maxBufferSize;
        _this.scheduler = scheduler;
        _this.contexts = [];
        var context = _this.openContext();
        _this.timespanOnly = bufferCreationInterval == null || bufferCreationInterval < 0;
        if (_this.timespanOnly) {
            var timeSpanOnlyState = { subscriber: _this, context: context, bufferTimeSpan: bufferTimeSpan };
            _this.add(context.closeAction = scheduler.schedule(dispatchBufferTimeSpanOnly, bufferTimeSpan, timeSpanOnlyState));
        }
        else {
            var closeState = { subscriber: _this, context: context };
            var creationState = { bufferTimeSpan: bufferTimeSpan, bufferCreationInterval: bufferCreationInterval, subscriber: _this, scheduler: scheduler };
            _this.add(context.closeAction = scheduler.schedule(dispatchBufferClose, bufferTimeSpan, closeState));
            _this.add(scheduler.schedule(dispatchBufferCreation, bufferCreationInterval, creationState));
        }
        return _this;
    }
    BufferTimeSubscriber.prototype._next = function (value) {
        var contexts = this.contexts;
        var len = contexts.length;
        var filledBufferContext;
        for (var i = 0; i < len; i++) {
            var context_1 = contexts[i];
            var buffer = context_1.buffer;
            buffer.push(value);
            if (buffer.length == this.maxBufferSize) {
                filledBufferContext = context_1;
            }
        }
        if (filledBufferContext) {
            this.onBufferFull(filledBufferContext);
        }
    };
    BufferTimeSubscriber.prototype._error = function (err) {
        this.contexts.length = 0;
        _super.prototype._error.call(this, err);
    };
    BufferTimeSubscriber.prototype._complete = function () {
        var _a = this, contexts = _a.contexts, destination = _a.destination;
        while (contexts.length > 0) {
            var context_2 = contexts.shift();
            destination.next(context_2.buffer);
        }
        _super.prototype._complete.call(this);
    };
    BufferTimeSubscriber.prototype._unsubscribe = function () {
        this.contexts = null;
    };
    BufferTimeSubscriber.prototype.onBufferFull = function (context) {
        this.closeContext(context);
        var closeAction = context.closeAction;
        closeAction.unsubscribe();
        this.remove(closeAction);
        if (!this.closed && this.timespanOnly) {
            context = this.openContext();
            var bufferTimeSpan = this.bufferTimeSpan;
            var timeSpanOnlyState = { subscriber: this, context: context, bufferTimeSpan: bufferTimeSpan };
            this.add(context.closeAction = this.scheduler.schedule(dispatchBufferTimeSpanOnly, bufferTimeSpan, timeSpanOnlyState));
        }
    };
    BufferTimeSubscriber.prototype.openContext = function () {
        var context = new Context();
        this.contexts.push(context);
        return context;
    };
    BufferTimeSubscriber.prototype.closeContext = function (context) {
        this.destination.next(context.buffer);
        var contexts = this.contexts;
        var spliceIndex = contexts ? contexts.indexOf(context) : -1;
        if (spliceIndex >= 0) {
            contexts.splice(contexts.indexOf(context), 1);
        }
    };
    return BufferTimeSubscriber;
}(_Subscriber__WEBPACK_IMPORTED_MODULE_2__["Subscriber"]));
function dispatchBufferTimeSpanOnly(state) {
    var subscriber = state.subscriber;
    var prevContext = state.context;
    if (prevContext) {
        subscriber.closeContext(prevContext);
    }
    if (!subscriber.closed) {
        state.context = subscriber.openContext();
        state.context.closeAction = this.schedule(state, state.bufferTimeSpan);
    }
}
function dispatchBufferCreation(state) {
    var bufferCreationInterval = state.bufferCreationInterval, bufferTimeSpan = state.bufferTimeSpan, subscriber = state.subscriber, scheduler = state.scheduler;
    var context = subscriber.openContext();
    var action = this;
    if (!subscriber.closed) {
        subscriber.add(context.closeAction = scheduler.schedule(dispatchBufferClose, bufferTimeSpan, { subscriber: subscriber, context: context }));
        action.schedule(state, bufferCreationInterval);
    }
}
function dispatchBufferClose(arg) {
    var subscriber = arg.subscriber, context = arg.context;
    subscriber.closeContext(context);
}
//# sourceMappingURL=bufferTime.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/operators/bufferToggle.js":
/*!*********************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/operators/bufferToggle.js ***!
  \*********************************************************************/
/*! exports provided: bufferToggle */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "bufferToggle", function() { return bufferToggle; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
/* harmony import */ var _Subscription__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Subscription */ "../node_modules/rxjs/_esm5/internal/Subscription.js");
/* harmony import */ var _util_subscribeToResult__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../util/subscribeToResult */ "../node_modules/rxjs/_esm5/internal/util/subscribeToResult.js");
/* harmony import */ var _OuterSubscriber__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../OuterSubscriber */ "../node_modules/rxjs/_esm5/internal/OuterSubscriber.js");
/** PURE_IMPORTS_START tslib,_Subscription,_util_subscribeToResult,_OuterSubscriber PURE_IMPORTS_END */




function bufferToggle(openings, closingSelector) {
    return function bufferToggleOperatorFunction(source) {
        return source.lift(new BufferToggleOperator(openings, closingSelector));
    };
}
var BufferToggleOperator = /*@__PURE__*/ (function () {
    function BufferToggleOperator(openings, closingSelector) {
        this.openings = openings;
        this.closingSelector = closingSelector;
    }
    BufferToggleOperator.prototype.call = function (subscriber, source) {
        return source.subscribe(new BufferToggleSubscriber(subscriber, this.openings, this.closingSelector));
    };
    return BufferToggleOperator;
}());
var BufferToggleSubscriber = /*@__PURE__*/ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](BufferToggleSubscriber, _super);
    function BufferToggleSubscriber(destination, openings, closingSelector) {
        var _this = _super.call(this, destination) || this;
        _this.closingSelector = closingSelector;
        _this.contexts = [];
        _this.add(Object(_util_subscribeToResult__WEBPACK_IMPORTED_MODULE_2__["subscribeToResult"])(_this, openings));
        return _this;
    }
    BufferToggleSubscriber.prototype._next = function (value) {
        var contexts = this.contexts;
        var len = contexts.length;
        for (var i = 0; i < len; i++) {
            contexts[i].buffer.push(value);
        }
    };
    BufferToggleSubscriber.prototype._error = function (err) {
        var contexts = this.contexts;
        while (contexts.length > 0) {
            var context_1 = contexts.shift();
            context_1.subscription.unsubscribe();
            context_1.buffer = null;
            context_1.subscription = null;
        }
        this.contexts = null;
        _super.prototype._error.call(this, err);
    };
    BufferToggleSubscriber.prototype._complete = function () {
        var contexts = this.contexts;
        while (contexts.length > 0) {
            var context_2 = contexts.shift();
            this.destination.next(context_2.buffer);
            context_2.subscription.unsubscribe();
            context_2.buffer = null;
            context_2.subscription = null;
        }
        this.contexts = null;
        _super.prototype._complete.call(this);
    };
    BufferToggleSubscriber.prototype.notifyNext = function (outerValue, innerValue) {
        outerValue ? this.closeBuffer(outerValue) : this.openBuffer(innerValue);
    };
    BufferToggleSubscriber.prototype.notifyComplete = function (innerSub) {
        this.closeBuffer(innerSub.context);
    };
    BufferToggleSubscriber.prototype.openBuffer = function (value) {
        try {
            var closingSelector = this.closingSelector;
            var closingNotifier = closingSelector.call(this, value);
            if (closingNotifier) {
                this.trySubscribe(closingNotifier);
            }
        }
        catch (err) {
            this._error(err);
        }
    };
    BufferToggleSubscriber.prototype.closeBuffer = function (context) {
        var contexts = this.contexts;
        if (contexts && context) {
            var buffer = context.buffer, subscription = context.subscription;
            this.destination.next(buffer);
            contexts.splice(contexts.indexOf(context), 1);
            this.remove(subscription);
            subscription.unsubscribe();
        }
    };
    BufferToggleSubscriber.prototype.trySubscribe = function (closingNotifier) {
        var contexts = this.contexts;
        var buffer = [];
        var subscription = new _Subscription__WEBPACK_IMPORTED_MODULE_1__["Subscription"]();
        var context = { buffer: buffer, subscription: subscription };
        contexts.push(context);
        var innerSubscription = Object(_util_subscribeToResult__WEBPACK_IMPORTED_MODULE_2__["subscribeToResult"])(this, closingNotifier, context);
        if (!innerSubscription || innerSubscription.closed) {
            this.closeBuffer(context);
        }
        else {
            innerSubscription.context = context;
            this.add(innerSubscription);
            subscription.add(innerSubscription);
        }
    };
    return BufferToggleSubscriber;
}(_OuterSubscriber__WEBPACK_IMPORTED_MODULE_3__["OuterSubscriber"]));
//# sourceMappingURL=bufferToggle.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/operators/bufferWhen.js":
/*!*******************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/operators/bufferWhen.js ***!
  \*******************************************************************/
/*! exports provided: bufferWhen */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "bufferWhen", function() { return bufferWhen; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
/* harmony import */ var _Subscription__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Subscription */ "../node_modules/rxjs/_esm5/internal/Subscription.js");
/* harmony import */ var _innerSubscribe__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../innerSubscribe */ "../node_modules/rxjs/_esm5/internal/innerSubscribe.js");
/** PURE_IMPORTS_START tslib,_Subscription,_innerSubscribe PURE_IMPORTS_END */



function bufferWhen(closingSelector) {
    return function (source) {
        return source.lift(new BufferWhenOperator(closingSelector));
    };
}
var BufferWhenOperator = /*@__PURE__*/ (function () {
    function BufferWhenOperator(closingSelector) {
        this.closingSelector = closingSelector;
    }
    BufferWhenOperator.prototype.call = function (subscriber, source) {
        return source.subscribe(new BufferWhenSubscriber(subscriber, this.closingSelector));
    };
    return BufferWhenOperator;
}());
var BufferWhenSubscriber = /*@__PURE__*/ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](BufferWhenSubscriber, _super);
    function BufferWhenSubscriber(destination, closingSelector) {
        var _this = _super.call(this, destination) || this;
        _this.closingSelector = closingSelector;
        _this.subscribing = false;
        _this.openBuffer();
        return _this;
    }
    BufferWhenSubscriber.prototype._next = function (value) {
        this.buffer.push(value);
    };
    BufferWhenSubscriber.prototype._complete = function () {
        var buffer = this.buffer;
        if (buffer) {
            this.destination.next(buffer);
        }
        _super.prototype._complete.call(this);
    };
    BufferWhenSubscriber.prototype._unsubscribe = function () {
        this.buffer = undefined;
        this.subscribing = false;
    };
    BufferWhenSubscriber.prototype.notifyNext = function () {
        this.openBuffer();
    };
    BufferWhenSubscriber.prototype.notifyComplete = function () {
        if (this.subscribing) {
            this.complete();
        }
        else {
            this.openBuffer();
        }
    };
    BufferWhenSubscriber.prototype.openBuffer = function () {
        var closingSubscription = this.closingSubscription;
        if (closingSubscription) {
            this.remove(closingSubscription);
            closingSubscription.unsubscribe();
        }
        var buffer = this.buffer;
        if (this.buffer) {
            this.destination.next(buffer);
        }
        this.buffer = [];
        var closingNotifier;
        try {
            var closingSelector = this.closingSelector;
            closingNotifier = closingSelector();
        }
        catch (err) {
            return this.error(err);
        }
        closingSubscription = new _Subscription__WEBPACK_IMPORTED_MODULE_1__["Subscription"]();
        this.closingSubscription = closingSubscription;
        this.add(closingSubscription);
        this.subscribing = true;
        closingSubscription.add(Object(_innerSubscribe__WEBPACK_IMPORTED_MODULE_2__["innerSubscribe"])(closingNotifier, new _innerSubscribe__WEBPACK_IMPORTED_MODULE_2__["SimpleInnerSubscriber"](this)));
        this.subscribing = false;
    };
    return BufferWhenSubscriber;
}(_innerSubscribe__WEBPACK_IMPORTED_MODULE_2__["SimpleOuterSubscriber"]));
//# sourceMappingURL=bufferWhen.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/operators/catchError.js":
/*!*******************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/operators/catchError.js ***!
  \*******************************************************************/
/*! exports provided: catchError */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "catchError", function() { return catchError; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
/* harmony import */ var _innerSubscribe__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../innerSubscribe */ "../node_modules/rxjs/_esm5/internal/innerSubscribe.js");
/** PURE_IMPORTS_START tslib,_innerSubscribe PURE_IMPORTS_END */


function catchError(selector) {
    return function catchErrorOperatorFunction(source) {
        var operator = new CatchOperator(selector);
        var caught = source.lift(operator);
        return (operator.caught = caught);
    };
}
var CatchOperator = /*@__PURE__*/ (function () {
    function CatchOperator(selector) {
        this.selector = selector;
    }
    CatchOperator.prototype.call = function (subscriber, source) {
        return source.subscribe(new CatchSubscriber(subscriber, this.selector, this.caught));
    };
    return CatchOperator;
}());
var CatchSubscriber = /*@__PURE__*/ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](CatchSubscriber, _super);
    function CatchSubscriber(destination, selector, caught) {
        var _this = _super.call(this, destination) || this;
        _this.selector = selector;
        _this.caught = caught;
        return _this;
    }
    CatchSubscriber.prototype.error = function (err) {
        if (!this.isStopped) {
            var result = void 0;
            try {
                result = this.selector(err, this.caught);
            }
            catch (err2) {
                _super.prototype.error.call(this, err2);
                return;
            }
            this._unsubscribeAndRecycle();
            var innerSubscriber = new _innerSubscribe__WEBPACK_IMPORTED_MODULE_1__["SimpleInnerSubscriber"](this);
            this.add(innerSubscriber);
            var innerSubscription = Object(_innerSubscribe__WEBPACK_IMPORTED_MODULE_1__["innerSubscribe"])(result, innerSubscriber);
            if (innerSubscription !== innerSubscriber) {
                this.add(innerSubscription);
            }
        }
    };
    return CatchSubscriber;
}(_innerSubscribe__WEBPACK_IMPORTED_MODULE_1__["SimpleOuterSubscriber"]));
//# sourceMappingURL=catchError.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/operators/combineAll.js":
/*!*******************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/operators/combineAll.js ***!
  \*******************************************************************/
/*! exports provided: combineAll */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "combineAll", function() { return combineAll; });
/* harmony import */ var _observable_combineLatest__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../observable/combineLatest */ "../node_modules/rxjs/_esm5/internal/observable/combineLatest.js");
/** PURE_IMPORTS_START _observable_combineLatest PURE_IMPORTS_END */

function combineAll(project) {
    return function (source) { return source.lift(new _observable_combineLatest__WEBPACK_IMPORTED_MODULE_0__["CombineLatestOperator"](project)); };
}
//# sourceMappingURL=combineAll.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/operators/combineLatest.js":
/*!**********************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/operators/combineLatest.js ***!
  \**********************************************************************/
/*! exports provided: combineLatest */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "combineLatest", function() { return combineLatest; });
/* harmony import */ var _util_isArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../util/isArray */ "../node_modules/rxjs/_esm5/internal/util/isArray.js");
/* harmony import */ var _observable_combineLatest__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../observable/combineLatest */ "../node_modules/rxjs/_esm5/internal/observable/combineLatest.js");
/* harmony import */ var _observable_from__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../observable/from */ "../node_modules/rxjs/_esm5/internal/observable/from.js");
/** PURE_IMPORTS_START _util_isArray,_observable_combineLatest,_observable_from PURE_IMPORTS_END */



var none = {};
function combineLatest() {
    var observables = [];
    for (var _i = 0; _i < arguments.length; _i++) {
        observables[_i] = arguments[_i];
    }
    var project = null;
    if (typeof observables[observables.length - 1] === 'function') {
        project = observables.pop();
    }
    if (observables.length === 1 && Object(_util_isArray__WEBPACK_IMPORTED_MODULE_0__["isArray"])(observables[0])) {
        observables = observables[0].slice();
    }
    return function (source) { return source.lift.call(Object(_observable_from__WEBPACK_IMPORTED_MODULE_2__["from"])([source].concat(observables)), new _observable_combineLatest__WEBPACK_IMPORTED_MODULE_1__["CombineLatestOperator"](project)); };
}
//# sourceMappingURL=combineLatest.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/operators/concat.js":
/*!***************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/operators/concat.js ***!
  \***************************************************************/
/*! exports provided: concat */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "concat", function() { return concat; });
/* harmony import */ var _observable_concat__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../observable/concat */ "../node_modules/rxjs/_esm5/internal/observable/concat.js");
/** PURE_IMPORTS_START _observable_concat PURE_IMPORTS_END */

function concat() {
    var observables = [];
    for (var _i = 0; _i < arguments.length; _i++) {
        observables[_i] = arguments[_i];
    }
    return function (source) { return source.lift.call(_observable_concat__WEBPACK_IMPORTED_MODULE_0__["concat"].apply(void 0, [source].concat(observables))); };
}
//# sourceMappingURL=concat.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/operators/concatAll.js":
/*!******************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/operators/concatAll.js ***!
  \******************************************************************/
/*! exports provided: concatAll */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "concatAll", function() { return concatAll; });
/* harmony import */ var _mergeAll__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./mergeAll */ "../node_modules/rxjs/_esm5/internal/operators/mergeAll.js");
/** PURE_IMPORTS_START _mergeAll PURE_IMPORTS_END */

function concatAll() {
    return Object(_mergeAll__WEBPACK_IMPORTED_MODULE_0__["mergeAll"])(1);
}
//# sourceMappingURL=concatAll.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/operators/concatMap.js":
/*!******************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/operators/concatMap.js ***!
  \******************************************************************/
/*! exports provided: concatMap */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "concatMap", function() { return concatMap; });
/* harmony import */ var _mergeMap__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./mergeMap */ "../node_modules/rxjs/_esm5/internal/operators/mergeMap.js");
/** PURE_IMPORTS_START _mergeMap PURE_IMPORTS_END */

function concatMap(project, resultSelector) {
    return Object(_mergeMap__WEBPACK_IMPORTED_MODULE_0__["mergeMap"])(project, resultSelector, 1);
}
//# sourceMappingURL=concatMap.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/operators/concatMapTo.js":
/*!********************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/operators/concatMapTo.js ***!
  \********************************************************************/
/*! exports provided: concatMapTo */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "concatMapTo", function() { return concatMapTo; });
/* harmony import */ var _concatMap__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./concatMap */ "../node_modules/rxjs/_esm5/internal/operators/concatMap.js");
/** PURE_IMPORTS_START _concatMap PURE_IMPORTS_END */

function concatMapTo(innerObservable, resultSelector) {
    return Object(_concatMap__WEBPACK_IMPORTED_MODULE_0__["concatMap"])(function () { return innerObservable; }, resultSelector);
}
//# sourceMappingURL=concatMapTo.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/operators/count.js":
/*!**************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/operators/count.js ***!
  \**************************************************************/
/*! exports provided: count */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "count", function() { return count; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
/* harmony import */ var _Subscriber__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Subscriber */ "../node_modules/rxjs/_esm5/internal/Subscriber.js");
/** PURE_IMPORTS_START tslib,_Subscriber PURE_IMPORTS_END */


function count(predicate) {
    return function (source) { return source.lift(new CountOperator(predicate, source)); };
}
var CountOperator = /*@__PURE__*/ (function () {
    function CountOperator(predicate, source) {
        this.predicate = predicate;
        this.source = source;
    }
    CountOperator.prototype.call = function (subscriber, source) {
        return source.subscribe(new CountSubscriber(subscriber, this.predicate, this.source));
    };
    return CountOperator;
}());
var CountSubscriber = /*@__PURE__*/ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](CountSubscriber, _super);
    function CountSubscriber(destination, predicate, source) {
        var _this = _super.call(this, destination) || this;
        _this.predicate = predicate;
        _this.source = source;
        _this.count = 0;
        _this.index = 0;
        return _this;
    }
    CountSubscriber.prototype._next = function (value) {
        if (this.predicate) {
            this._tryPredicate(value);
        }
        else {
            this.count++;
        }
    };
    CountSubscriber.prototype._tryPredicate = function (value) {
        var result;
        try {
            result = this.predicate(value, this.index++, this.source);
        }
        catch (err) {
            this.destination.error(err);
            return;
        }
        if (result) {
            this.count++;
        }
    };
    CountSubscriber.prototype._complete = function () {
        this.destination.next(this.count);
        this.destination.complete();
    };
    return CountSubscriber;
}(_Subscriber__WEBPACK_IMPORTED_MODULE_1__["Subscriber"]));
//# sourceMappingURL=count.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/operators/debounce.js":
/*!*****************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/operators/debounce.js ***!
  \*****************************************************************/
/*! exports provided: debounce */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "debounce", function() { return debounce; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
/* harmony import */ var _innerSubscribe__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../innerSubscribe */ "../node_modules/rxjs/_esm5/internal/innerSubscribe.js");
/** PURE_IMPORTS_START tslib,_innerSubscribe PURE_IMPORTS_END */


function debounce(durationSelector) {
    return function (source) { return source.lift(new DebounceOperator(durationSelector)); };
}
var DebounceOperator = /*@__PURE__*/ (function () {
    function DebounceOperator(durationSelector) {
        this.durationSelector = durationSelector;
    }
    DebounceOperator.prototype.call = function (subscriber, source) {
        return source.subscribe(new DebounceSubscriber(subscriber, this.durationSelector));
    };
    return DebounceOperator;
}());
var DebounceSubscriber = /*@__PURE__*/ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](DebounceSubscriber, _super);
    function DebounceSubscriber(destination, durationSelector) {
        var _this = _super.call(this, destination) || this;
        _this.durationSelector = durationSelector;
        _this.hasValue = false;
        return _this;
    }
    DebounceSubscriber.prototype._next = function (value) {
        try {
            var result = this.durationSelector.call(this, value);
            if (result) {
                this._tryNext(value, result);
            }
        }
        catch (err) {
            this.destination.error(err);
        }
    };
    DebounceSubscriber.prototype._complete = function () {
        this.emitValue();
        this.destination.complete();
    };
    DebounceSubscriber.prototype._tryNext = function (value, duration) {
        var subscription = this.durationSubscription;
        this.value = value;
        this.hasValue = true;
        if (subscription) {
            subscription.unsubscribe();
            this.remove(subscription);
        }
        subscription = Object(_innerSubscribe__WEBPACK_IMPORTED_MODULE_1__["innerSubscribe"])(duration, new _innerSubscribe__WEBPACK_IMPORTED_MODULE_1__["SimpleInnerSubscriber"](this));
        if (subscription && !subscription.closed) {
            this.add(this.durationSubscription = subscription);
        }
    };
    DebounceSubscriber.prototype.notifyNext = function () {
        this.emitValue();
    };
    DebounceSubscriber.prototype.notifyComplete = function () {
        this.emitValue();
    };
    DebounceSubscriber.prototype.emitValue = function () {
        if (this.hasValue) {
            var value = this.value;
            var subscription = this.durationSubscription;
            if (subscription) {
                this.durationSubscription = undefined;
                subscription.unsubscribe();
                this.remove(subscription);
            }
            this.value = undefined;
            this.hasValue = false;
            _super.prototype._next.call(this, value);
        }
    };
    return DebounceSubscriber;
}(_innerSubscribe__WEBPACK_IMPORTED_MODULE_1__["SimpleOuterSubscriber"]));
//# sourceMappingURL=debounce.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/operators/debounceTime.js":
/*!*********************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/operators/debounceTime.js ***!
  \*********************************************************************/
/*! exports provided: debounceTime */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "debounceTime", function() { return debounceTime; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
/* harmony import */ var _Subscriber__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Subscriber */ "../node_modules/rxjs/_esm5/internal/Subscriber.js");
/* harmony import */ var _scheduler_async__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../scheduler/async */ "../node_modules/rxjs/_esm5/internal/scheduler/async.js");
/** PURE_IMPORTS_START tslib,_Subscriber,_scheduler_async PURE_IMPORTS_END */



function debounceTime(dueTime, scheduler) {
    if (scheduler === void 0) {
        scheduler = _scheduler_async__WEBPACK_IMPORTED_MODULE_2__["async"];
    }
    return function (source) { return source.lift(new DebounceTimeOperator(dueTime, scheduler)); };
}
var DebounceTimeOperator = /*@__PURE__*/ (function () {
    function DebounceTimeOperator(dueTime, scheduler) {
        this.dueTime = dueTime;
        this.scheduler = scheduler;
    }
    DebounceTimeOperator.prototype.call = function (subscriber, source) {
        return source.subscribe(new DebounceTimeSubscriber(subscriber, this.dueTime, this.scheduler));
    };
    return DebounceTimeOperator;
}());
var DebounceTimeSubscriber = /*@__PURE__*/ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](DebounceTimeSubscriber, _super);
    function DebounceTimeSubscriber(destination, dueTime, scheduler) {
        var _this = _super.call(this, destination) || this;
        _this.dueTime = dueTime;
        _this.scheduler = scheduler;
        _this.debouncedSubscription = null;
        _this.lastValue = null;
        _this.hasValue = false;
        return _this;
    }
    DebounceTimeSubscriber.prototype._next = function (value) {
        this.clearDebounce();
        this.lastValue = value;
        this.hasValue = true;
        this.add(this.debouncedSubscription = this.scheduler.schedule(dispatchNext, this.dueTime, this));
    };
    DebounceTimeSubscriber.prototype._complete = function () {
        this.debouncedNext();
        this.destination.complete();
    };
    DebounceTimeSubscriber.prototype.debouncedNext = function () {
        this.clearDebounce();
        if (this.hasValue) {
            var lastValue = this.lastValue;
            this.lastValue = null;
            this.hasValue = false;
            this.destination.next(lastValue);
        }
    };
    DebounceTimeSubscriber.prototype.clearDebounce = function () {
        var debouncedSubscription = this.debouncedSubscription;
        if (debouncedSubscription !== null) {
            this.remove(debouncedSubscription);
            debouncedSubscription.unsubscribe();
            this.debouncedSubscription = null;
        }
    };
    return DebounceTimeSubscriber;
}(_Subscriber__WEBPACK_IMPORTED_MODULE_1__["Subscriber"]));
function dispatchNext(subscriber) {
    subscriber.debouncedNext();
}
//# sourceMappingURL=debounceTime.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/operators/defaultIfEmpty.js":
/*!***********************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/operators/defaultIfEmpty.js ***!
  \***********************************************************************/
/*! exports provided: defaultIfEmpty */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "defaultIfEmpty", function() { return defaultIfEmpty; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
/* harmony import */ var _Subscriber__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Subscriber */ "../node_modules/rxjs/_esm5/internal/Subscriber.js");
/** PURE_IMPORTS_START tslib,_Subscriber PURE_IMPORTS_END */


function defaultIfEmpty(defaultValue) {
    if (defaultValue === void 0) {
        defaultValue = null;
    }
    return function (source) { return source.lift(new DefaultIfEmptyOperator(defaultValue)); };
}
var DefaultIfEmptyOperator = /*@__PURE__*/ (function () {
    function DefaultIfEmptyOperator(defaultValue) {
        this.defaultValue = defaultValue;
    }
    DefaultIfEmptyOperator.prototype.call = function (subscriber, source) {
        return source.subscribe(new DefaultIfEmptySubscriber(subscriber, this.defaultValue));
    };
    return DefaultIfEmptyOperator;
}());
var DefaultIfEmptySubscriber = /*@__PURE__*/ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](DefaultIfEmptySubscriber, _super);
    function DefaultIfEmptySubscriber(destination, defaultValue) {
        var _this = _super.call(this, destination) || this;
        _this.defaultValue = defaultValue;
        _this.isEmpty = true;
        return _this;
    }
    DefaultIfEmptySubscriber.prototype._next = function (value) {
        this.isEmpty = false;
        this.destination.next(value);
    };
    DefaultIfEmptySubscriber.prototype._complete = function () {
        if (this.isEmpty) {
            this.destination.next(this.defaultValue);
        }
        this.destination.complete();
    };
    return DefaultIfEmptySubscriber;
}(_Subscriber__WEBPACK_IMPORTED_MODULE_1__["Subscriber"]));
//# sourceMappingURL=defaultIfEmpty.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/operators/delay.js":
/*!**************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/operators/delay.js ***!
  \**************************************************************/
/*! exports provided: delay */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "delay", function() { return delay; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
/* harmony import */ var _scheduler_async__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../scheduler/async */ "../node_modules/rxjs/_esm5/internal/scheduler/async.js");
/* harmony import */ var _util_isDate__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../util/isDate */ "../node_modules/rxjs/_esm5/internal/util/isDate.js");
/* harmony import */ var _Subscriber__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../Subscriber */ "../node_modules/rxjs/_esm5/internal/Subscriber.js");
/* harmony import */ var _Notification__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../Notification */ "../node_modules/rxjs/_esm5/internal/Notification.js");
/** PURE_IMPORTS_START tslib,_scheduler_async,_util_isDate,_Subscriber,_Notification PURE_IMPORTS_END */





function delay(delay, scheduler) {
    if (scheduler === void 0) {
        scheduler = _scheduler_async__WEBPACK_IMPORTED_MODULE_1__["async"];
    }
    var absoluteDelay = Object(_util_isDate__WEBPACK_IMPORTED_MODULE_2__["isDate"])(delay);
    var delayFor = absoluteDelay ? (+delay - scheduler.now()) : Math.abs(delay);
    return function (source) { return source.lift(new DelayOperator(delayFor, scheduler)); };
}
var DelayOperator = /*@__PURE__*/ (function () {
    function DelayOperator(delay, scheduler) {
        this.delay = delay;
        this.scheduler = scheduler;
    }
    DelayOperator.prototype.call = function (subscriber, source) {
        return source.subscribe(new DelaySubscriber(subscriber, this.delay, this.scheduler));
    };
    return DelayOperator;
}());
var DelaySubscriber = /*@__PURE__*/ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](DelaySubscriber, _super);
    function DelaySubscriber(destination, delay, scheduler) {
        var _this = _super.call(this, destination) || this;
        _this.delay = delay;
        _this.scheduler = scheduler;
        _this.queue = [];
        _this.active = false;
        _this.errored = false;
        return _this;
    }
    DelaySubscriber.dispatch = function (state) {
        var source = state.source;
        var queue = source.queue;
        var scheduler = state.scheduler;
        var destination = state.destination;
        while (queue.length > 0 && (queue[0].time - scheduler.now()) <= 0) {
            queue.shift().notification.observe(destination);
        }
        if (queue.length > 0) {
            var delay_1 = Math.max(0, queue[0].time - scheduler.now());
            this.schedule(state, delay_1);
        }
        else {
            this.unsubscribe();
            source.active = false;
        }
    };
    DelaySubscriber.prototype._schedule = function (scheduler) {
        this.active = true;
        var destination = this.destination;
        destination.add(scheduler.schedule(DelaySubscriber.dispatch, this.delay, {
            source: this, destination: this.destination, scheduler: scheduler
        }));
    };
    DelaySubscriber.prototype.scheduleNotification = function (notification) {
        if (this.errored === true) {
            return;
        }
        var scheduler = this.scheduler;
        var message = new DelayMessage(scheduler.now() + this.delay, notification);
        this.queue.push(message);
        if (this.active === false) {
            this._schedule(scheduler);
        }
    };
    DelaySubscriber.prototype._next = function (value) {
        this.scheduleNotification(_Notification__WEBPACK_IMPORTED_MODULE_4__["Notification"].createNext(value));
    };
    DelaySubscriber.prototype._error = function (err) {
        this.errored = true;
        this.queue = [];
        this.destination.error(err);
        this.unsubscribe();
    };
    DelaySubscriber.prototype._complete = function () {
        this.scheduleNotification(_Notification__WEBPACK_IMPORTED_MODULE_4__["Notification"].createComplete());
        this.unsubscribe();
    };
    return DelaySubscriber;
}(_Subscriber__WEBPACK_IMPORTED_MODULE_3__["Subscriber"]));
var DelayMessage = /*@__PURE__*/ (function () {
    function DelayMessage(time, notification) {
        this.time = time;
        this.notification = notification;
    }
    return DelayMessage;
}());
//# sourceMappingURL=delay.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/operators/delayWhen.js":
/*!******************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/operators/delayWhen.js ***!
  \******************************************************************/
/*! exports provided: delayWhen */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "delayWhen", function() { return delayWhen; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
/* harmony import */ var _Subscriber__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Subscriber */ "../node_modules/rxjs/_esm5/internal/Subscriber.js");
/* harmony import */ var _Observable__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../Observable */ "../node_modules/rxjs/_esm5/internal/Observable.js");
/* harmony import */ var _OuterSubscriber__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../OuterSubscriber */ "../node_modules/rxjs/_esm5/internal/OuterSubscriber.js");
/* harmony import */ var _util_subscribeToResult__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../util/subscribeToResult */ "../node_modules/rxjs/_esm5/internal/util/subscribeToResult.js");
/** PURE_IMPORTS_START tslib,_Subscriber,_Observable,_OuterSubscriber,_util_subscribeToResult PURE_IMPORTS_END */





function delayWhen(delayDurationSelector, subscriptionDelay) {
    if (subscriptionDelay) {
        return function (source) {
            return new SubscriptionDelayObservable(source, subscriptionDelay)
                .lift(new DelayWhenOperator(delayDurationSelector));
        };
    }
    return function (source) { return source.lift(new DelayWhenOperator(delayDurationSelector)); };
}
var DelayWhenOperator = /*@__PURE__*/ (function () {
    function DelayWhenOperator(delayDurationSelector) {
        this.delayDurationSelector = delayDurationSelector;
    }
    DelayWhenOperator.prototype.call = function (subscriber, source) {
        return source.subscribe(new DelayWhenSubscriber(subscriber, this.delayDurationSelector));
    };
    return DelayWhenOperator;
}());
var DelayWhenSubscriber = /*@__PURE__*/ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](DelayWhenSubscriber, _super);
    function DelayWhenSubscriber(destination, delayDurationSelector) {
        var _this = _super.call(this, destination) || this;
        _this.delayDurationSelector = delayDurationSelector;
        _this.completed = false;
        _this.delayNotifierSubscriptions = [];
        _this.index = 0;
        return _this;
    }
    DelayWhenSubscriber.prototype.notifyNext = function (outerValue, _innerValue, _outerIndex, _innerIndex, innerSub) {
        this.destination.next(outerValue);
        this.removeSubscription(innerSub);
        this.tryComplete();
    };
    DelayWhenSubscriber.prototype.notifyError = function (error, innerSub) {
        this._error(error);
    };
    DelayWhenSubscriber.prototype.notifyComplete = function (innerSub) {
        var value = this.removeSubscription(innerSub);
        if (value) {
            this.destination.next(value);
        }
        this.tryComplete();
    };
    DelayWhenSubscriber.prototype._next = function (value) {
        var index = this.index++;
        try {
            var delayNotifier = this.delayDurationSelector(value, index);
            if (delayNotifier) {
                this.tryDelay(delayNotifier, value);
            }
        }
        catch (err) {
            this.destination.error(err);
        }
    };
    DelayWhenSubscriber.prototype._complete = function () {
        this.completed = true;
        this.tryComplete();
        this.unsubscribe();
    };
    DelayWhenSubscriber.prototype.removeSubscription = function (subscription) {
        subscription.unsubscribe();
        var subscriptionIdx = this.delayNotifierSubscriptions.indexOf(subscription);
        if (subscriptionIdx !== -1) {
            this.delayNotifierSubscriptions.splice(subscriptionIdx, 1);
        }
        return subscription.outerValue;
    };
    DelayWhenSubscriber.prototype.tryDelay = function (delayNotifier, value) {
        var notifierSubscription = Object(_util_subscribeToResult__WEBPACK_IMPORTED_MODULE_4__["subscribeToResult"])(this, delayNotifier, value);
        if (notifierSubscription && !notifierSubscription.closed) {
            var destination = this.destination;
            destination.add(notifierSubscription);
            this.delayNotifierSubscriptions.push(notifierSubscription);
        }
    };
    DelayWhenSubscriber.prototype.tryComplete = function () {
        if (this.completed && this.delayNotifierSubscriptions.length === 0) {
            this.destination.complete();
        }
    };
    return DelayWhenSubscriber;
}(_OuterSubscriber__WEBPACK_IMPORTED_MODULE_3__["OuterSubscriber"]));
var SubscriptionDelayObservable = /*@__PURE__*/ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](SubscriptionDelayObservable, _super);
    function SubscriptionDelayObservable(source, subscriptionDelay) {
        var _this = _super.call(this) || this;
        _this.source = source;
        _this.subscriptionDelay = subscriptionDelay;
        return _this;
    }
    SubscriptionDelayObservable.prototype._subscribe = function (subscriber) {
        this.subscriptionDelay.subscribe(new SubscriptionDelaySubscriber(subscriber, this.source));
    };
    return SubscriptionDelayObservable;
}(_Observable__WEBPACK_IMPORTED_MODULE_2__["Observable"]));
var SubscriptionDelaySubscriber = /*@__PURE__*/ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](SubscriptionDelaySubscriber, _super);
    function SubscriptionDelaySubscriber(parent, source) {
        var _this = _super.call(this) || this;
        _this.parent = parent;
        _this.source = source;
        _this.sourceSubscribed = false;
        return _this;
    }
    SubscriptionDelaySubscriber.prototype._next = function (unused) {
        this.subscribeToSource();
    };
    SubscriptionDelaySubscriber.prototype._error = function (err) {
        this.unsubscribe();
        this.parent.error(err);
    };
    SubscriptionDelaySubscriber.prototype._complete = function () {
        this.unsubscribe();
        this.subscribeToSource();
    };
    SubscriptionDelaySubscriber.prototype.subscribeToSource = function () {
        if (!this.sourceSubscribed) {
            this.sourceSubscribed = true;
            this.unsubscribe();
            this.source.subscribe(this.parent);
        }
    };
    return SubscriptionDelaySubscriber;
}(_Subscriber__WEBPACK_IMPORTED_MODULE_1__["Subscriber"]));
//# sourceMappingURL=delayWhen.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/operators/dematerialize.js":
/*!**********************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/operators/dematerialize.js ***!
  \**********************************************************************/
/*! exports provided: dematerialize */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "dematerialize", function() { return dematerialize; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
/* harmony import */ var _Subscriber__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Subscriber */ "../node_modules/rxjs/_esm5/internal/Subscriber.js");
/** PURE_IMPORTS_START tslib,_Subscriber PURE_IMPORTS_END */


function dematerialize() {
    return function dematerializeOperatorFunction(source) {
        return source.lift(new DeMaterializeOperator());
    };
}
var DeMaterializeOperator = /*@__PURE__*/ (function () {
    function DeMaterializeOperator() {
    }
    DeMaterializeOperator.prototype.call = function (subscriber, source) {
        return source.subscribe(new DeMaterializeSubscriber(subscriber));
    };
    return DeMaterializeOperator;
}());
var DeMaterializeSubscriber = /*@__PURE__*/ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](DeMaterializeSubscriber, _super);
    function DeMaterializeSubscriber(destination) {
        return _super.call(this, destination) || this;
    }
    DeMaterializeSubscriber.prototype._next = function (value) {
        value.observe(this.destination);
    };
    return DeMaterializeSubscriber;
}(_Subscriber__WEBPACK_IMPORTED_MODULE_1__["Subscriber"]));
//# sourceMappingURL=dematerialize.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/operators/distinct.js":
/*!*****************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/operators/distinct.js ***!
  \*****************************************************************/
/*! exports provided: distinct, DistinctSubscriber */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "distinct", function() { return distinct; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DistinctSubscriber", function() { return DistinctSubscriber; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
/* harmony import */ var _innerSubscribe__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../innerSubscribe */ "../node_modules/rxjs/_esm5/internal/innerSubscribe.js");
/** PURE_IMPORTS_START tslib,_innerSubscribe PURE_IMPORTS_END */


function distinct(keySelector, flushes) {
    return function (source) { return source.lift(new DistinctOperator(keySelector, flushes)); };
}
var DistinctOperator = /*@__PURE__*/ (function () {
    function DistinctOperator(keySelector, flushes) {
        this.keySelector = keySelector;
        this.flushes = flushes;
    }
    DistinctOperator.prototype.call = function (subscriber, source) {
        return source.subscribe(new DistinctSubscriber(subscriber, this.keySelector, this.flushes));
    };
    return DistinctOperator;
}());
var DistinctSubscriber = /*@__PURE__*/ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](DistinctSubscriber, _super);
    function DistinctSubscriber(destination, keySelector, flushes) {
        var _this = _super.call(this, destination) || this;
        _this.keySelector = keySelector;
        _this.values = new Set();
        if (flushes) {
            _this.add(Object(_innerSubscribe__WEBPACK_IMPORTED_MODULE_1__["innerSubscribe"])(flushes, new _innerSubscribe__WEBPACK_IMPORTED_MODULE_1__["SimpleInnerSubscriber"](_this)));
        }
        return _this;
    }
    DistinctSubscriber.prototype.notifyNext = function () {
        this.values.clear();
    };
    DistinctSubscriber.prototype.notifyError = function (error) {
        this._error(error);
    };
    DistinctSubscriber.prototype._next = function (value) {
        if (this.keySelector) {
            this._useKeySelector(value);
        }
        else {
            this._finalizeNext(value, value);
        }
    };
    DistinctSubscriber.prototype._useKeySelector = function (value) {
        var key;
        var destination = this.destination;
        try {
            key = this.keySelector(value);
        }
        catch (err) {
            destination.error(err);
            return;
        }
        this._finalizeNext(key, value);
    };
    DistinctSubscriber.prototype._finalizeNext = function (key, value) {
        var values = this.values;
        if (!values.has(key)) {
            values.add(key);
            this.destination.next(value);
        }
    };
    return DistinctSubscriber;
}(_innerSubscribe__WEBPACK_IMPORTED_MODULE_1__["SimpleOuterSubscriber"]));

//# sourceMappingURL=distinct.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/operators/distinctUntilChanged.js":
/*!*****************************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/operators/distinctUntilChanged.js ***!
  \*****************************************************************************/
/*! exports provided: distinctUntilChanged */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "distinctUntilChanged", function() { return distinctUntilChanged; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
/* harmony import */ var _Subscriber__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Subscriber */ "../node_modules/rxjs/_esm5/internal/Subscriber.js");
/** PURE_IMPORTS_START tslib,_Subscriber PURE_IMPORTS_END */


function distinctUntilChanged(compare, keySelector) {
    return function (source) { return source.lift(new DistinctUntilChangedOperator(compare, keySelector)); };
}
var DistinctUntilChangedOperator = /*@__PURE__*/ (function () {
    function DistinctUntilChangedOperator(compare, keySelector) {
        this.compare = compare;
        this.keySelector = keySelector;
    }
    DistinctUntilChangedOperator.prototype.call = function (subscriber, source) {
        return source.subscribe(new DistinctUntilChangedSubscriber(subscriber, this.compare, this.keySelector));
    };
    return DistinctUntilChangedOperator;
}());
var DistinctUntilChangedSubscriber = /*@__PURE__*/ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](DistinctUntilChangedSubscriber, _super);
    function DistinctUntilChangedSubscriber(destination, compare, keySelector) {
        var _this = _super.call(this, destination) || this;
        _this.keySelector = keySelector;
        _this.hasKey = false;
        if (typeof compare === 'function') {
            _this.compare = compare;
        }
        return _this;
    }
    DistinctUntilChangedSubscriber.prototype.compare = function (x, y) {
        return x === y;
    };
    DistinctUntilChangedSubscriber.prototype._next = function (value) {
        var key;
        try {
            var keySelector = this.keySelector;
            key = keySelector ? keySelector(value) : value;
        }
        catch (err) {
            return this.destination.error(err);
        }
        var result = false;
        if (this.hasKey) {
            try {
                var compare = this.compare;
                result = compare(this.key, key);
            }
            catch (err) {
                return this.destination.error(err);
            }
        }
        else {
            this.hasKey = true;
        }
        if (!result) {
            this.key = key;
            this.destination.next(value);
        }
    };
    return DistinctUntilChangedSubscriber;
}(_Subscriber__WEBPACK_IMPORTED_MODULE_1__["Subscriber"]));
//# sourceMappingURL=distinctUntilChanged.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/operators/distinctUntilKeyChanged.js":
/*!********************************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/operators/distinctUntilKeyChanged.js ***!
  \********************************************************************************/
/*! exports provided: distinctUntilKeyChanged */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "distinctUntilKeyChanged", function() { return distinctUntilKeyChanged; });
/* harmony import */ var _distinctUntilChanged__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./distinctUntilChanged */ "../node_modules/rxjs/_esm5/internal/operators/distinctUntilChanged.js");
/** PURE_IMPORTS_START _distinctUntilChanged PURE_IMPORTS_END */

function distinctUntilKeyChanged(key, compare) {
    return Object(_distinctUntilChanged__WEBPACK_IMPORTED_MODULE_0__["distinctUntilChanged"])(function (x, y) { return compare ? compare(x[key], y[key]) : x[key] === y[key]; });
}
//# sourceMappingURL=distinctUntilKeyChanged.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/operators/elementAt.js":
/*!******************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/operators/elementAt.js ***!
  \******************************************************************/
/*! exports provided: elementAt */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "elementAt", function() { return elementAt; });
/* harmony import */ var _util_ArgumentOutOfRangeError__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../util/ArgumentOutOfRangeError */ "../node_modules/rxjs/_esm5/internal/util/ArgumentOutOfRangeError.js");
/* harmony import */ var _filter__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./filter */ "../node_modules/rxjs/_esm5/internal/operators/filter.js");
/* harmony import */ var _throwIfEmpty__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./throwIfEmpty */ "../node_modules/rxjs/_esm5/internal/operators/throwIfEmpty.js");
/* harmony import */ var _defaultIfEmpty__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./defaultIfEmpty */ "../node_modules/rxjs/_esm5/internal/operators/defaultIfEmpty.js");
/* harmony import */ var _take__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./take */ "../node_modules/rxjs/_esm5/internal/operators/take.js");
/** PURE_IMPORTS_START _util_ArgumentOutOfRangeError,_filter,_throwIfEmpty,_defaultIfEmpty,_take PURE_IMPORTS_END */





function elementAt(index, defaultValue) {
    if (index < 0) {
        throw new _util_ArgumentOutOfRangeError__WEBPACK_IMPORTED_MODULE_0__["ArgumentOutOfRangeError"]();
    }
    var hasDefaultValue = arguments.length >= 2;
    return function (source) {
        return source.pipe(Object(_filter__WEBPACK_IMPORTED_MODULE_1__["filter"])(function (v, i) { return i === index; }), Object(_take__WEBPACK_IMPORTED_MODULE_4__["take"])(1), hasDefaultValue
            ? Object(_defaultIfEmpty__WEBPACK_IMPORTED_MODULE_3__["defaultIfEmpty"])(defaultValue)
            : Object(_throwIfEmpty__WEBPACK_IMPORTED_MODULE_2__["throwIfEmpty"])(function () { return new _util_ArgumentOutOfRangeError__WEBPACK_IMPORTED_MODULE_0__["ArgumentOutOfRangeError"](); }));
    };
}
//# sourceMappingURL=elementAt.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/operators/endWith.js":
/*!****************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/operators/endWith.js ***!
  \****************************************************************/
/*! exports provided: endWith */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "endWith", function() { return endWith; });
/* harmony import */ var _observable_concat__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../observable/concat */ "../node_modules/rxjs/_esm5/internal/observable/concat.js");
/* harmony import */ var _observable_of__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../observable/of */ "../node_modules/rxjs/_esm5/internal/observable/of.js");
/** PURE_IMPORTS_START _observable_concat,_observable_of PURE_IMPORTS_END */


function endWith() {
    var array = [];
    for (var _i = 0; _i < arguments.length; _i++) {
        array[_i] = arguments[_i];
    }
    return function (source) { return Object(_observable_concat__WEBPACK_IMPORTED_MODULE_0__["concat"])(source, _observable_of__WEBPACK_IMPORTED_MODULE_1__["of"].apply(void 0, array)); };
}
//# sourceMappingURL=endWith.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/operators/every.js":
/*!**************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/operators/every.js ***!
  \**************************************************************/
/*! exports provided: every */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "every", function() { return every; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
/* harmony import */ var _Subscriber__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Subscriber */ "../node_modules/rxjs/_esm5/internal/Subscriber.js");
/** PURE_IMPORTS_START tslib,_Subscriber PURE_IMPORTS_END */


function every(predicate, thisArg) {
    return function (source) { return source.lift(new EveryOperator(predicate, thisArg, source)); };
}
var EveryOperator = /*@__PURE__*/ (function () {
    function EveryOperator(predicate, thisArg, source) {
        this.predicate = predicate;
        this.thisArg = thisArg;
        this.source = source;
    }
    EveryOperator.prototype.call = function (observer, source) {
        return source.subscribe(new EverySubscriber(observer, this.predicate, this.thisArg, this.source));
    };
    return EveryOperator;
}());
var EverySubscriber = /*@__PURE__*/ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](EverySubscriber, _super);
    function EverySubscriber(destination, predicate, thisArg, source) {
        var _this = _super.call(this, destination) || this;
        _this.predicate = predicate;
        _this.thisArg = thisArg;
        _this.source = source;
        _this.index = 0;
        _this.thisArg = thisArg || _this;
        return _this;
    }
    EverySubscriber.prototype.notifyComplete = function (everyValueMatch) {
        this.destination.next(everyValueMatch);
        this.destination.complete();
    };
    EverySubscriber.prototype._next = function (value) {
        var result = false;
        try {
            result = this.predicate.call(this.thisArg, value, this.index++, this.source);
        }
        catch (err) {
            this.destination.error(err);
            return;
        }
        if (!result) {
            this.notifyComplete(false);
        }
    };
    EverySubscriber.prototype._complete = function () {
        this.notifyComplete(true);
    };
    return EverySubscriber;
}(_Subscriber__WEBPACK_IMPORTED_MODULE_1__["Subscriber"]));
//# sourceMappingURL=every.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/operators/exhaust.js":
/*!****************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/operators/exhaust.js ***!
  \****************************************************************/
/*! exports provided: exhaust */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "exhaust", function() { return exhaust; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
/* harmony import */ var _innerSubscribe__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../innerSubscribe */ "../node_modules/rxjs/_esm5/internal/innerSubscribe.js");
/** PURE_IMPORTS_START tslib,_innerSubscribe PURE_IMPORTS_END */


function exhaust() {
    return function (source) { return source.lift(new SwitchFirstOperator()); };
}
var SwitchFirstOperator = /*@__PURE__*/ (function () {
    function SwitchFirstOperator() {
    }
    SwitchFirstOperator.prototype.call = function (subscriber, source) {
        return source.subscribe(new SwitchFirstSubscriber(subscriber));
    };
    return SwitchFirstOperator;
}());
var SwitchFirstSubscriber = /*@__PURE__*/ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](SwitchFirstSubscriber, _super);
    function SwitchFirstSubscriber(destination) {
        var _this = _super.call(this, destination) || this;
        _this.hasCompleted = false;
        _this.hasSubscription = false;
        return _this;
    }
    SwitchFirstSubscriber.prototype._next = function (value) {
        if (!this.hasSubscription) {
            this.hasSubscription = true;
            this.add(Object(_innerSubscribe__WEBPACK_IMPORTED_MODULE_1__["innerSubscribe"])(value, new _innerSubscribe__WEBPACK_IMPORTED_MODULE_1__["SimpleInnerSubscriber"](this)));
        }
    };
    SwitchFirstSubscriber.prototype._complete = function () {
        this.hasCompleted = true;
        if (!this.hasSubscription) {
            this.destination.complete();
        }
    };
    SwitchFirstSubscriber.prototype.notifyComplete = function () {
        this.hasSubscription = false;
        if (this.hasCompleted) {
            this.destination.complete();
        }
    };
    return SwitchFirstSubscriber;
}(_innerSubscribe__WEBPACK_IMPORTED_MODULE_1__["SimpleOuterSubscriber"]));
//# sourceMappingURL=exhaust.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/operators/exhaustMap.js":
/*!*******************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/operators/exhaustMap.js ***!
  \*******************************************************************/
/*! exports provided: exhaustMap */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "exhaustMap", function() { return exhaustMap; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
/* harmony import */ var _map__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./map */ "../node_modules/rxjs/_esm5/internal/operators/map.js");
/* harmony import */ var _observable_from__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../observable/from */ "../node_modules/rxjs/_esm5/internal/observable/from.js");
/* harmony import */ var _innerSubscribe__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../innerSubscribe */ "../node_modules/rxjs/_esm5/internal/innerSubscribe.js");
/** PURE_IMPORTS_START tslib,_map,_observable_from,_innerSubscribe PURE_IMPORTS_END */




function exhaustMap(project, resultSelector) {
    if (resultSelector) {
        return function (source) { return source.pipe(exhaustMap(function (a, i) { return Object(_observable_from__WEBPACK_IMPORTED_MODULE_2__["from"])(project(a, i)).pipe(Object(_map__WEBPACK_IMPORTED_MODULE_1__["map"])(function (b, ii) { return resultSelector(a, b, i, ii); })); })); };
    }
    return function (source) {
        return source.lift(new ExhaustMapOperator(project));
    };
}
var ExhaustMapOperator = /*@__PURE__*/ (function () {
    function ExhaustMapOperator(project) {
        this.project = project;
    }
    ExhaustMapOperator.prototype.call = function (subscriber, source) {
        return source.subscribe(new ExhaustMapSubscriber(subscriber, this.project));
    };
    return ExhaustMapOperator;
}());
var ExhaustMapSubscriber = /*@__PURE__*/ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](ExhaustMapSubscriber, _super);
    function ExhaustMapSubscriber(destination, project) {
        var _this = _super.call(this, destination) || this;
        _this.project = project;
        _this.hasSubscription = false;
        _this.hasCompleted = false;
        _this.index = 0;
        return _this;
    }
    ExhaustMapSubscriber.prototype._next = function (value) {
        if (!this.hasSubscription) {
            this.tryNext(value);
        }
    };
    ExhaustMapSubscriber.prototype.tryNext = function (value) {
        var result;
        var index = this.index++;
        try {
            result = this.project(value, index);
        }
        catch (err) {
            this.destination.error(err);
            return;
        }
        this.hasSubscription = true;
        this._innerSub(result);
    };
    ExhaustMapSubscriber.prototype._innerSub = function (result) {
        var innerSubscriber = new _innerSubscribe__WEBPACK_IMPORTED_MODULE_3__["SimpleInnerSubscriber"](this);
        var destination = this.destination;
        destination.add(innerSubscriber);
        var innerSubscription = Object(_innerSubscribe__WEBPACK_IMPORTED_MODULE_3__["innerSubscribe"])(result, innerSubscriber);
        if (innerSubscription !== innerSubscriber) {
            destination.add(innerSubscription);
        }
    };
    ExhaustMapSubscriber.prototype._complete = function () {
        this.hasCompleted = true;
        if (!this.hasSubscription) {
            this.destination.complete();
        }
        this.unsubscribe();
    };
    ExhaustMapSubscriber.prototype.notifyNext = function (innerValue) {
        this.destination.next(innerValue);
    };
    ExhaustMapSubscriber.prototype.notifyError = function (err) {
        this.destination.error(err);
    };
    ExhaustMapSubscriber.prototype.notifyComplete = function () {
        this.hasSubscription = false;
        if (this.hasCompleted) {
            this.destination.complete();
        }
    };
    return ExhaustMapSubscriber;
}(_innerSubscribe__WEBPACK_IMPORTED_MODULE_3__["SimpleOuterSubscriber"]));
//# sourceMappingURL=exhaustMap.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/operators/expand.js":
/*!***************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/operators/expand.js ***!
  \***************************************************************/
/*! exports provided: expand, ExpandOperator, ExpandSubscriber */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "expand", function() { return expand; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ExpandOperator", function() { return ExpandOperator; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ExpandSubscriber", function() { return ExpandSubscriber; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
/* harmony import */ var _innerSubscribe__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../innerSubscribe */ "../node_modules/rxjs/_esm5/internal/innerSubscribe.js");
/** PURE_IMPORTS_START tslib,_innerSubscribe PURE_IMPORTS_END */


function expand(project, concurrent, scheduler) {
    if (concurrent === void 0) {
        concurrent = Number.POSITIVE_INFINITY;
    }
    concurrent = (concurrent || 0) < 1 ? Number.POSITIVE_INFINITY : concurrent;
    return function (source) { return source.lift(new ExpandOperator(project, concurrent, scheduler)); };
}
var ExpandOperator = /*@__PURE__*/ (function () {
    function ExpandOperator(project, concurrent, scheduler) {
        this.project = project;
        this.concurrent = concurrent;
        this.scheduler = scheduler;
    }
    ExpandOperator.prototype.call = function (subscriber, source) {
        return source.subscribe(new ExpandSubscriber(subscriber, this.project, this.concurrent, this.scheduler));
    };
    return ExpandOperator;
}());

var ExpandSubscriber = /*@__PURE__*/ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](ExpandSubscriber, _super);
    function ExpandSubscriber(destination, project, concurrent, scheduler) {
        var _this = _super.call(this, destination) || this;
        _this.project = project;
        _this.concurrent = concurrent;
        _this.scheduler = scheduler;
        _this.index = 0;
        _this.active = 0;
        _this.hasCompleted = false;
        if (concurrent < Number.POSITIVE_INFINITY) {
            _this.buffer = [];
        }
        return _this;
    }
    ExpandSubscriber.dispatch = function (arg) {
        var subscriber = arg.subscriber, result = arg.result, value = arg.value, index = arg.index;
        subscriber.subscribeToProjection(result, value, index);
    };
    ExpandSubscriber.prototype._next = function (value) {
        var destination = this.destination;
        if (destination.closed) {
            this._complete();
            return;
        }
        var index = this.index++;
        if (this.active < this.concurrent) {
            destination.next(value);
            try {
                var project = this.project;
                var result = project(value, index);
                if (!this.scheduler) {
                    this.subscribeToProjection(result, value, index);
                }
                else {
                    var state = { subscriber: this, result: result, value: value, index: index };
                    var destination_1 = this.destination;
                    destination_1.add(this.scheduler.schedule(ExpandSubscriber.dispatch, 0, state));
                }
            }
            catch (e) {
                destination.error(e);
            }
        }
        else {
            this.buffer.push(value);
        }
    };
    ExpandSubscriber.prototype.subscribeToProjection = function (result, value, index) {
        this.active++;
        var destination = this.destination;
        destination.add(Object(_innerSubscribe__WEBPACK_IMPORTED_MODULE_1__["innerSubscribe"])(result, new _innerSubscribe__WEBPACK_IMPORTED_MODULE_1__["SimpleInnerSubscriber"](this)));
    };
    ExpandSubscriber.prototype._complete = function () {
        this.hasCompleted = true;
        if (this.hasCompleted && this.active === 0) {
            this.destination.complete();
        }
        this.unsubscribe();
    };
    ExpandSubscriber.prototype.notifyNext = function (innerValue) {
        this._next(innerValue);
    };
    ExpandSubscriber.prototype.notifyComplete = function () {
        var buffer = this.buffer;
        this.active--;
        if (buffer && buffer.length > 0) {
            this._next(buffer.shift());
        }
        if (this.hasCompleted && this.active === 0) {
            this.destination.complete();
        }
    };
    return ExpandSubscriber;
}(_innerSubscribe__WEBPACK_IMPORTED_MODULE_1__["SimpleOuterSubscriber"]));

//# sourceMappingURL=expand.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/operators/filter.js":
/*!***************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/operators/filter.js ***!
  \***************************************************************/
/*! exports provided: filter */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "filter", function() { return filter; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
/* harmony import */ var _Subscriber__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Subscriber */ "../node_modules/rxjs/_esm5/internal/Subscriber.js");
/** PURE_IMPORTS_START tslib,_Subscriber PURE_IMPORTS_END */


function filter(predicate, thisArg) {
    return function filterOperatorFunction(source) {
        return source.lift(new FilterOperator(predicate, thisArg));
    };
}
var FilterOperator = /*@__PURE__*/ (function () {
    function FilterOperator(predicate, thisArg) {
        this.predicate = predicate;
        this.thisArg = thisArg;
    }
    FilterOperator.prototype.call = function (subscriber, source) {
        return source.subscribe(new FilterSubscriber(subscriber, this.predicate, this.thisArg));
    };
    return FilterOperator;
}());
var FilterSubscriber = /*@__PURE__*/ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](FilterSubscriber, _super);
    function FilterSubscriber(destination, predicate, thisArg) {
        var _this = _super.call(this, destination) || this;
        _this.predicate = predicate;
        _this.thisArg = thisArg;
        _this.count = 0;
        return _this;
    }
    FilterSubscriber.prototype._next = function (value) {
        var result;
        try {
            result = this.predicate.call(this.thisArg, value, this.count++);
        }
        catch (err) {
            this.destination.error(err);
            return;
        }
        if (result) {
            this.destination.next(value);
        }
    };
    return FilterSubscriber;
}(_Subscriber__WEBPACK_IMPORTED_MODULE_1__["Subscriber"]));
//# sourceMappingURL=filter.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/operators/finalize.js":
/*!*****************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/operators/finalize.js ***!
  \*****************************************************************/
/*! exports provided: finalize */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "finalize", function() { return finalize; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
/* harmony import */ var _Subscriber__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Subscriber */ "../node_modules/rxjs/_esm5/internal/Subscriber.js");
/* harmony import */ var _Subscription__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../Subscription */ "../node_modules/rxjs/_esm5/internal/Subscription.js");
/** PURE_IMPORTS_START tslib,_Subscriber,_Subscription PURE_IMPORTS_END */



function finalize(callback) {
    return function (source) { return source.lift(new FinallyOperator(callback)); };
}
var FinallyOperator = /*@__PURE__*/ (function () {
    function FinallyOperator(callback) {
        this.callback = callback;
    }
    FinallyOperator.prototype.call = function (subscriber, source) {
        return source.subscribe(new FinallySubscriber(subscriber, this.callback));
    };
    return FinallyOperator;
}());
var FinallySubscriber = /*@__PURE__*/ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](FinallySubscriber, _super);
    function FinallySubscriber(destination, callback) {
        var _this = _super.call(this, destination) || this;
        _this.add(new _Subscription__WEBPACK_IMPORTED_MODULE_2__["Subscription"](callback));
        return _this;
    }
    return FinallySubscriber;
}(_Subscriber__WEBPACK_IMPORTED_MODULE_1__["Subscriber"]));
//# sourceMappingURL=finalize.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/operators/find.js":
/*!*************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/operators/find.js ***!
  \*************************************************************/
/*! exports provided: find, FindValueOperator, FindValueSubscriber */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "find", function() { return find; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FindValueOperator", function() { return FindValueOperator; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FindValueSubscriber", function() { return FindValueSubscriber; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
/* harmony import */ var _Subscriber__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Subscriber */ "../node_modules/rxjs/_esm5/internal/Subscriber.js");
/** PURE_IMPORTS_START tslib,_Subscriber PURE_IMPORTS_END */


function find(predicate, thisArg) {
    if (typeof predicate !== 'function') {
        throw new TypeError('predicate is not a function');
    }
    return function (source) { return source.lift(new FindValueOperator(predicate, source, false, thisArg)); };
}
var FindValueOperator = /*@__PURE__*/ (function () {
    function FindValueOperator(predicate, source, yieldIndex, thisArg) {
        this.predicate = predicate;
        this.source = source;
        this.yieldIndex = yieldIndex;
        this.thisArg = thisArg;
    }
    FindValueOperator.prototype.call = function (observer, source) {
        return source.subscribe(new FindValueSubscriber(observer, this.predicate, this.source, this.yieldIndex, this.thisArg));
    };
    return FindValueOperator;
}());

var FindValueSubscriber = /*@__PURE__*/ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](FindValueSubscriber, _super);
    function FindValueSubscriber(destination, predicate, source, yieldIndex, thisArg) {
        var _this = _super.call(this, destination) || this;
        _this.predicate = predicate;
        _this.source = source;
        _this.yieldIndex = yieldIndex;
        _this.thisArg = thisArg;
        _this.index = 0;
        return _this;
    }
    FindValueSubscriber.prototype.notifyComplete = function (value) {
        var destination = this.destination;
        destination.next(value);
        destination.complete();
        this.unsubscribe();
    };
    FindValueSubscriber.prototype._next = function (value) {
        var _a = this, predicate = _a.predicate, thisArg = _a.thisArg;
        var index = this.index++;
        try {
            var result = predicate.call(thisArg || this, value, index, this.source);
            if (result) {
                this.notifyComplete(this.yieldIndex ? index : value);
            }
        }
        catch (err) {
            this.destination.error(err);
        }
    };
    FindValueSubscriber.prototype._complete = function () {
        this.notifyComplete(this.yieldIndex ? -1 : undefined);
    };
    return FindValueSubscriber;
}(_Subscriber__WEBPACK_IMPORTED_MODULE_1__["Subscriber"]));

//# sourceMappingURL=find.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/operators/findIndex.js":
/*!******************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/operators/findIndex.js ***!
  \******************************************************************/
/*! exports provided: findIndex */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "findIndex", function() { return findIndex; });
/* harmony import */ var _operators_find__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../operators/find */ "../node_modules/rxjs/_esm5/internal/operators/find.js");
/** PURE_IMPORTS_START _operators_find PURE_IMPORTS_END */

function findIndex(predicate, thisArg) {
    return function (source) { return source.lift(new _operators_find__WEBPACK_IMPORTED_MODULE_0__["FindValueOperator"](predicate, source, true, thisArg)); };
}
//# sourceMappingURL=findIndex.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/operators/first.js":
/*!**************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/operators/first.js ***!
  \**************************************************************/
/*! exports provided: first */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "first", function() { return first; });
/* harmony import */ var _util_EmptyError__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../util/EmptyError */ "../node_modules/rxjs/_esm5/internal/util/EmptyError.js");
/* harmony import */ var _filter__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./filter */ "../node_modules/rxjs/_esm5/internal/operators/filter.js");
/* harmony import */ var _take__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./take */ "../node_modules/rxjs/_esm5/internal/operators/take.js");
/* harmony import */ var _defaultIfEmpty__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./defaultIfEmpty */ "../node_modules/rxjs/_esm5/internal/operators/defaultIfEmpty.js");
/* harmony import */ var _throwIfEmpty__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./throwIfEmpty */ "../node_modules/rxjs/_esm5/internal/operators/throwIfEmpty.js");
/* harmony import */ var _util_identity__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../util/identity */ "../node_modules/rxjs/_esm5/internal/util/identity.js");
/** PURE_IMPORTS_START _util_EmptyError,_filter,_take,_defaultIfEmpty,_throwIfEmpty,_util_identity PURE_IMPORTS_END */






function first(predicate, defaultValue) {
    var hasDefaultValue = arguments.length >= 2;
    return function (source) { return source.pipe(predicate ? Object(_filter__WEBPACK_IMPORTED_MODULE_1__["filter"])(function (v, i) { return predicate(v, i, source); }) : _util_identity__WEBPACK_IMPORTED_MODULE_5__["identity"], Object(_take__WEBPACK_IMPORTED_MODULE_2__["take"])(1), hasDefaultValue ? Object(_defaultIfEmpty__WEBPACK_IMPORTED_MODULE_3__["defaultIfEmpty"])(defaultValue) : Object(_throwIfEmpty__WEBPACK_IMPORTED_MODULE_4__["throwIfEmpty"])(function () { return new _util_EmptyError__WEBPACK_IMPORTED_MODULE_0__["EmptyError"](); })); };
}
//# sourceMappingURL=first.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/operators/groupBy.js":
/*!****************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/operators/groupBy.js ***!
  \****************************************************************/
/*! exports provided: groupBy, GroupedObservable */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "groupBy", function() { return groupBy; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GroupedObservable", function() { return GroupedObservable; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
/* harmony import */ var _Subscriber__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Subscriber */ "../node_modules/rxjs/_esm5/internal/Subscriber.js");
/* harmony import */ var _Subscription__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../Subscription */ "../node_modules/rxjs/_esm5/internal/Subscription.js");
/* harmony import */ var _Observable__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../Observable */ "../node_modules/rxjs/_esm5/internal/Observable.js");
/* harmony import */ var _Subject__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../Subject */ "../node_modules/rxjs/_esm5/internal/Subject.js");
/** PURE_IMPORTS_START tslib,_Subscriber,_Subscription,_Observable,_Subject PURE_IMPORTS_END */





function groupBy(keySelector, elementSelector, durationSelector, subjectSelector) {
    return function (source) {
        return source.lift(new GroupByOperator(keySelector, elementSelector, durationSelector, subjectSelector));
    };
}
var GroupByOperator = /*@__PURE__*/ (function () {
    function GroupByOperator(keySelector, elementSelector, durationSelector, subjectSelector) {
        this.keySelector = keySelector;
        this.elementSelector = elementSelector;
        this.durationSelector = durationSelector;
        this.subjectSelector = subjectSelector;
    }
    GroupByOperator.prototype.call = function (subscriber, source) {
        return source.subscribe(new GroupBySubscriber(subscriber, this.keySelector, this.elementSelector, this.durationSelector, this.subjectSelector));
    };
    return GroupByOperator;
}());
var GroupBySubscriber = /*@__PURE__*/ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](GroupBySubscriber, _super);
    function GroupBySubscriber(destination, keySelector, elementSelector, durationSelector, subjectSelector) {
        var _this = _super.call(this, destination) || this;
        _this.keySelector = keySelector;
        _this.elementSelector = elementSelector;
        _this.durationSelector = durationSelector;
        _this.subjectSelector = subjectSelector;
        _this.groups = null;
        _this.attemptedToUnsubscribe = false;
        _this.count = 0;
        return _this;
    }
    GroupBySubscriber.prototype._next = function (value) {
        var key;
        try {
            key = this.keySelector(value);
        }
        catch (err) {
            this.error(err);
            return;
        }
        this._group(value, key);
    };
    GroupBySubscriber.prototype._group = function (value, key) {
        var groups = this.groups;
        if (!groups) {
            groups = this.groups = new Map();
        }
        var group = groups.get(key);
        var element;
        if (this.elementSelector) {
            try {
                element = this.elementSelector(value);
            }
            catch (err) {
                this.error(err);
            }
        }
        else {
            element = value;
        }
        if (!group) {
            group = (this.subjectSelector ? this.subjectSelector() : new _Subject__WEBPACK_IMPORTED_MODULE_4__["Subject"]());
            groups.set(key, group);
            var groupedObservable = new GroupedObservable(key, group, this);
            this.destination.next(groupedObservable);
            if (this.durationSelector) {
                var duration = void 0;
                try {
                    duration = this.durationSelector(new GroupedObservable(key, group));
                }
                catch (err) {
                    this.error(err);
                    return;
                }
                this.add(duration.subscribe(new GroupDurationSubscriber(key, group, this)));
            }
        }
        if (!group.closed) {
            group.next(element);
        }
    };
    GroupBySubscriber.prototype._error = function (err) {
        var groups = this.groups;
        if (groups) {
            groups.forEach(function (group, key) {
                group.error(err);
            });
            groups.clear();
        }
        this.destination.error(err);
    };
    GroupBySubscriber.prototype._complete = function () {
        var groups = this.groups;
        if (groups) {
            groups.forEach(function (group, key) {
                group.complete();
            });
            groups.clear();
        }
        this.destination.complete();
    };
    GroupBySubscriber.prototype.removeGroup = function (key) {
        this.groups.delete(key);
    };
    GroupBySubscriber.prototype.unsubscribe = function () {
        if (!this.closed) {
            this.attemptedToUnsubscribe = true;
            if (this.count === 0) {
                _super.prototype.unsubscribe.call(this);
            }
        }
    };
    return GroupBySubscriber;
}(_Subscriber__WEBPACK_IMPORTED_MODULE_1__["Subscriber"]));
var GroupDurationSubscriber = /*@__PURE__*/ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](GroupDurationSubscriber, _super);
    function GroupDurationSubscriber(key, group, parent) {
        var _this = _super.call(this, group) || this;
        _this.key = key;
        _this.group = group;
        _this.parent = parent;
        return _this;
    }
    GroupDurationSubscriber.prototype._next = function (value) {
        this.complete();
    };
    GroupDurationSubscriber.prototype._unsubscribe = function () {
        var _a = this, parent = _a.parent, key = _a.key;
        this.key = this.parent = null;
        if (parent) {
            parent.removeGroup(key);
        }
    };
    return GroupDurationSubscriber;
}(_Subscriber__WEBPACK_IMPORTED_MODULE_1__["Subscriber"]));
var GroupedObservable = /*@__PURE__*/ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](GroupedObservable, _super);
    function GroupedObservable(key, groupSubject, refCountSubscription) {
        var _this = _super.call(this) || this;
        _this.key = key;
        _this.groupSubject = groupSubject;
        _this.refCountSubscription = refCountSubscription;
        return _this;
    }
    GroupedObservable.prototype._subscribe = function (subscriber) {
        var subscription = new _Subscription__WEBPACK_IMPORTED_MODULE_2__["Subscription"]();
        var _a = this, refCountSubscription = _a.refCountSubscription, groupSubject = _a.groupSubject;
        if (refCountSubscription && !refCountSubscription.closed) {
            subscription.add(new InnerRefCountSubscription(refCountSubscription));
        }
        subscription.add(groupSubject.subscribe(subscriber));
        return subscription;
    };
    return GroupedObservable;
}(_Observable__WEBPACK_IMPORTED_MODULE_3__["Observable"]));

var InnerRefCountSubscription = /*@__PURE__*/ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](InnerRefCountSubscription, _super);
    function InnerRefCountSubscription(parent) {
        var _this = _super.call(this) || this;
        _this.parent = parent;
        parent.count++;
        return _this;
    }
    InnerRefCountSubscription.prototype.unsubscribe = function () {
        var parent = this.parent;
        if (!parent.closed && !this.closed) {
            _super.prototype.unsubscribe.call(this);
            parent.count -= 1;
            if (parent.count === 0 && parent.attemptedToUnsubscribe) {
                parent.unsubscribe();
            }
        }
    };
    return InnerRefCountSubscription;
}(_Subscription__WEBPACK_IMPORTED_MODULE_2__["Subscription"]));
//# sourceMappingURL=groupBy.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/operators/ignoreElements.js":
/*!***********************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/operators/ignoreElements.js ***!
  \***********************************************************************/
/*! exports provided: ignoreElements */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ignoreElements", function() { return ignoreElements; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
/* harmony import */ var _Subscriber__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Subscriber */ "../node_modules/rxjs/_esm5/internal/Subscriber.js");
/** PURE_IMPORTS_START tslib,_Subscriber PURE_IMPORTS_END */


function ignoreElements() {
    return function ignoreElementsOperatorFunction(source) {
        return source.lift(new IgnoreElementsOperator());
    };
}
var IgnoreElementsOperator = /*@__PURE__*/ (function () {
    function IgnoreElementsOperator() {
    }
    IgnoreElementsOperator.prototype.call = function (subscriber, source) {
        return source.subscribe(new IgnoreElementsSubscriber(subscriber));
    };
    return IgnoreElementsOperator;
}());
var IgnoreElementsSubscriber = /*@__PURE__*/ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](IgnoreElementsSubscriber, _super);
    function IgnoreElementsSubscriber() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    IgnoreElementsSubscriber.prototype._next = function (unused) {
    };
    return IgnoreElementsSubscriber;
}(_Subscriber__WEBPACK_IMPORTED_MODULE_1__["Subscriber"]));
//# sourceMappingURL=ignoreElements.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/operators/isEmpty.js":
/*!****************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/operators/isEmpty.js ***!
  \****************************************************************/
/*! exports provided: isEmpty */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isEmpty", function() { return isEmpty; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
/* harmony import */ var _Subscriber__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Subscriber */ "../node_modules/rxjs/_esm5/internal/Subscriber.js");
/** PURE_IMPORTS_START tslib,_Subscriber PURE_IMPORTS_END */


function isEmpty() {
    return function (source) { return source.lift(new IsEmptyOperator()); };
}
var IsEmptyOperator = /*@__PURE__*/ (function () {
    function IsEmptyOperator() {
    }
    IsEmptyOperator.prototype.call = function (observer, source) {
        return source.subscribe(new IsEmptySubscriber(observer));
    };
    return IsEmptyOperator;
}());
var IsEmptySubscriber = /*@__PURE__*/ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](IsEmptySubscriber, _super);
    function IsEmptySubscriber(destination) {
        return _super.call(this, destination) || this;
    }
    IsEmptySubscriber.prototype.notifyComplete = function (isEmpty) {
        var destination = this.destination;
        destination.next(isEmpty);
        destination.complete();
    };
    IsEmptySubscriber.prototype._next = function (value) {
        this.notifyComplete(false);
    };
    IsEmptySubscriber.prototype._complete = function () {
        this.notifyComplete(true);
    };
    return IsEmptySubscriber;
}(_Subscriber__WEBPACK_IMPORTED_MODULE_1__["Subscriber"]));
//# sourceMappingURL=isEmpty.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/operators/last.js":
/*!*************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/operators/last.js ***!
  \*************************************************************/
/*! exports provided: last */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "last", function() { return last; });
/* harmony import */ var _util_EmptyError__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../util/EmptyError */ "../node_modules/rxjs/_esm5/internal/util/EmptyError.js");
/* harmony import */ var _filter__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./filter */ "../node_modules/rxjs/_esm5/internal/operators/filter.js");
/* harmony import */ var _takeLast__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./takeLast */ "../node_modules/rxjs/_esm5/internal/operators/takeLast.js");
/* harmony import */ var _throwIfEmpty__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./throwIfEmpty */ "../node_modules/rxjs/_esm5/internal/operators/throwIfEmpty.js");
/* harmony import */ var _defaultIfEmpty__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./defaultIfEmpty */ "../node_modules/rxjs/_esm5/internal/operators/defaultIfEmpty.js");
/* harmony import */ var _util_identity__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../util/identity */ "../node_modules/rxjs/_esm5/internal/util/identity.js");
/** PURE_IMPORTS_START _util_EmptyError,_filter,_takeLast,_throwIfEmpty,_defaultIfEmpty,_util_identity PURE_IMPORTS_END */






function last(predicate, defaultValue) {
    var hasDefaultValue = arguments.length >= 2;
    return function (source) { return source.pipe(predicate ? Object(_filter__WEBPACK_IMPORTED_MODULE_1__["filter"])(function (v, i) { return predicate(v, i, source); }) : _util_identity__WEBPACK_IMPORTED_MODULE_5__["identity"], Object(_takeLast__WEBPACK_IMPORTED_MODULE_2__["takeLast"])(1), hasDefaultValue ? Object(_defaultIfEmpty__WEBPACK_IMPORTED_MODULE_4__["defaultIfEmpty"])(defaultValue) : Object(_throwIfEmpty__WEBPACK_IMPORTED_MODULE_3__["throwIfEmpty"])(function () { return new _util_EmptyError__WEBPACK_IMPORTED_MODULE_0__["EmptyError"](); })); };
}
//# sourceMappingURL=last.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/operators/map.js":
/*!************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/operators/map.js ***!
  \************************************************************/
/*! exports provided: map, MapOperator */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "map", function() { return map; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MapOperator", function() { return MapOperator; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
/* harmony import */ var _Subscriber__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Subscriber */ "../node_modules/rxjs/_esm5/internal/Subscriber.js");
/** PURE_IMPORTS_START tslib,_Subscriber PURE_IMPORTS_END */


function map(project, thisArg) {
    return function mapOperation(source) {
        if (typeof project !== 'function') {
            throw new TypeError('argument is not a function. Are you looking for `mapTo()`?');
        }
        return source.lift(new MapOperator(project, thisArg));
    };
}
var MapOperator = /*@__PURE__*/ (function () {
    function MapOperator(project, thisArg) {
        this.project = project;
        this.thisArg = thisArg;
    }
    MapOperator.prototype.call = function (subscriber, source) {
        return source.subscribe(new MapSubscriber(subscriber, this.project, this.thisArg));
    };
    return MapOperator;
}());

var MapSubscriber = /*@__PURE__*/ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](MapSubscriber, _super);
    function MapSubscriber(destination, project, thisArg) {
        var _this = _super.call(this, destination) || this;
        _this.project = project;
        _this.count = 0;
        _this.thisArg = thisArg || _this;
        return _this;
    }
    MapSubscriber.prototype._next = function (value) {
        var result;
        try {
            result = this.project.call(this.thisArg, value, this.count++);
        }
        catch (err) {
            this.destination.error(err);
            return;
        }
        this.destination.next(result);
    };
    return MapSubscriber;
}(_Subscriber__WEBPACK_IMPORTED_MODULE_1__["Subscriber"]));
//# sourceMappingURL=map.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/operators/mapTo.js":
/*!**************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/operators/mapTo.js ***!
  \**************************************************************/
/*! exports provided: mapTo */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "mapTo", function() { return mapTo; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
/* harmony import */ var _Subscriber__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Subscriber */ "../node_modules/rxjs/_esm5/internal/Subscriber.js");
/** PURE_IMPORTS_START tslib,_Subscriber PURE_IMPORTS_END */


function mapTo(value) {
    return function (source) { return source.lift(new MapToOperator(value)); };
}
var MapToOperator = /*@__PURE__*/ (function () {
    function MapToOperator(value) {
        this.value = value;
    }
    MapToOperator.prototype.call = function (subscriber, source) {
        return source.subscribe(new MapToSubscriber(subscriber, this.value));
    };
    return MapToOperator;
}());
var MapToSubscriber = /*@__PURE__*/ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](MapToSubscriber, _super);
    function MapToSubscriber(destination, value) {
        var _this = _super.call(this, destination) || this;
        _this.value = value;
        return _this;
    }
    MapToSubscriber.prototype._next = function (x) {
        this.destination.next(this.value);
    };
    return MapToSubscriber;
}(_Subscriber__WEBPACK_IMPORTED_MODULE_1__["Subscriber"]));
//# sourceMappingURL=mapTo.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/operators/materialize.js":
/*!********************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/operators/materialize.js ***!
  \********************************************************************/
/*! exports provided: materialize */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "materialize", function() { return materialize; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
/* harmony import */ var _Subscriber__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Subscriber */ "../node_modules/rxjs/_esm5/internal/Subscriber.js");
/* harmony import */ var _Notification__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../Notification */ "../node_modules/rxjs/_esm5/internal/Notification.js");
/** PURE_IMPORTS_START tslib,_Subscriber,_Notification PURE_IMPORTS_END */



function materialize() {
    return function materializeOperatorFunction(source) {
        return source.lift(new MaterializeOperator());
    };
}
var MaterializeOperator = /*@__PURE__*/ (function () {
    function MaterializeOperator() {
    }
    MaterializeOperator.prototype.call = function (subscriber, source) {
        return source.subscribe(new MaterializeSubscriber(subscriber));
    };
    return MaterializeOperator;
}());
var MaterializeSubscriber = /*@__PURE__*/ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](MaterializeSubscriber, _super);
    function MaterializeSubscriber(destination) {
        return _super.call(this, destination) || this;
    }
    MaterializeSubscriber.prototype._next = function (value) {
        this.destination.next(_Notification__WEBPACK_IMPORTED_MODULE_2__["Notification"].createNext(value));
    };
    MaterializeSubscriber.prototype._error = function (err) {
        var destination = this.destination;
        destination.next(_Notification__WEBPACK_IMPORTED_MODULE_2__["Notification"].createError(err));
        destination.complete();
    };
    MaterializeSubscriber.prototype._complete = function () {
        var destination = this.destination;
        destination.next(_Notification__WEBPACK_IMPORTED_MODULE_2__["Notification"].createComplete());
        destination.complete();
    };
    return MaterializeSubscriber;
}(_Subscriber__WEBPACK_IMPORTED_MODULE_1__["Subscriber"]));
//# sourceMappingURL=materialize.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/operators/max.js":
/*!************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/operators/max.js ***!
  \************************************************************/
/*! exports provided: max */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "max", function() { return max; });
/* harmony import */ var _reduce__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./reduce */ "../node_modules/rxjs/_esm5/internal/operators/reduce.js");
/** PURE_IMPORTS_START _reduce PURE_IMPORTS_END */

function max(comparer) {
    var max = (typeof comparer === 'function')
        ? function (x, y) { return comparer(x, y) > 0 ? x : y; }
        : function (x, y) { return x > y ? x : y; };
    return Object(_reduce__WEBPACK_IMPORTED_MODULE_0__["reduce"])(max);
}
//# sourceMappingURL=max.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/operators/merge.js":
/*!**************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/operators/merge.js ***!
  \**************************************************************/
/*! exports provided: merge */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "merge", function() { return merge; });
/* harmony import */ var _observable_merge__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../observable/merge */ "../node_modules/rxjs/_esm5/internal/observable/merge.js");
/** PURE_IMPORTS_START _observable_merge PURE_IMPORTS_END */

function merge() {
    var observables = [];
    for (var _i = 0; _i < arguments.length; _i++) {
        observables[_i] = arguments[_i];
    }
    return function (source) { return source.lift.call(_observable_merge__WEBPACK_IMPORTED_MODULE_0__["merge"].apply(void 0, [source].concat(observables))); };
}
//# sourceMappingURL=merge.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/operators/mergeAll.js":
/*!*****************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/operators/mergeAll.js ***!
  \*****************************************************************/
/*! exports provided: mergeAll */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "mergeAll", function() { return mergeAll; });
/* harmony import */ var _mergeMap__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./mergeMap */ "../node_modules/rxjs/_esm5/internal/operators/mergeMap.js");
/* harmony import */ var _util_identity__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../util/identity */ "../node_modules/rxjs/_esm5/internal/util/identity.js");
/** PURE_IMPORTS_START _mergeMap,_util_identity PURE_IMPORTS_END */


function mergeAll(concurrent) {
    if (concurrent === void 0) {
        concurrent = Number.POSITIVE_INFINITY;
    }
    return Object(_mergeMap__WEBPACK_IMPORTED_MODULE_0__["mergeMap"])(_util_identity__WEBPACK_IMPORTED_MODULE_1__["identity"], concurrent);
}
//# sourceMappingURL=mergeAll.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/operators/mergeMap.js":
/*!*****************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/operators/mergeMap.js ***!
  \*****************************************************************/
/*! exports provided: mergeMap, MergeMapOperator, MergeMapSubscriber, flatMap */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "mergeMap", function() { return mergeMap; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MergeMapOperator", function() { return MergeMapOperator; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MergeMapSubscriber", function() { return MergeMapSubscriber; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "flatMap", function() { return flatMap; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
/* harmony import */ var _map__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./map */ "../node_modules/rxjs/_esm5/internal/operators/map.js");
/* harmony import */ var _observable_from__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../observable/from */ "../node_modules/rxjs/_esm5/internal/observable/from.js");
/* harmony import */ var _innerSubscribe__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../innerSubscribe */ "../node_modules/rxjs/_esm5/internal/innerSubscribe.js");
/** PURE_IMPORTS_START tslib,_map,_observable_from,_innerSubscribe PURE_IMPORTS_END */




function mergeMap(project, resultSelector, concurrent) {
    if (concurrent === void 0) {
        concurrent = Number.POSITIVE_INFINITY;
    }
    if (typeof resultSelector === 'function') {
        return function (source) { return source.pipe(mergeMap(function (a, i) { return Object(_observable_from__WEBPACK_IMPORTED_MODULE_2__["from"])(project(a, i)).pipe(Object(_map__WEBPACK_IMPORTED_MODULE_1__["map"])(function (b, ii) { return resultSelector(a, b, i, ii); })); }, concurrent)); };
    }
    else if (typeof resultSelector === 'number') {
        concurrent = resultSelector;
    }
    return function (source) { return source.lift(new MergeMapOperator(project, concurrent)); };
}
var MergeMapOperator = /*@__PURE__*/ (function () {
    function MergeMapOperator(project, concurrent) {
        if (concurrent === void 0) {
            concurrent = Number.POSITIVE_INFINITY;
        }
        this.project = project;
        this.concurrent = concurrent;
    }
    MergeMapOperator.prototype.call = function (observer, source) {
        return source.subscribe(new MergeMapSubscriber(observer, this.project, this.concurrent));
    };
    return MergeMapOperator;
}());

var MergeMapSubscriber = /*@__PURE__*/ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](MergeMapSubscriber, _super);
    function MergeMapSubscriber(destination, project, concurrent) {
        if (concurrent === void 0) {
            concurrent = Number.POSITIVE_INFINITY;
        }
        var _this = _super.call(this, destination) || this;
        _this.project = project;
        _this.concurrent = concurrent;
        _this.hasCompleted = false;
        _this.buffer = [];
        _this.active = 0;
        _this.index = 0;
        return _this;
    }
    MergeMapSubscriber.prototype._next = function (value) {
        if (this.active < this.concurrent) {
            this._tryNext(value);
        }
        else {
            this.buffer.push(value);
        }
    };
    MergeMapSubscriber.prototype._tryNext = function (value) {
        var result;
        var index = this.index++;
        try {
            result = this.project(value, index);
        }
        catch (err) {
            this.destination.error(err);
            return;
        }
        this.active++;
        this._innerSub(result);
    };
    MergeMapSubscriber.prototype._innerSub = function (ish) {
        var innerSubscriber = new _innerSubscribe__WEBPACK_IMPORTED_MODULE_3__["SimpleInnerSubscriber"](this);
        var destination = this.destination;
        destination.add(innerSubscriber);
        var innerSubscription = Object(_innerSubscribe__WEBPACK_IMPORTED_MODULE_3__["innerSubscribe"])(ish, innerSubscriber);
        if (innerSubscription !== innerSubscriber) {
            destination.add(innerSubscription);
        }
    };
    MergeMapSubscriber.prototype._complete = function () {
        this.hasCompleted = true;
        if (this.active === 0 && this.buffer.length === 0) {
            this.destination.complete();
        }
        this.unsubscribe();
    };
    MergeMapSubscriber.prototype.notifyNext = function (innerValue) {
        this.destination.next(innerValue);
    };
    MergeMapSubscriber.prototype.notifyComplete = function () {
        var buffer = this.buffer;
        this.active--;
        if (buffer.length > 0) {
            this._next(buffer.shift());
        }
        else if (this.active === 0 && this.hasCompleted) {
            this.destination.complete();
        }
    };
    return MergeMapSubscriber;
}(_innerSubscribe__WEBPACK_IMPORTED_MODULE_3__["SimpleOuterSubscriber"]));

var flatMap = mergeMap;
//# sourceMappingURL=mergeMap.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/operators/mergeMapTo.js":
/*!*******************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/operators/mergeMapTo.js ***!
  \*******************************************************************/
/*! exports provided: mergeMapTo */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "mergeMapTo", function() { return mergeMapTo; });
/* harmony import */ var _mergeMap__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./mergeMap */ "../node_modules/rxjs/_esm5/internal/operators/mergeMap.js");
/** PURE_IMPORTS_START _mergeMap PURE_IMPORTS_END */

function mergeMapTo(innerObservable, resultSelector, concurrent) {
    if (concurrent === void 0) {
        concurrent = Number.POSITIVE_INFINITY;
    }
    if (typeof resultSelector === 'function') {
        return Object(_mergeMap__WEBPACK_IMPORTED_MODULE_0__["mergeMap"])(function () { return innerObservable; }, resultSelector, concurrent);
    }
    if (typeof resultSelector === 'number') {
        concurrent = resultSelector;
    }
    return Object(_mergeMap__WEBPACK_IMPORTED_MODULE_0__["mergeMap"])(function () { return innerObservable; }, concurrent);
}
//# sourceMappingURL=mergeMapTo.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/operators/mergeScan.js":
/*!******************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/operators/mergeScan.js ***!
  \******************************************************************/
/*! exports provided: mergeScan, MergeScanOperator, MergeScanSubscriber */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "mergeScan", function() { return mergeScan; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MergeScanOperator", function() { return MergeScanOperator; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MergeScanSubscriber", function() { return MergeScanSubscriber; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
/* harmony import */ var _innerSubscribe__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../innerSubscribe */ "../node_modules/rxjs/_esm5/internal/innerSubscribe.js");
/** PURE_IMPORTS_START tslib,_innerSubscribe PURE_IMPORTS_END */


function mergeScan(accumulator, seed, concurrent) {
    if (concurrent === void 0) {
        concurrent = Number.POSITIVE_INFINITY;
    }
    return function (source) { return source.lift(new MergeScanOperator(accumulator, seed, concurrent)); };
}
var MergeScanOperator = /*@__PURE__*/ (function () {
    function MergeScanOperator(accumulator, seed, concurrent) {
        this.accumulator = accumulator;
        this.seed = seed;
        this.concurrent = concurrent;
    }
    MergeScanOperator.prototype.call = function (subscriber, source) {
        return source.subscribe(new MergeScanSubscriber(subscriber, this.accumulator, this.seed, this.concurrent));
    };
    return MergeScanOperator;
}());

var MergeScanSubscriber = /*@__PURE__*/ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](MergeScanSubscriber, _super);
    function MergeScanSubscriber(destination, accumulator, acc, concurrent) {
        var _this = _super.call(this, destination) || this;
        _this.accumulator = accumulator;
        _this.acc = acc;
        _this.concurrent = concurrent;
        _this.hasValue = false;
        _this.hasCompleted = false;
        _this.buffer = [];
        _this.active = 0;
        _this.index = 0;
        return _this;
    }
    MergeScanSubscriber.prototype._next = function (value) {
        if (this.active < this.concurrent) {
            var index = this.index++;
            var destination = this.destination;
            var ish = void 0;
            try {
                var accumulator = this.accumulator;
                ish = accumulator(this.acc, value, index);
            }
            catch (e) {
                return destination.error(e);
            }
            this.active++;
            this._innerSub(ish);
        }
        else {
            this.buffer.push(value);
        }
    };
    MergeScanSubscriber.prototype._innerSub = function (ish) {
        var innerSubscriber = new _innerSubscribe__WEBPACK_IMPORTED_MODULE_1__["SimpleInnerSubscriber"](this);
        var destination = this.destination;
        destination.add(innerSubscriber);
        var innerSubscription = Object(_innerSubscribe__WEBPACK_IMPORTED_MODULE_1__["innerSubscribe"])(ish, innerSubscriber);
        if (innerSubscription !== innerSubscriber) {
            destination.add(innerSubscription);
        }
    };
    MergeScanSubscriber.prototype._complete = function () {
        this.hasCompleted = true;
        if (this.active === 0 && this.buffer.length === 0) {
            if (this.hasValue === false) {
                this.destination.next(this.acc);
            }
            this.destination.complete();
        }
        this.unsubscribe();
    };
    MergeScanSubscriber.prototype.notifyNext = function (innerValue) {
        var destination = this.destination;
        this.acc = innerValue;
        this.hasValue = true;
        destination.next(innerValue);
    };
    MergeScanSubscriber.prototype.notifyComplete = function () {
        var buffer = this.buffer;
        this.active--;
        if (buffer.length > 0) {
            this._next(buffer.shift());
        }
        else if (this.active === 0 && this.hasCompleted) {
            if (this.hasValue === false) {
                this.destination.next(this.acc);
            }
            this.destination.complete();
        }
    };
    return MergeScanSubscriber;
}(_innerSubscribe__WEBPACK_IMPORTED_MODULE_1__["SimpleOuterSubscriber"]));

//# sourceMappingURL=mergeScan.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/operators/min.js":
/*!************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/operators/min.js ***!
  \************************************************************/
/*! exports provided: min */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "min", function() { return min; });
/* harmony import */ var _reduce__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./reduce */ "../node_modules/rxjs/_esm5/internal/operators/reduce.js");
/** PURE_IMPORTS_START _reduce PURE_IMPORTS_END */

function min(comparer) {
    var min = (typeof comparer === 'function')
        ? function (x, y) { return comparer(x, y) < 0 ? x : y; }
        : function (x, y) { return x < y ? x : y; };
    return Object(_reduce__WEBPACK_IMPORTED_MODULE_0__["reduce"])(min);
}
//# sourceMappingURL=min.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/operators/multicast.js":
/*!******************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/operators/multicast.js ***!
  \******************************************************************/
/*! exports provided: multicast, MulticastOperator */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "multicast", function() { return multicast; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MulticastOperator", function() { return MulticastOperator; });
/* harmony import */ var _observable_ConnectableObservable__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../observable/ConnectableObservable */ "../node_modules/rxjs/_esm5/internal/observable/ConnectableObservable.js");
/** PURE_IMPORTS_START _observable_ConnectableObservable PURE_IMPORTS_END */

function multicast(subjectOrSubjectFactory, selector) {
    return function multicastOperatorFunction(source) {
        var subjectFactory;
        if (typeof subjectOrSubjectFactory === 'function') {
            subjectFactory = subjectOrSubjectFactory;
        }
        else {
            subjectFactory = function subjectFactory() {
                return subjectOrSubjectFactory;
            };
        }
        if (typeof selector === 'function') {
            return source.lift(new MulticastOperator(subjectFactory, selector));
        }
        var connectable = Object.create(source, _observable_ConnectableObservable__WEBPACK_IMPORTED_MODULE_0__["connectableObservableDescriptor"]);
        connectable.source = source;
        connectable.subjectFactory = subjectFactory;
        return connectable;
    };
}
var MulticastOperator = /*@__PURE__*/ (function () {
    function MulticastOperator(subjectFactory, selector) {
        this.subjectFactory = subjectFactory;
        this.selector = selector;
    }
    MulticastOperator.prototype.call = function (subscriber, source) {
        var selector = this.selector;
        var subject = this.subjectFactory();
        var subscription = selector(subject).subscribe(subscriber);
        subscription.add(source.subscribe(subject));
        return subscription;
    };
    return MulticastOperator;
}());

//# sourceMappingURL=multicast.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/operators/observeOn.js":
/*!******************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/operators/observeOn.js ***!
  \******************************************************************/
/*! exports provided: observeOn, ObserveOnOperator, ObserveOnSubscriber, ObserveOnMessage */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "observeOn", function() { return observeOn; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ObserveOnOperator", function() { return ObserveOnOperator; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ObserveOnSubscriber", function() { return ObserveOnSubscriber; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ObserveOnMessage", function() { return ObserveOnMessage; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
/* harmony import */ var _Subscriber__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Subscriber */ "../node_modules/rxjs/_esm5/internal/Subscriber.js");
/* harmony import */ var _Notification__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../Notification */ "../node_modules/rxjs/_esm5/internal/Notification.js");
/** PURE_IMPORTS_START tslib,_Subscriber,_Notification PURE_IMPORTS_END */



function observeOn(scheduler, delay) {
    if (delay === void 0) {
        delay = 0;
    }
    return function observeOnOperatorFunction(source) {
        return source.lift(new ObserveOnOperator(scheduler, delay));
    };
}
var ObserveOnOperator = /*@__PURE__*/ (function () {
    function ObserveOnOperator(scheduler, delay) {
        if (delay === void 0) {
            delay = 0;
        }
        this.scheduler = scheduler;
        this.delay = delay;
    }
    ObserveOnOperator.prototype.call = function (subscriber, source) {
        return source.subscribe(new ObserveOnSubscriber(subscriber, this.scheduler, this.delay));
    };
    return ObserveOnOperator;
}());

var ObserveOnSubscriber = /*@__PURE__*/ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](ObserveOnSubscriber, _super);
    function ObserveOnSubscriber(destination, scheduler, delay) {
        if (delay === void 0) {
            delay = 0;
        }
        var _this = _super.call(this, destination) || this;
        _this.scheduler = scheduler;
        _this.delay = delay;
        return _this;
    }
    ObserveOnSubscriber.dispatch = function (arg) {
        var notification = arg.notification, destination = arg.destination;
        notification.observe(destination);
        this.unsubscribe();
    };
    ObserveOnSubscriber.prototype.scheduleMessage = function (notification) {
        var destination = this.destination;
        destination.add(this.scheduler.schedule(ObserveOnSubscriber.dispatch, this.delay, new ObserveOnMessage(notification, this.destination)));
    };
    ObserveOnSubscriber.prototype._next = function (value) {
        this.scheduleMessage(_Notification__WEBPACK_IMPORTED_MODULE_2__["Notification"].createNext(value));
    };
    ObserveOnSubscriber.prototype._error = function (err) {
        this.scheduleMessage(_Notification__WEBPACK_IMPORTED_MODULE_2__["Notification"].createError(err));
        this.unsubscribe();
    };
    ObserveOnSubscriber.prototype._complete = function () {
        this.scheduleMessage(_Notification__WEBPACK_IMPORTED_MODULE_2__["Notification"].createComplete());
        this.unsubscribe();
    };
    return ObserveOnSubscriber;
}(_Subscriber__WEBPACK_IMPORTED_MODULE_1__["Subscriber"]));

var ObserveOnMessage = /*@__PURE__*/ (function () {
    function ObserveOnMessage(notification, destination) {
        this.notification = notification;
        this.destination = destination;
    }
    return ObserveOnMessage;
}());

//# sourceMappingURL=observeOn.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/operators/onErrorResumeNext.js":
/*!**************************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/operators/onErrorResumeNext.js ***!
  \**************************************************************************/
/*! exports provided: onErrorResumeNext, onErrorResumeNextStatic */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "onErrorResumeNext", function() { return onErrorResumeNext; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "onErrorResumeNextStatic", function() { return onErrorResumeNextStatic; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
/* harmony import */ var _observable_from__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../observable/from */ "../node_modules/rxjs/_esm5/internal/observable/from.js");
/* harmony import */ var _util_isArray__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../util/isArray */ "../node_modules/rxjs/_esm5/internal/util/isArray.js");
/* harmony import */ var _innerSubscribe__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../innerSubscribe */ "../node_modules/rxjs/_esm5/internal/innerSubscribe.js");
/** PURE_IMPORTS_START tslib,_observable_from,_util_isArray,_innerSubscribe PURE_IMPORTS_END */




function onErrorResumeNext() {
    var nextSources = [];
    for (var _i = 0; _i < arguments.length; _i++) {
        nextSources[_i] = arguments[_i];
    }
    if (nextSources.length === 1 && Object(_util_isArray__WEBPACK_IMPORTED_MODULE_2__["isArray"])(nextSources[0])) {
        nextSources = nextSources[0];
    }
    return function (source) { return source.lift(new OnErrorResumeNextOperator(nextSources)); };
}
function onErrorResumeNextStatic() {
    var nextSources = [];
    for (var _i = 0; _i < arguments.length; _i++) {
        nextSources[_i] = arguments[_i];
    }
    var source = undefined;
    if (nextSources.length === 1 && Object(_util_isArray__WEBPACK_IMPORTED_MODULE_2__["isArray"])(nextSources[0])) {
        nextSources = nextSources[0];
    }
    source = nextSources.shift();
    return Object(_observable_from__WEBPACK_IMPORTED_MODULE_1__["from"])(source).lift(new OnErrorResumeNextOperator(nextSources));
}
var OnErrorResumeNextOperator = /*@__PURE__*/ (function () {
    function OnErrorResumeNextOperator(nextSources) {
        this.nextSources = nextSources;
    }
    OnErrorResumeNextOperator.prototype.call = function (subscriber, source) {
        return source.subscribe(new OnErrorResumeNextSubscriber(subscriber, this.nextSources));
    };
    return OnErrorResumeNextOperator;
}());
var OnErrorResumeNextSubscriber = /*@__PURE__*/ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](OnErrorResumeNextSubscriber, _super);
    function OnErrorResumeNextSubscriber(destination, nextSources) {
        var _this = _super.call(this, destination) || this;
        _this.destination = destination;
        _this.nextSources = nextSources;
        return _this;
    }
    OnErrorResumeNextSubscriber.prototype.notifyError = function () {
        this.subscribeToNextSource();
    };
    OnErrorResumeNextSubscriber.prototype.notifyComplete = function () {
        this.subscribeToNextSource();
    };
    OnErrorResumeNextSubscriber.prototype._error = function (err) {
        this.subscribeToNextSource();
        this.unsubscribe();
    };
    OnErrorResumeNextSubscriber.prototype._complete = function () {
        this.subscribeToNextSource();
        this.unsubscribe();
    };
    OnErrorResumeNextSubscriber.prototype.subscribeToNextSource = function () {
        var next = this.nextSources.shift();
        if (!!next) {
            var innerSubscriber = new _innerSubscribe__WEBPACK_IMPORTED_MODULE_3__["SimpleInnerSubscriber"](this);
            var destination = this.destination;
            destination.add(innerSubscriber);
            var innerSubscription = Object(_innerSubscribe__WEBPACK_IMPORTED_MODULE_3__["innerSubscribe"])(next, innerSubscriber);
            if (innerSubscription !== innerSubscriber) {
                destination.add(innerSubscription);
            }
        }
        else {
            this.destination.complete();
        }
    };
    return OnErrorResumeNextSubscriber;
}(_innerSubscribe__WEBPACK_IMPORTED_MODULE_3__["SimpleOuterSubscriber"]));
//# sourceMappingURL=onErrorResumeNext.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/operators/pairwise.js":
/*!*****************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/operators/pairwise.js ***!
  \*****************************************************************/
/*! exports provided: pairwise */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "pairwise", function() { return pairwise; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
/* harmony import */ var _Subscriber__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Subscriber */ "../node_modules/rxjs/_esm5/internal/Subscriber.js");
/** PURE_IMPORTS_START tslib,_Subscriber PURE_IMPORTS_END */


function pairwise() {
    return function (source) { return source.lift(new PairwiseOperator()); };
}
var PairwiseOperator = /*@__PURE__*/ (function () {
    function PairwiseOperator() {
    }
    PairwiseOperator.prototype.call = function (subscriber, source) {
        return source.subscribe(new PairwiseSubscriber(subscriber));
    };
    return PairwiseOperator;
}());
var PairwiseSubscriber = /*@__PURE__*/ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](PairwiseSubscriber, _super);
    function PairwiseSubscriber(destination) {
        var _this = _super.call(this, destination) || this;
        _this.hasPrev = false;
        return _this;
    }
    PairwiseSubscriber.prototype._next = function (value) {
        var pair;
        if (this.hasPrev) {
            pair = [this.prev, value];
        }
        else {
            this.hasPrev = true;
        }
        this.prev = value;
        if (pair) {
            this.destination.next(pair);
        }
    };
    return PairwiseSubscriber;
}(_Subscriber__WEBPACK_IMPORTED_MODULE_1__["Subscriber"]));
//# sourceMappingURL=pairwise.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/operators/partition.js":
/*!******************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/operators/partition.js ***!
  \******************************************************************/
/*! exports provided: partition */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "partition", function() { return partition; });
/* harmony import */ var _util_not__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../util/not */ "../node_modules/rxjs/_esm5/internal/util/not.js");
/* harmony import */ var _filter__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./filter */ "../node_modules/rxjs/_esm5/internal/operators/filter.js");
/** PURE_IMPORTS_START _util_not,_filter PURE_IMPORTS_END */


function partition(predicate, thisArg) {
    return function (source) {
        return [
            Object(_filter__WEBPACK_IMPORTED_MODULE_1__["filter"])(predicate, thisArg)(source),
            Object(_filter__WEBPACK_IMPORTED_MODULE_1__["filter"])(Object(_util_not__WEBPACK_IMPORTED_MODULE_0__["not"])(predicate, thisArg))(source)
        ];
    };
}
//# sourceMappingURL=partition.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/operators/pluck.js":
/*!**************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/operators/pluck.js ***!
  \**************************************************************/
/*! exports provided: pluck */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "pluck", function() { return pluck; });
/* harmony import */ var _map__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./map */ "../node_modules/rxjs/_esm5/internal/operators/map.js");
/** PURE_IMPORTS_START _map PURE_IMPORTS_END */

function pluck() {
    var properties = [];
    for (var _i = 0; _i < arguments.length; _i++) {
        properties[_i] = arguments[_i];
    }
    var length = properties.length;
    if (length === 0) {
        throw new Error('list of properties cannot be empty.');
    }
    return function (source) { return Object(_map__WEBPACK_IMPORTED_MODULE_0__["map"])(plucker(properties, length))(source); };
}
function plucker(props, length) {
    var mapper = function (x) {
        var currentProp = x;
        for (var i = 0; i < length; i++) {
            var p = currentProp != null ? currentProp[props[i]] : undefined;
            if (p !== void 0) {
                currentProp = p;
            }
            else {
                return undefined;
            }
        }
        return currentProp;
    };
    return mapper;
}
//# sourceMappingURL=pluck.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/operators/publish.js":
/*!****************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/operators/publish.js ***!
  \****************************************************************/
/*! exports provided: publish */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "publish", function() { return publish; });
/* harmony import */ var _Subject__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Subject */ "../node_modules/rxjs/_esm5/internal/Subject.js");
/* harmony import */ var _multicast__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./multicast */ "../node_modules/rxjs/_esm5/internal/operators/multicast.js");
/** PURE_IMPORTS_START _Subject,_multicast PURE_IMPORTS_END */


function publish(selector) {
    return selector ?
        Object(_multicast__WEBPACK_IMPORTED_MODULE_1__["multicast"])(function () { return new _Subject__WEBPACK_IMPORTED_MODULE_0__["Subject"](); }, selector) :
        Object(_multicast__WEBPACK_IMPORTED_MODULE_1__["multicast"])(new _Subject__WEBPACK_IMPORTED_MODULE_0__["Subject"]());
}
//# sourceMappingURL=publish.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/operators/publishBehavior.js":
/*!************************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/operators/publishBehavior.js ***!
  \************************************************************************/
/*! exports provided: publishBehavior */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "publishBehavior", function() { return publishBehavior; });
/* harmony import */ var _BehaviorSubject__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../BehaviorSubject */ "../node_modules/rxjs/_esm5/internal/BehaviorSubject.js");
/* harmony import */ var _multicast__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./multicast */ "../node_modules/rxjs/_esm5/internal/operators/multicast.js");
/** PURE_IMPORTS_START _BehaviorSubject,_multicast PURE_IMPORTS_END */


function publishBehavior(value) {
    return function (source) { return Object(_multicast__WEBPACK_IMPORTED_MODULE_1__["multicast"])(new _BehaviorSubject__WEBPACK_IMPORTED_MODULE_0__["BehaviorSubject"](value))(source); };
}
//# sourceMappingURL=publishBehavior.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/operators/publishLast.js":
/*!********************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/operators/publishLast.js ***!
  \********************************************************************/
/*! exports provided: publishLast */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "publishLast", function() { return publishLast; });
/* harmony import */ var _AsyncSubject__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../AsyncSubject */ "../node_modules/rxjs/_esm5/internal/AsyncSubject.js");
/* harmony import */ var _multicast__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./multicast */ "../node_modules/rxjs/_esm5/internal/operators/multicast.js");
/** PURE_IMPORTS_START _AsyncSubject,_multicast PURE_IMPORTS_END */


function publishLast() {
    return function (source) { return Object(_multicast__WEBPACK_IMPORTED_MODULE_1__["multicast"])(new _AsyncSubject__WEBPACK_IMPORTED_MODULE_0__["AsyncSubject"]())(source); };
}
//# sourceMappingURL=publishLast.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/operators/publishReplay.js":
/*!**********************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/operators/publishReplay.js ***!
  \**********************************************************************/
/*! exports provided: publishReplay */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "publishReplay", function() { return publishReplay; });
/* harmony import */ var _ReplaySubject__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../ReplaySubject */ "../node_modules/rxjs/_esm5/internal/ReplaySubject.js");
/* harmony import */ var _multicast__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./multicast */ "../node_modules/rxjs/_esm5/internal/operators/multicast.js");
/** PURE_IMPORTS_START _ReplaySubject,_multicast PURE_IMPORTS_END */


function publishReplay(bufferSize, windowTime, selectorOrScheduler, scheduler) {
    if (selectorOrScheduler && typeof selectorOrScheduler !== 'function') {
        scheduler = selectorOrScheduler;
    }
    var selector = typeof selectorOrScheduler === 'function' ? selectorOrScheduler : undefined;
    var subject = new _ReplaySubject__WEBPACK_IMPORTED_MODULE_0__["ReplaySubject"](bufferSize, windowTime, scheduler);
    return function (source) { return Object(_multicast__WEBPACK_IMPORTED_MODULE_1__["multicast"])(function () { return subject; }, selector)(source); };
}
//# sourceMappingURL=publishReplay.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/operators/race.js":
/*!*************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/operators/race.js ***!
  \*************************************************************/
/*! exports provided: race */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "race", function() { return race; });
/* harmony import */ var _util_isArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../util/isArray */ "../node_modules/rxjs/_esm5/internal/util/isArray.js");
/* harmony import */ var _observable_race__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../observable/race */ "../node_modules/rxjs/_esm5/internal/observable/race.js");
/** PURE_IMPORTS_START _util_isArray,_observable_race PURE_IMPORTS_END */


function race() {
    var observables = [];
    for (var _i = 0; _i < arguments.length; _i++) {
        observables[_i] = arguments[_i];
    }
    return function raceOperatorFunction(source) {
        if (observables.length === 1 && Object(_util_isArray__WEBPACK_IMPORTED_MODULE_0__["isArray"])(observables[0])) {
            observables = observables[0];
        }
        return source.lift.call(_observable_race__WEBPACK_IMPORTED_MODULE_1__["race"].apply(void 0, [source].concat(observables)));
    };
}
//# sourceMappingURL=race.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/operators/reduce.js":
/*!***************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/operators/reduce.js ***!
  \***************************************************************/
/*! exports provided: reduce */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "reduce", function() { return reduce; });
/* harmony import */ var _scan__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./scan */ "../node_modules/rxjs/_esm5/internal/operators/scan.js");
/* harmony import */ var _takeLast__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./takeLast */ "../node_modules/rxjs/_esm5/internal/operators/takeLast.js");
/* harmony import */ var _defaultIfEmpty__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./defaultIfEmpty */ "../node_modules/rxjs/_esm5/internal/operators/defaultIfEmpty.js");
/* harmony import */ var _util_pipe__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../util/pipe */ "../node_modules/rxjs/_esm5/internal/util/pipe.js");
/** PURE_IMPORTS_START _scan,_takeLast,_defaultIfEmpty,_util_pipe PURE_IMPORTS_END */




function reduce(accumulator, seed) {
    if (arguments.length >= 2) {
        return function reduceOperatorFunctionWithSeed(source) {
            return Object(_util_pipe__WEBPACK_IMPORTED_MODULE_3__["pipe"])(Object(_scan__WEBPACK_IMPORTED_MODULE_0__["scan"])(accumulator, seed), Object(_takeLast__WEBPACK_IMPORTED_MODULE_1__["takeLast"])(1), Object(_defaultIfEmpty__WEBPACK_IMPORTED_MODULE_2__["defaultIfEmpty"])(seed))(source);
        };
    }
    return function reduceOperatorFunction(source) {
        return Object(_util_pipe__WEBPACK_IMPORTED_MODULE_3__["pipe"])(Object(_scan__WEBPACK_IMPORTED_MODULE_0__["scan"])(function (acc, value, index) { return accumulator(acc, value, index + 1); }), Object(_takeLast__WEBPACK_IMPORTED_MODULE_1__["takeLast"])(1))(source);
    };
}
//# sourceMappingURL=reduce.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/operators/refCount.js":
/*!*****************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/operators/refCount.js ***!
  \*****************************************************************/
/*! exports provided: refCount */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "refCount", function() { return refCount; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
/* harmony import */ var _Subscriber__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Subscriber */ "../node_modules/rxjs/_esm5/internal/Subscriber.js");
/** PURE_IMPORTS_START tslib,_Subscriber PURE_IMPORTS_END */


function refCount() {
    return function refCountOperatorFunction(source) {
        return source.lift(new RefCountOperator(source));
    };
}
var RefCountOperator = /*@__PURE__*/ (function () {
    function RefCountOperator(connectable) {
        this.connectable = connectable;
    }
    RefCountOperator.prototype.call = function (subscriber, source) {
        var connectable = this.connectable;
        connectable._refCount++;
        var refCounter = new RefCountSubscriber(subscriber, connectable);
        var subscription = source.subscribe(refCounter);
        if (!refCounter.closed) {
            refCounter.connection = connectable.connect();
        }
        return subscription;
    };
    return RefCountOperator;
}());
var RefCountSubscriber = /*@__PURE__*/ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](RefCountSubscriber, _super);
    function RefCountSubscriber(destination, connectable) {
        var _this = _super.call(this, destination) || this;
        _this.connectable = connectable;
        return _this;
    }
    RefCountSubscriber.prototype._unsubscribe = function () {
        var connectable = this.connectable;
        if (!connectable) {
            this.connection = null;
            return;
        }
        this.connectable = null;
        var refCount = connectable._refCount;
        if (refCount <= 0) {
            this.connection = null;
            return;
        }
        connectable._refCount = refCount - 1;
        if (refCount > 1) {
            this.connection = null;
            return;
        }
        var connection = this.connection;
        var sharedConnection = connectable._connection;
        this.connection = null;
        if (sharedConnection && (!connection || sharedConnection === connection)) {
            sharedConnection.unsubscribe();
        }
    };
    return RefCountSubscriber;
}(_Subscriber__WEBPACK_IMPORTED_MODULE_1__["Subscriber"]));
//# sourceMappingURL=refCount.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/operators/repeat.js":
/*!***************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/operators/repeat.js ***!
  \***************************************************************/
/*! exports provided: repeat */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "repeat", function() { return repeat; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
/* harmony import */ var _Subscriber__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Subscriber */ "../node_modules/rxjs/_esm5/internal/Subscriber.js");
/* harmony import */ var _observable_empty__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../observable/empty */ "../node_modules/rxjs/_esm5/internal/observable/empty.js");
/** PURE_IMPORTS_START tslib,_Subscriber,_observable_empty PURE_IMPORTS_END */



function repeat(count) {
    if (count === void 0) {
        count = -1;
    }
    return function (source) {
        if (count === 0) {
            return Object(_observable_empty__WEBPACK_IMPORTED_MODULE_2__["empty"])();
        }
        else if (count < 0) {
            return source.lift(new RepeatOperator(-1, source));
        }
        else {
            return source.lift(new RepeatOperator(count - 1, source));
        }
    };
}
var RepeatOperator = /*@__PURE__*/ (function () {
    function RepeatOperator(count, source) {
        this.count = count;
        this.source = source;
    }
    RepeatOperator.prototype.call = function (subscriber, source) {
        return source.subscribe(new RepeatSubscriber(subscriber, this.count, this.source));
    };
    return RepeatOperator;
}());
var RepeatSubscriber = /*@__PURE__*/ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](RepeatSubscriber, _super);
    function RepeatSubscriber(destination, count, source) {
        var _this = _super.call(this, destination) || this;
        _this.count = count;
        _this.source = source;
        return _this;
    }
    RepeatSubscriber.prototype.complete = function () {
        if (!this.isStopped) {
            var _a = this, source = _a.source, count = _a.count;
            if (count === 0) {
                return _super.prototype.complete.call(this);
            }
            else if (count > -1) {
                this.count = count - 1;
            }
            source.subscribe(this._unsubscribeAndRecycle());
        }
    };
    return RepeatSubscriber;
}(_Subscriber__WEBPACK_IMPORTED_MODULE_1__["Subscriber"]));
//# sourceMappingURL=repeat.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/operators/repeatWhen.js":
/*!*******************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/operators/repeatWhen.js ***!
  \*******************************************************************/
/*! exports provided: repeatWhen */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "repeatWhen", function() { return repeatWhen; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
/* harmony import */ var _Subject__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Subject */ "../node_modules/rxjs/_esm5/internal/Subject.js");
/* harmony import */ var _innerSubscribe__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../innerSubscribe */ "../node_modules/rxjs/_esm5/internal/innerSubscribe.js");
/** PURE_IMPORTS_START tslib,_Subject,_innerSubscribe PURE_IMPORTS_END */



function repeatWhen(notifier) {
    return function (source) { return source.lift(new RepeatWhenOperator(notifier)); };
}
var RepeatWhenOperator = /*@__PURE__*/ (function () {
    function RepeatWhenOperator(notifier) {
        this.notifier = notifier;
    }
    RepeatWhenOperator.prototype.call = function (subscriber, source) {
        return source.subscribe(new RepeatWhenSubscriber(subscriber, this.notifier, source));
    };
    return RepeatWhenOperator;
}());
var RepeatWhenSubscriber = /*@__PURE__*/ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](RepeatWhenSubscriber, _super);
    function RepeatWhenSubscriber(destination, notifier, source) {
        var _this = _super.call(this, destination) || this;
        _this.notifier = notifier;
        _this.source = source;
        _this.sourceIsBeingSubscribedTo = true;
        return _this;
    }
    RepeatWhenSubscriber.prototype.notifyNext = function () {
        this.sourceIsBeingSubscribedTo = true;
        this.source.subscribe(this);
    };
    RepeatWhenSubscriber.prototype.notifyComplete = function () {
        if (this.sourceIsBeingSubscribedTo === false) {
            return _super.prototype.complete.call(this);
        }
    };
    RepeatWhenSubscriber.prototype.complete = function () {
        this.sourceIsBeingSubscribedTo = false;
        if (!this.isStopped) {
            if (!this.retries) {
                this.subscribeToRetries();
            }
            if (!this.retriesSubscription || this.retriesSubscription.closed) {
                return _super.prototype.complete.call(this);
            }
            this._unsubscribeAndRecycle();
            this.notifications.next(undefined);
        }
    };
    RepeatWhenSubscriber.prototype._unsubscribe = function () {
        var _a = this, notifications = _a.notifications, retriesSubscription = _a.retriesSubscription;
        if (notifications) {
            notifications.unsubscribe();
            this.notifications = undefined;
        }
        if (retriesSubscription) {
            retriesSubscription.unsubscribe();
            this.retriesSubscription = undefined;
        }
        this.retries = undefined;
    };
    RepeatWhenSubscriber.prototype._unsubscribeAndRecycle = function () {
        var _unsubscribe = this._unsubscribe;
        this._unsubscribe = null;
        _super.prototype._unsubscribeAndRecycle.call(this);
        this._unsubscribe = _unsubscribe;
        return this;
    };
    RepeatWhenSubscriber.prototype.subscribeToRetries = function () {
        this.notifications = new _Subject__WEBPACK_IMPORTED_MODULE_1__["Subject"]();
        var retries;
        try {
            var notifier = this.notifier;
            retries = notifier(this.notifications);
        }
        catch (e) {
            return _super.prototype.complete.call(this);
        }
        this.retries = retries;
        this.retriesSubscription = Object(_innerSubscribe__WEBPACK_IMPORTED_MODULE_2__["innerSubscribe"])(retries, new _innerSubscribe__WEBPACK_IMPORTED_MODULE_2__["SimpleInnerSubscriber"](this));
    };
    return RepeatWhenSubscriber;
}(_innerSubscribe__WEBPACK_IMPORTED_MODULE_2__["SimpleOuterSubscriber"]));
//# sourceMappingURL=repeatWhen.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/operators/retry.js":
/*!**************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/operators/retry.js ***!
  \**************************************************************/
/*! exports provided: retry */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "retry", function() { return retry; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
/* harmony import */ var _Subscriber__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Subscriber */ "../node_modules/rxjs/_esm5/internal/Subscriber.js");
/** PURE_IMPORTS_START tslib,_Subscriber PURE_IMPORTS_END */


function retry(count) {
    if (count === void 0) {
        count = -1;
    }
    return function (source) { return source.lift(new RetryOperator(count, source)); };
}
var RetryOperator = /*@__PURE__*/ (function () {
    function RetryOperator(count, source) {
        this.count = count;
        this.source = source;
    }
    RetryOperator.prototype.call = function (subscriber, source) {
        return source.subscribe(new RetrySubscriber(subscriber, this.count, this.source));
    };
    return RetryOperator;
}());
var RetrySubscriber = /*@__PURE__*/ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](RetrySubscriber, _super);
    function RetrySubscriber(destination, count, source) {
        var _this = _super.call(this, destination) || this;
        _this.count = count;
        _this.source = source;
        return _this;
    }
    RetrySubscriber.prototype.error = function (err) {
        if (!this.isStopped) {
            var _a = this, source = _a.source, count = _a.count;
            if (count === 0) {
                return _super.prototype.error.call(this, err);
            }
            else if (count > -1) {
                this.count = count - 1;
            }
            source.subscribe(this._unsubscribeAndRecycle());
        }
    };
    return RetrySubscriber;
}(_Subscriber__WEBPACK_IMPORTED_MODULE_1__["Subscriber"]));
//# sourceMappingURL=retry.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/operators/retryWhen.js":
/*!******************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/operators/retryWhen.js ***!
  \******************************************************************/
/*! exports provided: retryWhen */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "retryWhen", function() { return retryWhen; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
/* harmony import */ var _Subject__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Subject */ "../node_modules/rxjs/_esm5/internal/Subject.js");
/* harmony import */ var _innerSubscribe__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../innerSubscribe */ "../node_modules/rxjs/_esm5/internal/innerSubscribe.js");
/** PURE_IMPORTS_START tslib,_Subject,_innerSubscribe PURE_IMPORTS_END */



function retryWhen(notifier) {
    return function (source) { return source.lift(new RetryWhenOperator(notifier, source)); };
}
var RetryWhenOperator = /*@__PURE__*/ (function () {
    function RetryWhenOperator(notifier, source) {
        this.notifier = notifier;
        this.source = source;
    }
    RetryWhenOperator.prototype.call = function (subscriber, source) {
        return source.subscribe(new RetryWhenSubscriber(subscriber, this.notifier, this.source));
    };
    return RetryWhenOperator;
}());
var RetryWhenSubscriber = /*@__PURE__*/ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](RetryWhenSubscriber, _super);
    function RetryWhenSubscriber(destination, notifier, source) {
        var _this = _super.call(this, destination) || this;
        _this.notifier = notifier;
        _this.source = source;
        return _this;
    }
    RetryWhenSubscriber.prototype.error = function (err) {
        if (!this.isStopped) {
            var errors = this.errors;
            var retries = this.retries;
            var retriesSubscription = this.retriesSubscription;
            if (!retries) {
                errors = new _Subject__WEBPACK_IMPORTED_MODULE_1__["Subject"]();
                try {
                    var notifier = this.notifier;
                    retries = notifier(errors);
                }
                catch (e) {
                    return _super.prototype.error.call(this, e);
                }
                retriesSubscription = Object(_innerSubscribe__WEBPACK_IMPORTED_MODULE_2__["innerSubscribe"])(retries, new _innerSubscribe__WEBPACK_IMPORTED_MODULE_2__["SimpleInnerSubscriber"](this));
            }
            else {
                this.errors = undefined;
                this.retriesSubscription = undefined;
            }
            this._unsubscribeAndRecycle();
            this.errors = errors;
            this.retries = retries;
            this.retriesSubscription = retriesSubscription;
            errors.next(err);
        }
    };
    RetryWhenSubscriber.prototype._unsubscribe = function () {
        var _a = this, errors = _a.errors, retriesSubscription = _a.retriesSubscription;
        if (errors) {
            errors.unsubscribe();
            this.errors = undefined;
        }
        if (retriesSubscription) {
            retriesSubscription.unsubscribe();
            this.retriesSubscription = undefined;
        }
        this.retries = undefined;
    };
    RetryWhenSubscriber.prototype.notifyNext = function () {
        var _unsubscribe = this._unsubscribe;
        this._unsubscribe = null;
        this._unsubscribeAndRecycle();
        this._unsubscribe = _unsubscribe;
        this.source.subscribe(this);
    };
    return RetryWhenSubscriber;
}(_innerSubscribe__WEBPACK_IMPORTED_MODULE_2__["SimpleOuterSubscriber"]));
//# sourceMappingURL=retryWhen.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/operators/sample.js":
/*!***************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/operators/sample.js ***!
  \***************************************************************/
/*! exports provided: sample */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "sample", function() { return sample; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
/* harmony import */ var _innerSubscribe__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../innerSubscribe */ "../node_modules/rxjs/_esm5/internal/innerSubscribe.js");
/** PURE_IMPORTS_START tslib,_innerSubscribe PURE_IMPORTS_END */


function sample(notifier) {
    return function (source) { return source.lift(new SampleOperator(notifier)); };
}
var SampleOperator = /*@__PURE__*/ (function () {
    function SampleOperator(notifier) {
        this.notifier = notifier;
    }
    SampleOperator.prototype.call = function (subscriber, source) {
        var sampleSubscriber = new SampleSubscriber(subscriber);
        var subscription = source.subscribe(sampleSubscriber);
        subscription.add(Object(_innerSubscribe__WEBPACK_IMPORTED_MODULE_1__["innerSubscribe"])(this.notifier, new _innerSubscribe__WEBPACK_IMPORTED_MODULE_1__["SimpleInnerSubscriber"](sampleSubscriber)));
        return subscription;
    };
    return SampleOperator;
}());
var SampleSubscriber = /*@__PURE__*/ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](SampleSubscriber, _super);
    function SampleSubscriber() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.hasValue = false;
        return _this;
    }
    SampleSubscriber.prototype._next = function (value) {
        this.value = value;
        this.hasValue = true;
    };
    SampleSubscriber.prototype.notifyNext = function () {
        this.emitValue();
    };
    SampleSubscriber.prototype.notifyComplete = function () {
        this.emitValue();
    };
    SampleSubscriber.prototype.emitValue = function () {
        if (this.hasValue) {
            this.hasValue = false;
            this.destination.next(this.value);
        }
    };
    return SampleSubscriber;
}(_innerSubscribe__WEBPACK_IMPORTED_MODULE_1__["SimpleOuterSubscriber"]));
//# sourceMappingURL=sample.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/operators/sampleTime.js":
/*!*******************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/operators/sampleTime.js ***!
  \*******************************************************************/
/*! exports provided: sampleTime */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "sampleTime", function() { return sampleTime; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
/* harmony import */ var _Subscriber__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Subscriber */ "../node_modules/rxjs/_esm5/internal/Subscriber.js");
/* harmony import */ var _scheduler_async__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../scheduler/async */ "../node_modules/rxjs/_esm5/internal/scheduler/async.js");
/** PURE_IMPORTS_START tslib,_Subscriber,_scheduler_async PURE_IMPORTS_END */



function sampleTime(period, scheduler) {
    if (scheduler === void 0) {
        scheduler = _scheduler_async__WEBPACK_IMPORTED_MODULE_2__["async"];
    }
    return function (source) { return source.lift(new SampleTimeOperator(period, scheduler)); };
}
var SampleTimeOperator = /*@__PURE__*/ (function () {
    function SampleTimeOperator(period, scheduler) {
        this.period = period;
        this.scheduler = scheduler;
    }
    SampleTimeOperator.prototype.call = function (subscriber, source) {
        return source.subscribe(new SampleTimeSubscriber(subscriber, this.period, this.scheduler));
    };
    return SampleTimeOperator;
}());
var SampleTimeSubscriber = /*@__PURE__*/ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](SampleTimeSubscriber, _super);
    function SampleTimeSubscriber(destination, period, scheduler) {
        var _this = _super.call(this, destination) || this;
        _this.period = period;
        _this.scheduler = scheduler;
        _this.hasValue = false;
        _this.add(scheduler.schedule(dispatchNotification, period, { subscriber: _this, period: period }));
        return _this;
    }
    SampleTimeSubscriber.prototype._next = function (value) {
        this.lastValue = value;
        this.hasValue = true;
    };
    SampleTimeSubscriber.prototype.notifyNext = function () {
        if (this.hasValue) {
            this.hasValue = false;
            this.destination.next(this.lastValue);
        }
    };
    return SampleTimeSubscriber;
}(_Subscriber__WEBPACK_IMPORTED_MODULE_1__["Subscriber"]));
function dispatchNotification(state) {
    var subscriber = state.subscriber, period = state.period;
    subscriber.notifyNext();
    this.schedule(state, period);
}
//# sourceMappingURL=sampleTime.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/operators/scan.js":
/*!*************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/operators/scan.js ***!
  \*************************************************************/
/*! exports provided: scan */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "scan", function() { return scan; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
/* harmony import */ var _Subscriber__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Subscriber */ "../node_modules/rxjs/_esm5/internal/Subscriber.js");
/** PURE_IMPORTS_START tslib,_Subscriber PURE_IMPORTS_END */


function scan(accumulator, seed) {
    var hasSeed = false;
    if (arguments.length >= 2) {
        hasSeed = true;
    }
    return function scanOperatorFunction(source) {
        return source.lift(new ScanOperator(accumulator, seed, hasSeed));
    };
}
var ScanOperator = /*@__PURE__*/ (function () {
    function ScanOperator(accumulator, seed, hasSeed) {
        if (hasSeed === void 0) {
            hasSeed = false;
        }
        this.accumulator = accumulator;
        this.seed = seed;
        this.hasSeed = hasSeed;
    }
    ScanOperator.prototype.call = function (subscriber, source) {
        return source.subscribe(new ScanSubscriber(subscriber, this.accumulator, this.seed, this.hasSeed));
    };
    return ScanOperator;
}());
var ScanSubscriber = /*@__PURE__*/ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](ScanSubscriber, _super);
    function ScanSubscriber(destination, accumulator, _seed, hasSeed) {
        var _this = _super.call(this, destination) || this;
        _this.accumulator = accumulator;
        _this._seed = _seed;
        _this.hasSeed = hasSeed;
        _this.index = 0;
        return _this;
    }
    Object.defineProperty(ScanSubscriber.prototype, "seed", {
        get: function () {
            return this._seed;
        },
        set: function (value) {
            this.hasSeed = true;
            this._seed = value;
        },
        enumerable: true,
        configurable: true
    });
    ScanSubscriber.prototype._next = function (value) {
        if (!this.hasSeed) {
            this.seed = value;
            this.destination.next(value);
        }
        else {
            return this._tryNext(value);
        }
    };
    ScanSubscriber.prototype._tryNext = function (value) {
        var index = this.index++;
        var result;
        try {
            result = this.accumulator(this.seed, value, index);
        }
        catch (err) {
            this.destination.error(err);
        }
        this.seed = result;
        this.destination.next(result);
    };
    return ScanSubscriber;
}(_Subscriber__WEBPACK_IMPORTED_MODULE_1__["Subscriber"]));
//# sourceMappingURL=scan.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/operators/sequenceEqual.js":
/*!**********************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/operators/sequenceEqual.js ***!
  \**********************************************************************/
/*! exports provided: sequenceEqual, SequenceEqualOperator, SequenceEqualSubscriber */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "sequenceEqual", function() { return sequenceEqual; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SequenceEqualOperator", function() { return SequenceEqualOperator; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SequenceEqualSubscriber", function() { return SequenceEqualSubscriber; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
/* harmony import */ var _Subscriber__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Subscriber */ "../node_modules/rxjs/_esm5/internal/Subscriber.js");
/** PURE_IMPORTS_START tslib,_Subscriber PURE_IMPORTS_END */


function sequenceEqual(compareTo, comparator) {
    return function (source) { return source.lift(new SequenceEqualOperator(compareTo, comparator)); };
}
var SequenceEqualOperator = /*@__PURE__*/ (function () {
    function SequenceEqualOperator(compareTo, comparator) {
        this.compareTo = compareTo;
        this.comparator = comparator;
    }
    SequenceEqualOperator.prototype.call = function (subscriber, source) {
        return source.subscribe(new SequenceEqualSubscriber(subscriber, this.compareTo, this.comparator));
    };
    return SequenceEqualOperator;
}());

var SequenceEqualSubscriber = /*@__PURE__*/ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](SequenceEqualSubscriber, _super);
    function SequenceEqualSubscriber(destination, compareTo, comparator) {
        var _this = _super.call(this, destination) || this;
        _this.compareTo = compareTo;
        _this.comparator = comparator;
        _this._a = [];
        _this._b = [];
        _this._oneComplete = false;
        _this.destination.add(compareTo.subscribe(new SequenceEqualCompareToSubscriber(destination, _this)));
        return _this;
    }
    SequenceEqualSubscriber.prototype._next = function (value) {
        if (this._oneComplete && this._b.length === 0) {
            this.emit(false);
        }
        else {
            this._a.push(value);
            this.checkValues();
        }
    };
    SequenceEqualSubscriber.prototype._complete = function () {
        if (this._oneComplete) {
            this.emit(this._a.length === 0 && this._b.length === 0);
        }
        else {
            this._oneComplete = true;
        }
        this.unsubscribe();
    };
    SequenceEqualSubscriber.prototype.checkValues = function () {
        var _c = this, _a = _c._a, _b = _c._b, comparator = _c.comparator;
        while (_a.length > 0 && _b.length > 0) {
            var a = _a.shift();
            var b = _b.shift();
            var areEqual = false;
            try {
                areEqual = comparator ? comparator(a, b) : a === b;
            }
            catch (e) {
                this.destination.error(e);
            }
            if (!areEqual) {
                this.emit(false);
            }
        }
    };
    SequenceEqualSubscriber.prototype.emit = function (value) {
        var destination = this.destination;
        destination.next(value);
        destination.complete();
    };
    SequenceEqualSubscriber.prototype.nextB = function (value) {
        if (this._oneComplete && this._a.length === 0) {
            this.emit(false);
        }
        else {
            this._b.push(value);
            this.checkValues();
        }
    };
    SequenceEqualSubscriber.prototype.completeB = function () {
        if (this._oneComplete) {
            this.emit(this._a.length === 0 && this._b.length === 0);
        }
        else {
            this._oneComplete = true;
        }
    };
    return SequenceEqualSubscriber;
}(_Subscriber__WEBPACK_IMPORTED_MODULE_1__["Subscriber"]));

var SequenceEqualCompareToSubscriber = /*@__PURE__*/ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](SequenceEqualCompareToSubscriber, _super);
    function SequenceEqualCompareToSubscriber(destination, parent) {
        var _this = _super.call(this, destination) || this;
        _this.parent = parent;
        return _this;
    }
    SequenceEqualCompareToSubscriber.prototype._next = function (value) {
        this.parent.nextB(value);
    };
    SequenceEqualCompareToSubscriber.prototype._error = function (err) {
        this.parent.error(err);
        this.unsubscribe();
    };
    SequenceEqualCompareToSubscriber.prototype._complete = function () {
        this.parent.completeB();
        this.unsubscribe();
    };
    return SequenceEqualCompareToSubscriber;
}(_Subscriber__WEBPACK_IMPORTED_MODULE_1__["Subscriber"]));
//# sourceMappingURL=sequenceEqual.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/operators/share.js":
/*!**************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/operators/share.js ***!
  \**************************************************************/
/*! exports provided: share */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "share", function() { return share; });
/* harmony import */ var _multicast__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./multicast */ "../node_modules/rxjs/_esm5/internal/operators/multicast.js");
/* harmony import */ var _refCount__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./refCount */ "../node_modules/rxjs/_esm5/internal/operators/refCount.js");
/* harmony import */ var _Subject__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../Subject */ "../node_modules/rxjs/_esm5/internal/Subject.js");
/** PURE_IMPORTS_START _multicast,_refCount,_Subject PURE_IMPORTS_END */



function shareSubjectFactory() {
    return new _Subject__WEBPACK_IMPORTED_MODULE_2__["Subject"]();
}
function share() {
    return function (source) { return Object(_refCount__WEBPACK_IMPORTED_MODULE_1__["refCount"])()(Object(_multicast__WEBPACK_IMPORTED_MODULE_0__["multicast"])(shareSubjectFactory)(source)); };
}
//# sourceMappingURL=share.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/operators/shareReplay.js":
/*!********************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/operators/shareReplay.js ***!
  \********************************************************************/
/*! exports provided: shareReplay */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "shareReplay", function() { return shareReplay; });
/* harmony import */ var _ReplaySubject__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../ReplaySubject */ "../node_modules/rxjs/_esm5/internal/ReplaySubject.js");
/** PURE_IMPORTS_START _ReplaySubject PURE_IMPORTS_END */

function shareReplay(configOrBufferSize, windowTime, scheduler) {
    var config;
    if (configOrBufferSize && typeof configOrBufferSize === 'object') {
        config = configOrBufferSize;
    }
    else {
        config = {
            bufferSize: configOrBufferSize,
            windowTime: windowTime,
            refCount: false,
            scheduler: scheduler
        };
    }
    return function (source) { return source.lift(shareReplayOperator(config)); };
}
function shareReplayOperator(_a) {
    var _b = _a.bufferSize, bufferSize = _b === void 0 ? Number.POSITIVE_INFINITY : _b, _c = _a.windowTime, windowTime = _c === void 0 ? Number.POSITIVE_INFINITY : _c, useRefCount = _a.refCount, scheduler = _a.scheduler;
    var subject;
    var refCount = 0;
    var subscription;
    var hasError = false;
    var isComplete = false;
    return function shareReplayOperation(source) {
        refCount++;
        var innerSub;
        if (!subject || hasError) {
            hasError = false;
            subject = new _ReplaySubject__WEBPACK_IMPORTED_MODULE_0__["ReplaySubject"](bufferSize, windowTime, scheduler);
            innerSub = subject.subscribe(this);
            subscription = source.subscribe({
                next: function (value) { subject.next(value); },
                error: function (err) {
                    hasError = true;
                    subject.error(err);
                },
                complete: function () {
                    isComplete = true;
                    subscription = undefined;
                    subject.complete();
                },
            });
        }
        else {
            innerSub = subject.subscribe(this);
        }
        this.add(function () {
            refCount--;
            innerSub.unsubscribe();
            if (subscription && !isComplete && useRefCount && refCount === 0) {
                subscription.unsubscribe();
                subscription = undefined;
                subject = undefined;
            }
        });
    };
}
//# sourceMappingURL=shareReplay.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/operators/single.js":
/*!***************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/operators/single.js ***!
  \***************************************************************/
/*! exports provided: single */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "single", function() { return single; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
/* harmony import */ var _Subscriber__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Subscriber */ "../node_modules/rxjs/_esm5/internal/Subscriber.js");
/* harmony import */ var _util_EmptyError__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../util/EmptyError */ "../node_modules/rxjs/_esm5/internal/util/EmptyError.js");
/** PURE_IMPORTS_START tslib,_Subscriber,_util_EmptyError PURE_IMPORTS_END */



function single(predicate) {
    return function (source) { return source.lift(new SingleOperator(predicate, source)); };
}
var SingleOperator = /*@__PURE__*/ (function () {
    function SingleOperator(predicate, source) {
        this.predicate = predicate;
        this.source = source;
    }
    SingleOperator.prototype.call = function (subscriber, source) {
        return source.subscribe(new SingleSubscriber(subscriber, this.predicate, this.source));
    };
    return SingleOperator;
}());
var SingleSubscriber = /*@__PURE__*/ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](SingleSubscriber, _super);
    function SingleSubscriber(destination, predicate, source) {
        var _this = _super.call(this, destination) || this;
        _this.predicate = predicate;
        _this.source = source;
        _this.seenValue = false;
        _this.index = 0;
        return _this;
    }
    SingleSubscriber.prototype.applySingleValue = function (value) {
        if (this.seenValue) {
            this.destination.error('Sequence contains more than one element');
        }
        else {
            this.seenValue = true;
            this.singleValue = value;
        }
    };
    SingleSubscriber.prototype._next = function (value) {
        var index = this.index++;
        if (this.predicate) {
            this.tryNext(value, index);
        }
        else {
            this.applySingleValue(value);
        }
    };
    SingleSubscriber.prototype.tryNext = function (value, index) {
        try {
            if (this.predicate(value, index, this.source)) {
                this.applySingleValue(value);
            }
        }
        catch (err) {
            this.destination.error(err);
        }
    };
    SingleSubscriber.prototype._complete = function () {
        var destination = this.destination;
        if (this.index > 0) {
            destination.next(this.seenValue ? this.singleValue : undefined);
            destination.complete();
        }
        else {
            destination.error(new _util_EmptyError__WEBPACK_IMPORTED_MODULE_2__["EmptyError"]);
        }
    };
    return SingleSubscriber;
}(_Subscriber__WEBPACK_IMPORTED_MODULE_1__["Subscriber"]));
//# sourceMappingURL=single.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/operators/skip.js":
/*!*************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/operators/skip.js ***!
  \*************************************************************/
/*! exports provided: skip */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "skip", function() { return skip; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
/* harmony import */ var _Subscriber__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Subscriber */ "../node_modules/rxjs/_esm5/internal/Subscriber.js");
/** PURE_IMPORTS_START tslib,_Subscriber PURE_IMPORTS_END */


function skip(count) {
    return function (source) { return source.lift(new SkipOperator(count)); };
}
var SkipOperator = /*@__PURE__*/ (function () {
    function SkipOperator(total) {
        this.total = total;
    }
    SkipOperator.prototype.call = function (subscriber, source) {
        return source.subscribe(new SkipSubscriber(subscriber, this.total));
    };
    return SkipOperator;
}());
var SkipSubscriber = /*@__PURE__*/ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](SkipSubscriber, _super);
    function SkipSubscriber(destination, total) {
        var _this = _super.call(this, destination) || this;
        _this.total = total;
        _this.count = 0;
        return _this;
    }
    SkipSubscriber.prototype._next = function (x) {
        if (++this.count > this.total) {
            this.destination.next(x);
        }
    };
    return SkipSubscriber;
}(_Subscriber__WEBPACK_IMPORTED_MODULE_1__["Subscriber"]));
//# sourceMappingURL=skip.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/operators/skipLast.js":
/*!*****************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/operators/skipLast.js ***!
  \*****************************************************************/
/*! exports provided: skipLast */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "skipLast", function() { return skipLast; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
/* harmony import */ var _Subscriber__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Subscriber */ "../node_modules/rxjs/_esm5/internal/Subscriber.js");
/* harmony import */ var _util_ArgumentOutOfRangeError__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../util/ArgumentOutOfRangeError */ "../node_modules/rxjs/_esm5/internal/util/ArgumentOutOfRangeError.js");
/** PURE_IMPORTS_START tslib,_Subscriber,_util_ArgumentOutOfRangeError PURE_IMPORTS_END */



function skipLast(count) {
    return function (source) { return source.lift(new SkipLastOperator(count)); };
}
var SkipLastOperator = /*@__PURE__*/ (function () {
    function SkipLastOperator(_skipCount) {
        this._skipCount = _skipCount;
        if (this._skipCount < 0) {
            throw new _util_ArgumentOutOfRangeError__WEBPACK_IMPORTED_MODULE_2__["ArgumentOutOfRangeError"];
        }
    }
    SkipLastOperator.prototype.call = function (subscriber, source) {
        if (this._skipCount === 0) {
            return source.subscribe(new _Subscriber__WEBPACK_IMPORTED_MODULE_1__["Subscriber"](subscriber));
        }
        else {
            return source.subscribe(new SkipLastSubscriber(subscriber, this._skipCount));
        }
    };
    return SkipLastOperator;
}());
var SkipLastSubscriber = /*@__PURE__*/ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](SkipLastSubscriber, _super);
    function SkipLastSubscriber(destination, _skipCount) {
        var _this = _super.call(this, destination) || this;
        _this._skipCount = _skipCount;
        _this._count = 0;
        _this._ring = new Array(_skipCount);
        return _this;
    }
    SkipLastSubscriber.prototype._next = function (value) {
        var skipCount = this._skipCount;
        var count = this._count++;
        if (count < skipCount) {
            this._ring[count] = value;
        }
        else {
            var currentIndex = count % skipCount;
            var ring = this._ring;
            var oldValue = ring[currentIndex];
            ring[currentIndex] = value;
            this.destination.next(oldValue);
        }
    };
    return SkipLastSubscriber;
}(_Subscriber__WEBPACK_IMPORTED_MODULE_1__["Subscriber"]));
//# sourceMappingURL=skipLast.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/operators/skipUntil.js":
/*!******************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/operators/skipUntil.js ***!
  \******************************************************************/
/*! exports provided: skipUntil */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "skipUntil", function() { return skipUntil; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
/* harmony import */ var _innerSubscribe__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../innerSubscribe */ "../node_modules/rxjs/_esm5/internal/innerSubscribe.js");
/** PURE_IMPORTS_START tslib,_innerSubscribe PURE_IMPORTS_END */


function skipUntil(notifier) {
    return function (source) { return source.lift(new SkipUntilOperator(notifier)); };
}
var SkipUntilOperator = /*@__PURE__*/ (function () {
    function SkipUntilOperator(notifier) {
        this.notifier = notifier;
    }
    SkipUntilOperator.prototype.call = function (destination, source) {
        return source.subscribe(new SkipUntilSubscriber(destination, this.notifier));
    };
    return SkipUntilOperator;
}());
var SkipUntilSubscriber = /*@__PURE__*/ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](SkipUntilSubscriber, _super);
    function SkipUntilSubscriber(destination, notifier) {
        var _this = _super.call(this, destination) || this;
        _this.hasValue = false;
        var innerSubscriber = new _innerSubscribe__WEBPACK_IMPORTED_MODULE_1__["SimpleInnerSubscriber"](_this);
        _this.add(innerSubscriber);
        _this.innerSubscription = innerSubscriber;
        var innerSubscription = Object(_innerSubscribe__WEBPACK_IMPORTED_MODULE_1__["innerSubscribe"])(notifier, innerSubscriber);
        if (innerSubscription !== innerSubscriber) {
            _this.add(innerSubscription);
            _this.innerSubscription = innerSubscription;
        }
        return _this;
    }
    SkipUntilSubscriber.prototype._next = function (value) {
        if (this.hasValue) {
            _super.prototype._next.call(this, value);
        }
    };
    SkipUntilSubscriber.prototype.notifyNext = function () {
        this.hasValue = true;
        if (this.innerSubscription) {
            this.innerSubscription.unsubscribe();
        }
    };
    SkipUntilSubscriber.prototype.notifyComplete = function () {
    };
    return SkipUntilSubscriber;
}(_innerSubscribe__WEBPACK_IMPORTED_MODULE_1__["SimpleOuterSubscriber"]));
//# sourceMappingURL=skipUntil.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/operators/skipWhile.js":
/*!******************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/operators/skipWhile.js ***!
  \******************************************************************/
/*! exports provided: skipWhile */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "skipWhile", function() { return skipWhile; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
/* harmony import */ var _Subscriber__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Subscriber */ "../node_modules/rxjs/_esm5/internal/Subscriber.js");
/** PURE_IMPORTS_START tslib,_Subscriber PURE_IMPORTS_END */


function skipWhile(predicate) {
    return function (source) { return source.lift(new SkipWhileOperator(predicate)); };
}
var SkipWhileOperator = /*@__PURE__*/ (function () {
    function SkipWhileOperator(predicate) {
        this.predicate = predicate;
    }
    SkipWhileOperator.prototype.call = function (subscriber, source) {
        return source.subscribe(new SkipWhileSubscriber(subscriber, this.predicate));
    };
    return SkipWhileOperator;
}());
var SkipWhileSubscriber = /*@__PURE__*/ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](SkipWhileSubscriber, _super);
    function SkipWhileSubscriber(destination, predicate) {
        var _this = _super.call(this, destination) || this;
        _this.predicate = predicate;
        _this.skipping = true;
        _this.index = 0;
        return _this;
    }
    SkipWhileSubscriber.prototype._next = function (value) {
        var destination = this.destination;
        if (this.skipping) {
            this.tryCallPredicate(value);
        }
        if (!this.skipping) {
            destination.next(value);
        }
    };
    SkipWhileSubscriber.prototype.tryCallPredicate = function (value) {
        try {
            var result = this.predicate(value, this.index++);
            this.skipping = Boolean(result);
        }
        catch (err) {
            this.destination.error(err);
        }
    };
    return SkipWhileSubscriber;
}(_Subscriber__WEBPACK_IMPORTED_MODULE_1__["Subscriber"]));
//# sourceMappingURL=skipWhile.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/operators/startWith.js":
/*!******************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/operators/startWith.js ***!
  \******************************************************************/
/*! exports provided: startWith */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "startWith", function() { return startWith; });
/* harmony import */ var _observable_concat__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../observable/concat */ "../node_modules/rxjs/_esm5/internal/observable/concat.js");
/* harmony import */ var _util_isScheduler__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../util/isScheduler */ "../node_modules/rxjs/_esm5/internal/util/isScheduler.js");
/** PURE_IMPORTS_START _observable_concat,_util_isScheduler PURE_IMPORTS_END */


function startWith() {
    var array = [];
    for (var _i = 0; _i < arguments.length; _i++) {
        array[_i] = arguments[_i];
    }
    var scheduler = array[array.length - 1];
    if (Object(_util_isScheduler__WEBPACK_IMPORTED_MODULE_1__["isScheduler"])(scheduler)) {
        array.pop();
        return function (source) { return Object(_observable_concat__WEBPACK_IMPORTED_MODULE_0__["concat"])(array, source, scheduler); };
    }
    else {
        return function (source) { return Object(_observable_concat__WEBPACK_IMPORTED_MODULE_0__["concat"])(array, source); };
    }
}
//# sourceMappingURL=startWith.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/operators/subscribeOn.js":
/*!********************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/operators/subscribeOn.js ***!
  \********************************************************************/
/*! exports provided: subscribeOn */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "subscribeOn", function() { return subscribeOn; });
/* harmony import */ var _observable_SubscribeOnObservable__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../observable/SubscribeOnObservable */ "../node_modules/rxjs/_esm5/internal/observable/SubscribeOnObservable.js");
/** PURE_IMPORTS_START _observable_SubscribeOnObservable PURE_IMPORTS_END */

function subscribeOn(scheduler, delay) {
    if (delay === void 0) {
        delay = 0;
    }
    return function subscribeOnOperatorFunction(source) {
        return source.lift(new SubscribeOnOperator(scheduler, delay));
    };
}
var SubscribeOnOperator = /*@__PURE__*/ (function () {
    function SubscribeOnOperator(scheduler, delay) {
        this.scheduler = scheduler;
        this.delay = delay;
    }
    SubscribeOnOperator.prototype.call = function (subscriber, source) {
        return new _observable_SubscribeOnObservable__WEBPACK_IMPORTED_MODULE_0__["SubscribeOnObservable"](source, this.delay, this.scheduler).subscribe(subscriber);
    };
    return SubscribeOnOperator;
}());
//# sourceMappingURL=subscribeOn.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/operators/switchAll.js":
/*!******************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/operators/switchAll.js ***!
  \******************************************************************/
/*! exports provided: switchAll */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "switchAll", function() { return switchAll; });
/* harmony import */ var _switchMap__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./switchMap */ "../node_modules/rxjs/_esm5/internal/operators/switchMap.js");
/* harmony import */ var _util_identity__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../util/identity */ "../node_modules/rxjs/_esm5/internal/util/identity.js");
/** PURE_IMPORTS_START _switchMap,_util_identity PURE_IMPORTS_END */


function switchAll() {
    return Object(_switchMap__WEBPACK_IMPORTED_MODULE_0__["switchMap"])(_util_identity__WEBPACK_IMPORTED_MODULE_1__["identity"]);
}
//# sourceMappingURL=switchAll.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/operators/switchMap.js":
/*!******************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/operators/switchMap.js ***!
  \******************************************************************/
/*! exports provided: switchMap */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "switchMap", function() { return switchMap; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
/* harmony import */ var _map__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./map */ "../node_modules/rxjs/_esm5/internal/operators/map.js");
/* harmony import */ var _observable_from__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../observable/from */ "../node_modules/rxjs/_esm5/internal/observable/from.js");
/* harmony import */ var _innerSubscribe__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../innerSubscribe */ "../node_modules/rxjs/_esm5/internal/innerSubscribe.js");
/** PURE_IMPORTS_START tslib,_map,_observable_from,_innerSubscribe PURE_IMPORTS_END */




function switchMap(project, resultSelector) {
    if (typeof resultSelector === 'function') {
        return function (source) { return source.pipe(switchMap(function (a, i) { return Object(_observable_from__WEBPACK_IMPORTED_MODULE_2__["from"])(project(a, i)).pipe(Object(_map__WEBPACK_IMPORTED_MODULE_1__["map"])(function (b, ii) { return resultSelector(a, b, i, ii); })); })); };
    }
    return function (source) { return source.lift(new SwitchMapOperator(project)); };
}
var SwitchMapOperator = /*@__PURE__*/ (function () {
    function SwitchMapOperator(project) {
        this.project = project;
    }
    SwitchMapOperator.prototype.call = function (subscriber, source) {
        return source.subscribe(new SwitchMapSubscriber(subscriber, this.project));
    };
    return SwitchMapOperator;
}());
var SwitchMapSubscriber = /*@__PURE__*/ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](SwitchMapSubscriber, _super);
    function SwitchMapSubscriber(destination, project) {
        var _this = _super.call(this, destination) || this;
        _this.project = project;
        _this.index = 0;
        return _this;
    }
    SwitchMapSubscriber.prototype._next = function (value) {
        var result;
        var index = this.index++;
        try {
            result = this.project(value, index);
        }
        catch (error) {
            this.destination.error(error);
            return;
        }
        this._innerSub(result);
    };
    SwitchMapSubscriber.prototype._innerSub = function (result) {
        var innerSubscription = this.innerSubscription;
        if (innerSubscription) {
            innerSubscription.unsubscribe();
        }
        var innerSubscriber = new _innerSubscribe__WEBPACK_IMPORTED_MODULE_3__["SimpleInnerSubscriber"](this);
        var destination = this.destination;
        destination.add(innerSubscriber);
        this.innerSubscription = Object(_innerSubscribe__WEBPACK_IMPORTED_MODULE_3__["innerSubscribe"])(result, innerSubscriber);
        if (this.innerSubscription !== innerSubscriber) {
            destination.add(this.innerSubscription);
        }
    };
    SwitchMapSubscriber.prototype._complete = function () {
        var innerSubscription = this.innerSubscription;
        if (!innerSubscription || innerSubscription.closed) {
            _super.prototype._complete.call(this);
        }
        this.unsubscribe();
    };
    SwitchMapSubscriber.prototype._unsubscribe = function () {
        this.innerSubscription = undefined;
    };
    SwitchMapSubscriber.prototype.notifyComplete = function () {
        this.innerSubscription = undefined;
        if (this.isStopped) {
            _super.prototype._complete.call(this);
        }
    };
    SwitchMapSubscriber.prototype.notifyNext = function (innerValue) {
        this.destination.next(innerValue);
    };
    return SwitchMapSubscriber;
}(_innerSubscribe__WEBPACK_IMPORTED_MODULE_3__["SimpleOuterSubscriber"]));
//# sourceMappingURL=switchMap.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/operators/switchMapTo.js":
/*!********************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/operators/switchMapTo.js ***!
  \********************************************************************/
/*! exports provided: switchMapTo */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "switchMapTo", function() { return switchMapTo; });
/* harmony import */ var _switchMap__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./switchMap */ "../node_modules/rxjs/_esm5/internal/operators/switchMap.js");
/** PURE_IMPORTS_START _switchMap PURE_IMPORTS_END */

function switchMapTo(innerObservable, resultSelector) {
    return resultSelector ? Object(_switchMap__WEBPACK_IMPORTED_MODULE_0__["switchMap"])(function () { return innerObservable; }, resultSelector) : Object(_switchMap__WEBPACK_IMPORTED_MODULE_0__["switchMap"])(function () { return innerObservable; });
}
//# sourceMappingURL=switchMapTo.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/operators/take.js":
/*!*************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/operators/take.js ***!
  \*************************************************************/
/*! exports provided: take */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "take", function() { return take; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
/* harmony import */ var _Subscriber__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Subscriber */ "../node_modules/rxjs/_esm5/internal/Subscriber.js");
/* harmony import */ var _util_ArgumentOutOfRangeError__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../util/ArgumentOutOfRangeError */ "../node_modules/rxjs/_esm5/internal/util/ArgumentOutOfRangeError.js");
/* harmony import */ var _observable_empty__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../observable/empty */ "../node_modules/rxjs/_esm5/internal/observable/empty.js");
/** PURE_IMPORTS_START tslib,_Subscriber,_util_ArgumentOutOfRangeError,_observable_empty PURE_IMPORTS_END */




function take(count) {
    return function (source) {
        if (count === 0) {
            return Object(_observable_empty__WEBPACK_IMPORTED_MODULE_3__["empty"])();
        }
        else {
            return source.lift(new TakeOperator(count));
        }
    };
}
var TakeOperator = /*@__PURE__*/ (function () {
    function TakeOperator(total) {
        this.total = total;
        if (this.total < 0) {
            throw new _util_ArgumentOutOfRangeError__WEBPACK_IMPORTED_MODULE_2__["ArgumentOutOfRangeError"];
        }
    }
    TakeOperator.prototype.call = function (subscriber, source) {
        return source.subscribe(new TakeSubscriber(subscriber, this.total));
    };
    return TakeOperator;
}());
var TakeSubscriber = /*@__PURE__*/ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](TakeSubscriber, _super);
    function TakeSubscriber(destination, total) {
        var _this = _super.call(this, destination) || this;
        _this.total = total;
        _this.count = 0;
        return _this;
    }
    TakeSubscriber.prototype._next = function (value) {
        var total = this.total;
        var count = ++this.count;
        if (count <= total) {
            this.destination.next(value);
            if (count === total) {
                this.destination.complete();
                this.unsubscribe();
            }
        }
    };
    return TakeSubscriber;
}(_Subscriber__WEBPACK_IMPORTED_MODULE_1__["Subscriber"]));
//# sourceMappingURL=take.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/operators/takeLast.js":
/*!*****************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/operators/takeLast.js ***!
  \*****************************************************************/
/*! exports provided: takeLast */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "takeLast", function() { return takeLast; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
/* harmony import */ var _Subscriber__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Subscriber */ "../node_modules/rxjs/_esm5/internal/Subscriber.js");
/* harmony import */ var _util_ArgumentOutOfRangeError__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../util/ArgumentOutOfRangeError */ "../node_modules/rxjs/_esm5/internal/util/ArgumentOutOfRangeError.js");
/* harmony import */ var _observable_empty__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../observable/empty */ "../node_modules/rxjs/_esm5/internal/observable/empty.js");
/** PURE_IMPORTS_START tslib,_Subscriber,_util_ArgumentOutOfRangeError,_observable_empty PURE_IMPORTS_END */




function takeLast(count) {
    return function takeLastOperatorFunction(source) {
        if (count === 0) {
            return Object(_observable_empty__WEBPACK_IMPORTED_MODULE_3__["empty"])();
        }
        else {
            return source.lift(new TakeLastOperator(count));
        }
    };
}
var TakeLastOperator = /*@__PURE__*/ (function () {
    function TakeLastOperator(total) {
        this.total = total;
        if (this.total < 0) {
            throw new _util_ArgumentOutOfRangeError__WEBPACK_IMPORTED_MODULE_2__["ArgumentOutOfRangeError"];
        }
    }
    TakeLastOperator.prototype.call = function (subscriber, source) {
        return source.subscribe(new TakeLastSubscriber(subscriber, this.total));
    };
    return TakeLastOperator;
}());
var TakeLastSubscriber = /*@__PURE__*/ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](TakeLastSubscriber, _super);
    function TakeLastSubscriber(destination, total) {
        var _this = _super.call(this, destination) || this;
        _this.total = total;
        _this.ring = new Array();
        _this.count = 0;
        return _this;
    }
    TakeLastSubscriber.prototype._next = function (value) {
        var ring = this.ring;
        var total = this.total;
        var count = this.count++;
        if (ring.length < total) {
            ring.push(value);
        }
        else {
            var index = count % total;
            ring[index] = value;
        }
    };
    TakeLastSubscriber.prototype._complete = function () {
        var destination = this.destination;
        var count = this.count;
        if (count > 0) {
            var total = this.count >= this.total ? this.total : this.count;
            var ring = this.ring;
            for (var i = 0; i < total; i++) {
                var idx = (count++) % total;
                destination.next(ring[idx]);
            }
        }
        destination.complete();
    };
    return TakeLastSubscriber;
}(_Subscriber__WEBPACK_IMPORTED_MODULE_1__["Subscriber"]));
//# sourceMappingURL=takeLast.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/operators/takeUntil.js":
/*!******************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/operators/takeUntil.js ***!
  \******************************************************************/
/*! exports provided: takeUntil */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "takeUntil", function() { return takeUntil; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
/* harmony import */ var _innerSubscribe__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../innerSubscribe */ "../node_modules/rxjs/_esm5/internal/innerSubscribe.js");
/** PURE_IMPORTS_START tslib,_innerSubscribe PURE_IMPORTS_END */


function takeUntil(notifier) {
    return function (source) { return source.lift(new TakeUntilOperator(notifier)); };
}
var TakeUntilOperator = /*@__PURE__*/ (function () {
    function TakeUntilOperator(notifier) {
        this.notifier = notifier;
    }
    TakeUntilOperator.prototype.call = function (subscriber, source) {
        var takeUntilSubscriber = new TakeUntilSubscriber(subscriber);
        var notifierSubscription = Object(_innerSubscribe__WEBPACK_IMPORTED_MODULE_1__["innerSubscribe"])(this.notifier, new _innerSubscribe__WEBPACK_IMPORTED_MODULE_1__["SimpleInnerSubscriber"](takeUntilSubscriber));
        if (notifierSubscription && !takeUntilSubscriber.seenValue) {
            takeUntilSubscriber.add(notifierSubscription);
            return source.subscribe(takeUntilSubscriber);
        }
        return takeUntilSubscriber;
    };
    return TakeUntilOperator;
}());
var TakeUntilSubscriber = /*@__PURE__*/ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](TakeUntilSubscriber, _super);
    function TakeUntilSubscriber(destination) {
        var _this = _super.call(this, destination) || this;
        _this.seenValue = false;
        return _this;
    }
    TakeUntilSubscriber.prototype.notifyNext = function () {
        this.seenValue = true;
        this.complete();
    };
    TakeUntilSubscriber.prototype.notifyComplete = function () {
    };
    return TakeUntilSubscriber;
}(_innerSubscribe__WEBPACK_IMPORTED_MODULE_1__["SimpleOuterSubscriber"]));
//# sourceMappingURL=takeUntil.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/operators/takeWhile.js":
/*!******************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/operators/takeWhile.js ***!
  \******************************************************************/
/*! exports provided: takeWhile */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "takeWhile", function() { return takeWhile; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
/* harmony import */ var _Subscriber__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Subscriber */ "../node_modules/rxjs/_esm5/internal/Subscriber.js");
/** PURE_IMPORTS_START tslib,_Subscriber PURE_IMPORTS_END */


function takeWhile(predicate, inclusive) {
    if (inclusive === void 0) {
        inclusive = false;
    }
    return function (source) {
        return source.lift(new TakeWhileOperator(predicate, inclusive));
    };
}
var TakeWhileOperator = /*@__PURE__*/ (function () {
    function TakeWhileOperator(predicate, inclusive) {
        this.predicate = predicate;
        this.inclusive = inclusive;
    }
    TakeWhileOperator.prototype.call = function (subscriber, source) {
        return source.subscribe(new TakeWhileSubscriber(subscriber, this.predicate, this.inclusive));
    };
    return TakeWhileOperator;
}());
var TakeWhileSubscriber = /*@__PURE__*/ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](TakeWhileSubscriber, _super);
    function TakeWhileSubscriber(destination, predicate, inclusive) {
        var _this = _super.call(this, destination) || this;
        _this.predicate = predicate;
        _this.inclusive = inclusive;
        _this.index = 0;
        return _this;
    }
    TakeWhileSubscriber.prototype._next = function (value) {
        var destination = this.destination;
        var result;
        try {
            result = this.predicate(value, this.index++);
        }
        catch (err) {
            destination.error(err);
            return;
        }
        this.nextOrComplete(value, result);
    };
    TakeWhileSubscriber.prototype.nextOrComplete = function (value, predicateResult) {
        var destination = this.destination;
        if (Boolean(predicateResult)) {
            destination.next(value);
        }
        else {
            if (this.inclusive) {
                destination.next(value);
            }
            destination.complete();
        }
    };
    return TakeWhileSubscriber;
}(_Subscriber__WEBPACK_IMPORTED_MODULE_1__["Subscriber"]));
//# sourceMappingURL=takeWhile.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/operators/tap.js":
/*!************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/operators/tap.js ***!
  \************************************************************/
/*! exports provided: tap */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "tap", function() { return tap; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
/* harmony import */ var _Subscriber__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Subscriber */ "../node_modules/rxjs/_esm5/internal/Subscriber.js");
/* harmony import */ var _util_noop__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../util/noop */ "../node_modules/rxjs/_esm5/internal/util/noop.js");
/* harmony import */ var _util_isFunction__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../util/isFunction */ "../node_modules/rxjs/_esm5/internal/util/isFunction.js");
/** PURE_IMPORTS_START tslib,_Subscriber,_util_noop,_util_isFunction PURE_IMPORTS_END */




function tap(nextOrObserver, error, complete) {
    return function tapOperatorFunction(source) {
        return source.lift(new DoOperator(nextOrObserver, error, complete));
    };
}
var DoOperator = /*@__PURE__*/ (function () {
    function DoOperator(nextOrObserver, error, complete) {
        this.nextOrObserver = nextOrObserver;
        this.error = error;
        this.complete = complete;
    }
    DoOperator.prototype.call = function (subscriber, source) {
        return source.subscribe(new TapSubscriber(subscriber, this.nextOrObserver, this.error, this.complete));
    };
    return DoOperator;
}());
var TapSubscriber = /*@__PURE__*/ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](TapSubscriber, _super);
    function TapSubscriber(destination, observerOrNext, error, complete) {
        var _this = _super.call(this, destination) || this;
        _this._tapNext = _util_noop__WEBPACK_IMPORTED_MODULE_2__["noop"];
        _this._tapError = _util_noop__WEBPACK_IMPORTED_MODULE_2__["noop"];
        _this._tapComplete = _util_noop__WEBPACK_IMPORTED_MODULE_2__["noop"];
        _this._tapError = error || _util_noop__WEBPACK_IMPORTED_MODULE_2__["noop"];
        _this._tapComplete = complete || _util_noop__WEBPACK_IMPORTED_MODULE_2__["noop"];
        if (Object(_util_isFunction__WEBPACK_IMPORTED_MODULE_3__["isFunction"])(observerOrNext)) {
            _this._context = _this;
            _this._tapNext = observerOrNext;
        }
        else if (observerOrNext) {
            _this._context = observerOrNext;
            _this._tapNext = observerOrNext.next || _util_noop__WEBPACK_IMPORTED_MODULE_2__["noop"];
            _this._tapError = observerOrNext.error || _util_noop__WEBPACK_IMPORTED_MODULE_2__["noop"];
            _this._tapComplete = observerOrNext.complete || _util_noop__WEBPACK_IMPORTED_MODULE_2__["noop"];
        }
        return _this;
    }
    TapSubscriber.prototype._next = function (value) {
        try {
            this._tapNext.call(this._context, value);
        }
        catch (err) {
            this.destination.error(err);
            return;
        }
        this.destination.next(value);
    };
    TapSubscriber.prototype._error = function (err) {
        try {
            this._tapError.call(this._context, err);
        }
        catch (err) {
            this.destination.error(err);
            return;
        }
        this.destination.error(err);
    };
    TapSubscriber.prototype._complete = function () {
        try {
            this._tapComplete.call(this._context);
        }
        catch (err) {
            this.destination.error(err);
            return;
        }
        return this.destination.complete();
    };
    return TapSubscriber;
}(_Subscriber__WEBPACK_IMPORTED_MODULE_1__["Subscriber"]));
//# sourceMappingURL=tap.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/operators/throttle.js":
/*!*****************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/operators/throttle.js ***!
  \*****************************************************************/
/*! exports provided: defaultThrottleConfig, throttle */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "defaultThrottleConfig", function() { return defaultThrottleConfig; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "throttle", function() { return throttle; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
/* harmony import */ var _innerSubscribe__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../innerSubscribe */ "../node_modules/rxjs/_esm5/internal/innerSubscribe.js");
/** PURE_IMPORTS_START tslib,_innerSubscribe PURE_IMPORTS_END */


var defaultThrottleConfig = {
    leading: true,
    trailing: false
};
function throttle(durationSelector, config) {
    if (config === void 0) {
        config = defaultThrottleConfig;
    }
    return function (source) { return source.lift(new ThrottleOperator(durationSelector, !!config.leading, !!config.trailing)); };
}
var ThrottleOperator = /*@__PURE__*/ (function () {
    function ThrottleOperator(durationSelector, leading, trailing) {
        this.durationSelector = durationSelector;
        this.leading = leading;
        this.trailing = trailing;
    }
    ThrottleOperator.prototype.call = function (subscriber, source) {
        return source.subscribe(new ThrottleSubscriber(subscriber, this.durationSelector, this.leading, this.trailing));
    };
    return ThrottleOperator;
}());
var ThrottleSubscriber = /*@__PURE__*/ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](ThrottleSubscriber, _super);
    function ThrottleSubscriber(destination, durationSelector, _leading, _trailing) {
        var _this = _super.call(this, destination) || this;
        _this.destination = destination;
        _this.durationSelector = durationSelector;
        _this._leading = _leading;
        _this._trailing = _trailing;
        _this._hasValue = false;
        return _this;
    }
    ThrottleSubscriber.prototype._next = function (value) {
        this._hasValue = true;
        this._sendValue = value;
        if (!this._throttled) {
            if (this._leading) {
                this.send();
            }
            else {
                this.throttle(value);
            }
        }
    };
    ThrottleSubscriber.prototype.send = function () {
        var _a = this, _hasValue = _a._hasValue, _sendValue = _a._sendValue;
        if (_hasValue) {
            this.destination.next(_sendValue);
            this.throttle(_sendValue);
        }
        this._hasValue = false;
        this._sendValue = undefined;
    };
    ThrottleSubscriber.prototype.throttle = function (value) {
        var duration = this.tryDurationSelector(value);
        if (!!duration) {
            this.add(this._throttled = Object(_innerSubscribe__WEBPACK_IMPORTED_MODULE_1__["innerSubscribe"])(duration, new _innerSubscribe__WEBPACK_IMPORTED_MODULE_1__["SimpleInnerSubscriber"](this)));
        }
    };
    ThrottleSubscriber.prototype.tryDurationSelector = function (value) {
        try {
            return this.durationSelector(value);
        }
        catch (err) {
            this.destination.error(err);
            return null;
        }
    };
    ThrottleSubscriber.prototype.throttlingDone = function () {
        var _a = this, _throttled = _a._throttled, _trailing = _a._trailing;
        if (_throttled) {
            _throttled.unsubscribe();
        }
        this._throttled = undefined;
        if (_trailing) {
            this.send();
        }
    };
    ThrottleSubscriber.prototype.notifyNext = function () {
        this.throttlingDone();
    };
    ThrottleSubscriber.prototype.notifyComplete = function () {
        this.throttlingDone();
    };
    return ThrottleSubscriber;
}(_innerSubscribe__WEBPACK_IMPORTED_MODULE_1__["SimpleOuterSubscriber"]));
//# sourceMappingURL=throttle.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/operators/throttleTime.js":
/*!*********************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/operators/throttleTime.js ***!
  \*********************************************************************/
/*! exports provided: throttleTime */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "throttleTime", function() { return throttleTime; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
/* harmony import */ var _Subscriber__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Subscriber */ "../node_modules/rxjs/_esm5/internal/Subscriber.js");
/* harmony import */ var _scheduler_async__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../scheduler/async */ "../node_modules/rxjs/_esm5/internal/scheduler/async.js");
/* harmony import */ var _throttle__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./throttle */ "../node_modules/rxjs/_esm5/internal/operators/throttle.js");
/** PURE_IMPORTS_START tslib,_Subscriber,_scheduler_async,_throttle PURE_IMPORTS_END */




function throttleTime(duration, scheduler, config) {
    if (scheduler === void 0) {
        scheduler = _scheduler_async__WEBPACK_IMPORTED_MODULE_2__["async"];
    }
    if (config === void 0) {
        config = _throttle__WEBPACK_IMPORTED_MODULE_3__["defaultThrottleConfig"];
    }
    return function (source) { return source.lift(new ThrottleTimeOperator(duration, scheduler, config.leading, config.trailing)); };
}
var ThrottleTimeOperator = /*@__PURE__*/ (function () {
    function ThrottleTimeOperator(duration, scheduler, leading, trailing) {
        this.duration = duration;
        this.scheduler = scheduler;
        this.leading = leading;
        this.trailing = trailing;
    }
    ThrottleTimeOperator.prototype.call = function (subscriber, source) {
        return source.subscribe(new ThrottleTimeSubscriber(subscriber, this.duration, this.scheduler, this.leading, this.trailing));
    };
    return ThrottleTimeOperator;
}());
var ThrottleTimeSubscriber = /*@__PURE__*/ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](ThrottleTimeSubscriber, _super);
    function ThrottleTimeSubscriber(destination, duration, scheduler, leading, trailing) {
        var _this = _super.call(this, destination) || this;
        _this.duration = duration;
        _this.scheduler = scheduler;
        _this.leading = leading;
        _this.trailing = trailing;
        _this._hasTrailingValue = false;
        _this._trailingValue = null;
        return _this;
    }
    ThrottleTimeSubscriber.prototype._next = function (value) {
        if (this.throttled) {
            if (this.trailing) {
                this._trailingValue = value;
                this._hasTrailingValue = true;
            }
        }
        else {
            this.add(this.throttled = this.scheduler.schedule(dispatchNext, this.duration, { subscriber: this }));
            if (this.leading) {
                this.destination.next(value);
            }
            else if (this.trailing) {
                this._trailingValue = value;
                this._hasTrailingValue = true;
            }
        }
    };
    ThrottleTimeSubscriber.prototype._complete = function () {
        if (this._hasTrailingValue) {
            this.destination.next(this._trailingValue);
            this.destination.complete();
        }
        else {
            this.destination.complete();
        }
    };
    ThrottleTimeSubscriber.prototype.clearThrottle = function () {
        var throttled = this.throttled;
        if (throttled) {
            if (this.trailing && this._hasTrailingValue) {
                this.destination.next(this._trailingValue);
                this._trailingValue = null;
                this._hasTrailingValue = false;
            }
            throttled.unsubscribe();
            this.remove(throttled);
            this.throttled = null;
        }
    };
    return ThrottleTimeSubscriber;
}(_Subscriber__WEBPACK_IMPORTED_MODULE_1__["Subscriber"]));
function dispatchNext(arg) {
    var subscriber = arg.subscriber;
    subscriber.clearThrottle();
}
//# sourceMappingURL=throttleTime.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/operators/throwIfEmpty.js":
/*!*********************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/operators/throwIfEmpty.js ***!
  \*********************************************************************/
/*! exports provided: throwIfEmpty */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "throwIfEmpty", function() { return throwIfEmpty; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
/* harmony import */ var _util_EmptyError__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../util/EmptyError */ "../node_modules/rxjs/_esm5/internal/util/EmptyError.js");
/* harmony import */ var _Subscriber__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../Subscriber */ "../node_modules/rxjs/_esm5/internal/Subscriber.js");
/** PURE_IMPORTS_START tslib,_util_EmptyError,_Subscriber PURE_IMPORTS_END */



function throwIfEmpty(errorFactory) {
    if (errorFactory === void 0) {
        errorFactory = defaultErrorFactory;
    }
    return function (source) {
        return source.lift(new ThrowIfEmptyOperator(errorFactory));
    };
}
var ThrowIfEmptyOperator = /*@__PURE__*/ (function () {
    function ThrowIfEmptyOperator(errorFactory) {
        this.errorFactory = errorFactory;
    }
    ThrowIfEmptyOperator.prototype.call = function (subscriber, source) {
        return source.subscribe(new ThrowIfEmptySubscriber(subscriber, this.errorFactory));
    };
    return ThrowIfEmptyOperator;
}());
var ThrowIfEmptySubscriber = /*@__PURE__*/ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](ThrowIfEmptySubscriber, _super);
    function ThrowIfEmptySubscriber(destination, errorFactory) {
        var _this = _super.call(this, destination) || this;
        _this.errorFactory = errorFactory;
        _this.hasValue = false;
        return _this;
    }
    ThrowIfEmptySubscriber.prototype._next = function (value) {
        this.hasValue = true;
        this.destination.next(value);
    };
    ThrowIfEmptySubscriber.prototype._complete = function () {
        if (!this.hasValue) {
            var err = void 0;
            try {
                err = this.errorFactory();
            }
            catch (e) {
                err = e;
            }
            this.destination.error(err);
        }
        else {
            return this.destination.complete();
        }
    };
    return ThrowIfEmptySubscriber;
}(_Subscriber__WEBPACK_IMPORTED_MODULE_2__["Subscriber"]));
function defaultErrorFactory() {
    return new _util_EmptyError__WEBPACK_IMPORTED_MODULE_1__["EmptyError"]();
}
//# sourceMappingURL=throwIfEmpty.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/operators/timeInterval.js":
/*!*********************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/operators/timeInterval.js ***!
  \*********************************************************************/
/*! exports provided: timeInterval, TimeInterval */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "timeInterval", function() { return timeInterval; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TimeInterval", function() { return TimeInterval; });
/* harmony import */ var _scheduler_async__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../scheduler/async */ "../node_modules/rxjs/_esm5/internal/scheduler/async.js");
/* harmony import */ var _scan__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./scan */ "../node_modules/rxjs/_esm5/internal/operators/scan.js");
/* harmony import */ var _observable_defer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../observable/defer */ "../node_modules/rxjs/_esm5/internal/observable/defer.js");
/* harmony import */ var _map__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./map */ "../node_modules/rxjs/_esm5/internal/operators/map.js");
/** PURE_IMPORTS_START _scheduler_async,_scan,_observable_defer,_map PURE_IMPORTS_END */




function timeInterval(scheduler) {
    if (scheduler === void 0) {
        scheduler = _scheduler_async__WEBPACK_IMPORTED_MODULE_0__["async"];
    }
    return function (source) {
        return Object(_observable_defer__WEBPACK_IMPORTED_MODULE_2__["defer"])(function () {
            return source.pipe(Object(_scan__WEBPACK_IMPORTED_MODULE_1__["scan"])(function (_a, value) {
                var current = _a.current;
                return ({ value: value, current: scheduler.now(), last: current });
            }, { current: scheduler.now(), value: undefined, last: undefined }), Object(_map__WEBPACK_IMPORTED_MODULE_3__["map"])(function (_a) {
                var current = _a.current, last = _a.last, value = _a.value;
                return new TimeInterval(value, current - last);
            }));
        });
    };
}
var TimeInterval = /*@__PURE__*/ (function () {
    function TimeInterval(value, interval) {
        this.value = value;
        this.interval = interval;
    }
    return TimeInterval;
}());

//# sourceMappingURL=timeInterval.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/operators/timeout.js":
/*!****************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/operators/timeout.js ***!
  \****************************************************************/
/*! exports provided: timeout */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "timeout", function() { return timeout; });
/* harmony import */ var _scheduler_async__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../scheduler/async */ "../node_modules/rxjs/_esm5/internal/scheduler/async.js");
/* harmony import */ var _util_TimeoutError__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../util/TimeoutError */ "../node_modules/rxjs/_esm5/internal/util/TimeoutError.js");
/* harmony import */ var _timeoutWith__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./timeoutWith */ "../node_modules/rxjs/_esm5/internal/operators/timeoutWith.js");
/* harmony import */ var _observable_throwError__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../observable/throwError */ "../node_modules/rxjs/_esm5/internal/observable/throwError.js");
/** PURE_IMPORTS_START _scheduler_async,_util_TimeoutError,_timeoutWith,_observable_throwError PURE_IMPORTS_END */




function timeout(due, scheduler) {
    if (scheduler === void 0) {
        scheduler = _scheduler_async__WEBPACK_IMPORTED_MODULE_0__["async"];
    }
    return Object(_timeoutWith__WEBPACK_IMPORTED_MODULE_2__["timeoutWith"])(due, Object(_observable_throwError__WEBPACK_IMPORTED_MODULE_3__["throwError"])(new _util_TimeoutError__WEBPACK_IMPORTED_MODULE_1__["TimeoutError"]()), scheduler);
}
//# sourceMappingURL=timeout.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/operators/timeoutWith.js":
/*!********************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/operators/timeoutWith.js ***!
  \********************************************************************/
/*! exports provided: timeoutWith */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "timeoutWith", function() { return timeoutWith; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
/* harmony import */ var _scheduler_async__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../scheduler/async */ "../node_modules/rxjs/_esm5/internal/scheduler/async.js");
/* harmony import */ var _util_isDate__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../util/isDate */ "../node_modules/rxjs/_esm5/internal/util/isDate.js");
/* harmony import */ var _innerSubscribe__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../innerSubscribe */ "../node_modules/rxjs/_esm5/internal/innerSubscribe.js");
/** PURE_IMPORTS_START tslib,_scheduler_async,_util_isDate,_innerSubscribe PURE_IMPORTS_END */




function timeoutWith(due, withObservable, scheduler) {
    if (scheduler === void 0) {
        scheduler = _scheduler_async__WEBPACK_IMPORTED_MODULE_1__["async"];
    }
    return function (source) {
        var absoluteTimeout = Object(_util_isDate__WEBPACK_IMPORTED_MODULE_2__["isDate"])(due);
        var waitFor = absoluteTimeout ? (+due - scheduler.now()) : Math.abs(due);
        return source.lift(new TimeoutWithOperator(waitFor, absoluteTimeout, withObservable, scheduler));
    };
}
var TimeoutWithOperator = /*@__PURE__*/ (function () {
    function TimeoutWithOperator(waitFor, absoluteTimeout, withObservable, scheduler) {
        this.waitFor = waitFor;
        this.absoluteTimeout = absoluteTimeout;
        this.withObservable = withObservable;
        this.scheduler = scheduler;
    }
    TimeoutWithOperator.prototype.call = function (subscriber, source) {
        return source.subscribe(new TimeoutWithSubscriber(subscriber, this.absoluteTimeout, this.waitFor, this.withObservable, this.scheduler));
    };
    return TimeoutWithOperator;
}());
var TimeoutWithSubscriber = /*@__PURE__*/ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](TimeoutWithSubscriber, _super);
    function TimeoutWithSubscriber(destination, absoluteTimeout, waitFor, withObservable, scheduler) {
        var _this = _super.call(this, destination) || this;
        _this.absoluteTimeout = absoluteTimeout;
        _this.waitFor = waitFor;
        _this.withObservable = withObservable;
        _this.scheduler = scheduler;
        _this.scheduleTimeout();
        return _this;
    }
    TimeoutWithSubscriber.dispatchTimeout = function (subscriber) {
        var withObservable = subscriber.withObservable;
        subscriber._unsubscribeAndRecycle();
        subscriber.add(Object(_innerSubscribe__WEBPACK_IMPORTED_MODULE_3__["innerSubscribe"])(withObservable, new _innerSubscribe__WEBPACK_IMPORTED_MODULE_3__["SimpleInnerSubscriber"](subscriber)));
    };
    TimeoutWithSubscriber.prototype.scheduleTimeout = function () {
        var action = this.action;
        if (action) {
            this.action = action.schedule(this, this.waitFor);
        }
        else {
            this.add(this.action = this.scheduler.schedule(TimeoutWithSubscriber.dispatchTimeout, this.waitFor, this));
        }
    };
    TimeoutWithSubscriber.prototype._next = function (value) {
        if (!this.absoluteTimeout) {
            this.scheduleTimeout();
        }
        _super.prototype._next.call(this, value);
    };
    TimeoutWithSubscriber.prototype._unsubscribe = function () {
        this.action = undefined;
        this.scheduler = null;
        this.withObservable = null;
    };
    return TimeoutWithSubscriber;
}(_innerSubscribe__WEBPACK_IMPORTED_MODULE_3__["SimpleOuterSubscriber"]));
//# sourceMappingURL=timeoutWith.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/operators/timestamp.js":
/*!******************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/operators/timestamp.js ***!
  \******************************************************************/
/*! exports provided: timestamp, Timestamp */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "timestamp", function() { return timestamp; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Timestamp", function() { return Timestamp; });
/* harmony import */ var _scheduler_async__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../scheduler/async */ "../node_modules/rxjs/_esm5/internal/scheduler/async.js");
/* harmony import */ var _map__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./map */ "../node_modules/rxjs/_esm5/internal/operators/map.js");
/** PURE_IMPORTS_START _scheduler_async,_map PURE_IMPORTS_END */


function timestamp(scheduler) {
    if (scheduler === void 0) {
        scheduler = _scheduler_async__WEBPACK_IMPORTED_MODULE_0__["async"];
    }
    return Object(_map__WEBPACK_IMPORTED_MODULE_1__["map"])(function (value) { return new Timestamp(value, scheduler.now()); });
}
var Timestamp = /*@__PURE__*/ (function () {
    function Timestamp(value, timestamp) {
        this.value = value;
        this.timestamp = timestamp;
    }
    return Timestamp;
}());

//# sourceMappingURL=timestamp.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/operators/toArray.js":
/*!****************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/operators/toArray.js ***!
  \****************************************************************/
/*! exports provided: toArray */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "toArray", function() { return toArray; });
/* harmony import */ var _reduce__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./reduce */ "../node_modules/rxjs/_esm5/internal/operators/reduce.js");
/** PURE_IMPORTS_START _reduce PURE_IMPORTS_END */

function toArrayReducer(arr, item, index) {
    if (index === 0) {
        return [item];
    }
    arr.push(item);
    return arr;
}
function toArray() {
    return Object(_reduce__WEBPACK_IMPORTED_MODULE_0__["reduce"])(toArrayReducer, []);
}
//# sourceMappingURL=toArray.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/operators/window.js":
/*!***************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/operators/window.js ***!
  \***************************************************************/
/*! exports provided: window */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "window", function() { return window; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
/* harmony import */ var _Subject__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Subject */ "../node_modules/rxjs/_esm5/internal/Subject.js");
/* harmony import */ var _innerSubscribe__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../innerSubscribe */ "../node_modules/rxjs/_esm5/internal/innerSubscribe.js");
/** PURE_IMPORTS_START tslib,_Subject,_innerSubscribe PURE_IMPORTS_END */



function window(windowBoundaries) {
    return function windowOperatorFunction(source) {
        return source.lift(new WindowOperator(windowBoundaries));
    };
}
var WindowOperator = /*@__PURE__*/ (function () {
    function WindowOperator(windowBoundaries) {
        this.windowBoundaries = windowBoundaries;
    }
    WindowOperator.prototype.call = function (subscriber, source) {
        var windowSubscriber = new WindowSubscriber(subscriber);
        var sourceSubscription = source.subscribe(windowSubscriber);
        if (!sourceSubscription.closed) {
            windowSubscriber.add(Object(_innerSubscribe__WEBPACK_IMPORTED_MODULE_2__["innerSubscribe"])(this.windowBoundaries, new _innerSubscribe__WEBPACK_IMPORTED_MODULE_2__["SimpleInnerSubscriber"](windowSubscriber)));
        }
        return sourceSubscription;
    };
    return WindowOperator;
}());
var WindowSubscriber = /*@__PURE__*/ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](WindowSubscriber, _super);
    function WindowSubscriber(destination) {
        var _this = _super.call(this, destination) || this;
        _this.window = new _Subject__WEBPACK_IMPORTED_MODULE_1__["Subject"]();
        destination.next(_this.window);
        return _this;
    }
    WindowSubscriber.prototype.notifyNext = function () {
        this.openWindow();
    };
    WindowSubscriber.prototype.notifyError = function (error) {
        this._error(error);
    };
    WindowSubscriber.prototype.notifyComplete = function () {
        this._complete();
    };
    WindowSubscriber.prototype._next = function (value) {
        this.window.next(value);
    };
    WindowSubscriber.prototype._error = function (err) {
        this.window.error(err);
        this.destination.error(err);
    };
    WindowSubscriber.prototype._complete = function () {
        this.window.complete();
        this.destination.complete();
    };
    WindowSubscriber.prototype._unsubscribe = function () {
        this.window = null;
    };
    WindowSubscriber.prototype.openWindow = function () {
        var prevWindow = this.window;
        if (prevWindow) {
            prevWindow.complete();
        }
        var destination = this.destination;
        var newWindow = this.window = new _Subject__WEBPACK_IMPORTED_MODULE_1__["Subject"]();
        destination.next(newWindow);
    };
    return WindowSubscriber;
}(_innerSubscribe__WEBPACK_IMPORTED_MODULE_2__["SimpleOuterSubscriber"]));
//# sourceMappingURL=window.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/operators/windowCount.js":
/*!********************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/operators/windowCount.js ***!
  \********************************************************************/
/*! exports provided: windowCount */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "windowCount", function() { return windowCount; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
/* harmony import */ var _Subscriber__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Subscriber */ "../node_modules/rxjs/_esm5/internal/Subscriber.js");
/* harmony import */ var _Subject__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../Subject */ "../node_modules/rxjs/_esm5/internal/Subject.js");
/** PURE_IMPORTS_START tslib,_Subscriber,_Subject PURE_IMPORTS_END */



function windowCount(windowSize, startWindowEvery) {
    if (startWindowEvery === void 0) {
        startWindowEvery = 0;
    }
    return function windowCountOperatorFunction(source) {
        return source.lift(new WindowCountOperator(windowSize, startWindowEvery));
    };
}
var WindowCountOperator = /*@__PURE__*/ (function () {
    function WindowCountOperator(windowSize, startWindowEvery) {
        this.windowSize = windowSize;
        this.startWindowEvery = startWindowEvery;
    }
    WindowCountOperator.prototype.call = function (subscriber, source) {
        return source.subscribe(new WindowCountSubscriber(subscriber, this.windowSize, this.startWindowEvery));
    };
    return WindowCountOperator;
}());
var WindowCountSubscriber = /*@__PURE__*/ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](WindowCountSubscriber, _super);
    function WindowCountSubscriber(destination, windowSize, startWindowEvery) {
        var _this = _super.call(this, destination) || this;
        _this.destination = destination;
        _this.windowSize = windowSize;
        _this.startWindowEvery = startWindowEvery;
        _this.windows = [new _Subject__WEBPACK_IMPORTED_MODULE_2__["Subject"]()];
        _this.count = 0;
        destination.next(_this.windows[0]);
        return _this;
    }
    WindowCountSubscriber.prototype._next = function (value) {
        var startWindowEvery = (this.startWindowEvery > 0) ? this.startWindowEvery : this.windowSize;
        var destination = this.destination;
        var windowSize = this.windowSize;
        var windows = this.windows;
        var len = windows.length;
        for (var i = 0; i < len && !this.closed; i++) {
            windows[i].next(value);
        }
        var c = this.count - windowSize + 1;
        if (c >= 0 && c % startWindowEvery === 0 && !this.closed) {
            windows.shift().complete();
        }
        if (++this.count % startWindowEvery === 0 && !this.closed) {
            var window_1 = new _Subject__WEBPACK_IMPORTED_MODULE_2__["Subject"]();
            windows.push(window_1);
            destination.next(window_1);
        }
    };
    WindowCountSubscriber.prototype._error = function (err) {
        var windows = this.windows;
        if (windows) {
            while (windows.length > 0 && !this.closed) {
                windows.shift().error(err);
            }
        }
        this.destination.error(err);
    };
    WindowCountSubscriber.prototype._complete = function () {
        var windows = this.windows;
        if (windows) {
            while (windows.length > 0 && !this.closed) {
                windows.shift().complete();
            }
        }
        this.destination.complete();
    };
    WindowCountSubscriber.prototype._unsubscribe = function () {
        this.count = 0;
        this.windows = null;
    };
    return WindowCountSubscriber;
}(_Subscriber__WEBPACK_IMPORTED_MODULE_1__["Subscriber"]));
//# sourceMappingURL=windowCount.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/operators/windowTime.js":
/*!*******************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/operators/windowTime.js ***!
  \*******************************************************************/
/*! exports provided: windowTime */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "windowTime", function() { return windowTime; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
/* harmony import */ var _Subject__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Subject */ "../node_modules/rxjs/_esm5/internal/Subject.js");
/* harmony import */ var _scheduler_async__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../scheduler/async */ "../node_modules/rxjs/_esm5/internal/scheduler/async.js");
/* harmony import */ var _Subscriber__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../Subscriber */ "../node_modules/rxjs/_esm5/internal/Subscriber.js");
/* harmony import */ var _util_isNumeric__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../util/isNumeric */ "../node_modules/rxjs/_esm5/internal/util/isNumeric.js");
/* harmony import */ var _util_isScheduler__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../util/isScheduler */ "../node_modules/rxjs/_esm5/internal/util/isScheduler.js");
/** PURE_IMPORTS_START tslib,_Subject,_scheduler_async,_Subscriber,_util_isNumeric,_util_isScheduler PURE_IMPORTS_END */






function windowTime(windowTimeSpan) {
    var scheduler = _scheduler_async__WEBPACK_IMPORTED_MODULE_2__["async"];
    var windowCreationInterval = null;
    var maxWindowSize = Number.POSITIVE_INFINITY;
    if (Object(_util_isScheduler__WEBPACK_IMPORTED_MODULE_5__["isScheduler"])(arguments[3])) {
        scheduler = arguments[3];
    }
    if (Object(_util_isScheduler__WEBPACK_IMPORTED_MODULE_5__["isScheduler"])(arguments[2])) {
        scheduler = arguments[2];
    }
    else if (Object(_util_isNumeric__WEBPACK_IMPORTED_MODULE_4__["isNumeric"])(arguments[2])) {
        maxWindowSize = Number(arguments[2]);
    }
    if (Object(_util_isScheduler__WEBPACK_IMPORTED_MODULE_5__["isScheduler"])(arguments[1])) {
        scheduler = arguments[1];
    }
    else if (Object(_util_isNumeric__WEBPACK_IMPORTED_MODULE_4__["isNumeric"])(arguments[1])) {
        windowCreationInterval = Number(arguments[1]);
    }
    return function windowTimeOperatorFunction(source) {
        return source.lift(new WindowTimeOperator(windowTimeSpan, windowCreationInterval, maxWindowSize, scheduler));
    };
}
var WindowTimeOperator = /*@__PURE__*/ (function () {
    function WindowTimeOperator(windowTimeSpan, windowCreationInterval, maxWindowSize, scheduler) {
        this.windowTimeSpan = windowTimeSpan;
        this.windowCreationInterval = windowCreationInterval;
        this.maxWindowSize = maxWindowSize;
        this.scheduler = scheduler;
    }
    WindowTimeOperator.prototype.call = function (subscriber, source) {
        return source.subscribe(new WindowTimeSubscriber(subscriber, this.windowTimeSpan, this.windowCreationInterval, this.maxWindowSize, this.scheduler));
    };
    return WindowTimeOperator;
}());
var CountedSubject = /*@__PURE__*/ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](CountedSubject, _super);
    function CountedSubject() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this._numberOfNextedValues = 0;
        return _this;
    }
    CountedSubject.prototype.next = function (value) {
        this._numberOfNextedValues++;
        _super.prototype.next.call(this, value);
    };
    Object.defineProperty(CountedSubject.prototype, "numberOfNextedValues", {
        get: function () {
            return this._numberOfNextedValues;
        },
        enumerable: true,
        configurable: true
    });
    return CountedSubject;
}(_Subject__WEBPACK_IMPORTED_MODULE_1__["Subject"]));
var WindowTimeSubscriber = /*@__PURE__*/ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](WindowTimeSubscriber, _super);
    function WindowTimeSubscriber(destination, windowTimeSpan, windowCreationInterval, maxWindowSize, scheduler) {
        var _this = _super.call(this, destination) || this;
        _this.destination = destination;
        _this.windowTimeSpan = windowTimeSpan;
        _this.windowCreationInterval = windowCreationInterval;
        _this.maxWindowSize = maxWindowSize;
        _this.scheduler = scheduler;
        _this.windows = [];
        var window = _this.openWindow();
        if (windowCreationInterval !== null && windowCreationInterval >= 0) {
            var closeState = { subscriber: _this, window: window, context: null };
            var creationState = { windowTimeSpan: windowTimeSpan, windowCreationInterval: windowCreationInterval, subscriber: _this, scheduler: scheduler };
            _this.add(scheduler.schedule(dispatchWindowClose, windowTimeSpan, closeState));
            _this.add(scheduler.schedule(dispatchWindowCreation, windowCreationInterval, creationState));
        }
        else {
            var timeSpanOnlyState = { subscriber: _this, window: window, windowTimeSpan: windowTimeSpan };
            _this.add(scheduler.schedule(dispatchWindowTimeSpanOnly, windowTimeSpan, timeSpanOnlyState));
        }
        return _this;
    }
    WindowTimeSubscriber.prototype._next = function (value) {
        var windows = this.windows;
        var len = windows.length;
        for (var i = 0; i < len; i++) {
            var window_1 = windows[i];
            if (!window_1.closed) {
                window_1.next(value);
                if (window_1.numberOfNextedValues >= this.maxWindowSize) {
                    this.closeWindow(window_1);
                }
            }
        }
    };
    WindowTimeSubscriber.prototype._error = function (err) {
        var windows = this.windows;
        while (windows.length > 0) {
            windows.shift().error(err);
        }
        this.destination.error(err);
    };
    WindowTimeSubscriber.prototype._complete = function () {
        var windows = this.windows;
        while (windows.length > 0) {
            var window_2 = windows.shift();
            if (!window_2.closed) {
                window_2.complete();
            }
        }
        this.destination.complete();
    };
    WindowTimeSubscriber.prototype.openWindow = function () {
        var window = new CountedSubject();
        this.windows.push(window);
        var destination = this.destination;
        destination.next(window);
        return window;
    };
    WindowTimeSubscriber.prototype.closeWindow = function (window) {
        window.complete();
        var windows = this.windows;
        windows.splice(windows.indexOf(window), 1);
    };
    return WindowTimeSubscriber;
}(_Subscriber__WEBPACK_IMPORTED_MODULE_3__["Subscriber"]));
function dispatchWindowTimeSpanOnly(state) {
    var subscriber = state.subscriber, windowTimeSpan = state.windowTimeSpan, window = state.window;
    if (window) {
        subscriber.closeWindow(window);
    }
    state.window = subscriber.openWindow();
    this.schedule(state, windowTimeSpan);
}
function dispatchWindowCreation(state) {
    var windowTimeSpan = state.windowTimeSpan, subscriber = state.subscriber, scheduler = state.scheduler, windowCreationInterval = state.windowCreationInterval;
    var window = subscriber.openWindow();
    var action = this;
    var context = { action: action, subscription: null };
    var timeSpanState = { subscriber: subscriber, window: window, context: context };
    context.subscription = scheduler.schedule(dispatchWindowClose, windowTimeSpan, timeSpanState);
    action.add(context.subscription);
    action.schedule(state, windowCreationInterval);
}
function dispatchWindowClose(state) {
    var subscriber = state.subscriber, window = state.window, context = state.context;
    if (context && context.action && context.subscription) {
        context.action.remove(context.subscription);
    }
    subscriber.closeWindow(window);
}
//# sourceMappingURL=windowTime.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/operators/windowToggle.js":
/*!*********************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/operators/windowToggle.js ***!
  \*********************************************************************/
/*! exports provided: windowToggle */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "windowToggle", function() { return windowToggle; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
/* harmony import */ var _Subject__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Subject */ "../node_modules/rxjs/_esm5/internal/Subject.js");
/* harmony import */ var _Subscription__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../Subscription */ "../node_modules/rxjs/_esm5/internal/Subscription.js");
/* harmony import */ var _OuterSubscriber__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../OuterSubscriber */ "../node_modules/rxjs/_esm5/internal/OuterSubscriber.js");
/* harmony import */ var _util_subscribeToResult__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../util/subscribeToResult */ "../node_modules/rxjs/_esm5/internal/util/subscribeToResult.js");
/** PURE_IMPORTS_START tslib,_Subject,_Subscription,_OuterSubscriber,_util_subscribeToResult PURE_IMPORTS_END */





function windowToggle(openings, closingSelector) {
    return function (source) { return source.lift(new WindowToggleOperator(openings, closingSelector)); };
}
var WindowToggleOperator = /*@__PURE__*/ (function () {
    function WindowToggleOperator(openings, closingSelector) {
        this.openings = openings;
        this.closingSelector = closingSelector;
    }
    WindowToggleOperator.prototype.call = function (subscriber, source) {
        return source.subscribe(new WindowToggleSubscriber(subscriber, this.openings, this.closingSelector));
    };
    return WindowToggleOperator;
}());
var WindowToggleSubscriber = /*@__PURE__*/ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](WindowToggleSubscriber, _super);
    function WindowToggleSubscriber(destination, openings, closingSelector) {
        var _this = _super.call(this, destination) || this;
        _this.openings = openings;
        _this.closingSelector = closingSelector;
        _this.contexts = [];
        _this.add(_this.openSubscription = Object(_util_subscribeToResult__WEBPACK_IMPORTED_MODULE_4__["subscribeToResult"])(_this, openings, openings));
        return _this;
    }
    WindowToggleSubscriber.prototype._next = function (value) {
        var contexts = this.contexts;
        if (contexts) {
            var len = contexts.length;
            for (var i = 0; i < len; i++) {
                contexts[i].window.next(value);
            }
        }
    };
    WindowToggleSubscriber.prototype._error = function (err) {
        var contexts = this.contexts;
        this.contexts = null;
        if (contexts) {
            var len = contexts.length;
            var index = -1;
            while (++index < len) {
                var context_1 = contexts[index];
                context_1.window.error(err);
                context_1.subscription.unsubscribe();
            }
        }
        _super.prototype._error.call(this, err);
    };
    WindowToggleSubscriber.prototype._complete = function () {
        var contexts = this.contexts;
        this.contexts = null;
        if (contexts) {
            var len = contexts.length;
            var index = -1;
            while (++index < len) {
                var context_2 = contexts[index];
                context_2.window.complete();
                context_2.subscription.unsubscribe();
            }
        }
        _super.prototype._complete.call(this);
    };
    WindowToggleSubscriber.prototype._unsubscribe = function () {
        var contexts = this.contexts;
        this.contexts = null;
        if (contexts) {
            var len = contexts.length;
            var index = -1;
            while (++index < len) {
                var context_3 = contexts[index];
                context_3.window.unsubscribe();
                context_3.subscription.unsubscribe();
            }
        }
    };
    WindowToggleSubscriber.prototype.notifyNext = function (outerValue, innerValue, outerIndex, innerIndex, innerSub) {
        if (outerValue === this.openings) {
            var closingNotifier = void 0;
            try {
                var closingSelector = this.closingSelector;
                closingNotifier = closingSelector(innerValue);
            }
            catch (e) {
                return this.error(e);
            }
            var window_1 = new _Subject__WEBPACK_IMPORTED_MODULE_1__["Subject"]();
            var subscription = new _Subscription__WEBPACK_IMPORTED_MODULE_2__["Subscription"]();
            var context_4 = { window: window_1, subscription: subscription };
            this.contexts.push(context_4);
            var innerSubscription = Object(_util_subscribeToResult__WEBPACK_IMPORTED_MODULE_4__["subscribeToResult"])(this, closingNotifier, context_4);
            if (innerSubscription.closed) {
                this.closeWindow(this.contexts.length - 1);
            }
            else {
                innerSubscription.context = context_4;
                subscription.add(innerSubscription);
            }
            this.destination.next(window_1);
        }
        else {
            this.closeWindow(this.contexts.indexOf(outerValue));
        }
    };
    WindowToggleSubscriber.prototype.notifyError = function (err) {
        this.error(err);
    };
    WindowToggleSubscriber.prototype.notifyComplete = function (inner) {
        if (inner !== this.openSubscription) {
            this.closeWindow(this.contexts.indexOf(inner.context));
        }
    };
    WindowToggleSubscriber.prototype.closeWindow = function (index) {
        if (index === -1) {
            return;
        }
        var contexts = this.contexts;
        var context = contexts[index];
        var window = context.window, subscription = context.subscription;
        contexts.splice(index, 1);
        window.complete();
        subscription.unsubscribe();
    };
    return WindowToggleSubscriber;
}(_OuterSubscriber__WEBPACK_IMPORTED_MODULE_3__["OuterSubscriber"]));
//# sourceMappingURL=windowToggle.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/operators/windowWhen.js":
/*!*******************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/operators/windowWhen.js ***!
  \*******************************************************************/
/*! exports provided: windowWhen */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "windowWhen", function() { return windowWhen; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
/* harmony import */ var _Subject__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Subject */ "../node_modules/rxjs/_esm5/internal/Subject.js");
/* harmony import */ var _OuterSubscriber__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../OuterSubscriber */ "../node_modules/rxjs/_esm5/internal/OuterSubscriber.js");
/* harmony import */ var _util_subscribeToResult__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../util/subscribeToResult */ "../node_modules/rxjs/_esm5/internal/util/subscribeToResult.js");
/** PURE_IMPORTS_START tslib,_Subject,_OuterSubscriber,_util_subscribeToResult PURE_IMPORTS_END */




function windowWhen(closingSelector) {
    return function windowWhenOperatorFunction(source) {
        return source.lift(new WindowOperator(closingSelector));
    };
}
var WindowOperator = /*@__PURE__*/ (function () {
    function WindowOperator(closingSelector) {
        this.closingSelector = closingSelector;
    }
    WindowOperator.prototype.call = function (subscriber, source) {
        return source.subscribe(new WindowSubscriber(subscriber, this.closingSelector));
    };
    return WindowOperator;
}());
var WindowSubscriber = /*@__PURE__*/ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](WindowSubscriber, _super);
    function WindowSubscriber(destination, closingSelector) {
        var _this = _super.call(this, destination) || this;
        _this.destination = destination;
        _this.closingSelector = closingSelector;
        _this.openWindow();
        return _this;
    }
    WindowSubscriber.prototype.notifyNext = function (_outerValue, _innerValue, _outerIndex, _innerIndex, innerSub) {
        this.openWindow(innerSub);
    };
    WindowSubscriber.prototype.notifyError = function (error) {
        this._error(error);
    };
    WindowSubscriber.prototype.notifyComplete = function (innerSub) {
        this.openWindow(innerSub);
    };
    WindowSubscriber.prototype._next = function (value) {
        this.window.next(value);
    };
    WindowSubscriber.prototype._error = function (err) {
        this.window.error(err);
        this.destination.error(err);
        this.unsubscribeClosingNotification();
    };
    WindowSubscriber.prototype._complete = function () {
        this.window.complete();
        this.destination.complete();
        this.unsubscribeClosingNotification();
    };
    WindowSubscriber.prototype.unsubscribeClosingNotification = function () {
        if (this.closingNotification) {
            this.closingNotification.unsubscribe();
        }
    };
    WindowSubscriber.prototype.openWindow = function (innerSub) {
        if (innerSub === void 0) {
            innerSub = null;
        }
        if (innerSub) {
            this.remove(innerSub);
            innerSub.unsubscribe();
        }
        var prevWindow = this.window;
        if (prevWindow) {
            prevWindow.complete();
        }
        var window = this.window = new _Subject__WEBPACK_IMPORTED_MODULE_1__["Subject"]();
        this.destination.next(window);
        var closingNotifier;
        try {
            var closingSelector = this.closingSelector;
            closingNotifier = closingSelector();
        }
        catch (e) {
            this.destination.error(e);
            this.window.error(e);
            return;
        }
        this.add(this.closingNotification = Object(_util_subscribeToResult__WEBPACK_IMPORTED_MODULE_3__["subscribeToResult"])(this, closingNotifier));
    };
    return WindowSubscriber;
}(_OuterSubscriber__WEBPACK_IMPORTED_MODULE_2__["OuterSubscriber"]));
//# sourceMappingURL=windowWhen.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/operators/withLatestFrom.js":
/*!***********************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/operators/withLatestFrom.js ***!
  \***********************************************************************/
/*! exports provided: withLatestFrom */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "withLatestFrom", function() { return withLatestFrom; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
/* harmony import */ var _OuterSubscriber__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../OuterSubscriber */ "../node_modules/rxjs/_esm5/internal/OuterSubscriber.js");
/* harmony import */ var _util_subscribeToResult__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../util/subscribeToResult */ "../node_modules/rxjs/_esm5/internal/util/subscribeToResult.js");
/** PURE_IMPORTS_START tslib,_OuterSubscriber,_util_subscribeToResult PURE_IMPORTS_END */



function withLatestFrom() {
    var args = [];
    for (var _i = 0; _i < arguments.length; _i++) {
        args[_i] = arguments[_i];
    }
    return function (source) {
        var project;
        if (typeof args[args.length - 1] === 'function') {
            project = args.pop();
        }
        var observables = args;
        return source.lift(new WithLatestFromOperator(observables, project));
    };
}
var WithLatestFromOperator = /*@__PURE__*/ (function () {
    function WithLatestFromOperator(observables, project) {
        this.observables = observables;
        this.project = project;
    }
    WithLatestFromOperator.prototype.call = function (subscriber, source) {
        return source.subscribe(new WithLatestFromSubscriber(subscriber, this.observables, this.project));
    };
    return WithLatestFromOperator;
}());
var WithLatestFromSubscriber = /*@__PURE__*/ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](WithLatestFromSubscriber, _super);
    function WithLatestFromSubscriber(destination, observables, project) {
        var _this = _super.call(this, destination) || this;
        _this.observables = observables;
        _this.project = project;
        _this.toRespond = [];
        var len = observables.length;
        _this.values = new Array(len);
        for (var i = 0; i < len; i++) {
            _this.toRespond.push(i);
        }
        for (var i = 0; i < len; i++) {
            var observable = observables[i];
            _this.add(Object(_util_subscribeToResult__WEBPACK_IMPORTED_MODULE_2__["subscribeToResult"])(_this, observable, undefined, i));
        }
        return _this;
    }
    WithLatestFromSubscriber.prototype.notifyNext = function (_outerValue, innerValue, outerIndex) {
        this.values[outerIndex] = innerValue;
        var toRespond = this.toRespond;
        if (toRespond.length > 0) {
            var found = toRespond.indexOf(outerIndex);
            if (found !== -1) {
                toRespond.splice(found, 1);
            }
        }
    };
    WithLatestFromSubscriber.prototype.notifyComplete = function () {
    };
    WithLatestFromSubscriber.prototype._next = function (value) {
        if (this.toRespond.length === 0) {
            var args = [value].concat(this.values);
            if (this.project) {
                this._tryProject(args);
            }
            else {
                this.destination.next(args);
            }
        }
    };
    WithLatestFromSubscriber.prototype._tryProject = function (args) {
        var result;
        try {
            result = this.project.apply(this, args);
        }
        catch (err) {
            this.destination.error(err);
            return;
        }
        this.destination.next(result);
    };
    return WithLatestFromSubscriber;
}(_OuterSubscriber__WEBPACK_IMPORTED_MODULE_1__["OuterSubscriber"]));
//# sourceMappingURL=withLatestFrom.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/operators/zip.js":
/*!************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/operators/zip.js ***!
  \************************************************************/
/*! exports provided: zip */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "zip", function() { return zip; });
/* harmony import */ var _observable_zip__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../observable/zip */ "../node_modules/rxjs/_esm5/internal/observable/zip.js");
/** PURE_IMPORTS_START _observable_zip PURE_IMPORTS_END */

function zip() {
    var observables = [];
    for (var _i = 0; _i < arguments.length; _i++) {
        observables[_i] = arguments[_i];
    }
    return function zipOperatorFunction(source) {
        return source.lift.call(_observable_zip__WEBPACK_IMPORTED_MODULE_0__["zip"].apply(void 0, [source].concat(observables)));
    };
}
//# sourceMappingURL=zip.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/operators/zipAll.js":
/*!***************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/operators/zipAll.js ***!
  \***************************************************************/
/*! exports provided: zipAll */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "zipAll", function() { return zipAll; });
/* harmony import */ var _observable_zip__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../observable/zip */ "../node_modules/rxjs/_esm5/internal/observable/zip.js");
/** PURE_IMPORTS_START _observable_zip PURE_IMPORTS_END */

function zipAll(project) {
    return function (source) { return source.lift(new _observable_zip__WEBPACK_IMPORTED_MODULE_0__["ZipOperator"](project)); };
}
//# sourceMappingURL=zipAll.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/scheduled/scheduleArray.js":
/*!**********************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/scheduled/scheduleArray.js ***!
  \**********************************************************************/
/*! exports provided: scheduleArray */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "scheduleArray", function() { return scheduleArray; });
/* harmony import */ var _Observable__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Observable */ "../node_modules/rxjs/_esm5/internal/Observable.js");
/* harmony import */ var _Subscription__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Subscription */ "../node_modules/rxjs/_esm5/internal/Subscription.js");
/** PURE_IMPORTS_START _Observable,_Subscription PURE_IMPORTS_END */


function scheduleArray(input, scheduler) {
    return new _Observable__WEBPACK_IMPORTED_MODULE_0__["Observable"](function (subscriber) {
        var sub = new _Subscription__WEBPACK_IMPORTED_MODULE_1__["Subscription"]();
        var i = 0;
        sub.add(scheduler.schedule(function () {
            if (i === input.length) {
                subscriber.complete();
                return;
            }
            subscriber.next(input[i++]);
            if (!subscriber.closed) {
                sub.add(this.schedule());
            }
        }));
        return sub;
    });
}
//# sourceMappingURL=scheduleArray.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/scheduled/scheduleIterable.js":
/*!*************************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/scheduled/scheduleIterable.js ***!
  \*************************************************************************/
/*! exports provided: scheduleIterable */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "scheduleIterable", function() { return scheduleIterable; });
/* harmony import */ var _Observable__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Observable */ "../node_modules/rxjs/_esm5/internal/Observable.js");
/* harmony import */ var _Subscription__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Subscription */ "../node_modules/rxjs/_esm5/internal/Subscription.js");
/* harmony import */ var _symbol_iterator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../symbol/iterator */ "../node_modules/rxjs/_esm5/internal/symbol/iterator.js");
/** PURE_IMPORTS_START _Observable,_Subscription,_symbol_iterator PURE_IMPORTS_END */



function scheduleIterable(input, scheduler) {
    if (!input) {
        throw new Error('Iterable cannot be null');
    }
    return new _Observable__WEBPACK_IMPORTED_MODULE_0__["Observable"](function (subscriber) {
        var sub = new _Subscription__WEBPACK_IMPORTED_MODULE_1__["Subscription"]();
        var iterator;
        sub.add(function () {
            if (iterator && typeof iterator.return === 'function') {
                iterator.return();
            }
        });
        sub.add(scheduler.schedule(function () {
            iterator = input[_symbol_iterator__WEBPACK_IMPORTED_MODULE_2__["iterator"]]();
            sub.add(scheduler.schedule(function () {
                if (subscriber.closed) {
                    return;
                }
                var value;
                var done;
                try {
                    var result = iterator.next();
                    value = result.value;
                    done = result.done;
                }
                catch (err) {
                    subscriber.error(err);
                    return;
                }
                if (done) {
                    subscriber.complete();
                }
                else {
                    subscriber.next(value);
                    this.schedule();
                }
            }));
        }));
        return sub;
    });
}
//# sourceMappingURL=scheduleIterable.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/scheduled/scheduleObservable.js":
/*!***************************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/scheduled/scheduleObservable.js ***!
  \***************************************************************************/
/*! exports provided: scheduleObservable */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "scheduleObservable", function() { return scheduleObservable; });
/* harmony import */ var _Observable__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Observable */ "../node_modules/rxjs/_esm5/internal/Observable.js");
/* harmony import */ var _Subscription__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Subscription */ "../node_modules/rxjs/_esm5/internal/Subscription.js");
/* harmony import */ var _symbol_observable__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../symbol/observable */ "../node_modules/rxjs/_esm5/internal/symbol/observable.js");
/** PURE_IMPORTS_START _Observable,_Subscription,_symbol_observable PURE_IMPORTS_END */



function scheduleObservable(input, scheduler) {
    return new _Observable__WEBPACK_IMPORTED_MODULE_0__["Observable"](function (subscriber) {
        var sub = new _Subscription__WEBPACK_IMPORTED_MODULE_1__["Subscription"]();
        sub.add(scheduler.schedule(function () {
            var observable = input[_symbol_observable__WEBPACK_IMPORTED_MODULE_2__["observable"]]();
            sub.add(observable.subscribe({
                next: function (value) { sub.add(scheduler.schedule(function () { return subscriber.next(value); })); },
                error: function (err) { sub.add(scheduler.schedule(function () { return subscriber.error(err); })); },
                complete: function () { sub.add(scheduler.schedule(function () { return subscriber.complete(); })); },
            }));
        }));
        return sub;
    });
}
//# sourceMappingURL=scheduleObservable.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/scheduled/schedulePromise.js":
/*!************************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/scheduled/schedulePromise.js ***!
  \************************************************************************/
/*! exports provided: schedulePromise */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "schedulePromise", function() { return schedulePromise; });
/* harmony import */ var _Observable__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Observable */ "../node_modules/rxjs/_esm5/internal/Observable.js");
/* harmony import */ var _Subscription__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Subscription */ "../node_modules/rxjs/_esm5/internal/Subscription.js");
/** PURE_IMPORTS_START _Observable,_Subscription PURE_IMPORTS_END */


function schedulePromise(input, scheduler) {
    return new _Observable__WEBPACK_IMPORTED_MODULE_0__["Observable"](function (subscriber) {
        var sub = new _Subscription__WEBPACK_IMPORTED_MODULE_1__["Subscription"]();
        sub.add(scheduler.schedule(function () {
            return input.then(function (value) {
                sub.add(scheduler.schedule(function () {
                    subscriber.next(value);
                    sub.add(scheduler.schedule(function () { return subscriber.complete(); }));
                }));
            }, function (err) {
                sub.add(scheduler.schedule(function () { return subscriber.error(err); }));
            });
        }));
        return sub;
    });
}
//# sourceMappingURL=schedulePromise.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/scheduled/scheduled.js":
/*!******************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/scheduled/scheduled.js ***!
  \******************************************************************/
/*! exports provided: scheduled */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "scheduled", function() { return scheduled; });
/* harmony import */ var _scheduleObservable__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./scheduleObservable */ "../node_modules/rxjs/_esm5/internal/scheduled/scheduleObservable.js");
/* harmony import */ var _schedulePromise__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./schedulePromise */ "../node_modules/rxjs/_esm5/internal/scheduled/schedulePromise.js");
/* harmony import */ var _scheduleArray__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./scheduleArray */ "../node_modules/rxjs/_esm5/internal/scheduled/scheduleArray.js");
/* harmony import */ var _scheduleIterable__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./scheduleIterable */ "../node_modules/rxjs/_esm5/internal/scheduled/scheduleIterable.js");
/* harmony import */ var _util_isInteropObservable__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../util/isInteropObservable */ "../node_modules/rxjs/_esm5/internal/util/isInteropObservable.js");
/* harmony import */ var _util_isPromise__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../util/isPromise */ "../node_modules/rxjs/_esm5/internal/util/isPromise.js");
/* harmony import */ var _util_isArrayLike__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../util/isArrayLike */ "../node_modules/rxjs/_esm5/internal/util/isArrayLike.js");
/* harmony import */ var _util_isIterable__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../util/isIterable */ "../node_modules/rxjs/_esm5/internal/util/isIterable.js");
/** PURE_IMPORTS_START _scheduleObservable,_schedulePromise,_scheduleArray,_scheduleIterable,_util_isInteropObservable,_util_isPromise,_util_isArrayLike,_util_isIterable PURE_IMPORTS_END */








function scheduled(input, scheduler) {
    if (input != null) {
        if (Object(_util_isInteropObservable__WEBPACK_IMPORTED_MODULE_4__["isInteropObservable"])(input)) {
            return Object(_scheduleObservable__WEBPACK_IMPORTED_MODULE_0__["scheduleObservable"])(input, scheduler);
        }
        else if (Object(_util_isPromise__WEBPACK_IMPORTED_MODULE_5__["isPromise"])(input)) {
            return Object(_schedulePromise__WEBPACK_IMPORTED_MODULE_1__["schedulePromise"])(input, scheduler);
        }
        else if (Object(_util_isArrayLike__WEBPACK_IMPORTED_MODULE_6__["isArrayLike"])(input)) {
            return Object(_scheduleArray__WEBPACK_IMPORTED_MODULE_2__["scheduleArray"])(input, scheduler);
        }
        else if (Object(_util_isIterable__WEBPACK_IMPORTED_MODULE_7__["isIterable"])(input) || typeof input === 'string') {
            return Object(_scheduleIterable__WEBPACK_IMPORTED_MODULE_3__["scheduleIterable"])(input, scheduler);
        }
    }
    throw new TypeError((input !== null && typeof input || input) + ' is not observable');
}
//# sourceMappingURL=scheduled.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/scheduler/Action.js":
/*!***************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/scheduler/Action.js ***!
  \***************************************************************/
/*! exports provided: Action */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Action", function() { return Action; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
/* harmony import */ var _Subscription__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Subscription */ "../node_modules/rxjs/_esm5/internal/Subscription.js");
/** PURE_IMPORTS_START tslib,_Subscription PURE_IMPORTS_END */


var Action = /*@__PURE__*/ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](Action, _super);
    function Action(scheduler, work) {
        return _super.call(this) || this;
    }
    Action.prototype.schedule = function (state, delay) {
        if (delay === void 0) {
            delay = 0;
        }
        return this;
    };
    return Action;
}(_Subscription__WEBPACK_IMPORTED_MODULE_1__["Subscription"]));

//# sourceMappingURL=Action.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/scheduler/AsapAction.js":
/*!*******************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/scheduler/AsapAction.js ***!
  \*******************************************************************/
/*! exports provided: AsapAction */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AsapAction", function() { return AsapAction; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
/* harmony import */ var _util_Immediate__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../util/Immediate */ "../node_modules/rxjs/_esm5/internal/util/Immediate.js");
/* harmony import */ var _AsyncAction__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./AsyncAction */ "../node_modules/rxjs/_esm5/internal/scheduler/AsyncAction.js");
/** PURE_IMPORTS_START tslib,_util_Immediate,_AsyncAction PURE_IMPORTS_END */



var AsapAction = /*@__PURE__*/ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](AsapAction, _super);
    function AsapAction(scheduler, work) {
        var _this = _super.call(this, scheduler, work) || this;
        _this.scheduler = scheduler;
        _this.work = work;
        return _this;
    }
    AsapAction.prototype.requestAsyncId = function (scheduler, id, delay) {
        if (delay === void 0) {
            delay = 0;
        }
        if (delay !== null && delay > 0) {
            return _super.prototype.requestAsyncId.call(this, scheduler, id, delay);
        }
        scheduler.actions.push(this);
        return scheduler.scheduled || (scheduler.scheduled = _util_Immediate__WEBPACK_IMPORTED_MODULE_1__["Immediate"].setImmediate(scheduler.flush.bind(scheduler, null)));
    };
    AsapAction.prototype.recycleAsyncId = function (scheduler, id, delay) {
        if (delay === void 0) {
            delay = 0;
        }
        if ((delay !== null && delay > 0) || (delay === null && this.delay > 0)) {
            return _super.prototype.recycleAsyncId.call(this, scheduler, id, delay);
        }
        if (scheduler.actions.length === 0) {
            _util_Immediate__WEBPACK_IMPORTED_MODULE_1__["Immediate"].clearImmediate(id);
            scheduler.scheduled = undefined;
        }
        return undefined;
    };
    return AsapAction;
}(_AsyncAction__WEBPACK_IMPORTED_MODULE_2__["AsyncAction"]));

//# sourceMappingURL=AsapAction.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/scheduler/AsapScheduler.js":
/*!**********************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/scheduler/AsapScheduler.js ***!
  \**********************************************************************/
/*! exports provided: AsapScheduler */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AsapScheduler", function() { return AsapScheduler; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
/* harmony import */ var _AsyncScheduler__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./AsyncScheduler */ "../node_modules/rxjs/_esm5/internal/scheduler/AsyncScheduler.js");
/** PURE_IMPORTS_START tslib,_AsyncScheduler PURE_IMPORTS_END */


var AsapScheduler = /*@__PURE__*/ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](AsapScheduler, _super);
    function AsapScheduler() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    AsapScheduler.prototype.flush = function (action) {
        this.active = true;
        this.scheduled = undefined;
        var actions = this.actions;
        var error;
        var index = -1;
        var count = actions.length;
        action = action || actions.shift();
        do {
            if (error = action.execute(action.state, action.delay)) {
                break;
            }
        } while (++index < count && (action = actions.shift()));
        this.active = false;
        if (error) {
            while (++index < count && (action = actions.shift())) {
                action.unsubscribe();
            }
            throw error;
        }
    };
    return AsapScheduler;
}(_AsyncScheduler__WEBPACK_IMPORTED_MODULE_1__["AsyncScheduler"]));

//# sourceMappingURL=AsapScheduler.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/scheduler/AsyncAction.js":
/*!********************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/scheduler/AsyncAction.js ***!
  \********************************************************************/
/*! exports provided: AsyncAction */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AsyncAction", function() { return AsyncAction; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
/* harmony import */ var _Action__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Action */ "../node_modules/rxjs/_esm5/internal/scheduler/Action.js");
/** PURE_IMPORTS_START tslib,_Action PURE_IMPORTS_END */


var AsyncAction = /*@__PURE__*/ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](AsyncAction, _super);
    function AsyncAction(scheduler, work) {
        var _this = _super.call(this, scheduler, work) || this;
        _this.scheduler = scheduler;
        _this.work = work;
        _this.pending = false;
        return _this;
    }
    AsyncAction.prototype.schedule = function (state, delay) {
        if (delay === void 0) {
            delay = 0;
        }
        if (this.closed) {
            return this;
        }
        this.state = state;
        var id = this.id;
        var scheduler = this.scheduler;
        if (id != null) {
            this.id = this.recycleAsyncId(scheduler, id, delay);
        }
        this.pending = true;
        this.delay = delay;
        this.id = this.id || this.requestAsyncId(scheduler, this.id, delay);
        return this;
    };
    AsyncAction.prototype.requestAsyncId = function (scheduler, id, delay) {
        if (delay === void 0) {
            delay = 0;
        }
        return setInterval(scheduler.flush.bind(scheduler, this), delay);
    };
    AsyncAction.prototype.recycleAsyncId = function (scheduler, id, delay) {
        if (delay === void 0) {
            delay = 0;
        }
        if (delay !== null && this.delay === delay && this.pending === false) {
            return id;
        }
        clearInterval(id);
        return undefined;
    };
    AsyncAction.prototype.execute = function (state, delay) {
        if (this.closed) {
            return new Error('executing a cancelled action');
        }
        this.pending = false;
        var error = this._execute(state, delay);
        if (error) {
            return error;
        }
        else if (this.pending === false && this.id != null) {
            this.id = this.recycleAsyncId(this.scheduler, this.id, null);
        }
    };
    AsyncAction.prototype._execute = function (state, delay) {
        var errored = false;
        var errorValue = undefined;
        try {
            this.work(state);
        }
        catch (e) {
            errored = true;
            errorValue = !!e && e || new Error(e);
        }
        if (errored) {
            this.unsubscribe();
            return errorValue;
        }
    };
    AsyncAction.prototype._unsubscribe = function () {
        var id = this.id;
        var scheduler = this.scheduler;
        var actions = scheduler.actions;
        var index = actions.indexOf(this);
        this.work = null;
        this.state = null;
        this.pending = false;
        this.scheduler = null;
        if (index !== -1) {
            actions.splice(index, 1);
        }
        if (id != null) {
            this.id = this.recycleAsyncId(scheduler, id, null);
        }
        this.delay = null;
    };
    return AsyncAction;
}(_Action__WEBPACK_IMPORTED_MODULE_1__["Action"]));

//# sourceMappingURL=AsyncAction.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/scheduler/AsyncScheduler.js":
/*!***********************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/scheduler/AsyncScheduler.js ***!
  \***********************************************************************/
/*! exports provided: AsyncScheduler */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AsyncScheduler", function() { return AsyncScheduler; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
/* harmony import */ var _Scheduler__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Scheduler */ "../node_modules/rxjs/_esm5/internal/Scheduler.js");
/** PURE_IMPORTS_START tslib,_Scheduler PURE_IMPORTS_END */


var AsyncScheduler = /*@__PURE__*/ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](AsyncScheduler, _super);
    function AsyncScheduler(SchedulerAction, now) {
        if (now === void 0) {
            now = _Scheduler__WEBPACK_IMPORTED_MODULE_1__["Scheduler"].now;
        }
        var _this = _super.call(this, SchedulerAction, function () {
            if (AsyncScheduler.delegate && AsyncScheduler.delegate !== _this) {
                return AsyncScheduler.delegate.now();
            }
            else {
                return now();
            }
        }) || this;
        _this.actions = [];
        _this.active = false;
        _this.scheduled = undefined;
        return _this;
    }
    AsyncScheduler.prototype.schedule = function (work, delay, state) {
        if (delay === void 0) {
            delay = 0;
        }
        if (AsyncScheduler.delegate && AsyncScheduler.delegate !== this) {
            return AsyncScheduler.delegate.schedule(work, delay, state);
        }
        else {
            return _super.prototype.schedule.call(this, work, delay, state);
        }
    };
    AsyncScheduler.prototype.flush = function (action) {
        var actions = this.actions;
        if (this.active) {
            actions.push(action);
            return;
        }
        var error;
        this.active = true;
        do {
            if (error = action.execute(action.state, action.delay)) {
                break;
            }
        } while (action = actions.shift());
        this.active = false;
        if (error) {
            while (action = actions.shift()) {
                action.unsubscribe();
            }
            throw error;
        }
    };
    return AsyncScheduler;
}(_Scheduler__WEBPACK_IMPORTED_MODULE_1__["Scheduler"]));

//# sourceMappingURL=AsyncScheduler.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/scheduler/QueueAction.js":
/*!********************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/scheduler/QueueAction.js ***!
  \********************************************************************/
/*! exports provided: QueueAction */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "QueueAction", function() { return QueueAction; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
/* harmony import */ var _AsyncAction__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./AsyncAction */ "../node_modules/rxjs/_esm5/internal/scheduler/AsyncAction.js");
/** PURE_IMPORTS_START tslib,_AsyncAction PURE_IMPORTS_END */


var QueueAction = /*@__PURE__*/ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](QueueAction, _super);
    function QueueAction(scheduler, work) {
        var _this = _super.call(this, scheduler, work) || this;
        _this.scheduler = scheduler;
        _this.work = work;
        return _this;
    }
    QueueAction.prototype.schedule = function (state, delay) {
        if (delay === void 0) {
            delay = 0;
        }
        if (delay > 0) {
            return _super.prototype.schedule.call(this, state, delay);
        }
        this.delay = delay;
        this.state = state;
        this.scheduler.flush(this);
        return this;
    };
    QueueAction.prototype.execute = function (state, delay) {
        return (delay > 0 || this.closed) ?
            _super.prototype.execute.call(this, state, delay) :
            this._execute(state, delay);
    };
    QueueAction.prototype.requestAsyncId = function (scheduler, id, delay) {
        if (delay === void 0) {
            delay = 0;
        }
        if ((delay !== null && delay > 0) || (delay === null && this.delay > 0)) {
            return _super.prototype.requestAsyncId.call(this, scheduler, id, delay);
        }
        return scheduler.flush(this);
    };
    return QueueAction;
}(_AsyncAction__WEBPACK_IMPORTED_MODULE_1__["AsyncAction"]));

//# sourceMappingURL=QueueAction.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/scheduler/QueueScheduler.js":
/*!***********************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/scheduler/QueueScheduler.js ***!
  \***********************************************************************/
/*! exports provided: QueueScheduler */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "QueueScheduler", function() { return QueueScheduler; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
/* harmony import */ var _AsyncScheduler__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./AsyncScheduler */ "../node_modules/rxjs/_esm5/internal/scheduler/AsyncScheduler.js");
/** PURE_IMPORTS_START tslib,_AsyncScheduler PURE_IMPORTS_END */


var QueueScheduler = /*@__PURE__*/ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](QueueScheduler, _super);
    function QueueScheduler() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    return QueueScheduler;
}(_AsyncScheduler__WEBPACK_IMPORTED_MODULE_1__["AsyncScheduler"]));

//# sourceMappingURL=QueueScheduler.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/scheduler/asap.js":
/*!*************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/scheduler/asap.js ***!
  \*************************************************************/
/*! exports provided: asapScheduler, asap */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "asapScheduler", function() { return asapScheduler; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "asap", function() { return asap; });
/* harmony import */ var _AsapAction__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./AsapAction */ "../node_modules/rxjs/_esm5/internal/scheduler/AsapAction.js");
/* harmony import */ var _AsapScheduler__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./AsapScheduler */ "../node_modules/rxjs/_esm5/internal/scheduler/AsapScheduler.js");
/** PURE_IMPORTS_START _AsapAction,_AsapScheduler PURE_IMPORTS_END */


var asapScheduler = /*@__PURE__*/ new _AsapScheduler__WEBPACK_IMPORTED_MODULE_1__["AsapScheduler"](_AsapAction__WEBPACK_IMPORTED_MODULE_0__["AsapAction"]);
var asap = asapScheduler;
//# sourceMappingURL=asap.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/scheduler/async.js":
/*!**************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/scheduler/async.js ***!
  \**************************************************************/
/*! exports provided: asyncScheduler, async */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "asyncScheduler", function() { return asyncScheduler; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "async", function() { return async; });
/* harmony import */ var _AsyncAction__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./AsyncAction */ "../node_modules/rxjs/_esm5/internal/scheduler/AsyncAction.js");
/* harmony import */ var _AsyncScheduler__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./AsyncScheduler */ "../node_modules/rxjs/_esm5/internal/scheduler/AsyncScheduler.js");
/** PURE_IMPORTS_START _AsyncAction,_AsyncScheduler PURE_IMPORTS_END */


var asyncScheduler = /*@__PURE__*/ new _AsyncScheduler__WEBPACK_IMPORTED_MODULE_1__["AsyncScheduler"](_AsyncAction__WEBPACK_IMPORTED_MODULE_0__["AsyncAction"]);
var async = asyncScheduler;
//# sourceMappingURL=async.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/scheduler/queue.js":
/*!**************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/scheduler/queue.js ***!
  \**************************************************************/
/*! exports provided: queueScheduler, queue */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "queueScheduler", function() { return queueScheduler; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "queue", function() { return queue; });
/* harmony import */ var _QueueAction__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./QueueAction */ "../node_modules/rxjs/_esm5/internal/scheduler/QueueAction.js");
/* harmony import */ var _QueueScheduler__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./QueueScheduler */ "../node_modules/rxjs/_esm5/internal/scheduler/QueueScheduler.js");
/** PURE_IMPORTS_START _QueueAction,_QueueScheduler PURE_IMPORTS_END */


var queueScheduler = /*@__PURE__*/ new _QueueScheduler__WEBPACK_IMPORTED_MODULE_1__["QueueScheduler"](_QueueAction__WEBPACK_IMPORTED_MODULE_0__["QueueAction"]);
var queue = queueScheduler;
//# sourceMappingURL=queue.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/symbol/iterator.js":
/*!**************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/symbol/iterator.js ***!
  \**************************************************************/
/*! exports provided: getSymbolIterator, iterator, $$iterator */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getSymbolIterator", function() { return getSymbolIterator; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "iterator", function() { return iterator; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "$$iterator", function() { return $$iterator; });
/** PURE_IMPORTS_START  PURE_IMPORTS_END */
function getSymbolIterator() {
    if (typeof Symbol !== 'function' || !Symbol.iterator) {
        return '@@iterator';
    }
    return Symbol.iterator;
}
var iterator = /*@__PURE__*/ getSymbolIterator();
var $$iterator = iterator;
//# sourceMappingURL=iterator.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/symbol/observable.js":
/*!****************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/symbol/observable.js ***!
  \****************************************************************/
/*! exports provided: observable */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "observable", function() { return observable; });
/** PURE_IMPORTS_START  PURE_IMPORTS_END */
var observable = /*@__PURE__*/ (function () { return typeof Symbol === 'function' && Symbol.observable || '@@observable'; })();
//# sourceMappingURL=observable.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/symbol/rxSubscriber.js":
/*!******************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/symbol/rxSubscriber.js ***!
  \******************************************************************/
/*! exports provided: rxSubscriber, $$rxSubscriber */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "rxSubscriber", function() { return rxSubscriber; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "$$rxSubscriber", function() { return $$rxSubscriber; });
/** PURE_IMPORTS_START  PURE_IMPORTS_END */
var rxSubscriber = /*@__PURE__*/ (function () {
    return typeof Symbol === 'function'
        ? /*@__PURE__*/ Symbol('rxSubscriber')
        : '@@rxSubscriber_' + /*@__PURE__*/ Math.random();
})();
var $$rxSubscriber = rxSubscriber;
//# sourceMappingURL=rxSubscriber.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/util/ArgumentOutOfRangeError.js":
/*!***************************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/util/ArgumentOutOfRangeError.js ***!
  \***************************************************************************/
/*! exports provided: ArgumentOutOfRangeError */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ArgumentOutOfRangeError", function() { return ArgumentOutOfRangeError; });
/** PURE_IMPORTS_START  PURE_IMPORTS_END */
var ArgumentOutOfRangeErrorImpl = /*@__PURE__*/ (function () {
    function ArgumentOutOfRangeErrorImpl() {
        Error.call(this);
        this.message = 'argument out of range';
        this.name = 'ArgumentOutOfRangeError';
        return this;
    }
    ArgumentOutOfRangeErrorImpl.prototype = /*@__PURE__*/ Object.create(Error.prototype);
    return ArgumentOutOfRangeErrorImpl;
})();
var ArgumentOutOfRangeError = ArgumentOutOfRangeErrorImpl;
//# sourceMappingURL=ArgumentOutOfRangeError.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/util/EmptyError.js":
/*!**************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/util/EmptyError.js ***!
  \**************************************************************/
/*! exports provided: EmptyError */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EmptyError", function() { return EmptyError; });
/** PURE_IMPORTS_START  PURE_IMPORTS_END */
var EmptyErrorImpl = /*@__PURE__*/ (function () {
    function EmptyErrorImpl() {
        Error.call(this);
        this.message = 'no elements in sequence';
        this.name = 'EmptyError';
        return this;
    }
    EmptyErrorImpl.prototype = /*@__PURE__*/ Object.create(Error.prototype);
    return EmptyErrorImpl;
})();
var EmptyError = EmptyErrorImpl;
//# sourceMappingURL=EmptyError.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/util/Immediate.js":
/*!*************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/util/Immediate.js ***!
  \*************************************************************/
/*! exports provided: Immediate, TestTools */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Immediate", function() { return Immediate; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TestTools", function() { return TestTools; });
/** PURE_IMPORTS_START  PURE_IMPORTS_END */
var nextHandle = 1;
var RESOLVED = /*@__PURE__*/ (function () { return /*@__PURE__*/ Promise.resolve(); })();
var activeHandles = {};
function findAndClearHandle(handle) {
    if (handle in activeHandles) {
        delete activeHandles[handle];
        return true;
    }
    return false;
}
var Immediate = {
    setImmediate: function (cb) {
        var handle = nextHandle++;
        activeHandles[handle] = true;
        RESOLVED.then(function () { return findAndClearHandle(handle) && cb(); });
        return handle;
    },
    clearImmediate: function (handle) {
        findAndClearHandle(handle);
    },
};
var TestTools = {
    pending: function () {
        return Object.keys(activeHandles).length;
    }
};
//# sourceMappingURL=Immediate.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/util/ObjectUnsubscribedError.js":
/*!***************************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/util/ObjectUnsubscribedError.js ***!
  \***************************************************************************/
/*! exports provided: ObjectUnsubscribedError */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ObjectUnsubscribedError", function() { return ObjectUnsubscribedError; });
/** PURE_IMPORTS_START  PURE_IMPORTS_END */
var ObjectUnsubscribedErrorImpl = /*@__PURE__*/ (function () {
    function ObjectUnsubscribedErrorImpl() {
        Error.call(this);
        this.message = 'object unsubscribed';
        this.name = 'ObjectUnsubscribedError';
        return this;
    }
    ObjectUnsubscribedErrorImpl.prototype = /*@__PURE__*/ Object.create(Error.prototype);
    return ObjectUnsubscribedErrorImpl;
})();
var ObjectUnsubscribedError = ObjectUnsubscribedErrorImpl;
//# sourceMappingURL=ObjectUnsubscribedError.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/util/TimeoutError.js":
/*!****************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/util/TimeoutError.js ***!
  \****************************************************************/
/*! exports provided: TimeoutError */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TimeoutError", function() { return TimeoutError; });
/** PURE_IMPORTS_START  PURE_IMPORTS_END */
var TimeoutErrorImpl = /*@__PURE__*/ (function () {
    function TimeoutErrorImpl() {
        Error.call(this);
        this.message = 'Timeout has occurred';
        this.name = 'TimeoutError';
        return this;
    }
    TimeoutErrorImpl.prototype = /*@__PURE__*/ Object.create(Error.prototype);
    return TimeoutErrorImpl;
})();
var TimeoutError = TimeoutErrorImpl;
//# sourceMappingURL=TimeoutError.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/util/UnsubscriptionError.js":
/*!***********************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/util/UnsubscriptionError.js ***!
  \***********************************************************************/
/*! exports provided: UnsubscriptionError */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "UnsubscriptionError", function() { return UnsubscriptionError; });
/** PURE_IMPORTS_START  PURE_IMPORTS_END */
var UnsubscriptionErrorImpl = /*@__PURE__*/ (function () {
    function UnsubscriptionErrorImpl(errors) {
        Error.call(this);
        this.message = errors ?
            errors.length + " errors occurred during unsubscription:\n" + errors.map(function (err, i) { return i + 1 + ") " + err.toString(); }).join('\n  ') : '';
        this.name = 'UnsubscriptionError';
        this.errors = errors;
        return this;
    }
    UnsubscriptionErrorImpl.prototype = /*@__PURE__*/ Object.create(Error.prototype);
    return UnsubscriptionErrorImpl;
})();
var UnsubscriptionError = UnsubscriptionErrorImpl;
//# sourceMappingURL=UnsubscriptionError.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/util/canReportError.js":
/*!******************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/util/canReportError.js ***!
  \******************************************************************/
/*! exports provided: canReportError */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "canReportError", function() { return canReportError; });
/* harmony import */ var _Subscriber__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Subscriber */ "../node_modules/rxjs/_esm5/internal/Subscriber.js");
/** PURE_IMPORTS_START _Subscriber PURE_IMPORTS_END */

function canReportError(observer) {
    while (observer) {
        var _a = observer, closed_1 = _a.closed, destination = _a.destination, isStopped = _a.isStopped;
        if (closed_1 || isStopped) {
            return false;
        }
        else if (destination && destination instanceof _Subscriber__WEBPACK_IMPORTED_MODULE_0__["Subscriber"]) {
            observer = destination;
        }
        else {
            observer = null;
        }
    }
    return true;
}
//# sourceMappingURL=canReportError.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/util/hostReportError.js":
/*!*******************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/util/hostReportError.js ***!
  \*******************************************************************/
/*! exports provided: hostReportError */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "hostReportError", function() { return hostReportError; });
/** PURE_IMPORTS_START  PURE_IMPORTS_END */
function hostReportError(err) {
    setTimeout(function () { throw err; }, 0);
}
//# sourceMappingURL=hostReportError.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/util/identity.js":
/*!************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/util/identity.js ***!
  \************************************************************/
/*! exports provided: identity */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "identity", function() { return identity; });
/** PURE_IMPORTS_START  PURE_IMPORTS_END */
function identity(x) {
    return x;
}
//# sourceMappingURL=identity.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/util/isArray.js":
/*!***********************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/util/isArray.js ***!
  \***********************************************************/
/*! exports provided: isArray */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isArray", function() { return isArray; });
/** PURE_IMPORTS_START  PURE_IMPORTS_END */
var isArray = /*@__PURE__*/ (function () { return Array.isArray || (function (x) { return x && typeof x.length === 'number'; }); })();
//# sourceMappingURL=isArray.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/util/isArrayLike.js":
/*!***************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/util/isArrayLike.js ***!
  \***************************************************************/
/*! exports provided: isArrayLike */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isArrayLike", function() { return isArrayLike; });
/** PURE_IMPORTS_START  PURE_IMPORTS_END */
var isArrayLike = (function (x) { return x && typeof x.length === 'number' && typeof x !== 'function'; });
//# sourceMappingURL=isArrayLike.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/util/isDate.js":
/*!**********************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/util/isDate.js ***!
  \**********************************************************/
/*! exports provided: isDate */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isDate", function() { return isDate; });
/** PURE_IMPORTS_START  PURE_IMPORTS_END */
function isDate(value) {
    return value instanceof Date && !isNaN(+value);
}
//# sourceMappingURL=isDate.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/util/isFunction.js":
/*!**************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/util/isFunction.js ***!
  \**************************************************************/
/*! exports provided: isFunction */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isFunction", function() { return isFunction; });
/** PURE_IMPORTS_START  PURE_IMPORTS_END */
function isFunction(x) {
    return typeof x === 'function';
}
//# sourceMappingURL=isFunction.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/util/isInteropObservable.js":
/*!***********************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/util/isInteropObservable.js ***!
  \***********************************************************************/
/*! exports provided: isInteropObservable */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isInteropObservable", function() { return isInteropObservable; });
/* harmony import */ var _symbol_observable__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../symbol/observable */ "../node_modules/rxjs/_esm5/internal/symbol/observable.js");
/** PURE_IMPORTS_START _symbol_observable PURE_IMPORTS_END */

function isInteropObservable(input) {
    return input && typeof input[_symbol_observable__WEBPACK_IMPORTED_MODULE_0__["observable"]] === 'function';
}
//# sourceMappingURL=isInteropObservable.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/util/isIterable.js":
/*!**************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/util/isIterable.js ***!
  \**************************************************************/
/*! exports provided: isIterable */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isIterable", function() { return isIterable; });
/* harmony import */ var _symbol_iterator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../symbol/iterator */ "../node_modules/rxjs/_esm5/internal/symbol/iterator.js");
/** PURE_IMPORTS_START _symbol_iterator PURE_IMPORTS_END */

function isIterable(input) {
    return input && typeof input[_symbol_iterator__WEBPACK_IMPORTED_MODULE_0__["iterator"]] === 'function';
}
//# sourceMappingURL=isIterable.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/util/isNumeric.js":
/*!*************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/util/isNumeric.js ***!
  \*************************************************************/
/*! exports provided: isNumeric */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isNumeric", function() { return isNumeric; });
/* harmony import */ var _isArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./isArray */ "../node_modules/rxjs/_esm5/internal/util/isArray.js");
/** PURE_IMPORTS_START _isArray PURE_IMPORTS_END */

function isNumeric(val) {
    return !Object(_isArray__WEBPACK_IMPORTED_MODULE_0__["isArray"])(val) && (val - parseFloat(val) + 1) >= 0;
}
//# sourceMappingURL=isNumeric.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/util/isObject.js":
/*!************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/util/isObject.js ***!
  \************************************************************/
/*! exports provided: isObject */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isObject", function() { return isObject; });
/** PURE_IMPORTS_START  PURE_IMPORTS_END */
function isObject(x) {
    return x !== null && typeof x === 'object';
}
//# sourceMappingURL=isObject.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/util/isPromise.js":
/*!*************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/util/isPromise.js ***!
  \*************************************************************/
/*! exports provided: isPromise */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isPromise", function() { return isPromise; });
/** PURE_IMPORTS_START  PURE_IMPORTS_END */
function isPromise(value) {
    return !!value && typeof value.subscribe !== 'function' && typeof value.then === 'function';
}
//# sourceMappingURL=isPromise.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/util/isScheduler.js":
/*!***************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/util/isScheduler.js ***!
  \***************************************************************/
/*! exports provided: isScheduler */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isScheduler", function() { return isScheduler; });
/** PURE_IMPORTS_START  PURE_IMPORTS_END */
function isScheduler(value) {
    return value && typeof value.schedule === 'function';
}
//# sourceMappingURL=isScheduler.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/util/noop.js":
/*!********************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/util/noop.js ***!
  \********************************************************/
/*! exports provided: noop */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "noop", function() { return noop; });
/** PURE_IMPORTS_START  PURE_IMPORTS_END */
function noop() { }
//# sourceMappingURL=noop.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/util/not.js":
/*!*******************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/util/not.js ***!
  \*******************************************************/
/*! exports provided: not */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "not", function() { return not; });
/** PURE_IMPORTS_START  PURE_IMPORTS_END */
function not(pred, thisArg) {
    function notPred() {
        return !(notPred.pred.apply(notPred.thisArg, arguments));
    }
    notPred.pred = pred;
    notPred.thisArg = thisArg;
    return notPred;
}
//# sourceMappingURL=not.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/util/pipe.js":
/*!********************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/util/pipe.js ***!
  \********************************************************/
/*! exports provided: pipe, pipeFromArray */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "pipe", function() { return pipe; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "pipeFromArray", function() { return pipeFromArray; });
/* harmony import */ var _identity__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./identity */ "../node_modules/rxjs/_esm5/internal/util/identity.js");
/** PURE_IMPORTS_START _identity PURE_IMPORTS_END */

function pipe() {
    var fns = [];
    for (var _i = 0; _i < arguments.length; _i++) {
        fns[_i] = arguments[_i];
    }
    return pipeFromArray(fns);
}
function pipeFromArray(fns) {
    if (fns.length === 0) {
        return _identity__WEBPACK_IMPORTED_MODULE_0__["identity"];
    }
    if (fns.length === 1) {
        return fns[0];
    }
    return function piped(input) {
        return fns.reduce(function (prev, fn) { return fn(prev); }, input);
    };
}
//# sourceMappingURL=pipe.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/util/subscribeTo.js":
/*!***************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/util/subscribeTo.js ***!
  \***************************************************************/
/*! exports provided: subscribeTo */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "subscribeTo", function() { return subscribeTo; });
/* harmony import */ var _subscribeToArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./subscribeToArray */ "../node_modules/rxjs/_esm5/internal/util/subscribeToArray.js");
/* harmony import */ var _subscribeToPromise__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./subscribeToPromise */ "../node_modules/rxjs/_esm5/internal/util/subscribeToPromise.js");
/* harmony import */ var _subscribeToIterable__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./subscribeToIterable */ "../node_modules/rxjs/_esm5/internal/util/subscribeToIterable.js");
/* harmony import */ var _subscribeToObservable__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./subscribeToObservable */ "../node_modules/rxjs/_esm5/internal/util/subscribeToObservable.js");
/* harmony import */ var _isArrayLike__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./isArrayLike */ "../node_modules/rxjs/_esm5/internal/util/isArrayLike.js");
/* harmony import */ var _isPromise__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./isPromise */ "../node_modules/rxjs/_esm5/internal/util/isPromise.js");
/* harmony import */ var _isObject__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./isObject */ "../node_modules/rxjs/_esm5/internal/util/isObject.js");
/* harmony import */ var _symbol_iterator__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../symbol/iterator */ "../node_modules/rxjs/_esm5/internal/symbol/iterator.js");
/* harmony import */ var _symbol_observable__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../symbol/observable */ "../node_modules/rxjs/_esm5/internal/symbol/observable.js");
/** PURE_IMPORTS_START _subscribeToArray,_subscribeToPromise,_subscribeToIterable,_subscribeToObservable,_isArrayLike,_isPromise,_isObject,_symbol_iterator,_symbol_observable PURE_IMPORTS_END */









var subscribeTo = function (result) {
    if (!!result && typeof result[_symbol_observable__WEBPACK_IMPORTED_MODULE_8__["observable"]] === 'function') {
        return Object(_subscribeToObservable__WEBPACK_IMPORTED_MODULE_3__["subscribeToObservable"])(result);
    }
    else if (Object(_isArrayLike__WEBPACK_IMPORTED_MODULE_4__["isArrayLike"])(result)) {
        return Object(_subscribeToArray__WEBPACK_IMPORTED_MODULE_0__["subscribeToArray"])(result);
    }
    else if (Object(_isPromise__WEBPACK_IMPORTED_MODULE_5__["isPromise"])(result)) {
        return Object(_subscribeToPromise__WEBPACK_IMPORTED_MODULE_1__["subscribeToPromise"])(result);
    }
    else if (!!result && typeof result[_symbol_iterator__WEBPACK_IMPORTED_MODULE_7__["iterator"]] === 'function') {
        return Object(_subscribeToIterable__WEBPACK_IMPORTED_MODULE_2__["subscribeToIterable"])(result);
    }
    else {
        var value = Object(_isObject__WEBPACK_IMPORTED_MODULE_6__["isObject"])(result) ? 'an invalid object' : "'" + result + "'";
        var msg = "You provided " + value + " where a stream was expected."
            + ' You can provide an Observable, Promise, Array, or Iterable.';
        throw new TypeError(msg);
    }
};
//# sourceMappingURL=subscribeTo.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/util/subscribeToArray.js":
/*!********************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/util/subscribeToArray.js ***!
  \********************************************************************/
/*! exports provided: subscribeToArray */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "subscribeToArray", function() { return subscribeToArray; });
/** PURE_IMPORTS_START  PURE_IMPORTS_END */
var subscribeToArray = function (array) {
    return function (subscriber) {
        for (var i = 0, len = array.length; i < len && !subscriber.closed; i++) {
            subscriber.next(array[i]);
        }
        subscriber.complete();
    };
};
//# sourceMappingURL=subscribeToArray.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/util/subscribeToIterable.js":
/*!***********************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/util/subscribeToIterable.js ***!
  \***********************************************************************/
/*! exports provided: subscribeToIterable */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "subscribeToIterable", function() { return subscribeToIterable; });
/* harmony import */ var _symbol_iterator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../symbol/iterator */ "../node_modules/rxjs/_esm5/internal/symbol/iterator.js");
/** PURE_IMPORTS_START _symbol_iterator PURE_IMPORTS_END */

var subscribeToIterable = function (iterable) {
    return function (subscriber) {
        var iterator = iterable[_symbol_iterator__WEBPACK_IMPORTED_MODULE_0__["iterator"]]();
        do {
            var item = void 0;
            try {
                item = iterator.next();
            }
            catch (err) {
                subscriber.error(err);
                return subscriber;
            }
            if (item.done) {
                subscriber.complete();
                break;
            }
            subscriber.next(item.value);
            if (subscriber.closed) {
                break;
            }
        } while (true);
        if (typeof iterator.return === 'function') {
            subscriber.add(function () {
                if (iterator.return) {
                    iterator.return();
                }
            });
        }
        return subscriber;
    };
};
//# sourceMappingURL=subscribeToIterable.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/util/subscribeToObservable.js":
/*!*************************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/util/subscribeToObservable.js ***!
  \*************************************************************************/
/*! exports provided: subscribeToObservable */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "subscribeToObservable", function() { return subscribeToObservable; });
/* harmony import */ var _symbol_observable__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../symbol/observable */ "../node_modules/rxjs/_esm5/internal/symbol/observable.js");
/** PURE_IMPORTS_START _symbol_observable PURE_IMPORTS_END */

var subscribeToObservable = function (obj) {
    return function (subscriber) {
        var obs = obj[_symbol_observable__WEBPACK_IMPORTED_MODULE_0__["observable"]]();
        if (typeof obs.subscribe !== 'function') {
            throw new TypeError('Provided object does not correctly implement Symbol.observable');
        }
        else {
            return obs.subscribe(subscriber);
        }
    };
};
//# sourceMappingURL=subscribeToObservable.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/util/subscribeToPromise.js":
/*!**********************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/util/subscribeToPromise.js ***!
  \**********************************************************************/
/*! exports provided: subscribeToPromise */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "subscribeToPromise", function() { return subscribeToPromise; });
/* harmony import */ var _hostReportError__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./hostReportError */ "../node_modules/rxjs/_esm5/internal/util/hostReportError.js");
/** PURE_IMPORTS_START _hostReportError PURE_IMPORTS_END */

var subscribeToPromise = function (promise) {
    return function (subscriber) {
        promise.then(function (value) {
            if (!subscriber.closed) {
                subscriber.next(value);
                subscriber.complete();
            }
        }, function (err) { return subscriber.error(err); })
            .then(null, _hostReportError__WEBPACK_IMPORTED_MODULE_0__["hostReportError"]);
        return subscriber;
    };
};
//# sourceMappingURL=subscribeToPromise.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/util/subscribeToResult.js":
/*!*********************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/util/subscribeToResult.js ***!
  \*********************************************************************/
/*! exports provided: subscribeToResult */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "subscribeToResult", function() { return subscribeToResult; });
/* harmony import */ var _InnerSubscriber__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../InnerSubscriber */ "../node_modules/rxjs/_esm5/internal/InnerSubscriber.js");
/* harmony import */ var _subscribeTo__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./subscribeTo */ "../node_modules/rxjs/_esm5/internal/util/subscribeTo.js");
/* harmony import */ var _Observable__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../Observable */ "../node_modules/rxjs/_esm5/internal/Observable.js");
/** PURE_IMPORTS_START _InnerSubscriber,_subscribeTo,_Observable PURE_IMPORTS_END */



function subscribeToResult(outerSubscriber, result, outerValue, outerIndex, innerSubscriber) {
    if (innerSubscriber === void 0) {
        innerSubscriber = new _InnerSubscriber__WEBPACK_IMPORTED_MODULE_0__["InnerSubscriber"](outerSubscriber, outerValue, outerIndex);
    }
    if (innerSubscriber.closed) {
        return undefined;
    }
    if (result instanceof _Observable__WEBPACK_IMPORTED_MODULE_2__["Observable"]) {
        return result.subscribe(innerSubscriber);
    }
    return Object(_subscribeTo__WEBPACK_IMPORTED_MODULE_1__["subscribeTo"])(result)(innerSubscriber);
}
//# sourceMappingURL=subscribeToResult.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/internal/util/toSubscriber.js":
/*!****************************************************************!*\
  !*** ../node_modules/rxjs/_esm5/internal/util/toSubscriber.js ***!
  \****************************************************************/
/*! exports provided: toSubscriber */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "toSubscriber", function() { return toSubscriber; });
/* harmony import */ var _Subscriber__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Subscriber */ "../node_modules/rxjs/_esm5/internal/Subscriber.js");
/* harmony import */ var _symbol_rxSubscriber__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../symbol/rxSubscriber */ "../node_modules/rxjs/_esm5/internal/symbol/rxSubscriber.js");
/* harmony import */ var _Observer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../Observer */ "../node_modules/rxjs/_esm5/internal/Observer.js");
/** PURE_IMPORTS_START _Subscriber,_symbol_rxSubscriber,_Observer PURE_IMPORTS_END */



function toSubscriber(nextOrObserver, error, complete) {
    if (nextOrObserver) {
        if (nextOrObserver instanceof _Subscriber__WEBPACK_IMPORTED_MODULE_0__["Subscriber"]) {
            return nextOrObserver;
        }
        if (nextOrObserver[_symbol_rxSubscriber__WEBPACK_IMPORTED_MODULE_1__["rxSubscriber"]]) {
            return nextOrObserver[_symbol_rxSubscriber__WEBPACK_IMPORTED_MODULE_1__["rxSubscriber"]]();
        }
    }
    if (!nextOrObserver && !error && !complete) {
        return new _Subscriber__WEBPACK_IMPORTED_MODULE_0__["Subscriber"](_Observer__WEBPACK_IMPORTED_MODULE_2__["empty"]);
    }
    return new _Subscriber__WEBPACK_IMPORTED_MODULE_0__["Subscriber"](nextOrObserver, error, complete);
}
//# sourceMappingURL=toSubscriber.js.map


/***/ }),

/***/ "../node_modules/rxjs/_esm5/operators/index.js":
/*!*****************************************************!*\
  !*** ../node_modules/rxjs/_esm5/operators/index.js ***!
  \*****************************************************/
/*! exports provided: audit, auditTime, buffer, bufferCount, bufferTime, bufferToggle, bufferWhen, catchError, combineAll, combineLatest, concat, concatAll, concatMap, concatMapTo, count, debounce, debounceTime, defaultIfEmpty, delay, delayWhen, dematerialize, distinct, distinctUntilChanged, distinctUntilKeyChanged, elementAt, endWith, every, exhaust, exhaustMap, expand, filter, finalize, find, findIndex, first, groupBy, ignoreElements, isEmpty, last, map, mapTo, materialize, max, merge, mergeAll, mergeMap, flatMap, mergeMapTo, mergeScan, min, multicast, observeOn, onErrorResumeNext, pairwise, partition, pluck, publish, publishBehavior, publishLast, publishReplay, race, reduce, repeat, repeatWhen, retry, retryWhen, refCount, sample, sampleTime, scan, sequenceEqual, share, shareReplay, single, skip, skipLast, skipUntil, skipWhile, startWith, subscribeOn, switchAll, switchMap, switchMapTo, take, takeLast, takeUntil, takeWhile, tap, throttle, throttleTime, throwIfEmpty, timeInterval, timeout, timeoutWith, timestamp, toArray, window, windowCount, windowTime, windowToggle, windowWhen, withLatestFrom, zip, zipAll */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _internal_operators_audit__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../internal/operators/audit */ "../node_modules/rxjs/_esm5/internal/operators/audit.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "audit", function() { return _internal_operators_audit__WEBPACK_IMPORTED_MODULE_0__["audit"]; });

/* harmony import */ var _internal_operators_auditTime__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../internal/operators/auditTime */ "../node_modules/rxjs/_esm5/internal/operators/auditTime.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "auditTime", function() { return _internal_operators_auditTime__WEBPACK_IMPORTED_MODULE_1__["auditTime"]; });

/* harmony import */ var _internal_operators_buffer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../internal/operators/buffer */ "../node_modules/rxjs/_esm5/internal/operators/buffer.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "buffer", function() { return _internal_operators_buffer__WEBPACK_IMPORTED_MODULE_2__["buffer"]; });

/* harmony import */ var _internal_operators_bufferCount__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../internal/operators/bufferCount */ "../node_modules/rxjs/_esm5/internal/operators/bufferCount.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "bufferCount", function() { return _internal_operators_bufferCount__WEBPACK_IMPORTED_MODULE_3__["bufferCount"]; });

/* harmony import */ var _internal_operators_bufferTime__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../internal/operators/bufferTime */ "../node_modules/rxjs/_esm5/internal/operators/bufferTime.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "bufferTime", function() { return _internal_operators_bufferTime__WEBPACK_IMPORTED_MODULE_4__["bufferTime"]; });

/* harmony import */ var _internal_operators_bufferToggle__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../internal/operators/bufferToggle */ "../node_modules/rxjs/_esm5/internal/operators/bufferToggle.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "bufferToggle", function() { return _internal_operators_bufferToggle__WEBPACK_IMPORTED_MODULE_5__["bufferToggle"]; });

/* harmony import */ var _internal_operators_bufferWhen__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../internal/operators/bufferWhen */ "../node_modules/rxjs/_esm5/internal/operators/bufferWhen.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "bufferWhen", function() { return _internal_operators_bufferWhen__WEBPACK_IMPORTED_MODULE_6__["bufferWhen"]; });

/* harmony import */ var _internal_operators_catchError__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../internal/operators/catchError */ "../node_modules/rxjs/_esm5/internal/operators/catchError.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "catchError", function() { return _internal_operators_catchError__WEBPACK_IMPORTED_MODULE_7__["catchError"]; });

/* harmony import */ var _internal_operators_combineAll__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../internal/operators/combineAll */ "../node_modules/rxjs/_esm5/internal/operators/combineAll.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "combineAll", function() { return _internal_operators_combineAll__WEBPACK_IMPORTED_MODULE_8__["combineAll"]; });

/* harmony import */ var _internal_operators_combineLatest__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../internal/operators/combineLatest */ "../node_modules/rxjs/_esm5/internal/operators/combineLatest.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "combineLatest", function() { return _internal_operators_combineLatest__WEBPACK_IMPORTED_MODULE_9__["combineLatest"]; });

/* harmony import */ var _internal_operators_concat__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../internal/operators/concat */ "../node_modules/rxjs/_esm5/internal/operators/concat.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "concat", function() { return _internal_operators_concat__WEBPACK_IMPORTED_MODULE_10__["concat"]; });

/* harmony import */ var _internal_operators_concatAll__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../internal/operators/concatAll */ "../node_modules/rxjs/_esm5/internal/operators/concatAll.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "concatAll", function() { return _internal_operators_concatAll__WEBPACK_IMPORTED_MODULE_11__["concatAll"]; });

/* harmony import */ var _internal_operators_concatMap__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../internal/operators/concatMap */ "../node_modules/rxjs/_esm5/internal/operators/concatMap.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "concatMap", function() { return _internal_operators_concatMap__WEBPACK_IMPORTED_MODULE_12__["concatMap"]; });

/* harmony import */ var _internal_operators_concatMapTo__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../internal/operators/concatMapTo */ "../node_modules/rxjs/_esm5/internal/operators/concatMapTo.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "concatMapTo", function() { return _internal_operators_concatMapTo__WEBPACK_IMPORTED_MODULE_13__["concatMapTo"]; });

/* harmony import */ var _internal_operators_count__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../internal/operators/count */ "../node_modules/rxjs/_esm5/internal/operators/count.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "count", function() { return _internal_operators_count__WEBPACK_IMPORTED_MODULE_14__["count"]; });

/* harmony import */ var _internal_operators_debounce__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../internal/operators/debounce */ "../node_modules/rxjs/_esm5/internal/operators/debounce.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "debounce", function() { return _internal_operators_debounce__WEBPACK_IMPORTED_MODULE_15__["debounce"]; });

/* harmony import */ var _internal_operators_debounceTime__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../internal/operators/debounceTime */ "../node_modules/rxjs/_esm5/internal/operators/debounceTime.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "debounceTime", function() { return _internal_operators_debounceTime__WEBPACK_IMPORTED_MODULE_16__["debounceTime"]; });

/* harmony import */ var _internal_operators_defaultIfEmpty__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../internal/operators/defaultIfEmpty */ "../node_modules/rxjs/_esm5/internal/operators/defaultIfEmpty.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "defaultIfEmpty", function() { return _internal_operators_defaultIfEmpty__WEBPACK_IMPORTED_MODULE_17__["defaultIfEmpty"]; });

/* harmony import */ var _internal_operators_delay__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../internal/operators/delay */ "../node_modules/rxjs/_esm5/internal/operators/delay.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "delay", function() { return _internal_operators_delay__WEBPACK_IMPORTED_MODULE_18__["delay"]; });

/* harmony import */ var _internal_operators_delayWhen__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../internal/operators/delayWhen */ "../node_modules/rxjs/_esm5/internal/operators/delayWhen.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "delayWhen", function() { return _internal_operators_delayWhen__WEBPACK_IMPORTED_MODULE_19__["delayWhen"]; });

/* harmony import */ var _internal_operators_dematerialize__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../internal/operators/dematerialize */ "../node_modules/rxjs/_esm5/internal/operators/dematerialize.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "dematerialize", function() { return _internal_operators_dematerialize__WEBPACK_IMPORTED_MODULE_20__["dematerialize"]; });

/* harmony import */ var _internal_operators_distinct__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ../internal/operators/distinct */ "../node_modules/rxjs/_esm5/internal/operators/distinct.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "distinct", function() { return _internal_operators_distinct__WEBPACK_IMPORTED_MODULE_21__["distinct"]; });

/* harmony import */ var _internal_operators_distinctUntilChanged__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ../internal/operators/distinctUntilChanged */ "../node_modules/rxjs/_esm5/internal/operators/distinctUntilChanged.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "distinctUntilChanged", function() { return _internal_operators_distinctUntilChanged__WEBPACK_IMPORTED_MODULE_22__["distinctUntilChanged"]; });

/* harmony import */ var _internal_operators_distinctUntilKeyChanged__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ../internal/operators/distinctUntilKeyChanged */ "../node_modules/rxjs/_esm5/internal/operators/distinctUntilKeyChanged.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "distinctUntilKeyChanged", function() { return _internal_operators_distinctUntilKeyChanged__WEBPACK_IMPORTED_MODULE_23__["distinctUntilKeyChanged"]; });

/* harmony import */ var _internal_operators_elementAt__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ../internal/operators/elementAt */ "../node_modules/rxjs/_esm5/internal/operators/elementAt.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "elementAt", function() { return _internal_operators_elementAt__WEBPACK_IMPORTED_MODULE_24__["elementAt"]; });

/* harmony import */ var _internal_operators_endWith__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ../internal/operators/endWith */ "../node_modules/rxjs/_esm5/internal/operators/endWith.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "endWith", function() { return _internal_operators_endWith__WEBPACK_IMPORTED_MODULE_25__["endWith"]; });

/* harmony import */ var _internal_operators_every__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ../internal/operators/every */ "../node_modules/rxjs/_esm5/internal/operators/every.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "every", function() { return _internal_operators_every__WEBPACK_IMPORTED_MODULE_26__["every"]; });

/* harmony import */ var _internal_operators_exhaust__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ../internal/operators/exhaust */ "../node_modules/rxjs/_esm5/internal/operators/exhaust.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "exhaust", function() { return _internal_operators_exhaust__WEBPACK_IMPORTED_MODULE_27__["exhaust"]; });

/* harmony import */ var _internal_operators_exhaustMap__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ../internal/operators/exhaustMap */ "../node_modules/rxjs/_esm5/internal/operators/exhaustMap.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "exhaustMap", function() { return _internal_operators_exhaustMap__WEBPACK_IMPORTED_MODULE_28__["exhaustMap"]; });

/* harmony import */ var _internal_operators_expand__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ../internal/operators/expand */ "../node_modules/rxjs/_esm5/internal/operators/expand.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "expand", function() { return _internal_operators_expand__WEBPACK_IMPORTED_MODULE_29__["expand"]; });

/* harmony import */ var _internal_operators_filter__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! ../internal/operators/filter */ "../node_modules/rxjs/_esm5/internal/operators/filter.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "filter", function() { return _internal_operators_filter__WEBPACK_IMPORTED_MODULE_30__["filter"]; });

/* harmony import */ var _internal_operators_finalize__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! ../internal/operators/finalize */ "../node_modules/rxjs/_esm5/internal/operators/finalize.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "finalize", function() { return _internal_operators_finalize__WEBPACK_IMPORTED_MODULE_31__["finalize"]; });

/* harmony import */ var _internal_operators_find__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! ../internal/operators/find */ "../node_modules/rxjs/_esm5/internal/operators/find.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "find", function() { return _internal_operators_find__WEBPACK_IMPORTED_MODULE_32__["find"]; });

/* harmony import */ var _internal_operators_findIndex__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! ../internal/operators/findIndex */ "../node_modules/rxjs/_esm5/internal/operators/findIndex.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "findIndex", function() { return _internal_operators_findIndex__WEBPACK_IMPORTED_MODULE_33__["findIndex"]; });

/* harmony import */ var _internal_operators_first__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(/*! ../internal/operators/first */ "../node_modules/rxjs/_esm5/internal/operators/first.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "first", function() { return _internal_operators_first__WEBPACK_IMPORTED_MODULE_34__["first"]; });

/* harmony import */ var _internal_operators_groupBy__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(/*! ../internal/operators/groupBy */ "../node_modules/rxjs/_esm5/internal/operators/groupBy.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "groupBy", function() { return _internal_operators_groupBy__WEBPACK_IMPORTED_MODULE_35__["groupBy"]; });

/* harmony import */ var _internal_operators_ignoreElements__WEBPACK_IMPORTED_MODULE_36__ = __webpack_require__(/*! ../internal/operators/ignoreElements */ "../node_modules/rxjs/_esm5/internal/operators/ignoreElements.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ignoreElements", function() { return _internal_operators_ignoreElements__WEBPACK_IMPORTED_MODULE_36__["ignoreElements"]; });

/* harmony import */ var _internal_operators_isEmpty__WEBPACK_IMPORTED_MODULE_37__ = __webpack_require__(/*! ../internal/operators/isEmpty */ "../node_modules/rxjs/_esm5/internal/operators/isEmpty.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "isEmpty", function() { return _internal_operators_isEmpty__WEBPACK_IMPORTED_MODULE_37__["isEmpty"]; });

/* harmony import */ var _internal_operators_last__WEBPACK_IMPORTED_MODULE_38__ = __webpack_require__(/*! ../internal/operators/last */ "../node_modules/rxjs/_esm5/internal/operators/last.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "last", function() { return _internal_operators_last__WEBPACK_IMPORTED_MODULE_38__["last"]; });

/* harmony import */ var _internal_operators_map__WEBPACK_IMPORTED_MODULE_39__ = __webpack_require__(/*! ../internal/operators/map */ "../node_modules/rxjs/_esm5/internal/operators/map.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "map", function() { return _internal_operators_map__WEBPACK_IMPORTED_MODULE_39__["map"]; });

/* harmony import */ var _internal_operators_mapTo__WEBPACK_IMPORTED_MODULE_40__ = __webpack_require__(/*! ../internal/operators/mapTo */ "../node_modules/rxjs/_esm5/internal/operators/mapTo.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "mapTo", function() { return _internal_operators_mapTo__WEBPACK_IMPORTED_MODULE_40__["mapTo"]; });

/* harmony import */ var _internal_operators_materialize__WEBPACK_IMPORTED_MODULE_41__ = __webpack_require__(/*! ../internal/operators/materialize */ "../node_modules/rxjs/_esm5/internal/operators/materialize.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "materialize", function() { return _internal_operators_materialize__WEBPACK_IMPORTED_MODULE_41__["materialize"]; });

/* harmony import */ var _internal_operators_max__WEBPACK_IMPORTED_MODULE_42__ = __webpack_require__(/*! ../internal/operators/max */ "../node_modules/rxjs/_esm5/internal/operators/max.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "max", function() { return _internal_operators_max__WEBPACK_IMPORTED_MODULE_42__["max"]; });

/* harmony import */ var _internal_operators_merge__WEBPACK_IMPORTED_MODULE_43__ = __webpack_require__(/*! ../internal/operators/merge */ "../node_modules/rxjs/_esm5/internal/operators/merge.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "merge", function() { return _internal_operators_merge__WEBPACK_IMPORTED_MODULE_43__["merge"]; });

/* harmony import */ var _internal_operators_mergeAll__WEBPACK_IMPORTED_MODULE_44__ = __webpack_require__(/*! ../internal/operators/mergeAll */ "../node_modules/rxjs/_esm5/internal/operators/mergeAll.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "mergeAll", function() { return _internal_operators_mergeAll__WEBPACK_IMPORTED_MODULE_44__["mergeAll"]; });

/* harmony import */ var _internal_operators_mergeMap__WEBPACK_IMPORTED_MODULE_45__ = __webpack_require__(/*! ../internal/operators/mergeMap */ "../node_modules/rxjs/_esm5/internal/operators/mergeMap.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "mergeMap", function() { return _internal_operators_mergeMap__WEBPACK_IMPORTED_MODULE_45__["mergeMap"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "flatMap", function() { return _internal_operators_mergeMap__WEBPACK_IMPORTED_MODULE_45__["flatMap"]; });

/* harmony import */ var _internal_operators_mergeMapTo__WEBPACK_IMPORTED_MODULE_46__ = __webpack_require__(/*! ../internal/operators/mergeMapTo */ "../node_modules/rxjs/_esm5/internal/operators/mergeMapTo.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "mergeMapTo", function() { return _internal_operators_mergeMapTo__WEBPACK_IMPORTED_MODULE_46__["mergeMapTo"]; });

/* harmony import */ var _internal_operators_mergeScan__WEBPACK_IMPORTED_MODULE_47__ = __webpack_require__(/*! ../internal/operators/mergeScan */ "../node_modules/rxjs/_esm5/internal/operators/mergeScan.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "mergeScan", function() { return _internal_operators_mergeScan__WEBPACK_IMPORTED_MODULE_47__["mergeScan"]; });

/* harmony import */ var _internal_operators_min__WEBPACK_IMPORTED_MODULE_48__ = __webpack_require__(/*! ../internal/operators/min */ "../node_modules/rxjs/_esm5/internal/operators/min.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "min", function() { return _internal_operators_min__WEBPACK_IMPORTED_MODULE_48__["min"]; });

/* harmony import */ var _internal_operators_multicast__WEBPACK_IMPORTED_MODULE_49__ = __webpack_require__(/*! ../internal/operators/multicast */ "../node_modules/rxjs/_esm5/internal/operators/multicast.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "multicast", function() { return _internal_operators_multicast__WEBPACK_IMPORTED_MODULE_49__["multicast"]; });

/* harmony import */ var _internal_operators_observeOn__WEBPACK_IMPORTED_MODULE_50__ = __webpack_require__(/*! ../internal/operators/observeOn */ "../node_modules/rxjs/_esm5/internal/operators/observeOn.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "observeOn", function() { return _internal_operators_observeOn__WEBPACK_IMPORTED_MODULE_50__["observeOn"]; });

/* harmony import */ var _internal_operators_onErrorResumeNext__WEBPACK_IMPORTED_MODULE_51__ = __webpack_require__(/*! ../internal/operators/onErrorResumeNext */ "../node_modules/rxjs/_esm5/internal/operators/onErrorResumeNext.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "onErrorResumeNext", function() { return _internal_operators_onErrorResumeNext__WEBPACK_IMPORTED_MODULE_51__["onErrorResumeNext"]; });

/* harmony import */ var _internal_operators_pairwise__WEBPACK_IMPORTED_MODULE_52__ = __webpack_require__(/*! ../internal/operators/pairwise */ "../node_modules/rxjs/_esm5/internal/operators/pairwise.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "pairwise", function() { return _internal_operators_pairwise__WEBPACK_IMPORTED_MODULE_52__["pairwise"]; });

/* harmony import */ var _internal_operators_partition__WEBPACK_IMPORTED_MODULE_53__ = __webpack_require__(/*! ../internal/operators/partition */ "../node_modules/rxjs/_esm5/internal/operators/partition.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "partition", function() { return _internal_operators_partition__WEBPACK_IMPORTED_MODULE_53__["partition"]; });

/* harmony import */ var _internal_operators_pluck__WEBPACK_IMPORTED_MODULE_54__ = __webpack_require__(/*! ../internal/operators/pluck */ "../node_modules/rxjs/_esm5/internal/operators/pluck.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "pluck", function() { return _internal_operators_pluck__WEBPACK_IMPORTED_MODULE_54__["pluck"]; });

/* harmony import */ var _internal_operators_publish__WEBPACK_IMPORTED_MODULE_55__ = __webpack_require__(/*! ../internal/operators/publish */ "../node_modules/rxjs/_esm5/internal/operators/publish.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "publish", function() { return _internal_operators_publish__WEBPACK_IMPORTED_MODULE_55__["publish"]; });

/* harmony import */ var _internal_operators_publishBehavior__WEBPACK_IMPORTED_MODULE_56__ = __webpack_require__(/*! ../internal/operators/publishBehavior */ "../node_modules/rxjs/_esm5/internal/operators/publishBehavior.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "publishBehavior", function() { return _internal_operators_publishBehavior__WEBPACK_IMPORTED_MODULE_56__["publishBehavior"]; });

/* harmony import */ var _internal_operators_publishLast__WEBPACK_IMPORTED_MODULE_57__ = __webpack_require__(/*! ../internal/operators/publishLast */ "../node_modules/rxjs/_esm5/internal/operators/publishLast.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "publishLast", function() { return _internal_operators_publishLast__WEBPACK_IMPORTED_MODULE_57__["publishLast"]; });

/* harmony import */ var _internal_operators_publishReplay__WEBPACK_IMPORTED_MODULE_58__ = __webpack_require__(/*! ../internal/operators/publishReplay */ "../node_modules/rxjs/_esm5/internal/operators/publishReplay.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "publishReplay", function() { return _internal_operators_publishReplay__WEBPACK_IMPORTED_MODULE_58__["publishReplay"]; });

/* harmony import */ var _internal_operators_race__WEBPACK_IMPORTED_MODULE_59__ = __webpack_require__(/*! ../internal/operators/race */ "../node_modules/rxjs/_esm5/internal/operators/race.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "race", function() { return _internal_operators_race__WEBPACK_IMPORTED_MODULE_59__["race"]; });

/* harmony import */ var _internal_operators_reduce__WEBPACK_IMPORTED_MODULE_60__ = __webpack_require__(/*! ../internal/operators/reduce */ "../node_modules/rxjs/_esm5/internal/operators/reduce.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "reduce", function() { return _internal_operators_reduce__WEBPACK_IMPORTED_MODULE_60__["reduce"]; });

/* harmony import */ var _internal_operators_repeat__WEBPACK_IMPORTED_MODULE_61__ = __webpack_require__(/*! ../internal/operators/repeat */ "../node_modules/rxjs/_esm5/internal/operators/repeat.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "repeat", function() { return _internal_operators_repeat__WEBPACK_IMPORTED_MODULE_61__["repeat"]; });

/* harmony import */ var _internal_operators_repeatWhen__WEBPACK_IMPORTED_MODULE_62__ = __webpack_require__(/*! ../internal/operators/repeatWhen */ "../node_modules/rxjs/_esm5/internal/operators/repeatWhen.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "repeatWhen", function() { return _internal_operators_repeatWhen__WEBPACK_IMPORTED_MODULE_62__["repeatWhen"]; });

/* harmony import */ var _internal_operators_retry__WEBPACK_IMPORTED_MODULE_63__ = __webpack_require__(/*! ../internal/operators/retry */ "../node_modules/rxjs/_esm5/internal/operators/retry.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "retry", function() { return _internal_operators_retry__WEBPACK_IMPORTED_MODULE_63__["retry"]; });

/* harmony import */ var _internal_operators_retryWhen__WEBPACK_IMPORTED_MODULE_64__ = __webpack_require__(/*! ../internal/operators/retryWhen */ "../node_modules/rxjs/_esm5/internal/operators/retryWhen.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "retryWhen", function() { return _internal_operators_retryWhen__WEBPACK_IMPORTED_MODULE_64__["retryWhen"]; });

/* harmony import */ var _internal_operators_refCount__WEBPACK_IMPORTED_MODULE_65__ = __webpack_require__(/*! ../internal/operators/refCount */ "../node_modules/rxjs/_esm5/internal/operators/refCount.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "refCount", function() { return _internal_operators_refCount__WEBPACK_IMPORTED_MODULE_65__["refCount"]; });

/* harmony import */ var _internal_operators_sample__WEBPACK_IMPORTED_MODULE_66__ = __webpack_require__(/*! ../internal/operators/sample */ "../node_modules/rxjs/_esm5/internal/operators/sample.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "sample", function() { return _internal_operators_sample__WEBPACK_IMPORTED_MODULE_66__["sample"]; });

/* harmony import */ var _internal_operators_sampleTime__WEBPACK_IMPORTED_MODULE_67__ = __webpack_require__(/*! ../internal/operators/sampleTime */ "../node_modules/rxjs/_esm5/internal/operators/sampleTime.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "sampleTime", function() { return _internal_operators_sampleTime__WEBPACK_IMPORTED_MODULE_67__["sampleTime"]; });

/* harmony import */ var _internal_operators_scan__WEBPACK_IMPORTED_MODULE_68__ = __webpack_require__(/*! ../internal/operators/scan */ "../node_modules/rxjs/_esm5/internal/operators/scan.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "scan", function() { return _internal_operators_scan__WEBPACK_IMPORTED_MODULE_68__["scan"]; });

/* harmony import */ var _internal_operators_sequenceEqual__WEBPACK_IMPORTED_MODULE_69__ = __webpack_require__(/*! ../internal/operators/sequenceEqual */ "../node_modules/rxjs/_esm5/internal/operators/sequenceEqual.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "sequenceEqual", function() { return _internal_operators_sequenceEqual__WEBPACK_IMPORTED_MODULE_69__["sequenceEqual"]; });

/* harmony import */ var _internal_operators_share__WEBPACK_IMPORTED_MODULE_70__ = __webpack_require__(/*! ../internal/operators/share */ "../node_modules/rxjs/_esm5/internal/operators/share.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "share", function() { return _internal_operators_share__WEBPACK_IMPORTED_MODULE_70__["share"]; });

/* harmony import */ var _internal_operators_shareReplay__WEBPACK_IMPORTED_MODULE_71__ = __webpack_require__(/*! ../internal/operators/shareReplay */ "../node_modules/rxjs/_esm5/internal/operators/shareReplay.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "shareReplay", function() { return _internal_operators_shareReplay__WEBPACK_IMPORTED_MODULE_71__["shareReplay"]; });

/* harmony import */ var _internal_operators_single__WEBPACK_IMPORTED_MODULE_72__ = __webpack_require__(/*! ../internal/operators/single */ "../node_modules/rxjs/_esm5/internal/operators/single.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "single", function() { return _internal_operators_single__WEBPACK_IMPORTED_MODULE_72__["single"]; });

/* harmony import */ var _internal_operators_skip__WEBPACK_IMPORTED_MODULE_73__ = __webpack_require__(/*! ../internal/operators/skip */ "../node_modules/rxjs/_esm5/internal/operators/skip.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "skip", function() { return _internal_operators_skip__WEBPACK_IMPORTED_MODULE_73__["skip"]; });

/* harmony import */ var _internal_operators_skipLast__WEBPACK_IMPORTED_MODULE_74__ = __webpack_require__(/*! ../internal/operators/skipLast */ "../node_modules/rxjs/_esm5/internal/operators/skipLast.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "skipLast", function() { return _internal_operators_skipLast__WEBPACK_IMPORTED_MODULE_74__["skipLast"]; });

/* harmony import */ var _internal_operators_skipUntil__WEBPACK_IMPORTED_MODULE_75__ = __webpack_require__(/*! ../internal/operators/skipUntil */ "../node_modules/rxjs/_esm5/internal/operators/skipUntil.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "skipUntil", function() { return _internal_operators_skipUntil__WEBPACK_IMPORTED_MODULE_75__["skipUntil"]; });

/* harmony import */ var _internal_operators_skipWhile__WEBPACK_IMPORTED_MODULE_76__ = __webpack_require__(/*! ../internal/operators/skipWhile */ "../node_modules/rxjs/_esm5/internal/operators/skipWhile.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "skipWhile", function() { return _internal_operators_skipWhile__WEBPACK_IMPORTED_MODULE_76__["skipWhile"]; });

/* harmony import */ var _internal_operators_startWith__WEBPACK_IMPORTED_MODULE_77__ = __webpack_require__(/*! ../internal/operators/startWith */ "../node_modules/rxjs/_esm5/internal/operators/startWith.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "startWith", function() { return _internal_operators_startWith__WEBPACK_IMPORTED_MODULE_77__["startWith"]; });

/* harmony import */ var _internal_operators_subscribeOn__WEBPACK_IMPORTED_MODULE_78__ = __webpack_require__(/*! ../internal/operators/subscribeOn */ "../node_modules/rxjs/_esm5/internal/operators/subscribeOn.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "subscribeOn", function() { return _internal_operators_subscribeOn__WEBPACK_IMPORTED_MODULE_78__["subscribeOn"]; });

/* harmony import */ var _internal_operators_switchAll__WEBPACK_IMPORTED_MODULE_79__ = __webpack_require__(/*! ../internal/operators/switchAll */ "../node_modules/rxjs/_esm5/internal/operators/switchAll.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "switchAll", function() { return _internal_operators_switchAll__WEBPACK_IMPORTED_MODULE_79__["switchAll"]; });

/* harmony import */ var _internal_operators_switchMap__WEBPACK_IMPORTED_MODULE_80__ = __webpack_require__(/*! ../internal/operators/switchMap */ "../node_modules/rxjs/_esm5/internal/operators/switchMap.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "switchMap", function() { return _internal_operators_switchMap__WEBPACK_IMPORTED_MODULE_80__["switchMap"]; });

/* harmony import */ var _internal_operators_switchMapTo__WEBPACK_IMPORTED_MODULE_81__ = __webpack_require__(/*! ../internal/operators/switchMapTo */ "../node_modules/rxjs/_esm5/internal/operators/switchMapTo.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "switchMapTo", function() { return _internal_operators_switchMapTo__WEBPACK_IMPORTED_MODULE_81__["switchMapTo"]; });

/* harmony import */ var _internal_operators_take__WEBPACK_IMPORTED_MODULE_82__ = __webpack_require__(/*! ../internal/operators/take */ "../node_modules/rxjs/_esm5/internal/operators/take.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "take", function() { return _internal_operators_take__WEBPACK_IMPORTED_MODULE_82__["take"]; });

/* harmony import */ var _internal_operators_takeLast__WEBPACK_IMPORTED_MODULE_83__ = __webpack_require__(/*! ../internal/operators/takeLast */ "../node_modules/rxjs/_esm5/internal/operators/takeLast.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "takeLast", function() { return _internal_operators_takeLast__WEBPACK_IMPORTED_MODULE_83__["takeLast"]; });

/* harmony import */ var _internal_operators_takeUntil__WEBPACK_IMPORTED_MODULE_84__ = __webpack_require__(/*! ../internal/operators/takeUntil */ "../node_modules/rxjs/_esm5/internal/operators/takeUntil.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "takeUntil", function() { return _internal_operators_takeUntil__WEBPACK_IMPORTED_MODULE_84__["takeUntil"]; });

/* harmony import */ var _internal_operators_takeWhile__WEBPACK_IMPORTED_MODULE_85__ = __webpack_require__(/*! ../internal/operators/takeWhile */ "../node_modules/rxjs/_esm5/internal/operators/takeWhile.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "takeWhile", function() { return _internal_operators_takeWhile__WEBPACK_IMPORTED_MODULE_85__["takeWhile"]; });

/* harmony import */ var _internal_operators_tap__WEBPACK_IMPORTED_MODULE_86__ = __webpack_require__(/*! ../internal/operators/tap */ "../node_modules/rxjs/_esm5/internal/operators/tap.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "tap", function() { return _internal_operators_tap__WEBPACK_IMPORTED_MODULE_86__["tap"]; });

/* harmony import */ var _internal_operators_throttle__WEBPACK_IMPORTED_MODULE_87__ = __webpack_require__(/*! ../internal/operators/throttle */ "../node_modules/rxjs/_esm5/internal/operators/throttle.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "throttle", function() { return _internal_operators_throttle__WEBPACK_IMPORTED_MODULE_87__["throttle"]; });

/* harmony import */ var _internal_operators_throttleTime__WEBPACK_IMPORTED_MODULE_88__ = __webpack_require__(/*! ../internal/operators/throttleTime */ "../node_modules/rxjs/_esm5/internal/operators/throttleTime.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "throttleTime", function() { return _internal_operators_throttleTime__WEBPACK_IMPORTED_MODULE_88__["throttleTime"]; });

/* harmony import */ var _internal_operators_throwIfEmpty__WEBPACK_IMPORTED_MODULE_89__ = __webpack_require__(/*! ../internal/operators/throwIfEmpty */ "../node_modules/rxjs/_esm5/internal/operators/throwIfEmpty.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "throwIfEmpty", function() { return _internal_operators_throwIfEmpty__WEBPACK_IMPORTED_MODULE_89__["throwIfEmpty"]; });

/* harmony import */ var _internal_operators_timeInterval__WEBPACK_IMPORTED_MODULE_90__ = __webpack_require__(/*! ../internal/operators/timeInterval */ "../node_modules/rxjs/_esm5/internal/operators/timeInterval.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "timeInterval", function() { return _internal_operators_timeInterval__WEBPACK_IMPORTED_MODULE_90__["timeInterval"]; });

/* harmony import */ var _internal_operators_timeout__WEBPACK_IMPORTED_MODULE_91__ = __webpack_require__(/*! ../internal/operators/timeout */ "../node_modules/rxjs/_esm5/internal/operators/timeout.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "timeout", function() { return _internal_operators_timeout__WEBPACK_IMPORTED_MODULE_91__["timeout"]; });

/* harmony import */ var _internal_operators_timeoutWith__WEBPACK_IMPORTED_MODULE_92__ = __webpack_require__(/*! ../internal/operators/timeoutWith */ "../node_modules/rxjs/_esm5/internal/operators/timeoutWith.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "timeoutWith", function() { return _internal_operators_timeoutWith__WEBPACK_IMPORTED_MODULE_92__["timeoutWith"]; });

/* harmony import */ var _internal_operators_timestamp__WEBPACK_IMPORTED_MODULE_93__ = __webpack_require__(/*! ../internal/operators/timestamp */ "../node_modules/rxjs/_esm5/internal/operators/timestamp.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "timestamp", function() { return _internal_operators_timestamp__WEBPACK_IMPORTED_MODULE_93__["timestamp"]; });

/* harmony import */ var _internal_operators_toArray__WEBPACK_IMPORTED_MODULE_94__ = __webpack_require__(/*! ../internal/operators/toArray */ "../node_modules/rxjs/_esm5/internal/operators/toArray.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "toArray", function() { return _internal_operators_toArray__WEBPACK_IMPORTED_MODULE_94__["toArray"]; });

/* harmony import */ var _internal_operators_window__WEBPACK_IMPORTED_MODULE_95__ = __webpack_require__(/*! ../internal/operators/window */ "../node_modules/rxjs/_esm5/internal/operators/window.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "window", function() { return _internal_operators_window__WEBPACK_IMPORTED_MODULE_95__["window"]; });

/* harmony import */ var _internal_operators_windowCount__WEBPACK_IMPORTED_MODULE_96__ = __webpack_require__(/*! ../internal/operators/windowCount */ "../node_modules/rxjs/_esm5/internal/operators/windowCount.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "windowCount", function() { return _internal_operators_windowCount__WEBPACK_IMPORTED_MODULE_96__["windowCount"]; });

/* harmony import */ var _internal_operators_windowTime__WEBPACK_IMPORTED_MODULE_97__ = __webpack_require__(/*! ../internal/operators/windowTime */ "../node_modules/rxjs/_esm5/internal/operators/windowTime.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "windowTime", function() { return _internal_operators_windowTime__WEBPACK_IMPORTED_MODULE_97__["windowTime"]; });

/* harmony import */ var _internal_operators_windowToggle__WEBPACK_IMPORTED_MODULE_98__ = __webpack_require__(/*! ../internal/operators/windowToggle */ "../node_modules/rxjs/_esm5/internal/operators/windowToggle.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "windowToggle", function() { return _internal_operators_windowToggle__WEBPACK_IMPORTED_MODULE_98__["windowToggle"]; });

/* harmony import */ var _internal_operators_windowWhen__WEBPACK_IMPORTED_MODULE_99__ = __webpack_require__(/*! ../internal/operators/windowWhen */ "../node_modules/rxjs/_esm5/internal/operators/windowWhen.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "windowWhen", function() { return _internal_operators_windowWhen__WEBPACK_IMPORTED_MODULE_99__["windowWhen"]; });

/* harmony import */ var _internal_operators_withLatestFrom__WEBPACK_IMPORTED_MODULE_100__ = __webpack_require__(/*! ../internal/operators/withLatestFrom */ "../node_modules/rxjs/_esm5/internal/operators/withLatestFrom.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "withLatestFrom", function() { return _internal_operators_withLatestFrom__WEBPACK_IMPORTED_MODULE_100__["withLatestFrom"]; });

/* harmony import */ var _internal_operators_zip__WEBPACK_IMPORTED_MODULE_101__ = __webpack_require__(/*! ../internal/operators/zip */ "../node_modules/rxjs/_esm5/internal/operators/zip.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "zip", function() { return _internal_operators_zip__WEBPACK_IMPORTED_MODULE_101__["zip"]; });

/* harmony import */ var _internal_operators_zipAll__WEBPACK_IMPORTED_MODULE_102__ = __webpack_require__(/*! ../internal/operators/zipAll */ "../node_modules/rxjs/_esm5/internal/operators/zipAll.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "zipAll", function() { return _internal_operators_zipAll__WEBPACK_IMPORTED_MODULE_102__["zipAll"]; });

/** PURE_IMPORTS_START  PURE_IMPORTS_END */







































































































//# sourceMappingURL=index.js.map


/***/ }),

/***/ "../node_modules/screenfull/dist/screenfull.js":
/*!*****************************************************!*\
  !*** ../node_modules/screenfull/dist/screenfull.js ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/*!
* screenfull
* v5.2.0 - 2021-11-03
* (c) Sindre Sorhus; MIT License
*/
(function () {
	'use strict';

	var document = typeof window !== 'undefined' && typeof window.document !== 'undefined' ? window.document : {};
	var isCommonjs =  true && module.exports;

	var fn = (function () {
		var val;

		var fnMap = [
			[
				'requestFullscreen',
				'exitFullscreen',
				'fullscreenElement',
				'fullscreenEnabled',
				'fullscreenchange',
				'fullscreenerror'
			],
			// New WebKit
			[
				'webkitRequestFullscreen',
				'webkitExitFullscreen',
				'webkitFullscreenElement',
				'webkitFullscreenEnabled',
				'webkitfullscreenchange',
				'webkitfullscreenerror'

			],
			// Old WebKit
			[
				'webkitRequestFullScreen',
				'webkitCancelFullScreen',
				'webkitCurrentFullScreenElement',
				'webkitCancelFullScreen',
				'webkitfullscreenchange',
				'webkitfullscreenerror'

			],
			[
				'mozRequestFullScreen',
				'mozCancelFullScreen',
				'mozFullScreenElement',
				'mozFullScreenEnabled',
				'mozfullscreenchange',
				'mozfullscreenerror'
			],
			[
				'msRequestFullscreen',
				'msExitFullscreen',
				'msFullscreenElement',
				'msFullscreenEnabled',
				'MSFullscreenChange',
				'MSFullscreenError'
			]
		];

		var i = 0;
		var l = fnMap.length;
		var ret = {};

		for (; i < l; i++) {
			val = fnMap[i];
			if (val && val[1] in document) {
				for (i = 0; i < val.length; i++) {
					ret[fnMap[0][i]] = val[i];
				}
				return ret;
			}
		}

		return false;
	})();

	var eventNameMap = {
		change: fn.fullscreenchange,
		error: fn.fullscreenerror
	};

	var screenfull = {
		request: function (element, options) {
			return new Promise(function (resolve, reject) {
				var onFullScreenEntered = function () {
					this.off('change', onFullScreenEntered);
					resolve();
				}.bind(this);

				this.on('change', onFullScreenEntered);

				element = element || document.documentElement;

				var returnPromise = element[fn.requestFullscreen](options);

				if (returnPromise instanceof Promise) {
					returnPromise.then(onFullScreenEntered).catch(reject);
				}
			}.bind(this));
		},
		exit: function () {
			return new Promise(function (resolve, reject) {
				if (!this.isFullscreen) {
					resolve();
					return;
				}

				var onFullScreenExit = function () {
					this.off('change', onFullScreenExit);
					resolve();
				}.bind(this);

				this.on('change', onFullScreenExit);

				var returnPromise = document[fn.exitFullscreen]();

				if (returnPromise instanceof Promise) {
					returnPromise.then(onFullScreenExit).catch(reject);
				}
			}.bind(this));
		},
		toggle: function (element, options) {
			return this.isFullscreen ? this.exit() : this.request(element, options);
		},
		onchange: function (callback) {
			this.on('change', callback);
		},
		onerror: function (callback) {
			this.on('error', callback);
		},
		on: function (event, callback) {
			var eventName = eventNameMap[event];
			if (eventName) {
				document.addEventListener(eventName, callback, false);
			}
		},
		off: function (event, callback) {
			var eventName = eventNameMap[event];
			if (eventName) {
				document.removeEventListener(eventName, callback, false);
			}
		},
		raw: fn
	};

	if (!fn) {
		if (isCommonjs) {
			module.exports = {isEnabled: false};
		} else {
			window.screenfull = {isEnabled: false};
		}

		return;
	}

	Object.defineProperties(screenfull, {
		isFullscreen: {
			get: function () {
				return Boolean(document[fn.fullscreenElement]);
			}
		},
		element: {
			enumerable: true,
			get: function () {
				return document[fn.fullscreenElement];
			}
		},
		isEnabled: {
			enumerable: true,
			get: function () {
				// Coerce to boolean in case of old WebKit
				return Boolean(document[fn.fullscreenEnabled]);
			}
		}
	});

	if (isCommonjs) {
		module.exports = screenfull;
	} else {
		window.screenfull = screenfull;
	}
})();


/***/ }),

/***/ "../node_modules/set-harmonic-interval/lib/index.esm.js":
/*!**************************************************************!*\
  !*** ../node_modules/set-harmonic-interval/lib/index.esm.js ***!
  \**************************************************************/
/*! exports provided: clearHarmonicInterval, setHarmonicInterval */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "clearHarmonicInterval", function() { return clearHarmonicInterval; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "setHarmonicInterval", function() { return setHarmonicInterval; });
var counter = 0;
var buckets = {};
var setHarmonicInterval = function (fn, ms) {
    var _a;
    var id = counter++;
    if (buckets[ms]) {
        buckets[ms].listeners[id] = fn;
    }
    else {
        var timer = setInterval(function () {
            var listeners = buckets[ms].listeners;
            var didThrow = false;
            var lastError;
            for (var _i = 0, _a = Object.values(listeners); _i < _a.length; _i++) {
                var listener = _a[_i];
                try {
                    listener();
                }
                catch (error) {
                    didThrow = true;
                    lastError = error;
                }
            }
            if (didThrow)
                throw lastError;
        }, ms);
        buckets[ms] = {
            ms: ms,
            timer: timer,
            listeners: (_a = {},
                _a[id] = fn,
                _a),
        };
    }
    return {
        bucket: buckets[ms],
        id: id,
    };
};
var clearHarmonicInterval = function (_a) {
    var bucket = _a.bucket, id = _a.id;
    delete bucket.listeners[id];
    var hasListeners = false;
    for (var listener in bucket.listeners) {
        hasListeners = true;
        break;
    }
    if (!hasListeners) {
        clearInterval(bucket.timer);
        delete buckets[bucket.ms];
    }
};




/***/ }),

/***/ "../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js":
/*!*****************************************************************************!*\
  !*** ../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js ***!
  \*****************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var isOldIE = function isOldIE() {
  var memo;
  return function memorize() {
    if (typeof memo === 'undefined') {
      // Test for IE <= 9 as proposed by Browserhacks
      // @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805
      // Tests for existence of standard globals is to allow style-loader
      // to operate correctly into non-standard environments
      // @see https://github.com/webpack-contrib/style-loader/issues/177
      memo = Boolean(window && document && document.all && !window.atob);
    }

    return memo;
  };
}();

var getTarget = function getTarget() {
  var memo = {};
  return function memorize(target) {
    if (typeof memo[target] === 'undefined') {
      var styleTarget = document.querySelector(target); // Special case to return head of iframe instead of iframe itself

      if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {
        try {
          // This will throw an exception if access to iframe is blocked
          // due to cross-origin restrictions
          styleTarget = styleTarget.contentDocument.head;
        } catch (e) {
          // istanbul ignore next
          styleTarget = null;
        }
      }

      memo[target] = styleTarget;
    }

    return memo[target];
  };
}();

var stylesInDom = [];

function getIndexByIdentifier(identifier) {
  var result = -1;

  for (var i = 0; i < stylesInDom.length; i++) {
    if (stylesInDom[i].identifier === identifier) {
      result = i;
      break;
    }
  }

  return result;
}

function modulesToDom(list, options) {
  var idCountMap = {};
  var identifiers = [];

  for (var i = 0; i < list.length; i++) {
    var item = list[i];
    var id = options.base ? item[0] + options.base : item[0];
    var count = idCountMap[id] || 0;
    var identifier = "".concat(id, " ").concat(count);
    idCountMap[id] = count + 1;
    var index = getIndexByIdentifier(identifier);
    var obj = {
      css: item[1],
      media: item[2],
      sourceMap: item[3]
    };

    if (index !== -1) {
      stylesInDom[index].references++;
      stylesInDom[index].updater(obj);
    } else {
      stylesInDom.push({
        identifier: identifier,
        updater: addStyle(obj, options),
        references: 1
      });
    }

    identifiers.push(identifier);
  }

  return identifiers;
}

function insertStyleElement(options) {
  var style = document.createElement('style');
  var attributes = options.attributes || {};

  if (typeof attributes.nonce === 'undefined') {
    var nonce =  true ? __webpack_require__.nc : undefined;

    if (nonce) {
      attributes.nonce = nonce;
    }
  }

  Object.keys(attributes).forEach(function (key) {
    style.setAttribute(key, attributes[key]);
  });

  if (typeof options.insert === 'function') {
    options.insert(style);
  } else {
    var target = getTarget(options.insert || 'head');

    if (!target) {
      throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");
    }

    target.appendChild(style);
  }

  return style;
}

function removeStyleElement(style) {
  // istanbul ignore if
  if (style.parentNode === null) {
    return false;
  }

  style.parentNode.removeChild(style);
}
/* istanbul ignore next  */


var replaceText = function replaceText() {
  var textStore = [];
  return function replace(index, replacement) {
    textStore[index] = replacement;
    return textStore.filter(Boolean).join('\n');
  };
}();

function applyToSingletonTag(style, index, remove, obj) {
  var css = remove ? '' : obj.media ? "@media ".concat(obj.media, " {").concat(obj.css, "}") : obj.css; // For old IE

  /* istanbul ignore if  */

  if (style.styleSheet) {
    style.styleSheet.cssText = replaceText(index, css);
  } else {
    var cssNode = document.createTextNode(css);
    var childNodes = style.childNodes;

    if (childNodes[index]) {
      style.removeChild(childNodes[index]);
    }

    if (childNodes.length) {
      style.insertBefore(cssNode, childNodes[index]);
    } else {
      style.appendChild(cssNode);
    }
  }
}

function applyToTag(style, options, obj) {
  var css = obj.css;
  var media = obj.media;
  var sourceMap = obj.sourceMap;

  if (media) {
    style.setAttribute('media', media);
  } else {
    style.removeAttribute('media');
  }

  if (sourceMap && btoa) {
    css += "\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), " */");
  } // For old IE

  /* istanbul ignore if  */


  if (style.styleSheet) {
    style.styleSheet.cssText = css;
  } else {
    while (style.firstChild) {
      style.removeChild(style.firstChild);
    }

    style.appendChild(document.createTextNode(css));
  }
}

var singleton = null;
var singletonCounter = 0;

function addStyle(obj, options) {
  var style;
  var update;
  var remove;

  if (options.singleton) {
    var styleIndex = singletonCounter++;
    style = singleton || (singleton = insertStyleElement(options));
    update = applyToSingletonTag.bind(null, style, styleIndex, false);
    remove = applyToSingletonTag.bind(null, style, styleIndex, true);
  } else {
    style = insertStyleElement(options);
    update = applyToTag.bind(null, style, options);

    remove = function remove() {
      removeStyleElement(style);
    };
  }

  update(obj);
  return function updateStyle(newObj) {
    if (newObj) {
      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap) {
        return;
      }

      update(obj = newObj);
    } else {
      remove();
    }
  };
}

module.exports = function (list, options) {
  options = options || {}; // Force single-tag solution on IE6-9, which has a hard limit on the # of <style>
  // tags it will allow on a page

  if (!options.singleton && typeof options.singleton !== 'boolean') {
    options.singleton = isOldIE();
  }

  list = list || [];
  var lastIdentifiers = modulesToDom(list, options);
  return function update(newList) {
    newList = newList || [];

    if (Object.prototype.toString.call(newList) !== '[object Array]') {
      return;
    }

    for (var i = 0; i < lastIdentifiers.length; i++) {
      var identifier = lastIdentifiers[i];
      var index = getIndexByIdentifier(identifier);
      stylesInDom[index].references--;
    }

    var newLastIdentifiers = modulesToDom(newList, options);

    for (var _i = 0; _i < lastIdentifiers.length; _i++) {
      var _identifier = lastIdentifiers[_i];

      var _index = getIndexByIdentifier(_identifier);

      if (stylesInDom[_index].references === 0) {
        stylesInDom[_index].updater();

        stylesInDom.splice(_index, 1);
      }
    }

    lastIdentifiers = newLastIdentifiers;
  };
};

/***/ }),

/***/ "../node_modules/throttle-debounce/esm/index.js":
/*!******************************************************!*\
  !*** ../node_modules/throttle-debounce/esm/index.js ***!
  \******************************************************/
/*! exports provided: debounce, throttle */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "debounce", function() { return debounce; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "throttle", function() { return throttle; });
/* eslint-disable no-undefined,no-param-reassign,no-shadow */

/**
 * Throttle execution of a function. Especially useful for rate limiting
 * execution of handlers on events like resize and scroll.
 *
 * @param  {number}    delay -          A zero-or-greater delay in milliseconds. For event callbacks, values around 100 or 250 (or even higher) are most useful.
 * @param  {boolean}   [noTrailing] -   Optional, defaults to false. If noTrailing is true, callback will only execute every `delay` milliseconds while the
 *                                    throttled-function is being called. If noTrailing is false or unspecified, callback will be executed one final time
 *                                    after the last throttled-function call. (After the throttled-function has not been called for `delay` milliseconds,
 *                                    the internal counter is reset).
 * @param  {Function}  callback -       A function to be executed after delay milliseconds. The `this` context and all arguments are passed through, as-is,
 *                                    to `callback` when the throttled-function is executed.
 * @param  {boolean}   [debounceMode] - If `debounceMode` is true (at begin), schedule `clear` to execute after `delay` ms. If `debounceMode` is false (at end),
 *                                    schedule `callback` to execute after `delay` ms.
 *
 * @returns {Function}  A new, throttled, function.
 */
function throttle (delay, noTrailing, callback, debounceMode) {
  /*
   * After wrapper has stopped being called, this timeout ensures that
   * `callback` is executed at the proper times in `throttle` and `end`
   * debounce modes.
   */
  var timeoutID;
  var cancelled = false; // Keep track of the last time `callback` was executed.

  var lastExec = 0; // Function to clear existing timeout

  function clearExistingTimeout() {
    if (timeoutID) {
      clearTimeout(timeoutID);
    }
  } // Function to cancel next exec


  function cancel() {
    clearExistingTimeout();
    cancelled = true;
  } // `noTrailing` defaults to falsy.


  if (typeof noTrailing !== 'boolean') {
    debounceMode = callback;
    callback = noTrailing;
    noTrailing = undefined;
  }
  /*
   * The `wrapper` function encapsulates all of the throttling / debouncing
   * functionality and when executed will limit the rate at which `callback`
   * is executed.
   */


  function wrapper() {
    for (var _len = arguments.length, arguments_ = new Array(_len), _key = 0; _key < _len; _key++) {
      arguments_[_key] = arguments[_key];
    }

    var self = this;
    var elapsed = Date.now() - lastExec;

    if (cancelled) {
      return;
    } // Execute `callback` and update the `lastExec` timestamp.


    function exec() {
      lastExec = Date.now();
      callback.apply(self, arguments_);
    }
    /*
     * If `debounceMode` is true (at begin) this is used to clear the flag
     * to allow future `callback` executions.
     */


    function clear() {
      timeoutID = undefined;
    }

    if (debounceMode && !timeoutID) {
      /*
       * Since `wrapper` is being called for the first time and
       * `debounceMode` is true (at begin), execute `callback`.
       */
      exec();
    }

    clearExistingTimeout();

    if (debounceMode === undefined && elapsed > delay) {
      /*
       * In throttle mode, if `delay` time has been exceeded, execute
       * `callback`.
       */
      exec();
    } else if (noTrailing !== true) {
      /*
       * In trailing throttle mode, since `delay` time has not been
       * exceeded, schedule `callback` to execute `delay` ms after most
       * recent execution.
       *
       * If `debounceMode` is true (at begin), schedule `clear` to execute
       * after `delay` ms.
       *
       * If `debounceMode` is false (at end), schedule `callback` to
       * execute after `delay` ms.
       */
      timeoutID = setTimeout(debounceMode ? clear : exec, debounceMode === undefined ? delay - elapsed : delay);
    }
  }

  wrapper.cancel = cancel; // Return the wrapper function.

  return wrapper;
}

/* eslint-disable no-undefined */
/**
 * Debounce execution of a function. Debouncing, unlike throttling,
 * guarantees that a function is only executed a single time, either at the
 * very beginning of a series of calls, or at the very end.
 *
 * @param  {number}   delay -         A zero-or-greater delay in milliseconds. For event callbacks, values around 100 or 250 (or even higher) are most useful.
 * @param  {boolean}  [atBegin] -     Optional, defaults to false. If atBegin is false or unspecified, callback will only be executed `delay` milliseconds
 *                                  after the last debounced-function call. If atBegin is true, callback will be executed only at the first debounced-function call.
 *                                  (After the throttled-function has not been called for `delay` milliseconds, the internal counter is reset).
 * @param  {Function} callback -      A function to be executed after delay milliseconds. The `this` context and all arguments are passed through, as-is,
 *                                  to `callback` when the debounced-function is executed.
 *
 * @returns {Function} A new, debounced function.
 */

function debounce (delay, atBegin, callback) {
  return callback === undefined ? throttle(delay, atBegin, false) : throttle(delay, callback, atBegin !== false);
}


//# sourceMappingURL=index.js.map


/***/ }),

/***/ "../node_modules/toggle-selection/index.js":
/*!*************************************************!*\
  !*** ../node_modules/toggle-selection/index.js ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports) {


module.exports = function () {
  var selection = document.getSelection();
  if (!selection.rangeCount) {
    return function () {};
  }
  var active = document.activeElement;

  var ranges = [];
  for (var i = 0; i < selection.rangeCount; i++) {
    ranges.push(selection.getRangeAt(i));
  }

  switch (active.tagName.toUpperCase()) { // .toUpperCase handles XHTML
    case 'INPUT':
    case 'TEXTAREA':
      active.blur();
      break;

    default:
      active = null;
      break;
  }

  selection.removeAllRanges();
  return function () {
    selection.type === 'Caret' &&
    selection.removeAllRanges();

    if (!selection.rangeCount) {
      ranges.forEach(function(range) {
        selection.addRange(range);
      });
    }

    active &&
    active.focus();
  };
};


/***/ }),

/***/ "../node_modules/ts-easing/lib/index.js":
/*!**********************************************!*\
  !*** ../node_modules/ts-easing/lib/index.js ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.easing = {
    // No easing, no acceleration
    linear: function (t) { return t; },
    // Accelerates fast, then slows quickly towards end.
    quadratic: function (t) { return t * (-(t * t) * t + 4 * t * t - 6 * t + 4); },
    // Overshoots over 1 and then returns to 1 towards end.
    cubic: function (t) { return t * (4 * t * t - 9 * t + 6); },
    // Overshoots over 1 multiple times - wiggles around 1.
    elastic: function (t) { return t * (33 * t * t * t * t - 106 * t * t * t + 126 * t * t - 67 * t + 15); },
    // Accelerating from zero velocity
    inQuad: function (t) { return t * t; },
    // Decelerating to zero velocity
    outQuad: function (t) { return t * (2 - t); },
    // Acceleration until halfway, then deceleration
    inOutQuad: function (t) { return t < .5 ? 2 * t * t : -1 + (4 - 2 * t) * t; },
    // Accelerating from zero velocity
    inCubic: function (t) { return t * t * t; },
    // Decelerating to zero velocity
    outCubic: function (t) { return (--t) * t * t + 1; },
    // Acceleration until halfway, then deceleration
    inOutCubic: function (t) { return t < .5 ? 4 * t * t * t : (t - 1) * (2 * t - 2) * (2 * t - 2) + 1; },
    // Accelerating from zero velocity
    inQuart: function (t) { return t * t * t * t; },
    // Decelerating to zero velocity
    outQuart: function (t) { return 1 - (--t) * t * t * t; },
    // Acceleration until halfway, then deceleration
    inOutQuart: function (t) { return t < .5 ? 8 * t * t * t * t : 1 - 8 * (--t) * t * t * t; },
    // Accelerating from zero velocity
    inQuint: function (t) { return t * t * t * t * t; },
    // Decelerating to zero velocity
    outQuint: function (t) { return 1 + (--t) * t * t * t * t; },
    // Acceleration until halfway, then deceleration
    inOutQuint: function (t) { return t < .5 ? 16 * t * t * t * t * t : 1 + 16 * (--t) * t * t * t * t; },
    // Accelerating from zero velocity
    inSine: function (t) { return -Math.cos(t * (Math.PI / 2)) + 1; },
    // Decelerating to zero velocity
    outSine: function (t) { return Math.sin(t * (Math.PI / 2)); },
    // Accelerating until halfway, then decelerating
    inOutSine: function (t) { return -(Math.cos(Math.PI * t) - 1) / 2; },
    // Exponential accelerating from zero velocity
    inExpo: function (t) { return Math.pow(2, 10 * (t - 1)); },
    // Exponential decelerating to zero velocity
    outExpo: function (t) { return -Math.pow(2, -10 * t) + 1; },
    // Exponential accelerating until halfway, then decelerating
    inOutExpo: function (t) {
        t /= .5;
        if (t < 1)
            return Math.pow(2, 10 * (t - 1)) / 2;
        t--;
        return (-Math.pow(2, -10 * t) + 2) / 2;
    },
    // Circular accelerating from zero velocity
    inCirc: function (t) { return -Math.sqrt(1 - t * t) + 1; },
    // Circular decelerating to zero velocity Moves VERY fast at the beginning and
    // then quickly slows down in the middle. This tween can actually be used
    // in continuous transitions where target value changes all the time,
    // because of the very quick start, it hides the jitter between target value changes.
    outCirc: function (t) { return Math.sqrt(1 - (t = t - 1) * t); },
    // Circular acceleration until halfway, then deceleration
    inOutCirc: function (t) {
        t /= .5;
        if (t < 1)
            return -(Math.sqrt(1 - t * t) - 1) / 2;
        t -= 2;
        return (Math.sqrt(1 - t * t) + 1) / 2;
    }
};


/***/ }),

/***/ "../node_modules/tslib/tslib.es6.js":
/*!******************************************!*\
  !*** ../node_modules/tslib/tslib.es6.js ***!
  \******************************************/
/*! exports provided: __extends, __assign, __rest, __decorate, __param, __metadata, __awaiter, __generator, __createBinding, __exportStar, __values, __read, __spread, __spreadArrays, __await, __asyncGenerator, __asyncDelegator, __asyncValues, __makeTemplateObject, __importStar, __importDefault, __classPrivateFieldGet, __classPrivateFieldSet */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__extends", function() { return __extends; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__assign", function() { return __assign; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__rest", function() { return __rest; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__decorate", function() { return __decorate; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__param", function() { return __param; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__metadata", function() { return __metadata; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__awaiter", function() { return __awaiter; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__generator", function() { return __generator; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__createBinding", function() { return __createBinding; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__exportStar", function() { return __exportStar; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__values", function() { return __values; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__read", function() { return __read; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__spread", function() { return __spread; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__spreadArrays", function() { return __spreadArrays; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__await", function() { return __await; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__asyncGenerator", function() { return __asyncGenerator; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__asyncDelegator", function() { return __asyncDelegator; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__asyncValues", function() { return __asyncValues; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__makeTemplateObject", function() { return __makeTemplateObject; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__importStar", function() { return __importStar; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__importDefault", function() { return __importDefault; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__classPrivateFieldGet", function() { return __classPrivateFieldGet; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__classPrivateFieldSet", function() { return __classPrivateFieldSet; });
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
/* global Reflect, Promise */

var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return extendStatics(d, b);
};

function __extends(d, b) {
    extendStatics(d, b);
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
}

var __assign = function() {
    __assign = Object.assign || function __assign(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
        }
        return t;
    }
    return __assign.apply(this, arguments);
}

function __rest(s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
}

function __decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}

function __param(paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
}

function __metadata(metadataKey, metadataValue) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(metadataKey, metadataValue);
}

function __awaiter(thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
}

function __generator(thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
}

function __createBinding(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}

function __exportStar(m, exports) {
    for (var p in m) if (p !== "default" && !exports.hasOwnProperty(p)) exports[p] = m[p];
}

function __values(o) {
    var s = typeof Symbol === "function" && Symbol.iterator, m = s && o[s], i = 0;
    if (m) return m.call(o);
    if (o && typeof o.length === "number") return {
        next: function () {
            if (o && i >= o.length) o = void 0;
            return { value: o && o[i++], done: !o };
        }
    };
    throw new TypeError(s ? "Object is not iterable." : "Symbol.iterator is not defined.");
}

function __read(o, n) {
    var m = typeof Symbol === "function" && o[Symbol.iterator];
    if (!m) return o;
    var i = m.call(o), r, ar = [], e;
    try {
        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);
    }
    catch (error) { e = { error: error }; }
    finally {
        try {
            if (r && !r.done && (m = i["return"])) m.call(i);
        }
        finally { if (e) throw e.error; }
    }
    return ar;
}

function __spread() {
    for (var ar = [], i = 0; i < arguments.length; i++)
        ar = ar.concat(__read(arguments[i]));
    return ar;
}

function __spreadArrays() {
    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;
    for (var r = Array(s), k = 0, i = 0; i < il; i++)
        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)
            r[k] = a[j];
    return r;
};

function __await(v) {
    return this instanceof __await ? (this.v = v, this) : new __await(v);
}

function __asyncGenerator(thisArg, _arguments, generator) {
    if (!Symbol.asyncIterator) throw new TypeError("Symbol.asyncIterator is not defined.");
    var g = generator.apply(thisArg, _arguments || []), i, q = [];
    return i = {}, verb("next"), verb("throw"), verb("return"), i[Symbol.asyncIterator] = function () { return this; }, i;
    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }
    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }
    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }
    function fulfill(value) { resume("next", value); }
    function reject(value) { resume("throw", value); }
    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }
}

function __asyncDelegator(o) {
    var i, p;
    return i = {}, verb("next"), verb("throw", function (e) { throw e; }), verb("return"), i[Symbol.iterator] = function () { return this; }, i;
    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === "return" } : f ? f(v) : v; } : f; }
}

function __asyncValues(o) {
    if (!Symbol.asyncIterator) throw new TypeError("Symbol.asyncIterator is not defined.");
    var m = o[Symbol.asyncIterator], i;
    return m ? m.call(o) : (o = typeof __values === "function" ? __values(o) : o[Symbol.iterator](), i = {}, verb("next"), verb("throw"), verb("return"), i[Symbol.asyncIterator] = function () { return this; }, i);
    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }
    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }
}

function __makeTemplateObject(cooked, raw) {
    if (Object.defineProperty) { Object.defineProperty(cooked, "raw", { value: raw }); } else { cooked.raw = raw; }
    return cooked;
};

function __importStar(mod) {
    if (mod && mod.__esModule) return mod;
    var result = {};
    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];
    result.default = mod;
    return result;
}

function __importDefault(mod) {
    return (mod && mod.__esModule) ? mod : { default: mod };
}

function __classPrivateFieldGet(receiver, privateMap) {
    if (!privateMap.has(receiver)) {
        throw new TypeError("attempted to get private field on non-instance");
    }
    return privateMap.get(receiver);
}

function __classPrivateFieldSet(receiver, privateMap, value) {
    if (!privateMap.has(receiver)) {
        throw new TypeError("attempted to set private field on non-instance");
    }
    privateMap.set(receiver, value);
    return value;
}


/***/ }),

/***/ "./datasource/DataSource.ts":
/*!**********************************!*\
  !*** ./datasource/DataSource.ts ***!
  \**********************************/
/*! exports provided: DataSource */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DataSource", function() { return DataSource; });
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lodash */ "lodash");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @grafana/data */ "@grafana/data");
/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_grafana_data__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! rxjs */ "rxjs");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(rxjs__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! rxjs/operators */ "../node_modules/rxjs/_esm5/operators/index.js");
/* harmony import */ var _grafana_runtime__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @grafana/runtime */ "@grafana/runtime");
/* harmony import */ var _grafana_runtime__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_grafana_runtime__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _tc_monitor_MonitorDatasource__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./tc_monitor/MonitorDatasource */ "./datasource/tc_monitor/MonitorDatasource.ts");
/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./types */ "./datasource/types.ts");
/* harmony import */ var _log_service_LogServiceDataSource__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./log-service/LogServiceDataSource */ "./datasource/log-service/LogServiceDataSource.ts");
/* harmony import */ var _rum_service_RUMServiceDataSource__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./rum-service/RUMServiceDataSource */ "./datasource/rum-service/RUMServiceDataSource.tsx");
/* harmony import */ var _apm_service_APMServiceDataSource__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./apm-service/APMServiceDataSource */ "./datasource/apm-service/APMServiceDataSource.tsx");
/* harmony import */ var _common_constants__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./common/constants */ "./datasource/common/constants.ts");
var __extends = undefined && undefined.__extends || function () {
  var _extendStatics = function extendStatics(d, b) {
    _extendStatics = Object.setPrototypeOf || {
      __proto__: []
    } instanceof Array && function (d, b) {
      d.__proto__ = b;
    } || function (d, b) {
      for (var p in b) {
        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];
      }
    };

    return _extendStatics(d, b);
  };

  return function (d, b) {
    if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");

    _extendStatics(d, b);

    function __() {
      this.constructor = d;
    }

    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();

var __assign = undefined && undefined.__assign || function () {
  __assign = Object.assign || function (t) {
    for (var s, i = 1, n = arguments.length; i < n; i++) {
      s = arguments[i];

      for (var p in s) {
        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
      }
    }

    return t;
  };

  return __assign.apply(this, arguments);
};

var __awaiter = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {
  function adopt(value) {
    return value instanceof P ? value : new P(function (resolve) {
      resolve(value);
    });
  }

  return new (P || (P = Promise))(function (resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }

    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }

    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }

    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};

var __generator = undefined && undefined.__generator || function (thisArg, body) {
  var _ = {
    label: 0,
    sent: function sent() {
      if (t[0] & 1) throw t[1];
      return t[1];
    },
    trys: [],
    ops: []
  },
      f,
      y,
      t,
      g;
  return g = {
    next: verb(0),
    "throw": verb(1),
    "return": verb(2)
  }, typeof Symbol === "function" && (g[Symbol.iterator] = function () {
    return this;
  }), g;

  function verb(n) {
    return function (v) {
      return step([n, v]);
    };
  }

  function step(op) {
    if (f) throw new TypeError("Generator is already executing.");

    while (_) {
      try {
        if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
        if (y = 0, t) op = [op[0] & 2, t.value];

        switch (op[0]) {
          case 0:
          case 1:
            t = op;
            break;

          case 4:
            _.label++;
            return {
              value: op[1],
              done: false
            };

          case 5:
            _.label++;
            y = op[1];
            op = [0];
            continue;

          case 7:
            op = _.ops.pop();

            _.trys.pop();

            continue;

          default:
            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
              _ = 0;
              continue;
            }

            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
              _.label = op[1];
              break;
            }

            if (op[0] === 6 && _.label < t[1]) {
              _.label = t[1];
              t = op;
              break;
            }

            if (t && _.label < t[2]) {
              _.label = t[2];

              _.ops.push(op);

              break;
            }

            if (t[2]) _.ops.pop();

            _.trys.pop();

            continue;
        }

        op = body.call(thisArg, _);
      } catch (e) {
        op = [6, e];
        y = 0;
      } finally {
        f = t = 0;
      }
    }

    if (op[0] & 5) throw op[1];
    return {
      value: op[0] ? op[1] : void 0,
      done: true
    };
  }
};












/** 顶层数据源，内部根据配置与请求情况，请求具体的业务（monitor or logService） */

var DataSource =
/** @class */
function (_super) {
  __extends(DataSource, _super);

  function DataSource(instanceSettings) {
    var _this = _super.call(this, instanceSettings) || this;

    _this.getLogRowContext = function (row, options) {
      return _this.logServiceDataSource.getLogRowContext(row, options);
    };

    _this.showContextToggle = function (row) {
      return false; // return this.logServiceDataSource.showContextToggle(row);
    };

    _this.instanceSettings = instanceSettings;

    if (_common_constants__WEBPACK_IMPORTED_MODULE_10__["IS_DEVELOPMENT_ENVIRONMENT"]) {
      window.tcDatasource = _this;
    }

    _this.monitorDataSource = new _tc_monitor_MonitorDatasource__WEBPACK_IMPORTED_MODULE_5__["TCMonitorDatasource"](_this.instanceSettings, Object(_grafana_runtime__WEBPACK_IMPORTED_MODULE_4__["getBackendSrv"])(), Object(_grafana_runtime__WEBPACK_IMPORTED_MODULE_4__["getTemplateSrv"])());
    _this.monitorDataSource.meta = _this.meta;
    _this.logServiceDataSource = new _log_service_LogServiceDataSource__WEBPACK_IMPORTED_MODULE_7__["LogServiceDataSource"](_this.instanceSettings);
    _this.logServiceDataSource.meta = _this.meta;
    _this.RUMServiceDataSource = new _rum_service_RUMServiceDataSource__WEBPACK_IMPORTED_MODULE_8__["default"](_this.instanceSettings);
    _this.RUMServiceDataSource.meta = _this.meta;
    _this.APMServiceDataSource = new _apm_service_APMServiceDataSource__WEBPACK_IMPORTED_MODULE_9__["default"](_this.instanceSettings);
    _this.APMServiceDataSource.meta = _this.meta;
    return _this;
  }

  DataSource.prototype.query = function (request) {
    var monitorTargets = [];
    var logServiceTargets = [];
    var RUMServiceTargets = [];
    var APMServiceTargets = [];

    for (var _i = 0, _a = request.targets; _i < _a.length; _i++) {
      var target = _a[_i];

      if (target.serviceType === _types__WEBPACK_IMPORTED_MODULE_6__["ServiceType"].logService) {
        logServiceTargets.push(target);
      } else if (target.serviceType === _types__WEBPACK_IMPORTED_MODULE_6__["ServiceType"].RUMService) {
        RUMServiceTargets.push(target);
      } else if (target.serviceType === _types__WEBPACK_IMPORTED_MODULE_6__["ServiceType"].APMService) {
        APMServiceTargets.push(target);
      } else {
        monitorTargets.push(target);
      }
    }

    var EmptyDataQueryResponse = {
      data: [],
      state: _grafana_data__WEBPACK_IMPORTED_MODULE_1__["LoadingState"].Done
    };
    return Object(rxjs__WEBPACK_IMPORTED_MODULE_2__["combineLatest"])([monitorTargets.length ? Object(rxjs__WEBPACK_IMPORTED_MODULE_2__["from"])(this.monitorDataSource.query(__assign(__assign({}, lodash__WEBPACK_IMPORTED_MODULE_0__["clone"](lodash__WEBPACK_IMPORTED_MODULE_0__["omit"](request, 'targets'))), {
      targets: monitorTargets
    }))) : Object(rxjs__WEBPACK_IMPORTED_MODULE_2__["of"])(EmptyDataQueryResponse), logServiceTargets.length ? this.logServiceDataSource.query(__assign(__assign({}, lodash__WEBPACK_IMPORTED_MODULE_0__["clone"](lodash__WEBPACK_IMPORTED_MODULE_0__["omit"](request, 'targets'))), {
      targets: logServiceTargets
    })) : Object(rxjs__WEBPACK_IMPORTED_MODULE_2__["of"])(EmptyDataQueryResponse), RUMServiceTargets.length ? this.RUMServiceDataSource.query(__assign(__assign({}, lodash__WEBPACK_IMPORTED_MODULE_0__["clone"](lodash__WEBPACK_IMPORTED_MODULE_0__["omit"](request, 'targets'))), {
      targets: RUMServiceTargets
    })) : Object(rxjs__WEBPACK_IMPORTED_MODULE_2__["of"])(EmptyDataQueryResponse), APMServiceTargets.length ? this.APMServiceDataSource.query(__assign(__assign({}, lodash__WEBPACK_IMPORTED_MODULE_0__["clone"](lodash__WEBPACK_IMPORTED_MODULE_0__["omit"](request, 'targets'))), {
      targets: APMServiceTargets
    })) : Object(rxjs__WEBPACK_IMPORTED_MODULE_2__["of"])(EmptyDataQueryResponse)]).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_3__["map"])(function (responses) {
      var errResponse = responses.find(function (item) {
        return item.state === _grafana_data__WEBPACK_IMPORTED_MODULE_1__["LoadingState"].Error;
      });

      if (errResponse) {
        return errResponse;
      }

      if (!responses.every(function (item) {
        return item.state === _grafana_data__WEBPACK_IMPORTED_MODULE_1__["LoadingState"].Done;
      })) {
        return {
          data: [],
          state: _grafana_data__WEBPACK_IMPORTED_MODULE_1__["LoadingState"].Loading
        };
      }

      return {
        data: responses.map(function (item) {
          return item.data;
        }).flat(1),
        state: _grafana_data__WEBPACK_IMPORTED_MODULE_1__["LoadingState"].Done
      };
    }));
  };

  DataSource.prototype.testDatasource = function () {
    return __awaiter(this, void 0, void 0, function () {
      var serviceTestResults, failedResult;
      return __generator(this, function (_a) {
        switch (_a.label) {
          case 0:
            return [4
            /*yield*/
            , Promise.all([this.monitorDataSource.testDatasource(), this.logServiceDataSource.testDatasource(), this.RUMServiceDataSource.testDatasource(), this.APMServiceDataSource.testDatasource()])];

          case 1:
            serviceTestResults = _a.sent().filter(Boolean);

            if (serviceTestResults.length === 0) {
              return [2
              /*return*/
              , {
                status: 'error',
                message: "Nothing configured. At least one of the API's services must be configured."
              }];
            }

            failedResult = serviceTestResults.find(function (item) {
              return (item === null || item === void 0 ? void 0 : item.status) !== 'success';
            });

            if (failedResult) {
              return [2
              /*return*/
              , failedResult];
            } else {
              return [2
              /*return*/
              , serviceTestResults[0]];
            }

            return [2
            /*return*/
            ];
        }
      });
    });
  };

  DataSource.prototype.metricFindQuery = function (query, options) {
    return __awaiter(this, void 0, Promise, function () {
      return __generator(this, function (_a) {
        if (lodash__WEBPACK_IMPORTED_MODULE_0__["isString"](query) || query.serviceType === _types__WEBPACK_IMPORTED_MODULE_6__["ServiceType"].monitor) {
          return [2
          /*return*/
          , this.monitorDataSource.metricFindQuery(lodash__WEBPACK_IMPORTED_MODULE_0__["isString"](query) ? query : query.queryString, options)];
        }

        if (query.serviceType === _types__WEBPACK_IMPORTED_MODULE_6__["ServiceType"].logService) {
          return [2
          /*return*/
          , this.logServiceDataSource.metricFindQuery(query.logServiceParams, options)];
        }

        if (query.serviceType === _types__WEBPACK_IMPORTED_MODULE_6__["ServiceType"].RUMService) {
          return [2
          /*return*/
          , this.RUMServiceDataSource.metricFindQuery(query.queryString, options)];
        }

        if (query.serviceType === _types__WEBPACK_IMPORTED_MODULE_6__["ServiceType"].APMService) {
          return [2
          /*return*/
          , this.APMServiceDataSource.metricFindQuery(query.queryString, options)];
        }

        return [2
        /*return*/
        , []];
      });
    });
  };

  return DataSource;
}(_grafana_runtime__WEBPACK_IMPORTED_MODULE_4__["DataSourceWithBackend"]);



/***/ }),

/***/ "./datasource/QueryEditor.tsx":
/*!************************************!*\
  !*** ./datasource/QueryEditor.tsx ***!
  \************************************/
/*! exports provided: QueryEditor */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "QueryEditor", function() { return QueryEditor; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _query_ctrl_query_ctrl__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./query-ctrl/query.ctrl */ "./datasource/query-ctrl/query.ctrl.ts");
/* harmony import */ var _query_ctrl_QueryCtrlRender__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./query-ctrl/QueryCtrlRender */ "./datasource/query-ctrl/QueryCtrlRender.tsx");
/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./types */ "./datasource/types.ts");
/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @grafana/ui */ "@grafana/ui");
/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_grafana_ui__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _log_service_LogServiceQueryEditor__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./log-service/LogServiceQueryEditor */ "./datasource/log-service/LogServiceQueryEditor.tsx");
/* harmony import */ var _rum_service_RUMServiceQueryEditor__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./rum-service/RUMServiceQueryEditor */ "./datasource/rum-service/RUMServiceQueryEditor.tsx");
/* harmony import */ var _apm_service_APMServiceQueryEditor__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./apm-service/APMServiceQueryEditor */ "./datasource/apm-service/APMServiceQueryEditor.tsx");
/* harmony import */ var _locale__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../locale */ "./locale/index.ts");
/* harmony import */ var _common_constants__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./common/constants */ "./datasource/common/constants.ts");
var __extends = undefined && undefined.__extends || function () {
  var _extendStatics = function extendStatics(d, b) {
    _extendStatics = Object.setPrototypeOf || {
      __proto__: []
    } instanceof Array && function (d, b) {
      d.__proto__ = b;
    } || function (d, b) {
      for (var p in b) {
        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];
      }
    };

    return _extendStatics(d, b);
  };

  return function (d, b) {
    if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");

    _extendStatics(d, b);

    function __() {
      this.constructor = d;
    }

    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();

var __assign = undefined && undefined.__assign || function () {
  __assign = Object.assign || function (t) {
    for (var s, i = 1, n = arguments.length; i < n; i++) {
      s = arguments[i];

      for (var p in s) {
        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
      }
    }

    return t;
  };

  return __assign.apply(this, arguments);
};












var QueryEditor =
/** @class */
function (_super) {
  __extends(QueryEditor, _super);

  function QueryEditor(props) {
    var _this = _super.call(this, props) || this;

    _this.state = {
      isAlertVisiable: false
    };

    _this.partialOnChange = function (queryInfo) {
      var _a = _this.props,
          onChange = _a.onChange,
          oldQuery = _a.query; // @ts-ignore

      var app = _this.props.app;

      var newQuery = __assign(__assign({}, oldQuery), queryInfo);

      if (app === _common_constants__WEBPACK_IMPORTED_MODULE_9__["CoreApp"].UnifiedAlerting) {
        //  告警页面
        if (newQuery.serviceType === _types__WEBPACK_IMPORTED_MODULE_3__["ServiceType"].logService) {
          onChange(newQuery);

          _this.setState({
            isAlertVisiable: false
          });
        } else {
          _this.setState({
            isAlertVisiable: true
          });
        }
      } else {
        onChange(newQuery);
      }
    };

    Object(_locale__WEBPACK_IMPORTED_MODULE_8__["setLanguage"])(props.datasource.instanceSettings.jsonData.language || _locale__WEBPACK_IMPORTED_MODULE_8__["Language"].Chinese);
    return _this;
  }

  QueryEditor.prototype.componentDidMount = function () {
    var query = this.props.query; // @ts-ignore

    var app = this.props.app;

    if (app === _common_constants__WEBPACK_IMPORTED_MODULE_9__["CoreApp"].UnifiedAlerting) {
      //  告警页面
      this.partialOnChange({
        serviceType: _types__WEBPACK_IMPORTED_MODULE_3__["ServiceType"].logService
      });
      return;
    }

    var firstEnabledService = this.enabledServices[0];

    if (!query.serviceType && firstEnabledService) {
      this.partialOnChange({
        serviceType: firstEnabledService
      });
    }
  };

  Object.defineProperty(QueryEditor.prototype, "enabledServices", {
    get: function get() {
      var datasource = this.props.datasource;
      var monitorEnabled = (datasource === null || datasource === void 0 ? void 0 : datasource.monitorDataSource.getNamespaces().length) > 0;
      var logServiceEnabled = Boolean(datasource === null || datasource === void 0 ? void 0 : datasource.instanceSettings.jsonData['logServiceEnabled']);
      var RUMServiceEnabled = Boolean(datasource === null || datasource === void 0 ? void 0 : datasource.instanceSettings.jsonData['RUMServiceEnabled']);
      var APMServiceEnabled = Boolean(datasource === null || datasource === void 0 ? void 0 : datasource.instanceSettings.jsonData['APMServiceEnabled']);
      return [monitorEnabled && _types__WEBPACK_IMPORTED_MODULE_3__["ServiceType"].monitor, logServiceEnabled && _types__WEBPACK_IMPORTED_MODULE_3__["ServiceType"].logService, RUMServiceEnabled && _types__WEBPACK_IMPORTED_MODULE_3__["ServiceType"].RUMService, APMServiceEnabled && _types__WEBPACK_IMPORTED_MODULE_3__["ServiceType"].APMService].filter(Boolean);
    },
    enumerable: false,
    configurable: true
  });

  QueryEditor.prototype.render = function () {
    var _this = this;

    var _a = this.props,
        datasource = _a.datasource,
        queryInfo = _a.query;
    var isAlertVisiable = this.state.isAlertVisiable;

    if (!datasource) {
      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", null, "loading");
    }

    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", null, this.enabledServices.length > 1 && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_4__["TabsBar"], null, _types__WEBPACK_IMPORTED_MODULE_3__["ServiceTypeOptions"].filter(function (item) {
      return _this.enabledServices.includes(item.value);
    }).map(function (item) {
      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_4__["Tab"], {
        key: item.value,
        label: item.label,
        active: queryInfo.serviceType === item.value,
        onChangeTab: function onChangeTab() {
          _this.partialOnChange({
            serviceType: item.value
          });
        }
      });
    })), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_4__["TabContent"], null, queryInfo.serviceType === _types__WEBPACK_IMPORTED_MODULE_3__["ServiceType"].monitor && this.renderMonitorQueryEditor(), queryInfo.serviceType === _types__WEBPACK_IMPORTED_MODULE_3__["ServiceType"].logService && this.renderLogServiceQueryEditor(), queryInfo.serviceType === _types__WEBPACK_IMPORTED_MODULE_3__["ServiceType"].RUMService && this.renderRUMServiceQueryEditor(), queryInfo.serviceType === _types__WEBPACK_IMPORTED_MODULE_3__["ServiceType"].APMService && this.renderAPMServiceQueryEditor()), isAlertVisiable && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_4__["Alert"], {
      title: "\u76EE\u524D\u4EC5 CLS\u65E5\u5FD7\u670D\u52A1 \u6570\u636E\u6E90\u652F\u6301\u544A\u8B66"
    }));
  };

  QueryEditor.prototype.renderMonitorQueryEditor = function () {
    var monitorDataSource = this.props.datasource.monitorDataSource;
    return monitorDataSource && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_query_ctrl_QueryCtrlRender__WEBPACK_IMPORTED_MODULE_2__["QueryCtrlRender"], __assign({}, this.props, {
      queryCtrl: _query_ctrl_query_ctrl__WEBPACK_IMPORTED_MODULE_1__["TCMonitorDatasourceQueryCtrl"],
      datasource: monitorDataSource
    }));
  };

  QueryEditor.prototype.renderLogServiceQueryEditor = function () {
    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_log_service_LogServiceQueryEditor__WEBPACK_IMPORTED_MODULE_5__["LogServiceQueryEditor"], __assign({}, this.props));
  };

  QueryEditor.prototype.renderRUMServiceQueryEditor = function () {
    var _a = this.props,
        query = _a.query,
        onChange = _a.onChange,
        onRunQuery = _a.onRunQuery,
        datasource = _a.datasource;
    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_rum_service_RUMServiceQueryEditor__WEBPACK_IMPORTED_MODULE_6__["RUMServiceQueryEditor"], {
      query: query,
      onChange: onChange,
      onRunQuery: onRunQuery,
      datasource: datasource
    });
  };

  QueryEditor.prototype.renderAPMServiceQueryEditor = function () {
    var _a = this.props,
        query = _a.query,
        onChange = _a.onChange,
        onRunQuery = _a.onRunQuery,
        datasource = _a.datasource;
    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_apm_service_APMServiceQueryEditor__WEBPACK_IMPORTED_MODULE_7__["APMServiceQueryEditor"], {
      query: query,
      onChange: onChange,
      onRunQuery: onRunQuery,
      datasource: datasource
    });
  };

  return QueryEditor;
}(react__WEBPACK_IMPORTED_MODULE_0__["PureComponent"]);



/***/ }),

/***/ "./datasource/VariableQueryEditor.tsx":
/*!********************************************!*\
  !*** ./datasource/VariableQueryEditor.tsx ***!
  \********************************************/
/*! exports provided: VariableQueryEditor */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VariableQueryEditor", function() { return VariableQueryEditor; });
/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @grafana/ui */ "@grafana/ui");
/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_grafana_ui__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./types */ "./datasource/types.ts");
/* harmony import */ var _log_service_LogServiceQueryEditor__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./log-service/LogServiceQueryEditor */ "./datasource/log-service/LogServiceQueryEditor.tsx");
/* harmony import */ var react_use__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react-use */ "../node_modules/react-use/esm/index.js");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! lodash */ "lodash");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_5__);







var InfoPopver = function InfoPopver() {
  return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("a", {
    target: "_blank",
    href: "https://cloud.tencent.com/document/product/248/54510"
  }, "Click here for more information of query");
};

var VariableQueryEditor = function VariableQueryEditor(props) {
  var propsRef = Object(react_use__WEBPACK_IMPORTED_MODULE_4__["useLatest"])(props);
  var query = props.query,
      datasource = props.datasource;
  var onQueryChange = Object(react__WEBPACK_IMPORTED_MODULE_1__["useCallback"])(function (newQuery) {
    var _a;

    var onChange = propsRef.current.onChange;
    var definition;

    if (newQuery.serviceType === _types__WEBPACK_IMPORTED_MODULE_2__["ServiceType"].logService) {
      definition = "SQL:  ".concat((_a = newQuery.logServiceParams) === null || _a === void 0 ? void 0 : _a.Query);
    } else {
      definition = newQuery.queryString;
    }

    onChange === null || onChange === void 0 ? void 0 : onChange(newQuery, definition);
  }, [propsRef]);
  return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Fragment, null, react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_0__["InlineFieldRow"], null, react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_0__["InlineField"], {
    label: "\u670D\u52A1\u7C7B\u578B",
    labelWidth: 20
  }, react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_0__["RadioButtonGroup"], {
    options: _types__WEBPACK_IMPORTED_MODULE_2__["ServiceTypeOptions"],
    value: Object(lodash__WEBPACK_IMPORTED_MODULE_5__["isString"])(query) ? _types__WEBPACK_IMPORTED_MODULE_2__["ServiceType"].monitor : query.serviceType,
    onChange: function onChange(type) {
      if (type === _types__WEBPACK_IMPORTED_MODULE_2__["ServiceType"].monitor) {
        onQueryChange({
          serviceType: type,
          queryString: ''
        });
      }

      if (type === _types__WEBPACK_IMPORTED_MODULE_2__["ServiceType"].logService) {
        onQueryChange({
          serviceType: type,
          queryString: '',
          logServiceParams: Object(lodash__WEBPACK_IMPORTED_MODULE_5__["clone"])(_types__WEBPACK_IMPORTED_MODULE_2__["defaultQueryInfo"].logServiceParams)
        });
      }

      if (type === _types__WEBPACK_IMPORTED_MODULE_2__["ServiceType"].RUMService) {
        onQueryChange({
          serviceType: type,
          queryString: ''
        });
      }

      if (type === _types__WEBPACK_IMPORTED_MODULE_2__["ServiceType"].APMService) {
        onQueryChange({
          serviceType: type,
          queryString: ''
        });
      }
    }
  }))), query.serviceType === _types__WEBPACK_IMPORTED_MODULE_2__["ServiceType"].logService && react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Fragment, null, react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_log_service_LogServiceQueryEditor__WEBPACK_IMPORTED_MODULE_3__["LogServiceQueryEditor"], {
    datasource: datasource,
    query: query,
    onRunQuery: function onRunQuery() {},
    onChange: function onChange(v) {
      onQueryChange({
        serviceType: _types__WEBPACK_IMPORTED_MODULE_2__["ServiceType"].logService,
        queryString: '',
        logServiceParams: v.logServiceParams
      });
    }
  })), query.serviceType === _types__WEBPACK_IMPORTED_MODULE_2__["ServiceType"].RUMService && react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_0__["InlineFieldRow"], null, react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_0__["InlineField"], {
    label: "\u67E5\u8BE2\u8BED\u53E5",
    labelWidth: 20,
    grow: true,
    tooltip: InfoPopver
  }, react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_0__["Input"], {
    name: "query",
    required: true,
    placeholder: "metric name or tags query",
    onChange: function onChange(e) {
      return onQueryChange({
        serviceType: _types__WEBPACK_IMPORTED_MODULE_2__["ServiceType"].RUMService,
        queryString: e.currentTarget.value
      });
    },
    value: Object(lodash__WEBPACK_IMPORTED_MODULE_5__["isString"])(query) ? query : query.queryString
  }))), query.serviceType === _types__WEBPACK_IMPORTED_MODULE_2__["ServiceType"].APMService && react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_0__["InlineFieldRow"], null, react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_0__["InlineField"], {
    label: "\u67E5\u8BE2\u8BED\u53E5",
    labelWidth: 20,
    grow: true,
    tooltip: InfoPopver
  }, react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_0__["Input"], {
    name: "query",
    required: true,
    placeholder: "metric name or tags query",
    onChange: function onChange(e) {
      return onQueryChange({
        serviceType: _types__WEBPACK_IMPORTED_MODULE_2__["ServiceType"].APMService,
        queryString: e.currentTarget.value
      });
    },
    value: Object(lodash__WEBPACK_IMPORTED_MODULE_5__["isString"])(query) ? query : query.queryString
  }))), (Object(lodash__WEBPACK_IMPORTED_MODULE_5__["isString"])(query) || query.serviceType === _types__WEBPACK_IMPORTED_MODULE_2__["ServiceType"].monitor) && react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_0__["InlineFieldRow"], null, react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_0__["InlineField"], {
    label: "\u67E5\u8BE2\u8BED\u53E5",
    labelWidth: 20,
    grow: true,
    tooltip: InfoPopver
  }, react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_0__["Input"], {
    name: "query",
    required: true,
    onChange: function onChange(e) {
      return onQueryChange({
        serviceType: _types__WEBPACK_IMPORTED_MODULE_2__["ServiceType"].monitor,
        queryString: e.currentTarget.value
      });
    },
    value: Object(lodash__WEBPACK_IMPORTED_MODULE_5__["isString"])(query) ? query : query.queryString
  }))));
};
VariableQueryEditor.displayName = 'VariableQueryEditor';

/***/ }),

/***/ "./datasource/apm-service/APMMetadataQuery.ts":
/*!****************************************************!*\
  !*** ./datasource/apm-service/APMMetadataQuery.ts ***!
  \****************************************************/
/*! exports provided: getAllPolicies, getAllMeasurementsForTags, getTagKeysForMeasurementAndTags, getTagValues, getFieldKeysForMeasurement */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getAllPolicies", function() { return getAllPolicies; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getAllMeasurementsForTags", function() { return getAllMeasurementsForTags; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getTagKeysForMeasurementAndTags", function() { return getTagKeysForMeasurementAndTags; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getTagValues", function() { return getTagValues; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getFieldKeysForMeasurement", function() { return getFieldKeysForMeasurement; });
/* harmony import */ var _query_builder__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./query_builder */ "./datasource/apm-service/query_builder.ts");
/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../types */ "./datasource/types.ts");
var __awaiter = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {
  function adopt(value) {
    return value instanceof P ? value : new P(function (resolve) {
      resolve(value);
    });
  }

  return new (P || (P = Promise))(function (resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }

    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }

    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }

    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};

var __generator = undefined && undefined.__generator || function (thisArg, body) {
  var _ = {
    label: 0,
    sent: function sent() {
      if (t[0] & 1) throw t[1];
      return t[1];
    },
    trys: [],
    ops: []
  },
      f,
      y,
      t,
      g;
  return g = {
    next: verb(0),
    "throw": verb(1),
    "return": verb(2)
  }, typeof Symbol === "function" && (g[Symbol.iterator] = function () {
    return this;
  }), g;

  function verb(n) {
    return function (v) {
      return step([n, v]);
    };
  }

  function step(op) {
    if (f) throw new TypeError("Generator is already executing.");

    while (_) {
      try {
        if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
        if (y = 0, t) op = [op[0] & 2, t.value];

        switch (op[0]) {
          case 0:
          case 1:
            t = op;
            break;

          case 4:
            _.label++;
            return {
              value: op[1],
              done: false
            };

          case 5:
            _.label++;
            y = op[1];
            op = [0];
            continue;

          case 7:
            op = _.ops.pop();

            _.trys.pop();

            continue;

          default:
            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
              _ = 0;
              continue;
            }

            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
              _.label = op[1];
              break;
            }

            if (op[0] === 6 && _.label < t[1]) {
              _.label = t[1];
              t = op;
              break;
            }

            if (t && _.label < t[2]) {
              _.label = t[2];

              _.ops.push(op);

              break;
            }

            if (t[2]) _.ops.pop();

            _.trys.pop();

            continue;
        }

        op = body.call(thisArg, _);
      } catch (e) {
        op = [6, e];
        y = 0;
      } finally {
        f = t = 0;
      }
    }

    if (op[0] & 5) throw op[1];
    return {
      value: op[0] ? op[1] : void 0,
      done: true
    };
  }
};




var runExploreQuery = function runExploreQuery(type, withKey, withMeasurementFilter, target, datasource) {
  var builder = new _query_builder__WEBPACK_IMPORTED_MODULE_0__["APMQueryBuilder"](target);
  var q = builder.buildExploreQuery(type, withKey, withMeasurementFilter);
  return datasource.metricFindQuery({
    serviceType: _types__WEBPACK_IMPORTED_MODULE_1__["ServiceType"].APMService,
    queryString: q
  }, undefined);
};

function getAllPolicies(datasource) {
  return __awaiter(this, void 0, Promise, function () {
    var target, data;
    return __generator(this, function (_a) {
      switch (_a.label) {
        case 0:
          target = {
            tags: [],
            measurement: undefined,
            policy: undefined
          };
          return [4
          /*yield*/
          , runExploreQuery('RETENTION POLICIES', undefined, undefined, target, datasource)];

        case 1:
          data = _a.sent();
          return [2
          /*return*/
          , data.map(function (item) {
            return item.text;
          })];
      }
    });
  });
}
function getAllMeasurementsForTags(measurementFilter, tags, datasource) {
  return __awaiter(this, void 0, Promise, function () {
    var target, data;
    return __generator(this, function (_a) {
      switch (_a.label) {
        case 0:
          target = {
            tags: tags,
            measurement: undefined,
            policy: undefined
          };
          return [4
          /*yield*/
          , runExploreQuery('MEASUREMENTS', undefined, measurementFilter, target, datasource)];

        case 1:
          data = _a.sent();
          return [2
          /*return*/
          , data.map(function (item) {
            return item.text;
          })];
      }
    });
  });
}
function getTagKeysForMeasurementAndTags(measurement, policy, tags, datasource) {
  return __awaiter(this, void 0, Promise, function () {
    var target, data;
    return __generator(this, function (_a) {
      switch (_a.label) {
        case 0:
          target = {
            tags: tags,
            measurement: measurement,
            policy: policy
          };
          return [4
          /*yield*/
          , runExploreQuery('TAG_KEYS', undefined, undefined, target, datasource)];

        case 1:
          data = _a.sent();
          return [2
          /*return*/
          , data.map(function (item) {
            return item.text;
          })];
      }
    });
  });
}
function getTagValues(tagKey, measurement, policy, tags, datasource) {
  return __awaiter(this, void 0, Promise, function () {
    var target, data;
    return __generator(this, function (_a) {
      switch (_a.label) {
        case 0:
          target = {
            tags: tags,
            measurement: measurement,
            policy: policy
          };
          return [4
          /*yield*/
          , runExploreQuery('TAG_VALUES', tagKey, undefined, target, datasource)];

        case 1:
          data = _a.sent();
          return [2
          /*return*/
          , data.map(function (item) {
            return item.text;
          })];
      }
    });
  });
}
function getFieldKeysForMeasurement(measurement, policy, datasource) {
  return __awaiter(this, void 0, Promise, function () {
    var target, data;
    return __generator(this, function (_a) {
      switch (_a.label) {
        case 0:
          target = {
            tags: [],
            measurement: measurement,
            policy: policy
          };
          return [4
          /*yield*/
          , runExploreQuery('FIELDS', undefined, undefined, target, datasource)];

        case 1:
          data = _a.sent();
          return [2
          /*return*/
          , data.map(function (item) {
            return item.text;
          })];
      }
    });
  });
}

/***/ }),

/***/ "./datasource/apm-service/APMServiceDataSource.tsx":
/*!*********************************************************!*\
  !*** ./datasource/apm-service/APMServiceDataSource.tsx ***!
  \*********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* WEBPACK VAR INJECTION */(function(Buffer) {/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lodash */ "lodash");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! rxjs */ "rxjs");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(rxjs__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! rxjs/operators */ "../node_modules/rxjs/_esm5/operators/index.js");
/* harmony import */ var _grafana_runtime__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @grafana/runtime */ "@grafana/runtime");
/* harmony import */ var _grafana_runtime__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_grafana_runtime__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @grafana/data */ "@grafana/data");
/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_grafana_data__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _APM_query_model__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./APM_query_model */ "./datasource/apm-service/APM_query_model.ts");
/* harmony import */ var _APM_series__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./APM_series */ "./datasource/apm-service/APM_series.ts");
/* harmony import */ var _response_parser__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./response_parser */ "./datasource/apm-service/response_parser.ts");
/* harmony import */ var _common_constants__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../common/constants */ "./datasource/common/constants.ts");
/* harmony import */ var _query_builder__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./query_builder */ "./datasource/apm-service/query_builder.ts");
function _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

var __extends = undefined && undefined.__extends || function () {
  var _extendStatics = function extendStatics(d, b) {
    _extendStatics = Object.setPrototypeOf || {
      __proto__: []
    } instanceof Array && function (d, b) {
      d.__proto__ = b;
    } || function (d, b) {
      for (var p in b) {
        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];
      }
    };

    return _extendStatics(d, b);
  };

  return function (d, b) {
    if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");

    _extendStatics(d, b);

    function __() {
      this.constructor = d;
    }

    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();

var __awaiter = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {
  function adopt(value) {
    return value instanceof P ? value : new P(function (resolve) {
      resolve(value);
    });
  }

  return new (P || (P = Promise))(function (resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }

    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }

    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }

    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};

var __generator = undefined && undefined.__generator || function (thisArg, body) {
  var _ = {
    label: 0,
    sent: function sent() {
      if (t[0] & 1) throw t[1];
      return t[1];
    },
    trys: [],
    ops: []
  },
      f,
      y,
      t,
      g;
  return g = {
    next: verb(0),
    "throw": verb(1),
    "return": verb(2)
  }, typeof Symbol === "function" && (g[Symbol.iterator] = function () {
    return this;
  }), g;

  function verb(n) {
    return function (v) {
      return step([n, v]);
    };
  }

  function step(op) {
    if (f) throw new TypeError("Generator is already executing.");

    while (_) {
      try {
        if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
        if (y = 0, t) op = [op[0] & 2, t.value];

        switch (op[0]) {
          case 0:
          case 1:
            t = op;
            break;

          case 4:
            _.label++;
            return {
              value: op[1],
              done: false
            };

          case 5:
            _.label++;
            y = op[1];
            op = [0];
            continue;

          case 7:
            op = _.ops.pop();

            _.trys.pop();

            continue;

          default:
            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
              _ = 0;
              continue;
            }

            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
              _.label = op[1];
              break;
            }

            if (op[0] === 6 && _.label < t[1]) {
              _.label = t[1];
              t = op;
              break;
            }

            if (t && _.label < t[2]) {
              _.label = t[2];

              _.ops.push(op);

              break;
            }

            if (t[2]) _.ops.pop();

            _.trys.pop();

            continue;
        }

        op = body.call(thisArg, _);
      } catch (e) {
        op = [6, e];
        y = 0;
      } finally {
        f = t = 0;
      }
    }

    if (op[0] & 5) throw op[1];
    return {
      value: op[0] ? op[1] : void 0,
      done: true
    };
  }
};










 // we detect the field type based on the value-array

function getFieldType(values) {
  // the values-array may contain a lot of nulls.
  // we need the first not-null item
  var firstNotNull = values.find(function (v) {
    return v !== null;
  });

  if (firstNotNull === undefined) {
    // we could not find any not-null values
    return _grafana_data__WEBPACK_IMPORTED_MODULE_4__["FieldType"].number;
  }

  var valueType = _typeof(firstNotNull);

  switch (valueType) {
    case 'string':
      return _grafana_data__WEBPACK_IMPORTED_MODULE_4__["FieldType"].string;

    case 'boolean':
      return _grafana_data__WEBPACK_IMPORTED_MODULE_4__["FieldType"]["boolean"];

    case 'number':
      return _grafana_data__WEBPACK_IMPORTED_MODULE_4__["FieldType"].number;

    default:
      throw new Error("APM: invalid value type ".concat(valueType));
  }
} // this conversion function is specialized to work with the timeseries
// data returned by getTimeSeries()


function timeSeriesToDataFrame(timeSeries) {
  var times = [];
  var values = []; // the data we process here is not correctly typed.
  // the typescript types say every data-point is number|null,
  // but in fact it can be string or boolean too.

  var points = timeSeries.datapoints;

  for (var _i = 0, points_1 = points; _i < points_1.length; _i++) {
    var point = points_1[_i];
    values.push(point[0]);
    times.push(Number("".concat(point[1], "000")));
  }

  var timeField = {
    name: _grafana_data__WEBPACK_IMPORTED_MODULE_4__["TIME_SERIES_TIME_FIELD_NAME"],
    type: _grafana_data__WEBPACK_IMPORTED_MODULE_4__["FieldType"].time,
    config: {},
    values: new _grafana_data__WEBPACK_IMPORTED_MODULE_4__["ArrayVector"](times)
  };
  var valueField = {
    name: _grafana_data__WEBPACK_IMPORTED_MODULE_4__["TIME_SERIES_VALUE_FIELD_NAME"],
    type: getFieldType(values),
    config: {
      displayNameFromDS: timeSeries.title
    },
    values: new _grafana_data__WEBPACK_IMPORTED_MODULE_4__["ArrayVector"](values),
    labels: timeSeries.tags
  };
  var fields = [timeField, valueField];
  return {
    name: timeSeries.target,
    refId: timeSeries.refId,
    meta: timeSeries.meta,
    fields: fields,
    length: values.length
  };
}

var APMServiceDataSource =
/** @class */
function (_super) {
  __extends(APMServiceDataSource, _super);

  function APMServiceDataSource(instanceSettings) {
    var _this = _super.call(this, instanceSettings) || this;

    _this.instanceSettings = instanceSettings;
    _this.templateSrv = Object(_grafana_runtime__WEBPACK_IMPORTED_MODULE_3__["getTemplateSrv"])();
    _this.responseParser = new _response_parser__WEBPACK_IMPORTED_MODULE_7__["default"]();
    _this.type = 'APMService';
    return _this;
  }

  APMServiceDataSource.prototype.query = function (request) {
    return this.classicQuery(request);
  };

  APMServiceDataSource.prototype.classicQuery = function (options) {
    var _this = this;

    var timeFilter = this.getTimeFilter(options);
    var scopedVars = options.scopedVars;
    var targets = Object(lodash__WEBPACK_IMPORTED_MODULE_0__["cloneDeep"])(options.targets);
    var queryTargets = [];
    var i;
    var y;

    var allQueries = Object(lodash__WEBPACK_IMPORTED_MODULE_0__["map"])(targets, function (target) {
      if (target.hide) {
        return '';
      }

      if (target.APMServiceParams.custom) {
        return target.APMServiceParams.custom;
      }

      target.APMServiceParams = _this.fixTimePeriod(target.APMServiceParams, options);
      queryTargets.push(target); // backward compatibility

      scopedVars.interval = scopedVars.__interval;
      return new _APM_query_model__WEBPACK_IMPORTED_MODULE_5__["default"](target.APMServiceParams, _this.templateSrv, scopedVars).render(true);
    }).reduce(function (acc, current) {
      if (current !== '') {
        acc += ';' + current;
      }

      return acc;
    });

    if (allQueries === '') {
      return Object(rxjs__WEBPACK_IMPORTED_MODULE_1__["of"])({
        data: []
      });
    } // add global adhoc filters to timeFilter
    // @ts-ignore


    var adhocFilters = this.templateSrv.getAdhocFilters(this.name);

    if (adhocFilters.length > 0) {
      var tmpQuery = new _APM_query_model__WEBPACK_IMPORTED_MODULE_5__["default"]({}, this.templateSrv, scopedVars);
      timeFilter += ' AND ' + tmpQuery.renderAdhocFilters(adhocFilters);
    } // replace grafana variables


    scopedVars.timeFilter = {
      value: timeFilter
    }; // replace templated variables

    allQueries = this.templateSrv.replace(allQueries, scopedVars);
    return this._seriesQuery(allQueries, options).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_2__["map"])(function (data) {
      if (!data || !data.results) {
        return {
          data: []
        };
      }

      var seriesList = [];

      for (i = 0; i < data.results.length; i++) {
        var result = data.results[i];

        if (!result || !result.series) {
          continue;
        }

        var target = queryTargets[i];
        var alias = target.APMServiceParams.alias;

        if (alias) {
          alias = _this.templateSrv.replace(target.APMServiceParams.alias, options.scopedVars);
        }

        var meta = {
          executedQueryString: data.executedQueryString
        };
        var apmSeries = new _APM_series__WEBPACK_IMPORTED_MODULE_6__["default"]({
          refId: target.refId,
          series: data.results[i].series,
          alias: alias,
          meta: meta
        });

        switch (target.APMServiceParams.resultFormat) {
          case 'logs':
            meta.preferredVisualisationType = 'logs';
          // eslint-disable-next-line no-fallthrough

          case 'table':
            {
              seriesList.push(apmSeries.getTable());
              break;
            }

          default:
            {
              var timeSeries = apmSeries.getTimeSeries();

              for (y = 0; y < timeSeries.length; y++) {
                seriesList.push(timeSeriesToDataFrame(timeSeries[y]));
              }

              break;
            }
        }
      }

      return {
        data: seriesList,
        state: _grafana_data__WEBPACK_IMPORTED_MODULE_4__["LoadingState"].Done
      };
    }));
  };

  APMServiceDataSource.prototype.metricFindQuery = function (query, options) {
    return __awaiter(this, void 0, Promise, function () {
      var interpolated;

      var _this = this;

      return __generator(this, function (_a) {
        interpolated = this.templateSrv.replace(query, undefined, 'regex');
        return [2
        /*return*/
        , this._seriesQuery(interpolated, options).toPromise().then(function (resp) {
          return _this.responseParser.parse(query, resp);
        })];
      });
    });
  };

  APMServiceDataSource.prototype._seriesQuery = function (query, options) {
    if (!query) {
      return Object(rxjs__WEBPACK_IMPORTED_MODULE_1__["of"])({
        results: []
      });
    }

    if (options === null || options === void 0 ? void 0 : options.range) {
      var timeFilter = this.getTimeFilter({
        rangeRaw: options.range,
        timezone: options.timezone
      });
      query = query.replace('$timeFilter', timeFilter);
    }

    return this._APMRequest(query);
  };

  APMServiceDataSource.prototype._APMRequest = function (query) {
    var _this = this;

    var serviceType = 'apm';
    var serviceInfo = Object(_common_constants__WEBPACK_IMPORTED_MODULE_8__["GetServiceAPIInfo"])('', serviceType);
    return Object(rxjs__WEBPACK_IMPORTED_MODULE_1__["from"])(Object(_common_constants__WEBPACK_IMPORTED_MODULE_8__["GetRequestParams"])({
      url: this.instanceSettings.url + serviceInfo.path,
      data: {
        Query: btoa(query)
      }
    }, serviceType, {
      action: 'DescribeGrafanaMetricData'
    }, '', this.instanceSettings.id, Object(_grafana_runtime__WEBPACK_IMPORTED_MODULE_3__["getBackendSrv"])())).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_2__["mergeMap"])(function (requestOptions) {
      return Object(_grafana_runtime__WEBPACK_IMPORTED_MODULE_3__["getBackendSrv"])().fetch(requestOptions).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_2__["map"])(function (result) {
        if (Object(lodash__WEBPACK_IMPORTED_MODULE_0__["get"])(result, 'data.Response.Error')) {
          // eslint-disable-next-line no-throw-literal
          throw {
            message: 'APM Error: ' + Object(lodash__WEBPACK_IMPORTED_MODULE_0__["get"])(result, 'data.Response.Error.Message'),
            data: result.data,
            cancelled: true
          };
        }

        var res = Object(lodash__WEBPACK_IMPORTED_MODULE_0__["get"])(result, 'data.Response.Result');
        var buf = Buffer.from(res, 'base64').toString();
        var data = JSON.parse(buf);
        data.executedQueryString = query;

        if (data) {
          if (data.Response.Error) {
            // eslint-disable-next-line no-throw-literal
            throw {
              message: 'APM Error: ' + data.Response.Error.Code + ': ' + data.Response.Error.Message,
              data: data
            };
          }

          if (data.Response.Result) {
            var errors = data.Response.Result.results.filter(function (elem) {
              return elem.error;
            });

            if (errors.length > 0) {
              // eslint-disable-next-line no-throw-literal
              throw {
                message: 'APM Error: ' + errors[0].error,
                data: data
              };
            }
          }
        }

        return data.Response.Result;
      }), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_2__["catchError"])(function (err) {
        if (err.cancelled) {
          return Object(rxjs__WEBPACK_IMPORTED_MODULE_1__["of"])(err);
        }

        return Object(rxjs__WEBPACK_IMPORTED_MODULE_1__["throwError"])(_this.handleErrors(err));
      }));
    }));
  };

  APMServiceDataSource.prototype.handleErrors = function (err) {
    var _a;

    var error = {
      message: (err === null || err === void 0 ? void 0 : err.status) || (err === null || err === void 0 ? void 0 : err.message) || 'Unknown error during query transaction. Please check JS console logs.'
    };

    if (Number.isInteger(err.status) && err.status !== 0 || err.status >= 300) {
      if ((_a = err.data) === null || _a === void 0 ? void 0 : _a.error) {
        error.message = 'APM Error: ' + err.data.error;
        error.data = err.data; // @ts-ignore

        error.config = err.config;
      } else {
        error.message = 'Network Error: ' + err.statusText + '(' + err.status + ')';
        error.data = err.data; // @ts-ignore

        error.config = err.config;
      }
    }

    return error;
  };

  APMServiceDataSource.prototype.getTimeFilter = function (options) {
    var from = this.getAPMTime(options.rangeRaw.from, false, options.timezone);
    var until = this.getAPMTime(options.rangeRaw.to, true, options.timezone);
    return 'time >= ' + from + ' and time <= ' + until;
  };

  APMServiceDataSource.prototype.getAPMTime = function (date, roundUp, timezone) {
    if (Object(lodash__WEBPACK_IMPORTED_MODULE_0__["isString"])(date)) {
      if (date === 'now') {
        return 'now()';
      }

      var parts = /^now-(\d+)([dhms])$/.exec(date);

      if (parts) {
        var amount = parseInt(parts[1], 10);
        var unit = parts[2];
        return 'now() - ' + amount + unit;
      }

      date = _grafana_data__WEBPACK_IMPORTED_MODULE_4__["dateMath"].parse(date, roundUp, timezone);
    }

    return date.valueOf() + 'ms';
  };

  APMServiceDataSource.prototype.fixTimePeriod = function (target, options) {
    var _this = this;

    var _a;

    var period = this.getTimePeriod(options.rangeRaw, options.timezone);
    (_a = target.groupBy) === null || _a === void 0 ? void 0 : _a.forEach(function (groupBy) {
      if (groupBy.type === 'time' && groupBy.params[0] !== '1d') {
        target = _this.modifyTime(target, period);
      }
    });
    return target;
  };

  APMServiceDataSource.prototype.getTimePeriod = function (rangeRaw, timezone) {
    var _a, _b;

    var from = (_a = _grafana_data__WEBPACK_IMPORTED_MODULE_4__["dateMath"].parse(rangeRaw.from, false, timezone)) === null || _a === void 0 ? void 0 : _a.valueOf();
    var until = (_b = _grafana_data__WEBPACK_IMPORTED_MODULE_4__["dateMath"].parse(rangeRaw.to, true, timezone)) === null || _b === void 0 ? void 0 : _b.valueOf();
    var oneHour = 1000 * 60 * 60;
    var range = 0;
    var period = '1m';

    if (from && until) {
      range = until - from;
    } // 12h


    if (range <= oneHour * 12) {
      period = '1m';
    } // 3d
    else if (range <= oneHour * 24 * 2) {
      period = '5m';
    } // 7d
    else if (range <= oneHour * 24 * 7) {
      period = '1h';
    } else {
      period = '1d';
    }

    return period;
  }; // 修改查询聚合周期


  APMServiceDataSource.prototype.modifyTime = function (query, period) {
    var _a;

    if (!query.groupBy) {
      return query;
    }

    for (var _i = 0, _b = query.groupBy; _i < _b.length; _i++) {
      var item = _b[_i];

      if (item.type === 'time') {
        var compareResult = this.periodCompare(String((_a = item.params) === null || _a === void 0 ? void 0 : _a[0]) || '', period);
        var isPeriodInparamsSmaller = compareResult && compareResult < 0; // !compareResult代表输入的时间粒度无效

        if (!compareResult || isPeriodInparamsSmaller) {
          item.params = [period];
        }

        return query;
      }
    }

    return query;
  };
  /**
   * @param pre_period 粒度
   * @param period 粒度
   * @return 负数代表小于；0代表=；正数代表大于; null代表无效
   */


  APMServiceDataSource.prototype.periodCompare = function (pre_period, period) {
    var units = ['s', 'm', 'h', 'd'];
    var reg = new RegExp("(^\\d+)([".concat(units.join(''), "]$)"));
    var pre = reg.exec(pre_period);
    var per = reg.exec(period);

    if (!pre || !per) {
      return null;
    }

    if (units.indexOf(pre[2]) - units.indexOf(per[2])) {
      return units.indexOf(pre[2]) - units.indexOf(per[2]);
    }

    return Number(pre[1]) - Number(per[1]);
  };

  APMServiceDataSource.prototype.testDatasource = function () {
    if (!this.instanceSettings.jsonData['APMServiceEnabled']) {
      return null;
    }

    var queryBuilder = new _query_builder__WEBPACK_IMPORTED_MODULE_9__["APMQueryBuilder"]({
      measurement: '',
      tags: []
    }, '');
    var query = queryBuilder.buildExploreQuery('MEASUREMENTS');
    return this._seriesQuery(query).toPromise().then(function (res) {
      var error = Object(lodash__WEBPACK_IMPORTED_MODULE_0__["get"])(res, 'data.Response.Error');

      if (error) {
        return {
          status: 'error',
          message: error === null || error === void 0 ? void 0 : error.Message
        };
      }

      return {
        status: 'success',
        message: 'Data source is working'
      };
    })["catch"](function (err) {
      return {
        status: 'error',
        message: err.message
      };
    });
  };

  return APMServiceDataSource;
}(_grafana_data__WEBPACK_IMPORTED_MODULE_4__["DataSourceApi"]);

/* harmony default export */ __webpack_exports__["default"] = (APMServiceDataSource);
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../../node_modules/buffer/index.js */ "../node_modules/buffer/index.js").Buffer))

/***/ }),

/***/ "./datasource/apm-service/APMServiceQueryEditor.tsx":
/*!**********************************************************!*\
  !*** ./datasource/apm-service/APMServiceQueryEditor.tsx ***!
  \**********************************************************/
/*! exports provided: APMServiceQueryEditor */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "APMServiceQueryEditor", function() { return APMServiceQueryEditor; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var emotion__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! emotion */ "emotion");
/* harmony import */ var emotion__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(emotion__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @grafana/ui */ "@grafana/ui");
/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_grafana_ui__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _grafana_runtime__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @grafana/runtime */ "@grafana/runtime");
/* harmony import */ var _grafana_runtime__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_grafana_runtime__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _APMMetadataQuery__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./APMMetadataQuery */ "./datasource/apm-service/APMMetadataQuery.ts");
/* harmony import */ var _queryUtils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./queryUtils */ "./datasource/apm-service/queryUtils.ts");
/* harmony import */ var _common_partListUtils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./common/partListUtils */ "./datasource/apm-service/common/partListUtils.ts");
/* harmony import */ var _components_SegmentSection__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./components/SegmentSection */ "./datasource/apm-service/components/SegmentSection.tsx");
/* harmony import */ var _components_FromSection__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./components/FromSection */ "./datasource/apm-service/components/FromSection.tsx");
/* harmony import */ var _components_TagsSection__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./components/TagsSection */ "./datasource/apm-service/components/TagsSection.tsx");
/* harmony import */ var _components_PartListSection__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./components/PartListSection */ "./datasource/apm-service/components/PartListSection.tsx");
/* harmony import */ var _components_InputSection__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./components/InputSection */ "./datasource/apm-service/components/InputSection.tsx");
/* harmony import */ var _components_FormatAsSection__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./components/FormatAsSection */ "./datasource/apm-service/components/FormatAsSection.tsx");
/* harmony import */ var _common_useUniqueId__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./common/useUniqueId */ "./datasource/apm-service/common/useUniqueId.ts");
/* harmony import */ var _common_constants__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./common/constants */ "./datasource/apm-service/common/constants.ts");
/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../types */ "./datasource/types.ts");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! lodash */ "lodash");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_16___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_16__);
/* harmony import */ var _components_OrderBySeries__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./components/OrderBySeries */ "./datasource/apm-service/components/OrderBySeries.tsx");
var __makeTemplateObject = undefined && undefined.__makeTemplateObject || function (cooked, raw) {
  if (Object.defineProperty) {
    Object.defineProperty(cooked, "raw", {
      value: raw
    });
  } else {
    cooked.raw = raw;
  }

  return cooked;
};

var __assign = undefined && undefined.__assign || function () {
  __assign = Object.assign || function (t) {
    for (var s, i = 1, n = arguments.length; i < n; i++) {
      s = arguments[i];

      for (var p in s) {
        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
      }
    }

    return t;
  };

  return __assign.apply(this, arguments);
};

var __spreadArray = undefined && undefined.__spreadArray || function (to, from, pack) {
  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {
    if (ar || !(i in from)) {
      if (!ar) ar = Array.prototype.slice.call(from, 0, i);
      ar[i] = from[i];
    }
  }
  return to.concat(ar || Array.prototype.slice.call(from));
};

















 // import { TextareaSection } from './components/TextareaSection';
// import { useShadowedState } from './common/useShadowedState';



function getTemplateVariableOptions() {
  return Object(_grafana_runtime__WEBPACK_IMPORTED_MODULE_3__["getTemplateSrv"])().getVariables() // we make them regex-params, i'm not 100% sure why.
  // probably because this way multi-value variables work ok too.
  .map(function (v) {
    return "/^$".concat(v.name, "$/");
  });
} // helper function to make it easy to call this from the widget-render-code


function withTemplateVariableOptions(optionsPromise) {
  return optionsPromise.then(function (options) {
    return __spreadArray(__spreadArray([], getTemplateVariableOptions(), true), options, true);
  });
}

function filterTags(parts, allTagKeys) {
  return parts.filter(function (t) {
    return allTagKeys.has(t.key);
  });
}

var APMServiceQueryEditor = react__WEBPACK_IMPORTED_MODULE_0___default.a.memo(function (props) {
  var _a, _b;

  var uniqueId = Object(_common_useUniqueId__WEBPACK_IMPORTED_MODULE_13__["useUniqueId"])();
  var formatAsId = "apm-qe-format-as-".concat(uniqueId);
  var orderByTimeId = "apm-qe-order-by".concat(uniqueId);
  var orderBySeriesId = "apm-qe-order-by".concat(uniqueId);
  var styles = Object(_grafana_ui__WEBPACK_IMPORTED_MODULE_2__["useStyles"])(getStyles); // const [self] = useShadowedState(true);

  var datasource = props.datasource,
      onChange = props.onChange,
      queryInfo = props.query;
  var query = Object(_queryUtils__WEBPACK_IMPORTED_MODULE_5__["normalizeQuery"])(queryInfo.APMServiceParams || Object(lodash__WEBPACK_IMPORTED_MODULE_16__["clone"])(_types__WEBPACK_IMPORTED_MODULE_15__["defaultQueryInfo"].APMServiceParams));
  var measurement = query.measurement,
      policy = query.policy;
  Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
    if (!queryInfo.APMServiceParams) {
      onChange(__assign(__assign({}, queryInfo), {
        APMServiceParams: Object(lodash__WEBPACK_IMPORTED_MODULE_16__["clone"])(_types__WEBPACK_IMPORTED_MODULE_15__["defaultQueryInfo"].APMServiceParams)
      }));
    }
  }, [onChange, queryInfo]);
  var allTagKeys = Object(react__WEBPACK_IMPORTED_MODULE_0__["useMemo"])(function () {
    return Object(_APMMetadataQuery__WEBPACK_IMPORTED_MODULE_4__["getTagKeysForMeasurementAndTags"])(measurement, policy, [], datasource).then(function (tags) {
      return new Set(tags);
    })["catch"](function (err) {
      console.error('getTagKeysForMeasurementAndTags', err);
      return new Set('');
    });
  }, [measurement, policy, datasource]);
  var selectLists = Object(react__WEBPACK_IMPORTED_MODULE_0__["useMemo"])(function () {
    var _a;

    var dynamicSelectPartOptions = new Map([['field_0', function () {
      return measurement !== undefined ? Object(_APMMetadataQuery__WEBPACK_IMPORTED_MODULE_4__["getFieldKeysForMeasurement"])(measurement, policy, datasource) : Promise.resolve([]);
    }]]);
    return ((_a = query.select) !== null && _a !== void 0 ? _a : []).map(function (sel) {
      return Object(_common_partListUtils__WEBPACK_IMPORTED_MODULE_6__["makePartList"])(sel, dynamicSelectPartOptions);
    });
  }, [measurement, policy, query.select, datasource]); // the following function is not complicated enough to memoize, but it's result
  // is used in both memoized and un-memoized parts, so we have no choice

  var getTagKeys = Object(react__WEBPACK_IMPORTED_MODULE_0__["useMemo"])(function () {
    return function () {
      return allTagKeys.then(function (keys) {
        var _a;

        return Object(_APMMetadataQuery__WEBPACK_IMPORTED_MODULE_4__["getTagKeysForMeasurementAndTags"])(measurement, policy, filterTags((_a = query.tags) !== null && _a !== void 0 ? _a : [], keys), datasource);
      });
    };
  }, [measurement, policy, query.tags, datasource, allTagKeys]);
  var groupByList = Object(react__WEBPACK_IMPORTED_MODULE_0__["useMemo"])(function () {
    var _a;

    var dynamicGroupByPartOptions = new Map([['tag_0', getTagKeys]]);
    return Object(_common_partListUtils__WEBPACK_IMPORTED_MODULE_6__["makePartList"])((_a = query.groupBy) !== null && _a !== void 0 ? _a : [], dynamicGroupByPartOptions);
  }, [getTagKeys, query.groupBy]);

  var onAppliedChange = function onAppliedChange(newQuery) {
    props.onChange(__assign(__assign({}, props.query), {
      APMServiceParams: newQuery
    }));
    props.onRunQuery();
  };

  var handleFromSectionChange = function handleFromSectionChange(p, m) {
    onAppliedChange(__assign(__assign({}, query), {
      policy: p,
      measurement: m
    }));
  };

  var handleTagsSectionChange = function handleTagsSectionChange(tags) {
    // we set empty-arrays to undefined
    onAppliedChange(__assign(__assign({}, query), {
      tags: tags.length === 0 ? undefined : tags
    }));
  };

  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", null, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment, null, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_components_SegmentSection__WEBPACK_IMPORTED_MODULE_7__["SegmentSection"], {
    label: "FROM",
    fill: true
  }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_components_FromSection__WEBPACK_IMPORTED_MODULE_8__["FromSection"], {
    policy: policy,
    measurement: measurement,
    getPolicyOptions: function getPolicyOptions() {
      return Object(_APMMetadataQuery__WEBPACK_IMPORTED_MODULE_4__["getAllPolicies"])(datasource);
    },
    getMeasurementOptions: function getMeasurementOptions(filter) {
      return withTemplateVariableOptions(allTagKeys.then(function (keys) {
        var _a;

        return Object(_APMMetadataQuery__WEBPACK_IMPORTED_MODULE_4__["getAllMeasurementsForTags"])(filter === '' ? undefined : filter, filterTags((_a = query.tags) !== null && _a !== void 0 ? _a : [], keys), datasource);
      }));
    },
    onChange: handleFromSectionChange
  }), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_2__["InlineLabel"], {
    width: "auto",
    className: styles.inlineLabel
  }, "WHERE"), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_components_TagsSection__WEBPACK_IMPORTED_MODULE_9__["TagsSection"], {
    tags: (_a = query.tags) !== null && _a !== void 0 ? _a : [],
    onChange: handleTagsSectionChange,
    getTagKeyOptions: getTagKeys,
    getTagValueOptions: function getTagValueOptions(key) {
      return withTemplateVariableOptions(allTagKeys.then(function (keys) {
        var _a;

        return Object(_APMMetadataQuery__WEBPACK_IMPORTED_MODULE_4__["getTagValues"])(key, measurement, policy, filterTags((_a = query.tags) !== null && _a !== void 0 ? _a : [], keys), datasource);
      }));
    }
  })), selectLists.map(function (sel, index) {
    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_components_SegmentSection__WEBPACK_IMPORTED_MODULE_7__["SegmentSection"], {
      key: index,
      label: index === 0 ? 'SELECT' : '',
      fill: true
    }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_components_PartListSection__WEBPACK_IMPORTED_MODULE_10__["PartListSection"], {
      parts: sel,
      getNewPartOptions: function getNewPartOptions() {
        return Promise.resolve(Object(_common_partListUtils__WEBPACK_IMPORTED_MODULE_6__["getNewSelectPartOptions"])());
      },
      onChange: function onChange(partIndex, newParams) {
        var newQuery = Object(_queryUtils__WEBPACK_IMPORTED_MODULE_5__["changeSelectPart"])(query, index, partIndex, newParams);
        onAppliedChange(newQuery);
      },
      onAddNewPart: function onAddNewPart(type) {
        onAppliedChange(Object(_queryUtils__WEBPACK_IMPORTED_MODULE_5__["addNewSelectPart"])(query, type, index));
      },
      onRemovePart: function onRemovePart(partIndex) {
        onAppliedChange(Object(_queryUtils__WEBPACK_IMPORTED_MODULE_5__["removeSelectPart"])(query, partIndex, index));
      }
    }));
  }), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_components_SegmentSection__WEBPACK_IMPORTED_MODULE_7__["SegmentSection"], {
    label: "GROUP BY",
    fill: true
  }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_components_PartListSection__WEBPACK_IMPORTED_MODULE_10__["PartListSection"], {
    parts: groupByList,
    getNewPartOptions: function getNewPartOptions() {
      return Object(_common_partListUtils__WEBPACK_IMPORTED_MODULE_6__["getNewGroupByPartOptions"])(query, getTagKeys);
    },
    onChange: function onChange(partIndex, newParams) {
      var newQuery = Object(_queryUtils__WEBPACK_IMPORTED_MODULE_5__["changeGroupByPart"])(query, partIndex, newParams);
      onAppliedChange(newQuery);
    },
    onAddNewPart: function onAddNewPart(type) {
      onAppliedChange(Object(_queryUtils__WEBPACK_IMPORTED_MODULE_5__["addNewGroupByPart"])(query, type));
    },
    onRemovePart: function onRemovePart(partIndex) {
      onAppliedChange(Object(_queryUtils__WEBPACK_IMPORTED_MODULE_5__["removeGroupByPart"])(query, partIndex));
    }
  })), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_components_SegmentSection__WEBPACK_IMPORTED_MODULE_7__["SegmentSection"], {
    label: "TIMEZONE",
    fill: true
  }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_components_InputSection__WEBPACK_IMPORTED_MODULE_11__["InputSection"], {
    placeholder: "(optional)",
    value: query.tz,
    onChange: function onChange(tz) {
      onAppliedChange(__assign(__assign({}, query), {
        tz: tz
      }));
    }
  }), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_2__["InlineLabel"], {
    htmlFor: orderByTimeId,
    width: "auto",
    className: styles.inlineLabel
  }, "ORDER BY"), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_components_InputSection__WEBPACK_IMPORTED_MODULE_11__["InputSection"], {
    placeholder: "time",
    value: query.orderType,
    onChange: function onChange(v) {
      onAppliedChange(__assign(__assign({}, query), {
        orderType: v
      }));
    }
  }), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_components_OrderBySeries__WEBPACK_IMPORTED_MODULE_17__["OrderBySeries"], {
    inputId: orderBySeriesId,
    value: query.orderBy,
    onChange: function onChange(v) {
      onAppliedChange(__assign(__assign({}, query), {
        orderBy: v
      }));
    }
  })), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_components_SegmentSection__WEBPACK_IMPORTED_MODULE_7__["SegmentSection"], {
    htmlFor: formatAsId,
    label: "FORMAT AS",
    fill: true
  }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_components_FormatAsSection__WEBPACK_IMPORTED_MODULE_12__["FormatAsSection"], {
    inputId: formatAsId,
    format: (_b = query.resultFormat) !== null && _b !== void 0 ? _b : _common_constants__WEBPACK_IMPORTED_MODULE_14__["DEFAULT_RESULT_FORMAT"],
    onChange: function onChange(format) {
      onAppliedChange(__assign(__assign({}, query), {
        resultFormat: format
      }));
    }
  }), query.resultFormat !== 'table' && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment, null, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_2__["InlineLabel"], {
    width: "auto",
    className: styles.inlineLabel
  }, "ALIAS"), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_components_InputSection__WEBPACK_IMPORTED_MODULE_11__["InputSection"], {
    isWide: true,
    placeholder: "Naming pattern",
    value: query.alias,
    onChange: function onChange(alias) {
      onAppliedChange(__assign(__assign({}, query), {
        alias: alias
      }));
    }
  })))) // ) : (
  //   <TextareaSection
  //     value={query.custom}
  //     placeholder="Query"
  //     onChange={(custom) => {
  //       onAppliedChange({ ...query, custom });
  //     }}
  //   />
  // )
  );
});

function getStyles(theme) {
  return {
    inlineLabel: Object(emotion__WEBPACK_IMPORTED_MODULE_1__["css"])(templateObject_1 || (templateObject_1 = __makeTemplateObject(["\n      color: #33a2e5;\n    "], ["\n      color: #33a2e5;\n    "])))
  };
}

APMServiceQueryEditor.displayName = 'APMServiceQueryEditor';
var templateObject_1;

/***/ }),

/***/ "./datasource/apm-service/APM_query_model.ts":
/*!***************************************************!*\
  !*** ./datasource/apm-service/APM_query_model.ts ***!
  \***************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lodash */ "lodash");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _query_part__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./query_part */ "./datasource/apm-service/query_part.ts");
/* harmony import */ var grafana_app_core_utils_kbn__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! grafana/app/core/utils/kbn */ "grafana/app/core/utils/kbn");
/* harmony import */ var grafana_app_core_utils_kbn__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(grafana_app_core_utils_kbn__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../types */ "./datasource/types.ts");





var APMQueryModel =
/** @class */
function () {
  APMQueryModel.$inject = ["target", "templateSrv", "scopedVars"];

  /** @ngInject */
  function APMQueryModel(target, templateSrv, scopedVars) {
    this.selectModels = [];
    this.target = target;
    this.templateSrv = templateSrv;
    this.scopedVars = scopedVars;
    target.policy = target.policy || _types__WEBPACK_IMPORTED_MODULE_3__["defaultQueryInfo"].APMServiceParams.policy;
    target.resultFormat = target.resultFormat || _types__WEBPACK_IMPORTED_MODULE_3__["defaultQueryInfo"].APMServiceParams.resultFormat;
    target.orderBy = target.orderBy || _types__WEBPACK_IMPORTED_MODULE_3__["defaultQueryInfo"].APMServiceParams.orderBy;
    target.orderType = target.orderType || _types__WEBPACK_IMPORTED_MODULE_3__["defaultQueryInfo"].APMServiceParams.orderType;
    target.tags = target.tags || Object(lodash__WEBPACK_IMPORTED_MODULE_0__["cloneDeep"])(_types__WEBPACK_IMPORTED_MODULE_3__["defaultQueryInfo"].APMServiceParams.tags);
    target.groupBy = target.groupBy || Object(lodash__WEBPACK_IMPORTED_MODULE_0__["cloneDeep"])(_types__WEBPACK_IMPORTED_MODULE_3__["defaultQueryInfo"].APMServiceParams.groupBy);
    target.select = target.select || Object(lodash__WEBPACK_IMPORTED_MODULE_0__["cloneDeep"])(_types__WEBPACK_IMPORTED_MODULE_3__["defaultQueryInfo"].APMServiceParams.select);
    this.updateProjection();
  }

  APMQueryModel.prototype.updateProjection = function () {
    this.selectModels = Object(lodash__WEBPACK_IMPORTED_MODULE_0__["map"])(this.target.select, function (parts) {
      return Object(lodash__WEBPACK_IMPORTED_MODULE_0__["map"])(parts, _query_part__WEBPACK_IMPORTED_MODULE_1__["default"].create);
    });
    this.groupByParts = Object(lodash__WEBPACK_IMPORTED_MODULE_0__["map"])(this.target.groupBy, _query_part__WEBPACK_IMPORTED_MODULE_1__["default"].create);
  };

  APMQueryModel.prototype.updatePersistedParts = function () {
    this.target.select = Object(lodash__WEBPACK_IMPORTED_MODULE_0__["map"])(this.selectModels, function (selectParts) {
      return Object(lodash__WEBPACK_IMPORTED_MODULE_0__["map"])(selectParts, function (part) {
        return {
          type: part.def.type,
          params: part.params
        };
      });
    });
  };

  APMQueryModel.prototype.hasGroupByTime = function () {
    return Object(lodash__WEBPACK_IMPORTED_MODULE_0__["find"])(this.target.groupBy, function (g) {
      return g.type === 'time';
    });
  };

  APMQueryModel.prototype.hasFill = function () {
    return Object(lodash__WEBPACK_IMPORTED_MODULE_0__["find"])(this.target.groupBy, function (g) {
      return g.type === 'fill';
    });
  };

  APMQueryModel.prototype.addGroupBy = function (value) {
    var stringParts = value.match(/^(\w+)\((.*)\)$/);

    if (!stringParts || !this.target.groupBy) {
      return;
    }

    var typePart = stringParts[1];
    var arg = stringParts[2];
    var partModel = _query_part__WEBPACK_IMPORTED_MODULE_1__["default"].create({
      type: typePart,
      params: [arg]
    });
    var partCount = this.target.groupBy.length;

    if (partCount === 0) {
      this.target.groupBy.push(partModel.part);
    } else if (typePart === 'time') {
      this.target.groupBy.splice(0, 0, partModel.part);
    } else if (typePart === 'tag') {
      if (this.target.groupBy[partCount - 1].type === 'fill') {
        this.target.groupBy.splice(partCount - 1, 0, partModel.part);
      } else {
        this.target.groupBy.push(partModel.part);
      }
    } else {
      this.target.groupBy.push(partModel.part);
    }

    this.updateProjection();
  };

  APMQueryModel.prototype.removeGroupByPart = function (part, index) {
    var categories = _query_part__WEBPACK_IMPORTED_MODULE_1__["default"].getCategories();

    if (part.def.type === 'time') {
      // remove fill
      this.target.groupBy = Object(lodash__WEBPACK_IMPORTED_MODULE_0__["filter"])(this.target.groupBy, function (g) {
        return g.type !== 'fill';
      }); // remove aggregations

      this.target.select = Object(lodash__WEBPACK_IMPORTED_MODULE_0__["map"])(this.target.select, function (s) {
        return Object(lodash__WEBPACK_IMPORTED_MODULE_0__["filter"])(s, function (part) {
          var partModel = _query_part__WEBPACK_IMPORTED_MODULE_1__["default"].create(part);

          if (partModel.def.category === categories.Aggregations) {
            return false;
          }

          if (partModel.def.category === categories.Selectors) {
            return false;
          }

          return true;
        });
      });
    }

    this.target.groupBy.splice(index, 1);
    this.updateProjection();
  };

  APMQueryModel.prototype.removeSelect = function (index) {
    this.target.select.splice(index, 1);
    this.updateProjection();
  };

  APMQueryModel.prototype.removeSelectPart = function (selectParts, part) {
    // if we remove the field remove the whole statement
    if (part.def.type === 'field') {
      if (this.selectModels.length > 1) {
        var modelsIndex = Object(lodash__WEBPACK_IMPORTED_MODULE_0__["indexOf"])(this.selectModels, selectParts);
        this.selectModels.splice(modelsIndex, 1);
      }
    } else {
      var partIndex = Object(lodash__WEBPACK_IMPORTED_MODULE_0__["indexOf"])(selectParts, part);
      selectParts.splice(partIndex, 1);
    }

    this.updatePersistedParts();
  };

  APMQueryModel.prototype.addSelectPart = function (selectParts, type) {
    var partModel = _query_part__WEBPACK_IMPORTED_MODULE_1__["default"].create({
      type: type
    });
    partModel.def.addStrategy(selectParts, partModel, this);
    this.updatePersistedParts();
  };

  APMQueryModel.prototype.getMeasurementAndPolicy = function (interpolate) {
    var policy = this.target.policy;
    var measurement = this.target.measurement || 'measurement';

    if (!measurement.match('^/.*/$')) {
      measurement = '"' + measurement + '"';
    } else if (interpolate) {
      measurement = this.templateSrv.replace(measurement, this.scopedVars, 'regex');
    }

    if (policy !== 'default') {
      policy = '"' + this.target.policy + '".';
    } else {
      policy = '';
    }

    return policy + measurement;
  };

  APMQueryModel.prototype.interpolateQueryStr = function (value, variable, defaultFormatFn) {
    // if no multi or include all do not regexEscape
    if (!variable.multi && !variable.includeAll) {
      return value;
    }

    if (typeof value === 'string') {
      return grafana_app_core_utils_kbn__WEBPACK_IMPORTED_MODULE_2___default.a.regexEscape(value);
    }

    var escapedValues = Object(lodash__WEBPACK_IMPORTED_MODULE_0__["map"])(value, grafana_app_core_utils_kbn__WEBPACK_IMPORTED_MODULE_2___default.a.regexEscape);
    return '(' + escapedValues.join('|') + ')';
  };

  APMQueryModel.prototype.render = function (interpolate) {
    var _this = this;

    var _a, _b;

    var target = this.target;

    if (target.rawQuery) {
      if (interpolate) {
        return this.templateSrv.replace(target.query, this.scopedVars, this.interpolateQueryStr);
      } else {
        return target.query;
      }
    }

    var query = 'select ';
    var i;
    var y; // 自定义特殊处理

    if (((_a = this.selectModels[0][1]) === null || _a === void 0 ? void 0 : _a.part.type) === 'custom') {
      query += this.selectModels[0][0].params[0];
    } else {
      for (i = 0; i < ((_b = this.selectModels) === null || _b === void 0 ? void 0 : _b.length); i++) {
        var parts = this.selectModels[i];
        var selectText = '';

        for (y = 0; y < parts.length; y++) {
          var part = parts[y];
          selectText = part.render(selectText);
        }

        if (i > 0) {
          query += ', ';
        }

        query += selectText;
      }
    }

    query += ' from ' + this.getMeasurementAndPolicy(interpolate) + ' where ';
    var conditions = Object(lodash__WEBPACK_IMPORTED_MODULE_0__["map"])(target.tags, function (tag, index) {
      return _this.renderTagCondition(tag, index, interpolate);
    });

    if (conditions.length > 0) {
      query += '(' + conditions.join(' ') + ') and ';
    }

    query += '$timeFilter';
    var groupBySection = '';
    var len = this.groupByParts.length;
    var groupByParts = this.groupByParts;

    if (len > 2) {
      groupByParts = this.groupByParts.filter(function (item) {
        return item.def.type !== 'time';
      });
    }

    for (i = 0; i < groupByParts.length; i++) {
      var part = groupByParts[i];

      if (i > 0) {
        // for some reason fill has no separator
        groupBySection += part.def.type === 'fill' ? ' ' : ', ';
      }

      groupBySection += part.render('');
    }

    if (groupBySection.length) {
      query += ' group by ' + groupBySection;
    }

    if (target.fill) {
      query += ' fill(' + target.fill + ')';
    }

    if (target.orderType) {
      query += ' order by ' + target.orderType;
    }

    if (target.orderBy) {
      query += ' ' + target.orderBy;
    }

    if (target.limit) {
      query += ' limit ' + target.limit;
    }

    if (target.slimit) {
      query += ' slimit ' + target.slimit;
    }

    if (target.tz) {
      query += " tz('" + target.tz + "')";
    }

    return query;
  };

  APMQueryModel.prototype.renderAdhocFilters = function (filters) {
    var _this = this;

    var conditions = Object(lodash__WEBPACK_IMPORTED_MODULE_0__["map"])(filters, function (tag, index) {
      return _this.renderTagCondition(tag, index, true);
    });
    return conditions.join(' ');
  };

  APMQueryModel.prototype.renderTagCondition = function (tag, index, interpolate) {
    // FIXME: merge this function with query_builder/renderTagCondition
    var str = '';
    var operator = tag.operator;
    var value = tag.value;

    if (index > 0) {
      str = (tag.condition.toLowerCase() || 'and') + ' ';
    }

    if (!operator) {
      if (/^\/.*\/$/.test(value)) {
        operator = '=~';
      } else {
        operator = '=';
      }
    } // quote value unless regex


    if (operator !== '=~' && operator !== '!~') {
      if (interpolate) {
        value = this.templateSrv.replace(value, this.scopedVars);
      }

      if (operator !== '>' && operator !== '<') {
        value = "'" + value.replace(/\\/g, '\\\\').replace(/\'/g, "\\'") + "'";
      }

      if (operator === 'in') {
        value = '(' + value + ')';
      }
    } else if (interpolate) {
      value = this.templateSrv.replace(value, this.scopedVars, 'regex');
    }

    return str + '"' + tag.key + '" ' + operator + ' ' + value;
  };

  return APMQueryModel;
}();

/* harmony default export */ __webpack_exports__["default"] = (APMQueryModel);

/***/ }),

/***/ "./datasource/apm-service/APM_series.ts":
/*!**********************************************!*\
  !*** ./datasource/apm-service/APM_series.ts ***!
  \**********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lodash */ "lodash");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var grafana_app_core_table_model__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! grafana/app/core/table_model */ "grafana/app/core/table_model");
/* harmony import */ var grafana_app_core_table_model__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(grafana_app_core_table_model__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @grafana/data */ "@grafana/data");
/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_grafana_data__WEBPACK_IMPORTED_MODULE_2__);




var APMSeries =
/** @class */
function () {
  function APMSeries(options) {
    this.series = options.series;
    this.alias = options.alias;
    this.annotation = options.annotation;
    this.meta = options.meta;
    this.refId = options.refId;
  }

  APMSeries.prototype.getTimeSeries = function () {
    var _this = this;

    var output = [];
    var i;
    var j;

    if (this.series.length === 0) {
      return output;
    }

    Object(lodash__WEBPACK_IMPORTED_MODULE_0__["each"])(this.series, function (series) {
      var columns = series.columns.length;
      var tags = Object(lodash__WEBPACK_IMPORTED_MODULE_0__["map"])(series.tags, function (value, key) {
        return key + ': ' + value;
      });

      for (j = 1; j < columns; j++) {
        var seriesName = series.name;
        var columnName = series.columns[j];

        if (columnName !== 'value') {
          seriesName = seriesName + '.' + columnName;
        }

        if (_this.alias) {
          seriesName = _this._getSeriesName(series, j);
        } else if (series.tags) {
          seriesName = seriesName + ' {' + tags.join(', ') + '}';
        }

        var datapoints = [];

        if (series.values) {
          for (i = 0; i < series.values.length; i++) {
            datapoints[i] = [series.values[i][j], series.values[i][0]];
          }
        }

        output.push({
          title: seriesName,
          target: seriesName,
          datapoints: datapoints,
          tags: series.tags,
          meta: _this.meta,
          refId: _this.refId
        });
      }
    });
    return output;
  };

  APMSeries.prototype._getSeriesName = function (series, index) {
    var regex = /\$(\w+)|\[\[([\s\S]+?)\]\]/g;
    var segments = series.name.split('.');
    return this.alias.replace(regex, function (match, g1, g2) {
      var _a;

      var group = g1 || g2;
      var segIndex = parseInt(group, 10);

      if (group === 'm' || group === 'measurement') {
        return series.name;
      }

      if (group === 'col') {
        return series.columns[index];
      }

      if (!isNaN(segIndex)) {
        return (_a = segments[segIndex]) !== null && _a !== void 0 ? _a : match;
      }

      if (group.indexOf('tag_') !== 0) {
        return match;
      }

      var tag = group.replace('tag_', '');

      if (!series.tags) {
        return match;
      }

      return series.tags[tag];
    });
  };

  APMSeries.prototype.getAnnotations = function () {
    var _this = this;

    var list = [];
    Object(lodash__WEBPACK_IMPORTED_MODULE_0__["each"])(this.series, function (series) {
      var titleCol = null;
      var timeCol = null;
      var timeEndCol = null;
      var tagsCol = [];
      var textCol = null;
      Object(lodash__WEBPACK_IMPORTED_MODULE_0__["each"])(series.columns, function (column, index) {
        if (column === 'time') {
          timeCol = index;
          return;
        }

        if (column === 'sequence_number') {
          return;
        }

        if (column === _this.annotation.titleColumn) {
          titleCol = index;
          return;
        }

        if (Object(lodash__WEBPACK_IMPORTED_MODULE_0__["includes"])((_this.annotation.tagsColumn || '').replace(' ', '').split(','), column)) {
          tagsCol.push(index);
          return;
        }

        if (column === _this.annotation.textColumn) {
          textCol = index;
          return;
        }

        if (column === _this.annotation.timeEndColumn) {
          timeEndCol = index;
          return;
        } // legacy case


        if (!titleCol && textCol !== index) {
          titleCol = index;
        }
      });
      Object(lodash__WEBPACK_IMPORTED_MODULE_0__["each"])(series.values, function (value) {
        var data = {
          annotation: _this.annotation,
          time: Number(new Date(value[timeCol])),
          title: value[titleCol],
          timeEnd: value[timeEndCol],
          // Remove empty values, then split in different tags for comma separated values
          tags: Object(lodash__WEBPACK_IMPORTED_MODULE_0__["flatten"])(tagsCol.filter(function (t) {
            return value[t];
          }).map(function (t) {
            return value[t].split(',');
          })),
          text: value[textCol]
        };
        list.push(data);
      });
    });
    return list;
  };

  APMSeries.prototype.getTable = function () {
    var table = new grafana_app_core_table_model__WEBPACK_IMPORTED_MODULE_1___default.a();
    var i;
    var j; // @ts-ignore

    table.refId = this.refId; // @ts-ignore

    table.meta = this.meta;

    if (this.series.length === 0) {
      return table;
    } // the order is:
    // - first the first item from the value-array (this is often (always?) the timestamp)
    // - then all the tag-values
    // - then the rest of the value-array
    //
    // we have to keep this order both in table.columns and table.rows


    Object(lodash__WEBPACK_IMPORTED_MODULE_0__["each"])(this.series, function (series, seriesIndex) {
      if (seriesIndex === 0) {
        var firstCol = series.columns[0]; // Check the first column's name, if it is `time`, we
        // mark it as having the type time

        var firstTableCol = firstCol === 'time' ? {
          text: 'Time',
          type: _grafana_data__WEBPACK_IMPORTED_MODULE_2__["FieldType"].time
        } : {
          text: firstCol
        };
        table.columns.push(firstTableCol);
        Object(lodash__WEBPACK_IMPORTED_MODULE_0__["each"])(Object(lodash__WEBPACK_IMPORTED_MODULE_0__["keys"])(series.tags), function (key) {
          table.columns.push({
            text: key
          });
        });

        for (j = 1; j < series.columns.length; j++) {
          table.columns.push({
            text: series.columns[j]
          });
        }
      }

      if (series.values) {
        for (i = 0; i < series.values.length; i++) {
          var values = series.values[i];
          var reordered = [values[0]];

          if (series.tags) {
            for (var key in series.tags) {
              if (series.tags.hasOwnProperty(key)) {
                reordered.push(series.tags[key]);
              }
            }
          }

          for (j = 1; j < values.length; j++) {
            reordered.push(values[j]);
          }

          table.rows.push(reordered);
        }
      }
    });
    return table;
  };

  return APMSeries;
}();

/* harmony default export */ __webpack_exports__["default"] = (APMSeries);

/***/ }),

/***/ "./datasource/apm-service/common/constants.ts":
/*!****************************************************!*\
  !*** ./datasource/apm-service/common/constants.ts ***!
  \****************************************************/
/*! exports provided: RESULT_FORMATS, DEFAULT_RESULT_FORMAT, ENABLE_MEASUREMENTS */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RESULT_FORMATS", function() { return RESULT_FORMATS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DEFAULT_RESULT_FORMAT", function() { return DEFAULT_RESULT_FORMAT; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ENABLE_MEASUREMENTS", function() { return ENABLE_MEASUREMENTS; });
var RESULT_FORMATS = [{
  label: 'Time series',
  value: 'time_series'
}, {
  label: 'Table',
  value: 'table'
}, {
  label: 'Logs',
  value: 'logs'
}];
var DEFAULT_RESULT_FORMAT = 'time_series';
var ENABLE_MEASUREMENTS = ['sql_metric', 'service_metric', 'error_metric', 'runtime_metric', 'mq_metric'];

/***/ }),

/***/ "./datasource/apm-service/common/partListUtils.ts":
/*!********************************************************!*\
  !*** ./datasource/apm-service/common/partListUtils.ts ***!
  \********************************************************/
/*! exports provided: getNewSelectPartOptions, getNewGroupByPartOptions, makePartList */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getNewSelectPartOptions", function() { return getNewSelectPartOptions; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getNewGroupByPartOptions", function() { return getNewGroupByPartOptions; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "makePartList", function() { return makePartList; });
/* harmony import */ var _APM_query_model__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../APM_query_model */ "./datasource/apm-service/APM_query_model.ts");
/* harmony import */ var _unwrap__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./unwrap */ "./datasource/apm-service/common/unwrap.ts");
/* harmony import */ var _query_part__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../query_part */ "./datasource/apm-service/query_part.ts");
/* harmony import */ var _toSelectableValue__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./toSelectableValue */ "./datasource/apm-service/common/toSelectableValue.ts");
var __assign = undefined && undefined.__assign || function () {
  __assign = Object.assign || function (t) {
    for (var s, i = 1, n = arguments.length; i < n; i++) {
      s = arguments[i];

      for (var p in s) {
        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
      }
    }

    return t;
  };

  return __assign.apply(this, arguments);
};

var __awaiter = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {
  function adopt(value) {
    return value instanceof P ? value : new P(function (resolve) {
      resolve(value);
    });
  }

  return new (P || (P = Promise))(function (resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }

    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }

    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }

    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};

var __generator = undefined && undefined.__generator || function (thisArg, body) {
  var _ = {
    label: 0,
    sent: function sent() {
      if (t[0] & 1) throw t[1];
      return t[1];
    },
    trys: [],
    ops: []
  },
      f,
      y,
      t,
      g;
  return g = {
    next: verb(0),
    "throw": verb(1),
    "return": verb(2)
  }, typeof Symbol === "function" && (g[Symbol.iterator] = function () {
    return this;
  }), g;

  function verb(n) {
    return function (v) {
      return step([n, v]);
    };
  }

  function step(op) {
    if (f) throw new TypeError("Generator is already executing.");

    while (_) {
      try {
        if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
        if (y = 0, t) op = [op[0] & 2, t.value];

        switch (op[0]) {
          case 0:
          case 1:
            t = op;
            break;

          case 4:
            _.label++;
            return {
              value: op[1],
              done: false
            };

          case 5:
            _.label++;
            y = op[1];
            op = [0];
            continue;

          case 7:
            op = _.ops.pop();

            _.trys.pop();

            continue;

          default:
            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
              _ = 0;
              continue;
            }

            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
              _.label = op[1];
              break;
            }

            if (op[0] === 6 && _.label < t[1]) {
              _.label = t[1];
              t = op;
              break;
            }

            if (t && _.label < t[2]) {
              _.label = t[2];

              _.ops.push(op);

              break;
            }

            if (t[2]) _.ops.pop();

            _.trys.pop();

            continue;
        }

        op = body.call(thisArg, _);
      } catch (e) {
        op = [6, e];
        y = 0;
      } finally {
        f = t = 0;
      }
    }

    if (op[0] & 5) throw op[1];
    return {
      value: op[0] ? op[1] : void 0,
      done: true
    };
  }
};





function getNewSelectPartOptions() {
  var categories = _query_part__WEBPACK_IMPORTED_MODULE_2__["default"].getCategories();
  var options = [];
  var keys = Object.keys(categories);
  keys.forEach(function (key) {
    var children = categories[key].map(function (x) {
      return Object(_toSelectableValue__WEBPACK_IMPORTED_MODULE_3__["toSelectableValue"])(x.type);
    });
    options.push({
      label: key,
      options: children
    });
  });
  return options;
}
function getNewGroupByPartOptions(query, getTagKeys) {
  return __awaiter(this, void 0, Promise, function () {
    var tagKeys, queryCopy, model, options;
    return __generator(this, function (_a) {
      switch (_a.label) {
        case 0:
          return [4
          /*yield*/
          , getTagKeys()];

        case 1:
          tagKeys = _a.sent();
          queryCopy = __assign({}, query);
          model = new _APM_query_model__WEBPACK_IMPORTED_MODULE_0__["default"](queryCopy);
          options = [];

          if (!model.hasFill()) {
            options.push(Object(_toSelectableValue__WEBPACK_IMPORTED_MODULE_3__["toSelectableValue"])('fill(null)'));
          }

          if (!model.hasGroupByTime()) {
            options.push(Object(_toSelectableValue__WEBPACK_IMPORTED_MODULE_3__["toSelectableValue"])('time($interval)'));
          }

          tagKeys.forEach(function (key) {
            options.push(Object(_toSelectableValue__WEBPACK_IMPORTED_MODULE_3__["toSelectableValue"])("tag(".concat(key, ")")));
          });
          return [2
          /*return*/
          , options];
      }
    });
  });
}

function getPartParams(part, dynamicParamOptions) {
  var _a; // NOTE: the way the system is constructed,
  // there always can only be one possible dynamic-lookup
  // field. in case of select it is the field,
  // in case of group-by it is the tag


  var def = _query_part__WEBPACK_IMPORTED_MODULE_2__["default"].create(part).def; // we switch the numbers to strings, it will work that way too,
  // and it makes the code simpler

  var paramValues = ((_a = part.params) !== null && _a !== void 0 ? _a : []).map(function (p) {
    return p.toString();
  });

  if (paramValues.length !== def.params.length) {
    throw new Error('Invalid query-segment');
  }

  return paramValues.map(function (val, index) {
    var defParam = def.params[index];

    if (defParam.dynamicLookup) {
      return {
        value: val,
        options: Object(_unwrap__WEBPACK_IMPORTED_MODULE_1__["unwrap"])(dynamicParamOptions.get("".concat(def.type, "_").concat(index)))
      };
    }

    if (defParam.options !== null || defParam.options !== undefined) {
      return {
        value: val,
        options: function options() {
          return Promise.resolve(defParam.options);
        }
      };
    }

    return {
      value: val,
      options: null
    };
  });
}

function makePartList(queryParts, dynamicParamOptions) {
  return queryParts.map(function (qp) {
    return {
      name: qp.type,
      params: getPartParams(qp, dynamicParamOptions)
    };
  });
}

/***/ }),

/***/ "./datasource/apm-service/common/tagUtils.ts":
/*!***************************************************!*\
  !*** ./datasource/apm-service/common/tagUtils.ts ***!
  \***************************************************/
/*! exports provided: getOperator, getCondition, adjustOperatorIfNeeded */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getOperator", function() { return getOperator; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getCondition", function() { return getCondition; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "adjustOperatorIfNeeded", function() { return adjustOperatorIfNeeded; });
function isRegex(text) {
  return /^\/.*\/$/.test(text);
} // FIXME: sync these to the query-string-generation-code
// probably it's in apm_query_model.ts


function getOperator(tag) {
  var _a;

  return (_a = tag.operator) !== null && _a !== void 0 ? _a : isRegex(tag.value) ? '=~' : '=';
} // FIXME: sync these to the query-string-generation-code
// probably it's in apm_query_model.ts

function getCondition(tag, isFirst) {
  var _a;

  return isFirst ? undefined : (_a = tag.condition) !== null && _a !== void 0 ? _a : 'AND';
}
function adjustOperatorIfNeeded(currentOperator, newTagValue) {
  var isCurrentOperatorRegex = currentOperator === '=~' || currentOperator === '!~';
  var isNewTagValueRegex = isRegex(newTagValue);

  if (isNewTagValueRegex) {
    return isCurrentOperatorRegex ? currentOperator : '=~';
  } else {
    return isCurrentOperatorRegex ? '=' : currentOperator;
  }
}

/***/ }),

/***/ "./datasource/apm-service/common/toSelectableValue.ts":
/*!************************************************************!*\
  !*** ./datasource/apm-service/common/toSelectableValue.ts ***!
  \************************************************************/
/*! exports provided: toSelectableValue */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "toSelectableValue", function() { return toSelectableValue; });
function toSelectableValue(t) {
  return {
    label: t,
    value: t
  };
}

/***/ }),

/***/ "./datasource/apm-service/common/unwrap.ts":
/*!*************************************************!*\
  !*** ./datasource/apm-service/common/unwrap.ts ***!
  \*************************************************/
/*! exports provided: unwrap */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "unwrap", function() { return unwrap; });
function unwrap(value) {
  if (value === null) {
    throw new Error('value must not be nullish');
  }

  return value;
}

/***/ }),

/***/ "./datasource/apm-service/common/useShadowedState.ts":
/*!***********************************************************!*\
  !*** ./datasource/apm-service/common/useShadowedState.ts ***!
  \***********************************************************/
/*! exports provided: useShadowedState */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "useShadowedState", function() { return useShadowedState; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_use__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react-use */ "../node_modules/react-use/esm/index.js");


function useShadowedState(outsideVal) {
  var _a = Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])(outsideVal),
      currentVal = _a[0],
      setCurrentVal = _a[1];

  var prevOutsideVal = Object(react_use__WEBPACK_IMPORTED_MODULE_1__["usePrevious"])(outsideVal);
  Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
    var isOutsideValChanged = prevOutsideVal !== outsideVal; // if the value changes from the outside, we accept it into the state
    // (we only set it if it is different from the current value)

    if (isOutsideValChanged && currentVal !== outsideVal) {
      setCurrentVal(outsideVal);
    }
  }, [outsideVal, currentVal, prevOutsideVal]);
  return [currentVal, setCurrentVal];
}

/***/ }),

/***/ "./datasource/apm-service/common/useUniqueId.ts":
/*!******************************************************!*\
  !*** ./datasource/apm-service/common/useUniqueId.ts ***!
  \******************************************************/
/*! exports provided: useUniqueId */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "useUniqueId", function() { return useUniqueId; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lodash */ "lodash");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_1__);


function useUniqueId() {
  // we need to lazy-init this ref.
  // otherwise we would call `uniqueId`
  // on every render. unfortunately
  // useRef does not have lazy-init builtin,
  // like useState does. we do it manually.
  var idRefLazy = Object(react__WEBPACK_IMPORTED_MODULE_0__["useRef"])(null);

  if (idRefLazy.current === null) {
    idRefLazy.current = Object(lodash__WEBPACK_IMPORTED_MODULE_1__["uniqueId"])();
  }

  return idRefLazy.current;
}

/***/ }),

/***/ "./datasource/apm-service/components/AddButton.tsx":
/*!*********************************************************!*\
  !*** ./datasource/apm-service/components/AddButton.tsx ***!
  \*********************************************************/
/*! exports provided: AddButton */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AddButton", function() { return AddButton; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _Seg__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Seg */ "./datasource/apm-service/components/Seg.tsx");
/* harmony import */ var _common_unwrap__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../common/unwrap */ "./datasource/apm-service/common/unwrap.ts");



var AddButton = function AddButton(_a) {
  var loadOptions = _a.loadOptions,
      allowCustomValue = _a.allowCustomValue,
      onAdd = _a.onAdd;
  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Seg__WEBPACK_IMPORTED_MODULE_1__["Seg"], {
    value: "+",
    loadOptions: loadOptions,
    allowCustomValue: allowCustomValue,
    onChange: function onChange(v) {
      onAdd(Object(_common_unwrap__WEBPACK_IMPORTED_MODULE_2__["unwrap"])(v.value));
    }
  });
};

/***/ }),

/***/ "./datasource/apm-service/components/FormatAsSection.tsx":
/*!***************************************************************!*\
  !*** ./datasource/apm-service/components/FormatAsSection.tsx ***!
  \***************************************************************/
/*! exports provided: FormatAsSection */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FormatAsSection", function() { return FormatAsSection; });
/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @grafana/ui */ "@grafana/ui");
/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_grafana_ui__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var emotion__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! emotion */ "emotion");
/* harmony import */ var emotion__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(emotion__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _common_unwrap__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../common/unwrap */ "./datasource/apm-service/common/unwrap.ts");
/* harmony import */ var _common_constants__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../common/constants */ "./datasource/apm-service/common/constants.ts");
/* harmony import */ var _styles__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./styles */ "./datasource/apm-service/components/styles.ts");






var className = Object(emotion__WEBPACK_IMPORTED_MODULE_1__["cx"])('width-8', _styles__WEBPACK_IMPORTED_MODULE_5__["paddingRightClass"]);
var FormatAsSection = function FormatAsSection(_a) {
  var format = _a.format,
      inputId = _a.inputId,
      _onChange = _a.onChange;
  return react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_0__["Select"], {
    inputId: inputId,
    className: className,
    onChange: function onChange(v) {
      _onChange(Object(_common_unwrap__WEBPACK_IMPORTED_MODULE_3__["unwrap"])(v.value));
    },
    value: format,
    options: _common_constants__WEBPACK_IMPORTED_MODULE_4__["RESULT_FORMATS"]
  });
};

/***/ }),

/***/ "./datasource/apm-service/components/FromSection.tsx":
/*!***********************************************************!*\
  !*** ./datasource/apm-service/components/FromSection.tsx ***!
  \***********************************************************/
/*! exports provided: FromSection */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FromSection", function() { return FromSection; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _Seg__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Seg */ "./datasource/apm-service/components/Seg.tsx");
/* harmony import */ var _common_toSelectableValue__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../common/toSelectableValue */ "./datasource/apm-service/common/toSelectableValue.ts");
var __awaiter = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {
  function adopt(value) {
    return value instanceof P ? value : new P(function (resolve) {
      resolve(value);
    });
  }

  return new (P || (P = Promise))(function (resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }

    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }

    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }

    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};

var __generator = undefined && undefined.__generator || function (thisArg, body) {
  var _ = {
    label: 0,
    sent: function sent() {
      if (t[0] & 1) throw t[1];
      return t[1];
    },
    trys: [],
    ops: []
  },
      f,
      y,
      t,
      g;
  return g = {
    next: verb(0),
    "throw": verb(1),
    "return": verb(2)
  }, typeof Symbol === "function" && (g[Symbol.iterator] = function () {
    return this;
  }), g;

  function verb(n) {
    return function (v) {
      return step([n, v]);
    };
  }

  function step(op) {
    if (f) throw new TypeError("Generator is already executing.");

    while (_) {
      try {
        if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
        if (y = 0, t) op = [op[0] & 2, t.value];

        switch (op[0]) {
          case 0:
          case 1:
            t = op;
            break;

          case 4:
            _.label++;
            return {
              value: op[1],
              done: false
            };

          case 5:
            _.label++;
            y = op[1];
            op = [0];
            continue;

          case 7:
            op = _.ops.pop();

            _.trys.pop();

            continue;

          default:
            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
              _ = 0;
              continue;
            }

            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
              _.label = op[1];
              break;
            }

            if (op[0] === 6 && _.label < t[1]) {
              _.label = t[1];
              t = op;
              break;
            }

            if (t && _.label < t[2]) {
              _.label = t[2];

              _.ops.push(op);

              break;
            }

            if (t[2]) _.ops.pop();

            _.trys.pop();

            continue;
        }

        op = body.call(thisArg, _);
      } catch (e) {
        op = [6, e];
        y = 0;
      } finally {
        f = t = 0;
      }
    }

    if (op[0] & 5) throw op[1];
    return {
      value: op[0] ? op[1] : void 0,
      done: true
    };
  }
};

var __spreadArray = undefined && undefined.__spreadArray || function (to, from, pack) {
  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {
    if (ar || !(i in from)) {
      if (!ar) ar = Array.prototype.slice.call(from, 0, i);
      ar[i] = from[i];
    }
  }
  return to.concat(ar || Array.prototype.slice.call(from));
};




var DEFAULT_POLICY = 'default';
var FromSection = function FromSection(_a) {
  var policy = _a.policy,
      measurement = _a.measurement,
      _onChange = _a.onChange,
      getPolicyOptions = _a.getPolicyOptions,
      getMeasurementOptions = _a.getMeasurementOptions;

  var handlePolicyLoadOptions = function handlePolicyLoadOptions() {
    return __awaiter(void 0, void 0, void 0, function () {
      var allPolicies, allPoliciesWithDefault;
      return __generator(this, function (_a) {
        switch (_a.label) {
          case 0:
            return [4
            /*yield*/
            , getPolicyOptions()];

          case 1:
            allPolicies = _a.sent();
            allPoliciesWithDefault = allPolicies.some(function (p) {
              return p === 'default';
            }) ? allPolicies : __spreadArray([DEFAULT_POLICY], allPolicies, true);
            return [2
            /*return*/
            , allPoliciesWithDefault.map(_common_toSelectableValue__WEBPACK_IMPORTED_MODULE_2__["toSelectableValue"])];
        }
      });
    });
  };

  var handleMeasurementLoadOptions = function handleMeasurementLoadOptions(filter) {
    return __awaiter(void 0, void 0, void 0, function () {
      var allMeasurements;
      return __generator(this, function (_a) {
        switch (_a.label) {
          case 0:
            return [4
            /*yield*/
            , getMeasurementOptions(filter)];

          case 1:
            allMeasurements = _a.sent();
            return [2
            /*return*/
            , allMeasurements.map(_common_toSelectableValue__WEBPACK_IMPORTED_MODULE_2__["toSelectableValue"])];
        }
      });
    });
  };

  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment, null, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Seg__WEBPACK_IMPORTED_MODULE_1__["Seg"], {
    allowCustomValue: true,
    value: policy !== null && policy !== void 0 ? policy : 'using default policy',
    loadOptions: handlePolicyLoadOptions,
    onChange: function onChange(v) {
      _onChange(v.value, measurement);
    }
  }), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Seg__WEBPACK_IMPORTED_MODULE_1__["Seg"], {
    allowCustomValue: true,
    value: measurement !== null && measurement !== void 0 ? measurement : 'select measurement',
    loadOptions: handleMeasurementLoadOptions,
    filterByLoadOptions: true,
    onChange: function onChange(v) {
      _onChange(policy, v.value);
    }
  }));
};

/***/ }),

/***/ "./datasource/apm-service/components/InputSection.tsx":
/*!************************************************************!*\
  !*** ./datasource/apm-service/components/InputSection.tsx ***!
  \************************************************************/
/*! exports provided: InputSection */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "InputSection", function() { return InputSection; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var emotion__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! emotion */ "emotion");
/* harmony import */ var emotion__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(emotion__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @grafana/ui */ "@grafana/ui");
/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_grafana_ui__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _common_useShadowedState__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../common/useShadowedState */ "./datasource/apm-service/common/useShadowedState.ts");
/* harmony import */ var _styles__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./styles */ "./datasource/apm-service/components/styles.ts");





var InputSection = function InputSection(_a) {
  var value = _a.value,
      onChange = _a.onChange,
      isWide = _a.isWide,
      placeholder = _a.placeholder;

  var _b = Object(_common_useShadowedState__WEBPACK_IMPORTED_MODULE_3__["useShadowedState"])(value),
      currentValue = _b[0],
      setCurrentValue = _b[1];

  var onBlur = function onBlur() {
    // we send empty-string as undefined
    var newValue = currentValue === '' ? undefined : currentValue;
    onChange(newValue);
  };

  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_2__["Input"], {
    placeholder: placeholder,
    className: Object(emotion__WEBPACK_IMPORTED_MODULE_1__["cx"])((isWide !== null && isWide !== void 0 ? isWide : false) ? 'width-14' : 'width-8', _styles__WEBPACK_IMPORTED_MODULE_4__["paddingRightClass"]),
    type: "text",
    spellCheck: false,
    onBlur: onBlur,
    onChange: function onChange(e) {
      setCurrentValue(e.currentTarget.value);
    },
    value: currentValue !== null && currentValue !== void 0 ? currentValue : ''
  });
};

/***/ }),

/***/ "./datasource/apm-service/components/OrderBySeries.tsx":
/*!*************************************************************!*\
  !*** ./datasource/apm-service/components/OrderBySeries.tsx ***!
  \*************************************************************/
/*! exports provided: OrderBySeries */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "OrderBySeries", function() { return OrderBySeries; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var emotion__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! emotion */ "emotion");
/* harmony import */ var emotion__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(emotion__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _common_unwrap__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../common/unwrap */ "./datasource/apm-service/common/unwrap.ts");
/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @grafana/ui */ "@grafana/ui");
/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_grafana_ui__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _styles__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./styles */ "./datasource/apm-service/components/styles.ts");




 // type Mode = 'string';

var OPTIONS = [{
  label: 'ascending',
  value: 'ASC'
}, {
  label: 'descending',
  value: 'DESC'
}];
var className = Object(emotion__WEBPACK_IMPORTED_MODULE_1__["cx"])('width-9', _styles__WEBPACK_IMPORTED_MODULE_4__["paddingRightClass"]);
var OrderBySeries = function OrderBySeries(_a) {
  var value = _a.value,
      _onChange = _a.onChange,
      inputId = _a.inputId;
  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_3__["Select"], {
    inputId: inputId,
    className: className,
    onChange: function onChange(v) {
      _onChange(Object(_common_unwrap__WEBPACK_IMPORTED_MODULE_2__["unwrap"])(v.value));
    },
    value: value,
    options: OPTIONS
  });
};

/***/ }),

/***/ "./datasource/apm-service/components/PartListSection.tsx":
/*!***************************************************************!*\
  !*** ./datasource/apm-service/components/PartListSection.tsx ***!
  \***************************************************************/
/*! exports provided: PartListSection */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PartListSection", function() { return PartListSection; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var emotion__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! emotion */ "emotion");
/* harmony import */ var emotion__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(emotion__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @grafana/ui */ "@grafana/ui");
/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_grafana_ui__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _Seg__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Seg */ "./datasource/apm-service/components/Seg.tsx");
/* harmony import */ var _common_unwrap__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../common/unwrap */ "./datasource/apm-service/common/unwrap.ts");
/* harmony import */ var _common_toSelectableValue__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../common/toSelectableValue */ "./datasource/apm-service/common/toSelectableValue.ts");
/* harmony import */ var _AddButton__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./AddButton */ "./datasource/apm-service/components/AddButton.tsx");








var renderRemovableNameMenuItems = function renderRemovableNameMenuItems(onClick) {
  return [{
    items: [{
      label: 'remove',
      onClick: onClick
    }]
  }];
};

var noRightMarginPaddingClass = Object(emotion__WEBPACK_IMPORTED_MODULE_1__["css"])({
  paddingRight: '0',
  marginRight: '0'
});

var RemovableName = function RemovableName(_a) {
  var name = _a.name,
      onRemove = _a.onRemove;
  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_2__["WithContextMenu"], {
    getContextMenuItems: function getContextMenuItems() {
      return renderRemovableNameMenuItems(onRemove);
    }
  }, function (_a) {
    var openMenu = _a.openMenu;
    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("button", {
      className: Object(emotion__WEBPACK_IMPORTED_MODULE_1__["cx"])('gf-form-label', noRightMarginPaddingClass),
      onClick: openMenu
    }, name);
  });
};

var noHorizMarginPaddingClass = Object(emotion__WEBPACK_IMPORTED_MODULE_1__["css"])({
  paddingLeft: '0',
  paddingRight: '0',
  marginLeft: '0',
  marginRight: '0'
});

var getPartClass = function getPartClass(theme) {
  return Object(emotion__WEBPACK_IMPORTED_MODULE_1__["cx"])('gf-form-label', Object(emotion__WEBPACK_IMPORTED_MODULE_1__["css"])({
    paddingLeft: '0',
    // gf-form-label class makes certain css attributes incorrect
    // for the selectbox-dropdown, so we have to "reset" them back
    lineHeight: theme.typography.lineHeight.md,
    fontSize: theme.typography.size.base
  }));
};

var Part = function Part(_a) {
  var name = _a.name,
      params = _a.params,
      onChange = _a.onChange,
      onRemove = _a.onRemove;
  var theme = Object(_grafana_ui__WEBPACK_IMPORTED_MODULE_2__["useTheme"])();
  var partClass = Object(react__WEBPACK_IMPORTED_MODULE_0__["useMemo"])(function () {
    return getPartClass(theme);
  }, [theme]);

  var onParamChange = function onParamChange(par, i) {
    var newParams = params.map(function (p) {
      return p.value;
    });
    newParams[i] = par;
    onChange(newParams);
  };

  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", {
    className: partClass
  }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(RemovableName, {
    name: name,
    onRemove: onRemove
  }), "(", params.map(function (p, i) {
    var value = p.value,
        options = p.options;
    var isLast = i === params.length - 1;
    var loadOptions = options !== null ? function () {
      return options().then(function (items) {
        return items.map(_common_toSelectableValue__WEBPACK_IMPORTED_MODULE_5__["toSelectableValue"]);
      });
    } : undefined;
    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment, {
      key: i
    }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Seg__WEBPACK_IMPORTED_MODULE_3__["Seg"], {
      allowCustomValue: true,
      value: value,
      buttonClassName: noHorizMarginPaddingClass,
      loadOptions: loadOptions,
      onChange: function onChange(v) {
        onParamChange(Object(_common_unwrap__WEBPACK_IMPORTED_MODULE_4__["unwrap"])(v.value), i);
      }
    }), !isLast && ',');
  }), ")");
};

var PartListSection = function PartListSection(_a) {
  var parts = _a.parts,
      getNewPartOptions = _a.getNewPartOptions,
      onAddNewPart = _a.onAddNewPart,
      onRemovePart = _a.onRemovePart,
      _onChange = _a.onChange;
  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment, null, parts.map(function (part, index) {
    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Part, {
      key: index,
      name: part.name,
      params: part.params,
      onRemove: function onRemove() {
        onRemovePart(index);
      },
      onChange: function onChange(pars) {
        _onChange(index, pars);
      }
    });
  }), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_AddButton__WEBPACK_IMPORTED_MODULE_6__["AddButton"], {
    loadOptions: getNewPartOptions,
    onAdd: onAddNewPart
  }));
};

/***/ }),

/***/ "./datasource/apm-service/components/Seg.tsx":
/*!***************************************************!*\
  !*** ./datasource/apm-service/components/Seg.tsx ***!
  \***************************************************/
/*! exports provided: Seg */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Seg", function() { return Seg; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var emotion__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! emotion */ "emotion");
/* harmony import */ var emotion__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(emotion__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react_use__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react-use */ "../node_modules/react-use/esm/index.js");
/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @grafana/ui */ "@grafana/ui");
/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_grafana_ui__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _common_useShadowedState__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../common/useShadowedState */ "./datasource/apm-service/common/useShadowedState.ts");





var selectClass = Object(emotion__WEBPACK_IMPORTED_MODULE_1__["css"])({
  minWidth: '160px'
}); // when a custom value is written into a select-box,
// by default the new value is prefixed with "Create:",
// and that sounds confusing because here we do not create
// anything. we change this to just be the entered string.

var formatCreateLabel = function formatCreateLabel(v) {
  return v;
};

var SelReload = function SelReload(_a) {
  var loadOptions = _a.loadOptions,
      allowCustomValue = _a.allowCustomValue,
      onChange = _a.onChange,
      onClose = _a.onClose; // here we rely on the fact that writing text into the <AsyncSelect/>
  // does not cause a re-render of the current react component.
  // this way there is only a single render-call,
  // so there is only a single `debouncedLoadOptions`.
  // if we want ot make this "re-render safe,
  // we will have to put the debounced call into an useRef,
  // and probably have an useEffect
  // const debouncedLoadOptions = debouncePromise(loadOptions, 1000, { leading: true });

  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", {
    className: selectClass
  }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_3__["AsyncSelect"], {
    formatCreateLabel: formatCreateLabel,
    defaultOptions: true,
    autoFocus: true,
    isOpen: true,
    onCloseMenu: onClose,
    allowCustomValue: allowCustomValue,
    loadOptions: loadOptions,
    onChange: onChange
  }));
};

var SelSingleLoad = function SelSingleLoad(_a) {
  var _b;

  var loadOptions = _a.loadOptions,
      allowCustomValue = _a.allowCustomValue,
      onChange = _a.onChange,
      onClose = _a.onClose;

  var _c = Object(react_use__WEBPACK_IMPORTED_MODULE_2__["useAsyncFn"])(loadOptions, [loadOptions]),
      loadState = _c[0],
      doLoad = _c[1];

  Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
    doLoad('');
  }, [doLoad, loadOptions]);
  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", {
    className: selectClass
  }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_3__["Select"], {
    isLoading: loadState.loading,
    formatCreateLabel: formatCreateLabel,
    autoFocus: true,
    isOpen: true,
    onCloseMenu: onClose,
    allowCustomValue: allowCustomValue,
    options: (_b = loadState.value) !== null && _b !== void 0 ? _b : [],
    onChange: onChange
  }));
};

var Sel = function Sel(_a) {
  var loadOptions = _a.loadOptions,
      filterByLoadOptions = _a.filterByLoadOptions,
      allowCustomValue = _a.allowCustomValue,
      onChange = _a.onChange,
      onClose = _a.onClose; // unfortunately <Segment/> and <SegmentAsync/> have somewhat different behavior,
  // so the simplest approach was to just create two separate wrapper-components

  return filterByLoadOptions ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(SelReload, {
    loadOptions: loadOptions,
    allowCustomValue: allowCustomValue,
    onChange: onChange,
    onClose: onClose
  }) : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(SelSingleLoad, {
    loadOptions: loadOptions,
    allowCustomValue: allowCustomValue,
    onChange: onChange,
    onClose: onClose
  });
};

var Inp = function Inp(_a) {
  var initialValue = _a.initialValue,
      onChange = _a.onChange,
      onClose = _a.onClose;

  var _b = Object(_common_useShadowedState__WEBPACK_IMPORTED_MODULE_4__["useShadowedState"])(initialValue),
      currentValue = _b[0],
      setCurrentValue = _b[1];

  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_3__["Input"], {
    autoFocus: true,
    type: "text",
    spellCheck: false,
    onBlur: onClose,
    onKeyDown: function onKeyDown(e) {
      if (e.key === 'Enter') {
        onChange(currentValue);
      }
    },
    onChange: function onChange(e) {
      setCurrentValue(e.currentTarget.value);
    },
    value: currentValue
  });
};

var defaultButtonClass = Object(emotion__WEBPACK_IMPORTED_MODULE_1__["css"])({
  width: 'auto',
  cursor: 'pointer'
});
var Seg = function Seg(_a) {
  var value = _a.value,
      buttonClassName = _a.buttonClassName,
      loadOptions = _a.loadOptions,
      filterByLoadOptions = _a.filterByLoadOptions,
      allowCustomValue = _a.allowCustomValue,
      _onChange = _a.onChange,
      disabled = _a.disabled;

  var _b = Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])(false),
      isOpen = _b[0],
      setOpen = _b[1];

  if (!isOpen) {
    var className = Object(emotion__WEBPACK_IMPORTED_MODULE_1__["cx"])(defaultButtonClass, buttonClassName);
    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_3__["InlineLabel"], {
      as: "button",
      className: className,
      onClick: function onClick() {
        setOpen(!disabled);
      }
    }, value);
  } else {
    if (loadOptions !== undefined) {
      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Sel, {
        loadOptions: loadOptions,
        filterByLoadOptions: filterByLoadOptions !== null && filterByLoadOptions !== void 0 ? filterByLoadOptions : false,
        allowCustomValue: allowCustomValue,
        onChange: function onChange(v) {
          setOpen(false);

          _onChange(v);
        },
        onClose: function onClose() {
          setOpen(false);
        }
      });
    } else {
      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Inp, {
        initialValue: value,
        onClose: function onClose() {
          setOpen(false);
        },
        onChange: function onChange(v) {
          setOpen(false);

          _onChange({
            value: v,
            label: v
          });
        }
      });
    }
  }
};

/***/ }),

/***/ "./datasource/apm-service/components/SegmentSection.tsx":
/*!**************************************************************!*\
  !*** ./datasource/apm-service/components/SegmentSection.tsx ***!
  \**************************************************************/
/*! exports provided: SegmentSection */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SegmentSection", function() { return SegmentSection; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var emotion__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! emotion */ "emotion");
/* harmony import */ var emotion__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(emotion__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @grafana/ui */ "@grafana/ui");
/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_grafana_ui__WEBPACK_IMPORTED_MODULE_2__);
var __makeTemplateObject = undefined && undefined.__makeTemplateObject || function (cooked, raw) {
  if (Object.defineProperty) {
    Object.defineProperty(cooked, "raw", {
      value: raw
    });
  } else {
    cooked.raw = raw;
  }

  return cooked;
};




/**
 * Horizontal section for editor components.
 *
 * @alpha
 */

var SegmentSection = function SegmentSection(_a) {
  var label = _a.label,
      htmlFor = _a.htmlFor,
      children = _a.children,
      fill = _a.fill;
  var styles = Object(_grafana_ui__WEBPACK_IMPORTED_MODULE_2__["useStyles"])(getStyles);
  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_2__["InlineFieldRow"], null, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_2__["InlineLabel"], {
    htmlFor: htmlFor,
    width: 12,
    className: styles.label
  }, label), children, fill && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", {
    className: styles.fill
  }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_2__["InlineLabel"], null, " ")));
};

var getStyles = function getStyles(theme) {
  return {
    label: Object(emotion__WEBPACK_IMPORTED_MODULE_1__["css"])(templateObject_1 || (templateObject_1 = __makeTemplateObject(["\n    color: #33a2e5;\n  "], ["\n    color: #33a2e5;\n  "]))),
    fill: Object(emotion__WEBPACK_IMPORTED_MODULE_1__["css"])(templateObject_2 || (templateObject_2 = __makeTemplateObject(["\n    flex-grow: 1;\n    margin-bottom: ", ";\n  "], ["\n    flex-grow: 1;\n    margin-bottom: ", ";\n  "])), theme.spacing.inlineFormMargin)
  };
};

var templateObject_1, templateObject_2;

/***/ }),

/***/ "./datasource/apm-service/components/TagsSection.tsx":
/*!***********************************************************!*\
  !*** ./datasource/apm-service/components/TagsSection.tsx ***!
  \***********************************************************/
/*! exports provided: TagsSection */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TagsSection", function() { return TagsSection; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _Seg__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Seg */ "./datasource/apm-service/components/Seg.tsx");
/* harmony import */ var _common_toSelectableValue__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../common/toSelectableValue */ "./datasource/apm-service/common/toSelectableValue.ts");
/* harmony import */ var _common_tagUtils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../common/tagUtils */ "./datasource/apm-service/common/tagUtils.ts");
/* harmony import */ var _AddButton__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./AddButton */ "./datasource/apm-service/components/AddButton.tsx");
var __assign = undefined && undefined.__assign || function () {
  __assign = Object.assign || function (t) {
    for (var s, i = 1, n = arguments.length; i < n; i++) {
      s = arguments[i];

      for (var p in s) {
        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
      }
    }

    return t;
  };

  return __assign.apply(this, arguments);
};

var __spreadArray = undefined && undefined.__spreadArray || function (to, from, pack) {
  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {
    if (ar || !(i in from)) {
      if (!ar) ar = Array.prototype.slice.call(from, 0, i);
      ar[i] = from[i];
    }
  }
  return to.concat(ar || Array.prototype.slice.call(from));
};






var knownOperators = ['=', '!=', '<>', '<', '>', '=~', '!~', 'in'];
var knownConditions = ['AND', 'OR'];
var operatorOptions = knownOperators.map(_common_toSelectableValue__WEBPACK_IMPORTED_MODULE_2__["toSelectableValue"]);
var condititonOptions = knownConditions.map(_common_toSelectableValue__WEBPACK_IMPORTED_MODULE_2__["toSelectableValue"]);

var loadConditionOptions = function loadConditionOptions() {
  return Promise.resolve(condititonOptions);
};

var loadOperatorOptions = function loadOperatorOptions() {
  return Promise.resolve(operatorOptions);
};

var Tag = function Tag(_a) {
  var tag = _a.tag,
      isFirst = _a.isFirst,
      onRemove = _a.onRemove,
      _onChange = _a.onChange,
      getTagKeyOptions = _a.getTagKeyOptions,
      getTagValueOptions = _a.getTagValueOptions;
  var operator = Object(_common_tagUtils__WEBPACK_IMPORTED_MODULE_3__["getOperator"])(tag);
  var condition = Object(_common_tagUtils__WEBPACK_IMPORTED_MODULE_3__["getCondition"])(tag, isFirst);

  var getTagKeySegmentOptions = function getTagKeySegmentOptions() {
    return getTagKeyOptions()["catch"](function (err) {
      // in this UI element we add a special item to the list of options,
      // that is used to remove the element.
      // this causes a problem: if `getTagKeyOptions` fails with an error,
      // the remove-filter option is never added to the list,
      // and the UI element can not be removed.
      // to avoid it, we catch any potential errors coming from `getTagKeyOptions`,
      // log the error, and pretend that the list of options is an empty list.
      // this way the remove-item option can always be added to the list.
      console.error(err);
      return [];
    }).then(function (tags) {
      return __spreadArray([{
        label: '-- remove filter --',
        value: undefined
      }], tags.map(_common_toSelectableValue__WEBPACK_IMPORTED_MODULE_2__["toSelectableValue"]), true);
    });
  };

  var getTagValueSegmentOptions = function getTagValueSegmentOptions() {
    return getTagValueOptions(tag.key).then(function (tags) {
      return tags.map(_common_toSelectableValue__WEBPACK_IMPORTED_MODULE_2__["toSelectableValue"]);
    });
  };

  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", {
    className: "gf-form"
  }, condition !== undefined && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Seg__WEBPACK_IMPORTED_MODULE_1__["Seg"], {
    value: condition,
    loadOptions: loadConditionOptions,
    disabled: true,
    onChange: function onChange(v) {
      _onChange(__assign(__assign({}, tag), {
        condition: v.value
      }));
    }
  }), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Seg__WEBPACK_IMPORTED_MODULE_1__["Seg"], {
    allowCustomValue: true,
    value: tag.key,
    loadOptions: getTagKeySegmentOptions,
    onChange: function onChange(v) {
      var value = v.value;

      if (value === undefined) {
        onRemove();
      } else {
        _onChange(__assign(__assign({}, tag), {
          key: value !== null && value !== void 0 ? value : ''
        }));
      }
    }
  }), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Seg__WEBPACK_IMPORTED_MODULE_1__["Seg"], {
    value: operator,
    loadOptions: loadOperatorOptions,
    onChange: function onChange(op) {
      _onChange(__assign(__assign({}, tag), {
        operator: op.value
      }));
    }
  }), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Seg__WEBPACK_IMPORTED_MODULE_1__["Seg"], {
    allowCustomValue: true,
    value: tag.value,
    loadOptions: getTagValueSegmentOptions,
    onChange: function onChange(v) {
      var _a;

      var value = (_a = v.value) !== null && _a !== void 0 ? _a : '';

      _onChange(__assign(__assign({}, tag), {
        value: value,
        operator: Object(_common_tagUtils__WEBPACK_IMPORTED_MODULE_3__["adjustOperatorIfNeeded"])(operator, value)
      }));
    }
  }));
};

var TagsSection = function TagsSection(_a) {
  var tags = _a.tags,
      onChange = _a.onChange,
      getTagKeyOptions = _a.getTagKeyOptions,
      getTagValueOptions = _a.getTagValueOptions;

  var onTagChange = function onTagChange(newTag, index) {
    var newTags = tags.map(function (tag, i) {
      return index === i ? newTag : tag;
    });
    onChange(newTags);
  };

  var onTagRemove = function onTagRemove(index) {
    var newTags = tags.filter(function (t, i) {
      return i !== index;
    });
    onChange(newTags);
  };

  var getTagKeySegmentOptions = function getTagKeySegmentOptions() {
    return getTagKeyOptions().then(function (tags) {
      return tags.map(_common_toSelectableValue__WEBPACK_IMPORTED_MODULE_2__["toSelectableValue"]);
    });
  };

  var addNewTag = function addNewTag(tagKey, isFirst) {
    var minimalTag = {
      key: tagKey,
      value: 'select tag value'
    };
    var newTag = {
      key: minimalTag.key,
      value: minimalTag.value,
      operator: Object(_common_tagUtils__WEBPACK_IMPORTED_MODULE_3__["getOperator"])(minimalTag),
      condition: Object(_common_tagUtils__WEBPACK_IMPORTED_MODULE_3__["getCondition"])(minimalTag, isFirst)
    };
    onChange(__spreadArray(__spreadArray([], tags, true), [newTag], false));
  };

  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment, null, tags.map(function (t, i) {
    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Tag, {
      tag: t,
      isFirst: i === 0,
      key: i,
      onChange: function onChange(newT) {
        onTagChange(newT, i);
      },
      onRemove: function onRemove() {
        onTagRemove(i);
      },
      getTagKeyOptions: getTagKeyOptions,
      getTagValueOptions: getTagValueOptions
    });
  }), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_AddButton__WEBPACK_IMPORTED_MODULE_4__["AddButton"], {
    allowCustomValue: true,
    loadOptions: getTagKeySegmentOptions,
    onAdd: function onAdd(v) {
      addNewTag(v, tags.length === 0);
    }
  }));
};

/***/ }),

/***/ "./datasource/apm-service/components/styles.ts":
/*!*****************************************************!*\
  !*** ./datasource/apm-service/components/styles.ts ***!
  \*****************************************************/
/*! exports provided: paddingRightClass */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "paddingRightClass", function() { return paddingRightClass; });
/* harmony import */ var emotion__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! emotion */ "emotion");
/* harmony import */ var emotion__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(emotion__WEBPACK_IMPORTED_MODULE_0__);

var paddingRightClass = Object(emotion__WEBPACK_IMPORTED_MODULE_0__["css"])({
  paddingRight: '4px'
});

/***/ }),

/***/ "./datasource/apm-service/queryUtils.ts":
/*!**********************************************!*\
  !*** ./datasource/apm-service/queryUtils.ts ***!
  \**********************************************/
/*! exports provided: normalizeQuery, addNewSelectPart, removeSelectPart, changeSelectPart, addNewGroupByPart, removeGroupByPart, changeGroupByPart */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "normalizeQuery", function() { return normalizeQuery; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "addNewSelectPart", function() { return addNewSelectPart; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "removeSelectPart", function() { return removeSelectPart; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "changeSelectPart", function() { return changeSelectPart; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "addNewGroupByPart", function() { return addNewGroupByPart; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "removeGroupByPart", function() { return removeGroupByPart; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "changeGroupByPart", function() { return changeGroupByPart; });
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lodash */ "lodash");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _APM_query_model__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./APM_query_model */ "./datasource/apm-service/APM_query_model.ts");
var __assign = undefined && undefined.__assign || function () {
  __assign = Object.assign || function (t) {
    for (var s, i = 1, n = arguments.length; i < n; i++) {
      s = arguments[i];

      for (var p in s) {
        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
      }
    }

    return t;
  };

  return __assign.apply(this, arguments);
};

var __spreadArray = undefined && undefined.__spreadArray || function (to, from, pack) {
  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {
    if (ar || !(i in from)) {
      if (!ar) ar = Array.prototype.slice.call(from, 0, i);
      ar[i] = from[i];
    }
  }
  return to.concat(ar || Array.prototype.slice.call(from));
};



function normalizeQuery(query) {
  // we return the original query if there is no need to update it
  if (query.policy !== undefined && query.resultFormat !== undefined && query.orderBy !== undefined && query.tags !== undefined && query.groupBy !== undefined && query.select !== undefined) {
    return query;
  } // FIXME: we should move the whole normalizeQuery logic here,
  // and then have APMQueryModel call this function,
  // to concentrate the whole logic here


  var queryCopy = Object(lodash__WEBPACK_IMPORTED_MODULE_0__["cloneDeep"])(query); // the query-model mutates the query

  return new _APM_query_model__WEBPACK_IMPORTED_MODULE_1__["default"](queryCopy).target;
}
function addNewSelectPart(query, type, index) {
  var queryCopy = Object(lodash__WEBPACK_IMPORTED_MODULE_0__["cloneDeep"])(query); // the query-model mutates the query

  var model = new _APM_query_model__WEBPACK_IMPORTED_MODULE_1__["default"](queryCopy);
  model.addSelectPart(model.selectModels[index], type);
  return model.target;
}
function removeSelectPart(query, partIndex, index) {
  var queryCopy = Object(lodash__WEBPACK_IMPORTED_MODULE_0__["cloneDeep"])(query); // the query-model mutates the query

  var model = new _APM_query_model__WEBPACK_IMPORTED_MODULE_1__["default"](queryCopy);
  var selectModel = model.selectModels[index];
  model.removeSelectPart(selectModel, selectModel[partIndex]);
  return model.target;
}
function changeSelectPart(query, listIndex, partIndex, newParams) {
  var _a; // we need to make shallow copy of `query.select` down to `query.select[listIndex][partIndex]`


  var newSel = __spreadArray([], (_a = query.select) !== null && _a !== void 0 ? _a : [], true);

  newSel[listIndex] = __spreadArray([], newSel[listIndex], true);
  newSel[listIndex][partIndex] = __assign(__assign({}, newSel[listIndex][partIndex]), {
    params: newParams
  });
  return __assign(__assign({}, query), {
    select: newSel
  });
}
function addNewGroupByPart(query, type) {
  var queryCopy = Object(lodash__WEBPACK_IMPORTED_MODULE_0__["cloneDeep"])(query); // the query-model mutates the query

  var model = new _APM_query_model__WEBPACK_IMPORTED_MODULE_1__["default"](queryCopy);
  model.addGroupBy(type);
  return model.target;
}
function removeGroupByPart(query, partIndex) {
  var queryCopy = Object(lodash__WEBPACK_IMPORTED_MODULE_0__["cloneDeep"])(query); // the query-model mutates the query

  var model = new _APM_query_model__WEBPACK_IMPORTED_MODULE_1__["default"](queryCopy);
  model.removeGroupByPart(model.groupByParts[partIndex], partIndex);
  return model.target;
}
function changeGroupByPart(query, partIndex, newParams) {
  var _a; // we need to make shallow copy of `query.groupBy` down to `query.groupBy[partIndex]`


  var newGroupBy = __spreadArray([], (_a = query.groupBy) !== null && _a !== void 0 ? _a : [], true);

  newGroupBy[partIndex] = __assign(__assign({}, newGroupBy[partIndex]), {
    params: newParams
  });
  return __assign(__assign({}, query), {
    groupBy: newGroupBy
  });
}

/***/ }),

/***/ "./datasource/apm-service/query_builder.ts":
/*!*************************************************!*\
  !*** ./datasource/apm-service/query_builder.ts ***!
  \*************************************************/
/*! exports provided: APMQueryBuilder */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "APMQueryBuilder", function() { return APMQueryBuilder; });
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lodash */ "lodash");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var grafana_app_core_utils_kbn__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! grafana/app/core/utils/kbn */ "grafana/app/core/utils/kbn");
/* harmony import */ var grafana_app_core_utils_kbn__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(grafana_app_core_utils_kbn__WEBPACK_IMPORTED_MODULE_1__);



function renderTagCondition(tag, index) {
  // FIXME: merge this function with APM_query_model/renderTagCondition
  var str = '';
  var operator = tag.operator;
  var value = tag.value;

  if (index > 0) {
    str = (tag.condition.toLowerCase() || 'AND') + ' ';
  }

  if (!operator) {
    if (/^\/.*\/$/.test(tag.value)) {
      operator = '=~';
    } else {
      operator = '=';
    }
  } // quote value unless regex or number, or if empty-string


  if (value === '' || operator !== '=~' && operator !== '!~') {
    value = "'" + value.replace(/\\/g, '\\\\').replace(/\'/g, "\\'") + "'";
  }

  return str + '"' + tag.key + '" ' + operator + ' ' + value;
}

var APMQueryBuilder =
/** @class */
function () {
  // eslint-disable-next-line @typescript-eslint/no-parameter-properties
  function APMQueryBuilder(target, database) {
    this.target = target;
    this.database = database;
  }

  APMQueryBuilder.prototype.buildExploreQuery = function (type, withKey, withMeasurementFilter) {
    var query = '';
    var measurement;
    var policy;

    if (type === 'TAG_KEYS') {
      query = 'show tag keys';
      measurement = this.target.measurement;
      policy = this.target.policy;
    } else if (type === 'TAG_VALUES') {
      query = 'show tag values';
      measurement = this.target.measurement;
      policy = this.target.policy;
    } else if (type === 'MEASUREMENTS') {
      query = 'show measurements';

      if (withMeasurementFilter) {
        // we do a case-insensitive regex-based lookup
        query += ' with measurement =~ /(?i)' + grafana_app_core_utils_kbn__WEBPACK_IMPORTED_MODULE_1___default.a.regexEscape(withMeasurementFilter) + '/';
      }
    } else if (type === 'FIELDS') {
      measurement = this.target.measurement;
      policy = this.target.policy;

      if (!measurement.match('^/.*/')) {
        measurement = '"' + measurement + '"';

        if (policy && policy !== 'default') {
          policy = '"' + policy + '"';
          measurement = policy + '.' + measurement;
        }
      }

      return 'show field keys from ' + measurement;
    } else if (type === 'RETENTION POLICIES') {
      query = 'show retention policies on "' + this.database + '"';
      return query;
    }

    if (measurement) {
      if (!measurement.match('^/.*/') && !measurement.match(/^merge\(.*\)/)) {
        measurement = '"' + measurement + '"';
      }

      if (policy && policy !== 'default') {
        policy = '"' + policy + '"';
        measurement = policy + '.' + measurement;
      }

      query += ' from ' + measurement;
    }

    if (withKey) {
      query += ' with key = "' + withKey + '"';
    }

    if (this.target.tags && this.target.tags.length > 0) {
      var whereConditions = Object(lodash__WEBPACK_IMPORTED_MODULE_0__["reduce"])(this.target.tags, function (memo, tag) {
        if (type === 'MEASUREMENTS' && tag.key === 'id') {
          return memo;
        } // do not add a condition for the key we want to explore for


        if (tag.key === withKey) {
          return memo;
        } // value operators not supported in these types of queries


        if (tag.operator === '>' || tag.operator === '<') {
          return memo;
        }

        memo.push(renderTagCondition(tag, memo.length));
        return memo;
      }, []);

      if (whereConditions.length > 0) {
        query += ' where ' + whereConditions.join(' ');
      }
    }

    if (type === 'MEASUREMENTS') {
      query += ' limit 100'; // Solve issue #2524 by limiting the number of measurements returned
      // LIMIT must be after WITH MEASUREMENT and WHERE clauses
      // This also could be used for TAG KEYS and TAG VALUES, if desired
    }

    return query;
  };

  return APMQueryBuilder;
}();



/***/ }),

/***/ "./datasource/apm-service/query_part.ts":
/*!**********************************************!*\
  !*** ./datasource/apm-service/query_part.ts ***!
  \**********************************************/
/*! exports provided: QueryPartDef, QueryPart, functionRenderer, suffixRenderer, identityRenderer, quotedIdentityRenderer, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "QueryPartDef", function() { return QueryPartDef; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "QueryPart", function() { return QueryPart; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "functionRenderer", function() { return functionRenderer; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "suffixRenderer", function() { return suffixRenderer; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "identityRenderer", function() { return identityRenderer; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "quotedIdentityRenderer", function() { return quotedIdentityRenderer; });
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lodash */ "lodash");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__);


var QueryPartDef =
/** @class */
function () {
  function QueryPartDef(options) {
    this.type = options.type;
    this.params = options.params;
    this.defaultParams = options.defaultParams;
    this.renderer = options.renderer;
    this.category = options.category;
    this.addStrategy = options.addStrategy;
  }

  return QueryPartDef;
}();



var QueryPart =
/** @class */
function () {
  function QueryPart(part, def) {
    this.part = part;
    this.def = def;

    if (!this.def) {
      // eslint-disable-next-line no-throw-literal
      throw {
        message: 'Could not find query part ' + part.type
      };
    }

    part.params = part.params || Object(lodash__WEBPACK_IMPORTED_MODULE_0__["clone"])(this.def.defaultParams);
    this.params = part.params;
    this.text = '';
    this.updateText();
  }

  QueryPart.prototype.render = function (innerExpr) {
    return this.def.renderer(this, innerExpr);
  };

  QueryPart.prototype.hasMultipleParamsInString = function (strValue, index) {
    if (strValue.indexOf(',') === -1) {
      return false;
    }

    return this.def.params[index + 1] && this.def.params[index + 1].optional;
  };

  QueryPart.prototype.updateParam = function (strValue, index) {
    var _this = this; // handle optional parameters
    // if string contains ',' and next param is optional, split and update both


    if (this.hasMultipleParamsInString(strValue, index)) {
      Object(lodash__WEBPACK_IMPORTED_MODULE_0__["each"])(strValue.split(','), function (partVal, idx) {
        _this.updateParam(partVal.trim(), idx);
      });
      return;
    }

    if (strValue === '' && this.def.params[index].optional) {
      this.params.splice(index, 1);
    } else {
      this.params[index] = strValue;
    }

    this.part.params = this.params;
    this.updateText();
  };

  QueryPart.prototype.updateText = function () {
    if (this.params.length === 0) {
      this.text = this.def.type + '()';
      return;
    }

    var text = this.def.type + '(';
    text += this.params.join(', ');
    text += ')';
    this.text = text;
  };

  return QueryPart;
}();


function functionRenderer(part, innerExpr) {
  var str = part.def.type + '(';
  var parameters = Object(lodash__WEBPACK_IMPORTED_MODULE_0__["map"])(part.params, function (value, index) {
    var paramType = part.def.params[index];

    if (paramType.type === 'time') {
      if (value === 'auto') {
        value = '$__interval';
      }
    }

    if (paramType.quote === 'single') {
      return "'" + value + "'";
    } else if (paramType.quote === 'double') {
      return '"' + value + '"';
    }

    return value;
  });

  if (innerExpr) {
    parameters.unshift(innerExpr);
  }

  return str + parameters.join(', ') + ')';
}
function suffixRenderer(part, innerExpr) {
  return innerExpr + ' ' + part.params[0];
}
function identityRenderer(part, innerExpr) {
  return part.params[0];
}
function quotedIdentityRenderer(part, innerExpr) {
  return '"' + part.params[0] + '"';
}
var index = [];
var categories = {
  Aggregations: [],
  Selectors: [],
  Transformations: [],
  Predictors: [],
  Math: [],
  Aliasing: [],
  Fields: []
};

function createPart(part) {
  var def = index[part.type];

  if (!def) {
    // eslint-disable-next-line no-throw-literal
    throw {
      message: 'Could not find query part ' + part.type
    };
  }

  return new QueryPart(part, def);
}

function register(options) {
  index[options.type] = new QueryPartDef(options);
  options.category.push(index[options.type]);
}

var groupByTimeFunctions = [];

function aliasRenderer(part, innerExpr) {
  // eslint-disable-next-line no-useless-concat
  return innerExpr + ' AS ' + '"' + part.params[0] + '"';
}

function fieldRenderer(part, innerExpr) {
  if (part.params[0] === '*') {
    return '*';
  }

  return '"' + part.params[0] + '"';
}

function replaceAggregationAddStrategy(selectParts, partModel) {
  // look for existing aggregation
  for (var i = 0; i < selectParts.length; i++) {
    var part = selectParts[i];

    if (part.def.category === categories.Aggregations) {
      if (part.def.type === partModel.def.type) {
        return;
      } // count distinct is allowed


      if (part.def.type === 'count' && partModel.def.type === 'distinct') {
        break;
      } // remove next aggregation if distinct was replaced


      if (part.def.type === 'distinct') {
        var morePartsAvailable = selectParts.length >= i + 2;

        if (partModel.def.type !== 'count' && morePartsAvailable) {
          var nextPart = selectParts[i + 1];

          if (nextPart.def.category === categories.Aggregations) {
            selectParts.splice(i + 1, 1);
          }
        } else if (partModel.def.type === 'count') {
          if (!morePartsAvailable || selectParts[i + 1].def.type !== 'count') {
            selectParts.splice(i + 1, 0, partModel);
          }

          return;
        }
      }

      selectParts[i] = partModel;
      return;
    }

    if (part.def.category === categories.Selectors) {
      selectParts[i] = partModel;
      return;
    }
  }

  selectParts.splice(1, 0, partModel);
}

function addTransformationStrategy(selectParts, partModel) {
  var i; // look for index to add transformation

  for (i = 0; i < selectParts.length; i++) {
    var part = selectParts[i];

    if (part.def.category === categories.Math || part.def.category === categories.Aliasing) {
      break;
    }
  }

  selectParts.splice(i, 0, partModel);
}

function addCustomStrategy(selectParts, partModel) {
  // look for existing aggregation
  selectParts.splice(1, 1, partModel);
}

function addMathStrategy(selectParts, partModel) {
  var partCount = selectParts.length;

  if (partCount > 0) {
    // if last is math, replace it
    if (selectParts[partCount - 1].def.type === 'math') {
      selectParts[partCount - 1] = partModel;
      return;
    } // if next to last is math, replace it


    if (partCount > 1 && selectParts[partCount - 2].def.type === 'math') {
      selectParts[partCount - 2] = partModel;
      return;
    } else if (selectParts[partCount - 1].def.type === 'alias') {
      // if last is alias add it before
      selectParts.splice(partCount - 1, 0, partModel);
      return;
    }
  }

  selectParts.push(partModel);
}

function addAliasStrategy(selectParts, partModel) {
  var partCount = selectParts.length;

  if (partCount > 0) {
    // if last is alias, replace it
    if (selectParts[partCount - 1].def.type === 'alias') {
      selectParts[partCount - 1] = partModel;
      return;
    }
  }

  selectParts.push(partModel);
}

function addFieldStrategy(selectParts, partModel, query) {
  // copy all parts
  var parts = Object(lodash__WEBPACK_IMPORTED_MODULE_0__["map"])(selectParts, function (part) {
    return createPart({
      type: part.def.type,
      params: Object(lodash__WEBPACK_IMPORTED_MODULE_0__["clone"])(part.params)
    });
  });
  query.selectModels.push(parts);
}

register({
  type: 'field',
  addStrategy: addFieldStrategy,
  category: categories.Fields,
  params: [{
    type: 'field',
    dynamicLookup: true
  }],
  defaultParams: ['value'],
  renderer: fieldRenderer
}); // Aggregations

register({
  type: 'count',
  addStrategy: replaceAggregationAddStrategy,
  category: categories.Aggregations,
  params: [],
  defaultParams: [],
  renderer: functionRenderer
});
register({
  type: 'distinct',
  addStrategy: replaceAggregationAddStrategy,
  category: categories.Aggregations,
  params: [],
  defaultParams: [],
  renderer: functionRenderer
});
register({
  type: 'custom',
  addStrategy: addCustomStrategy,
  category: categories.Aggregations,
  params: [],
  defaultParams: [],
  renderer: functionRenderer
});
register({
  type: 'integral',
  addStrategy: replaceAggregationAddStrategy,
  category: categories.Aggregations,
  params: [],
  defaultParams: [],
  renderer: functionRenderer
});
register({
  type: 'mean',
  addStrategy: replaceAggregationAddStrategy,
  category: categories.Aggregations,
  params: [],
  defaultParams: [],
  renderer: functionRenderer
});
register({
  type: 'median',
  addStrategy: replaceAggregationAddStrategy,
  category: categories.Aggregations,
  params: [],
  defaultParams: [],
  renderer: functionRenderer
});
register({
  type: 'mode',
  addStrategy: replaceAggregationAddStrategy,
  category: categories.Aggregations,
  params: [],
  defaultParams: [],
  renderer: functionRenderer
});
register({
  type: 'sum',
  addStrategy: replaceAggregationAddStrategy,
  category: categories.Aggregations,
  params: [],
  defaultParams: [],
  renderer: functionRenderer
}); // transformations

register({
  type: 'derivative',
  addStrategy: addTransformationStrategy,
  category: categories.Transformations,
  params: [{
    name: 'duration',
    type: 'interval',
    options: ['1s', '10s', '1m', '5m', '10m', '15m', '1h']
  }],
  defaultParams: ['10s'],
  renderer: functionRenderer
});
register({
  type: 'spread',
  addStrategy: addTransformationStrategy,
  category: categories.Transformations,
  params: [],
  defaultParams: [],
  renderer: functionRenderer
});
register({
  type: 'non_negative_derivative',
  addStrategy: addTransformationStrategy,
  category: categories.Transformations,
  params: [{
    name: 'duration',
    type: 'interval',
    options: ['1s', '10s', '1m', '5m', '10m', '15m', '1h']
  }],
  defaultParams: ['10s'],
  renderer: functionRenderer
});
register({
  type: 'difference',
  addStrategy: addTransformationStrategy,
  category: categories.Transformations,
  params: [],
  defaultParams: [],
  renderer: functionRenderer
});
register({
  type: 'non_negative_difference',
  addStrategy: addTransformationStrategy,
  category: categories.Transformations,
  params: [],
  defaultParams: [],
  renderer: functionRenderer
});
register({
  type: 'moving_average',
  addStrategy: addTransformationStrategy,
  category: categories.Transformations,
  params: [{
    name: 'window',
    type: 'int',
    options: [5, 10, 20, 30, 40]
  }],
  defaultParams: [10],
  renderer: functionRenderer
});
register({
  type: 'cumulative_sum',
  addStrategy: addTransformationStrategy,
  category: categories.Transformations,
  params: [],
  defaultParams: [],
  renderer: functionRenderer
});
register({
  type: 'stddev',
  addStrategy: addTransformationStrategy,
  category: categories.Transformations,
  params: [],
  defaultParams: [],
  renderer: functionRenderer
});
register({
  type: 'time',
  category: groupByTimeFunctions,
  params: [{
    name: 'interval',
    type: 'time',
    options: ['$__interval', '1m', '5m', '30m', '1h', '1d']
  }],
  defaultParams: ['$__interval'],
  renderer: functionRenderer
});
register({
  type: 'fill',
  category: groupByTimeFunctions,
  params: [{
    name: 'fill',
    type: 'string',
    options: ['none', 'null', '0', 'previous', 'linear']
  }],
  defaultParams: ['null'],
  renderer: functionRenderer
});
register({
  type: 'elapsed',
  addStrategy: addTransformationStrategy,
  category: categories.Transformations,
  params: [{
    name: 'duration',
    type: 'interval',
    options: ['1s', '10s', '1m', '5m', '10m', '15m', '1h']
  }],
  defaultParams: ['10s'],
  renderer: functionRenderer
}); // predictions

register({
  type: 'holt_winters',
  addStrategy: addTransformationStrategy,
  category: categories.Predictors,
  params: [{
    name: 'number',
    type: 'int',
    options: [5, 10, 20, 30, 40]
  }, {
    name: 'season',
    type: 'int',
    options: [0, 1, 2, 5, 10]
  }],
  defaultParams: [10, 2],
  renderer: functionRenderer
});
register({
  type: 'holt_winters_with_fit',
  addStrategy: addTransformationStrategy,
  category: categories.Predictors,
  params: [{
    name: 'number',
    type: 'int',
    options: [5, 10, 20, 30, 40]
  }, {
    name: 'season',
    type: 'int',
    options: [0, 1, 2, 5, 10]
  }],
  defaultParams: [10, 2],
  renderer: functionRenderer
}); // Selectors

register({
  type: 'bottom',
  addStrategy: replaceAggregationAddStrategy,
  category: categories.Selectors,
  params: [{
    name: 'count',
    type: 'int'
  }],
  defaultParams: [3],
  renderer: functionRenderer
});
register({
  type: 'first',
  addStrategy: replaceAggregationAddStrategy,
  category: categories.Selectors,
  params: [],
  defaultParams: [],
  renderer: functionRenderer
});
register({
  type: 'last',
  addStrategy: replaceAggregationAddStrategy,
  category: categories.Selectors,
  params: [],
  defaultParams: [],
  renderer: functionRenderer
});
register({
  type: 'max',
  addStrategy: replaceAggregationAddStrategy,
  category: categories.Selectors,
  params: [],
  defaultParams: [],
  renderer: functionRenderer
});
register({
  type: 'min',
  addStrategy: replaceAggregationAddStrategy,
  category: categories.Selectors,
  params: [],
  defaultParams: [],
  renderer: functionRenderer
});
register({
  type: 'percentile',
  addStrategy: replaceAggregationAddStrategy,
  category: categories.Selectors,
  params: [{
    name: 'nth',
    type: 'int'
  }],
  defaultParams: [95],
  renderer: functionRenderer
});
register({
  type: 'top',
  addStrategy: replaceAggregationAddStrategy,
  category: categories.Selectors,
  params: [{
    name: 'count',
    type: 'int'
  }],
  defaultParams: [3],
  renderer: functionRenderer
});
register({
  type: 'tag',
  category: groupByTimeFunctions,
  params: [{
    name: 'tag',
    type: 'string',
    dynamicLookup: true
  }],
  defaultParams: ['tag'],
  renderer: fieldRenderer
});
register({
  type: 'math',
  addStrategy: addMathStrategy,
  category: categories.Math,
  params: [{
    name: 'expr',
    type: 'string'
  }],
  defaultParams: [' / 100'],
  renderer: suffixRenderer
});
register({
  type: 'alias',
  addStrategy: addAliasStrategy,
  category: categories.Aliasing,
  params: [{
    name: 'name',
    type: 'string',
    quote: 'double'
  }],
  defaultParams: ['alias'],
  renderMode: 'suffix',
  renderer: aliasRenderer
});
/* harmony default export */ __webpack_exports__["default"] = ({
  create: createPart,
  getCategories: function getCategories() {
    return categories;
  },
  replaceAggregationAdd: replaceAggregationAddStrategy
});

/***/ }),

/***/ "./datasource/apm-service/response_parser.ts":
/*!***************************************************!*\
  !*** ./datasource/apm-service/response_parser.ts ***!
  \***************************************************/
/*! exports provided: default, getSelectedParams */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getSelectedParams", function() { return getSelectedParams; });
/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @grafana/data */ "@grafana/data");
/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_grafana_data__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _grafana_runtime__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @grafana/runtime */ "@grafana/runtime");
/* harmony import */ var _grafana_runtime__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_grafana_runtime__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var grafana_app_core_table_model__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! grafana/app/core/table_model */ "grafana/app/core/table_model");
/* harmony import */ var grafana_app_core_table_model__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(grafana_app_core_table_model__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! lodash */ "lodash");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _common_constants__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./common/constants */ "./datasource/apm-service/common/constants.ts");
var __assign = undefined && undefined.__assign || function () {
  __assign = Object.assign || function (t) {
    for (var s, i = 1, n = arguments.length; i < n; i++) {
      s = arguments[i];

      for (var p in s) {
        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
      }
    }

    return t;
  };

  return __assign.apply(this, arguments);
};

var __awaiter = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {
  function adopt(value) {
    return value instanceof P ? value : new P(function (resolve) {
      resolve(value);
    });
  }

  return new (P || (P = Promise))(function (resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }

    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }

    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }

    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};

var __generator = undefined && undefined.__generator || function (thisArg, body) {
  var _ = {
    label: 0,
    sent: function sent() {
      if (t[0] & 1) throw t[1];
      return t[1];
    },
    trys: [],
    ops: []
  },
      f,
      y,
      t,
      g;
  return g = {
    next: verb(0),
    "throw": verb(1),
    "return": verb(2)
  }, typeof Symbol === "function" && (g[Symbol.iterator] = function () {
    return this;
  }), g;

  function verb(n) {
    return function (v) {
      return step([n, v]);
    };
  }

  function step(op) {
    if (f) throw new TypeError("Generator is already executing.");

    while (_) {
      try {
        if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
        if (y = 0, t) op = [op[0] & 2, t.value];

        switch (op[0]) {
          case 0:
          case 1:
            t = op;
            break;

          case 4:
            _.label++;
            return {
              value: op[1],
              done: false
            };

          case 5:
            _.label++;
            y = op[1];
            op = [0];
            continue;

          case 7:
            op = _.ops.pop();

            _.trys.pop();

            continue;

          default:
            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
              _ = 0;
              continue;
            }

            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
              _.label = op[1];
              break;
            }

            if (op[0] === 6 && _.label < t[1]) {
              _.label = t[1];
              t = op;
              break;
            }

            if (t && _.label < t[2]) {
              _.label = t[2];

              _.ops.push(op);

              break;
            }

            if (t[2]) _.ops.pop();

            _.trys.pop();

            continue;
        }

        op = body.call(thisArg, _);
      } catch (e) {
        op = [6, e];
        y = 0;
      } finally {
        f = t = 0;
      }
    }

    if (op[0] & 5) throw op[1];
    return {
      value: op[0] ? op[1] : void 0,
      done: true
    };
  }
};

var __spreadArray = undefined && undefined.__spreadArray || function (to, from, pack) {
  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {
    if (ar || !(i in from)) {
      if (!ar) ar = Array.prototype.slice.call(from, 0, i);
      ar[i] = from[i];
    }
  }
  return to.concat(ar || Array.prototype.slice.call(from));
};







var ResponseParser =
/** @class */
function () {
  function ResponseParser() {}

  ResponseParser.prototype.parse = function (query, results) {
    if (!(results === null || results === void 0 ? void 0 : results.results) || results.results.length === 0) {
      return [];
    }

    var APMResults = results.results[0];

    if (!APMResults.series) {
      return [];
    }

    var normalizedQuery = query.toLowerCase();
    var isValueFirst = normalizedQuery.indexOf('show field keys') >= 0 || normalizedQuery.indexOf('show retention policies') >= 0;
    var isShowMeasurements = normalizedQuery.indexOf('show measurements') >= 0;
    var res = new Set();
    Object(lodash__WEBPACK_IMPORTED_MODULE_3__["each"])(APMResults.series, function (serie) {
      Object(lodash__WEBPACK_IMPORTED_MODULE_3__["each"])(serie.values, function (value) {
        if (Object(lodash__WEBPACK_IMPORTED_MODULE_3__["isArray"])(value)) {
          // In general, there are 2 possible shapes for the returned value.
          // The first one is a two-element array,
          // where the first element is somewhat a metadata value:
          // the tag name for SHOW TAG VALUES queries,
          // the time field for SELECT queries, etc.
          // The second shape is an one-element array,
          // that is containing an immediate value.
          // For example, SHOW FIELD KEYS queries return such shape.
          // Note, pre-0.11 versions return
          // the second shape for SHOW TAG VALUES queries
          // (while the newer versions—first).
          if (isValueFirst) {
            addUnique(res, value[0]);
          } else if (value[1] !== undefined) {
            addUnique(res, value[1]);
          } else {
            addUnique(res, value[0]);
          }
        } else {
          addUnique(res, value);
        }
      });
    });

    if (isShowMeasurements) {
      return Array.from(res).filter(function (item) {
        return _common_constants__WEBPACK_IMPORTED_MODULE_4__["ENABLE_MEASUREMENTS"].includes(item);
      }).map(function (v) {
        return {
          text: v
        };
      });
    }

    return Array.from(res).map(function (v) {
      return {
        text: v
      };
    });
  };

  ResponseParser.prototype.getTable = function (dfs, target, meta) {
    var _a, _b;

    var table = new grafana_app_core_table_model__WEBPACK_IMPORTED_MODULE_2___default.a();

    if (dfs.length > 0) {
      // @ts-ignore
      table.meta = __assign(__assign({}, meta), {
        executedQueryString: (_a = dfs[0].meta) === null || _a === void 0 ? void 0 : _a.executedQueryString
      }); // @ts-ignore

      table.refId = target.refId;
      table = getTableCols(dfs, table, target); // if group by tag(s) added

      if ((_b = dfs[0].fields[1]) === null || _b === void 0 ? void 0 : _b.labels) {
        var dfsByLabels = Object(lodash__WEBPACK_IMPORTED_MODULE_3__["groupBy"])(dfs, function (df) {
          return df.fields[1].labels ? Object.values(df.fields[1].labels) : null;
        });
        var labels = Object.keys(dfsByLabels);
        dfsByLabels = Object.values(dfsByLabels);

        for (var i = 0; i < dfsByLabels.length; i++) {
          table = getTableRows(dfsByLabels[i], table, __spreadArray([], labels[i].split(','), true));
        }
      } else {
        table = getTableRows(dfs, table, []);
      }
    }

    return table;
  };

  ResponseParser.prototype.transformAnnotationResponse = function (options, data, target) {
    return __awaiter(this, void 0, Promise, function () {
      var rsp, table, list_1, titleCol_1, timeCol_1, timeEndCol_1, tagsCol_1, textCol_1;
      return __generator(this, function (_a) {
        rsp = Object(_grafana_runtime__WEBPACK_IMPORTED_MODULE_1__["toDataQueryResponse"])(data, [target]);

        if (rsp) {
          table = this.getTable(rsp.data, target, {});
          list_1 = [];
          titleCol_1 = null;
          timeCol_1 = null;
          timeEndCol_1 = null;
          tagsCol_1 = [];
          textCol_1 = null;
          Object(lodash__WEBPACK_IMPORTED_MODULE_3__["each"])(table.columns, function (column, index) {
            if (column.text.toLowerCase() === 'time') {
              timeCol_1 = index;
              return;
            }

            if (column.text === options.annotation.titleColumn) {
              titleCol_1 = index;
              return;
            }

            if (colContainsTag(column.text, options.annotation.tagsColumn)) {
              tagsCol_1.push(index);
              return;
            }

            if (column.text.includes(options.annotation.textColumn)) {
              textCol_1 = index;
              return;
            }

            if (column.text === options.annotation.timeEndColumn) {
              timeEndCol_1 = index;
              return;
            } // legacy case


            if (!titleCol_1 && textCol_1 !== index) {
              titleCol_1 = index;
            }
          });
          Object(lodash__WEBPACK_IMPORTED_MODULE_3__["each"])(table.rows, function (value) {
            var data = {
              annotation: options.annotation,
              time: Number(new Date(value[timeCol_1])),
              title: value[titleCol_1],
              timeEnd: value[timeEndCol_1],
              // Remove empty values, then split in different tags for comma separated values
              tags: Object(lodash__WEBPACK_IMPORTED_MODULE_3__["flatten"])(tagsCol_1.filter(function (t) {
                return value[t];
              }).map(function (t) {
                return value[t].split(',');
              })),
              text: value[textCol_1]
            };
            list_1.push(data);
          });
          return [2
          /*return*/
          , list_1];
        }

        return [2
        /*return*/
        , []];
      });
    });
  };

  return ResponseParser;
}();

/* harmony default export */ __webpack_exports__["default"] = (ResponseParser);

function colContainsTag(colText, tagsColumn) {
  var tags = (tagsColumn || '').replace(' ', '').split(',');

  for (var _i = 0, tags_1 = tags; _i < tags_1.length; _i++) {
    var tag = tags_1[_i];

    if (colText.includes(tag)) {
      return true;
    }
  }

  return false;
}

function getTableCols(dfs, table, target) {
  var selectedParams = getSelectedParams(target);
  dfs[0].fields.forEach(function (field) {
    // Time col
    if (field.name === 'time') {
      table.columns.push({
        text: 'Time',
        type: _grafana_data__WEBPACK_IMPORTED_MODULE_0__["FieldType"].time
      });
    } // Group by (label) column(s)
    else if (field.name === 'value') {
      if (field.labels) {
        Object.keys(field.labels).forEach(function (key) {
          table.columns.push({
            text: key
          });
        });
      }
    }
  }); // Get cols for annotationQuery

  if (dfs[0].refId === 'metricFindQuery') {
    dfs.forEach(function (field) {
      if (field.name) {
        table.columns.push({
          text: field.name
        });
      }
    });
  } // Select (metric) column(s)
  // eslint-disable-next-line @typescript-eslint/prefer-for-of


  for (var i = 0; i < selectedParams.length; i++) {
    table.columns.push({
      text: selectedParams[i]
    });
  }

  return table;
}

function getTableRows(dfs, table, labels) {
  var values = dfs[0].fields[0].values.toArray();

  var _loop_1 = function _loop_1(i) {
    var time = values[i];
    var metrics = dfs.map(function (df) {
      return df.fields[1] ? df.fields[1].values.toArray()[i] : null;
    });

    if (metrics.indexOf(null) < 0) {
      table.rows.push(__spreadArray(__spreadArray([time], labels, true), metrics, true));
    }
  };

  for (var i = 0; i < values.length; i++) {
    _loop_1(i);
  }

  return table;
}

function getSelectedParams(target) {
  var _a;

  var allParams = [];
  (_a = target.select) === null || _a === void 0 ? void 0 : _a.forEach(function (select) {
    var _a, _b;

    var selector = select.filter(function (x) {
      return x.type !== 'field';
    });

    if (selector.length > 0) {
      allParams.push(selector[0].type);
    } else {
      if ((_b = (_a = select[0]) === null || _a === void 0 ? void 0 : _a.params) === null || _b === void 0 ? void 0 : _b[0]) {
        allParams.push(select[0].params[0].toString());
      }
    }
  });
  var uniqueParams = [];
  allParams.forEach(function (param) {
    uniqueParams.push(incrementName(param, param, uniqueParams, 0));
  });
  return uniqueParams;
}

function incrementName(name, nameIncremenet, params, index) {
  if (params.indexOf(nameIncremenet) > -1) {
    index++;
    return incrementName(name, name + '_' + index, params, index);
  }

  return nameIncremenet;
}

function addUnique(s, value) {
  s.add(value.toString());
}

/***/ }),

/***/ "./datasource/common/constants.ts":
/*!****************************************!*\
  !*** ./datasource/common/constants.ts ***!
  \****************************************/
/*! exports provided: TcDataSourceId, GetServiceAPIInfo, VARIABLE_ALIAS, GetServiceFromNamespace, GetLabelFromNamespace, ParseMetricQuery, ParseMetricRegex, ReplaceVariable, GetDimensions, ParseQueryResult, isVariable, GetRequestParams, GetRequestParamsV2, SliceLength, FilterKeys, parseDataFromBackendPlugin, IS_DEVELOPMENT_ENVIRONMENT, CoreApp */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TcDataSourceId", function() { return TcDataSourceId; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GetServiceAPIInfo", function() { return GetServiceAPIInfo; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VARIABLE_ALIAS", function() { return VARIABLE_ALIAS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GetServiceFromNamespace", function() { return GetServiceFromNamespace; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GetLabelFromNamespace", function() { return GetLabelFromNamespace; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ParseMetricQuery", function() { return ParseMetricQuery; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ParseMetricRegex", function() { return ParseMetricRegex; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ReplaceVariable", function() { return ReplaceVariable; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GetDimensions", function() { return GetDimensions; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ParseQueryResult", function() { return ParseQueryResult; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isVariable", function() { return isVariable; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GetRequestParams", function() { return GetRequestParams; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GetRequestParamsV2", function() { return GetRequestParamsV2; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SliceLength", function() { return SliceLength; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FilterKeys", function() { return FilterKeys; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "parseDataFromBackendPlugin", function() { return parseDataFromBackendPlugin; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IS_DEVELOPMENT_ENVIRONMENT", function() { return IS_DEVELOPMENT_ENVIRONMENT; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CoreApp", function() { return CoreApp; });
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lodash */ "lodash");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var qs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! qs */ "../node_modules/qs/lib/index.js");
/* harmony import */ var qs__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(qs__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _tc_monitor__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../tc_monitor */ "./datasource/tc_monitor/index.ts");
/* harmony import */ var _sign__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./sign */ "./datasource/common/sign.ts");
/* harmony import */ var _signV2__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./signV2 */ "./datasource/common/signV2.ts");
/* harmony import */ var _grafana_runtime__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @grafana/runtime */ "@grafana/runtime");
/* harmony import */ var _grafana_runtime__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_grafana_runtime__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _locale__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../locale */ "./locale/index.ts");
/* harmony import */ var _plugin_json__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../plugin.json */ "./datasource/plugin.json");
var _plugin_json__WEBPACK_IMPORTED_MODULE_7___namespace = /*#__PURE__*/__webpack_require__.t(/*! ../plugin.json */ "./datasource/plugin.json", 1);
var __assign = undefined && undefined.__assign || function () {
  __assign = Object.assign || function (t) {
    for (var s, i = 1, n = arguments.length; i < n; i++) {
      s = arguments[i];

      for (var p in s) {
        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
      }
    }

    return t;
  };

  return __assign.apply(this, arguments);
};

var __awaiter = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {
  function adopt(value) {
    return value instanceof P ? value : new P(function (resolve) {
      resolve(value);
    });
  }

  return new (P || (P = Promise))(function (resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }

    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }

    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }

    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};

var __generator = undefined && undefined.__generator || function (thisArg, body) {
  var _ = {
    label: 0,
    sent: function sent() {
      if (t[0] & 1) throw t[1];
      return t[1];
    },
    trys: [],
    ops: []
  },
      f,
      y,
      t,
      g;
  return g = {
    next: verb(0),
    "throw": verb(1),
    "return": verb(2)
  }, typeof Symbol === "function" && (g[Symbol.iterator] = function () {
    return this;
  }), g;

  function verb(n) {
    return function (v) {
      return step([n, v]);
    };
  }

  function step(op) {
    if (f) throw new TypeError("Generator is already executing.");

    while (_) {
      try {
        if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
        if (y = 0, t) op = [op[0] & 2, t.value];

        switch (op[0]) {
          case 0:
          case 1:
            t = op;
            break;

          case 4:
            _.label++;
            return {
              value: op[1],
              done: false
            };

          case 5:
            _.label++;
            y = op[1];
            op = [0];
            continue;

          case 7:
            op = _.ops.pop();

            _.trys.pop();

            continue;

          default:
            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
              _ = 0;
              continue;
            }

            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
              _.label = op[1];
              break;
            }

            if (op[0] === 6 && _.label < t[1]) {
              _.label = t[1];
              t = op;
              break;
            }

            if (t && _.label < t[2]) {
              _.label = t[2];

              _.ops.push(op);

              break;
            }

            if (t[2]) _.ops.pop();

            _.trys.pop();

            continue;
        }

        op = body.call(thisArg, _);
      } catch (e) {
        op = [6, e];
        y = 0;
      } finally {
        f = t = 0;
      }
    }

    if (op[0] & 5) throw op[1];
    return {
      value: op[0] ? op[1] : void 0,
      done: true
    };
  }
};

var __rest = undefined && undefined.__rest || function (s, e) {
  var t = {};

  for (var p in s) {
    if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];
  }

  if (s != null && typeof Object.getOwnPropertySymbols === "function") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];
  }
  return t;
};









var TcDataSourceId = _plugin_json__WEBPACK_IMPORTED_MODULE_7__.id; // the services of tencentcloud monitor api

var FINACE_REGIONS = ['ap-shanghai-fsi', 'ap-shenzhen-fsi'];
var SERVICES_API_INFO = {
  api: {
    service: 'api',
    version: '2020-11-06',
    path: '/api',
    host: 'api.tencentcloudapi.com'
  },
  // monitor api info
  monitor: {
    service: 'monitor',
    version: '2018-07-24',
    path: '/monitor',
    host: 'monitor.tencentcloudapi.com'
  },
  // cls api info
  cls: {
    service: 'cls',
    version: '2020-10-16',
    path: '/cls',
    host: 'cls.tencentcloudapi.com'
  },
  // cvm api info
  cvm: {
    service: 'cvm',
    version: '2017-03-12',
    path: '/cvm',
    host: 'cvm.tencentcloudapi.com'
  },
  // cdb api info
  cdb: {
    service: 'cdb',
    version: '2017-03-20',
    path: '/cdb',
    host: 'cdb.tencentcloudapi.com'
  },
  // pcx api info
  pcx: {
    service: 'pcx',
    version: '',
    path: '/pcx',
    host: 'vpc.api.qcloud.com'
  },
  // vpc api info
  vpc: {
    service: 'vpc',
    version: '2017-03-12',
    path: '/vpc',
    host: 'vpc.tencentcloudapi.com'
  },
  // mongodb api info
  mongodb: {
    service: 'mongodb',
    version: '2019-07-25',
    path: '/mongodb',
    host: 'mongodb.tencentcloudapi.com'
  },
  // 负载均衡 clb
  clb: {
    service: 'clb',
    version: '2018-03-17',
    path: '/clb',
    host: 'clb.tencentcloudapi.com'
  },
  // postgresql api info
  postgres: {
    service: 'postgres',
    version: '2017-03-12',
    path: '/postgres',
    host: 'postgres.tencentcloudapi.com'
  },
  // cdn info
  cdn: {
    service: 'cdn',
    version: '2018-06-06',
    path: '/cdn',
    host: 'cdn.tencentcloudapi.com'
  },
  // redis info
  redis: {
    service: 'redis',
    version: '2018-04-12',
    path: '/redis',
    host: 'redis.tencentcloudapi.com'
  },
  scf: {
    service: 'scf',
    version: '2018-04-16',
    path: '/scf',
    host: 'scf.tencentcloudapi.com'
  },
  cfs: {
    service: 'cfs',
    version: '2019-07-19',
    path: '/cfs',
    host: 'cfs.tencentcloudapi.com'
  },
  ckafka: {
    service: 'ckafka',
    version: '2019-08-19',
    path: '/ckafka',
    host: 'ckafka.tencentcloudapi.com'
  },
  // 专线接入实例列表
  dc: {
    service: 'dc',
    version: '2018-04-10',
    path: '/dc',
    host: 'dc.tencentcloudapi.com'
  },
  // cynosdb实例列表
  cynosdb: {
    service: 'cynosdb',
    version: '2019-01-07',
    path: '/cynosdb',
    host: 'cynosdb.tencentcloudapi.com'
  },
  // sqlserver实例列表
  sqlserver: {
    service: 'sqlserver',
    version: '2018-03-28',
    path: '/sqlserver',
    host: 'sqlserver.tencentcloudapi.com'
  },
  // bm实例列表
  bm: {
    service: 'bm',
    version: '2018-04-23',
    path: '/bm',
    host: 'bm.tencentcloudapi.com'
  },
  bmeip: {
    service: 'bmeip',
    version: '2018-06-25',
    path: '/bmeip',
    host: 'bmeip.tencentcloudapi.com'
  },
  bmvpc: {
    service: 'bmvpc',
    version: '2018-06-25',
    path: '/bmvpc',
    host: 'bmvpc.tencentcloudapi.com'
  },
  bmlb: {
    service: 'bmlb',
    version: '2018-06-25',
    path: '/bmlb',
    host: 'bmlb.tencentcloudapi.com'
  },
  // ES集群实例
  es: {
    service: 'es',
    version: '2018-04-16',
    path: '/es',
    host: 'es.tencentcloudapi.com'
  },
  // MapReduce
  emr: {
    service: 'emr',
    version: '2019-01-03',
    path: '/emr',
    host: 'emr.tencentcloudapi.com'
  },
  // CMQ消息队列
  cmq: {
    service: 'cmq',
    version: '2019-03-04',
    path: '/cmq',
    host: 'cmq.tencentcloudapi.com'
  },
  cbs: {
    service: 'cbs',
    version: '2017-03-12',
    path: '/cbs',
    host: 'cbs.tencentcloudapi.com'
  },
  // tcaplus实例
  tcaplusdb: {
    service: 'tcaplusdb',
    version: '2019-08-23',
    path: '/tcaplusdb',
    host: 'tcaplusdb.tencentcloudapi.com'
  },
  // tcaplus实例
  dcdb: {
    service: 'dcdb',
    version: '2018-04-11',
    path: '/dcdb',
    host: 'dcdb.tencentcloudapi.com'
  },
  // apigateway实例
  apigateway: {
    service: 'apigateway',
    version: '2018-08-08',
    path: '/apigateway',
    host: 'apigateway.tencentcloudapi.com'
  },
  tdmq: {
    service: 'tdmq',
    version: '2020-02-17',
    path: '/tdmq',
    host: 'tdmq.tencentcloudapi.com'
  },
  tdmq_rabbitmq: {
    service: 'tdmq',
    version: '2020-02-17',
    path: '/tdmq',
    host: 'tdmq.tencentcloudapi.com'
  },
  tdmq_rocketmq: {
    service: 'tdmq',
    version: '2020-02-17',
    path: '/tdmq',
    host: 'tdmq.tencentcloudapi.com'
  },
  gaap: {
    service: 'gaap',
    version: '2018-05-29',
    path: '/gaap',
    host: 'gaap.tencentcloudapi.com'
  },
  ecm: {
    service: 'ecm',
    version: '2019-07-19',
    path: '/ecm',
    host: 'ecm.tencentcloudapi.com'
  },
  gse: {
    service: 'gse',
    version: '2019-11-12',
    path: '/gse',
    host: 'gse.tencentcloudapi.com'
  },
  lighthouse: {
    service: 'lighthouse',
    version: '2020-03-24',
    path: '/lighthouse',
    host: 'lighthouse.tencentcloudapi.com'
  },
  tsf: {
    service: 'tsf',
    version: '2018-03-26',
    path: '/tsf',
    host: 'tsf.tencentcloudapi.com'
  },
  rum: {
    service: 'rum',
    version: '2021-06-22',
    path: '/rum',
    host: 'rum.tencentcloudapi.com'
  },
  tke: {
    service: 'tke',
    version: '2018-05-25',
    path: '/tke',
    host: 'tke.tencentcloudapi.com'
  },
  ecdn: {
    service: 'ecdn',
    version: '2019-10-12',
    path: '/ecdn',
    host: 'ecdn.tencentcloudapi.com'
  },
  waf: {
    service: 'waf',
    version: '2018-01-25',
    path: '/waf',
    host: 'waf.tencentcloudapi.com'
  },
  region: {
    service: 'region',
    version: '2022-06-27',
    path: '/region',
    host: 'region.tencentcloudapi.com'
  },
  apm: {
    service: 'apm',
    version: '2021-06-22',
    path: '/apm',
    host: 'apm.tencentcloudapi.com'
  } // 不单独定义lb，因为lb同样用的是vpc的配置，同上
  // lb: {
  //   service: 'lb',
  //   version: '2017-03-12',
  //   path: '/lb',
  //   host: 'vpc.tencentcloudapi.com'
  // }
  // 负载均衡四层协议 lbPrivate
  // lbPrivate: {
  //   service: 'lbPrivate',
  //   version: '2018-03-17',
  //   path: '/clb',
  //   host: 'clb.tencentcloudapi.com',
  // },

};
var FINACE_HOST = {
  scf: {
    'ap-shanghai-fsi': {
      path: '/fsi/scf/shanghai',
      host: 'scf.ap-shanghai-fsi.tencentcloudapi.com'
    },
    'ap-shenzhen-fsi': {
      path: '/fsi/scf/shenzhen',
      host: 'scf.ap-shenzhen-fsi.tencentcloudapi.com'
    }
  },
  cfs: {
    'ap-shanghai-fsi': {
      path: '/fsi/cfs/shanghai',
      host: 'cfs.ap-shanghai-fsi.tencentcloudapi.com'
    },
    'ap-shenzhen-fsi': {
      path: '/fsi/cfs/shenzhen',
      host: 'cfs.ap-shenzhen-fsi.tencentcloudapi.com'
    }
  },
  ckafka: {
    'ap-shanghai-fsi': {
      path: '/fsi/ckafka/shanghai',
      host: 'ckafka.ap-shanghai-fsi.tencentcloudapi.com'
    },
    'ap-shenzhen-fsi': {
      path: '/fsi/ckafka/shenzhen',
      host: 'ckafka.ap-shenzhen-fsi.tencentcloudapi.com'
    }
  },
  clb: {
    'ap-shanghai-fsi': {
      path: '/fsi/clb/shanghai',
      host: 'clb.ap-shanghai-fsi.tencentcloudapi.com'
    },
    'ap-shenzhen-fsi': {
      path: '/fsi/clb/shenzhen',
      host: 'clb.ap-shenzhen-fsi.tencentcloudapi.com'
    }
  },
  mongodb: {
    'ap-shanghai-fsi': {
      path: '/fsi/mongodb/shanghai',
      host: 'mongodb.ap-shanghai-fsi.tencentcloudapi.com'
    },
    'ap-shenzhen-fsi': {
      path: '/fsi/mongodb/shenzhen',
      host: 'mongodb.ap-shenzhen-fsi.tencentcloudapi.com'
    }
  },
  vpc: {
    'ap-shanghai-fsi': {
      path: '/fsi/vpc/shanghai',
      host: 'vpc.ap-shanghai-fsi.tencentcloudapi.com'
    },
    'ap-shenzhen-fsi': {
      path: '/fsi/vpc/shenzhen',
      host: 'vpc.ap-shenzhen-fsi.tencentcloudapi.com'
    }
  },
  cvm: {
    'ap-shanghai-fsi': {
      path: '/fsi/cvm/shanghai',
      host: 'cvm.ap-shanghai-fsi.tencentcloudapi.com'
    },
    'ap-shenzhen-fsi': {
      path: '/fsi/cvm/shenzhen',
      host: 'cvm.ap-shenzhen-fsi.tencentcloudapi.com'
    }
  },
  cdb: {
    'ap-shanghai-fsi': {
      path: '/fsi/cdb/shanghai',
      host: 'cdb.ap-shanghai-fsi.tencentcloudapi.com'
    },
    'ap-shenzhen-fsi': {
      path: '/fsi/cdb/shenzhen',
      host: 'cdb.ap-shenzhen-fsi.tencentcloudapi.com'
    }
  },
  monitor: {
    'ap-shanghai-fsi': {
      path: '/fsi/monitor/shanghai',
      host: 'monitor.ap-shanghai-fsi.tencentcloudapi.com'
    },
    'ap-shenzhen-fsi': {
      path: '/fsi/monitor/shenzhen',
      host: 'monitor.ap-shenzhen-fsi.tencentcloudapi.com'
    }
  },
  postgres: {
    'ap-shanghai-fsi': {
      path: '/fsi/postgres/shanghai',
      host: 'postgres.ap-shanghai-fsi.tencentcloudapi.com'
    },
    'ap-shenzhen-fsi': {
      path: '/fsi/postgres/shenzhen',
      host: 'postgres.ap-shenzhen-fsi.tencentcloudapi.com'
    }
  },
  emr: {
    'ap-shanghai-fsi': {
      path: '/fsi/emr/shanghai',
      host: 'emr.ap-shanghai-fsi.tencentcloudapi.com'
    },
    'ap-shenzhen-fsi': {
      path: '/fsi/emr/shenzhen',
      host: 'emr.ap-shenzhen-fsi.tencentcloudapi.com'
    }
  },
  cmq: {
    'ap-shanghai-fsi': {
      path: '/fsi/cmq/shanghai',
      host: 'cmq.ap-shanghai-fsi.tencentcloudapi.com'
    },
    'ap-shenzhen-fsi': {
      path: '/fsi/cmq/shenzhen',
      host: 'cmq.ap-shenzhen-fsi.tencentcloudapi.com'
    }
  },
  cls: {
    'ap-shanghai-fsi': {
      path: '/fsi/cls/shanghai',
      host: 'cls.ap-shanghai-fsi.tencentcloudapi.com'
    },
    'ap-shenzhen-fsi': {
      path: '/fsi/cls/shenzhen',
      host: 'cls.ap-shenzhen-fsi.tencentcloudapi.com'
    }
  }
}; // 获取对应业务的 API 接口信息

function GetServiceAPIInfo(region, service) {
  return __assign(__assign({}, SERVICES_API_INFO[service] || {}), getHostAndPath(region, service));
} // get host and path for finance regions

function getHostAndPath(region, service) {
  if (lodash__WEBPACK_IMPORTED_MODULE_0___default.a.indexOf(FINACE_REGIONS, region) === -1) {
    return {};
  }

  return lodash__WEBPACK_IMPORTED_MODULE_0___default.a.find(lodash__WEBPACK_IMPORTED_MODULE_0___default.a.find(FINACE_HOST, function (__, key) {
    return key === service;
  }), function (__, key) {
    return key === region;
  }) || {};
} // 变量替换指定实例按照那个字段展示


var VARIABLE_ALIAS = 'instancealias';
function GetServiceFromNamespace(namespace) {
  return lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(lodash__WEBPACK_IMPORTED_MODULE_0___default.a.find(_tc_monitor__WEBPACK_IMPORTED_MODULE_2__["SERVICES"], function (service) {
    return service.namespace === namespace;
  }), 'service');
} // 处理存量target中保存的qce/cvm

function GetLabelFromNamespace(namespace) {
  return lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(lodash__WEBPACK_IMPORTED_MODULE_0___default.a.find(_tc_monitor__WEBPACK_IMPORTED_MODULE_2__["SERVICES"], function (service) {
    return service.namespace === namespace || service.label === namespace;
  }), 'label');
} // parse template variable query params

function ParseMetricQuery(query) {
  if (query === void 0) {
    query = '';
  }

  if (!query) {
    return {};
  }

  var result = {};

  var queries = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.split(query, '&');

  lodash__WEBPACK_IMPORTED_MODULE_0___default.a.forEach(queries, function (item) {
    var str = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.split(item, '=');

    if (lodash__WEBPACK_IMPORTED_MODULE_0___default.a.trim(lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(str, '0', ''))) {
      var val = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.trim(lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(str, '1', ''));

      try {
        val = JSON.parse(val);
      } catch (e) {// console.log({ val });
      }

      result[lodash__WEBPACK_IMPORTED_MODULE_0___default.a.toLower(lodash__WEBPACK_IMPORTED_MODULE_0___default.a.trim(lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(str, '0', '')))] = val;
    }
  });

  return result;
} // parse template variable regex params

function ParseMetricRegex(regex) {
  if (regex === void 0) {
    regex = '';
  }

  if (!regex) {
    return [];
  }

  regex = regex.replace(/：/g, ':');
  regex = regex.replace(/，/g, ',');
  var regexParams = ParseMetricQuery(regex);
  var result = [];

  lodash__WEBPACK_IMPORTED_MODULE_0___default.a.forEach(regexParams, function (value, key) {
    if (key === 'tag:tag-key') {
      var valuesArr = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.split(value, ',');

      lodash__WEBPACK_IMPORTED_MODULE_0___default.a.forEach(valuesArr, function (item) {
        var temp = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.split(item, ':');

        if (temp.length === 2) {
          result.push({
            Name: "tag:".concat(temp[0]),
            Values: temp.slice(1)
          });
        }
      });
    } else {
      result.push({
        Name: key,
        Values: lodash__WEBPACK_IMPORTED_MODULE_0___default.a.split(value, ',')
      });
    }
  });

  return result;
} // get the actual value of template variable

function parseVariableFormat(varname) {
  varname = String(varname || ''); // $varname

  var varFlag = false;
  var regResult1 = varname.match(/^\${?(\w+)}?/);

  if (regResult1) {
    varFlag = true;
    varname = "${".concat(regResult1[1], ":json}");
  } // [[varname]]


  var regResult2 = varname.match(/^\[\[(\w+)(\:\w+)?\]\]/);

  if (regResult2) {
    varFlag = true;
    varname = "${".concat(regResult2[1], ":json}");
  }

  return {
    varname: varname,
    varFlag: varFlag
  };
}

function ReplaceVariable(templateSrv, scopedVars, field, multiple) {
  if (multiple === void 0) {
    multiple = false;
  }

  var _a = parseVariableFormat(field),
      varname = _a.varname,
      varFlag = _a.varFlag;

  var replaceVar = templateSrv.replace(varname, scopedVars);

  if (varFlag) {
    try {
      replaceVar = JSON.parse(replaceVar);
    } catch (error) {}
  }

  if (!multiple && lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isArray(replaceVar)) {
    replaceVar = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(replaceVar, '0', '');
  }

  return replaceVar;
} // get dimensions for instance query param

function GetDimensions(obj) {
  if (lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isEmpty(obj)) {
    return [];
  }

  var dimensions = [];

  lodash__WEBPACK_IMPORTED_MODULE_0___default.a.forEach(obj, function (item) {
    if (item.Value !== null && item.Value !== undefined && item.Value !== '') {
      dimensions.push({
        Name: item.Name,
        Value: typeof item.Value === 'string' ? item.Value : "".concat(item.Value)
      });
    }
  });

  return dimensions;
} // parse query data result for panel

function ParseQueryResult(response, instances, timeshift) {
  if (instances === void 0) {
    instances = [];
  }

  if (timeshift === void 0) {
    timeshift = 0;
  }

  var instanceList = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.cloneDeep(instances);

  var dataPoints = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(response, 'DataPoints', []);

  return lodash__WEBPACK_IMPORTED_MODULE_0___default.a.map(dataPoints, function (dataPoint) {
    var instanceAliasValue = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(dataPoint, 'Dimensions[0].Value');

    for (var i = 0; i < instanceList.length; i++) {
      if (isInstanceMatch(instanceList[i], lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(dataPoint, 'Dimensions', []))) {
        instanceAliasValue = instanceList[i]._InstanceAliasValue;
        instanceList.splice(i, 1);
        break;
      }
    }

    return {
      target: "".concat(response.MetricName, " - ").concat(instanceAliasValue),
      datapoints: parseDataPoint(dataPoint, timeshift)
    };
  });
} // parse tencent cloud monitor response data to grafana panel data

function parseDataPoint(dataPoint, timeshift) {
  if (timeshift === void 0) {
    timeshift = 0;
  }

  var timestamps = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(dataPoint, 'Timestamps', []);

  var values = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(dataPoint, 'Values', []);

  var result = timestamps.map(function (timestamp, index) {
    return [values[index], timestamp * 1000 + timeshift];
  });
  return result;
} // check whether instance is match or not


function isInstanceMatch(instance, dimensions) {
  var match = true; // eslint-disable-next-line @typescript-eslint/prefer-for-of

  for (var i = 0; i < dimensions.length; i++) {
    if (lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(instance, dimensions[i].Name, '').toString() !== dimensions[i].Value.toString()) {
      match = false;
      break;
    }
  }

  return match;
}
/**
 * 检查某个变量是否模板变量，即是否匹配 ${varnam} 或 [[varname]]
 *
 * @param field 变量字段名
 */


function isVariable(value) {
  if (value && (value.match(/^\${?(\w+)}?/) || value.match(/^\[\[(\w+)(\:\w+)?\]\]/))) {
    return true;
  }

  return false;
}
/**
 * 腾讯云 API 3.0 接口协议
 * @param options 接口请求对象 { url: string, data?: object }
 * @param service 产品名字 'cvm'
 * @param signObj 接口请求相关信息 { region?: string, action: string }
 * @param secretId
 * @param secretKey
 */

function GetRequestParams(options, service, signObj, secretId, datasourceId, backendSrv) {
  if (signObj === void 0) {
    signObj = {};
  }

  return __awaiter(this, void 0, void 0, function () {
    var signParams, sign, _a, intranet, headerSigned;

    return __generator(this, function (_b) {
      switch (_b.label) {
        case 0:
          signParams = __assign(__assign(__assign({
            secretId: secretId,
            payload: options.data || ''
          }, signObj), lodash__WEBPACK_IMPORTED_MODULE_0___default.a.pick(GetServiceAPIInfo(signObj.region || '', service), ['service', 'host', 'version']) || {}), {
            backendSrv: backendSrv,
            datasourceId: datasourceId,
            region: 'ap-guangzhou'
          });
          sign = new _sign__WEBPACK_IMPORTED_MODULE_3__["default"](signParams);
          return [4
          /*yield*/
          , sign.getHeader()];

        case 1:
          _a = _b.sent(), intranet = _a.intranet, headerSigned = __rest(_a, ["intranet"]); // 传入x-tc-language实现国际化
          // zh-CN en-US ko-KR ja-JP

          options.headers = Object.assign(options.headers || {}, __assign({}, headerSigned), {
            'x-tc-language': Object(_locale__WEBPACK_IMPORTED_MODULE_6__["getLanguage"])()
          });
          options.method = 'POST';

          if (intranet) {
            options.url += '-internal';
          }

          return [2
          /*return*/
          , options];
      }
    });
  });
}
/**
 *  腾讯云 API 2.0 接口协议
 * @param options 接口请求对象 { url: string, data?: object }
 * @param service 产品名字 'cvm'
 * @param signObj 接口请求相关信息 { region?: string, action: string }
 * @param secretId
 * @param secretKey
 */

function GetRequestParamsV2(options, service, signObj, secretId, datasourceId, backendSrv) {
  if (options === void 0) {
    options = {};
  }

  if (signObj === void 0) {
    signObj = {};
  }

  return __awaiter(this, void 0, void 0, function () {
    var data, signParams, sign, _a, queryString, path, host, intranet;

    return __generator(this, function (_b) {
      switch (_b.label) {
        case 0:
          data = options.data || {};
          signParams = __assign(__assign(__assign({
            secretId: secretId,
            data: data
          }, signObj), lodash__WEBPACK_IMPORTED_MODULE_0___default.a.pick(GetServiceAPIInfo(signObj.region || '', service), ['host', 'version']) || {}), {
            backendSrv: backendSrv,
            datasourceId: datasourceId
          });
          options.method = 'POST';
          sign = new _signV2__WEBPACK_IMPORTED_MODULE_4__["default"](signParams);
          options.headers = Object.assign(options.headers || {}, {
            'Content-Type': 'application/x-www-form-urlencoded'
          });
          return [4
          /*yield*/
          , sign.generateQueryString()];

        case 1:
          _a = _b.sent(), queryString = _a.queryString, path = _a.path, host = _a.host, intranet = _a.intranet;
          options.data = qs__WEBPACK_IMPORTED_MODULE_1___default.a.stringify(__assign(__assign(__assign({}, options.data), queryString), host && {
            host: host
          }));

          if (intranet) {
            // TODO: qcloud.com intranet host
            console.log('got intranet for sign v2');
          }

          options.url += path;
          return [2
          /*return*/
          , options];
      }
    });
  });
}
function SliceLength(total, len) {
  if (total === void 0) {
    total = 0;
  }

  if (len === void 0) {
    len = 1;
  }

  var result = [];
  var num = Math.ceil(total / len);

  for (var i = 1; i < num; i++) {
    result.push({
      Offset: len * i
    });
  }

  return result;
}
var FilterKeys = ['Namespace', 'Offset', 'Limit', 'SearchKey', 'Description', 'OrderBy', 'Order'];
function parseDataFromBackendPlugin(res) {
  var data = Object(_grafana_runtime__WEBPACK_IMPORTED_MODULE_5__["toDataQueryResponse"])(res).data;
  return {
    authorization: lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(data, '[0].meta.custom', '')
  };
}
/** 当前环境是否为非生产环境 */

var IS_DEVELOPMENT_ENVIRONMENT = !("development" === 'production');
/**
 * @link https://github.com/grafana/grafana/blob/3c6e0e8ef85048af952367751e478c08342e17b4/packages/grafana-data/src/types/app.ts#L12
 */

var CoreApp;

(function (CoreApp) {
  CoreApp["CloudAlerting"] = "cloud-alerting";
  CoreApp["UnifiedAlerting"] = "unified-alerting";
  CoreApp["Dashboard"] = "dashboard";
  CoreApp["Explore"] = "explore";
  CoreApp["Unknown"] = "unknown";
  CoreApp["PanelEditor"] = "panel-editor";
  CoreApp["PanelViewer"] = "panel-viewer";
})(CoreApp || (CoreApp = {}));

/***/ }),

/***/ "./datasource/common/datasourceStorage.ts":
/*!************************************************!*\
  !*** ./datasource/common/datasourceStorage.ts ***!
  \************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _indexedDB__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./indexedDB */ "./datasource/common/indexedDB.ts");
var __awaiter = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {
  function adopt(value) {
    return value instanceof P ? value : new P(function (resolve) {
      resolve(value);
    });
  }

  return new (P || (P = Promise))(function (resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }

    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }

    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }

    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};

var __generator = undefined && undefined.__generator || function (thisArg, body) {
  var _ = {
    label: 0,
    sent: function sent() {
      if (t[0] & 1) throw t[1];
      return t[1];
    },
    trys: [],
    ops: []
  },
      f,
      y,
      t,
      g;
  return g = {
    next: verb(0),
    "throw": verb(1),
    "return": verb(2)
  }, typeof Symbol === "function" && (g[Symbol.iterator] = function () {
    return this;
  }), g;

  function verb(n) {
    return function (v) {
      return step([n, v]);
    };
  }

  function step(op) {
    if (f) throw new TypeError("Generator is already executing.");

    while (_) {
      try {
        if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
        if (y = 0, t) op = [op[0] & 2, t.value];

        switch (op[0]) {
          case 0:
          case 1:
            t = op;
            break;

          case 4:
            _.label++;
            return {
              value: op[1],
              done: false
            };

          case 5:
            _.label++;
            y = op[1];
            op = [0];
            continue;

          case 7:
            op = _.ops.pop();

            _.trys.pop();

            continue;

          default:
            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
              _ = 0;
              continue;
            }

            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
              _.label = op[1];
              break;
            }

            if (op[0] === 6 && _.label < t[1]) {
              _.label = t[1];
              t = op;
              break;
            }

            if (t && _.label < t[2]) {
              _.label = t[2];

              _.ops.push(op);

              break;
            }

            if (t[2]) _.ops.pop();

            _.trys.pop();

            continue;
        }

        op = body.call(thisArg, _);
      } catch (e) {
        op = [6, e];
        y = 0;
      } finally {
        f = t = 0;
      }
    }

    if (op[0] & 5) throw op[1];
    return {
      value: op[0] ? op[1] : void 0,
      done: true
    };
  }
};



var InstanceStorage =
/** @class */
function () {
  function InstanceStorage() {
    // prefix = 'Datasource';
    // storageKey = 'grafanaInstanceCache';
    this.insKey = 'Instances';
    this.cacheWay = '';
  }

  InstanceStorage.prototype.setInstance = function (service, value) {
    return this.setStorage(service, this.insKey, value, true);
  };

  InstanceStorage.prototype.getInstance = function (service) {
    return __awaiter(this, void 0, void 0, function () {
      return __generator(this, function (_a) {
        return [2
        /*return*/
        , this.getStorage(service, this.insKey)];
      });
    });
  };

  InstanceStorage.prototype.setExtraStorage = function (service, Ekey, EValue) {
    return this.setStorage(service, Ekey, EValue, false);
  };

  InstanceStorage.prototype.getExtraStorage = function (service, Ekey) {
    return __awaiter(this, void 0, void 0, function () {
      return __generator(this, function (_a) {
        return [2
        /*return*/
        , this.getStorage(service, Ekey)];
      });
    });
  };

  InstanceStorage.prototype.setStorage = function (serviceKey, key, value, isCover) {
    var _a;

    if (isCover === void 0) {
      isCover = false;
    } // console.log('set', serviceKey, key, value);


    return _indexedDB__WEBPACK_IMPORTED_MODULE_0__["default"].addData((_a = {
      service: serviceKey
    }, _a[key] = value, _a), isCover);
  }; // 获取到模版变量信息


  InstanceStorage.prototype.getStorage = function (service, key) {
    return __awaiter(this, void 0, void 0, function () {
      var storage;
      return __generator(this, function (_a) {
        switch (_a.label) {
          case 0:
            return [4
            /*yield*/
            , _indexedDB__WEBPACK_IMPORTED_MODULE_0__["default"].getData(service)];

          case 1:
            storage = _a.sent(); // console.log('get', key, storage);

            return [2
            /*return*/
            , key ? storage === null || storage === void 0 ? void 0 : storage[key] : storage];
        }
      });
    });
  };

  return InstanceStorage;
}();

/* harmony default export */ __webpack_exports__["default"] = (new InstanceStorage());

/***/ }),

/***/ "./datasource/common/indexedDB.ts":
/*!****************************************!*\
  !*** ./datasource/common/indexedDB.ts ***!
  \****************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
var __assign = undefined && undefined.__assign || function () {
  __assign = Object.assign || function (t) {
    for (var s, i = 1, n = arguments.length; i < n; i++) {
      s = arguments[i];

      for (var p in s) {
        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
      }
    }

    return t;
  };

  return __assign.apply(this, arguments);
};

var __awaiter = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {
  function adopt(value) {
    return value instanceof P ? value : new P(function (resolve) {
      resolve(value);
    });
  }

  return new (P || (P = Promise))(function (resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }

    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }

    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }

    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};

var __generator = undefined && undefined.__generator || function (thisArg, body) {
  var _ = {
    label: 0,
    sent: function sent() {
      if (t[0] & 1) throw t[1];
      return t[1];
    },
    trys: [],
    ops: []
  },
      f,
      y,
      t,
      g;
  return g = {
    next: verb(0),
    "throw": verb(1),
    "return": verb(2)
  }, typeof Symbol === "function" && (g[Symbol.iterator] = function () {
    return this;
  }), g;

  function verb(n) {
    return function (v) {
      return step([n, v]);
    };
  }

  function step(op) {
    if (f) throw new TypeError("Generator is already executing.");

    while (_) {
      try {
        if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
        if (y = 0, t) op = [op[0] & 2, t.value];

        switch (op[0]) {
          case 0:
          case 1:
            t = op;
            break;

          case 4:
            _.label++;
            return {
              value: op[1],
              done: false
            };

          case 5:
            _.label++;
            y = op[1];
            op = [0];
            continue;

          case 7:
            op = _.ops.pop();

            _.trys.pop();

            continue;

          default:
            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
              _ = 0;
              continue;
            }

            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
              _.label = op[1];
              break;
            }

            if (op[0] === 6 && _.label < t[1]) {
              _.label = t[1];
              t = op;
              break;
            }

            if (t && _.label < t[2]) {
              _.label = t[2];

              _.ops.push(op);

              break;
            }

            if (t[2]) _.ops.pop();

            _.trys.pop();

            continue;
        }

        op = body.call(thisArg, _);
      } catch (e) {
        op = [6, e];
        y = 0;
      } finally {
        f = t = 0;
      }
    }

    if (op[0] & 5) throw op[1];
    return {
      value: op[0] ? op[1] : void 0,
      done: true
    };
  }
}; // interface UpdateProps {
//   storeName: string;
//   cursorKey: string;
//   cursorValue?: any;
//   data: any;
// }


var store = {
  name: 'grafanaInstanceList',
  key: 'service'
};

var promisify = function promisify(request, type) {
  return new Promise(function (resolve, reject) {
    request.onsuccess = function (event) {
      var returnMap = {
        event: event.target.result,
        request: request.result,
        msg: '操作成功'
      };
      resolve(returnMap[type || 'msg']);
    };

    request.onerror = function (event) {
      return reject(event.target.error || '操作失败');
    };
  });
}; // 固定表名和数据库名


var IndexedDB =
/** @class */
function () {
  function IndexedDB(props) {
    this.name = 'grafanaDatabase';
    this.version = 1;
    var _a = props.name,
        name = _a === void 0 ? 'database' : _a,
        _b = props.version,
        version = _b === void 0 ? 1 : _b,
        store = props.store;
    this.name = name;
    this.version = version;
    this.initDB(store);
  }
  /**
   * 初始化数据库
   * @param store 库表的结构
   */


  IndexedDB.prototype.initDB = function (store) {
    var indexeddb = window.indexedDB || window.webkitIndexedDB || window.mozIndexedDB || window.msIndexedDB;
    var request = indexeddb.open(this.name, this.version);

    request.onupgradeneeded = function (event) {
      var db = event.target.result;

      if (db.objectStoreNames.contains(store.name)) {// 存在表store
      } //  遍历store，设置数据表结构


      db.createObjectStore(store.name, {
        keyPath: store.key
      });
    };

    request.onerror = function () {
      return Promise.reject(new Error('初始化数据库失败'));
    };

    request.onsuccess = function () {
      return Promise.resolve('初始化数据库成功');
    };
  };

  IndexedDB.prototype.openDB = function () {
    var indexeddb = window.indexedDB || window.webkitIndexedDB || window.mozIndexedDB || window.msIndexedDB;
    var request = indexeddb.open(this.name, this.version);
    return promisify(request, 'event');
  };
  /**
   * 新增数据
   * @param storeName 表名
   * @param data 添加的数据
   */


  IndexedDB.prototype.insertData = function (storeName, data) {
    return __awaiter(this, void 0, void 0, function () {
      var db, transaction_1, objectStore, error_1;
      return __generator(this, function (_a) {
        switch (_a.label) {
          case 0:
            _a.trys.push([0, 2,, 3]);

            return [4
            /*yield*/
            , this.openDB()];

          case 1:
            db = _a.sent();
            transaction_1 = db.transaction(storeName, 'readwrite');
            objectStore = transaction_1.objectStore(storeName);
            objectStore.add(data); // console.timeEnd('insertData');

            return [2
            /*return*/
            , new Promise(function (resolve, reject) {
              transaction_1.oncomplete = function () {
                // console.timeEnd('insertData');
                resolve('所有数据插入成功');
              };

              transaction_1.onerror = function (event) {
                reject(event);
              };
            })];

          case 2:
            error_1 = _a.sent();
            return [2
            /*return*/
            , Promise.reject(error_1)];

          case 3:
            return [2
            /*return*/
            ];
        }
      });
    });
  };
  /**
   * 更新数据
   * @param props 查询数据的参数以及要修改的值的参数
   */


  IndexedDB.prototype.addData = function (data, isCover) {
    return __awaiter(this, void 0, void 0, function () {
      var storeName, oldData, objectStore, newData, requestUpdate, error_2;
      return __generator(this, function (_a) {
        switch (_a.label) {
          case 0:
            _a.trys.push([0, 3,, 4]);

            storeName = store.name;
            return [4
            /*yield*/
            , this.getData(data.service)];

          case 1:
            oldData = _a.sent();
            return [4
            /*yield*/
            , this.getObjectStore(storeName, 'readwrite')];

          case 2:
            objectStore = _a.sent();

            if (!oldData) {
              // 不存在则新建
              this.insertData(storeName, data);
            }

            newData = __assign(__assign({}, oldData), data);
            if (isCover) newData = data; // 需要覆盖之前内容

            requestUpdate = objectStore.put(newData); // console.timeEnd('updateData');

            return [2
            /*return*/
            , promisify(requestUpdate)];

          case 3:
            error_2 = _a.sent();
            return [2
            /*return*/
            , Promise.reject(error_2)];

          case 4:
            return [2
            /*return*/
            ];
        }
      });
    });
  };
  /**
   * 获取数据库的值，返回查询到的第一项
   * @param storeName 表名/存储对象的键
   * @param cursorKey key
   * @param cursorValue 要查询索引的值
   */


  IndexedDB.prototype.getData = function (seviceName) {
    return __awaiter(this, void 0, void 0, function () {
      var storeName, objectStore, request, error_3;
      return __generator(this, function (_a) {
        switch (_a.label) {
          case 0:
            _a.trys.push([0, 2,, 3]);

            storeName = store.name;
            return [4
            /*yield*/
            , this.getObjectStore(storeName)];

          case 1:
            objectStore = _a.sent();
            request = objectStore.get(seviceName); // console.timeEnd('getData');

            return [2
            /*return*/
            , promisify(request, 'request')];

          case 2:
            error_3 = _a.sent();
            return [2
            /*return*/
            , Promise.reject(error_3)];

          case 3:
            return [2
            /*return*/
            ];
        }
      });
    });
  };

  IndexedDB.prototype.getAllData = function (storeName) {
    return __awaiter(this, void 0, void 0, function () {
      var objectStore, request, result, error_4;
      return __generator(this, function (_a) {
        switch (_a.label) {
          case 0:
            _a.trys.push([0, 3,, 4]);

            return [4
            /*yield*/
            , this.getObjectStore(storeName)];

          case 1:
            objectStore = _a.sent();
            request = objectStore.getAll();
            return [4
            /*yield*/
            , promisify(request, 'request')];

          case 2:
            result = _a.sent(); // console.timeEnd('getAllData');

            return [2
            /*return*/
            , result ? result : []];

          case 3:
            error_4 = _a.sent();
            return [2
            /*return*/
            , Promise.reject(error_4)];

          case 4:
            return [2
            /*return*/
            ];
        }
      });
    });
  };
  /**
   * 获取对象仓库
   * @param storeName 表名
   * @param type readonly 或者 readwrite等
   */


  IndexedDB.prototype.getObjectStore = function (storeName, type) {
    return __awaiter(this, void 0, Promise, function () {
      var db, error_5;
      return __generator(this, function (_a) {
        switch (_a.label) {
          case 0:
            _a.trys.push([0, 2,, 3]);

            return [4
            /*yield*/
            , this.openDB()];

          case 1:
            db = _a.sent();
            return [2
            /*return*/
            , db.transaction(storeName, type).objectStore(storeName)];

          case 2:
            error_5 = _a.sent();
            return [2
            /*return*/
            , Promise.reject(error_5)];

          case 3:
            return [2
            /*return*/
            ];
        }
      });
    });
  };

  return IndexedDB;
}(); // console.log('testDDB')
// const indexDB = new IndexedDB({store});
// indexDB.addData({service: 'cvm', instance: [{ins: 23}]}).then(e=>{
//   indexDB.getData('cvm').then(dd=>{console.log({dd})})
// })


/* harmony default export */ __webpack_exports__["default"] = (new IndexedDB({
  store: store
}));

/***/ }),

/***/ "./datasource/common/react-loader.ts":
/*!*******************************************!*\
  !*** ./datasource/common/react-loader.ts ***!
  \*******************************************/
/*! exports provided: loadReactComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "loadReactComponent", function() { return loadReactComponent; });
/* harmony import */ var grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! grafana/app/core/core_module */ "grafana/app/core/core_module");
/* harmony import */ var grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react-dom */ "react-dom");
/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_dom__WEBPACK_IMPORTED_MODULE_2__);




var genController = function genController(component) {
  return (
    /** @class */
    function () {
      Controller.$inject = ["$scope", "$element"];

      /** @ngInject */
      function Controller($scope, $element) {
        this._$scope = $scope;
        this._$element = $element;
      }

      Controller.prototype.$onInit = function () {
        var _this = this; // extract porps


        var props = Object.entries(this._$scope).reduce(function (acc, _a) {
          var key = _a[0],
              value = _a[1];

          if (!key.startsWith('$')) {
            if (typeof value === 'function') {
              acc[key] = function () {
                var args = [];

                for (var _i = 0; _i < arguments.length; _i++) {
                  args[_i] = arguments[_i];
                }

                return value({
                  _query: args.length === 1 ? args[0] : args
                });
              };
            } else {
              acc[key] = value;
            }
          }

          return acc;
        }, {}); // wating dom mounted

        setTimeout(function () {
          react_dom__WEBPACK_IMPORTED_MODULE_2___default.a.render(react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(component, props), _this._$element[0]);
        });
      };

      return Controller;
    }()
  );
};

function loadReactComponent(RectCompo, componentName, propTypes) {
  grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0___default.a.directive(componentName, function () {
    return {
      template: "<div class=\"".concat(componentName, "\"></div>"),
      controller: genController(RectCompo),
      restrict: 'E',
      scope: propTypes,
      replace: true
    };
  });
}

/***/ }),

/***/ "./datasource/common/sign.ts":
/*!***********************************!*\
  !*** ./datasource/common/sign.ts ***!
  \***********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! moment */ "moment");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_0__);
var __assign = undefined && undefined.__assign || function () {
  __assign = Object.assign || function (t) {
    for (var s, i = 1, n = arguments.length; i < n; i++) {
      s = arguments[i];

      for (var p in s) {
        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
      }
    }

    return t;
  };

  return __assign.apply(this, arguments);
};

var __awaiter = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {
  function adopt(value) {
    return value instanceof P ? value : new P(function (resolve) {
      resolve(value);
    });
  }

  return new (P || (P = Promise))(function (resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }

    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }

    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }

    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};

var __generator = undefined && undefined.__generator || function (thisArg, body) {
  var _ = {
    label: 0,
    sent: function sent() {
      if (t[0] & 1) throw t[1];
      return t[1];
    },
    trys: [],
    ops: []
  },
      f,
      y,
      t,
      g;
  return g = {
    next: verb(0),
    "throw": verb(1),
    "return": verb(2)
  }, typeof Symbol === "function" && (g[Symbol.iterator] = function () {
    return this;
  }), g;

  function verb(n) {
    return function (v) {
      return step([n, v]);
    };
  }

  function step(op) {
    if (f) throw new TypeError("Generator is already executing.");

    while (_) {
      try {
        if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
        if (y = 0, t) op = [op[0] & 2, t.value];

        switch (op[0]) {
          case 0:
          case 1:
            t = op;
            break;

          case 4:
            _.label++;
            return {
              value: op[1],
              done: false
            };

          case 5:
            _.label++;
            y = op[1];
            op = [0];
            continue;

          case 7:
            op = _.ops.pop();

            _.trys.pop();

            continue;

          default:
            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
              _ = 0;
              continue;
            }

            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
              _.label = op[1];
              break;
            }

            if (op[0] === 6 && _.label < t[1]) {
              _.label = t[1];
              t = op;
              break;
            }

            if (t && _.label < t[2]) {
              _.label = t[2];

              _.ops.push(op);

              break;
            }

            if (t[2]) _.ops.pop();

            _.trys.pop();

            continue;
        }

        op = body.call(thisArg, _);
      } catch (e) {
        op = [6, e];
        y = 0;
      } finally {
        f = t = 0;
      }
    }

    if (op[0] & 5) throw op[1];
    return {
      value: op[0] ? op[1] : void 0,
      done: true
    };
  }
};


var HttpRequestMethod = 'POST';
var CanonicalUri = '/';
var CanonicalQueryString = '';
var ContentType = 'application/json';

var Sign =
/** @class */
function () {
  function Sign(options) {
    var secretId = options.secretId,
        service = options.service,
        action = options.action,
        host = options.host,
        version = options.version,
        _a = options.payload,
        payload = _a === void 0 ? '' : _a,
        region = options.region,
        backendSrv = options.backendSrv,
        datasourceId = options.datasourceId;
    this.secretId = secretId; // this.secretKey = secretKey;

    this.service = service;
    this.action = action;
    this.host = host;
    this.version = version;
    this.payload = typeof payload === 'string' ? payload : JSON.stringify(payload);
    this.region = region;
    var nowDate = moment__WEBPACK_IMPORTED_MODULE_0___default()().utc();
    this.timestamp = nowDate.unix();
    this.date = nowDate.format('YYYY-MM-DD');
    this.backendSrv = backendSrv;
    this.datasourceId = datasourceId;
  }

  Sign.prototype.getHeader = function () {
    return __awaiter(this, void 0, void 0, function () {
      return __generator(this, function (_a) {
        return [2
        /*return*/
        , this.getResourceHeader()];
      });
    });
  };

  Sign.prototype.getResourceHeader = function () {
    var _a, _b, _c;

    return __awaiter(this, void 0, void 0, function () {
      var res, resp, err_1, authorization, token, intranet, grafanaVersion, headers;
      return __generator(this, function (_d) {
        switch (_d.label) {
          case 0:
            res = {};
            _d.label = 1;

          case 1:
            _d.trys.push([1, 3,, 4]);

            return [4
            /*yield*/
            , this.backendSrv.datasourceRequest({
              url: "/api/datasources/".concat(this.datasourceId, "/resources/sign_v3"),
              method: 'POST',
              headers: {
                'Content-Type': 'application/json'
              },
              data: {
                Host: this.host,
                Service: this.service,
                Version: this.version,
                Action: this.action,
                Region: this.region,
                Timestamp: this.timestamp,
                Method: HttpRequestMethod,
                Uri: CanonicalUri,
                Query: CanonicalQueryString,
                Body: this.payload,
                Headers: {
                  'content-type': ContentType,
                  host: this.host
                }
              }
            })];

          case 2:
            resp = _d.sent();
            res = resp.data;
            return [3
            /*break*/
            , 4];

          case 3:
            err_1 = _d.sent();
            return [3
            /*break*/
            , 4];

          case 4:
            authorization = res.authorization, token = res.token, intranet = res.intranet;
            grafanaVersion = ((_c = (_b = (_a = window.grafanaBootData) === null || _a === void 0 ? void 0 : _a.settings) === null || _b === void 0 ? void 0 : _b.buildInfo) === null || _c === void 0 ? void 0 : _c.version) || '0.0.0';
            headers = __assign(__assign(__assign({
              Authorization: authorization,
              'Content-Type': ContentType,
              'X-TC-Action': this.action,
              'X-TC-Timestamp': this.timestamp.toString(),
              'X-TC-Version': this.version,
              'X-TC-RequestClient': "GF_".concat(grafanaVersion, "_PL_CM_").concat("2.8.7")
            }, this.region && {
              'X-TC-Region': this.region
            }), token && {
              'X-TC-Token': token
            }), {
              intranet: intranet
            });
            return [2
            /*return*/
            , headers];
        }
      });
    });
  };

  return Sign;
}();

/* harmony default export */ __webpack_exports__["default"] = (Sign);

/***/ }),

/***/ "./datasource/common/signV2.ts":
/*!*************************************!*\
  !*** ./datasource/common/signV2.ts ***!
  \*************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/**
 *
 * @param defaults 为对象
 * secretId
 * secretKey
 * action
 * region
 * host
 */
var __awaiter = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {
  function adopt(value) {
    return value instanceof P ? value : new P(function (resolve) {
      resolve(value);
    });
  }

  return new (P || (P = Promise))(function (resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }

    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }

    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }

    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};

var __generator = undefined && undefined.__generator || function (thisArg, body) {
  var _ = {
    label: 0,
    sent: function sent() {
      if (t[0] & 1) throw t[1];
      return t[1];
    },
    trys: [],
    ops: []
  },
      f,
      y,
      t,
      g;
  return g = {
    next: verb(0),
    "throw": verb(1),
    "return": verb(2)
  }, typeof Symbol === "function" && (g[Symbol.iterator] = function () {
    return this;
  }), g;

  function verb(n) {
    return function (v) {
      return step([n, v]);
    };
  }

  function step(op) {
    if (f) throw new TypeError("Generator is already executing.");

    while (_) {
      try {
        if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
        if (y = 0, t) op = [op[0] & 2, t.value];

        switch (op[0]) {
          case 0:
          case 1:
            t = op;
            break;

          case 4:
            _.label++;
            return {
              value: op[1],
              done: false
            };

          case 5:
            _.label++;
            y = op[1];
            op = [0];
            continue;

          case 7:
            op = _.ops.pop();

            _.trys.pop();

            continue;

          default:
            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
              _ = 0;
              continue;
            }

            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
              _.label = op[1];
              break;
            }

            if (op[0] === 6 && _.label < t[1]) {
              _.label = t[1];
              t = op;
              break;
            }

            if (t && _.label < t[2]) {
              _.label = t[2];

              _.ops.push(op);

              break;
            }

            if (t[2]) _.ops.pop();

            _.trys.pop();

            continue;
        }

        op = body.call(thisArg, _);
      } catch (e) {
        op = [6, e];
        y = 0;
      } finally {
        f = t = 0;
      }
    }

    if (op[0] & 5) throw op[1];
    return {
      value: op[0] ? op[1] : void 0,
      done: true
    };
  }
};

var SignV2 =
/** @class */
function () {
  function SignV2(defaults) {
    var _this = this;

    if (defaults === void 0) {
      defaults = {};
    }

    this.defaults = {
      path: '/v2/index.php',
      method: 'POST'
    };

    this.generateQueryString = function () {
      return __awaiter(_this, void 0, void 0, function () {
        return __generator(this, function (_a) {
          return [2
          /*return*/
          , this.getResourceQueryString()];
        });
      });
    };

    this.defaults = Object.assign(this.defaults, defaults);
    this.defaults.secretKey = '';
    this.backendSrv = defaults.backendSrv;
    this.datasourceId = defaults.datasourceId;
  }

  SignV2.prototype.getResourceQueryString = function () {
    return __awaiter(this, void 0, void 0, function () {
      var res, data, payload, resp, err_1, path, querystring, host, intranet;
      return __generator(this, function (_a) {
        switch (_a.label) {
          case 0:
            res = {};
            _a.label = 1;

          case 1:
            _a.trys.push([1, 3,, 4]);

            data = this.defaults.data;
            payload = typeof data === 'string' ? data : JSON.stringify(data);
            return [4
            /*yield*/
            , this.backendSrv.datasourceRequest({
              url: "/api/datasources/".concat(this.datasourceId, "/resources/sign_v2"),
              method: 'POST',
              headers: {
                'Content-Type': 'application/json'
              },
              data: {
                Host: this.defaults.host,
                Action: this.defaults.action,
                Version: this.defaults.version,
                Region: this.defaults.region,
                Method: this.defaults.method,
                Uri: this.defaults.path,
                Query: '',
                Body: payload
              }
            })];

          case 2:
            resp = _a.sent();
            res = resp.data;
            return [3
            /*break*/
            , 4];

          case 3:
            err_1 = _a.sent();
            return [3
            /*break*/
            , 4];

          case 4:
            path = res.path, querystring = res.querystring, host = res.host, intranet = res.intranet;
            return [2
            /*return*/
            , {
              queryString: querystring,
              path: path,
              host: host,
              intranet: intranet
            }];
        }
      });
    });
  };

  return SignV2;
}();

/* harmony default export */ __webpack_exports__["default"] = (SignV2);

/***/ }),

/***/ "./datasource/common/utils.ts":
/*!************************************!*\
  !*** ./datasource/common/utils.ts ***!
  \************************************/
/*! exports provided: fetchAllFactory, instanceQueryParamsBaseParse, getNamesapceFromService, serviceGroupBy, isTargetEqual, getTimeShiftInMs */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "fetchAllFactory", function() { return fetchAllFactory; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "instanceQueryParamsBaseParse", function() { return instanceQueryParamsBaseParse; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getNamesapceFromService", function() { return getNamesapceFromService; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "serviceGroupBy", function() { return serviceGroupBy; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isTargetEqual", function() { return isTargetEqual; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getTimeShiftInMs", function() { return getTimeShiftInMs; });
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lodash */ "lodash");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _tc_monitor__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../tc_monitor */ "./datasource/tc_monitor/index.ts");
var __assign = undefined && undefined.__assign || function () {
  __assign = Object.assign || function (t) {
    for (var s, i = 1, n = arguments.length; i < n; i++) {
      s = arguments[i];

      for (var p in s) {
        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
      }
    }

    return t;
  };

  return __assign.apply(this, arguments);
};

var __awaiter = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {
  function adopt(value) {
    return value instanceof P ? value : new P(function (resolve) {
      resolve(value);
    });
  }

  return new (P || (P = Promise))(function (resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }

    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }

    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }

    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};

var __generator = undefined && undefined.__generator || function (thisArg, body) {
  var _ = {
    label: 0,
    sent: function sent() {
      if (t[0] & 1) throw t[1];
      return t[1];
    },
    trys: [],
    ops: []
  },
      f,
      y,
      t,
      g;
  return g = {
    next: verb(0),
    "throw": verb(1),
    "return": verb(2)
  }, typeof Symbol === "function" && (g[Symbol.iterator] = function () {
    return this;
  }), g;

  function verb(n) {
    return function (v) {
      return step([n, v]);
    };
  }

  function step(op) {
    if (f) throw new TypeError("Generator is already executing.");

    while (_) {
      try {
        if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
        if (y = 0, t) op = [op[0] & 2, t.value];

        switch (op[0]) {
          case 0:
          case 1:
            t = op;
            break;

          case 4:
            _.label++;
            return {
              value: op[1],
              done: false
            };

          case 5:
            _.label++;
            y = op[1];
            op = [0];
            continue;

          case 7:
            op = _.ops.pop();

            _.trys.pop();

            continue;

          default:
            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
              _ = 0;
              continue;
            }

            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
              _.label = op[1];
              break;
            }

            if (op[0] === 6 && _.label < t[1]) {
              _.label = t[1];
              t = op;
              break;
            }

            if (t && _.label < t[2]) {
              _.label = t[2];

              _.ops.push(op);

              break;
            }

            if (t[2]) _.ops.pop();

            _.trys.pop();

            continue;
        }

        op = body.call(thisArg, _);
      } catch (e) {
        op = [6, e];
        y = 0;
      } finally {
        f = t = 0;
      }
    }

    if (op[0] & 5) throw op[1];
    return {
      value: op[0] ? op[1] : void 0,
      done: true
    };
  }
};



/* 从分页数据获取全量数据 */

var PageSize = 50;

function getFieldsValue(value, fields) {
  return fields.map(function (item) {
    return lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(value, item, lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(value, "Result.".concat(item), []));
  });
}

function fetchAllFactory(fetcher, _params, field) {
  var _a, _b, _c, _d, _e, _f, _g, _h;

  return __awaiter(this, void 0, void 0, function () {
    var params, rs, fields, TotalCount, firstLists, delta, batchCount, pmList, resultList;
    return __generator(this, function (_j) {
      switch (_j.label) {
        case 0:
          params = __assign({}, lodash__WEBPACK_IMPORTED_MODULE_0___default.a.omit(_params, ['isOffsetPage']));
          params.Limit = params.Limit || PageSize; // 默认给个Limit大小为50

          params.Offset = (_a = params.Offset) !== null && _a !== void 0 ? _a : 0; // 默认给个Offset为0

          return [4
          /*yield*/
          , fetcher(params)];

        case 1:
          rs = (_b = _j.sent()) !== null && _b !== void 0 ? _b : {};
          fields = Array.isArray(field) ? field : [field];
          TotalCount = (_h = (_f = (_e = (_c = rs.TotalCount) !== null && _c !== void 0 ? _c : (_d = rs.Result) === null || _d === void 0 ? void 0 : _d.TotalCount) !== null && _e !== void 0 ? _e : rs.TotalCnt) !== null && _f !== void 0 ? _f : (_g = rs.Result) === null || _g === void 0 ? void 0 : _g.TotalCnt) !== null && _h !== void 0 ? _h : 0;
          firstLists = getFieldsValue(rs, fields);

          if (TotalCount === 0 || firstLists[0].length === TotalCount) {
            // 只有一页，结束
            return [2
            /*return*/
            , firstLists];
          }

          delta = TotalCount - firstLists[0].length;
          batchCount = Math.ceil(delta / PageSize);
          pmList = new Array(batchCount).fill(0).map(function (_, index) {
            params.Offset = _params.isOffsetPage ? 1 + index : (1 + index) * params.Limit;
            return fetcher(params);
          });
          return [4
          /*yield*/
          , Promise.all(pmList)];

        case 2:
          resultList = _j.sent();
          return [2
          /*return*/
          , resultList.reduce(function (acc, cur) {
            var lists = getFieldsValue(cur, fields); // [[], [], []] + [[], [], []]

            acc.forEach(function (list, index) {
              return list.push.apply(list, lists[index]);
            });
            return acc;
          }, firstLists)];
      }
    });
  });
}
/**
 * 实例列表接口入参处理
 *
 * @param queries 表单键入内容
 * @param isFilter 是否需要设置为Filters格式
 */

function instanceQueryParamsBaseParse(queries, isFilter) {
  var params = {};

  if (!lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isEmpty(queries)) {
    params.Limit = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(queries, 'Limit', 20) || 20;
    params.Offset = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(queries, 'Offset', 0) || 0;
    queries = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.omit(queries, ['Offset', 'Limit']);
    var Filters_1 = [];

    lodash__WEBPACK_IMPORTED_MODULE_0___default.a.forEach(queries, function (item, key) {
      if (lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isArray(item)) {
        item = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.compact(item);

        if (item.length > 0) {
          if (isFilter) {
            Filters_1.push({
              Name: key,
              Values: lodash__WEBPACK_IMPORTED_MODULE_0___default.a.uniq(item).slice(0, 5)
            });
          } else {
            params[key] = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.uniq(item);
          }
        }
      } else if (lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isObject(item)) {
        if (lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isNumber(lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(item, 'value', undefined)) || !lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isEmpty(lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(item, 'value', undefined))) {
          if (isFilter) {
            Filters_1.push({
              Name: key,
              Values: lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(item, 'value', []).slice(0, 5)
            });
          } else {
            params[key] = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(item, 'value');
          }
        }
      } else if (item !== null && item !== undefined && item !== '') {
        if (isFilter) {
          Filters_1.push({
            Name: key,
            Values: item
          });
        } else {
          params[key] = item;
        }
      }
    });

    if (isFilter && Filters_1.length > 0) {
      params.Filters = Filters_1;
      return params;
    }
  }

  return params;
}
function getNamesapceFromService(serviceName) {
  return lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(lodash__WEBPACK_IMPORTED_MODULE_0___default.a.find(_tc_monitor__WEBPACK_IMPORTED_MODULE_1__["SERVICES"], function (service) {
    return service.service === serviceName;
  }), 'namespace');
}
function serviceGroupBy(services) {
  var result = services.reduce(function (acc, cur) {
    var namespace = cur.namespace,
        label = cur.label,
        _a = cur.groupName,
        groupName = _a === void 0 ? label : _a;
    var existedGroup = acc.find(function (item) {
      return item.label === groupName;
    });

    if (!existedGroup) {
      acc.push({
        label: groupName,
        value: groupName,
        items: [{
          label: label,
          value: namespace
        }]
      });
      return acc;
    }

    existedGroup.items.push({
      label: label,
      value: namespace
    });
    return acc;
  }, []); // 将只有一个子元素的项目进行特殊处理

  var rs = result.map(function (item) {
    return item.items.length === 1 ? {
      label: item.items[0].label,
      value: item.items[0].value
    } : item;
  });
  return rs;
}
var isTargetEqual = function isTargetEqual(newTargetString, oldTargetString, key) {
  try {
    var newTarget = JSON.parse(newTargetString);
    var oldTarget = JSON.parse(oldTargetString);
    return newTarget[key] === oldTarget[key];
  } catch (e) {
    return newTargetString === oldTargetString;
  }
};
var getTimeShiftInMs = function getTimeShiftInMs(timeShift) {
  var parts = /^(\d+)([d|h|m|s])$/.exec(timeShift);

  if (!parts) {
    return 0;
  }

  var amount = parseInt(parts[1], 10);
  var unit = parts[2];

  switch (unit) {
    case 'd':
      return amount * 86400 * 1000;

    case 'h':
      return amount * 3600 * 1000;

    case 'm':
      return amount * 60 * 1000;

    case 's':
      return amount * 1000;
  }

  return 0;
};

/***/ }),

/***/ "./datasource/config-editor/ConfigEditor.tsx":
/*!***************************************************!*\
  !*** ./datasource/config-editor/ConfigEditor.tsx ***!
  \***************************************************/
/*! exports provided: ConfigEditor */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ConfigEditor", function() { return ConfigEditor; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @grafana/ui */ "@grafana/ui");
/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_grafana_ui__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _tc_monitor__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../tc_monitor */ "./datasource/tc_monitor/index.ts");
/* harmony import */ var _locale__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../locale */ "./locale/index.ts");
var __extends = undefined && undefined.__extends || function () {
  var _extendStatics = function extendStatics(d, b) {
    _extendStatics = Object.setPrototypeOf || {
      __proto__: []
    } instanceof Array && function (d, b) {
      d.__proto__ = b;
    } || function (d, b) {
      for (var p in b) {
        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];
      }
    };

    return _extendStatics(d, b);
  };

  return function (d, b) {
    if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");

    _extendStatics(d, b);

    function __() {
      this.constructor = d;
    }

    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();

var __assign = undefined && undefined.__assign || function () {
  __assign = Object.assign || function (t) {
    for (var s, i = 1, n = arguments.length; i < n; i++) {
      s = arguments[i];

      for (var p in s) {
        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
      }
    }

    return t;
  };

  return __assign.apply(this, arguments);
};





var SecretFormField = _grafana_ui__WEBPACK_IMPORTED_MODULE_1__["LegacyForms"].SecretFormField;

var ConfigEditor =
/** @class */
function (_super) {
  __extends(ConfigEditor, _super);

  function ConfigEditor(props) {
    var _this = _super.call(this, props) || this;

    _this.patchJsonData = function (kv) {
      var _a = _this.props,
          onOptionsChange = _a.onOptionsChange,
          options = _a.options;

      if (kv) {
        var jsonData = __assign(__assign({}, options.jsonData), kv);

        onOptionsChange(__assign(__assign({}, options), {
          jsonData: jsonData
        }));
      }
    };

    _this.onJsonDataChange = function (event) {
      var _a;

      var _b, _c;

      var _d = _this.props,
          onOptionsChange = _d.onOptionsChange,
          options = _d.options;
      var targetName = (_b = event === null || event === void 0 ? void 0 : event.currentTarget) === null || _b === void 0 ? void 0 : _b.name;
      var targetValue = (((_c = event === null || event === void 0 ? void 0 : event.currentTarget) === null || _c === void 0 ? void 0 : _c.value) || '').trim();

      if (targetName) {
        var jsonData = __assign(__assign({}, options.jsonData), (_a = {}, _a[targetName] = targetValue, _a));

        onOptionsChange(__assign(__assign({}, options), {
          jsonData: jsonData
        }));
      }
    }; // Secure field (only sent to the backend)


    _this.onSecureJsonChange = function (event) {
      var _a;

      var _b, _c;

      var _d = _this.props,
          onOptionsChange = _d.onOptionsChange,
          options = _d.options;
      var targetName = (_b = event === null || event === void 0 ? void 0 : event.currentTarget) === null || _b === void 0 ? void 0 : _b.name;
      var targetValue = (((_c = event === null || event === void 0 ? void 0 : event.currentTarget) === null || _c === void 0 ? void 0 : _c.value) || '').trim();

      if (targetName) {
        onOptionsChange(__assign(__assign({}, options), {
          secureJsonData: __assign(__assign({}, options.secureJsonData), (_a = {}, _a[targetName] = targetValue, _a))
        }));
      }
    };

    _this.onResetSecureJson = function (key) {
      var _a, _b;

      var _c = _this.props,
          onOptionsChange = _c.onOptionsChange,
          options = _c.options;

      if (key) {
        onOptionsChange(__assign(__assign({}, options), {
          secureJsonFields: __assign(__assign({}, options.secureJsonFields), (_a = {}, _a[key] = false, _a)),
          secureJsonData: __assign(__assign({}, options.secureJsonData), (_b = {}, _b[key] = '', _b))
        }));
      }
    };

    _this.state = {
      monitorFilter: '',
      isClsAlertVisiable: false
    };
    Object(_locale__WEBPACK_IMPORTED_MODULE_3__["setLanguage"])(props.options.jsonData.language || _locale__WEBPACK_IMPORTED_MODULE_3__["Language"].Chinese);
    return _this;
  }

  ConfigEditor.prototype.render = function () {
    var _this = this;

    var options = this.props.options;
    var jsonData = options.jsonData,
        secureJsonFields = options.secureJsonFields,
        secureJsonData = options.secureJsonData;
    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment, null, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", null, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("h3", {
      className: "page-heading"
    }, "Security Credentials"), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", {
      className: "card-item",
      style: {
        position: 'relative',
        marginTop: '16px',
        padding: '16px',
        WebkitBoxFlex: 1,
        flexGrow: 1,
        borderTop: '3px solid rgb(50, 115, 217)'
      }
    }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", null, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("h4", null, "Initialize Tencent Cloud Monitor Grafana App"), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("p", null, "To initialize the App and connect it to your Tencent Cloud service you will need a SecretId and a SecretKey for you Tencent Cloud account.", react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("br", null), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("b", null, "SecretId"), " is used to identify the identity of the API caller.", react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("br", null), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("b", null, "SecretKey"), " is used to encrypt the signature and validate the signature of the server-side.")), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", null, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("h5", null, "User Permission"), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("p", null, "If you are using a", react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("a", {
      className: "highlight-word",
      href: "https://intl.cloud.tencent.com/document/product/598/13674",
      target: "_blank",
      style: {
        margin: '0 4px'
      }
    }, "sub-user"), "account, you should at least own read permission to the cloud products you wish to monitor."), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("a", {
      className: "highlight-word",
      href: "https://console.cloud.tencent.com/cam/capi",
      target: "_blank"
    }, "Generate a new Tencent Cloud API key")))), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", {
      style: {
        marginTop: 20
      }
    }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_1__["InlineFieldRow"], null, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_1__["InlineField"], {
      label: "SecretId",
      labelWidth: 20,
      required: true
    }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_1__["Input"], {
      width: 50,
      required: true,
      value: jsonData.secretId,
      name: "secretId",
      onChange: this.onJsonDataChange
    }))), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_1__["InlineFieldRow"], null, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(SecretFormField, {
      label: "SecretKey",
      labelWidth: 10,
      inputWidth: 25,
      type: "password",
      name: "secretKey",
      value: (secureJsonData === null || secureJsonData === void 0 ? void 0 : secureJsonData.secretKey) || '',
      isConfigured: secureJsonFields === null || secureJsonFields === void 0 ? void 0 : secureJsonFields.secretKey,
      onChange: this.onSecureJsonChange,
      onReset: function onReset() {
        _this.onResetSecureJson('secretKey');
      }
    })), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_1__["InlineFieldRow"], {
      style: {
        marginTop: '10px'
      }
    }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_1__["InlineField"], {
      label: Object(_locale__WEBPACK_IMPORTED_MODULE_3__["t"])('language'),
      labelWidth: 20
    }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_1__["Select"], {
      value: jsonData.language || _locale__WEBPACK_IMPORTED_MODULE_3__["Language"].Chinese,
      className: "width-10",
      options: [{
        value: _locale__WEBPACK_IMPORTED_MODULE_3__["Language"].English,
        label: 'English'
      }, {
        value: _locale__WEBPACK_IMPORTED_MODULE_3__["Language"].Chinese,
        label: '简体中文'
      }],
      onChange: function onChange(option) {
        Object(_locale__WEBPACK_IMPORTED_MODULE_3__["setLanguage"])(option.value);

        _this.patchJsonData({
          language: option.value
        });
      }
    }))), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_1__["InlineFieldRow"], {
      style: {
        marginTop: '10px'
      }
    }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_1__["InlineField"], {
      label: Object(_locale__WEBPACK_IMPORTED_MODULE_3__["t"])('enable_intranet_API_mode'),
      labelWidth: 20
    }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(InlineSwitch, {
      value: jsonData.intranet,
      onChange: function onChange(e) {
        // onIntranetChange
        _this.patchJsonData({
          intranet: e.currentTarget.checked
        });
      }
    })))), this.renderRUMConfig(), this.renderAPMConfig(), this.renderLogServiceConfig(), this.renderMonitorConfig());
  };

  ConfigEditor.prototype.renderRUMConfig = function () {
    var _this = this;

    var options = this.props.options;
    var jsonData = options.jsonData;
    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", {
      style: {
        marginTop: 30
      }
    }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("h3", {
      className: "page-heading"
    }, "Real User Monitoring"), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_1__["InlineFieldRow"], null, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_1__["InlineField"], {
      labelWidth: 40,
      label: Object(_locale__WEBPACK_IMPORTED_MODULE_3__["t"])('RUM')
    }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(InlineSwitch, {
      value: jsonData.RUMServiceEnabled,
      onChange: function onChange(e) {
        _this.patchJsonData({
          RUMServiceEnabled: e.currentTarget.checked
        });
      }
    }))));
  };

  ConfigEditor.prototype.renderAPMConfig = function () {
    var _this = this;

    var options = this.props.options;
    var jsonData = options.jsonData;
    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", {
      style: {
        marginTop: 30
      }
    }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("h3", {
      className: "page-heading"
    }, "APM Monitoring"), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_1__["InlineFieldRow"], null, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_1__["InlineField"], {
      labelWidth: 40,
      label: Object(_locale__WEBPACK_IMPORTED_MODULE_3__["t"])('APM')
    }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(InlineSwitch, {
      value: jsonData.APMServiceEnabled,
      onChange: function onChange(e) {
        _this.patchJsonData({
          APMServiceEnabled: e.currentTarget.checked
        });
      }
    }))));
  };

  ConfigEditor.prototype.renderLogServiceConfig = function () {
    var _this = this;

    var options = this.props.options;
    var jsonData = options.jsonData;
    var isClsAlertVisiable = this.state.isClsAlertVisiable;
    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", {
      style: {
        marginTop: 30
      }
    }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("h3", {
      className: "page-heading"
    }, "Log Service"), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_1__["InlineFieldRow"], null, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_1__["InlineField"], {
      labelWidth: 40,
      label: Object(_locale__WEBPACK_IMPORTED_MODULE_3__["t"])('CLS')
    }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(InlineSwitch, {
      value: jsonData.logServiceEnabled,
      onChange: function onChange(e) {
        var logServiceEnabled = e.currentTarget.checked;

        _this.patchJsonData({
          logServiceEnabled: logServiceEnabled
        });

        if (logServiceEnabled) _this.setState({
          isClsAlertVisiable: true
        });
      }
    }))), isClsAlertVisiable && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_1__["Alert"], {
      severity: "info",
      title: "\u5982\u679C\u662F\u7B2C\u4E00\u6B21\u5F00\u542F CLS \u6570\u636E\u6E90\uFF0C\u8BF7\u4FDD\u5B58\u540E\u91CD\u542F Grafana"
    }));
  };

  ConfigEditor.prototype.renderMonitorConfig = function () {
    var _this = this;

    var options = this.props.options;
    var jsonData = options.jsonData;
    var monitorFilter = this.state.monitorFilter; // 使用 product 表示云监控业务下的云产品

    var filteredProducts = _tc_monitor__WEBPACK_IMPORTED_MODULE_2__["SERVICES"].filter(function (item) {
      return item.label.toLowerCase().includes(monitorFilter.toLowerCase());
    });
    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", {
      style: {
        marginTop: 30
      }
    }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("h3", {
      className: "page-heading"
    }, "Monitor Services"), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_1__["InlineFieldRow"], {
      style: {
        marginBottom: 10
      }
    }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_1__["InlineField"], null, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_1__["Input"], {
      placeholder: "Input keyword to filter...",
      width: 40,
      value: monitorFilter,
      onChange: function onChange(e) {
        _this.setState({
          monitorFilter: e.currentTarget.value
        });
      }
    })), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_1__["InlineField"], {
      label: "Select All",
      style: {
        marginLeft: 20
      }
    }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(InlineSwitch, {
      value: filteredProducts.every(function (product) {
        return jsonData[product.service];
      }),
      onChange: function onChange(e) {
        var toChecked = e.currentTarget.checked;
        var allCheckObject = {};
        filteredProducts.forEach(function (product) {
          allCheckObject[product.service] = toChecked;
        });

        _this.patchJsonData(allCheckObject);
      }
    }))), filteredProducts.map(function (product) {
      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_1__["InlineFieldRow"], {
        key: product.service
      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_1__["InlineField"], {
        labelWidth: 55,
        label: product.label,
        tooltip: react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("a", {
          target: "_blank",
          href: product.href
        }, "Click here for more information of ".concat(product.label, "."))
      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(InlineSwitch, {
        value: Boolean(jsonData[product.service]),
        onChange: function onChange(e) {
          var _a;

          _this.patchJsonData((_a = {}, _a[product.service] = e.currentTarget.checked, _a));
        }
      })));
    }));
  };

  return ConfigEditor;
}(react__WEBPACK_IMPORTED_MODULE_0__["PureComponent"]);

 // @grafana/ui 7.3.6版本不含 InlineSwitch 组件，这里打个补丁。提升最小支持版本后，可移除

function InlineSwitch(props) {
  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", {
    style: {
      padding: '0px 8px',
      height: 32,
      display: 'inline-flex',
      WebkitBoxAlign: 'center',
      alignItems: 'center',
      // background: '#F4F5F5',
      border: '1px solid rgba(204, 204, 220, 0.15)',
      borderRadius: 2
    }
  }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_1__["Switch"], __assign({}, props)));
}

/***/ }),

/***/ "./datasource/log-service/LogServiceDataSource.ts":
/*!********************************************************!*\
  !*** ./datasource/log-service/LogServiceDataSource.ts ***!
  \********************************************************/
/*! exports provided: LogServiceDataSource */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LogServiceDataSource", function() { return LogServiceDataSource; });
/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @grafana/data */ "@grafana/data");
/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_grafana_data__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! rxjs */ "rxjs");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(rxjs__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! rxjs/operators */ "../node_modules/rxjs/_esm5/operators/index.js");
/* harmony import */ var _grafana_runtime__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @grafana/runtime */ "@grafana/runtime");
/* harmony import */ var _grafana_runtime__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_grafana_runtime__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _common_model__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./common/model */ "./datasource/log-service/common/model/index.ts");
/* harmony import */ var _common_format__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./common/format */ "./datasource/log-service/common/format/index.ts");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! moment */ "moment");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _common_format_prepareTimeSeries__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./common/format/prepareTimeSeries */ "./datasource/log-service/common/format/prepareTimeSeries.ts");
/* harmony import */ var _common_utils_query__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./common/utils/query */ "./datasource/log-service/common/utils/query.ts");
var __extends = undefined && undefined.__extends || function () {
  var _extendStatics = function extendStatics(d, b) {
    _extendStatics = Object.setPrototypeOf || {
      __proto__: []
    } instanceof Array && function (d, b) {
      d.__proto__ = b;
    } || function (d, b) {
      for (var p in b) {
        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];
      }
    };

    return _extendStatics(d, b);
  };

  return function (d, b) {
    if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");

    _extendStatics(d, b);

    function __() {
      this.constructor = d;
    }

    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();

var __assign = undefined && undefined.__assign || function () {
  __assign = Object.assign || function (t) {
    for (var s, i = 1, n = arguments.length; i < n; i++) {
      s = arguments[i];

      for (var p in s) {
        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
      }
    }

    return t;
  };

  return __assign.apply(this, arguments);
};

var __awaiter = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {
  function adopt(value) {
    return value instanceof P ? value : new P(function (resolve) {
      resolve(value);
    });
  }

  return new (P || (P = Promise))(function (resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }

    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }

    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }

    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};

var __generator = undefined && undefined.__generator || function (thisArg, body) {
  var _ = {
    label: 0,
    sent: function sent() {
      if (t[0] & 1) throw t[1];
      return t[1];
    },
    trys: [],
    ops: []
  },
      f,
      y,
      t,
      g;
  return g = {
    next: verb(0),
    "throw": verb(1),
    "return": verb(2)
  }, typeof Symbol === "function" && (g[Symbol.iterator] = function () {
    return this;
  }), g;

  function verb(n) {
    return function (v) {
      return step([n, v]);
    };
  }

  function step(op) {
    if (f) throw new TypeError("Generator is already executing.");

    while (_) {
      try {
        if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
        if (y = 0, t) op = [op[0] & 2, t.value];

        switch (op[0]) {
          case 0:
          case 1:
            t = op;
            break;

          case 4:
            _.label++;
            return {
              value: op[1],
              done: false
            };

          case 5:
            _.label++;
            y = op[1];
            op = [0];
            continue;

          case 7:
            op = _.ops.pop();

            _.trys.pop();

            continue;

          default:
            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
              _ = 0;
              continue;
            }

            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
              _.label = op[1];
              break;
            }

            if (op[0] === 6 && _.label < t[1]) {
              _.label = t[1];
              t = op;
              break;
            }

            if (t && _.label < t[2]) {
              _.label = t[2];

              _.ops.push(op);

              break;
            }

            if (t[2]) _.ops.pop();

            _.trys.pop();

            continue;
        }

        op = body.call(thisArg, _);
      } catch (e) {
        op = [6, e];
        y = 0;
      } finally {
        f = t = 0;
      }
    }

    if (op[0] & 5) throw op[1];
    return {
      value: op[0] ? op[1] : void 0,
      done: true
    };
  }
};

var __spreadArray = undefined && undefined.__spreadArray || function (to, from, pack) {
  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {
    if (ar || !(i in from)) {
      if (!ar) ar = Array.prototype.slice.call(from, 0, i);
      ar[i] = from[i];
    }
  }
  return to.concat(ar || Array.prototype.slice.call(from));
};











var LogServiceDataSource =
/** @class */
function (_super) {
  __extends(LogServiceDataSource, _super);

  function LogServiceDataSource(instanceSettings) {
    var _this = _super.call(this, instanceSettings) || this;
    /** context disabled */


    _this.showContextToggle = function (row) {
      var _a;
      /** ConvertLogJsonToDataFrameDTO 函数中，将上下文相关值处理为 LogFieldReservedName.META field */


      var metaField = row.dataFrame.fields.find(function (item) {
        return item.name === _common_format__WEBPACK_IMPORTED_MODULE_5__["LogFieldReservedName"].META;
      });

      try {
        if (((_a = metaField === null || metaField === void 0 ? void 0 : metaField.labels) === null || _a === void 0 ? void 0 : _a.region) && (metaField === null || metaField === void 0 ? void 0 : metaField.labels.TopicId)) {
          var metaValue = JSON.parse(metaField.values.get(row.rowIndex));

          if ((metaValue === null || metaValue === void 0 ? void 0 : metaValue.PkgId) && (metaValue === null || metaValue === void 0 ? void 0 : metaValue.PkgLogId)) {
            return true;
          }
        }

        return false;
      } catch (e) {
        return false;
      }
    };

    _this.getLogRowContext = function (row, options) {
      return __awaiter(_this, void 0, void 0, function () {
        var _a, limit, _b, direction, timeField, metaField, metaValue, bTime, logContext, frame, e_1;

        return __generator(this, function (_c) {
          switch (_c.label) {
            case 0:
              _a = options.limit, limit = _a === void 0 ? 10 : _a, _b = options.direction, direction = _b === void 0 ? 'BACKWARD' : _b;
              timeField = row.dataFrame.fields.find(function (item) {
                return item.name === _common_format__WEBPACK_IMPORTED_MODULE_5__["LogFieldReservedName"].TIMESTAMP;
              });
              metaField = row.dataFrame.fields.find(function (item) {
                return item.name === _common_format__WEBPACK_IMPORTED_MODULE_5__["LogFieldReservedName"].META;
              });

              if (!timeField || !(metaField === null || metaField === void 0 ? void 0 : metaField.labels) || !limit) {
                return [2
                /*return*/
                , {
                  data: [],
                  state: _grafana_data__WEBPACK_IMPORTED_MODULE_0__["LoadingState"].Done
                }];
              }

              _c.label = 1;

            case 1:
              _c.trys.push([1, 3,, 4]);

              metaValue = JSON.parse(metaField.values.get(row.rowIndex));
              bTime = moment__WEBPACK_IMPORTED_MODULE_6___default()(timeField.values.get(row.rowIndex)).format('YYYY-MM-DD HH:MM:SS.SSS');
              return [4
              /*yield*/
              , Object(_common_model__WEBPACK_IMPORTED_MODULE_4__["DescribeLogContext"])({
                TopicId: metaField === null || metaField === void 0 ? void 0 : metaField.labels.TopicId,
                BTime: bTime,
                PkgId: metaValue.PkgId,
                PkgLogId: Number(metaValue.PkgLogId),
                PrevLogs: direction === 'BACKWARD' ? limit : 0,
                NextLogs: direction !== 'BACKWARD' ? limit : 0
              }, metaField === null || metaField === void 0 ? void 0 : metaField.labels.region, {
                instanceSettings: this.instanceSettings
              })];

            case 2:
              logContext = _c.sent();
              frame = Object(_common_format__WEBPACK_IMPORTED_MODULE_5__["ConvertLogContextToDataFrame"])(logContext);
              return [2
              /*return*/
              , {
                data: [frame],
                state: _grafana_data__WEBPACK_IMPORTED_MODULE_0__["LoadingState"].Done
              }];

            case 3:
              e_1 = _c.sent();
              return [2
              /*return*/
              , {
                data: [],
                state: _grafana_data__WEBPACK_IMPORTED_MODULE_0__["LoadingState"].Error,
                error: e_1
              }];

            case 4:
              return [2
              /*return*/
              ];
          }
        });
      });
    };

    _this.instanceSettings = instanceSettings;
    return _this;
  }

  LogServiceDataSource.prototype.query = function (request) {
    var _this = this;

    var range = request.range,
        targets = request.targets,
        scopedVars = request.scopedVars;

    var _a = [range.from, range.to].map(function (item) {
      return item.valueOf();
    }),
        from = _a[0],
        to = _a[1];

    var requestTargets = targets.map(function (target) {
      var _a, _b, _c;

      var region = ((_a = target.logServiceParams) === null || _a === void 0 ? void 0 : _a.region) ? Object(_grafana_runtime__WEBPACK_IMPORTED_MODULE_3__["getTemplateSrv"])().replace(target.logServiceParams.region) : '';
      var TopicId = ((_b = target.logServiceParams) === null || _b === void 0 ? void 0 : _b.TopicId) ? Object(_grafana_runtime__WEBPACK_IMPORTED_MODULE_3__["getTemplateSrv"])().replace(target.logServiceParams.TopicId) : '';
      var Query = Object(_common_utils_query__WEBPACK_IMPORTED_MODULE_8__["addQueryResultLimit"])(Object(_common_utils_query__WEBPACK_IMPORTED_MODULE_8__["replaceClsQueryWithTemplateSrv"])(((_c = target.logServiceParams) === null || _c === void 0 ? void 0 : _c.Query) || '', scopedVars), target.logServiceParams);
      return __assign(__assign({}, target), {
        logServiceParams: __assign(__assign({}, target.logServiceParams), {
          region: region,
          TopicId: TopicId,
          Query: Query
        })
      });
    });
    var dataFramePromise = requestTargets.filter(function (target) {
      return !target.hide && target.logServiceParams.region && target.logServiceParams.TopicId;
    }).map(function (target) {
      return Object(_common_model__WEBPACK_IMPORTED_MODULE_4__["SearchLog"])({
        TopicId: target.logServiceParams.TopicId,
        Query: target.logServiceParams.Query,
        From: from,
        To: to,
        SyntaxRule: target.logServiceParams.SyntaxRule,
        Limit: target.logServiceParams.MaxResultNum
      }, target.logServiceParams.region, {
        instanceSettings: _this.instanceSettings
      }).then(function (result) {
        return Object(_common_format__WEBPACK_IMPORTED_MODULE_5__["ConvertSearchResultsToDataFrame"])(Object(_common_format__WEBPACK_IMPORTED_MODULE_5__["formatSearchLog"])(result), {
          region: target.logServiceParams.region,
          TopicId: target.logServiceParams.TopicId
        });
      });
    });
    var output$ = new rxjs__WEBPACK_IMPORTED_MODULE_1__["Observable"](function (subscriber) {
      subscriber.next({
        data: [],
        state: _grafana_data__WEBPACK_IMPORTED_MODULE_0__["LoadingState"].Loading
      });
      Promise.all(dataFramePromise).then(function (frames) {
        var _a, _b;

        var processedFrames = [];

        var _loop_1 = function _loop_1(frame) {
          // 如果是 Analysis 场景，且返回内容可转化为 TimeSeriesMany, 则进行处理以绘制时序图
          if (!((_a = frame === null || frame === void 0 ? void 0 : frame.meta) === null || _a === void 0 ? void 0 : _a.preferredVisualisationType)) {
            var fieldTypeSet_1 = new Set();
            frame.fields.forEach(function (field) {
              return fieldTypeSet_1.add(field.type);
            });

            if (fieldTypeSet_1.has(_grafana_data__WEBPACK_IMPORTED_MODULE_0__["FieldType"].time) && fieldTypeSet_1.has(_grafana_data__WEBPACK_IMPORTED_MODULE_0__["FieldType"].string) && fieldTypeSet_1.has(_grafana_data__WEBPACK_IMPORTED_MODULE_0__["FieldType"].number)) {
              var timeSeriesMany = Object(_common_format_prepareTimeSeries__WEBPACK_IMPORTED_MODULE_7__["toTimeSeriesMany"])([frame]);

              if (((_b = frame.fields.filter(function (item) {
                return item.type === 'number';
              })) === null || _b === void 0 ? void 0 : _b.length) === 1) {
                timeSeriesMany.forEach(function (item) {
                  item.fields.forEach(function (field) {
                    if (field.type === _grafana_data__WEBPACK_IMPORTED_MODULE_0__["FieldType"].number) {
                      field.name = '';
                    }
                  });
                });
              }

              processedFrames.splice.apply(processedFrames, __spreadArray([frame.fields.length, 0], timeSeriesMany, false));
              return "continue";
            }
          }

          processedFrames.push(frame);
        };

        for (var _i = 0, frames_1 = frames; _i < frames_1.length; _i++) {
          var frame = frames_1[_i];

          _loop_1(frame);
        }

        subscriber.next({
          data: processedFrames,
          state: _grafana_data__WEBPACK_IMPORTED_MODULE_0__["LoadingState"].Done
        });
      })["catch"](function (e) {
        var _a;

        subscriber.next({
          data: [],
          state: _grafana_data__WEBPACK_IMPORTED_MODULE_0__["LoadingState"].Error,
          error: __assign(__assign({}, e), {
            message: (e === null || e === void 0 ? void 0 : e.message) || ((_a = e === null || e === void 0 ? void 0 : e.data) === null || _a === void 0 ? void 0 : _a.message)
          })
        });
      });
    }).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_2__["share"])());
    return output$;
  };

  LogServiceDataSource.prototype.metricFindQuery = function (query, options) {
    return __awaiter(this, void 0, Promise, function () {
      var logServiceParams, region, TopicId, Query, _a, analysisColumns, analysisRecords, _b, firstColumn_1;

      return __generator(this, function (_c) {
        switch (_c.label) {
          case 0:
            logServiceParams = query;
            region = (logServiceParams === null || logServiceParams === void 0 ? void 0 : logServiceParams.region) ? Object(_grafana_runtime__WEBPACK_IMPORTED_MODULE_3__["getTemplateSrv"])().replace(logServiceParams.region) : '';
            TopicId = (logServiceParams === null || logServiceParams === void 0 ? void 0 : logServiceParams.TopicId) ? Object(_grafana_runtime__WEBPACK_IMPORTED_MODULE_3__["getTemplateSrv"])().replace(logServiceParams.TopicId) : '';
            Query = Object(_common_utils_query__WEBPACK_IMPORTED_MODULE_8__["addQueryResultLimit"])(Object(_common_utils_query__WEBPACK_IMPORTED_MODULE_8__["replaceClsQueryWithTemplateSrv"])(logServiceParams.Query), logServiceParams);

            if (!options.range) {
              return [2
              /*return*/
              , []];
            }

            if (!(region && TopicId && Query)) return [3
            /*break*/
            , 2];
            _b = _common_format__WEBPACK_IMPORTED_MODULE_5__["formatSearchLog"];
            return [4
            /*yield*/
            , Object(_common_model__WEBPACK_IMPORTED_MODULE_4__["SearchLog"])({
              TopicId: TopicId,
              Query: Query,
              From: options.range.from.valueOf(),
              To: options.range.to.valueOf(),
              Limit: logServiceParams === null || logServiceParams === void 0 ? void 0 : logServiceParams.MaxResultNum
            }, region, {
              instanceSettings: this.instanceSettings
            })];

          case 1:
            _a = _b.apply(void 0, [_c.sent()]), analysisColumns = _a.analysisColumns, analysisRecords = _a.analysisRecords;

            if (analysisColumns.length > 0 && analysisRecords.length > 0) {
              firstColumn_1 = analysisColumns[0];
              return [2
              /*return*/
              , analysisRecords.map(function (record) {
                return {
                  text: record[firstColumn_1.Name],
                  value: record[firstColumn_1.Name]
                };
              })];
            }

            _c.label = 2;

          case 2:
            return [2
            /*return*/
            , []];
        }
      });
    });
  };

  LogServiceDataSource.prototype.testDatasource = function () {
    return __awaiter(this, void 0, void 0, function () {
      var e_2;
      return __generator(this, function (_a) {
        switch (_a.label) {
          case 0:
            if (!this.instanceSettings.jsonData['logServiceEnabled']) {
              return [2
              /*return*/
              , null];
            }

            _a.label = 1;

          case 1:
            _a.trys.push([1, 3,, 4]); // 使用SearchLog接口直接查询日志，根据是否遇到鉴权错误，判断秘钥合法性


            return [4
            /*yield*/
            , Object(_common_model__WEBPACK_IMPORTED_MODULE_4__["SearchLog"])({
              TopicId: '',
              Query: '',
              From: moment__WEBPACK_IMPORTED_MODULE_6___default()().subtract(1, 'h').valueOf(),
              To: moment__WEBPACK_IMPORTED_MODULE_6___default()().valueOf()
            }, 'ap-shanghai', {
              instanceSettings: this.instanceSettings
            })];

          case 2:
            // 使用SearchLog接口直接查询日志，根据是否遇到鉴权错误，判断秘钥合法性
            _a.sent();

            return [2
            /*return*/
            , {
              status: 'success',
              message: 'DatSource Connection OK'
            }];

          case 3:
            e_2 = _a.sent();

            if ((e_2 === null || e_2 === void 0 ? void 0 : e_2.code) && e_2.code !== 'AuthFailure.SignatureFailure') {
              return [2
              /*return*/
              , {
                status: 'success',
                message: 'DatSource Connection OK'
              }];
            } else {
              return [2
              /*return*/
              , {
                status: 'error',
                title: e_2.code,
                message: e_2.message
              }];
            }

            return [3
            /*break*/
            , 4];

          case 4:
            return [2
            /*return*/
            ];
        }
      });
    });
  };
  /** histogram support
   * @link https://github.com/grafana/grafana/blob/942be4215afaea27757fb3a034126452aaf3fab2/public/app/plugins/datasource/loki/datasource.ts#L115-L115
   */


  LogServiceDataSource.prototype.getLogsVolumeDataProvider = function (request) {
    return undefined;
  };

  return LogServiceDataSource;
}(_grafana_data__WEBPACK_IMPORTED_MODULE_0__["DataSourceApi"]);



/***/ }),

/***/ "./datasource/log-service/LogServiceQueryEditor.tsx":
/*!**********************************************************!*\
  !*** ./datasource/log-service/LogServiceQueryEditor.tsx ***!
  \**********************************************************/
/*! exports provided: LogServiceQueryEditor */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LogServiceQueryEditor", function() { return LogServiceQueryEditor; });
/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../types */ "./datasource/types.ts");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react_use__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react-use */ "../node_modules/react-use/esm/index.js");
/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @grafana/ui */ "@grafana/ui");
/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_grafana_ui__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _components_TopicSelector__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./components/TopicSelector */ "./datasource/log-service/components/TopicSelector.tsx");
/* harmony import */ var _common_constants__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../common/constants */ "./datasource/common/constants.ts");
/* harmony import */ var _locale__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../locale */ "./locale/index.ts");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! lodash */ "lodash");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var _index_less__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./index.less */ "./datasource/log-service/index.less");
/* harmony import */ var _index_less__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(_index_less__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var _common_constants__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./common/constants */ "./datasource/log-service/common/constants.tsx");
var __assign = undefined && undefined.__assign || function () {
  __assign = Object.assign || function (t) {
    for (var s, i = 1, n = arguments.length; i < n; i++) {
      s = arguments[i];

      for (var p in s) {
        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
      }
    }

    return t;
  };

  return __assign.apply(this, arguments);
};











var LogServiceQueryEditor = react__WEBPACK_IMPORTED_MODULE_1___default.a.memo(function (props) {
  var propsRef = Object(react_use__WEBPACK_IMPORTED_MODULE_2__["useLatest"])(props);
  var query = props.query,
      datasource = props.datasource;

  var logServiceParams = query.logServiceParams || lodash__WEBPACK_IMPORTED_MODULE_7___default.a.clone(_types__WEBPACK_IMPORTED_MODULE_0__["defaultQueryInfo"].logServiceParams);

  var partialOnChange = Object(react__WEBPACK_IMPORTED_MODULE_1__["useCallback"])(function (queryInfo) {
    var _a = propsRef.current,
        onChange = _a.onChange,
        query = _a.query; // 使用queryInfoRuntime作为配置模板，清除其他不存在的配置字段。

    var oldQuery = lodash__WEBPACK_IMPORTED_MODULE_7___default.a.pick(query, Object.keys(_types__WEBPACK_IMPORTED_MODULE_0__["queryInfoRuntime"]));

    onChange(__assign(__assign({}, oldQuery), queryInfo));
  }, [propsRef]);
  return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", null, react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_3__["InlineFieldRow"], null, react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_components_TopicSelector__WEBPACK_IMPORTED_MODULE_4__["TopicSelector"], {
    value: {
      region: logServiceParams.region,
      TopicId: logServiceParams.TopicId
    },
    onChange: function onChange(v) {
      var _a, _b;

      partialOnChange({
        logServiceParams: __assign(__assign({}, ((_b = (_a = propsRef.current) === null || _a === void 0 ? void 0 : _a.query) === null || _b === void 0 ? void 0 : _b.logServiceParams) || {}), v)
      });
    },
    datasource: datasource
  }), react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_3__["InlineField"], {
    label: Object(_locale__WEBPACK_IMPORTED_MODULE_6__["t"])('syntax_rule'),
    labelWidth: 20
  }, react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_3__["Select"], {
    value: logServiceParams.SyntaxRule,
    onChange: function onChange(v) {
      var _a, _b;

      partialOnChange({
        logServiceParams: __assign(__assign({}, ((_b = (_a = propsRef.current) === null || _a === void 0 ? void 0 : _a.query) === null || _b === void 0 ? void 0 : _b.logServiceParams) || {}), {
          SyntaxRule: v.value
        })
      });
    },
    menuPlacement: "bottom",
    options: [{
      label: 'Lucene',
      value: _common_constants__WEBPACK_IMPORTED_MODULE_9__["SearchSyntaxRule"].LUCENE
    }, {
      label: 'CQL',
      value: _common_constants__WEBPACK_IMPORTED_MODULE_9__["SearchSyntaxRule"].CQL
    }],
    width: 25,
    className: "log-service-monospaced-font-family"
  }))), react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(MaxResultNumInput, {
    value: logServiceParams.MaxResultNum,
    onChange: function onChange(val) {
      var _a, _b;

      partialOnChange({
        logServiceParams: __assign(__assign({}, ((_b = (_a = propsRef.current) === null || _a === void 0 ? void 0 : _a.query) === null || _b === void 0 ? void 0 : _b.logServiceParams) || {}), {
          MaxResultNum: val
        })
      });
    }
  }), react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", {
    style: {
      display: 'flex'
    }
  }, react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_3__["InlineLabel"], {
    width: 20
  }, Object(_locale__WEBPACK_IMPORTED_MODULE_6__["t"])('search_statement')), react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", {
    style: {
      flexGrow: 1
    }
  }, react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_3__["QueryField"], {
    portalOrigin: _common_constants__WEBPACK_IMPORTED_MODULE_5__["TcDataSourceId"],
    placeholder: "e.g. _SOURCE__: 127.0.0.1 AND \"http/1.0\"",
    query: logServiceParams.Query,
    onChange: function onChange(v) {
      var _a, _b;

      partialOnChange({
        logServiceParams: __assign(__assign({}, ((_b = (_a = propsRef.current) === null || _a === void 0 ? void 0 : _a.query) === null || _b === void 0 ? void 0 : _b.logServiceParams) || {}), {
          Query: v
        })
      });
    },
    // By default QueryField calls onChange if onBlur is not defined, this will trigger a rerender
    // And slate will claim the focus, making it impossible to leave the field.
    onBlur: function onBlur() {}
  }))));
});
LogServiceQueryEditor.displayName = 'LogServiceQueryEditor';
var MaxResultNumInput = react__WEBPACK_IMPORTED_MODULE_1___default.a.memo(function (props) {
  var min = 1;
  var max = 1000;
  var value = props.value,
      onChangeFromProps = props.onChange;
  var onInputChange = Object(react__WEBPACK_IMPORTED_MODULE_1__["useCallback"])(function (e) {
    var currVal = Number(e.currentTarget.value) || undefined;
    onChangeFromProps(currVal);
  }, [onChangeFromProps]);
  return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_3__["InlineField"], {
    label: Object(_locale__WEBPACK_IMPORTED_MODULE_6__["t"])('max_result_num'),
    labelWidth: 20,
    invalid: value < min || value > max,
    // @ts-ignore  这里报error属性不存在，但应该是存在的。
    error: "\u4EC5\u652F\u6301\u8FD4\u56DE1\uFF5E1000\u6761\u65E5\u5FD7"
  }, react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_3__["Input"], {
    type: "number",
    min: min,
    max: max,
    value: value,
    onChange: onInputChange,
    width: 25,
    className: "log-service-monospaced-font-family"
  }));
});

/***/ }),

/***/ "./datasource/log-service/common/constants.tsx":
/*!*****************************************************!*\
  !*** ./datasource/log-service/common/constants.tsx ***!
  \*****************************************************/
/*! exports provided: uuidRegex, SearchSyntaxRule */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "uuidRegex", function() { return uuidRegex; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SearchSyntaxRule", function() { return SearchSyntaxRule; });
var uuidRegex = /^[0-9a-f]{8}-[0-9a-f]{4}-[0-5][0-9a-f]{3}-[089ab][0-9a-f]{3}-[0-9a-f]{12}$/i;
var SearchSyntaxRule;

(function (SearchSyntaxRule) {
  SearchSyntaxRule[SearchSyntaxRule["LUCENE"] = 0] = "LUCENE";
  SearchSyntaxRule[SearchSyntaxRule["CQL"] = 1] = "CQL";
})(SearchSyntaxRule || (SearchSyntaxRule = {}));

/***/ }),

/***/ "./datasource/log-service/common/format/ConvertLogContextToDataFrame.ts":
/*!******************************************************************************!*\
  !*** ./datasource/log-service/common/format/ConvertLogContextToDataFrame.ts ***!
  \******************************************************************************/
/*! exports provided: ConvertLogContextToDataFrame */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ConvertLogContextToDataFrame", function() { return ConvertLogContextToDataFrame; });
/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @grafana/data */ "@grafana/data");
/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_grafana_data__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _formatSearchLog__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./formatSearchLog */ "./datasource/log-service/common/format/formatSearchLog.ts");


function ConvertLogContextToDataFrame(logContext) {
  var _a = logContext.LogContextInfos,
      LogContextInfos = _a === void 0 ? [] : _a;
  var timeField = {
    name: 'ts',
    type: _grafana_data__WEBPACK_IMPORTED_MODULE_0__["FieldType"].time,
    config: {
      displayName: 'Time'
    },
    values: []
  };
  var idField = {
    name: 'id',
    type: _grafana_data__WEBPACK_IMPORTED_MODULE_0__["FieldType"].string,
    values: []
  };
  var lineField = {
    name: 'line',
    type: _grafana_data__WEBPACK_IMPORTED_MODULE_0__["FieldType"].string,
    values: []
  };
  LogContextInfos.forEach(function (item) {
    timeField.values.unshift(item.BTime);
    idField.values.unshift(item.PkgLogId);
    var contextLog;

    try {
      contextLog = JSON.stringify(Object(_formatSearchLog__WEBPACK_IMPORTED_MODULE_1__["parseLogJsonStr"])(item.Content));
    } catch (e) {
      contextLog = item.Content;
    }

    lineField.values.unshift(contextLog);
  });
  var frameDTO = {
    name: '',
    meta: {
      custom: {
        RequestId: logContext.RequestId
      }
    },
    fields: [timeField, lineField, idField]
  };
  return Object(_grafana_data__WEBPACK_IMPORTED_MODULE_0__["toDataFrame"])(frameDTO);
}

/***/ }),

/***/ "./datasource/log-service/common/format/ConvertSearchResultsToDataFrame.ts":
/*!*********************************************************************************!*\
  !*** ./datasource/log-service/common/format/ConvertSearchResultsToDataFrame.ts ***!
  \*********************************************************************************/
/*! exports provided: ConvertSearchResultsToDataFrame, LogFieldReservedName */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ConvertSearchResultsToDataFrame", function() { return ConvertSearchResultsToDataFrame; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LogFieldReservedName", function() { return LogFieldReservedName; });
/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @grafana/data */ "@grafana/data");
/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_grafana_data__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lodash */ "lodash");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _formatSearchLog__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./formatSearchLog */ "./datasource/log-service/common/format/formatSearchLog.ts");



/** 将SearchResults结果，处理为DataFrame */

function ConvertSearchResultsToDataFrame(searchLogResult, topic) {
  var frameDTO = searchLogResult.Analysis ? ConvertAnalysisJsonToDataFrameDTO(searchLogResult) : ConvertLogJsonToDataFrameDTO(searchLogResult, topic);
  return Object(_grafana_data__WEBPACK_IMPORTED_MODULE_0__["toDataFrame"])(frameDTO);
}

function ConvertAnalysisJsonToDataFrameDTO(searchLogResult) {
  var _a = searchLogResult !== null && searchLogResult !== void 0 ? searchLogResult : {},
      _b = _a.analysisRecords,
      analysisRecords = _b === void 0 ? [] : _b,
      _c = _a.analysisColumns,
      analysisColumns = _c === void 0 ? [] : _c;

  var fields = analysisColumns.map(function (column) {
    var values = analysisRecords.map(function (r) {
      return r === null || r === void 0 ? void 0 : r[column.Name];
    });
    return {
      name: column.Name,
      type: column.fieldType,
      values: values
    };
  });
  return {
    name: '',
    fields: fields
  };
}

var LogFieldReservedName;

(function (LogFieldReservedName) {
  LogFieldReservedName["TIMESTAMP"] = "__TIMESTAMP__";
  LogFieldReservedName["LogJson"] = "__LogJson__";
  LogFieldReservedName["SOURCE"] = "__SOURCE__";
  LogFieldReservedName["Filename"] = "__FILENAME__";
  LogFieldReservedName["HostName"] = "__HOSTNAME__";
  LogFieldReservedName["META"] = "__META__";
})(LogFieldReservedName || (LogFieldReservedName = {}));

function ConvertLogJsonToDataFrameDTO(searchLogResult, topic) {
  var _a = searchLogResult.Results,
      Results = _a === void 0 ? [] : _a; // Log场景的处理方式，参考文档
  // Grafana logSeriesToLogsModel方法（https://github.com/grafana/grafana/blob/faca526c169a9a61f119b6fc2819f5a8dfff7ed7/public/app/core/logs_model.ts#L315）
  // Grafana testData数据源 runLogsStream方法（https://github.com/grafana/grafana/blob/faca526c169a9a61f119b6fc2819f5a8dfff7ed7/public/app/plugins/datasource/testdata/runStreams.ts#L131）

  var timeField = {
    name: LogFieldReservedName.TIMESTAMP,
    type: _grafana_data__WEBPACK_IMPORTED_MODULE_0__["FieldType"].time,
    values: []
  };
  var logField = {
    name: LogFieldReservedName.LogJson,
    // 这里使用字符串类型，标识此内容为 核心日志内容
    type: _grafana_data__WEBPACK_IMPORTED_MODULE_0__["FieldType"].string,
    config: {
      custom: {
        displayMode: 'json-view'
      }
    },
    values: []
  };
  var sourceField = {
    name: LogFieldReservedName.SOURCE,
    type: _grafana_data__WEBPACK_IMPORTED_MODULE_0__["FieldType"].string,
    values: []
  };
  var filenameField = {
    name: LogFieldReservedName.Filename,
    type: _grafana_data__WEBPACK_IMPORTED_MODULE_0__["FieldType"].string,
    values: []
  };
  var hostnameField = {
    name: LogFieldReservedName.HostName,
    type: _grafana_data__WEBPACK_IMPORTED_MODULE_0__["FieldType"].string,
    values: []
  };
  var metaField = {
    // 用于支持 Explore 功能上下文能力
    name: LogFieldReservedName.META,
    type: _grafana_data__WEBPACK_IMPORTED_MODULE_0__["FieldType"].other,
    config: {
      custom: {
        hidden: true
      }
    },
    labels: {
      region: topic.region,
      TopicId: topic.TopicId
    },
    values: []
  };
  Results.forEach(function (logItem) {
    timeField.values.push(logItem['Time']);
    sourceField.values.push(logItem['Source']);
    filenameField.values.push(logItem['FileName']);
    hostnameField.values.push(logItem['HostName']);
    metaField.values.push(JSON.stringify(lodash__WEBPACK_IMPORTED_MODULE_1___default.a.pick(logItem, ['PkgId', 'PkgLogId'])));

    try {
      var logJson = Object(_formatSearchLog__WEBPACK_IMPORTED_MODULE_2__["parseLogJsonStr"])(logItem.LogJson);
      /** 使用 LogsParsers.JSON 进行自动解析
       * 展示问题优化跟踪：https://github.com/grafana/grafana/issues/54959
       */
      // 这里的值可以是 string | object, Grafana内部自动进行序列化处理。

      logField.values.push(JSON.stringify(logJson));
      /** 使用 LogsParsers.logfmt 进行自动解析，缩略展示上更友好，但是LogDetail提取会有问题 */
      // let logStr = '';
      // Object.entries(logJson).forEach(([k, v])=>{
      //   logStr += `${k}=${_.isObject(v) ? JSON.stringify(v) : `${v}` } `
      // });
      // (logField.values as string[]).push(logStr);
    } catch (e) {}
  });
  var frameDTO = {
    name: '',
    meta: {
      preferredVisualisationType: 'logs',
      custom: {
        RequestId: searchLogResult.RequestId,
        SamplingRate: searchLogResult.SamplingRate
      },
      executedQueryString: searchLogResult.Query
    },
    fields: [timeField, logField, sourceField, filenameField, hostnameField, metaField]
  };
  return frameDTO;
}

/***/ }),

/***/ "./datasource/log-service/common/format/formatSearchLog.ts":
/*!*****************************************************************!*\
  !*** ./datasource/log-service/common/format/formatSearchLog.ts ***!
  \*****************************************************************/
/*! exports provided: formatSearchLog, parseLogJsonStr */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "formatSearchLog", function() { return formatSearchLog; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "parseLogJsonStr", function() { return parseLogJsonStr; });
/* harmony import */ var _prestoType__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./prestoType */ "./datasource/log-service/common/format/prestoType.ts");
var __assign = undefined && undefined.__assign || function () {
  __assign = Object.assign || function (t) {
    for (var s, i = 1, n = arguments.length; i < n; i++) {
      s = arguments[i];

      for (var p in s) {
        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
      }
    }

    return t;
  };

  return __assign.apply(this, arguments);
};


function formatSearchLog(param) {
  var Analysis = param.Analysis,
      _a = param.AnalysisRecords,
      AnalysisRecords = _a === void 0 ? [] : _a,
      _b = param.Columns,
      Columns = _b === void 0 ? [] : _b;
  var analysisColumns = [];
  var analysisRecords = [];

  if (Analysis) {
    Columns.forEach(function (column) {
      var analysisColumn = Object(_prestoType__WEBPACK_IMPORTED_MODULE_0__["getFieldTypeByPrestoType"])(column.Type);
      analysisColumns.push(__assign(__assign({}, column), analysisColumn));
    });
    AnalysisRecords.forEach(function (record) {
      try {
        analysisRecords.push(JSON.parse(record));
      } catch (e) {
        analysisRecords.push({});
      }
    });

    var _loop_1 = function _loop_1(column) {
      if (column.processor) {
        analysisRecords.forEach(function (record) {
          // eslint-disable-next-line no-param-reassign
          record[column.Name] = column.processor(record[column.Name]);
        });
      }
    };

    for (var _i = 0, analysisColumns_1 = analysisColumns; _i < analysisColumns_1.length; _i++) {
      var column = analysisColumns_1[_i];

      _loop_1(column);
    }
  }

  return __assign(__assign({}, param), {
    analysisRecords: analysisRecords,
    analysisColumns: analysisColumns
  });
}
/** 解析stringify的日志，并处理 __TAG__字段 */

function parseLogJsonStr(logJsonStr) {
  try {
    var logJson_1 = JSON.parse(logJsonStr);
    var tagContent = logJson_1['__TAG__'];
    delete logJson_1.__TAG__;

    if (tagContent) {
      Object.entries(tagContent).forEach(function (_a) {
        var tagKey = _a[0],
            tagValue = _a[1];
        logJson_1["__TAG__.".concat(tagKey)] = tagValue;
      });
    }

    return logJson_1;
  } catch (e) {
    console.error('parseLogJsonStr', e);
    return {};
  }
}

/***/ }),

/***/ "./datasource/log-service/common/format/index.ts":
/*!*******************************************************!*\
  !*** ./datasource/log-service/common/format/index.ts ***!
  \*******************************************************/
/*! exports provided: formatSearchLog, parseLogJsonStr, ConvertSearchResultsToDataFrame, LogFieldReservedName, ConvertLogContextToDataFrame */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _formatSearchLog__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./formatSearchLog */ "./datasource/log-service/common/format/formatSearchLog.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "formatSearchLog", function() { return _formatSearchLog__WEBPACK_IMPORTED_MODULE_0__["formatSearchLog"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "parseLogJsonStr", function() { return _formatSearchLog__WEBPACK_IMPORTED_MODULE_0__["parseLogJsonStr"]; });

/* harmony import */ var _ConvertSearchResultsToDataFrame__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ConvertSearchResultsToDataFrame */ "./datasource/log-service/common/format/ConvertSearchResultsToDataFrame.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ConvertSearchResultsToDataFrame", function() { return _ConvertSearchResultsToDataFrame__WEBPACK_IMPORTED_MODULE_1__["ConvertSearchResultsToDataFrame"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "LogFieldReservedName", function() { return _ConvertSearchResultsToDataFrame__WEBPACK_IMPORTED_MODULE_1__["LogFieldReservedName"]; });

/* harmony import */ var _ConvertLogContextToDataFrame__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./ConvertLogContextToDataFrame */ "./datasource/log-service/common/format/ConvertLogContextToDataFrame.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ConvertLogContextToDataFrame", function() { return _ConvertLogContextToDataFrame__WEBPACK_IMPORTED_MODULE_2__["ConvertLogContextToDataFrame"]; });





/***/ }),

/***/ "./datasource/log-service/common/format/prepareTimeSeries.ts":
/*!*******************************************************************!*\
  !*** ./datasource/log-service/common/format/prepareTimeSeries.ts ***!
  \*******************************************************************/
/*! exports provided: DataFrameType, timeSeriesFormat, toTimeSeriesMany */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DataFrameType", function() { return DataFrameType; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "timeSeriesFormat", function() { return timeSeriesFormat; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "toTimeSeriesMany", function() { return toTimeSeriesMany; });
/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @grafana/data */ "@grafana/data");
/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_grafana_data__WEBPACK_IMPORTED_MODULE_0__);
var __assign = undefined && undefined.__assign || function () {
  __assign = Object.assign || function (t) {
    for (var s, i = 1, n = arguments.length; i < n; i++) {
      s = arguments[i];

      for (var p in s) {
        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
      }
    }

    return t;
  };

  return __assign.apply(this, arguments);
};
/* eslint-disable eqeqeq,no-eq-null,max-depth,guard-for-in,no-fallthrough */
// @link: https://github.com/grafana/grafana/blob/b4faee786f3c3c1e09543ef768f2e2daee429ec7/public/app/core/components/TransformersUI/prepareTimeSeries/prepareTimeSeries.ts



var DataFrameType;

(function (DataFrameType) {
  DataFrameType["TimeSeriesWide"] = "timeseries-wide";
  DataFrameType["TimeSeriesLong"] = "timeseries-long";
  DataFrameType["TimeSeriesMany"] = "timeseries-many";
})(DataFrameType || (DataFrameType = {}));
/**
 * There is currently an effort to figure out consistent names
 * for the various formats/types we produce and use.
 *
 * This transformer will eventually include the required metadata that can assert
 * a DataFrame[] is of a given type
 *
 * @internal -- TBD
 */


var timeSeriesFormat;

(function (timeSeriesFormat) {
  timeSeriesFormat["TimeSeriesWide"] = "wide";
  timeSeriesFormat["TimeSeriesMany"] = "many";
  timeSeriesFormat["TimeSeriesLong"] = "long";
})(timeSeriesFormat || (timeSeriesFormat = {}));
/**
 * Convert to [][time,number]
 */


function toTimeSeriesMany(data) {
  if (!Array.isArray(data) || data.length === 0) {
    return data;
  }

  var result = [];

  var _loop_1 = function _loop_1(frame) {
    var timeField = frame.fields[0];

    if (!timeField || timeField.type !== _grafana_data__WEBPACK_IMPORTED_MODULE_0__["FieldType"].time) {
      return "continue";
    }

    var valueFields = [];
    var labelFields = [];

    for (var _b = 0, _c = frame.fields; _b < _c.length; _b++) {
      var field = _c[_b];

      switch (field.type) {
        case _grafana_data__WEBPACK_IMPORTED_MODULE_0__["FieldType"].number:
        case _grafana_data__WEBPACK_IMPORTED_MODULE_0__["FieldType"]["boolean"]:
          valueFields.push(field);
          break;

        case _grafana_data__WEBPACK_IMPORTED_MODULE_0__["FieldType"].string:
          labelFields.push(field);
          break;
      }
    }

    var _loop_2 = function _loop_2(field) {
      if (labelFields.length) {
        var builders = new Map();

        var _loop_3 = function _loop_3(i) {
          var time = timeField.values.get(i);
          var value = field.values.get(i);

          if (value === undefined || time == null) {
            return "continue";
          }

          var key = labelFields.map(function (f) {
            return f.values.get(i);
          }).join('/');
          var builder = builders.get(key);

          if (!builder) {
            builder = {
              key: key,
              time: [],
              value: [],
              labels: {}
            };

            for (var _e = 0, labelFields_1 = labelFields; _e < labelFields_1.length; _e++) {
              var label = labelFields_1[_e];
              builder.labels[label.name] = label.values.get(i);
            }

            builders.set(key, builder);
          }

          builder.time.push(time);
          builder.value.push(value);
        };

        for (var i = 0; i < frame.length; i++) {
          _loop_3(i);
        } // Add a frame for each distinct value


        builders.forEach(function (b) {
          result.push({
            name: frame.name,
            refId: frame.refId,
            meta: __assign(__assign({}, frame.meta), {
              type: DataFrameType.TimeSeriesMany
            }),
            fields: [__assign(__assign({}, timeField), {
              values: new _grafana_data__WEBPACK_IMPORTED_MODULE_0__["ArrayVector"](b.time)
            }), __assign(__assign({}, field), {
              values: new _grafana_data__WEBPACK_IMPORTED_MODULE_0__["ArrayVector"](b.value),
              labels: b.labels
            })],
            length: b.time.length
          });
        });
      } else {
        result.push({
          name: frame.name,
          refId: frame.refId,
          meta: __assign(__assign({}, frame.meta), {
            type: DataFrameType.TimeSeriesMany
          }),
          fields: [timeField, field],
          length: frame.length
        });
      }
    };

    for (var _d = 0, valueFields_1 = valueFields; _d < valueFields_1.length; _d++) {
      var field = valueFields_1[_d];

      _loop_2(field);
    }
  };

  for (var _i = 0, _a = toTimeSeriesLong(data); _i < _a.length; _i++) {
    var frame = _a[_i];

    _loop_1(frame);
  }

  return result;
}

function toTimeSeriesLong(data) {
  if (!Array.isArray(data) || data.length === 0) {
    return data;
  }

  var result = [];

  for (var _i = 0, data_1 = data; _i < data_1.length; _i++) {
    var frame = data_1[_i];
    var timeField = void 0;
    var uniqueValueNames = [];
    var uniqueValueNamesToType = {};
    var uniqueLabelKeys = {};
    var labelKeyToWideIndices = {};
    var uniqueFactorNamesToWideIndex = {};

    for (var fieldIndex = 0; fieldIndex < frame.fields.length; fieldIndex++) {
      var field = frame.fields[fieldIndex];

      switch (field.type) {
        case _grafana_data__WEBPACK_IMPORTED_MODULE_0__["FieldType"].string:
        case _grafana_data__WEBPACK_IMPORTED_MODULE_0__["FieldType"]["boolean"]:
          if (field.name in uniqueFactorNamesToWideIndex) {// TODO error?
          } else {
            uniqueFactorNamesToWideIndex[field.name] = fieldIndex;
            uniqueLabelKeys[field.name] = true;
          }

          break;

        case _grafana_data__WEBPACK_IMPORTED_MODULE_0__["FieldType"].time:
          if (!timeField) {
            timeField = field;
            break;
          }

        default:
          {
            if (field.name in uniqueValueNamesToType) {
              var type = uniqueValueNamesToType[field.name];

              if (field.type !== type) {
                // TODO error?
                continue;
              }
            } else {
              uniqueValueNamesToType[field.name] = field.type;
              uniqueValueNames.push(field.name);
            }

            var tKey = JSON.stringify(field.labels);
            var wideIndices = labelKeyToWideIndices[tKey];

            if (wideIndices !== undefined) {
              wideIndices.push(fieldIndex);
            } else {
              labelKeyToWideIndices[tKey] = [fieldIndex];
            }

            if (field.labels != null) {
              for (var labelKey in field.labels) {
                uniqueLabelKeys[labelKey] = true;
              }
            }
          }
      }
    }

    if (!timeField) {
      continue;
    }

    var sortedTimeRowIndices = [];
    var sortedUniqueLabelKeys = [];
    var uniqueFactorNames = [];
    var uniqueFactorNamesWithWideIndices = [];

    for (var wideRowIndex = 0; wideRowIndex < frame.length; wideRowIndex++) {
      sortedTimeRowIndices.push({
        time: timeField.values.get(wideRowIndex),
        wideRowIndex: wideRowIndex
      });
    }

    for (var labelKeys in labelKeyToWideIndices) {
      sortedUniqueLabelKeys.push(labelKeys);
    }

    for (var labelKey in uniqueLabelKeys) {
      uniqueFactorNames.push(labelKey);
    }

    for (var name in uniqueFactorNamesToWideIndex) {
      uniqueFactorNamesWithWideIndices.push(name);
    }

    sortedTimeRowIndices.sort(function (a, b) {
      return a.time - b.time;
    });
    sortedUniqueLabelKeys.sort();
    uniqueFactorNames.sort();
    uniqueValueNames.sort();
    var longFrame = new _grafana_data__WEBPACK_IMPORTED_MODULE_0__["MutableDataFrame"](__assign(__assign({}, frame), {
      meta: __assign(__assign({}, frame.meta), {
        type: DataFrameType.TimeSeriesLong
      }),
      fields: [{
        name: timeField.name,
        type: timeField.type
      }]
    }));

    for (var _a = 0, uniqueValueNames_1 = uniqueValueNames; _a < uniqueValueNames_1.length; _a++) {
      var name = uniqueValueNames_1[_a];
      longFrame.addField({
        name: name,
        type: uniqueValueNamesToType[name]
      });
    }

    for (var _b = 0, uniqueFactorNames_1 = uniqueFactorNames; _b < uniqueFactorNames_1.length; _b++) {
      var name = uniqueFactorNames_1[_b];
      longFrame.addField({
        name: name,
        type: _grafana_data__WEBPACK_IMPORTED_MODULE_0__["FieldType"].string
      });
    }

    for (var _c = 0, sortedTimeRowIndices_1 = sortedTimeRowIndices; _c < sortedTimeRowIndices_1.length; _c++) {
      var timeWideRowIndex = sortedTimeRowIndices_1[_c];
      var time = timeWideRowIndex.time,
          wideRowIndex = timeWideRowIndex.wideRowIndex;

      for (var _d = 0, sortedUniqueLabelKeys_1 = sortedUniqueLabelKeys; _d < sortedUniqueLabelKeys_1.length; _d++) {
        var labelKeys = sortedUniqueLabelKeys_1[_d];
        var rowValues = {};

        for (var _e = 0, uniqueFactorNamesWithWideIndices_1 = uniqueFactorNamesWithWideIndices; _e < uniqueFactorNamesWithWideIndices_1.length; _e++) {
          var name = uniqueFactorNamesWithWideIndices_1[_e];
          rowValues[name] = frame.fields[uniqueFactorNamesToWideIndex[name]].values.get(wideRowIndex);
        }

        var index = 0;

        for (var _f = 0, _g = labelKeyToWideIndices[labelKeys]; _f < _g.length; _f++) {
          var wideFieldIndex = _g[_f];
          var wideField = frame.fields[wideFieldIndex];

          if (index === 0 && wideField.labels != null) {
            for (var labelKey in wideField.labels) {
              rowValues[labelKey] = wideField.labels[labelKey];
            }
          }

          index += 1;
          rowValues[wideField.name] = wideField.values.get(wideRowIndex);
        }

        rowValues[timeField.name] = time;
        longFrame.add(rowValues);
      }
    }

    result.push(longFrame);
  }

  return result;
}

/***/ }),

/***/ "./datasource/log-service/common/format/prestoType.ts":
/*!************************************************************!*\
  !*** ./datasource/log-service/common/format/prestoType.ts ***!
  \************************************************************/
/*! exports provided: getFieldTypeByPrestoType */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getFieldTypeByPrestoType", function() { return getFieldTypeByPrestoType; });
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! moment */ "moment");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @grafana/data */ "@grafana/data");
/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_grafana_data__WEBPACK_IMPORTED_MODULE_1__);


var ProcessorUtils = {
  timestampWithTimeZoneRegex: /(\w+)\[[\w/]+]/g
};
/** Presto类型与FieldType转化表
 * @doc https://iwiki.woa.com/pages/viewpage.action?pageId=905584985 */

var PrestoAndFieldTypeMap = [
/** 时间类型分为两类，包含日期和不包含日期 */
{
  prestoTypeRegex: /^timestamp with time zone$/,
  fieldType: _grafana_data__WEBPACK_IMPORTED_MODULE_1__["FieldType"].time,
  // 包含时区的时间数据，可能带有额外的zone信息，这里进行清理。eg: 2021-11-26T18:41:24+08:00[Asia/Shanghai]
  processor: function processor(value) {
    var newValue = String(value).replace(ProcessorUtils.timestampWithTimeZoneRegex, '$1');

    if (moment__WEBPACK_IMPORTED_MODULE_0___default()(newValue).isValid()) {
      return newValue;
    }

    return value;
  }
}, {
  prestoTypeRegex: /^timestamp$|^date$|^datetime$/,
  fieldType: _grafana_data__WEBPACK_IMPORTED_MODULE_1__["FieldType"].time // processor: moment,

}, {
  prestoTypeRegex: /^time$/,
  fieldType: _grafana_data__WEBPACK_IMPORTED_MODULE_1__["FieldType"].time // processor: null,

},
/** 数字类型。整数、浮点数、定点数 */
{
  prestoTypeRegex: /^tinyint$|^samllint$|^integer$|^bigint$|^long$/,
  fieldType: _grafana_data__WEBPACK_IMPORTED_MODULE_1__["FieldType"].number // processor: Number,

}, {
  prestoTypeRegex: /^real$|^double$|^decimal$/,
  fieldType: _grafana_data__WEBPACK_IMPORTED_MODULE_1__["FieldType"].number // processor: Number,

},
/** 字符串。字符串和单字符 */
{
  prestoTypeRegex: /^varchar$|^char$|^text$|^keyword$/,
  fieldType: _grafana_data__WEBPACK_IMPORTED_MODULE_1__["FieldType"].string // processor: String,

}, {
  prestoTypeRegex: /^boolean$/,
  fieldType: _grafana_data__WEBPACK_IMPORTED_MODULE_1__["FieldType"]["boolean"] // processor: Boolean,

},
/** 未定情况，做简单降级方案 */
{
  prestoTypeRegex: /^uuid$/,
  fieldType: _grafana_data__WEBPACK_IMPORTED_MODULE_1__["FieldType"].string // processor: String,

}, {
  prestoTypeRegex: /^ipaddress$/,
  fieldType: _grafana_data__WEBPACK_IMPORTED_MODULE_1__["FieldType"].string // processor: String,

}, {
  prestoTypeRegex: /^array\(.*\)$/,
  fieldType: _grafana_data__WEBPACK_IMPORTED_MODULE_1__["FieldType"].other // processor: Array.from,

}, {
  prestoTypeRegex: /^json$/,
  fieldType: _grafana_data__WEBPACK_IMPORTED_MODULE_1__["FieldType"].other // processor: JSON.parse,

}, {
  prestoTypeRegex: /^map\(.*\)$/,
  fieldType: _grafana_data__WEBPACK_IMPORTED_MODULE_1__["FieldType"].other // processor: (i) => i,

}, {
  prestoTypeRegex: /^varbinary$/,
  fieldType: _grafana_data__WEBPACK_IMPORTED_MODULE_1__["FieldType"].other // processor: Array.from,

}, {
  prestoTypeRegex: /^interval$/,
  fieldType: _grafana_data__WEBPACK_IMPORTED_MODULE_1__["FieldType"].other // processor: String,

}, {
  prestoTypeRegex: /^row$/,
  fieldType: _grafana_data__WEBPACK_IMPORTED_MODULE_1__["FieldType"].other // processor: String,

}];
function getFieldTypeByPrestoType(prestoType) {
  return PrestoAndFieldTypeMap.find(function (item) {
    return item.prestoTypeRegex.test(prestoType);
  }) || {
    prestoTypeRegex: /.*/,
    fieldType: _grafana_data__WEBPACK_IMPORTED_MODULE_1__["FieldType"].other
  };
}

/***/ }),

/***/ "./datasource/log-service/common/model/api.ts":
/*!****************************************************!*\
  !*** ./datasource/log-service/common/model/api.ts ***!
  \****************************************************/
/*! exports provided: capiRequest, clsCapiRequest, regionCapiRequest, SearchLog, DescribeLogContext, DescribeTopics, DescribeRegions */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "capiRequest", function() { return capiRequest; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "clsCapiRequest", function() { return clsCapiRequest; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "regionCapiRequest", function() { return regionCapiRequest; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SearchLog", function() { return SearchLog; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DescribeLogContext", function() { return DescribeLogContext; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DescribeTopics", function() { return DescribeTopics; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DescribeRegions", function() { return DescribeRegions; });
/* harmony import */ var _common_constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../common/constants */ "./datasource/common/constants.ts");
/* harmony import */ var _grafana_runtime__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @grafana/runtime */ "@grafana/runtime");
/* harmony import */ var _grafana_runtime__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_grafana_runtime__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lodash */ "lodash");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_2__);
var __assign = undefined && undefined.__assign || function () {
  __assign = Object.assign || function (t) {
    for (var s, i = 1, n = arguments.length; i < n; i++) {
      s = arguments[i];

      for (var p in s) {
        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
      }
    }

    return t;
  };

  return __assign.apply(this, arguments);
};

var __awaiter = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {
  function adopt(value) {
    return value instanceof P ? value : new P(function (resolve) {
      resolve(value);
    });
  }

  return new (P || (P = Promise))(function (resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }

    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }

    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }

    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};

var __generator = undefined && undefined.__generator || function (thisArg, body) {
  var _ = {
    label: 0,
    sent: function sent() {
      if (t[0] & 1) throw t[1];
      return t[1];
    },
    trys: [],
    ops: []
  },
      f,
      y,
      t,
      g;
  return g = {
    next: verb(0),
    "throw": verb(1),
    "return": verb(2)
  }, typeof Symbol === "function" && (g[Symbol.iterator] = function () {
    return this;
  }), g;

  function verb(n) {
    return function (v) {
      return step([n, v]);
    };
  }

  function step(op) {
    if (f) throw new TypeError("Generator is already executing.");

    while (_) {
      try {
        if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
        if (y = 0, t) op = [op[0] & 2, t.value];

        switch (op[0]) {
          case 0:
          case 1:
            t = op;
            break;

          case 4:
            _.label++;
            return {
              value: op[1],
              done: false
            };

          case 5:
            _.label++;
            y = op[1];
            op = [0];
            continue;

          case 7:
            op = _.ops.pop();

            _.trys.pop();

            continue;

          default:
            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
              _ = 0;
              continue;
            }

            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
              _.label = op[1];
              break;
            }

            if (op[0] === 6 && _.label < t[1]) {
              _.label = t[1];
              t = op;
              break;
            }

            if (t && _.label < t[2]) {
              _.label = t[2];

              _.ops.push(op);

              break;
            }

            if (t[2]) _.ops.pop();

            _.trys.pop();

            continue;
        }

        op = body.call(thisArg, _);
      } catch (e) {
        op = [6, e];
        y = 0;
      } finally {
        f = t = 0;
      }
    }

    if (op[0] & 5) throw op[1];
    return {
      value: op[0] ? op[1] : void 0,
      done: true
    };
  }
};




/**
 * 云API请求
 */

function capiRequest(_a, opts) {
  var serviceType = _a.serviceType,
      region = _a.region,
      action = _a.action,
      data = _a.data;
  return __awaiter(this, void 0, void 0, function () {
    var instanceSettings, serviceInfo, requestOptions;
    return __generator(this, function (_b) {
      switch (_b.label) {
        case 0:
          instanceSettings = opts.instanceSettings;
          serviceInfo = Object(_common_constants__WEBPACK_IMPORTED_MODULE_0__["GetServiceAPIInfo"])(region, serviceType);
          return [4
          /*yield*/
          , Object(_common_constants__WEBPACK_IMPORTED_MODULE_0__["GetRequestParams"])({
            url: instanceSettings.url + serviceInfo.path,
            data: data
          }, serviceType, {
            region: Object(_grafana_runtime__WEBPACK_IMPORTED_MODULE_1__["getTemplateSrv"])().replace(region),
            action: action
          }, '', // 这个参数内部没有使用？
          instanceSettings.id, Object(_grafana_runtime__WEBPACK_IMPORTED_MODULE_1__["getBackendSrv"])())];

        case 1:
          requestOptions = _b.sent();
          return [2
          /*return*/
          , Object(_grafana_runtime__WEBPACK_IMPORTED_MODULE_1__["getBackendSrv"])().datasourceRequest(requestOptions).then(function (response) {
            var result = lodash__WEBPACK_IMPORTED_MODULE_2___default.a.get(response, 'data.Response', {});

            if (result.Error) {
              // eslint-disable-next-line no-throw-literal,@typescript-eslint/consistent-type-assertions
              throw {
                name: result.Error.Code,
                code: result.Error.Code,
                message: result.Error.Message,
                data: {
                  Response: result
                }
              };
            }

            return result;
          })["catch"](function (error) {
            console.error('error', error);
            throw error;
          })];
      }
    });
  });
}
/**
 * CLS 云api v3 请求
 */

function clsCapiRequest(_a, opts) {
  var action = _a.action,
      region = _a.region,
      _b = _a.data,
      data = _b === void 0 ? {} : _b;
  return __awaiter(this, void 0, void 0, function () {
    return __generator(this, function (_c) {
      return [2
      /*return*/
      , capiRequest({
        serviceType: 'cls',
        region: region,
        action: action,
        data: data
      }, __assign({}, opts))];
    });
  });
}
/**
 * REGION 云api v3 请求
 */

function regionCapiRequest(_a, opts) {
  var action = _a.action,
      region = _a.region,
      _b = _a.data,
      data = _b === void 0 ? {} : _b;
  return __awaiter(this, void 0, void 0, function () {
    return __generator(this, function (_c) {
      return [2
      /*return*/
      , capiRequest({
        serviceType: 'region',
        region: region,
        action: action,
        data: data
      }, __assign({}, opts))];
    });
  });
}
/** 本接口用于搜索日志, 该接口除受默认接口请求频率限制外，针对单个日志主题，并发数不能超过15 */

function SearchLog(data, region, opts) {
  return __awaiter(this, void 0, Promise, function () {
    return __generator(this, function (_a) {
      return [2
      /*return*/
      , clsCapiRequest({
        action: 'SearchLog',
        region: region,
        data: __assign({
          UseNewAnalysis: true
        }, data)
      }, opts)];
    });
  });
}
/** 本接口用于搜索日志上下文附近的内容 */

function DescribeLogContext(data, region, opts) {
  return __awaiter(this, void 0, Promise, function () {
    return __generator(this, function (_a) {
      return [2
      /*return*/
      , clsCapiRequest({
        action: 'DescribeLogContext',
        data: data,
        region: region
      }, opts)];
    });
  });
}
/**  本接口用于获取日志主题列表，支持分页 */

function DescribeTopics(data, region, opts) {
  return __awaiter(this, void 0, Promise, function () {
    return __generator(this, function (_a) {
      return [2
      /*return*/
      , clsCapiRequest({
        action: 'DescribeTopics',
        data: data,
        region: region
      }, opts)];
    });
  });
}
/**
 * @description 请求当前用户支持cls所有地域，已做白名单过滤
 */

function DescribeRegionsAndZonesRequest(product, opts) {
  return __awaiter(this, void 0, Promise, function () {
    return __generator(this, function (_a) {
      return [2
      /*return*/
      , regionCapiRequest({
        action: 'DescribeRegionsAndZones',
        data: {
          Product: product
        },
        region: 'ap-guangzhou'
      }, opts).then(function (data) {
        return data.ResourceRegionSet;
      })];
    });
  });
}

function DescribeRegions(opts) {
  return __awaiter(this, void 0, Promise, function () {
    return __generator(this, function (_a) {
      return [2
      /*return*/
      , DescribeRegionsAndZonesRequest('cls', opts).then(function (clsRegions) {
        return {
          regionList: (clsRegions || []).map(function (_a) {
            var Region = _a.Region,
                RegionId = _a.RegionId,
                RegionName = _a.RegionName,
                RegionShortName = _a.RegionShortName,
                RegionTypeMC = _a.RegionTypeMC,
                RegionType = _a.RegionType,
                Location = _a.Location;
            var regionItem = {
              region: Region,
              regionId: Number(RegionId),
              regionName: RegionName,
              regionShortName: RegionShortName,
              oversea: typeof RegionTypeMC === 'number' ? Boolean(RegionTypeMC) : RegionType === '海外',
              area: Location
            };
            return regionItem;
          })
        };
      })];
    });
  });
}

/***/ }),

/***/ "./datasource/log-service/common/model/index.ts":
/*!******************************************************!*\
  !*** ./datasource/log-service/common/model/index.ts ***!
  \******************************************************/
/*! exports provided: capiRequest, clsCapiRequest, regionCapiRequest, SearchLog, DescribeLogContext, DescribeTopics, DescribeRegions, TYPES, API */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _interface__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./interface */ "./datasource/log-service/common/model/interface.ts");
/* empty/unused harmony star reexport *//* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./types */ "./datasource/log-service/common/model/types.ts");
/* empty/unused harmony star reexport *//* harmony import */ var _api__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./api */ "./datasource/log-service/common/model/api.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "capiRequest", function() { return _api__WEBPACK_IMPORTED_MODULE_2__["capiRequest"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "clsCapiRequest", function() { return _api__WEBPACK_IMPORTED_MODULE_2__["clsCapiRequest"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "regionCapiRequest", function() { return _api__WEBPACK_IMPORTED_MODULE_2__["regionCapiRequest"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SearchLog", function() { return _api__WEBPACK_IMPORTED_MODULE_2__["SearchLog"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DescribeLogContext", function() { return _api__WEBPACK_IMPORTED_MODULE_2__["DescribeLogContext"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DescribeTopics", function() { return _api__WEBPACK_IMPORTED_MODULE_2__["DescribeTopics"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DescribeRegions", function() { return _api__WEBPACK_IMPORTED_MODULE_2__["DescribeRegions"]; });

/* harmony reexport (module object) */ __webpack_require__.d(__webpack_exports__, "TYPES", function() { return _types__WEBPACK_IMPORTED_MODULE_1__; });
/* harmony reexport (module object) */ __webpack_require__.d(__webpack_exports__, "API", function() { return _api__WEBPACK_IMPORTED_MODULE_2__; });







/***/ }),

/***/ "./datasource/log-service/common/model/interface.ts":
/*!**********************************************************!*\
  !*** ./datasource/log-service/common/model/interface.ts ***!
  \**********************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);


/***/ }),

/***/ "./datasource/log-service/common/model/types.ts":
/*!******************************************************!*\
  !*** ./datasource/log-service/common/model/types.ts ***!
  \******************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);


/***/ }),

/***/ "./datasource/log-service/common/utils.ts":
/*!************************************************!*\
  !*** ./datasource/log-service/common/utils.ts ***!
  \************************************************/
/*! exports provided: getStringVariableNameOptions */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getStringVariableNameOptions", function() { return getStringVariableNameOptions; });
/* harmony import */ var _grafana_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @grafana/runtime */ "@grafana/runtime");
/* harmony import */ var _grafana_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_grafana_runtime__WEBPACK_IMPORTED_MODULE_0__);

function getStringVariableNameOptions() {
  var variables = Object(_grafana_runtime__WEBPACK_IMPORTED_MODULE_0__["getTemplateSrv"])().getVariables().filter(function (item) {
    return ['adhoc', 'datasource', 'interval', 'interval'].indexOf(item.type) === -1;
  });
  var notMultiVariables = variables.filter(function (item) {
    var _a;

    return !((_a = item) === null || _a === void 0 ? void 0 : _a.multi);
  });
  return notMultiVariables.map(function (item) {
    var refValue = "${".concat(item.name, "}");
    return {
      value: refValue,
      label: refValue
    };
  });
}

/***/ }),

/***/ "./datasource/log-service/common/utils/query.ts":
/*!******************************************************!*\
  !*** ./datasource/log-service/common/utils/query.ts ***!
  \******************************************************/
/*! exports provided: CQL_SPLIT_PATTERN, isQueryContainSql, getQueryLucene, replaceClsQueryWithTemplateSrv, addQueryResultLimit */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CQL_SPLIT_PATTERN", function() { return CQL_SPLIT_PATTERN; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isQueryContainSql", function() { return isQueryContainSql; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getQueryLucene", function() { return getQueryLucene; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "replaceClsQueryWithTemplateSrv", function() { return replaceClsQueryWithTemplateSrv; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "addQueryResultLimit", function() { return addQueryResultLimit; });
/* harmony import */ var _grafana_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @grafana/runtime */ "@grafana/runtime");
/* harmony import */ var _grafana_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_grafana_runtime__WEBPACK_IMPORTED_MODULE_0__);

/**
 * 检索语法切割正则
 */

var CQL_SPLIT_PATTERN = /(\s*\|\s*)(select\b.*)/i;
/**
 * @param queryString 用户输入的原始检索语句
 * @description 判断用户是要检索原始日志，还是图表分析
 */

function isQueryContainSql(queryString) {
  var pattern = CQL_SPLIT_PATTERN;
  return pattern.test(queryString);
}
/**
 * 解析query，获取前面原始数据部分
 */

function getQueryLucene(queryString) {
  if (queryString === void 0) {
    queryString = '';
  }

  var querySplit = queryString.split(CQL_SPLIT_PATTERN);
  var luceneQuery = '';

  if (querySplit.length === 1) {
    // 未得到有效切分项，说明是纯 lucene 查询
    luceneQuery = queryString;
  } else if (querySplit.length >= 2) {
    luceneQuery = querySplit[0];
  } else {
    // 逻辑死区，不可能出现
    return '';
  }

  return luceneQuery;
}
function replaceClsQueryWithTemplateSrv(queryString, scopedVars) {
  if (scopedVars === void 0) {
    scopedVars = {};
  }

  var luceneQuery = getQueryLucene(queryString !== null && queryString !== void 0 ? queryString : '');
  var sqlQuery = (queryString !== null && queryString !== void 0 ? queryString : '').slice(luceneQuery.length);
  var Query = Object(_grafana_runtime__WEBPACK_IMPORTED_MODULE_0__["getTemplateSrv"])().replace(luceneQuery, scopedVars, 'lucene') + Object(_grafana_runtime__WEBPACK_IMPORTED_MODULE_0__["getTemplateSrv"])().replace(sqlQuery, scopedVars, 'raw');
  return Query;
}
function addQueryResultLimit(queryString, logServiceParams) {
  var luceneQuery = getQueryLucene(queryString !== null && queryString !== void 0 ? queryString : '');
  var sqlQuery = (queryString !== null && queryString !== void 0 ? queryString : '').slice(luceneQuery.length);
  var resultLimit = logServiceParams.MaxResultNum;

  if (!resultLimit || !sqlQuery) {
    //  不包含 sql 或resultLimit取值有误 直接返回
    return queryString;
  }

  if (/limit/.test(sqlQuery)) {
    //  已有 limit 关键字，直接返回
    return queryString;
  } else {
    return queryString + ' limit ' + resultLimit;
  }
}

/***/ }),

/***/ "./datasource/log-service/components/TopicSelector.tsx":
/*!*************************************************************!*\
  !*** ./datasource/log-service/components/TopicSelector.tsx ***!
  \*************************************************************/
/*! exports provided: TopicSelector */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TopicSelector", function() { return TopicSelector; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _common_model__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../common/model */ "./datasource/log-service/common/model/index.ts");
/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @grafana/ui */ "@grafana/ui");
/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_grafana_ui__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _common_constants__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../common/constants */ "./datasource/log-service/common/constants.tsx");
/* harmony import */ var react_use__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react-use */ "../node_modules/react-use/esm/index.js");
/* harmony import */ var _common_utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../common/utils */ "./datasource/log-service/common/utils.ts");
/* harmony import */ var _locale__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../locale */ "./locale/index.ts");
var __awaiter = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {
  function adopt(value) {
    return value instanceof P ? value : new P(function (resolve) {
      resolve(value);
    });
  }

  return new (P || (P = Promise))(function (resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }

    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }

    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }

    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};

var __generator = undefined && undefined.__generator || function (thisArg, body) {
  var _ = {
    label: 0,
    sent: function sent() {
      if (t[0] & 1) throw t[1];
      return t[1];
    },
    trys: [],
    ops: []
  },
      f,
      y,
      t,
      g;
  return g = {
    next: verb(0),
    "throw": verb(1),
    "return": verb(2)
  }, typeof Symbol === "function" && (g[Symbol.iterator] = function () {
    return this;
  }), g;

  function verb(n) {
    return function (v) {
      return step([n, v]);
    };
  }

  function step(op) {
    if (f) throw new TypeError("Generator is already executing.");

    while (_) {
      try {
        if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
        if (y = 0, t) op = [op[0] & 2, t.value];

        switch (op[0]) {
          case 0:
          case 1:
            t = op;
            break;

          case 4:
            _.label++;
            return {
              value: op[1],
              done: false
            };

          case 5:
            _.label++;
            y = op[1];
            op = [0];
            continue;

          case 7:
            op = _.ops.pop();

            _.trys.pop();

            continue;

          default:
            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
              _ = 0;
              continue;
            }

            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
              _.label = op[1];
              break;
            }

            if (op[0] === 6 && _.label < t[1]) {
              _.label = t[1];
              t = op;
              break;
            }

            if (t && _.label < t[2]) {
              _.label = t[2];

              _.ops.push(op);

              break;
            }

            if (t[2]) _.ops.pop();

            _.trys.pop();

            continue;
        }

        op = body.call(thisArg, _);
      } catch (e) {
        op = [6, e];
        y = 0;
      } finally {
        f = t = 0;
      }
    }

    if (op[0] & 5) throw op[1];
    return {
      value: op[0] ? op[1] : void 0,
      done: true
    };
  }
};

var __spreadArray = undefined && undefined.__spreadArray || function (to, from, pack) {
  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {
    if (ar || !(i in from)) {
      if (!ar) ar = Array.prototype.slice.call(from, 0, i);
      ar[i] = from[i];
    }
  }
  return to.concat(ar || Array.prototype.slice.call(from));
};








var TopicSelector = react__WEBPACK_IMPORTED_MODULE_0___default.a.memo(function (props) {
  var _a;

  var value = props.value,
      _b = props.preferLastValue,
      preferLastValue = _b === void 0 ? true : _b,
      datasource = props.datasource;

  var _onChange = Object(react__WEBPACK_IMPORTED_MODULE_0__["useCallback"])(function (v) {
    try {
      localStorage.setItem('LogServiceTopicSelectorDefaultValue', JSON.stringify(v));
    } catch (e) {}

    props.onChange(v);
  }, // eslint-disable-next-line react-hooks/exhaustive-deps
  []);

  Object(react_use__WEBPACK_IMPORTED_MODULE_4__["useEffectOnce"])(function () {
    if (preferLastValue && !value.region && !value.TopicId) {
      try {
        var lastValue = JSON.parse(localStorage.getItem('LogServiceTopicSelectorDefaultValue'));

        if ((lastValue === null || lastValue === void 0 ? void 0 : lastValue.region) && lastValue.TopicId) {
          _onChange(lastValue);
        }
      } catch (e) {}
    }
  });
  var topicSelectOptionsRef = Object(react__WEBPACK_IMPORTED_MODULE_0__["useRef"])([]);

  var _c = Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])([]),
      regionList = _c[0],
      setRegionList = _c[1];

  Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
    fetchRegions();
  }, []);
  var fetchRegions = Object(react__WEBPACK_IMPORTED_MODULE_0__["useCallback"])(function () {
    return __awaiter(void 0, void 0, void 0, function () {
      var regionList_1, e_1;
      return __generator(this, function (_a) {
        switch (_a.label) {
          case 0:
            _a.trys.push([0, 2,, 3]);

            return [4
            /*yield*/
            , Object(_common_model__WEBPACK_IMPORTED_MODULE_1__["DescribeRegions"])({
              instanceSettings: datasource.instanceSettings
            })];

          case 1:
            regionList_1 = _a.sent().regionList;
            setRegionList(regionList_1);
            return [3
            /*break*/
            , 3];

          case 2:
            e_1 = _a.sent();
            return [3
            /*break*/
            , 3];

          case 3:
            return [2
            /*return*/
            ];
        }
      });
    });
  }, []);
  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment, null, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_2__["InlineField"], {
    label: Object(_locale__WEBPACK_IMPORTED_MODULE_6__["t"])('region'),
    labelWidth: 20
  }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_2__["Select"], {
    value: value.region,
    onChange: function onChange(option) {
      var region = option.value;
      Object(_common_model__WEBPACK_IMPORTED_MODULE_1__["DescribeTopics"])({
        Limit: 1
      }, region, {
        instanceSettings: datasource.instanceSettings
      }).then(function (result) {
        var _a, _b, _c;

        topicSelectOptionsRef.current = (_a = result.Topics) === null || _a === void 0 ? void 0 : _a.map(function (item) {
          return {
            value: item.TopicId,
            label: "".concat(item.TopicName, " (").concat(item.TopicId, ")")
          };
        });

        _onChange({
          region: option.value,
          TopicId: ((_c = (_b = result.Topics) === null || _b === void 0 ? void 0 : _b[0]) === null || _c === void 0 ? void 0 : _c.TopicId) || ''
        });
      })["catch"](function (e) {
        _onChange({
          region: option.value,
          TopicId: ''
        });
      });
    },
    menuPlacement: "bottom",
    options: __spreadArray(__spreadArray([], regionList.map(function (item) {
      return {
        label: "".concat(item.area, "(").concat(item.regionName, ")"),
        value: item.region
      };
    }), true), Object(_common_utils__WEBPACK_IMPORTED_MODULE_5__["getStringVariableNameOptions"])(), true),
    width: 25,
    className: "log-service-monospaced-font-family"
  })), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_2__["InlineField"], {
    label: Object(_locale__WEBPACK_IMPORTED_MODULE_6__["t"])('log_topic'),
    labelWidth: 20
  }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_2__["AsyncSelect"], {
    // 地域变更时，自动重新出发请求
    key: value.region,
    width: 50,
    defaultOptions: true,
    cacheOptions: false,
    loadOptions: function loadOptions(filterStr) {
      return __awaiter(void 0, void 0, void 0, function () {
        var filters, options, optionsWithVariables;
        return __generator(this, function (_a) {
          switch (_a.label) {
            case 0:
              filters = [];

              if (filterStr) {
                if (_common_constants__WEBPACK_IMPORTED_MODULE_3__["uuidRegex"].test(filterStr)) {
                  filters.push({
                    Key: 'topicId',
                    Values: [filterStr]
                  });
                } else {
                  filters.push({
                    Key: 'topicName',
                    Values: [filterStr]
                  });
                }
              }

              return [4
              /*yield*/
              , Object(_common_model__WEBPACK_IMPORTED_MODULE_1__["DescribeTopics"])({
                Filters: filters,
                Limit: 100
              }, value.region, {
                instanceSettings: datasource.instanceSettings
              }).then(function (result) {
                return result.Topics.map(function (item) {
                  return {
                    value: item.TopicId,
                    label: "".concat(item.TopicName, " (").concat(item.TopicId, ")")
                  };
                });
              })];

            case 1:
              options = _a.sent();
              optionsWithVariables = __spreadArray(__spreadArray([], options, true), Object(_common_utils__WEBPACK_IMPORTED_MODULE_5__["getStringVariableNameOptions"])().filter(function (item) {
                var _a;

                return (_a = item.value) === null || _a === void 0 ? void 0 : _a.includes(filterStr);
              }), true);
              topicSelectOptionsRef.current = optionsWithVariables;
              return [2
              /*return*/
              , optionsWithVariables];
          }
        });
      });
    },
    value: ((_a = topicSelectOptionsRef === null || topicSelectOptionsRef === void 0 ? void 0 : topicSelectOptionsRef.current) === null || _a === void 0 ? void 0 : _a.find(function (item) {
      return item.value === value.TopicId;
    })) || {
      value: value.TopicId,
      label: value.TopicId
    },
    onChange: function onChange(e) {
      _onChange({
        region: value.region,
        TopicId: e.value
      });
    },
    className: "log-service-monospaced-font-family"
  })));
});
TopicSelector.displayName = 'TopicSelector';

/***/ }),

/***/ "./datasource/log-service/index.less":
/*!*******************************************!*\
  !*** ./datasource/log-service/index.less ***!
  \*******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var api = __webpack_require__(/*! ../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js */ "../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js");
            var content = __webpack_require__(/*! !../../../node_modules/css-loader/dist/cjs.js??ref--10-1!../../../node_modules/postcss-loader/src??ref--10-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-3!./index.less */ "../node_modules/css-loader/dist/cjs.js?!../node_modules/postcss-loader/src/index.js?!../node_modules/less-loader/dist/cjs.js?!./datasource/log-service/index.less");

            content = content.__esModule ? content.default : content;

            if (typeof content === 'string') {
              content = [[module.i, content, '']];
            }

var options = {};

options.insert = "head";
options.singleton = false;

var update = api(content, options);

var exported = content.locals ? content.locals : {};



module.exports = exported;

/***/ }),

/***/ "./datasource/module.ts":
/*!******************************!*\
  !*** ./datasource/module.ts ***!
  \******************************/
/*! exports provided: plugin */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "plugin", function() { return plugin; });
/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @grafana/data */ "@grafana/data");
/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_grafana_data__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _QueryEditor__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./QueryEditor */ "./datasource/QueryEditor.tsx");
/* harmony import */ var _VariableQueryEditor__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./VariableQueryEditor */ "./datasource/VariableQueryEditor.tsx");
/* harmony import */ var _DataSource__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./DataSource */ "./datasource/DataSource.ts");
/* harmony import */ var _config_editor_ConfigEditor__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./config-editor/ConfigEditor */ "./datasource/config-editor/ConfigEditor.tsx");





var plugin = new _grafana_data__WEBPACK_IMPORTED_MODULE_0__["DataSourcePlugin"](_DataSource__WEBPACK_IMPORTED_MODULE_3__["DataSource"]).setQueryEditor(_QueryEditor__WEBPACK_IMPORTED_MODULE_1__["QueryEditor"]).setConfigEditor(_config_editor_ConfigEditor__WEBPACK_IMPORTED_MODULE_4__["ConfigEditor"]).setVariableQueryEditor(_VariableQueryEditor__WEBPACK_IMPORTED_MODULE_2__["VariableQueryEditor"]);

/***/ }),

/***/ "./datasource/plugin.json":
/*!********************************!*\
  !*** ./datasource/plugin.json ***!
  \********************************/
/*! exports provided: type, name, id, backend, alerting, logs, metrics, annotations, executable, queryOptions, routes, info, default */
/***/ (function(module) {

module.exports = JSON.parse("{\"type\":\"datasource\",\"name\":\"Tencent Cloud Monitoring\",\"id\":\"tencentcloud-monitor-datasource\",\"backend\":true,\"alerting\":true,\"logs\":true,\"metrics\":true,\"annotations\":false,\"executable\":\"tencentcloud-monitor-app-backend\",\"queryOptions\":{\"maxDataPoints\":true},\"routes\":[{\"path\":\"cls-internal\",\"url\":\"https://cls.internal.tencentcloudapi.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/json\"}]},{\"path\":\"region-internal\",\"url\":\"https://region.internal.tencentcloudapi.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/json\"}]},{\"path\":\"api-internal\",\"url\":\"https://api.internal.tencentcloudapi.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/json\"}]},{\"path\":\"cmq-internal\",\"url\":\"https://cmq.internal.tencentcloudapi.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/json\"}]},{\"path\":\"fsi/cmq/shanghai-internal\",\"url\":\"https://cmq.ap-shanghai-fsi.internal.tencentcloudapi.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/json\"}]},{\"path\":\"fsi/cmq/shenzhen-internal\",\"url\":\"https://cmq.ap-shenzhen-fsi.internal.tencentcloudapi.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/json\"}]},{\"path\":\"emr-internal\",\"url\":\"https://emr.internal.tencentcloudapi.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/json\"}]},{\"path\":\"fsi/emr/shanghai-internal\",\"url\":\"https://emr.ap-shanghai-fsi.internal.tencentcloudapi.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/json\"}]},{\"path\":\"fsi/emr/shenzhen-internal\",\"url\":\"https://emr.ap-shenzhen-fsi.internal.tencentcloudapi.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/json\"}]},{\"path\":\"scf-internal\",\"url\":\"https://scf.internal.tencentcloudapi.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/json\"}]},{\"path\":\"fsi/scf/shanghai-internal\",\"url\":\"https://scf.ap-shanghai-fsi.internal.tencentcloudapi.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/json\"}]},{\"path\":\"fsi/scf/shenzhen-internal\",\"url\":\"https://scf.ap-shenzhen-fsi.internal.tencentcloudapi.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/json\"}]},{\"path\":\"cfs-internal\",\"url\":\"https://cfs.internal.tencentcloudapi.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/json\"}]},{\"path\":\"fsi/cfs/shanghai-internal\",\"url\":\"https://cfs.ap-shanghai-fsi.internal.tencentcloudapi.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/json\"}]},{\"path\":\"fsi/cfs/shenzhen-internal\",\"url\":\"https://cfs.ap-shenzhen-fsi.internal.tencentcloudapi.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/json\"}]},{\"path\":\"ckafka-internal\",\"url\":\"https://ckafka.internal.tencentcloudapi.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/json\"}]},{\"path\":\"fsi/ckafka/shanghai-internal\",\"url\":\"https://ckafka.ap-shanghai-fsi.internal.tencentcloudapi.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/json\"}]},{\"path\":\"fsi/ckafka/shenzhen-internal\",\"url\":\"https://ckafka.ap-shenzhen-fsi.internal.tencentcloudapi.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/json\"}]},{\"path\":\"clb-internal\",\"url\":\"https://clb.internal.tencentcloudapi.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/json\"}]},{\"path\":\"fsi/clb/shanghai-internal\",\"url\":\"https://clb.ap-shanghai-fsi.internal.tencentcloudapi.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/json\"}]},{\"path\":\"fsi/clb/shenzhen-internal\",\"url\":\"https://clb.ap-shenzhen-fsi.internal.tencentcloudapi.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/json\"}]},{\"path\":\"mongodb-internal\",\"url\":\"https://mongodb.internal.tencentcloudapi.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/json\"}]},{\"path\":\"fsi/mongodb/shanghai-internal\",\"url\":\"https://mongodb.ap-shanghai-fsi.internal.tencentcloudapi.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/json\"}]},{\"path\":\"fsi/mongodb/shenzhen-internal\",\"url\":\"https://mongodb.ap-shenzhen-fsi.internal.tencentcloudapi.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/json\"}]},{\"path\":\"vpc-internal\",\"url\":\"https://vpc.internal.tencentcloudapi.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/json\"}]},{\"path\":\"fsi/vpc/shanghai-internal\",\"url\":\"https://vpc.ap-shanghai-fsi.internal.tencentcloudapi.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/json\"}]},{\"path\":\"fsi/vpc/shenzhen-internal\",\"url\":\"https://vpc.ap-shenzhen-fsi.internal.tencentcloudapi.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/json\"}]},{\"path\":\"pcx-internal\",\"url\":\"https://vpc.api.qcloud.com.internal.tencentcloudapi.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/x-www-form-urlencoded\"}]},{\"path\":\"cvm-internal\",\"url\":\"https://cvm.internal.tencentcloudapi.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/json\"}]},{\"path\":\"fsi/cvm/shanghai-internal\",\"url\":\"https://cvm.ap-shanghai-fsi.internal.tencentcloudapi.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/json\"}]},{\"path\":\"fsi/cvm/shenzhen-internal\",\"url\":\"https://cvm.ap-shenzhen-fsi.internal.tencentcloudapi.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/json\"}]},{\"path\":\"monitor-internal\",\"url\":\"https://monitor.internal.tencentcloudapi.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/json\"}]},{\"path\":\"fsi/monitor/shanghai-internal\",\"url\":\"https://monitor.ap-shanghai-fsi.internal.tencentcloudapi.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/json\"}]},{\"path\":\"fsi/monitor/shenzhen-internal\",\"url\":\"https://monitor.ap-shenzhen-fsi.internal.tencentcloudapi.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/json\"}]},{\"path\":\"cdb-internal\",\"url\":\"https://cdb.internal.tencentcloudapi.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/json\"}]},{\"path\":\"fsi/cdb/shanghai-internal\",\"url\":\"https://cdb.ap-shanghai-fsi.internal.tencentcloudapi.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/json\"}]},{\"path\":\"fsi/cdb/shenzhen-internal\",\"url\":\"https://cdb.ap-shenzhen-fsi.internal.tencentcloudapi.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/json\"}]},{\"path\":\"postgres-internal\",\"url\":\"https://postgres.internal.tencentcloudapi.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/json\"}]},{\"path\":\"fsi/postgres/shanghai-internal\",\"url\":\"https://postgres.ap-shanghai-fsi.internal.tencentcloudapi.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/json\"}]},{\"path\":\"fsi/postgres/shenzhen-internal\",\"url\":\"https://postgres.ap-shenzhen-fsi.internal.tencentcloudapi.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/json\"}]},{\"path\":\"cdn-internal\",\"url\":\"https://cdn.internal.tencentcloudapi.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/json\"}]},{\"path\":\"redis-internal\",\"url\":\"https://redis.internal.tencentcloudapi.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/json\"}]},{\"path\":\"dcdb-internal\",\"url\":\"https://dcdb.internal.tencentcloudapi.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/json\"}]},{\"path\":\"dc-internal\",\"url\":\"https://dc.internal.tencentcloudapi.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/json\"}]},{\"path\":\"cynosdb-internal\",\"url\":\"https://cynosdb.internal.tencentcloudapi.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/json\"}]},{\"path\":\"sqlserver-internal\",\"url\":\"https://sqlserver.internal.tencentcloudapi.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/json\"}]},{\"path\":\"bmeip-internal\",\"url\":\"https://bmeip.internal.tencentcloudapi.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/json\"}]},{\"path\":\"bmvpc-internal\",\"url\":\"https://bmvpc.internal.tencentcloudapi.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/json\"}]},{\"path\":\"bmlb-internal\",\"url\":\"https://bmlb.internal.tencentcloudapi.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/json\"}]},{\"path\":\"bm-internal\",\"url\":\"https://bm.internal.tencentcloudapi.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/json\"}]},{\"path\":\"es-internal\",\"url\":\"https://es.internal.tencentcloudapi.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/json\"}]},{\"path\":\"cbs-internal\",\"url\":\"https://cbs.internal.tencentcloudapi.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/json\"}]},{\"path\":\"tcaplusdb-internal\",\"url\":\"https://tcaplusdb.internal.tencentcloudapi.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/json\"}]},{\"path\":\"apigateway-internal\",\"url\":\"https://apigateway.internal.tencentcloudapi.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/json\"}]},{\"path\":\"tdmq-internal\",\"url\":\"https://tdmq.internal.tencentcloudapi.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/json\"}]},{\"path\":\"gaap-internal\",\"url\":\"https://gaap.internal.tencentcloudapi.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/json\"}]},{\"path\":\"ecm-internal\",\"url\":\"https://ecm.internal.tencentcloudapi.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/json\"}]},{\"path\":\"gse-internal\",\"url\":\"https://gse.internal.tencentcloudapi.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/json\"}]},{\"path\":\"lighthouse-internal\",\"url\":\"https://lighthouse.internal.tencentcloudapi.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/json\"}]},{\"path\":\"tsf-internal\",\"url\":\"https://tsf.internal.tencentcloudapi.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/json\"}]},{\"path\":\"rum-internal\",\"url\":\"https://rum.internal.tencentcloudapi.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/json\"}]},{\"path\":\"tke-internal\",\"url\":\"https://tke.internal.tencentcloudapi.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/json\"}]},{\"path\":\"ecdn-internal\",\"url\":\"https://ecdn.internal.tencentcloudapi.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/json\"}]},{\"path\":\"waf-internal\",\"url\":\"https://waf.internal.tencentcloudapi.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/json\"}]},{\"path\":\"apigateway\",\"url\":\"https://apigateway.tencentcloudapi.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/json\"}]},{\"path\":\"api\",\"url\":\"https://api.tencentcloudapi.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/json\"}]},{\"path\":\"cmq\",\"url\":\"https://cmq.tencentcloudapi.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/json\"}]},{\"path\":\"fsi/cmq/shanghai\",\"url\":\"https://cmq.ap-shanghai-fsi.tencentcloudapi.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/json\"}]},{\"path\":\"fsi/cmq/shenzhen\",\"url\":\"https://cmq.ap-shenzhen-fsi.tencentcloudapi.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/json\"}]},{\"path\":\"emr\",\"url\":\"https://emr.tencentcloudapi.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/json\"}]},{\"path\":\"fsi/emr/shanghai\",\"url\":\"https://emr.ap-shanghai-fsi.tencentcloudapi.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/json\"}]},{\"path\":\"fsi/emr/shenzhen\",\"url\":\"https://emr.ap-shenzhen-fsi.tencentcloudapi.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/json\"}]},{\"path\":\"scf\",\"url\":\"https://scf.tencentcloudapi.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/json\"}]},{\"path\":\"fsi/scf/shanghai\",\"url\":\"https://scf.ap-shanghai-fsi.tencentcloudapi.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/json\"}]},{\"path\":\"fsi/scf/shenzhen\",\"url\":\"https://scf.ap-shenzhen-fsi.tencentcloudapi.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/json\"}]},{\"path\":\"cfs\",\"url\":\"https://cfs.tencentcloudapi.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/json\"}]},{\"path\":\"fsi/cfs/shanghai\",\"url\":\"https://cfs.ap-shanghai-fsi.tencentcloudapi.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/json\"}]},{\"path\":\"fsi/cfs/shenzhen\",\"url\":\"https://cfs.ap-shenzhen-fsi.tencentcloudapi.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/json\"}]},{\"path\":\"ckafka\",\"url\":\"https://ckafka.tencentcloudapi.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/json\"}]},{\"path\":\"fsi/ckafka/shanghai\",\"url\":\"https://ckafka.ap-shanghai-fsi.tencentcloudapi.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/json\"}]},{\"path\":\"fsi/ckafka/shenzhen\",\"url\":\"https://ckafka.ap-shenzhen-fsi.tencentcloudapi.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/json\"}]},{\"path\":\"clb\",\"url\":\"https://clb.tencentcloudapi.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/json\"}]},{\"path\":\"fsi/clb/shanghai\",\"url\":\"https://clb.ap-shanghai-fsi.tencentcloudapi.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/json\"}]},{\"path\":\"fsi/clb/shenzhen\",\"url\":\"https://clb.ap-shenzhen-fsi.tencentcloudapi.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/json\"}]},{\"path\":\"mongodb\",\"url\":\"https://mongodb.tencentcloudapi.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/json\"}]},{\"path\":\"fsi/mongodb/shanghai\",\"url\":\"https://mongodb.ap-shanghai-fsi.tencentcloudapi.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/json\"}]},{\"path\":\"fsi/mongodb/shenzhen\",\"url\":\"https://mongodb.ap-shenzhen-fsi.tencentcloudapi.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/json\"}]},{\"path\":\"vpc\",\"url\":\"https://vpc.tencentcloudapi.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/json\"}]},{\"path\":\"fsi/vpc/shanghai\",\"url\":\"https://vpc.ap-shanghai-fsi.tencentcloudapi.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/json\"}]},{\"path\":\"fsi/vpc/shenzhen\",\"url\":\"https://vpc.ap-shenzhen-fsi.tencentcloudapi.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/json\"}]},{\"path\":\"pcx\",\"url\":\"https://vpc.api.qcloud.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/x-www-form-urlencoded\"}]},{\"path\":\"cvm\",\"url\":\"https://cvm.tencentcloudapi.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/json\"}]},{\"path\":\"fsi/cvm/shanghai\",\"url\":\"https://cvm.ap-shanghai-fsi.tencentcloudapi.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/json\"}]},{\"path\":\"fsi/cvm/shenzhen\",\"url\":\"https://cvm.ap-shenzhen-fsi.tencentcloudapi.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/json\"}]},{\"path\":\"monitor\",\"url\":\"https://monitor.tencentcloudapi.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/json\"}]},{\"path\":\"fsi/monitor/shanghai\",\"url\":\"https://monitor.ap-shanghai-fsi.tencentcloudapi.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/json\"}]},{\"path\":\"fsi/monitor/shenzhen\",\"url\":\"https://monitor.ap-shenzhen-fsi.tencentcloudapi.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/json\"}]},{\"path\":\"cdb\",\"url\":\"https://cdb.tencentcloudapi.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/json\"}]},{\"path\":\"fsi/cdb/shanghai\",\"url\":\"https://cdb.ap-shanghai-fsi.tencentcloudapi.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/json\"}]},{\"path\":\"fsi/cdb/shenzhen\",\"url\":\"https://cdb.ap-shenzhen-fsi.tencentcloudapi.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/json\"}]},{\"path\":\"postgres\",\"url\":\"https://postgres.tencentcloudapi.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/json\"}]},{\"path\":\"fsi/postgres/shanghai\",\"url\":\"https://postgres.ap-shanghai-fsi.tencentcloudapi.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/json\"}]},{\"path\":\"fsi/postgres/shenzhen\",\"url\":\"https://postgres.ap-shenzhen-fsi.tencentcloudapi.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/json\"}]},{\"path\":\"cdn\",\"url\":\"https://cdn.tencentcloudapi.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/json\"}]},{\"path\":\"redis\",\"url\":\"https://redis.tencentcloudapi.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/json\"}]},{\"path\":\"dcdb\",\"url\":\"https://dcdb.tencentcloudapi.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/json\"}]},{\"path\":\"dc\",\"url\":\"https://dc.tencentcloudapi.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/json\"}]},{\"path\":\"cynosdb\",\"url\":\"https://cynosdb.tencentcloudapi.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/json\"}]},{\"path\":\"sqlserver\",\"url\":\"https://sqlserver.tencentcloudapi.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/json\"}]},{\"path\":\"bmeip\",\"url\":\"https://bmeip.tencentcloudapi.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/json\"}]},{\"path\":\"bmvpc\",\"url\":\"https://bmvpc.tencentcloudapi.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/json\"}]},{\"path\":\"bmlb\",\"url\":\"https://bmlb.tencentcloudapi.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/json\"}]},{\"path\":\"bm\",\"url\":\"https://bm.tencentcloudapi.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/json\"}]},{\"path\":\"es\",\"url\":\"https://es.tencentcloudapi.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/json\"}]},{\"path\":\"cbs\",\"url\":\"https://cbs.tencentcloudapi.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/json\"}]},{\"path\":\"tcaplusdb\",\"url\":\"https://tcaplusdb.tencentcloudapi.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/json\"}]},{\"path\":\"tdmq\",\"url\":\"https://tdmq.tencentcloudapi.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/json\"}]},{\"path\":\"gaap\",\"url\":\"https://gaap.tencentcloudapi.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/json\"}]},{\"path\":\"ecm\",\"url\":\"https://ecm.tencentcloudapi.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/json\"}]},{\"path\":\"gse\",\"url\":\"https://gse.tencentcloudapi.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/json\"}]},{\"path\":\"cls\",\"url\":\"https://cls.tencentcloudapi.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/json\"}]},{\"path\":\"fsi/cls/shanghai\",\"url\":\"https://cls.ap-shanghai-fsi.tencentcloudapi.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/json\"}]},{\"path\":\"fsi/cls/shenzhen\",\"url\":\"https://cls.ap-shenzhen-fsi.tencentcloudapi.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/json\"}]},{\"path\":\"region\",\"url\":\"https://region.tencentcloudapi.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/json\"}]},{\"path\":\"lighthouse\",\"url\":\"https://lighthouse.tencentcloudapi.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/json\"}]},{\"path\":\"tsf\",\"url\":\"https://tsf.tencentcloudapi.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/json\"}]},{\"path\":\"rum\",\"url\":\"https://rum.tencentcloudapi.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/json\"}]},{\"path\":\"apm\",\"url\":\"https://apm.tencentcloudapi.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/json\"}]},{\"path\":\"tke\",\"url\":\"https://tke.tencentcloudapi.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/json\"}]},{\"path\":\"ecdn\",\"url\":\"https://ecdn.tencentcloudapi.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/json\"}]},{\"path\":\"waf\",\"url\":\"https://waf.tencentcloudapi.com\",\"headers\":[{\"name\":\"Content-Type\",\"content\":\"application/json\"}]}],\"info\":{\"author\":{\"name\":\"Tencent Cloud\"},\"logos\":{\"small\":\"img/tencent-cloud.svg\",\"large\":\"img/tencent-cloud.svg\"},\"description\":\"Data source for Tencent Cloud monitoring service\"}}");

/***/ }),

/***/ "./datasource/query-ctrl/QueryCtrlRender.tsx":
/*!***************************************************!*\
  !*** ./datasource/query-ctrl/QueryCtrlRender.tsx ***!
  \***************************************************/
/*! exports provided: QueryCtrlRender */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "QueryCtrlRender", function() { return QueryCtrlRender; });
/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @grafana/data */ "@grafana/data");
/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_grafana_data__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _grafana_runtime__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @grafana/runtime */ "@grafana/runtime");
/* harmony import */ var _grafana_runtime__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_grafana_runtime__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var eventemitter3__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! eventemitter3 */ "../node_modules/eventemitter3/index.js");
/* harmony import */ var eventemitter3__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(eventemitter3__WEBPACK_IMPORTED_MODULE_3__);
var __extends = undefined && undefined.__extends || function () {
  var _extendStatics = function extendStatics(d, b) {
    _extendStatics = Object.setPrototypeOf || {
      __proto__: []
    } instanceof Array && function (d, b) {
      d.__proto__ = b;
    } || function (d, b) {
      for (var p in b) {
        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];
      }
    };

    return _extendStatics(d, b);
  };

  return function (d, b) {
    if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");

    _extendStatics(d, b);

    function __() {
      this.constructor = d;
    }

    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();






var QueryCtrlRender =
/** @class */
function (_super) {
  __extends(QueryCtrlRender, _super);

  function QueryCtrlRender() {
    var _this = _super !== null && _super.apply(this, arguments) || this;

    _this.angularScope = null;
    _this.angularQueryEditor = null; // 直接使用EventEmitter，模拟下angular组件提供的events

    _this.events = new eventemitter3__WEBPACK_IMPORTED_MODULE_3___default.a();

    _this.renderAngularQueryEditor = function () {
      if (!_this.element) {
        return;
      }

      if (_this.angularQueryEditor) {
        _this.angularQueryEditor.destroy();

        _this.angularQueryEditor = null;
      }

      var loader = Object(_grafana_runtime__WEBPACK_IMPORTED_MODULE_2__["getAngularLoader"])();
      var template = '<plugin-component type="query-ctrl" />';
      var scopeProps = {
        ctrl: _this.getAngularQueryComponentScope()
      };
      _this.angularQueryEditor = loader.load(_this.element, scopeProps, template);
      _this.angularScope = scopeProps.ctrl;
    };

    return _this;
  }

  QueryCtrlRender.prototype.componentDidMount = function () {
    var _this = this;

    if (true) {
      window.ctrlRender = this;
    }

    setTimeout(function () {
      _this.forceUpdate();
    });
  };

  QueryCtrlRender.prototype.componentDidUpdate = function (prevProps) {
    var _a = this.props,
        data = _a.data,
        range = _a.range;

    if (data !== prevProps.data && data) {
      if (data.state === _grafana_data__WEBPACK_IMPORTED_MODULE_0__["LoadingState"].Done) {
        var legacy = data.series.map(function (v) {
          return Object(_grafana_data__WEBPACK_IMPORTED_MODULE_0__["toLegacyResponseData"])(v);
        });
        this.events.emit('data-received', legacy);
      } else if (data.state === _grafana_data__WEBPACK_IMPORTED_MODULE_0__["LoadingState"].Error) {
        this.events.emit('data-error', data.error);
      }

      if (this.angularScope) {
        this.angularScope.range = range;
      }
    }

    if (!this.element || this.angularQueryEditor) {
      return;
    }

    this.renderAngularQueryEditor();
  };

  QueryCtrlRender.prototype.getAngularQueryComponentScope = function () {
    var _this = this;

    var _a = this.props,
        query = _a.query,
        queries = _a.queries,
        timeRange = _a.range,
        datasource = _a.datasource,
        queryCtrl = _a.queryCtrl;
    datasource.components = {
      QueryCtrl: queryCtrl
    };
    var panel = {
      scopedVars: {},
      targets: queries || []
    }; // new PanelModel({ targets: queries });

    var dashboard = {};
    return {
      datasource: datasource,
      target: query,
      panel: panel,
      dashboard: dashboard,
      refresh: function refresh() {
        _this.props.onChange(query);

        _this.props.onRunQuery();
      },
      render: function render() {
        return function () {
          return console.log('legacy render function called, it does nothing');
        };
      },
      events: this.events,
      range: timeRange
    };
  };

  QueryCtrlRender.prototype.render = function () {
    var _this = this;

    return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", {
      ref: function ref(element) {
        _this.element = element;
      }
    });
  };

  return QueryCtrlRender;
}(react__WEBPACK_IMPORTED_MODULE_1__["PureComponent"]);



/***/ }),

/***/ "./datasource/query-ctrl/components/cascader.ts":
/*!******************************************************!*\
  !*** ./datasource/query-ctrl/components/cascader.ts ***!
  \******************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @grafana/ui */ "@grafana/ui");
/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_grafana_ui__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _common_react_loader__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../common/react-loader */ "./datasource/common/react-loader.ts");


Object(_common_react_loader__WEBPACK_IMPORTED_MODULE_1__["loadReactComponent"])(_grafana_ui__WEBPACK_IMPORTED_MODULE_0__["Cascader"], 'gfCascader', {
  separator: '@?',
  placeholder: '@?',
  options: '<',
  changeOnSelect: '<?',
  onSelect: '&',
  width: '@?',
  initialValue: '@?',
  allowCustomValue: '<?',
  formatCreateLabel: '&?',
  displayAllSelectedLevels: '<?'
});

/***/ }),

/***/ "./datasource/query-ctrl/components/custom_select_dropdown.ts":
/*!********************************************************************!*\
  !*** ./datasource/query-ctrl/components/custom_select_dropdown.ts ***!
  \********************************************************************/
/*! exports provided: CustomSelectDropdownCtrl, customSelectDropdown */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CustomSelectDropdownCtrl", function() { return CustomSelectDropdownCtrl; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "customSelectDropdown", function() { return customSelectDropdown; });
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "angular");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lodash */ "lodash");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! grafana/app/core/core_module */ "grafana/app/core/core_module");
/* harmony import */ var grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_2__);
customSelectDropdown.$inject = ["$compile", "$window", "$timeout", "$rootScope"];




var CustomSelectDropdownCtrl =
/** @class */
function () {
  /** @ngInject */
  function CustomSelectDropdownCtrl() {}

  CustomSelectDropdownCtrl.prototype.show = function () {
    var _this = this;

    this.oldVariableText = lodash__WEBPACK_IMPORTED_MODULE_1___default.a.get(this.value, 'text', '');
    this.highlightIndex = -1;
    this.selectOptions = lodash__WEBPACK_IMPORTED_MODULE_1___default.a.cloneDeep(this.options);

    lodash__WEBPACK_IMPORTED_MODULE_1___default.a.map(this.selectOptions, function (option) {
      var selectedValue = lodash__WEBPACK_IMPORTED_MODULE_1___default.a.get(_this.value, 'value');

      if (!selectedValue) {
        option.selected = false;
      } else if (lodash__WEBPACK_IMPORTED_MODULE_1___default.a.isArray(selectedValue)) {
        option.selected = lodash__WEBPACK_IMPORTED_MODULE_1___default.a.indexOf(selectedValue, option.value) !== -1 ? true : false;
      } else {
        option.selected = selectedValue === option.value;
      }
    });

    this.selectedValues = lodash__WEBPACK_IMPORTED_MODULE_1___default.a.filter(this.selectOptions, {
      selected: true
    });
    this.search = {
      query: '',
      options: this.selectOptions.slice(0, Math.min(this.selectOptions.length, 1000))
    };
    this.dropdownVisible = true;
  };

  CustomSelectDropdownCtrl.prototype.updateLinkText = function () {
    this.linkText = lodash__WEBPACK_IMPORTED_MODULE_1___default.a.get(this.value, 'text', '');
  };

  CustomSelectDropdownCtrl.prototype.clearSelections = function () {
    lodash__WEBPACK_IMPORTED_MODULE_1___default.a.each(this.selectOptions, function (option) {
      option.selected = false;
    });

    this.selectionsChanged(false);
  };

  CustomSelectDropdownCtrl.prototype.keyDown = function (evt) {
    if (evt.keyCode === 27) {
      this.hide();
    }

    if (evt.keyCode === 40) {
      this.moveHighlight(1);
    }

    if (evt.keyCode === 38) {
      this.moveHighlight(-1);
    }

    if (evt.keyCode === 13) {
      if (this.search.options.length === 0) {
        this.commitChanges();
      } else {
        this.selectValue(this.search.options[this.highlightIndex], {}, true, false);
      }
    }

    if (evt.keyCode === 32) {
      this.selectValue(this.search.options[this.highlightIndex], {}, false, false);
    }
  };

  CustomSelectDropdownCtrl.prototype.moveHighlight = function (direction) {
    this.highlightIndex = (this.highlightIndex + direction) % this.search.options.length;
  };

  CustomSelectDropdownCtrl.prototype.selectValue = function (option, event, commitChange, excludeOthers) {
    var _this = this;

    if (!option) {
      return;
    }

    option.selected = this.multiple ? !option.selected : true;
    commitChange = commitChange || false;
    excludeOthers = excludeOthers || false;

    var setAllExceptCurrentTo = function setAllExceptCurrentTo(newValue) {
      lodash__WEBPACK_IMPORTED_MODULE_1___default.a.each(_this.selectOptions, function (other) {
        if (option !== other) {
          other.selected = newValue;
        }
      });
    }; // commit action (enter key), should not deselect it


    if (commitChange) {
      option.selected = true;
    }

    if (excludeOthers) {
      setAllExceptCurrentTo(false);
      commitChange = true;
    } else if (!this.multiple) {
      setAllExceptCurrentTo(false);
      commitChange = true;
    } else if (event.ctrlKey || event.metaKey || event.shiftKey) {
      commitChange = true;
      setAllExceptCurrentTo(false);
    }

    this.selectionsChanged(commitChange);
  };

  CustomSelectDropdownCtrl.prototype.selectionsChanged = function (commitChange) {
    this.selectedValues = lodash__WEBPACK_IMPORTED_MODULE_1___default.a.filter(this.selectOptions, {
      selected: true
    });
    this.value.value = lodash__WEBPACK_IMPORTED_MODULE_1___default.a.map(this.selectedValues, 'value');
    this.value.text = lodash__WEBPACK_IMPORTED_MODULE_1___default.a.map(this.selectedValues, 'text').join(' + ');

    if (!this.multiple) {
      this.value.value = lodash__WEBPACK_IMPORTED_MODULE_1___default.a.get(this.selectedValues, '0.value', '');
    }

    if (commitChange) {
      this.commitChanges();
    }
  };

  CustomSelectDropdownCtrl.prototype.commitChanges = function () {
    this.dropdownVisible = false;
    this.updateLinkText();

    if (this.value.text !== this.oldVariableText) {
      this.onChange({
        value: this.value
      });
    }
  };

  CustomSelectDropdownCtrl.prototype.queryChanged = function () {
    var _this = this;

    this.highlightIndex = -1;
    this.search.options = lodash__WEBPACK_IMPORTED_MODULE_1___default.a.filter(this.selectOptions, function (option) {
      return option.text.toLowerCase().indexOf(_this.search.query.toLowerCase()) !== -1;
    });
    this.search.options = this.search.options.slice(0, Math.min(this.search.options.length, 1000));
  };

  CustomSelectDropdownCtrl.prototype.init = function () {
    if (lodash__WEBPACK_IMPORTED_MODULE_1___default.a.isEmpty(this.value)) {
      this.value = {
        text: '',
        value: this.multiple ? [] : ''
      };
    }

    this.updateLinkText();
  };

  return CustomSelectDropdownCtrl;
}();


var template = "\n<div class=\"variable-link-wrapper\">\n  <a ng-click=\"vm.show()\" class=\"variable-value-link min-width-10\">\n    {{vm.linkText}}\n    <i class=\"fa fa-caret-down\" style=\"font-size:12px;float:right;position:relative;top:4px\"></i>\n  </a>\n\n  <input\n    type=\"text\"\n    class=\"gf-form-input\"\n    style=\"display: none\"\n    ng-keydown=\"vm.keyDown($event)\"\n    ng-model=\"vm.search.query\"\n    ng-change=\"vm.queryChanged()\"\n  ></input>\n\n  <div class=\"variable-value-dropdown\" ng-if=\"vm.dropdownVisible\" ng-class=\"{'multi': vm.multiple, 'single': !vm.multiple}\">\n    <div class=\"variable-options-wrapper\">\n      <div class=\"variable-options-column\">\n        <a class=\"variable-options-column-header\" ng-if=\"!!vm.multiple\" ng-class=\"{'many-selected': vm.selectedValues.length > 1}\"\n          bs-tooltip=\"'Clear selections'\" data-placement=\"top\" ng-click=\"vm.clearSelections()\">\n          <span class=\"variable-option-icon\"></span>\n          Selected ({{vm.selectedValues.length}})\n        </a>\n        <a class=\"variable-option pointer\" ng-repeat=\"option in vm.search.options\" ng-class=\"{'selected': option.selected, 'highlighted': $index === vm.highlightIndex}\"\n          ng-click=\"vm.selectValue(option, $event)\">\n          <span class=\"variable-option-icon\"></span>\n          <span>{{option.text}}</span>\n        </a>\n      </div>\n    </div>\n  </div>\n</div>\n";
/** @ngInject */

function customSelectDropdown($compile, $window, $timeout, $rootScope) {
  return {
    restrict: 'E',
    scope: {
      options: '=',
      multiple: '=',
      value: '=',
      onChange: '&'
    },
    template: template,
    controller: 'CustomSelectDropdownCtrl',
    controllerAs: 'vm',
    bindToController: true,
    link: function link(scope, elem) {
      var bodyEl = angular__WEBPACK_IMPORTED_MODULE_0___default.a.element($window.document.body);
      var linkEl = elem.find('.variable-value-link');
      var inputEl = elem.find('input');

      function bodyOnClick(e) {
        if (elem.has(e.target).length === 0) {
          scope.$apply(function () {
            scope.vm.commitChanges();
          });
        }
      }

      function openDropdown() {
        inputEl.css('width', Math.max(linkEl.width(), 136) + 'px');
        inputEl.show();
        linkEl.hide();
        inputEl.focus();
        $timeout(function () {
          bodyEl.on('click', bodyOnClick);
        }, 0, false);
      }

      function switchToLink() {
        inputEl.hide();
        linkEl.show();
        bodyEl.off('click', bodyOnClick);
      }

      scope.$watch('vm.dropdownVisible', function (newValue) {
        if (newValue) {
          openDropdown();
        } else {
          switchToLink();
        }
      });
      scope.vm.init();
    }
  };
}
grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_2___default.a.controller('CustomSelectDropdownCtrl', CustomSelectDropdownCtrl);
grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_2___default.a.directive('customSelectDropdown', customSelectDropdown);

/***/ }),

/***/ "./datasource/query-ctrl/components/multi_condition.ts":
/*!*************************************************************!*\
  !*** ./datasource/query-ctrl/components/multi_condition.ts ***!
  \*************************************************************/
/*! exports provided: MultiConditionCtrl, multiCondition */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MultiConditionCtrl", function() { return MultiConditionCtrl; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "multiCondition", function() { return multiCondition; });
/* harmony import */ var grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! grafana/app/core/core_module */ "grafana/app/core/core_module");
/* harmony import */ var grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lodash */ "lodash");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! angular */ "angular");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_2__);


 // mutilple conditions directive for instance query params

var MultiConditionCtrl =
/** @class */
function () {
  MultiConditionCtrl.$inject = ["$scope", "$rootScope"];

  /** @ngInject */
  function MultiConditionCtrl($scope, $rootScope) {
    $scope.init = function () {
      $scope.type = $scope.type || 'input';
      $scope.placeholder = Object(angular__WEBPACK_IMPORTED_MODULE_2__["isDefined"])($scope.placeholder) ? $scope.placeholder : '';
      $scope.value = Object(angular__WEBPACK_IMPORTED_MODULE_2__["isDefined"])($scope.value) ? $scope.value : [];
      $scope.maxCond = lodash__WEBPACK_IMPORTED_MODULE_1___default.a.toInteger($scope.maxCond) > 0 ? lodash__WEBPACK_IMPORTED_MODULE_1___default.a.toInteger($scope.maxCond) : -1;
    };

    $scope.onInputBlur = function () {
      $scope.onChangeInternal();
    };

    $scope.deleteCondition = function (index) {
      $scope.value.splice(index, 1);
      $scope.onChangeInternal();
    };

    $scope.addCondition = function (cond) {
      $scope.value.push(cond);
      $scope.onChangeInternal();
    };

    $scope.onChangeInternal = function () {
      $scope.onChange({
        value: $scope.value
      });
    };

    $scope.onSelectChange = function (value) {
      $scope.onChange({
        value: value
      });
    };

    $scope.getSelectedOptions = function () {
      var selectedOptions = lodash__WEBPACK_IMPORTED_MODULE_1___default.a.filter($scope.options, function (item) {
        return lodash__WEBPACK_IMPORTED_MODULE_1___default.a.get($scope.value, 'value', []).indexOf(item.value) !== -1;
      });

      return selectedOptions.length > 0 ? lodash__WEBPACK_IMPORTED_MODULE_1___default.a.map(selectedOptions, function (option) {
        return "".concat(option.text, ": ").concat(option.value);
      }).join('; ') : undefined;
    };

    $scope.init();
  }

  return MultiConditionCtrl;
}();


var template = "\n<div ng-if=\"type === 'input'\">\n  <div ng-repeat=\"v in value track by $index\" class=\"gf-form tc-condition-block\">\n    <input class=\"gf-form-input width-10 tc-condition-input\" type=\"text\" ng-model=\"value[$index]\" placeholder=\"{{placeholder}}\"\n      ng-blur=\"onInputBlur()\"></input>\n    <label class=\"gf-form-label pointer tc-condition-minus\">\n      <a class=\"pointer\" ng-click=\"deleteCondition($index)\">\n        <i class=\"fa fa-minus\"></i>\n      </a>\n    </label>\n  </div>\n  <div class=\"gf-form tc-condition-add\">\n    <label class=\"gf-form-label query-part\" ng-if=\"maxCond === -1 || value.length < maxCond\">\n      <a class=\"pointer\" ng-click=\"addCondition('')\">\n        <i class=\"fa fa-plus\"></i>\n      </a>\n    </label>\n  </div>\n</div>\n\n<div ng-if=\"type === 'inputNumber'\">\n  <div ng-repeat=\"v in value track by $index\" class=\"gf-form tc-condition-block\">\n    <input type=\"number\" ng-model=\"value[$index]\" ng-blur=\"onInputBlur()\" class=\"gf-form-input width-10 tc-condition-input\"\n      ng-min=\"minNum\" ng-max=\"maxNum\" ng-change=\"onChangeInternal()\">\n    <label class=\"gf-form-label pointer tc-condition-minus\">\n      <a class=\"pointer\" ng-click=\"deleteCondition($index)\">\n        <i class=\"fa fa-minus\"></i>\n      </a>\n    </label>\n  </div>\n  <div class=\"gf-form tc-condition-add\">\n    <label class=\"gf-form-label query-part\" ng-if=\"maxCond === -1 || value.length < maxCond\">\n      <a class=\"pointer\" ng-click=\"addCondition(undefined)\">\n        <i class=\"fa fa-plus\"></i>\n      </a>\n    </label>\n  </div>\n</div>\n\n<div class=\"gf-form\" ng-if=\"type === 'select'\">\n  <custom-select-dropdown value=\"value\" multiple=\"true\" options=\"options\" on-change=\"onSelectChange(value)\"></custom-select-dropdown>\n  <label class=\"gf-form-label tc-info-label\" ng-if=\"getSelectedOptions()\">\n    {{getSelectedOptions()}}\n  </label>\n</div>\n\n<div ng-if=\"type === 'dropdown'\">\n  <div ng-repeat=\"v in value track by $index\" class=\"gf-form tc-condition-block\" style=\"vertical-align: top;\">\n    <div class=\"gf-form-select-wrapper gf-form-select-wrapper--caret-indent tc-condition-dropdown\">\n      <gf-form-dropdown model=\"value[$index]\" allow-custom=\"true\" lookup-text=\"true\" get-options=\"getOptions()\" on-change=\"onChangeInternal()\"\n        css-class=\"min-width-10\">\n      </gf-form-dropdown>\n    </div>\n    <label class=\"gf-form-label pointer tc-condition-minus\">\n      <a class=\"pointer\" ng-click=\"deleteCondition($index)\">\n        <i class=\"fa fa-minus\"></i>\n      </a>\n    </label>\n  </div>\n  <div class=\"gf-form tc-condition-add\">\n    <label class=\"gf-form-label query-part\" ng-if=\"maxCond === -1 || value.length < maxCond\">\n      <a class=\"pointer\" ng-click=\"addCondition('')\">\n        <i class=\"fa fa-plus\"></i>\n      </a>\n    </label>\n  </div>\n</div>\n\n<!-- <div class=\"gf-form-select-wrapper gf-form-select-wrapper--caret-indent\">\n  <gf-form-dropdown model=\"ctrl.target.cvm.instance\" allow-custom=\"true\" lookup-text=\"true\" get-options=\"ctrl.getInstances($query)\"\n    on-change=\"ctrl.onInstanceChange()\" css-class=\"min-width-10\">\n  </gf-form-dropdown>\n</div> -->\n";
function multiCondition() {
  return {
    template: template,
    controller: MultiConditionCtrl,
    restrict: 'E',
    scope: {
      type: '=',
      value: '=',
      maxCond: '=?',
      placeholder: '=?',
      options: '=?',
      maxNum: '=?',
      minNum: '=?',
      multiple: '=?',
      onChange: '&',
      getOptions: '&'
    }
  };
}
grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0___default.a.directive('multiCondition', multiCondition);

/***/ }),

/***/ "./datasource/query-ctrl/css/query_editor.css":
/*!****************************************************!*\
  !*** ./datasource/query-ctrl/css/query_editor.css ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var api = __webpack_require__(/*! ../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js */ "../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js");
            var content = __webpack_require__(/*! !../../../../node_modules/css-loader/dist/cjs.js??ref--8-1!../../../../node_modules/postcss-loader/src??ref--8-2!../../../../node_modules/sass-loader/dist/cjs.js!./query_editor.css */ "../node_modules/css-loader/dist/cjs.js?!../node_modules/postcss-loader/src/index.js?!../node_modules/sass-loader/dist/cjs.js!./datasource/query-ctrl/css/query_editor.css");

            content = content.__esModule ? content.default : content;

            if (typeof content === 'string') {
              content = [[module.i, content, '']];
            }

var options = {};

options.insert = "head";
options.singleton = false;

var update = api(content, options);

var exported = content.locals ? content.locals : {};



module.exports = exported;

/***/ }),

/***/ "./datasource/query-ctrl/partials/query.editor.html":
/*!**********************************************************!*\
  !*** ./datasource/query-ctrl/partials/query.editor.html ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<query-editor-row query-ctrl=\"ctrl\" class=\"generic-datasource-query-row\" has-text-edit-mode=\"true\">\n  <div class=\"gf-form-inline\">\n    <div class=\"gf-form\">\n      <label class=\"gf-form-label query-keyword width-9\">Namespace</label>\n      <div class=\"gf-form-select-wrapper gf-form-select-wrapper--caret-indent\">\n        <gf-cascader\n          ng-if=\"ctrl.isCascader\"\n          style=\"width: 160px\"\n          change-on-select=\"false\"\n          options=\"ctrl.cascaderOptions\"\n          on-select=\"ctrl.cascaderChange(_query)\"\n          initial-value=\"{{ctrl.target.namespace}}\"\n        ></gf-cascader>\n\n        <gf-form-dropdown\n          ng-if=\"!ctrl.isCascader\"\n          model=\"ctrl.target.namespace\"\n          lookup-text=\"true\"\n          get-options=\"ctrl.getNamespaces($query)\"\n          on-change=\"ctrl.onNamespaceChange()\"\n          css-class=\"min-width-10\"\n        >\n        </gf-form-dropdown>\n      </div>\n    </div>\n  </div>\n\n  <div class=\"gf-form-inline\" ng-if=\"!ctrl.hideRegion\">\n    <div class=\"gf-form\">\n      <label class=\"gf-form-label query-keyword width-9\">Region</label>\n      <div class=\"gf-form-select-wrapper gf-form-select-wrapper--caret-indent\">\n        <gf-form-dropdown\n          model=\"ctrl.target[ctrl.target.service].region\"\n          allow-custom=\"true\"\n          lookup-text=\"true\"\n          get-options=\"ctrl.getRegions($query)\"\n          on-change=\"ctrl.onRegionChange()\"\n          css-class=\"min-width-10\"\n          disabled\n        >\n        </gf-form-dropdown>\n      </div>\n    </div>\n  </div>\n\n  <div class=\"gf-form-inline\">\n    <div class=\"gf-form\">\n      <label class=\"gf-form-label query-keyword width-9\">MetricName</label>\n      <div class=\"gf-form-select-wrapper gf-form-select-wrapper--caret-indent\">\n        <gf-form-dropdown\n          model=\"ctrl.target[ctrl.target.service].metricName\"\n          allow-custom=\"true\"\n          lookup-text=\"true\"\n          get-options=\"ctrl.getMetrics($query)\"\n          on-change=\"ctrl.onMetricChange()\"\n          css-class=\"min-width-10\"\n        >\n        </gf-form-dropdown>\n      </div>\n    </div>\n    <div class=\"gf-form gf-form-label--grow\" ng-if=\"!!ctrl.getMetricNameDesc()\">\n      <label class=\"gf-form-label gf-form-label--grow\">({{ctrl.getMetricNameDesc()}})</label>\n    </div>\n  </div>\n\n  <div class=\"gf-form-inline\" style=\"align-items: center\">\n    <div class=\"gf-form\">\n      <label class=\"gf-form-label query-keyword width-9\">Period</label>\n      <div class=\"gf-form-select-wrapper gf-form-select-wrapper--caret-indent\">\n        <select\n          class=\"gf-form-input min-width-10\"\n          ng-change=\"ctrl.refresh()\"\n          ng-model=\"ctrl.target[ctrl.target.service].period\"\n          ng-options=\"f for f in ctrl.sortedPeriodList\"\n        ></select>\n      </div>\n    </div>\n    <span style=\"margin-left: 8px; font-size: 12px\">({{ctrl.getTimeDesc()}})</span>\n  </div>\n\n  <div class=\"gf-form-inline\" style=\"align-items: center\">\n    <div class=\"gf-form\">\n      <label class=\"gf-form-label query-keyword width-9\">Timeshift</label>\n      <input\n        class=\"gf-form-input width-10\"\n        ng-model=\"ctrl.target[ctrl.target.service].timeshift\"\n        ng-blur=\"ctrl.refresh()\"\n      ></input>\n    </div>\n  </div>\n\n  <div class=\"gf-form-inline\">\n    <div class=\"gf-form\">\n      <label class=\"gf-form-label query-keyword width-9\">Instance</label>\n      <div class=\"gf-form-select-wrapper gf-form-select-wrapper--caret-indent\">\n        <select\n          class=\"gf-form-input min-width-8\"\n          ng-change=\"ctrl.onInstanceAliasChange()\"\n          ng-model=\"ctrl.target[ctrl.target.service].instanceAlias\"\n          ng-options=\"f.value as f.text for f in ctrl.instanceAliasList\"\n        ></select>\n      </div>\n      <div class=\"gf-form-select-wrapper gf-form-select-wrapper--caret-indent\">\n        <gf-form-dropdown\n          model=\"ctrl.target[ctrl.target.service].instance\"\n          allow-custom=\"true\"\n          lookup-text=\"true\"\n          get-options=\"ctrl.getInstances($query)\"\n          on-change=\"ctrl.onInstanceChange()\"\n          css-class=\"min-width-10\"\n        >\n        </gf-form-dropdown>\n      </div>\n    </div>\n    <div class=\"gf-form\" ng-if=\"!ctrl.isVariable('instance')\">\n      <label class=\"gf-form-label width-7\">Show Details</label>\n      <gf-form-switch\n        class=\"gf-form tc-switch\"\n        label-class=\"width-7\"\n        checked=\"ctrl.target.showInstanceDetails\"\n        switch-class=\"max-width-5\"\n      ></gf-form-switch>\n    </div>\n    <div class=\"gf-form gf-form-label--grow\">\n      <!-- this is explain how much items will display to user -->\n      <label class=\"gf-form-label gf-form-label--grow\">({{ctrl.getSearchDesc()}})</label>\n    </div>\n  </div>\n</query-editor-row>\n";

/***/ }),

/***/ "./datasource/query-ctrl/partials/queryEditorTemplate.ts":
/*!***************************************************************!*\
  !*** ./datasource/query-ctrl/partials/queryEditorTemplate.ts ***!
  \***************************************************************/
/*! exports provided: editorHtml */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "editorHtml", function() { return editorHtml; });
/* harmony import */ var _query_editor_html__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./query.editor.html */ "./datasource/query-ctrl/partials/query.editor.html");
/* harmony import */ var _query_editor_html__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_query_editor_html__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _tc_monitor__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../tc_monitor */ "./datasource/tc_monitor/index.ts");


var hackModuleName = {
  loadBalance: 'clb',
  lbPrivate: 'clb',
  lbPublic: 'clb',
  mongoDB: 'mongodb',
  // MapReduce
  mrHDFS: 'mr',
  mrHBASE: 'mr',
  mrHIVE: 'mr',
  mrNODE: 'mr',
  mrPRESTO: 'mr',
  mrSPARK: 'mr',
  mrYARN: 'mr',
  mrZOOKEEPER: 'mr'
};
var editorHtml = function () {
  var str = _query_editor_html__WEBPACK_IMPORTED_MODULE_0___default.a;
  _tc_monitor__WEBPACK_IMPORTED_MODULE_1__["SERVICES"].forEach(function (_a) {
    var service = _a.service;
    var serviceSwitch = hackModuleName[service] || service.replace(/([A-Z])/g, '-$1').toLowerCase();
    str += "<".concat(serviceSwitch, "-query\n      ng-if=\"ctrl.target.service==='").concat(service, "'\"\n      target=\"ctrl.target.").concat(service, "\"\n      namespace=\"ctrl.target.namespace\"\n      show-detail=\"ctrl.checkShowDetail('instance')\"\n      datasource=\"ctrl.datasource\"\n      on-change=\"ctrl.onInstanceQueryChange()\"\n      on-refresh=\"ctrl.refresh()\"\n      dims=\"ctrl.target.").concat(service, ".dimensionObject\"\n      region=\"ctrl.getVariable(ctrl.target.").concat(service, ".region)\"\n    ></").concat(serviceSwitch, "-query>");
  });
  var footStr = "\n    <div class=\"gf-form\" ng-show=\"ctrl.lastQueryError\">\n      <pre class=\"gf-form-pre alert alert-error\">{{ctrl.lastQueryError}}</pre>\n    </div>\n  </query-editor-row>";
  return str + footStr;
}();

/***/ }),

/***/ "./datasource/query-ctrl/query.ctrl.ts":
/*!*********************************************!*\
  !*** ./datasource/query-ctrl/query.ctrl.ts ***!
  \*********************************************/
/*! exports provided: TCMonitorDatasourceQueryCtrl */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TCMonitorDatasourceQueryCtrl", function() { return TCMonitorDatasourceQueryCtrl; });
/* harmony import */ var grafana_app_plugins_sdk__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! grafana/app/plugins/sdk */ "grafana/app/plugins/sdk");
/* harmony import */ var grafana_app_plugins_sdk__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(grafana_app_plugins_sdk__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lodash */ "lodash");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _common_constants__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../common/constants */ "./datasource/common/constants.ts");
/* harmony import */ var _tc_monitor__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../tc_monitor */ "./datasource/tc_monitor/index.ts");
/* harmony import */ var _components_multi_condition__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./components/multi_condition */ "./datasource/query-ctrl/components/multi_condition.ts");
/* harmony import */ var _components_custom_select_dropdown__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./components/custom_select_dropdown */ "./datasource/query-ctrl/components/custom_select_dropdown.ts");
/* harmony import */ var _components_cascader__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./components/cascader */ "./datasource/query-ctrl/components/cascader.ts");
/* harmony import */ var _css_query_editor_css__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./css/query_editor.css */ "./datasource/query-ctrl/css/query_editor.css");
/* harmony import */ var _css_query_editor_css__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(_css_query_editor_css__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var _partials_queryEditorTemplate__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./partials/queryEditorTemplate */ "./datasource/query-ctrl/partials/queryEditorTemplate.ts");
/* harmony import */ var _locale__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../locale */ "./locale/index.ts");
var __extends = undefined && undefined.__extends || function () {
  var _extendStatics = function extendStatics(d, b) {
    _extendStatics = Object.setPrototypeOf || {
      __proto__: []
    } instanceof Array && function (d, b) {
      d.__proto__ = b;
    } || function (d, b) {
      for (var p in b) {
        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];
      }
    };

    return _extendStatics(d, b);
  };

  return function (d, b) {
    if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");

    _extendStatics(d, b);

    function __() {
      this.constructor = d;
    }

    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();

var __assign = undefined && undefined.__assign || function () {
  __assign = Object.assign || function (t) {
    for (var s, i = 1, n = arguments.length; i < n; i++) {
      s = arguments[i];

      for (var p in s) {
        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
      }
    }

    return t;
  };

  return __assign.apply(this, arguments);
};












var TCMonitorDatasourceQueryCtrl =
/** @class */
function (_super) {
  TCMonitorDatasourceQueryCtrl.$inject = ["$scope", "$injector", "templateSrv"];

  __extends(TCMonitorDatasourceQueryCtrl, _super);
  /** @ngInject */
  // eslint-disable-next-line @typescript-eslint/no-parameter-properties


  function TCMonitorDatasourceQueryCtrl($scope, $injector, templateSrv) {
    var _a, _b, _c, _d, _e;

    var _this = _super.call(this, $scope, $injector) || this;

    _this.templateSrv = templateSrv;
    _this.namespaces = [];
    _this.regions = [];
    _this.instanceList = []; // listenerList: any[] = [];

    _this.metricList = [];
    _this.periodList = [];
    _this.dimensionList = [];
    _this.instanceAliasList = [];
    _this.defaults = __assign({
      namespace: '',
      service: '',
      showInstanceDetails: false
    }, _tc_monitor__WEBPACK_IMPORTED_MODULE_3__["InitServiceState"]);
    _this.cascaderOptions = [];
    _this.$scope = $scope;
    _this.cascaderOptions = _this.datasource.getCascaderNamespaces();
    _this.namespaces = _this.datasource.getNamespaces(); // 当数据源的命名空间列表存在时，设置相应的默认值

    if (_this.namespaces.length > 0) {
      // if (_.indexOf(this.namespaces, this.target.namespace) === -1) {
      //   this.target.namespace = this.namespaces[0];
      // }
      _this.target.namespace = (_d = (_a = _this.target.namespace) !== null && _a !== void 0 ? _a : (_c = (_b = _this.cascaderOptions[0]) === null || _b === void 0 ? void 0 : _b.items) === null || _c === void 0 ? void 0 : _c[0].value) !== null && _d !== void 0 ? _d : _this.cascaderOptions[0].value;
      _this.target.service = Object(_common_constants__WEBPACK_IMPORTED_MODULE_2__["GetServiceFromNamespace"])(_this.target.namespace) || '';
    }

    _this.hideRegion = !!((_e = _tc_monitor__WEBPACK_IMPORTED_MODULE_3__["SERVICES"].find(function (o) {
      return o.service === _this.target.service;
    })) === null || _e === void 0 ? void 0 : _e.hideRegion);

    lodash__WEBPACK_IMPORTED_MODULE_1___default.a.defaultsDeep(_this.target, _this.defaults);

    _this.instanceAliasList = _this.getInstanceAliasList(_this.target.service); // this.listenerAliasList = this.getListenerAliasList(this.target.service);

    _this.panelCtrl.events.on('data-received', _this.onDataReceived.bind(_this), $scope);

    _this.panelCtrl.events.on('data-error', _this.onDataError.bind(_this), $scope);

    return _this;
  }

  Object.defineProperty(TCMonitorDatasourceQueryCtrl.prototype, "sortedPeriodList", {
    get: function get() {
      return this.periodList.sort(function (a, b) {
        return a - b;
      });
    },
    enumerable: false,
    configurable: true
  });
  Object.defineProperty(TCMonitorDatasourceQueryCtrl.prototype, "isCascader", {
    get: function get() {
      return this.cascaderOptions.length > 1;
    },
    enumerable: false,
    configurable: true
  });

  TCMonitorDatasourceQueryCtrl.prototype.cascaderChange = function (namespace) {
    this.target.namespace = namespace;
    this.onNamespaceChange();
  };

  TCMonitorDatasourceQueryCtrl.prototype.onDataReceived = function (dataList) {
    this.lastQueryError = undefined;
    this.lastQuery = '';

    var anySeriesFromQuery = lodash__WEBPACK_IMPORTED_MODULE_1___default.a.find(dataList, {
      refId: this.target.refId
    });

    if (anySeriesFromQuery) {
      this.lastQuery = anySeriesFromQuery.query;
    }
  };

  TCMonitorDatasourceQueryCtrl.prototype.onDataError = function (err) {
    this.handleQueryCtrlError(err);
  };

  TCMonitorDatasourceQueryCtrl.prototype.handleQueryCtrlError = function (err) {
    var _a;

    if (lodash__WEBPACK_IMPORTED_MODULE_1___default.a.get(err, 'query.refId') !== this.target.refId) {
      return;
    }

    if (lodash__WEBPACK_IMPORTED_MODULE_1___default.a.get(err, 'error.data.error.innererror', undefined)) {
      if (lodash__WEBPACK_IMPORTED_MODULE_1___default.a.get(err, 'error.data.error.innererror.innererror', undefined)) {
        this.lastQueryError = lodash__WEBPACK_IMPORTED_MODULE_1___default.a.get(err, 'error.data.error.innererror.innererror.message');
      } else {
        this.lastQueryError = lodash__WEBPACK_IMPORTED_MODULE_1___default.a.get(err, 'error.data.error.innererror.message');
      }
    } else if (lodash__WEBPACK_IMPORTED_MODULE_1___default.a.get(err, 'error.data.error', undefined)) {
      this.lastQueryError = lodash__WEBPACK_IMPORTED_MODULE_1___default.a.get(err, 'error.data.error.message');
    } else if (lodash__WEBPACK_IMPORTED_MODULE_1___default.a.get(err, 'error.data', undefined)) {
      this.lastQueryError = lodash__WEBPACK_IMPORTED_MODULE_1___default.a.get(err, 'error.data.message');
    } else if (lodash__WEBPACK_IMPORTED_MODULE_1___default.a.get(err, 'data.error', undefined)) {
      this.lastQueryError = lodash__WEBPACK_IMPORTED_MODULE_1___default.a.get(err, 'data.error.message'); // eslint-disable-next-line no-empty
    } else if ((_a = err.data) === null || _a === void 0 ? void 0 : _a.message) {} else if (lodash__WEBPACK_IMPORTED_MODULE_1___default.a.get(err, 'data.message', undefined)) {
      this.lastQueryError = lodash__WEBPACK_IMPORTED_MODULE_1___default.a.get(err, 'data.message');
    } else {
      this.lastQueryError = err;
    }
  };
  /**
   * 获取实例展示字段的选择列表
   *
   * @param service 监控服务名
   */


  TCMonitorDatasourceQueryCtrl.prototype.getInstanceAliasList = function (service) {
    if (!service) {
      return [];
    }

    return lodash__WEBPACK_IMPORTED_MODULE_1___default.a.map(_tc_monitor__WEBPACK_IMPORTED_MODULE_3__["InstanceAliasList"]["".concat(lodash__WEBPACK_IMPORTED_MODULE_1___default.a.toUpper(service), "InstanceAliasList")] || [], function (item) {
      return {
        text: "As ".concat(item),
        value: item
      };
    });
  };

  TCMonitorDatasourceQueryCtrl.prototype.getNamespaces = function (query) {
    return lodash__WEBPACK_IMPORTED_MODULE_1___default.a.map(this.namespaces, function (o) {
      return {
        text: o.label,
        value: o.namespace
      };
    }); // TODO: 为什么对对象排序不行呢？？？？待解决
  };

  TCMonitorDatasourceQueryCtrl.prototype.onNamespaceChange = function () {
    var _a;

    var service = Object(_common_constants__WEBPACK_IMPORTED_MODULE_2__["GetServiceFromNamespace"])(this.target.namespace) || '';
    this.hideRegion = !!((_a = _tc_monitor__WEBPACK_IMPORTED_MODULE_3__["SERVICES"].find(function (o) {
      return o.service === service;
    })) === null || _a === void 0 ? void 0 : _a.hideRegion);
    this.regions = [];
    this.metricList = [];
    this.periodList = [];
    this.dimensionList = [];
    this.instanceList = []; // this.listenerList = [];

    var initState = _tc_monitor__WEBPACK_IMPORTED_MODULE_3__["InitServiceState"][service];
    this.target[service] = lodash__WEBPACK_IMPORTED_MODULE_1___default.a.cloneDeep(initState);
    this.target.service = service;
    this.instanceAliasList = this.getInstanceAliasList(service); // this.listenerAliasList = this.getListenerAliasList(service);

    this.refresh();
    if (this.isCascader) this.$scope.$apply();
  };
  /**
   * 获取地域列表
   * output:
   *  [
   *    {
   *      "Region": "ap-beijing",
   *      "RegionName": "华北地区(北京)",
   *      "RegionState": "AVAILABLE"
   *    },
   *    {
   *      "Region": "ap-guangzhou",
   *      "RegionName": "华南地区(广州)",
   *      "RegionState": "AVAILABLE"
   *    }
   *  ]
   */


  TCMonitorDatasourceQueryCtrl.prototype.getRegions = function (query) {
    var _this = this;

    var service = this.target.service;

    if (!service || lodash__WEBPACK_IMPORTED_MODULE_1___default.a.startsWith('$')) {
      return [];
    }

    if (this.regions.length) {
      return this.regions;
    }

    return this.datasource.getRegions(service).then(function (list) {
      _this.regions = list;
      return list;
    })["catch"](this.handleQueryCtrlError.bind(this));
  };

  TCMonitorDatasourceQueryCtrl.prototype.onRegionChange = function () {
    var _this = this;

    var service = this.target.service;
    this.target[service].instance = '';
    this.instanceList = []; // this.listenerList = [];

    this.isMetricsNeedUpdate = true;

    lodash__WEBPACK_IMPORTED_MODULE_1___default.a.forEach(this.target[service].dimensionObject, function (__, key) {
      _this.target[service].dimensionObject[key] = {
        Name: key,
        Value: ''
      };
    });

    this.target[service].queries = lodash__WEBPACK_IMPORTED_MODULE_1___default.a.cloneDeep(_tc_monitor__WEBPACK_IMPORTED_MODULE_3__["InitServiceState"][service].queries);
    this.getInstances();
    this.refresh();
  };
  /**
   * 获取模板变量的实际值
   *
   * @param variable 模板变量的名字
   * @param multiple 是否允许多选，如果为 false，返回实际值数组的第一个值
   */


  TCMonitorDatasourceQueryCtrl.prototype.getVariable = function (variable, multiple) {
    return Object(_common_constants__WEBPACK_IMPORTED_MODULE_2__["ReplaceVariable"])(this.templateSrv, this.panelCtrl.panel.scopedVars, variable, multiple);
  };

  TCMonitorDatasourceQueryCtrl.prototype.getMetricNameDesc = function () {
    var _this = this;

    var service = this.target.service;

    var index = lodash__WEBPACK_IMPORTED_MODULE_1___default.a.findIndex(this.metricList, function (item) {
      return item.MetricName === _this.target[service].metricName;
    });

    if (index === -1) {
      return '';
    }

    return Object(_locale__WEBPACK_IMPORTED_MODULE_9__["getLanguage"])() === _locale__WEBPACK_IMPORTED_MODULE_9__["Language"].Chinese ? this.metricList[index].Meaning.Zh : this.metricList[index].Meaning.En;
  };

  TCMonitorDatasourceQueryCtrl.prototype.getMetrics = function (query) {
    var _this = this;

    var service = this.target.service;
    var region = this.getVariable(lodash__WEBPACK_IMPORTED_MODULE_1___default.a.get(this.target[service], 'region', ''), false);

    if (!service || !region) {
      return [];
    }

    if (!this.isMetricsNeedUpdate && this.metricList.length > 0) {
      return lodash__WEBPACK_IMPORTED_MODULE_1___default.a.map(this.metricList, function (item) {
        return {
          text: item.MetricName,
          value: item.MetricName
        };
      });
    }

    return this.datasource.getMetrics(service, region).then(function (list) {
      _this.metricList = list;
      _this.isMetricsNeedUpdate = false;

      var index = lodash__WEBPACK_IMPORTED_MODULE_1___default.a.findIndex(_this.metricList, function (item) {
        return item.MetricName === _this.target[service].metricName;
      });

      if (index !== -1) {
        _this.periodList = lodash__WEBPACK_IMPORTED_MODULE_1___default.a.get(_this.metricList[index], 'Period', []);
        _this.dimensionList = lodash__WEBPACK_IMPORTED_MODULE_1___default.a.get(_this.metricList[index], 'Dimensions.0.Dimensions', []);
      }

      return lodash__WEBPACK_IMPORTED_MODULE_1___default.a.map(list, function (item) {
        return {
          text: item.MetricName,
          value: item.MetricName
        };
      });
    })["catch"](this.handleQueryCtrlError.bind(this));
  };

  TCMonitorDatasourceQueryCtrl.prototype.onMetricChange = function () {
    var _this = this;

    var service = this.target.service;
    var periodList = [];
    var dimensionList = [];
    var dimensionObject = {};
    var metricUnit = '';

    var index = lodash__WEBPACK_IMPORTED_MODULE_1___default.a.findIndex(this.metricList, function (item) {
      return item.MetricName === _this.target[service].metricName;
    });

    if (index !== -1) {
      periodList = lodash__WEBPACK_IMPORTED_MODULE_1___default.a.get(this.metricList[index], 'Period', []);
      dimensionList = lodash__WEBPACK_IMPORTED_MODULE_1___default.a.get(this.metricList[index], 'Dimensions.0.Dimensions', []); // dimensionList = dimensionList.length > 0 ? dimensionList : (DefaultDimensions[service] ?? []);

      metricUnit = lodash__WEBPACK_IMPORTED_MODULE_1___default.a.get(this.metricList[index], 'Unit', '');
    }

    lodash__WEBPACK_IMPORTED_MODULE_1___default.a.forEach(dimensionList, function (item) {
      dimensionObject[item] = {
        Name: item,
        Value: ''
      };
    });

    this.periodList = periodList;
    this.dimensionList = dimensionList;
    this.target[service].period = periodList.length > 0 ? lodash__WEBPACK_IMPORTED_MODULE_1___default.a.indexOf(periodList, 300) === -1 ? periodList[0] : 300 : undefined;
    this.target[service].dimensionObject = dimensionObject;
    this.target[service].metricUnit = metricUnit;
    this.refresh();
  };

  TCMonitorDatasourceQueryCtrl.prototype.getInstances = function () {
    var _this = this;

    var service = this.target.service;
    var region = this.getVariable(lodash__WEBPACK_IMPORTED_MODULE_1___default.a.get(this.target[service], 'region', ''), false);

    if (!service || !region) {
      return [];
    }

    var params = this.getInstanceQueryParams(service);
    return this.datasource.getInstances(service, region, params).then(function (list) {
      _this.instanceList = list;
      var instanceAlias = _this.target[service].instanceAlias; // InstanceId

      var instances = [];

      lodash__WEBPACK_IMPORTED_MODULE_1___default.a.forEach(list, function (item) {
        // 根据 instanceAlias，确定实例展示字段，并保存至 _InstanceAliasValue，用于 constants.ts 的监控数据解析函数 ParseQueryResult
        var instanceAliasValue = lodash__WEBPACK_IMPORTED_MODULE_1___default.a.get(item, instanceAlias); // console.log({instanceAliasValue}); 遍历出所有的InstanceId


        if (instanceAliasValue) {
          if (typeof instanceAliasValue === 'string') {
            item._InstanceAliasValue = instanceAliasValue;
            instances.push({
              text: instanceAliasValue,
              value: JSON.stringify(item)
            });
          } else if (lodash__WEBPACK_IMPORTED_MODULE_1___default.a.isArray(instanceAliasValue)) {
            lodash__WEBPACK_IMPORTED_MODULE_1___default.a.forEach(instanceAliasValue, function (subItem) {
              item._InstanceAliasValue = subItem;
              instances.push({
                text: subItem,
                value: JSON.stringify(item)
              });
            });
          }
        }
      });

      return instances;
    })["catch"](this.handleQueryCtrlError.bind(this));
  };

  TCMonitorDatasourceQueryCtrl.prototype.onInstanceChange = function (v) {
    // const service = this.target.service;
    // if (this.target[service].listener) {
    //   this.target[service].listener = '';
    // }
    // if (this.target[service].servers) {
    //   this.target[service].servers = '';
    // }
    // if (this.target[service].serverPort) {
    //   this.target[service].serverPort = '';
    // }
    this.refresh();
  }; // getListeners() {
  //   const service = this.target.service;
  //   const region = this.getVariable(_.get(this.target[service], 'region', ''), false);
  //   const instance = this.getVariable(_.get(this.target[service], 'instance', ''), false);
  //   if (!service || !region) {
  //     return [];
  //   }
  //   let instanceMap = {};
  //   // console.log({instance});
  //   try {
  //     instanceMap = JSON.parse(instance);
  //   } catch (e) {
  //     console.log(e);
  //   }
  //   const idKey = IdKeys[service];
  //   const instanceId = _.get(instanceMap, idKey);
  //   return this.datasource.getListeners(service, region, instanceId)
  //     .then(list => {
  //       this.listenerList = list;
  //       const listenerAlias = this.target[service].listenerAlias;
  //       const listeners: any[] = [];
  //       _.forEach(list, (item) => {
  //         const listenerAliasValue = _.get(item, listenerAlias);
  //         if (listenerAliasValue) {
  //           if (typeof listenerAliasValue === 'string') {
  //             item._listenerAliasValue = listenerAliasValue;
  //             listeners.push({ text: listenerAliasValue, value: JSON.stringify(item) });
  //           } else if (_.isArray(listenerAliasValue)) {
  //             _.forEach(listenerAliasValue, (subItem) => {
  //               item._listenerAliasValue = subItem;
  //               listeners.push({ text: subItem, value: JSON.stringify(item) });
  //             });
  //           }
  //         }
  //       });
  //       // console.log({listeners});
  //       return listeners;
  //     })
  //     .catch(this.handleQueryCtrlError.bind(this));
  // }

  /**
   * 获取实例请求接口的请求参数
   *
   * @param service 监控服务名
   */


  TCMonitorDatasourceQueryCtrl.prototype.getInstanceQueryParams = function (service) {
    var queries = this.target[service].queries;

    if (_tc_monitor__WEBPACK_IMPORTED_MODULE_3__["GetInstanceQueryParams"]["".concat(lodash__WEBPACK_IMPORTED_MODULE_1___default.a.toUpper(service), "GetInstanceQueryParams")]) {
      return _tc_monitor__WEBPACK_IMPORTED_MODULE_3__["GetInstanceQueryParams"]["".concat(lodash__WEBPACK_IMPORTED_MODULE_1___default.a.toUpper(service), "GetInstanceQueryParams")](queries);
    } else {
      return {};
    }
  };

  TCMonitorDatasourceQueryCtrl.prototype.onInstanceAliasChange = function () {
    // 仅当 instance 字段不是模板变量时，执行以下操作
    if (!this.isVariable('instance')) {
      var service = this.target.service;
      this.target[service].instance = '';
      this.refresh();
    }
  };

  TCMonitorDatasourceQueryCtrl.prototype.onInstanceQueryChange = function () {
    var _this = this; // 仅当 instance 字段不是模板变量时，执行以下操作


    if (!this.isVariable('instance')) {
      var service_1 = this.target.service;
      this.target[service_1].instance = '';
      this.instanceList = [];

      lodash__WEBPACK_IMPORTED_MODULE_1___default.a.forEach(this.target[service_1].dimensionObject, function (__, key) {
        _this.target[service_1].dimensionObject[key] = {
          Name: key,
          Value: ''
        };
      });

      this.refresh();
    }
  };

  TCMonitorDatasourceQueryCtrl.prototype.isVariable = function (field) {
    var _a;

    var service = this.target.service;
    var value = (_a = this.target[service]) === null || _a === void 0 ? void 0 : _a[field];
    return Object(_common_constants__WEBPACK_IMPORTED_MODULE_2__["isVariable"])(value);
  };

  TCMonitorDatasourceQueryCtrl.prototype.checkShowDetail = function (field) {
    return !this.isVariable(field) && this.target.showInstanceDetails;
  };

  TCMonitorDatasourceQueryCtrl.prototype.getTimeDesc = function () {
    return "".concat(Object(_locale__WEBPACK_IMPORTED_MODULE_9__["t"])('time_unit'), ": ").concat(Object(_locale__WEBPACK_IMPORTED_MODULE_9__["t"])('seconds'));
  };

  TCMonitorDatasourceQueryCtrl.prototype.getSearchDesc = function () {
    return Object(_locale__WEBPACK_IMPORTED_MODULE_9__["t"])('search_description');
  }; // static templateUrl = 'datasource/partials/query.editor.html';


  TCMonitorDatasourceQueryCtrl.template = _partials_queryEditorTemplate__WEBPACK_IMPORTED_MODULE_8__["editorHtml"];
  return TCMonitorDatasourceQueryCtrl;
}(grafana_app_plugins_sdk__WEBPACK_IMPORTED_MODULE_0__["QueryCtrl"]);



/***/ }),

/***/ "./datasource/rum-service/RUMMetadataQuery.ts":
/*!****************************************************!*\
  !*** ./datasource/rum-service/RUMMetadataQuery.ts ***!
  \****************************************************/
/*! exports provided: getAllPolicies, getAllMeasurementsForTags, getTagKeysForMeasurementAndTags, getTagValues, getFieldKeysForMeasurement */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getAllPolicies", function() { return getAllPolicies; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getAllMeasurementsForTags", function() { return getAllMeasurementsForTags; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getTagKeysForMeasurementAndTags", function() { return getTagKeysForMeasurementAndTags; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getTagValues", function() { return getTagValues; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getFieldKeysForMeasurement", function() { return getFieldKeysForMeasurement; });
/* harmony import */ var _query_builder__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./query_builder */ "./datasource/rum-service/query_builder.ts");
/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../types */ "./datasource/types.ts");
var __awaiter = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {
  function adopt(value) {
    return value instanceof P ? value : new P(function (resolve) {
      resolve(value);
    });
  }

  return new (P || (P = Promise))(function (resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }

    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }

    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }

    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};

var __generator = undefined && undefined.__generator || function (thisArg, body) {
  var _ = {
    label: 0,
    sent: function sent() {
      if (t[0] & 1) throw t[1];
      return t[1];
    },
    trys: [],
    ops: []
  },
      f,
      y,
      t,
      g;
  return g = {
    next: verb(0),
    "throw": verb(1),
    "return": verb(2)
  }, typeof Symbol === "function" && (g[Symbol.iterator] = function () {
    return this;
  }), g;

  function verb(n) {
    return function (v) {
      return step([n, v]);
    };
  }

  function step(op) {
    if (f) throw new TypeError("Generator is already executing.");

    while (_) {
      try {
        if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
        if (y = 0, t) op = [op[0] & 2, t.value];

        switch (op[0]) {
          case 0:
          case 1:
            t = op;
            break;

          case 4:
            _.label++;
            return {
              value: op[1],
              done: false
            };

          case 5:
            _.label++;
            y = op[1];
            op = [0];
            continue;

          case 7:
            op = _.ops.pop();

            _.trys.pop();

            continue;

          default:
            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
              _ = 0;
              continue;
            }

            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
              _.label = op[1];
              break;
            }

            if (op[0] === 6 && _.label < t[1]) {
              _.label = t[1];
              t = op;
              break;
            }

            if (t && _.label < t[2]) {
              _.label = t[2];

              _.ops.push(op);

              break;
            }

            if (t[2]) _.ops.pop();

            _.trys.pop();

            continue;
        }

        op = body.call(thisArg, _);
      } catch (e) {
        op = [6, e];
        y = 0;
      } finally {
        f = t = 0;
      }
    }

    if (op[0] & 5) throw op[1];
    return {
      value: op[0] ? op[1] : void 0,
      done: true
    };
  }
};




var runExploreQuery = function runExploreQuery(type, withKey, withMeasurementFilter, target, datasource) {
  var builder = new _query_builder__WEBPACK_IMPORTED_MODULE_0__["RUMQueryBuilder"](target);
  var q = builder.buildExploreQuery(type, withKey, withMeasurementFilter);
  return datasource.metricFindQuery({
    serviceType: _types__WEBPACK_IMPORTED_MODULE_1__["ServiceType"].RUMService,
    queryString: q
  }, undefined);
};

function getAllPolicies(datasource) {
  return __awaiter(this, void 0, Promise, function () {
    var target, data;
    return __generator(this, function (_a) {
      switch (_a.label) {
        case 0:
          target = {
            tags: [],
            measurement: undefined,
            policy: undefined
          };
          return [4
          /*yield*/
          , runExploreQuery('RETENTION POLICIES', undefined, undefined, target, datasource)];

        case 1:
          data = _a.sent();
          return [2
          /*return*/
          , data.map(function (item) {
            return item.text;
          })];
      }
    });
  });
}
function getAllMeasurementsForTags(measurementFilter, tags, datasource) {
  return __awaiter(this, void 0, Promise, function () {
    var target, data;
    return __generator(this, function (_a) {
      switch (_a.label) {
        case 0:
          target = {
            tags: tags,
            measurement: undefined,
            policy: undefined
          };
          return [4
          /*yield*/
          , runExploreQuery('MEASUREMENTS', undefined, measurementFilter, target, datasource)];

        case 1:
          data = _a.sent();
          return [2
          /*return*/
          , data.map(function (item) {
            return item.text;
          })];
      }
    });
  });
}
function getTagKeysForMeasurementAndTags(measurement, policy, tags, datasource) {
  return __awaiter(this, void 0, Promise, function () {
    var target, data;
    return __generator(this, function (_a) {
      switch (_a.label) {
        case 0:
          target = {
            tags: tags,
            measurement: measurement,
            policy: policy
          };
          return [4
          /*yield*/
          , runExploreQuery('TAG_KEYS', undefined, undefined, target, datasource)];

        case 1:
          data = _a.sent();
          return [2
          /*return*/
          , data.map(function (item) {
            return item.text;
          })];
      }
    });
  });
}
function getTagValues(tagKey, measurement, policy, tags, datasource) {
  return __awaiter(this, void 0, Promise, function () {
    var target, data;
    return __generator(this, function (_a) {
      switch (_a.label) {
        case 0:
          target = {
            tags: tags,
            measurement: measurement,
            policy: policy
          };
          return [4
          /*yield*/
          , runExploreQuery('TAG_VALUES', tagKey, undefined, target, datasource)];

        case 1:
          data = _a.sent();
          return [2
          /*return*/
          , data.map(function (item) {
            return item.text;
          })];
      }
    });
  });
}
function getFieldKeysForMeasurement(measurement, policy, datasource) {
  return __awaiter(this, void 0, Promise, function () {
    var target, data;
    return __generator(this, function (_a) {
      switch (_a.label) {
        case 0:
          target = {
            tags: [],
            measurement: measurement,
            policy: policy
          };
          return [4
          /*yield*/
          , runExploreQuery('FIELDS', undefined, undefined, target, datasource)];

        case 1:
          data = _a.sent();
          return [2
          /*return*/
          , data.map(function (item) {
            return item.text;
          })];
      }
    });
  });
}

/***/ }),

/***/ "./datasource/rum-service/RUMServiceDataSource.tsx":
/*!*********************************************************!*\
  !*** ./datasource/rum-service/RUMServiceDataSource.tsx ***!
  \*********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lodash */ "lodash");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! rxjs */ "rxjs");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(rxjs__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! rxjs/operators */ "../node_modules/rxjs/_esm5/operators/index.js");
/* harmony import */ var _grafana_runtime__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @grafana/runtime */ "@grafana/runtime");
/* harmony import */ var _grafana_runtime__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_grafana_runtime__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @grafana/data */ "@grafana/data");
/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_grafana_data__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _RUM_query_model__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./RUM_query_model */ "./datasource/rum-service/RUM_query_model.ts");
/* harmony import */ var _RUM_series__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./RUM_series */ "./datasource/rum-service/RUM_series.ts");
/* harmony import */ var _response_parser__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./response_parser */ "./datasource/rum-service/response_parser.ts");
/* harmony import */ var _datasource_common_constants__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../datasource/common/constants */ "./datasource/common/constants.ts");
/* harmony import */ var _query_builder__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./query_builder */ "./datasource/rum-service/query_builder.ts");
function _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

var __extends = undefined && undefined.__extends || function () {
  var _extendStatics = function extendStatics(d, b) {
    _extendStatics = Object.setPrototypeOf || {
      __proto__: []
    } instanceof Array && function (d, b) {
      d.__proto__ = b;
    } || function (d, b) {
      for (var p in b) {
        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];
      }
    };

    return _extendStatics(d, b);
  };

  return function (d, b) {
    if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");

    _extendStatics(d, b);

    function __() {
      this.constructor = d;
    }

    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();

var __awaiter = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {
  function adopt(value) {
    return value instanceof P ? value : new P(function (resolve) {
      resolve(value);
    });
  }

  return new (P || (P = Promise))(function (resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }

    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }

    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }

    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};

var __generator = undefined && undefined.__generator || function (thisArg, body) {
  var _ = {
    label: 0,
    sent: function sent() {
      if (t[0] & 1) throw t[1];
      return t[1];
    },
    trys: [],
    ops: []
  },
      f,
      y,
      t,
      g;
  return g = {
    next: verb(0),
    "throw": verb(1),
    "return": verb(2)
  }, typeof Symbol === "function" && (g[Symbol.iterator] = function () {
    return this;
  }), g;

  function verb(n) {
    return function (v) {
      return step([n, v]);
    };
  }

  function step(op) {
    if (f) throw new TypeError("Generator is already executing.");

    while (_) {
      try {
        if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
        if (y = 0, t) op = [op[0] & 2, t.value];

        switch (op[0]) {
          case 0:
          case 1:
            t = op;
            break;

          case 4:
            _.label++;
            return {
              value: op[1],
              done: false
            };

          case 5:
            _.label++;
            y = op[1];
            op = [0];
            continue;

          case 7:
            op = _.ops.pop();

            _.trys.pop();

            continue;

          default:
            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
              _ = 0;
              continue;
            }

            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
              _.label = op[1];
              break;
            }

            if (op[0] === 6 && _.label < t[1]) {
              _.label = t[1];
              t = op;
              break;
            }

            if (t && _.label < t[2]) {
              _.label = t[2];

              _.ops.push(op);

              break;
            }

            if (t[2]) _.ops.pop();

            _.trys.pop();

            continue;
        }

        op = body.call(thisArg, _);
      } catch (e) {
        op = [6, e];
        y = 0;
      } finally {
        f = t = 0;
      }
    }

    if (op[0] & 5) throw op[1];
    return {
      value: op[0] ? op[1] : void 0,
      done: true
    };
  }
};










 // we detect the field type based on the value-array

function getFieldType(values) {
  // the values-array may contain a lot of nulls.
  // we need the first not-null item
  var firstNotNull = values.find(function (v) {
    return v !== null;
  });

  if (firstNotNull === undefined) {
    // we could not find any not-null values
    return _grafana_data__WEBPACK_IMPORTED_MODULE_4__["FieldType"].number;
  }

  var valueType = _typeof(firstNotNull);

  switch (valueType) {
    case 'string':
      return _grafana_data__WEBPACK_IMPORTED_MODULE_4__["FieldType"].string;

    case 'boolean':
      return _grafana_data__WEBPACK_IMPORTED_MODULE_4__["FieldType"]["boolean"];

    case 'number':
      return _grafana_data__WEBPACK_IMPORTED_MODULE_4__["FieldType"].number;

    default:
      throw new Error("RUM: invalid value type ".concat(valueType));
  }
} // this conversion function is specialized to work with the timeseries
// data returned by getTimeSeries()


function timeSeriesToDataFrame(timeSeries) {
  var times = [];
  var values = []; // the data we process here is not correctly typed.
  // the typescript types say every data-point is number|null,
  // but in fact it can be string or boolean too.

  var points = timeSeries.datapoints;

  for (var _i = 0, points_1 = points; _i < points_1.length; _i++) {
    var point = points_1[_i];
    values.push(point[0]);
    times.push(point[1]);
  }

  var timeField = {
    name: _grafana_data__WEBPACK_IMPORTED_MODULE_4__["TIME_SERIES_TIME_FIELD_NAME"],
    type: _grafana_data__WEBPACK_IMPORTED_MODULE_4__["FieldType"].time,
    config: {},
    values: new _grafana_data__WEBPACK_IMPORTED_MODULE_4__["ArrayVector"](times)
  };
  var valueField = {
    name: _grafana_data__WEBPACK_IMPORTED_MODULE_4__["TIME_SERIES_VALUE_FIELD_NAME"],
    type: getFieldType(values),
    config: {
      displayNameFromDS: timeSeries.title
    },
    values: new _grafana_data__WEBPACK_IMPORTED_MODULE_4__["ArrayVector"](values),
    labels: timeSeries.tags
  };
  var fields = [timeField, valueField];
  return {
    name: timeSeries.target,
    refId: timeSeries.refId,
    meta: timeSeries.meta,
    fields: fields,
    length: values.length
  };
}

var RUMServiceDataSource =
/** @class */
function (_super) {
  __extends(RUMServiceDataSource, _super);

  function RUMServiceDataSource(instanceSettings) {
    var _this = _super.call(this, instanceSettings) || this;

    _this.instanceSettings = instanceSettings;
    _this.templateSrv = Object(_grafana_runtime__WEBPACK_IMPORTED_MODULE_3__["getTemplateSrv"])();
    _this.responseParser = new _response_parser__WEBPACK_IMPORTED_MODULE_7__["default"]();
    _this.type = 'RUMService';
    return _this;
  }

  RUMServiceDataSource.prototype.query = function (request) {
    return this.classicQuery(request);
  };

  RUMServiceDataSource.prototype.classicQuery = function (options) {
    var _this = this;

    var timeFilter = this.getTimeFilter(options);
    var scopedVars = options.scopedVars;
    var targets = Object(lodash__WEBPACK_IMPORTED_MODULE_0__["cloneDeep"])(options.targets);
    var queryTargets = [];
    var i;
    var y;

    var allQueries = Object(lodash__WEBPACK_IMPORTED_MODULE_0__["map"])(targets, function (target) {
      if (target.hide) {
        return '';
      }

      target.RUMServiceParams = _this.fixTimePeriod(target.RUMServiceParams, options);
      queryTargets.push(target); // backward compatibility

      scopedVars.interval = scopedVars.__interval;
      return new _RUM_query_model__WEBPACK_IMPORTED_MODULE_5__["default"](target.RUMServiceParams, _this.templateSrv, scopedVars).render(true);
    }).reduce(function (acc, current) {
      if (current !== '') {
        acc += ';' + current;
      }

      return acc;
    });

    if (allQueries === '') {
      return Object(rxjs__WEBPACK_IMPORTED_MODULE_1__["of"])({
        data: []
      });
    } // add global adhoc filters to timeFilter
    // @ts-ignore


    var adhocFilters = this.templateSrv.getAdhocFilters(this.name);

    if (adhocFilters.length > 0) {
      var tmpQuery = new _RUM_query_model__WEBPACK_IMPORTED_MODULE_5__["default"]({}, this.templateSrv, scopedVars);
      timeFilter += ' AND ' + tmpQuery.renderAdhocFilters(adhocFilters);
    } // replace grafana variables


    scopedVars.timeFilter = {
      value: timeFilter
    }; // replace templated variables

    allQueries = this.templateSrv.replace(allQueries, scopedVars);
    return this._seriesQuery(allQueries, options).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_2__["map"])(function (data) {
      if (!data || !data.results) {
        return {
          data: []
        };
      }

      var seriesList = [];

      for (i = 0; i < data.results.length; i++) {
        var result = data.results[i];

        if (!result || !result.series) {
          continue;
        }

        var target = queryTargets[i];
        var alias = target.RUMServiceParams.alias;

        if (alias) {
          alias = _this.templateSrv.replace(target.RUMServiceParams.alias, options.scopedVars);
        }

        var meta = {
          executedQueryString: data.executedQueryString
        };
        var rumSeries = new _RUM_series__WEBPACK_IMPORTED_MODULE_6__["default"]({
          refId: target.refId,
          series: data.results[i].series,
          alias: alias,
          meta: meta
        });

        switch (target.RUMServiceParams.resultFormat) {
          case 'logs':
            meta.preferredVisualisationType = 'logs';
          // eslint-disable-next-line no-fallthrough

          case 'table':
            {
              seriesList.push(rumSeries.getTable());
              break;
            }

          default:
            {
              var timeSeries = rumSeries.getTimeSeries();

              for (y = 0; y < timeSeries.length; y++) {
                seriesList.push(timeSeriesToDataFrame(timeSeries[y]));
              }

              break;
            }
        }
      }

      return {
        data: seriesList,
        state: _grafana_data__WEBPACK_IMPORTED_MODULE_4__["LoadingState"].Done
      };
    }));
  };

  RUMServiceDataSource.prototype.metricFindQuery = function (query, options) {
    return __awaiter(this, void 0, Promise, function () {
      var interpolated;

      var _this = this;

      return __generator(this, function (_a) {
        interpolated = this.templateSrv.replace(query, undefined, 'regex');
        return [2
        /*return*/
        , this._seriesQuery(interpolated, options).toPromise().then(function (resp) {
          return _this.responseParser.parse(query, resp);
        })];
      });
    });
  };

  RUMServiceDataSource.prototype._seriesQuery = function (query, options) {
    if (!query) {
      return Object(rxjs__WEBPACK_IMPORTED_MODULE_1__["of"])({
        results: []
      });
    }

    if (options === null || options === void 0 ? void 0 : options.range) {
      var timeFilter = this.getTimeFilter({
        rangeRaw: options.range,
        timezone: options.timezone
      });
      query = query.replace('$timeFilter', timeFilter);
    }

    return this._RUMRequest(query);
  };

  RUMServiceDataSource.prototype._RUMRequest = function (query) {
    var _this = this;

    var serviceType = 'rum';
    var serviceInfo = Object(_datasource_common_constants__WEBPACK_IMPORTED_MODULE_8__["GetServiceAPIInfo"])('', serviceType);
    return Object(rxjs__WEBPACK_IMPORTED_MODULE_1__["from"])(Object(_datasource_common_constants__WEBPACK_IMPORTED_MODULE_8__["GetRequestParams"])({
      url: this.instanceSettings.url + serviceInfo.path,
      data: {
        Query: btoa(query)
      }
    }, serviceType, {
      action: 'DescribeGrafanaData'
    }, '', this.instanceSettings.id, Object(_grafana_runtime__WEBPACK_IMPORTED_MODULE_3__["getBackendSrv"])())).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_2__["mergeMap"])(function (requestOptions) {
      return Object(_grafana_runtime__WEBPACK_IMPORTED_MODULE_3__["getBackendSrv"])().fetch(requestOptions).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_2__["map"])(function (result) {
        if (Object(lodash__WEBPACK_IMPORTED_MODULE_0__["get"])(result, 'data.Response.Error')) {
          // eslint-disable-next-line no-throw-literal
          throw {
            message: 'RUM Error: ' + Object(lodash__WEBPACK_IMPORTED_MODULE_0__["get"])(result, 'data.Response.Error.Message'),
            data: result.data,
            cancelled: true
          };
        }

        var jsonData = Object(lodash__WEBPACK_IMPORTED_MODULE_0__["get"])(result, 'data.Response.Result');
        var data = JSON.parse(jsonData);
        data.executedQueryString = query;

        if (data) {
          if (data.error) {
            // eslint-disable-next-line no-throw-literal
            throw {
              message: 'RUM Error: ' + data.error,
              data: data
            };
          }

          if (data.results) {
            var errors = data.results.filter(function (elem) {
              return elem.error;
            });

            if (errors.length > 0) {
              // eslint-disable-next-line no-throw-literal
              throw {
                message: 'RUM Error: ' + errors[0].error,
                data: data
              };
            }
          }
        }

        return data;
      }), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_2__["catchError"])(function (err) {
        if (err.cancelled) {
          return Object(rxjs__WEBPACK_IMPORTED_MODULE_1__["of"])(err);
        }

        return Object(rxjs__WEBPACK_IMPORTED_MODULE_1__["throwError"])(_this.handleErrors(err));
      }));
    }));
  };

  RUMServiceDataSource.prototype.handleErrors = function (err) {
    var _a;

    var error = {
      message: (err === null || err === void 0 ? void 0 : err.status) || (err === null || err === void 0 ? void 0 : err.message) || 'Unknown error during query transaction. Please check JS console logs.'
    };

    if (Number.isInteger(err.status) && err.status !== 0 || err.status >= 300) {
      if ((_a = err.data) === null || _a === void 0 ? void 0 : _a.error) {
        error.message = 'RUM Error: ' + err.data.error;
        error.data = err.data; // @ts-ignore

        error.config = err.config;
      } else {
        error.message = 'Network Error: ' + err.statusText + '(' + err.status + ')';
        error.data = err.data; // @ts-ignore

        error.config = err.config;
      }
    }

    return error;
  };

  RUMServiceDataSource.prototype.getTimeFilter = function (options) {
    var from = this.getRUMTime(options.rangeRaw.from, false, options.timezone);
    var until = this.getRUMTime(options.rangeRaw.to, true, options.timezone);
    return 'time >= ' + from + ' and time <= ' + until;
  };

  RUMServiceDataSource.prototype.getRUMTime = function (date, roundUp, timezone) {
    if (Object(lodash__WEBPACK_IMPORTED_MODULE_0__["isString"])(date)) {
      if (date === 'now') {
        return 'now()';
      }

      var parts = /^now-(\d+)([dhms])$/.exec(date);

      if (parts) {
        var amount = parseInt(parts[1], 10);
        var unit = parts[2];
        return 'now() - ' + amount + unit;
      }

      date = _grafana_data__WEBPACK_IMPORTED_MODULE_4__["dateMath"].parse(date, roundUp, timezone);
    }

    return date.valueOf() + 'ms';
  };

  RUMServiceDataSource.prototype.fixTimePeriod = function (target, options) {
    var _this = this;

    var _a;

    var period = this.getTimePeriod(options.rangeRaw, options.timezone);
    (_a = target.groupBy) === null || _a === void 0 ? void 0 : _a.forEach(function (groupBy) {
      if (groupBy.type === 'time' && groupBy.params[0] !== '1d') {
        target = _this.modifyTime(target, period);
      }
    });
    return target;
  };

  RUMServiceDataSource.prototype.getTimePeriod = function (rangeRaw, timezone) {
    var _a, _b;

    var from = (_a = _grafana_data__WEBPACK_IMPORTED_MODULE_4__["dateMath"].parse(rangeRaw.from, false, timezone)) === null || _a === void 0 ? void 0 : _a.valueOf();
    var until = (_b = _grafana_data__WEBPACK_IMPORTED_MODULE_4__["dateMath"].parse(rangeRaw.to, true, timezone)) === null || _b === void 0 ? void 0 : _b.valueOf();
    var oneHour = 1000 * 60 * 60;
    var range = 0;
    var period = '1m';

    if (from && until) {
      range = until - from;
    } // 12h


    if (range <= oneHour * 12) {
      period = '1m';
    } // 3d
    else if (range <= oneHour * 24 * 3) {
      period = '30m';
    } // 7d
    else if (range <= oneHour * 24 * 7) {
      period = '1h';
    } else {
      period = '1d';
    }

    return period;
  }; // 修改查询聚合周期


  RUMServiceDataSource.prototype.modifyTime = function (query, period) {
    var _a;

    if (!query.groupBy) {
      return query;
    }

    for (var _i = 0, _b = query.groupBy; _i < _b.length; _i++) {
      var item = _b[_i];

      if (item.type === 'time') {
        var compareResult = this.periodCompare(String((_a = item.params) === null || _a === void 0 ? void 0 : _a[0]) || '', period);
        var isPeriodInparamsSmaller = compareResult && compareResult < 0; // !compareResult代表输入的时间粒度无效

        if (!compareResult || isPeriodInparamsSmaller) {
          item.params = [period];
        }

        return query;
      }
    }

    return query;
  };
  /**
   * @param pre_period 粒度
   * @param period 粒度
   * @return 负数代表小于；0代表=；正数代表大于; null代表无效
   */


  RUMServiceDataSource.prototype.periodCompare = function (pre_period, period) {
    var units = ['s', 'm', 'h', 'd'];
    var reg = new RegExp("(^\\d+)([".concat(units.join(''), "]$)"));
    var pre = reg.exec(pre_period);
    var per = reg.exec(period);

    if (!pre || !per) {
      return null;
    }

    if (units.indexOf(pre[2]) - units.indexOf(per[2])) {
      return units.indexOf(pre[2]) - units.indexOf(per[2]);
    }

    return Number(pre[1]) - Number(per[1]);
  };

  RUMServiceDataSource.prototype.testDatasource = function () {
    if (!this.instanceSettings.jsonData['RUMServiceEnabled']) {
      return null;
    }

    var queryBuilder = new _query_builder__WEBPACK_IMPORTED_MODULE_9__["RUMQueryBuilder"]({
      measurement: '',
      tags: []
    }, '');
    var query = queryBuilder.buildExploreQuery('MEASUREMENTS');
    return this._seriesQuery(query).toPromise().then(function (res) {
      var error = Object(lodash__WEBPACK_IMPORTED_MODULE_0__["get"])(res, 'data.Response.Error');

      if (error) {
        return {
          status: 'error',
          message: error === null || error === void 0 ? void 0 : error.Message
        };
      }

      return {
        status: 'success',
        message: 'Data source is working'
      };
    })["catch"](function (err) {
      return {
        status: 'error',
        message: err.message
      };
    });
  };

  return RUMServiceDataSource;
}(_grafana_data__WEBPACK_IMPORTED_MODULE_4__["DataSourceApi"]);

/* harmony default export */ __webpack_exports__["default"] = (RUMServiceDataSource);

/***/ }),

/***/ "./datasource/rum-service/RUMServiceQueryEditor.tsx":
/*!**********************************************************!*\
  !*** ./datasource/rum-service/RUMServiceQueryEditor.tsx ***!
  \**********************************************************/
/*! exports provided: RUMServiceQueryEditor */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RUMServiceQueryEditor", function() { return RUMServiceQueryEditor; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var emotion__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! emotion */ "emotion");
/* harmony import */ var emotion__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(emotion__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @grafana/ui */ "@grafana/ui");
/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_grafana_ui__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _grafana_runtime__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @grafana/runtime */ "@grafana/runtime");
/* harmony import */ var _grafana_runtime__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_grafana_runtime__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _RUMMetadataQuery__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./RUMMetadataQuery */ "./datasource/rum-service/RUMMetadataQuery.ts");
/* harmony import */ var _queryUtils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./queryUtils */ "./datasource/rum-service/queryUtils.ts");
/* harmony import */ var _common_partListUtils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./common/partListUtils */ "./datasource/rum-service/common/partListUtils.ts");
/* harmony import */ var _components_SegmentSection__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./components/SegmentSection */ "./datasource/rum-service/components/SegmentSection.tsx");
/* harmony import */ var _components_FromSection__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./components/FromSection */ "./datasource/rum-service/components/FromSection.tsx");
/* harmony import */ var _components_TagsSection__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./components/TagsSection */ "./datasource/rum-service/components/TagsSection.tsx");
/* harmony import */ var _components_PartListSection__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./components/PartListSection */ "./datasource/rum-service/components/PartListSection.tsx");
/* harmony import */ var _components_InputSection__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./components/InputSection */ "./datasource/rum-service/components/InputSection.tsx");
/* harmony import */ var _components_OrderByTimeSection__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./components/OrderByTimeSection */ "./datasource/rum-service/components/OrderByTimeSection.tsx");
/* harmony import */ var _components_FormatAsSection__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./components/FormatAsSection */ "./datasource/rum-service/components/FormatAsSection.tsx");
/* harmony import */ var _common_useUniqueId__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./common/useUniqueId */ "./datasource/rum-service/common/useUniqueId.ts");
/* harmony import */ var _common_constants__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./common/constants */ "./datasource/rum-service/common/constants.ts");
/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../types */ "./datasource/types.ts");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! lodash */ "lodash");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_17___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_17__);
var __makeTemplateObject = undefined && undefined.__makeTemplateObject || function (cooked, raw) {
  if (Object.defineProperty) {
    Object.defineProperty(cooked, "raw", {
      value: raw
    });
  } else {
    cooked.raw = raw;
  }

  return cooked;
};

var __assign = undefined && undefined.__assign || function () {
  __assign = Object.assign || function (t) {
    for (var s, i = 1, n = arguments.length; i < n; i++) {
      s = arguments[i];

      for (var p in s) {
        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
      }
    }

    return t;
  };

  return __assign.apply(this, arguments);
};

var __spreadArray = undefined && undefined.__spreadArray || function (to, from, pack) {
  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {
    if (ar || !(i in from)) {
      if (!ar) ar = Array.prototype.slice.call(from, 0, i);
      ar[i] = from[i];
    }
  }
  return to.concat(ar || Array.prototype.slice.call(from));
};




















function getTemplateVariableOptions() {
  return Object(_grafana_runtime__WEBPACK_IMPORTED_MODULE_3__["getTemplateSrv"])().getVariables() // we make them regex-params, i'm not 100% sure why.
  // probably because this way multi-value variables work ok too.
  .map(function (v) {
    return "/^$".concat(v.name, "$/");
  });
} // helper function to make it easy to call this from the widget-render-code


function withTemplateVariableOptions(optionsPromise) {
  return optionsPromise.then(function (options) {
    return __spreadArray(__spreadArray([], getTemplateVariableOptions(), true), options, true);
  });
}

function filterTags(parts, allTagKeys) {
  return parts.filter(function (t) {
    return allTagKeys.has(t.key);
  });
}

var RUMServiceQueryEditor = react__WEBPACK_IMPORTED_MODULE_0___default.a.memo(function (props) {
  var _a, _b, _c, _d;

  var uniqueId = Object(_common_useUniqueId__WEBPACK_IMPORTED_MODULE_14__["useUniqueId"])();
  var formatAsId = "rum-qe-format-as-".concat(uniqueId);
  var orderByTimeId = "rum-qe-order-by".concat(uniqueId);
  var styles = Object(_grafana_ui__WEBPACK_IMPORTED_MODULE_2__["useStyles"])(getStyles);
  var datasource = props.datasource,
      onChange = props.onChange,
      queryInfo = props.query;
  var query = Object(_queryUtils__WEBPACK_IMPORTED_MODULE_5__["normalizeQuery"])(queryInfo.RUMServiceParams || Object(lodash__WEBPACK_IMPORTED_MODULE_17__["clone"])(_types__WEBPACK_IMPORTED_MODULE_16__["defaultQueryInfo"].RUMServiceParams));
  var measurement = query.measurement,
      policy = query.policy;
  Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
    if (!queryInfo.RUMServiceParams) {
      onChange(__assign(__assign({}, queryInfo), {
        RUMServiceParams: Object(lodash__WEBPACK_IMPORTED_MODULE_17__["clone"])(_types__WEBPACK_IMPORTED_MODULE_16__["defaultQueryInfo"].RUMServiceParams)
      }));
    }
  }, [onChange, queryInfo]);
  var allTagKeys = Object(react__WEBPACK_IMPORTED_MODULE_0__["useMemo"])(function () {
    return Object(_RUMMetadataQuery__WEBPACK_IMPORTED_MODULE_4__["getTagKeysForMeasurementAndTags"])(measurement, policy, [], datasource).then(function (tags) {
      return new Set(tags);
    })["catch"](function (err) {
      console.error('getTagKeysForMeasurementAndTags', err);
      return new Set('');
    });
  }, [measurement, policy, datasource]);
  var selectLists = Object(react__WEBPACK_IMPORTED_MODULE_0__["useMemo"])(function () {
    var _a;

    var dynamicSelectPartOptions = new Map([['field_0', function () {
      return measurement !== undefined ? Object(_RUMMetadataQuery__WEBPACK_IMPORTED_MODULE_4__["getFieldKeysForMeasurement"])(measurement, policy, datasource) : Promise.resolve([]);
    }]]);
    return ((_a = query.select) !== null && _a !== void 0 ? _a : []).map(function (sel) {
      return Object(_common_partListUtils__WEBPACK_IMPORTED_MODULE_6__["makePartList"])(sel, dynamicSelectPartOptions);
    });
  }, [measurement, policy, query.select, datasource]); // the following function is not complicated enough to memoize, but it's result
  // is used in both memoized and un-memoized parts, so we have no choice

  var getTagKeys = Object(react__WEBPACK_IMPORTED_MODULE_0__["useMemo"])(function () {
    return function () {
      return allTagKeys.then(function (keys) {
        var _a;

        return Object(_RUMMetadataQuery__WEBPACK_IMPORTED_MODULE_4__["getTagKeysForMeasurementAndTags"])(measurement, policy, filterTags((_a = query.tags) !== null && _a !== void 0 ? _a : [], keys), datasource);
      });
    };
  }, [measurement, policy, query.tags, datasource, allTagKeys]);
  var groupByList = Object(react__WEBPACK_IMPORTED_MODULE_0__["useMemo"])(function () {
    var _a;

    var dynamicGroupByPartOptions = new Map([['tag_0', getTagKeys]]);
    return Object(_common_partListUtils__WEBPACK_IMPORTED_MODULE_6__["makePartList"])((_a = query.groupBy) !== null && _a !== void 0 ? _a : [], dynamicGroupByPartOptions);
  }, [getTagKeys, query.groupBy]);

  var onAppliedChange = function onAppliedChange(newQuery) {
    props.onChange(__assign(__assign({}, props.query), {
      RUMServiceParams: newQuery
    }));
    props.onRunQuery();
  };

  var handleFromSectionChange = function handleFromSectionChange(p, m) {
    onAppliedChange(__assign(__assign({}, query), {
      policy: p,
      measurement: m
    }));
  };

  var handleTagsSectionChange = function handleTagsSectionChange(tags) {
    // we set empty-arrays to undefined
    onAppliedChange(__assign(__assign({}, query), {
      tags: tags.length === 0 ? undefined : tags
    }));
  };

  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", null, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_components_SegmentSection__WEBPACK_IMPORTED_MODULE_7__["SegmentSection"], {
    label: "FROM",
    fill: true
  }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_components_FromSection__WEBPACK_IMPORTED_MODULE_8__["FromSection"], {
    policy: policy,
    measurement: measurement,
    getPolicyOptions: function getPolicyOptions() {
      return Object(_RUMMetadataQuery__WEBPACK_IMPORTED_MODULE_4__["getAllPolicies"])(datasource);
    },
    getMeasurementOptions: function getMeasurementOptions(filter) {
      return withTemplateVariableOptions(allTagKeys.then(function (keys) {
        var _a;

        return Object(_RUMMetadataQuery__WEBPACK_IMPORTED_MODULE_4__["getAllMeasurementsForTags"])(filter === '' ? undefined : filter, filterTags((_a = query.tags) !== null && _a !== void 0 ? _a : [], keys), datasource);
      }));
    },
    onChange: handleFromSectionChange
  }), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_2__["InlineLabel"], {
    width: "auto",
    className: styles.inlineLabel
  }, "WHERE"), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_components_TagsSection__WEBPACK_IMPORTED_MODULE_9__["TagsSection"], {
    tags: (_a = query.tags) !== null && _a !== void 0 ? _a : [],
    onChange: handleTagsSectionChange,
    getTagKeyOptions: getTagKeys,
    getTagValueOptions: function getTagValueOptions(key) {
      return withTemplateVariableOptions(allTagKeys.then(function (keys) {
        var _a;

        return Object(_RUMMetadataQuery__WEBPACK_IMPORTED_MODULE_4__["getTagValues"])(key, measurement, policy, filterTags((_a = query.tags) !== null && _a !== void 0 ? _a : [], keys), datasource);
      }));
    }
  })), selectLists.map(function (sel, index) {
    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_components_SegmentSection__WEBPACK_IMPORTED_MODULE_7__["SegmentSection"], {
      key: index,
      label: index === 0 ? 'SELECT' : '',
      fill: true
    }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_components_PartListSection__WEBPACK_IMPORTED_MODULE_10__["PartListSection"], {
      parts: sel,
      getNewPartOptions: function getNewPartOptions() {
        return Promise.resolve(Object(_common_partListUtils__WEBPACK_IMPORTED_MODULE_6__["getNewSelectPartOptions"])());
      },
      onChange: function onChange(partIndex, newParams) {
        var newQuery = Object(_queryUtils__WEBPACK_IMPORTED_MODULE_5__["changeSelectPart"])(query, index, partIndex, newParams);
        onAppliedChange(newQuery);
      },
      onAddNewPart: function onAddNewPart(type) {
        onAppliedChange(Object(_queryUtils__WEBPACK_IMPORTED_MODULE_5__["addNewSelectPart"])(query, type, index));
      },
      onRemovePart: function onRemovePart(partIndex) {
        onAppliedChange(Object(_queryUtils__WEBPACK_IMPORTED_MODULE_5__["removeSelectPart"])(query, partIndex, index));
      }
    }));
  }), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_components_SegmentSection__WEBPACK_IMPORTED_MODULE_7__["SegmentSection"], {
    label: "GROUP BY",
    fill: true
  }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_components_PartListSection__WEBPACK_IMPORTED_MODULE_10__["PartListSection"], {
    parts: groupByList,
    getNewPartOptions: function getNewPartOptions() {
      return Object(_common_partListUtils__WEBPACK_IMPORTED_MODULE_6__["getNewGroupByPartOptions"])(query, getTagKeys);
    },
    onChange: function onChange(partIndex, newParams) {
      var newQuery = Object(_queryUtils__WEBPACK_IMPORTED_MODULE_5__["changeGroupByPart"])(query, partIndex, newParams);
      onAppliedChange(newQuery);
    },
    onAddNewPart: function onAddNewPart(type) {
      onAppliedChange(Object(_queryUtils__WEBPACK_IMPORTED_MODULE_5__["addNewGroupByPart"])(query, type));
    },
    onRemovePart: function onRemovePart(partIndex) {
      onAppliedChange(Object(_queryUtils__WEBPACK_IMPORTED_MODULE_5__["removeGroupByPart"])(query, partIndex));
    }
  })), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_components_SegmentSection__WEBPACK_IMPORTED_MODULE_7__["SegmentSection"], {
    label: "TIMEZONE",
    fill: true
  }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_components_InputSection__WEBPACK_IMPORTED_MODULE_11__["InputSection"], {
    placeholder: "(optional)",
    value: query.tz,
    onChange: function onChange(tz) {
      onAppliedChange(__assign(__assign({}, query), {
        tz: tz
      }));
    }
  }), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_2__["InlineLabel"], {
    htmlFor: orderByTimeId,
    width: "auto",
    className: styles.inlineLabel
  }, "ORDER BY TIME"), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_components_OrderByTimeSection__WEBPACK_IMPORTED_MODULE_12__["OrderByTimeSection"], {
    inputId: orderByTimeId,
    value: query.orderByTime === 'DESC' ? 'DESC' : 'ASC'
    /* FIXME: make this shared with RUM_query_model */
    ,
    onChange: function onChange(v) {
      onAppliedChange(__assign(__assign({}, query), {
        orderByTime: v
      }));
    }
  })), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_components_SegmentSection__WEBPACK_IMPORTED_MODULE_7__["SegmentSection"], {
    label: "LIMIT",
    fill: true
  }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_components_InputSection__WEBPACK_IMPORTED_MODULE_11__["InputSection"], {
    placeholder: "(optional)",
    value: (_b = query.limit) === null || _b === void 0 ? void 0 : _b.toString(),
    onChange: function onChange(limit) {
      onAppliedChange(__assign(__assign({}, query), {
        limit: limit
      }));
    }
  }), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_2__["InlineLabel"], {
    width: "auto",
    className: styles.inlineLabel
  }, "SLIMIT"), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_components_InputSection__WEBPACK_IMPORTED_MODULE_11__["InputSection"], {
    placeholder: "(optional)",
    value: (_c = query.slimit) === null || _c === void 0 ? void 0 : _c.toString(),
    onChange: function onChange(slimit) {
      onAppliedChange(__assign(__assign({}, query), {
        slimit: slimit
      }));
    }
  })), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_components_SegmentSection__WEBPACK_IMPORTED_MODULE_7__["SegmentSection"], {
    htmlFor: formatAsId,
    label: "FORMAT AS",
    fill: true
  }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_components_FormatAsSection__WEBPACK_IMPORTED_MODULE_13__["FormatAsSection"], {
    inputId: formatAsId,
    format: (_d = query.resultFormat) !== null && _d !== void 0 ? _d : _common_constants__WEBPACK_IMPORTED_MODULE_15__["DEFAULT_RESULT_FORMAT"],
    onChange: function onChange(format) {
      onAppliedChange(__assign(__assign({}, query), {
        resultFormat: format
      }));
    }
  }), query.resultFormat !== 'table' && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment, null, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_2__["InlineLabel"], {
    width: "auto",
    className: styles.inlineLabel
  }, "ALIAS"), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_components_InputSection__WEBPACK_IMPORTED_MODULE_11__["InputSection"], {
    isWide: true,
    placeholder: "Naming pattern",
    value: query.alias,
    onChange: function onChange(alias) {
      onAppliedChange(__assign(__assign({}, query), {
        alias: alias
      }));
    }
  }))));
});

function getStyles(theme) {
  return {
    inlineLabel: Object(emotion__WEBPACK_IMPORTED_MODULE_1__["css"])(templateObject_1 || (templateObject_1 = __makeTemplateObject(["\n      color: #33a2e5;\n    "], ["\n      color: #33a2e5;\n    "])))
  };
}

RUMServiceQueryEditor.displayName = 'RUMServiceQueryEditor';
var templateObject_1;

/***/ }),

/***/ "./datasource/rum-service/RUM_query_model.ts":
/*!***************************************************!*\
  !*** ./datasource/rum-service/RUM_query_model.ts ***!
  \***************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lodash */ "lodash");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _query_part__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./query_part */ "./datasource/rum-service/query_part.ts");
/* harmony import */ var grafana_app_core_utils_kbn__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! grafana/app/core/utils/kbn */ "grafana/app/core/utils/kbn");
/* harmony import */ var grafana_app_core_utils_kbn__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(grafana_app_core_utils_kbn__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../types */ "./datasource/types.ts");





var RUMQueryModel =
/** @class */
function () {
  RUMQueryModel.$inject = ["target", "templateSrv", "scopedVars"];

  /** @ngInject */
  function RUMQueryModel(target, templateSrv, scopedVars) {
    this.selectModels = [];
    this.target = target;
    this.templateSrv = templateSrv;
    this.scopedVars = scopedVars;
    target.policy = target.policy || _types__WEBPACK_IMPORTED_MODULE_3__["defaultQueryInfo"].RUMServiceParams.policy;
    target.resultFormat = target.resultFormat || _types__WEBPACK_IMPORTED_MODULE_3__["defaultQueryInfo"].RUMServiceParams.resultFormat;
    target.orderByTime = target.orderByTime || _types__WEBPACK_IMPORTED_MODULE_3__["defaultQueryInfo"].RUMServiceParams.orderByTime;
    target.tags = target.tags || Object(lodash__WEBPACK_IMPORTED_MODULE_0__["cloneDeep"])(_types__WEBPACK_IMPORTED_MODULE_3__["defaultQueryInfo"].RUMServiceParams.tags);
    target.groupBy = target.groupBy || Object(lodash__WEBPACK_IMPORTED_MODULE_0__["cloneDeep"])(_types__WEBPACK_IMPORTED_MODULE_3__["defaultQueryInfo"].RUMServiceParams.groupBy);
    target.select = target.select || Object(lodash__WEBPACK_IMPORTED_MODULE_0__["cloneDeep"])(_types__WEBPACK_IMPORTED_MODULE_3__["defaultQueryInfo"].RUMServiceParams.select);
    this.updateProjection();
  }

  RUMQueryModel.prototype.updateProjection = function () {
    this.selectModels = Object(lodash__WEBPACK_IMPORTED_MODULE_0__["map"])(this.target.select, function (parts) {
      return Object(lodash__WEBPACK_IMPORTED_MODULE_0__["map"])(parts, _query_part__WEBPACK_IMPORTED_MODULE_1__["default"].create);
    });
    this.groupByParts = Object(lodash__WEBPACK_IMPORTED_MODULE_0__["map"])(this.target.groupBy, _query_part__WEBPACK_IMPORTED_MODULE_1__["default"].create);
  };

  RUMQueryModel.prototype.updatePersistedParts = function () {
    this.target.select = Object(lodash__WEBPACK_IMPORTED_MODULE_0__["map"])(this.selectModels, function (selectParts) {
      return Object(lodash__WEBPACK_IMPORTED_MODULE_0__["map"])(selectParts, function (part) {
        return {
          type: part.def.type,
          params: part.params
        };
      });
    });
  };

  RUMQueryModel.prototype.hasGroupByTime = function () {
    return Object(lodash__WEBPACK_IMPORTED_MODULE_0__["find"])(this.target.groupBy, function (g) {
      return g.type === 'time';
    });
  };

  RUMQueryModel.prototype.hasFill = function () {
    return Object(lodash__WEBPACK_IMPORTED_MODULE_0__["find"])(this.target.groupBy, function (g) {
      return g.type === 'fill';
    });
  };

  RUMQueryModel.prototype.addGroupBy = function (value) {
    var stringParts = value.match(/^(\w+)\((.*)\)$/);

    if (!stringParts || !this.target.groupBy) {
      return;
    }

    var typePart = stringParts[1];
    var arg = stringParts[2];
    var partModel = _query_part__WEBPACK_IMPORTED_MODULE_1__["default"].create({
      type: typePart,
      params: [arg]
    });
    var partCount = this.target.groupBy.length;

    if (partCount === 0) {
      this.target.groupBy.push(partModel.part);
    } else if (typePart === 'time') {
      this.target.groupBy.splice(0, 0, partModel.part);
    } else if (typePart === 'tag') {
      if (this.target.groupBy[partCount - 1].type === 'fill') {
        this.target.groupBy.splice(partCount - 1, 0, partModel.part);
      } else {
        this.target.groupBy.push(partModel.part);
      }
    } else {
      this.target.groupBy.push(partModel.part);
    }

    this.updateProjection();
  };

  RUMQueryModel.prototype.removeGroupByPart = function (part, index) {
    var categories = _query_part__WEBPACK_IMPORTED_MODULE_1__["default"].getCategories();

    if (part.def.type === 'time') {
      // remove fill
      this.target.groupBy = Object(lodash__WEBPACK_IMPORTED_MODULE_0__["filter"])(this.target.groupBy, function (g) {
        return g.type !== 'fill';
      }); // remove aggregations

      this.target.select = Object(lodash__WEBPACK_IMPORTED_MODULE_0__["map"])(this.target.select, function (s) {
        return Object(lodash__WEBPACK_IMPORTED_MODULE_0__["filter"])(s, function (part) {
          var partModel = _query_part__WEBPACK_IMPORTED_MODULE_1__["default"].create(part);

          if (partModel.def.category === categories.Aggregations) {
            return false;
          }

          if (partModel.def.category === categories.Selectors) {
            return false;
          }

          return true;
        });
      });
    }

    this.target.groupBy.splice(index, 1);
    this.updateProjection();
  };

  RUMQueryModel.prototype.removeSelect = function (index) {
    this.target.select.splice(index, 1);
    this.updateProjection();
  };

  RUMQueryModel.prototype.removeSelectPart = function (selectParts, part) {
    // if we remove the field remove the whole statement
    if (part.def.type === 'field') {
      if (this.selectModels.length > 1) {
        var modelsIndex = Object(lodash__WEBPACK_IMPORTED_MODULE_0__["indexOf"])(this.selectModels, selectParts);
        this.selectModels.splice(modelsIndex, 1);
      }
    } else {
      var partIndex = Object(lodash__WEBPACK_IMPORTED_MODULE_0__["indexOf"])(selectParts, part);
      selectParts.splice(partIndex, 1);
    }

    this.updatePersistedParts();
  };

  RUMQueryModel.prototype.addSelectPart = function (selectParts, type) {
    var partModel = _query_part__WEBPACK_IMPORTED_MODULE_1__["default"].create({
      type: type
    });
    partModel.def.addStrategy(selectParts, partModel, this);
    this.updatePersistedParts();
  };

  RUMQueryModel.prototype.getMeasurementAndPolicy = function (interpolate) {
    var policy = this.target.policy;
    var measurement = this.target.measurement || 'measurement';

    if (!measurement.match('^/.*/$')) {
      measurement = '"' + measurement + '"';
    } else if (interpolate) {
      measurement = this.templateSrv.replace(measurement, this.scopedVars, 'regex');
    }

    if (policy !== 'default') {
      policy = '"' + this.target.policy + '".';
    } else {
      policy = '';
    }

    return policy + measurement;
  };

  RUMQueryModel.prototype.interpolateQueryStr = function (value, variable, defaultFormatFn) {
    // if no multi or include all do not regexEscape
    if (!variable.multi && !variable.includeAll) {
      return value;
    }

    if (typeof value === 'string') {
      return grafana_app_core_utils_kbn__WEBPACK_IMPORTED_MODULE_2___default.a.regexEscape(value);
    }

    var escapedValues = Object(lodash__WEBPACK_IMPORTED_MODULE_0__["map"])(value, grafana_app_core_utils_kbn__WEBPACK_IMPORTED_MODULE_2___default.a.regexEscape);
    return '(' + escapedValues.join('|') + ')';
  };

  RUMQueryModel.prototype.render = function (interpolate) {
    var _this = this;

    var target = this.target;

    if (target.rawQuery) {
      if (interpolate) {
        return this.templateSrv.replace(target.query, this.scopedVars, this.interpolateQueryStr);
      } else {
        return target.query;
      }
    }

    var query = 'select ';
    var i;
    var y;

    for (i = 0; i < this.selectModels.length; i++) {
      var parts = this.selectModels[i];
      var selectText = '';

      for (y = 0; y < parts.length; y++) {
        var part = parts[y];
        selectText = part.render(selectText);
      }

      if (i > 0) {
        query += ', ';
      }

      query += selectText;
    }

    query += ' from ' + this.getMeasurementAndPolicy(interpolate) + ' where ';
    var conditions = Object(lodash__WEBPACK_IMPORTED_MODULE_0__["map"])(target.tags, function (tag, index) {
      return _this.renderTagCondition(tag, index, interpolate);
    });

    if (conditions.length > 0) {
      query += '(' + conditions.join(' ') + ') and ';
    }

    query += '$timeFilter';
    var groupBySection = '';

    for (i = 0; i < this.groupByParts.length; i++) {
      var part = this.groupByParts[i];

      if (i > 0) {
        // for some reason fill has no separator
        groupBySection += part.def.type === 'fill' ? ' ' : ', ';
      }

      groupBySection += part.render('');
    }

    if (groupBySection.length) {
      query += ' group by ' + groupBySection;
    }

    if (target.fill) {
      query += ' fill(' + target.fill + ')';
    }

    if (target.orderByTime === 'DESC') {
      query += ' order by time desc';
    }

    if (target.limit) {
      query += ' limit ' + target.limit;
    }

    if (target.slimit) {
      query += ' slimit ' + target.slimit;
    }

    if (target.tz) {
      query += " tz('" + target.tz + "')";
    }

    return query;
  };

  RUMQueryModel.prototype.renderAdhocFilters = function (filters) {
    var _this = this;

    var conditions = Object(lodash__WEBPACK_IMPORTED_MODULE_0__["map"])(filters, function (tag, index) {
      return _this.renderTagCondition(tag, index, true);
    });
    return conditions.join(' ');
  };

  RUMQueryModel.prototype.renderTagCondition = function (tag, index, interpolate) {
    // FIXME: merge this function with query_builder/renderTagCondition
    var str = '';
    var operator = tag.operator;
    var value = tag.value;

    if (index > 0) {
      str = (tag.condition.toLowerCase() || 'and') + ' ';
    }

    if (!operator) {
      if (/^\/.*\/$/.test(value)) {
        operator = '=~';
      } else {
        operator = '=';
      }
    } // quote value unless regex


    if (operator !== '=~' && operator !== '!~') {
      if (interpolate) {
        value = this.templateSrv.replace(value, this.scopedVars);
      }

      if (operator !== '>' && operator !== '<') {
        value = "'" + value.replace(/\\/g, '\\\\').replace(/\'/g, "\\'") + "'";
      }
    } else if (interpolate) {
      value = this.templateSrv.replace(value, this.scopedVars, 'regex');
    }

    return str + '"' + tag.key + '" ' + operator + ' ' + value;
  };

  return RUMQueryModel;
}();

/* harmony default export */ __webpack_exports__["default"] = (RUMQueryModel);

/***/ }),

/***/ "./datasource/rum-service/RUM_series.ts":
/*!**********************************************!*\
  !*** ./datasource/rum-service/RUM_series.ts ***!
  \**********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lodash */ "lodash");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var grafana_app_core_table_model__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! grafana/app/core/table_model */ "grafana/app/core/table_model");
/* harmony import */ var grafana_app_core_table_model__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(grafana_app_core_table_model__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @grafana/data */ "@grafana/data");
/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_grafana_data__WEBPACK_IMPORTED_MODULE_2__);




var RUMSeries =
/** @class */
function () {
  function RUMSeries(options) {
    this.series = options.series;
    this.alias = options.alias;
    this.annotation = options.annotation;
    this.meta = options.meta;
    this.refId = options.refId;
  }

  RUMSeries.prototype.getTimeSeries = function () {
    var _this = this;

    var output = [];
    var i;
    var j;

    if (this.series.length === 0) {
      return output;
    }

    Object(lodash__WEBPACK_IMPORTED_MODULE_0__["each"])(this.series, function (series) {
      var columns = series.columns.length;
      var tags = Object(lodash__WEBPACK_IMPORTED_MODULE_0__["map"])(series.tags, function (value, key) {
        return key + ': ' + value;
      });

      for (j = 1; j < columns; j++) {
        var seriesName = series.name;
        var columnName = series.columns[j];

        if (columnName !== 'value') {
          seriesName = seriesName + '.' + columnName;
        }

        if (_this.alias) {
          seriesName = _this._getSeriesName(series, j);
        } else if (series.tags) {
          seriesName = seriesName + ' {' + tags.join(', ') + '}';
        }

        var datapoints = [];

        if (series.values) {
          for (i = 0; i < series.values.length; i++) {
            datapoints[i] = [series.values[i][j], series.values[i][0]];
          }
        }

        output.push({
          title: seriesName,
          target: seriesName,
          datapoints: datapoints,
          tags: series.tags,
          meta: _this.meta,
          refId: _this.refId
        });
      }
    });
    return output;
  };

  RUMSeries.prototype._getSeriesName = function (series, index) {
    var regex = /\$(\w+)|\[\[([\s\S]+?)\]\]/g;
    var segments = series.name.split('.');
    return this.alias.replace(regex, function (match, g1, g2) {
      var _a;

      var group = g1 || g2;
      var segIndex = parseInt(group, 10);

      if (group === 'm' || group === 'measurement') {
        return series.name;
      }

      if (group === 'col') {
        return series.columns[index];
      }

      if (!isNaN(segIndex)) {
        return (_a = segments[segIndex]) !== null && _a !== void 0 ? _a : match;
      }

      if (group.indexOf('tag_') !== 0) {
        return match;
      }

      var tag = group.replace('tag_', '');

      if (!series.tags) {
        return match;
      }

      return series.tags[tag];
    });
  };

  RUMSeries.prototype.getAnnotations = function () {
    var _this = this;

    var list = [];
    Object(lodash__WEBPACK_IMPORTED_MODULE_0__["each"])(this.series, function (series) {
      var titleCol = null;
      var timeCol = null;
      var timeEndCol = null;
      var tagsCol = [];
      var textCol = null;
      Object(lodash__WEBPACK_IMPORTED_MODULE_0__["each"])(series.columns, function (column, index) {
        if (column === 'time') {
          timeCol = index;
          return;
        }

        if (column === 'sequence_number') {
          return;
        }

        if (column === _this.annotation.titleColumn) {
          titleCol = index;
          return;
        }

        if (Object(lodash__WEBPACK_IMPORTED_MODULE_0__["includes"])((_this.annotation.tagsColumn || '').replace(' ', '').split(','), column)) {
          tagsCol.push(index);
          return;
        }

        if (column === _this.annotation.textColumn) {
          textCol = index;
          return;
        }

        if (column === _this.annotation.timeEndColumn) {
          timeEndCol = index;
          return;
        } // legacy case


        if (!titleCol && textCol !== index) {
          titleCol = index;
        }
      });
      Object(lodash__WEBPACK_IMPORTED_MODULE_0__["each"])(series.values, function (value) {
        var data = {
          annotation: _this.annotation,
          time: Number(new Date(value[timeCol])),
          title: value[titleCol],
          timeEnd: value[timeEndCol],
          // Remove empty values, then split in different tags for comma separated values
          tags: Object(lodash__WEBPACK_IMPORTED_MODULE_0__["flatten"])(tagsCol.filter(function (t) {
            return value[t];
          }).map(function (t) {
            return value[t].split(',');
          })),
          text: value[textCol]
        };
        list.push(data);
      });
    });
    return list;
  };

  RUMSeries.prototype.getTable = function () {
    var table = new grafana_app_core_table_model__WEBPACK_IMPORTED_MODULE_1___default.a();
    var i;
    var j; // @ts-ignore

    table.refId = this.refId; // @ts-ignore

    table.meta = this.meta;

    if (this.series.length === 0) {
      return table;
    } // the order is:
    // - first the first item from the value-array (this is often (always?) the timestamp)
    // - then all the tag-values
    // - then the rest of the value-array
    //
    // we have to keep this order both in table.columns and table.rows


    Object(lodash__WEBPACK_IMPORTED_MODULE_0__["each"])(this.series, function (series, seriesIndex) {
      if (seriesIndex === 0) {
        var firstCol = series.columns[0]; // Check the first column's name, if it is `time`, we
        // mark it as having the type time

        var firstTableCol = firstCol === 'time' ? {
          text: 'Time',
          type: _grafana_data__WEBPACK_IMPORTED_MODULE_2__["FieldType"].time
        } : {
          text: firstCol
        };
        table.columns.push(firstTableCol);
        Object(lodash__WEBPACK_IMPORTED_MODULE_0__["each"])(Object(lodash__WEBPACK_IMPORTED_MODULE_0__["keys"])(series.tags), function (key) {
          table.columns.push({
            text: key
          });
        });

        for (j = 1; j < series.columns.length; j++) {
          table.columns.push({
            text: series.columns[j]
          });
        }
      }

      if (series.values) {
        for (i = 0; i < series.values.length; i++) {
          var values = series.values[i];
          var reordered = [values[0]];

          if (series.tags) {
            for (var key in series.tags) {
              if (series.tags.hasOwnProperty(key)) {
                reordered.push(series.tags[key]);
              }
            }
          }

          for (j = 1; j < values.length; j++) {
            reordered.push(values[j]);
          }

          table.rows.push(reordered);
        }
      }
    });
    return table;
  };

  return RUMSeries;
}();

/* harmony default export */ __webpack_exports__["default"] = (RUMSeries);

/***/ }),

/***/ "./datasource/rum-service/common/constants.ts":
/*!****************************************************!*\
  !*** ./datasource/rum-service/common/constants.ts ***!
  \****************************************************/
/*! exports provided: RESULT_FORMATS, DEFAULT_RESULT_FORMAT, ENABLE_MEASUREMENTS */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RESULT_FORMATS", function() { return RESULT_FORMATS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DEFAULT_RESULT_FORMAT", function() { return DEFAULT_RESULT_FORMAT; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ENABLE_MEASUREMENTS", function() { return ENABLE_MEASUREMENTS; });
var RESULT_FORMATS = [{
  label: 'Time series',
  value: 'time_series'
}, {
  label: 'Table',
  value: 'table'
}, {
  label: 'Logs',
  value: 'logs'
}];
var DEFAULT_RESULT_FORMAT = 'time_series';
var ENABLE_MEASUREMENTS = ['log_url_statistics', 'event_url_statistics', 'pv_url_statistics', 'user_event_user_event_unique', 'uv_project_unique', 'uv_page_unique', 'custom_url_info', 'custom_url_statistics', 'fetch_url_info', 'fetch_url_statistics', 'fetch_project_statistics', 'set_data_url_statistics', 'performance_page_statistics', 'performance_project_statistics', 'static_url_source', 'static_resource_statistics', 'static_project_statistics', 'webvitals_page_statistics', 'webvitals_project_statistics'];

/***/ }),

/***/ "./datasource/rum-service/common/partListUtils.ts":
/*!********************************************************!*\
  !*** ./datasource/rum-service/common/partListUtils.ts ***!
  \********************************************************/
/*! exports provided: getNewSelectPartOptions, getNewGroupByPartOptions, makePartList */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getNewSelectPartOptions", function() { return getNewSelectPartOptions; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getNewGroupByPartOptions", function() { return getNewGroupByPartOptions; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "makePartList", function() { return makePartList; });
/* harmony import */ var _RUM_query_model__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../RUM_query_model */ "./datasource/rum-service/RUM_query_model.ts");
/* harmony import */ var _unwrap__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./unwrap */ "./datasource/rum-service/common/unwrap.ts");
/* harmony import */ var _query_part__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../query_part */ "./datasource/rum-service/query_part.ts");
/* harmony import */ var _toSelectableValue__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./toSelectableValue */ "./datasource/rum-service/common/toSelectableValue.ts");
var __assign = undefined && undefined.__assign || function () {
  __assign = Object.assign || function (t) {
    for (var s, i = 1, n = arguments.length; i < n; i++) {
      s = arguments[i];

      for (var p in s) {
        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
      }
    }

    return t;
  };

  return __assign.apply(this, arguments);
};

var __awaiter = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {
  function adopt(value) {
    return value instanceof P ? value : new P(function (resolve) {
      resolve(value);
    });
  }

  return new (P || (P = Promise))(function (resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }

    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }

    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }

    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};

var __generator = undefined && undefined.__generator || function (thisArg, body) {
  var _ = {
    label: 0,
    sent: function sent() {
      if (t[0] & 1) throw t[1];
      return t[1];
    },
    trys: [],
    ops: []
  },
      f,
      y,
      t,
      g;
  return g = {
    next: verb(0),
    "throw": verb(1),
    "return": verb(2)
  }, typeof Symbol === "function" && (g[Symbol.iterator] = function () {
    return this;
  }), g;

  function verb(n) {
    return function (v) {
      return step([n, v]);
    };
  }

  function step(op) {
    if (f) throw new TypeError("Generator is already executing.");

    while (_) {
      try {
        if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
        if (y = 0, t) op = [op[0] & 2, t.value];

        switch (op[0]) {
          case 0:
          case 1:
            t = op;
            break;

          case 4:
            _.label++;
            return {
              value: op[1],
              done: false
            };

          case 5:
            _.label++;
            y = op[1];
            op = [0];
            continue;

          case 7:
            op = _.ops.pop();

            _.trys.pop();

            continue;

          default:
            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
              _ = 0;
              continue;
            }

            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
              _.label = op[1];
              break;
            }

            if (op[0] === 6 && _.label < t[1]) {
              _.label = t[1];
              t = op;
              break;
            }

            if (t && _.label < t[2]) {
              _.label = t[2];

              _.ops.push(op);

              break;
            }

            if (t[2]) _.ops.pop();

            _.trys.pop();

            continue;
        }

        op = body.call(thisArg, _);
      } catch (e) {
        op = [6, e];
        y = 0;
      } finally {
        f = t = 0;
      }
    }

    if (op[0] & 5) throw op[1];
    return {
      value: op[0] ? op[1] : void 0,
      done: true
    };
  }
};





function getNewSelectPartOptions() {
  var categories = _query_part__WEBPACK_IMPORTED_MODULE_2__["default"].getCategories();
  var options = [];
  var keys = Object.keys(categories);
  keys.forEach(function (key) {
    var children = categories[key].map(function (x) {
      return Object(_toSelectableValue__WEBPACK_IMPORTED_MODULE_3__["toSelectableValue"])(x.type);
    });
    options.push({
      label: key,
      options: children
    });
  });
  return options;
}
function getNewGroupByPartOptions(query, getTagKeys) {
  return __awaiter(this, void 0, Promise, function () {
    var tagKeys, queryCopy, model, options;
    return __generator(this, function (_a) {
      switch (_a.label) {
        case 0:
          return [4
          /*yield*/
          , getTagKeys()];

        case 1:
          tagKeys = _a.sent();
          queryCopy = __assign({}, query);
          model = new _RUM_query_model__WEBPACK_IMPORTED_MODULE_0__["default"](queryCopy);
          options = [];

          if (!model.hasFill()) {
            options.push(Object(_toSelectableValue__WEBPACK_IMPORTED_MODULE_3__["toSelectableValue"])('fill(null)'));
          }

          if (!model.hasGroupByTime()) {
            options.push(Object(_toSelectableValue__WEBPACK_IMPORTED_MODULE_3__["toSelectableValue"])('time($interval)'));
          }

          tagKeys.forEach(function (key) {
            options.push(Object(_toSelectableValue__WEBPACK_IMPORTED_MODULE_3__["toSelectableValue"])("tag(".concat(key, ")")));
          });
          return [2
          /*return*/
          , options];
      }
    });
  });
}

function getPartParams(part, dynamicParamOptions) {
  var _a; // NOTE: the way the system is constructed,
  // there always can only be one possible dynamic-lookup
  // field. in case of select it is the field,
  // in case of group-by it is the tag


  var def = _query_part__WEBPACK_IMPORTED_MODULE_2__["default"].create(part).def; // we switch the numbers to strings, it will work that way too,
  // and it makes the code simpler

  var paramValues = ((_a = part.params) !== null && _a !== void 0 ? _a : []).map(function (p) {
    return p.toString();
  });

  if (paramValues.length !== def.params.length) {
    throw new Error('Invalid query-segment');
  }

  return paramValues.map(function (val, index) {
    var defParam = def.params[index];

    if (defParam.dynamicLookup) {
      return {
        value: val,
        options: Object(_unwrap__WEBPACK_IMPORTED_MODULE_1__["unwrap"])(dynamicParamOptions.get("".concat(def.type, "_").concat(index)))
      };
    }

    if (defParam.options !== null || defParam.options !== undefined) {
      return {
        value: val,
        options: function options() {
          return Promise.resolve(defParam.options);
        }
      };
    }

    return {
      value: val,
      options: null
    };
  });
}

function makePartList(queryParts, dynamicParamOptions) {
  return queryParts.map(function (qp) {
    return {
      name: qp.type,
      params: getPartParams(qp, dynamicParamOptions)
    };
  });
}

/***/ }),

/***/ "./datasource/rum-service/common/tagUtils.ts":
/*!***************************************************!*\
  !*** ./datasource/rum-service/common/tagUtils.ts ***!
  \***************************************************/
/*! exports provided: getOperator, getCondition, adjustOperatorIfNeeded */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getOperator", function() { return getOperator; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getCondition", function() { return getCondition; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "adjustOperatorIfNeeded", function() { return adjustOperatorIfNeeded; });
function isRegex(text) {
  return /^\/.*\/$/.test(text);
} // FIXME: sync these to the query-string-generation-code
// probably it's in rum_query_model.ts


function getOperator(tag) {
  var _a;

  return (_a = tag.operator) !== null && _a !== void 0 ? _a : isRegex(tag.value) ? '=~' : '=';
} // FIXME: sync these to the query-string-generation-code
// probably it's in rum_query_model.ts

function getCondition(tag, isFirst) {
  var _a;

  return isFirst ? undefined : (_a = tag.condition) !== null && _a !== void 0 ? _a : 'AND';
}
function adjustOperatorIfNeeded(currentOperator, newTagValue) {
  var isCurrentOperatorRegex = currentOperator === '=~' || currentOperator === '!~';
  var isNewTagValueRegex = isRegex(newTagValue);

  if (isNewTagValueRegex) {
    return isCurrentOperatorRegex ? currentOperator : '=~';
  } else {
    return isCurrentOperatorRegex ? '=' : currentOperator;
  }
}

/***/ }),

/***/ "./datasource/rum-service/common/toSelectableValue.ts":
/*!************************************************************!*\
  !*** ./datasource/rum-service/common/toSelectableValue.ts ***!
  \************************************************************/
/*! exports provided: toSelectableValue */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "toSelectableValue", function() { return toSelectableValue; });
function toSelectableValue(t) {
  return {
    label: t,
    value: t
  };
}

/***/ }),

/***/ "./datasource/rum-service/common/unwrap.ts":
/*!*************************************************!*\
  !*** ./datasource/rum-service/common/unwrap.ts ***!
  \*************************************************/
/*! exports provided: unwrap */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "unwrap", function() { return unwrap; });
function unwrap(value) {
  if (value === null) {
    throw new Error('value must not be nullish');
  }

  return value;
}

/***/ }),

/***/ "./datasource/rum-service/common/useShadowedState.ts":
/*!***********************************************************!*\
  !*** ./datasource/rum-service/common/useShadowedState.ts ***!
  \***********************************************************/
/*! exports provided: useShadowedState */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "useShadowedState", function() { return useShadowedState; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_use__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react-use */ "../node_modules/react-use/esm/index.js");


function useShadowedState(outsideVal) {
  var _a = Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])(outsideVal),
      currentVal = _a[0],
      setCurrentVal = _a[1];

  var prevOutsideVal = Object(react_use__WEBPACK_IMPORTED_MODULE_1__["usePrevious"])(outsideVal);
  Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
    var isOutsideValChanged = prevOutsideVal !== outsideVal; // if the value changes from the outside, we accept it into the state
    // (we only set it if it is different from the current value)

    if (isOutsideValChanged && currentVal !== outsideVal) {
      setCurrentVal(outsideVal);
    }
  }, [outsideVal, currentVal, prevOutsideVal]);
  return [currentVal, setCurrentVal];
}

/***/ }),

/***/ "./datasource/rum-service/common/useUniqueId.ts":
/*!******************************************************!*\
  !*** ./datasource/rum-service/common/useUniqueId.ts ***!
  \******************************************************/
/*! exports provided: useUniqueId */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "useUniqueId", function() { return useUniqueId; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lodash */ "lodash");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_1__);


function useUniqueId() {
  // we need to lazy-init this ref.
  // otherwise we would call `uniqueId`
  // on every render. unfortunately
  // useRef does not have lazy-init builtin,
  // like useState does. we do it manually.
  var idRefLazy = Object(react__WEBPACK_IMPORTED_MODULE_0__["useRef"])(null);

  if (idRefLazy.current === null) {
    idRefLazy.current = Object(lodash__WEBPACK_IMPORTED_MODULE_1__["uniqueId"])();
  }

  return idRefLazy.current;
}

/***/ }),

/***/ "./datasource/rum-service/components/AddButton.tsx":
/*!*********************************************************!*\
  !*** ./datasource/rum-service/components/AddButton.tsx ***!
  \*********************************************************/
/*! exports provided: AddButton */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AddButton", function() { return AddButton; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _Seg__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Seg */ "./datasource/rum-service/components/Seg.tsx");
/* harmony import */ var _common_unwrap__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../common/unwrap */ "./datasource/rum-service/common/unwrap.ts");



var AddButton = function AddButton(_a) {
  var loadOptions = _a.loadOptions,
      allowCustomValue = _a.allowCustomValue,
      onAdd = _a.onAdd;
  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Seg__WEBPACK_IMPORTED_MODULE_1__["Seg"], {
    value: "+",
    loadOptions: loadOptions,
    allowCustomValue: allowCustomValue,
    onChange: function onChange(v) {
      onAdd(Object(_common_unwrap__WEBPACK_IMPORTED_MODULE_2__["unwrap"])(v.value));
    }
  });
};

/***/ }),

/***/ "./datasource/rum-service/components/FormatAsSection.tsx":
/*!***************************************************************!*\
  !*** ./datasource/rum-service/components/FormatAsSection.tsx ***!
  \***************************************************************/
/*! exports provided: FormatAsSection */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FormatAsSection", function() { return FormatAsSection; });
/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @grafana/ui */ "@grafana/ui");
/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_grafana_ui__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var emotion__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! emotion */ "emotion");
/* harmony import */ var emotion__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(emotion__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _common_unwrap__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../common/unwrap */ "./datasource/rum-service/common/unwrap.ts");
/* harmony import */ var _common_constants__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../common/constants */ "./datasource/rum-service/common/constants.ts");
/* harmony import */ var _styles__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./styles */ "./datasource/rum-service/components/styles.ts");






var className = Object(emotion__WEBPACK_IMPORTED_MODULE_1__["cx"])('width-8', _styles__WEBPACK_IMPORTED_MODULE_5__["paddingRightClass"]);
var FormatAsSection = function FormatAsSection(_a) {
  var format = _a.format,
      inputId = _a.inputId,
      _onChange = _a.onChange;
  return react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_0__["Select"], {
    inputId: inputId,
    className: className,
    onChange: function onChange(v) {
      _onChange(Object(_common_unwrap__WEBPACK_IMPORTED_MODULE_3__["unwrap"])(v.value));
    },
    value: format,
    options: _common_constants__WEBPACK_IMPORTED_MODULE_4__["RESULT_FORMATS"]
  });
};

/***/ }),

/***/ "./datasource/rum-service/components/FromSection.tsx":
/*!***********************************************************!*\
  !*** ./datasource/rum-service/components/FromSection.tsx ***!
  \***********************************************************/
/*! exports provided: FromSection */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FromSection", function() { return FromSection; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _Seg__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Seg */ "./datasource/rum-service/components/Seg.tsx");
/* harmony import */ var _common_toSelectableValue__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../common/toSelectableValue */ "./datasource/rum-service/common/toSelectableValue.ts");
var __awaiter = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {
  function adopt(value) {
    return value instanceof P ? value : new P(function (resolve) {
      resolve(value);
    });
  }

  return new (P || (P = Promise))(function (resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }

    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }

    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }

    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};

var __generator = undefined && undefined.__generator || function (thisArg, body) {
  var _ = {
    label: 0,
    sent: function sent() {
      if (t[0] & 1) throw t[1];
      return t[1];
    },
    trys: [],
    ops: []
  },
      f,
      y,
      t,
      g;
  return g = {
    next: verb(0),
    "throw": verb(1),
    "return": verb(2)
  }, typeof Symbol === "function" && (g[Symbol.iterator] = function () {
    return this;
  }), g;

  function verb(n) {
    return function (v) {
      return step([n, v]);
    };
  }

  function step(op) {
    if (f) throw new TypeError("Generator is already executing.");

    while (_) {
      try {
        if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
        if (y = 0, t) op = [op[0] & 2, t.value];

        switch (op[0]) {
          case 0:
          case 1:
            t = op;
            break;

          case 4:
            _.label++;
            return {
              value: op[1],
              done: false
            };

          case 5:
            _.label++;
            y = op[1];
            op = [0];
            continue;

          case 7:
            op = _.ops.pop();

            _.trys.pop();

            continue;

          default:
            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
              _ = 0;
              continue;
            }

            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
              _.label = op[1];
              break;
            }

            if (op[0] === 6 && _.label < t[1]) {
              _.label = t[1];
              t = op;
              break;
            }

            if (t && _.label < t[2]) {
              _.label = t[2];

              _.ops.push(op);

              break;
            }

            if (t[2]) _.ops.pop();

            _.trys.pop();

            continue;
        }

        op = body.call(thisArg, _);
      } catch (e) {
        op = [6, e];
        y = 0;
      } finally {
        f = t = 0;
      }
    }

    if (op[0] & 5) throw op[1];
    return {
      value: op[0] ? op[1] : void 0,
      done: true
    };
  }
};

var __spreadArray = undefined && undefined.__spreadArray || function (to, from, pack) {
  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {
    if (ar || !(i in from)) {
      if (!ar) ar = Array.prototype.slice.call(from, 0, i);
      ar[i] = from[i];
    }
  }
  return to.concat(ar || Array.prototype.slice.call(from));
};




var DEFAULT_POLICY = 'default';
var FromSection = function FromSection(_a) {
  var policy = _a.policy,
      measurement = _a.measurement,
      _onChange = _a.onChange,
      getPolicyOptions = _a.getPolicyOptions,
      getMeasurementOptions = _a.getMeasurementOptions;

  var handlePolicyLoadOptions = function handlePolicyLoadOptions() {
    return __awaiter(void 0, void 0, void 0, function () {
      var allPolicies, allPoliciesWithDefault;
      return __generator(this, function (_a) {
        switch (_a.label) {
          case 0:
            return [4
            /*yield*/
            , getPolicyOptions()];

          case 1:
            allPolicies = _a.sent();
            allPoliciesWithDefault = allPolicies.some(function (p) {
              return p === 'default';
            }) ? allPolicies : __spreadArray([DEFAULT_POLICY], allPolicies, true);
            return [2
            /*return*/
            , allPoliciesWithDefault.map(_common_toSelectableValue__WEBPACK_IMPORTED_MODULE_2__["toSelectableValue"])];
        }
      });
    });
  };

  var handleMeasurementLoadOptions = function handleMeasurementLoadOptions(filter) {
    return __awaiter(void 0, void 0, void 0, function () {
      var allMeasurements;
      return __generator(this, function (_a) {
        switch (_a.label) {
          case 0:
            return [4
            /*yield*/
            , getMeasurementOptions(filter)];

          case 1:
            allMeasurements = _a.sent();
            return [2
            /*return*/
            , allMeasurements.map(_common_toSelectableValue__WEBPACK_IMPORTED_MODULE_2__["toSelectableValue"])];
        }
      });
    });
  };

  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment, null, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Seg__WEBPACK_IMPORTED_MODULE_1__["Seg"], {
    allowCustomValue: true,
    value: policy !== null && policy !== void 0 ? policy : 'using default policy',
    loadOptions: handlePolicyLoadOptions,
    onChange: function onChange(v) {
      _onChange(v.value, measurement);
    }
  }), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Seg__WEBPACK_IMPORTED_MODULE_1__["Seg"], {
    allowCustomValue: true,
    value: measurement !== null && measurement !== void 0 ? measurement : 'select measurement',
    loadOptions: handleMeasurementLoadOptions,
    filterByLoadOptions: true,
    onChange: function onChange(v) {
      _onChange(policy, v.value);
    }
  }));
};

/***/ }),

/***/ "./datasource/rum-service/components/InputSection.tsx":
/*!************************************************************!*\
  !*** ./datasource/rum-service/components/InputSection.tsx ***!
  \************************************************************/
/*! exports provided: InputSection */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "InputSection", function() { return InputSection; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var emotion__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! emotion */ "emotion");
/* harmony import */ var emotion__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(emotion__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @grafana/ui */ "@grafana/ui");
/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_grafana_ui__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _common_useShadowedState__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../common/useShadowedState */ "./datasource/rum-service/common/useShadowedState.ts");
/* harmony import */ var _styles__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./styles */ "./datasource/rum-service/components/styles.ts");





var InputSection = function InputSection(_a) {
  var value = _a.value,
      onChange = _a.onChange,
      isWide = _a.isWide,
      placeholder = _a.placeholder;

  var _b = Object(_common_useShadowedState__WEBPACK_IMPORTED_MODULE_3__["useShadowedState"])(value),
      currentValue = _b[0],
      setCurrentValue = _b[1];

  var onBlur = function onBlur() {
    // we send empty-string as undefined
    var newValue = currentValue === '' ? undefined : currentValue;
    onChange(newValue);
  };

  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_2__["Input"], {
    placeholder: placeholder,
    className: Object(emotion__WEBPACK_IMPORTED_MODULE_1__["cx"])((isWide !== null && isWide !== void 0 ? isWide : false) ? 'width-14' : 'width-8', _styles__WEBPACK_IMPORTED_MODULE_4__["paddingRightClass"]),
    type: "text",
    spellCheck: false,
    onBlur: onBlur,
    onChange: function onChange(e) {
      setCurrentValue(e.currentTarget.value);
    },
    value: currentValue !== null && currentValue !== void 0 ? currentValue : ''
  });
};

/***/ }),

/***/ "./datasource/rum-service/components/OrderByTimeSection.tsx":
/*!******************************************************************!*\
  !*** ./datasource/rum-service/components/OrderByTimeSection.tsx ***!
  \******************************************************************/
/*! exports provided: OrderByTimeSection */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "OrderByTimeSection", function() { return OrderByTimeSection; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var emotion__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! emotion */ "emotion");
/* harmony import */ var emotion__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(emotion__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _common_unwrap__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../common/unwrap */ "./datasource/rum-service/common/unwrap.ts");
/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @grafana/ui */ "@grafana/ui");
/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_grafana_ui__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _styles__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./styles */ "./datasource/rum-service/components/styles.ts");





var OPTIONS = [{
  label: 'ascending',
  value: 'ASC'
}, {
  label: 'descending',
  value: 'DESC'
}];
var className = Object(emotion__WEBPACK_IMPORTED_MODULE_1__["cx"])('width-9', _styles__WEBPACK_IMPORTED_MODULE_4__["paddingRightClass"]);
var OrderByTimeSection = function OrderByTimeSection(_a) {
  var value = _a.value,
      _onChange = _a.onChange,
      inputId = _a.inputId;
  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_3__["Select"], {
    inputId: inputId,
    className: className,
    onChange: function onChange(v) {
      _onChange(Object(_common_unwrap__WEBPACK_IMPORTED_MODULE_2__["unwrap"])(v.value));
    },
    value: value,
    options: OPTIONS
  });
};

/***/ }),

/***/ "./datasource/rum-service/components/PartListSection.tsx":
/*!***************************************************************!*\
  !*** ./datasource/rum-service/components/PartListSection.tsx ***!
  \***************************************************************/
/*! exports provided: PartListSection */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PartListSection", function() { return PartListSection; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var emotion__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! emotion */ "emotion");
/* harmony import */ var emotion__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(emotion__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @grafana/ui */ "@grafana/ui");
/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_grafana_ui__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _Seg__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Seg */ "./datasource/rum-service/components/Seg.tsx");
/* harmony import */ var _common_unwrap__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../common/unwrap */ "./datasource/rum-service/common/unwrap.ts");
/* harmony import */ var _common_toSelectableValue__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../common/toSelectableValue */ "./datasource/rum-service/common/toSelectableValue.ts");
/* harmony import */ var _AddButton__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./AddButton */ "./datasource/rum-service/components/AddButton.tsx");








var renderRemovableNameMenuItems = function renderRemovableNameMenuItems(onClick) {
  return [{
    items: [{
      label: 'remove',
      onClick: onClick
    }]
  }];
};

var noRightMarginPaddingClass = Object(emotion__WEBPACK_IMPORTED_MODULE_1__["css"])({
  paddingRight: '0',
  marginRight: '0'
});

var RemovableName = function RemovableName(_a) {
  var name = _a.name,
      onRemove = _a.onRemove;
  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_2__["WithContextMenu"], {
    getContextMenuItems: function getContextMenuItems() {
      return renderRemovableNameMenuItems(onRemove);
    }
  }, function (_a) {
    var openMenu = _a.openMenu;
    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("button", {
      className: Object(emotion__WEBPACK_IMPORTED_MODULE_1__["cx"])('gf-form-label', noRightMarginPaddingClass),
      onClick: openMenu
    }, name);
  });
};

var noHorizMarginPaddingClass = Object(emotion__WEBPACK_IMPORTED_MODULE_1__["css"])({
  paddingLeft: '0',
  paddingRight: '0',
  marginLeft: '0',
  marginRight: '0'
});

var getPartClass = function getPartClass(theme) {
  return Object(emotion__WEBPACK_IMPORTED_MODULE_1__["cx"])('gf-form-label', Object(emotion__WEBPACK_IMPORTED_MODULE_1__["css"])({
    paddingLeft: '0',
    // gf-form-label class makes certain css attributes incorrect
    // for the selectbox-dropdown, so we have to "reset" them back
    lineHeight: theme.typography.lineHeight.md,
    fontSize: theme.typography.size.base
  }));
};

var Part = function Part(_a) {
  var name = _a.name,
      params = _a.params,
      onChange = _a.onChange,
      onRemove = _a.onRemove;
  var theme = Object(_grafana_ui__WEBPACK_IMPORTED_MODULE_2__["useTheme"])();
  var partClass = Object(react__WEBPACK_IMPORTED_MODULE_0__["useMemo"])(function () {
    return getPartClass(theme);
  }, [theme]);

  var onParamChange = function onParamChange(par, i) {
    var newParams = params.map(function (p) {
      return p.value;
    });
    newParams[i] = par;
    onChange(newParams);
  };

  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", {
    className: partClass
  }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(RemovableName, {
    name: name,
    onRemove: onRemove
  }), "(", params.map(function (p, i) {
    var value = p.value,
        options = p.options;
    var isLast = i === params.length - 1;
    var loadOptions = options !== null ? function () {
      return options().then(function (items) {
        return items.map(_common_toSelectableValue__WEBPACK_IMPORTED_MODULE_5__["toSelectableValue"]);
      });
    } : undefined;
    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment, {
      key: i
    }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Seg__WEBPACK_IMPORTED_MODULE_3__["Seg"], {
      allowCustomValue: true,
      value: value,
      buttonClassName: noHorizMarginPaddingClass,
      loadOptions: loadOptions,
      onChange: function onChange(v) {
        onParamChange(Object(_common_unwrap__WEBPACK_IMPORTED_MODULE_4__["unwrap"])(v.value), i);
      }
    }), !isLast && ',');
  }), ")");
};

var PartListSection = function PartListSection(_a) {
  var parts = _a.parts,
      getNewPartOptions = _a.getNewPartOptions,
      onAddNewPart = _a.onAddNewPart,
      onRemovePart = _a.onRemovePart,
      _onChange = _a.onChange;
  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment, null, parts.map(function (part, index) {
    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Part, {
      key: index,
      name: part.name,
      params: part.params,
      onRemove: function onRemove() {
        onRemovePart(index);
      },
      onChange: function onChange(pars) {
        _onChange(index, pars);
      }
    });
  }), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_AddButton__WEBPACK_IMPORTED_MODULE_6__["AddButton"], {
    loadOptions: getNewPartOptions,
    onAdd: onAddNewPart
  }));
};

/***/ }),

/***/ "./datasource/rum-service/components/Seg.tsx":
/*!***************************************************!*\
  !*** ./datasource/rum-service/components/Seg.tsx ***!
  \***************************************************/
/*! exports provided: Seg */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Seg", function() { return Seg; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var emotion__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! emotion */ "emotion");
/* harmony import */ var emotion__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(emotion__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react_use__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react-use */ "../node_modules/react-use/esm/index.js");
/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @grafana/ui */ "@grafana/ui");
/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_grafana_ui__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _common_useShadowedState__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../common/useShadowedState */ "./datasource/rum-service/common/useShadowedState.ts");





var selectClass = Object(emotion__WEBPACK_IMPORTED_MODULE_1__["css"])({
  minWidth: '160px'
}); // when a custom value is written into a select-box,
// by default the new value is prefixed with "Create:",
// and that sounds confusing because here we do not create
// anything. we change this to just be the entered string.

var formatCreateLabel = function formatCreateLabel(v) {
  return v;
};

var SelReload = function SelReload(_a) {
  var loadOptions = _a.loadOptions,
      allowCustomValue = _a.allowCustomValue,
      onChange = _a.onChange,
      onClose = _a.onClose; // here we rely on the fact that writing text into the <AsyncSelect/>
  // does not cause a re-render of the current react component.
  // this way there is only a single render-call,
  // so there is only a single `debouncedLoadOptions`.
  // if we want ot make this "re-render safe,
  // we will have to put the debounced call into an useRef,
  // and probably have an useEffect
  // const debouncedLoadOptions = debouncePromise(loadOptions, 1000, { leading: true });

  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", {
    className: selectClass
  }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_3__["AsyncSelect"], {
    formatCreateLabel: formatCreateLabel,
    defaultOptions: true,
    autoFocus: true,
    isOpen: true,
    onCloseMenu: onClose,
    allowCustomValue: allowCustomValue,
    loadOptions: loadOptions,
    onChange: onChange
  }));
};

var SelSingleLoad = function SelSingleLoad(_a) {
  var _b;

  var loadOptions = _a.loadOptions,
      allowCustomValue = _a.allowCustomValue,
      onChange = _a.onChange,
      onClose = _a.onClose;

  var _c = Object(react_use__WEBPACK_IMPORTED_MODULE_2__["useAsyncFn"])(loadOptions, [loadOptions]),
      loadState = _c[0],
      doLoad = _c[1];

  Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
    doLoad('');
  }, [doLoad, loadOptions]);
  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", {
    className: selectClass
  }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_3__["Select"], {
    isLoading: loadState.loading,
    formatCreateLabel: formatCreateLabel,
    autoFocus: true,
    isOpen: true,
    onCloseMenu: onClose,
    allowCustomValue: allowCustomValue,
    options: (_b = loadState.value) !== null && _b !== void 0 ? _b : [],
    onChange: onChange
  }));
};

var Sel = function Sel(_a) {
  var loadOptions = _a.loadOptions,
      filterByLoadOptions = _a.filterByLoadOptions,
      allowCustomValue = _a.allowCustomValue,
      onChange = _a.onChange,
      onClose = _a.onClose; // unfortunately <Segment/> and <SegmentAsync/> have somewhat different behavior,
  // so the simplest approach was to just create two separate wrapper-components

  return filterByLoadOptions ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(SelReload, {
    loadOptions: loadOptions,
    allowCustomValue: allowCustomValue,
    onChange: onChange,
    onClose: onClose
  }) : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(SelSingleLoad, {
    loadOptions: loadOptions,
    allowCustomValue: allowCustomValue,
    onChange: onChange,
    onClose: onClose
  });
};

var Inp = function Inp(_a) {
  var initialValue = _a.initialValue,
      onChange = _a.onChange,
      onClose = _a.onClose;

  var _b = Object(_common_useShadowedState__WEBPACK_IMPORTED_MODULE_4__["useShadowedState"])(initialValue),
      currentValue = _b[0],
      setCurrentValue = _b[1];

  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_3__["Input"], {
    autoFocus: true,
    type: "text",
    spellCheck: false,
    onBlur: onClose,
    onKeyDown: function onKeyDown(e) {
      if (e.key === 'Enter') {
        onChange(currentValue);
      }
    },
    onChange: function onChange(e) {
      setCurrentValue(e.currentTarget.value);
    },
    value: currentValue
  });
};

var defaultButtonClass = Object(emotion__WEBPACK_IMPORTED_MODULE_1__["css"])({
  width: 'auto',
  cursor: 'pointer'
});
var Seg = function Seg(_a) {
  var value = _a.value,
      buttonClassName = _a.buttonClassName,
      loadOptions = _a.loadOptions,
      filterByLoadOptions = _a.filterByLoadOptions,
      allowCustomValue = _a.allowCustomValue,
      _onChange = _a.onChange,
      disabled = _a.disabled;

  var _b = Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])(false),
      isOpen = _b[0],
      setOpen = _b[1];

  if (!isOpen) {
    var className = Object(emotion__WEBPACK_IMPORTED_MODULE_1__["cx"])(defaultButtonClass, buttonClassName);
    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_3__["InlineLabel"], {
      as: "button",
      className: className,
      onClick: function onClick() {
        setOpen(!disabled);
      }
    }, value);
  } else {
    if (loadOptions !== undefined) {
      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Sel, {
        loadOptions: loadOptions,
        filterByLoadOptions: filterByLoadOptions !== null && filterByLoadOptions !== void 0 ? filterByLoadOptions : false,
        allowCustomValue: allowCustomValue,
        onChange: function onChange(v) {
          setOpen(false);

          _onChange(v);
        },
        onClose: function onClose() {
          setOpen(false);
        }
      });
    } else {
      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Inp, {
        initialValue: value,
        onClose: function onClose() {
          setOpen(false);
        },
        onChange: function onChange(v) {
          setOpen(false);

          _onChange({
            value: v,
            label: v
          });
        }
      });
    }
  }
};

/***/ }),

/***/ "./datasource/rum-service/components/SegmentSection.tsx":
/*!**************************************************************!*\
  !*** ./datasource/rum-service/components/SegmentSection.tsx ***!
  \**************************************************************/
/*! exports provided: SegmentSection */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SegmentSection", function() { return SegmentSection; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var emotion__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! emotion */ "emotion");
/* harmony import */ var emotion__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(emotion__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @grafana/ui */ "@grafana/ui");
/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_grafana_ui__WEBPACK_IMPORTED_MODULE_2__);
var __makeTemplateObject = undefined && undefined.__makeTemplateObject || function (cooked, raw) {
  if (Object.defineProperty) {
    Object.defineProperty(cooked, "raw", {
      value: raw
    });
  } else {
    cooked.raw = raw;
  }

  return cooked;
};




/**
 * Horizontal section for editor components.
 *
 * @alpha
 */

var SegmentSection = function SegmentSection(_a) {
  var label = _a.label,
      htmlFor = _a.htmlFor,
      children = _a.children,
      fill = _a.fill;
  var styles = Object(_grafana_ui__WEBPACK_IMPORTED_MODULE_2__["useStyles"])(getStyles);
  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_2__["InlineFieldRow"], null, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_2__["InlineLabel"], {
    htmlFor: htmlFor,
    width: 12,
    className: styles.label
  }, label), children, fill && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", {
    className: styles.fill
  }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_2__["InlineLabel"], null, " ")));
};

var getStyles = function getStyles(theme) {
  return {
    label: Object(emotion__WEBPACK_IMPORTED_MODULE_1__["css"])(templateObject_1 || (templateObject_1 = __makeTemplateObject(["\n    color: #33a2e5;\n  "], ["\n    color: #33a2e5;\n  "]))),
    fill: Object(emotion__WEBPACK_IMPORTED_MODULE_1__["css"])(templateObject_2 || (templateObject_2 = __makeTemplateObject(["\n    flex-grow: 1;\n    margin-bottom: ", ";\n  "], ["\n    flex-grow: 1;\n    margin-bottom: ", ";\n  "])), theme.spacing.inlineFormMargin)
  };
};

var templateObject_1, templateObject_2;

/***/ }),

/***/ "./datasource/rum-service/components/TagsSection.tsx":
/*!***********************************************************!*\
  !*** ./datasource/rum-service/components/TagsSection.tsx ***!
  \***********************************************************/
/*! exports provided: TagsSection */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TagsSection", function() { return TagsSection; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _Seg__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Seg */ "./datasource/rum-service/components/Seg.tsx");
/* harmony import */ var _common_toSelectableValue__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../common/toSelectableValue */ "./datasource/rum-service/common/toSelectableValue.ts");
/* harmony import */ var _common_tagUtils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../common/tagUtils */ "./datasource/rum-service/common/tagUtils.ts");
/* harmony import */ var _AddButton__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./AddButton */ "./datasource/rum-service/components/AddButton.tsx");
var __assign = undefined && undefined.__assign || function () {
  __assign = Object.assign || function (t) {
    for (var s, i = 1, n = arguments.length; i < n; i++) {
      s = arguments[i];

      for (var p in s) {
        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
      }
    }

    return t;
  };

  return __assign.apply(this, arguments);
};

var __spreadArray = undefined && undefined.__spreadArray || function (to, from, pack) {
  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {
    if (ar || !(i in from)) {
      if (!ar) ar = Array.prototype.slice.call(from, 0, i);
      ar[i] = from[i];
    }
  }
  return to.concat(ar || Array.prototype.slice.call(from));
};






var knownOperators = ['=', '!=', '<>', '<', '>', '=~', '!~'];
var knownConditions = ['AND', 'OR'];
var operatorOptions = knownOperators.map(_common_toSelectableValue__WEBPACK_IMPORTED_MODULE_2__["toSelectableValue"]);
var condititonOptions = knownConditions.map(_common_toSelectableValue__WEBPACK_IMPORTED_MODULE_2__["toSelectableValue"]);

var loadConditionOptions = function loadConditionOptions() {
  return Promise.resolve(condititonOptions);
};

var loadOperatorOptions = function loadOperatorOptions() {
  return Promise.resolve(operatorOptions);
};

var Tag = function Tag(_a) {
  var tag = _a.tag,
      isFirst = _a.isFirst,
      onRemove = _a.onRemove,
      _onChange = _a.onChange,
      getTagKeyOptions = _a.getTagKeyOptions,
      getTagValueOptions = _a.getTagValueOptions;
  var operator = Object(_common_tagUtils__WEBPACK_IMPORTED_MODULE_3__["getOperator"])(tag);
  var condition = Object(_common_tagUtils__WEBPACK_IMPORTED_MODULE_3__["getCondition"])(tag, isFirst);

  var getTagKeySegmentOptions = function getTagKeySegmentOptions() {
    return getTagKeyOptions()["catch"](function (err) {
      // in this UI element we add a special item to the list of options,
      // that is used to remove the element.
      // this causes a problem: if `getTagKeyOptions` fails with an error,
      // the remove-filter option is never added to the list,
      // and the UI element can not be removed.
      // to avoid it, we catch any potential errors coming from `getTagKeyOptions`,
      // log the error, and pretend that the list of options is an empty list.
      // this way the remove-item option can always be added to the list.
      console.error(err);
      return [];
    }).then(function (tags) {
      return __spreadArray([{
        label: '-- remove filter --',
        value: undefined
      }], tags.map(_common_toSelectableValue__WEBPACK_IMPORTED_MODULE_2__["toSelectableValue"]), true);
    });
  };

  var getTagValueSegmentOptions = function getTagValueSegmentOptions() {
    return getTagValueOptions(tag.key).then(function (tags) {
      return tags.map(_common_toSelectableValue__WEBPACK_IMPORTED_MODULE_2__["toSelectableValue"]);
    });
  };

  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", {
    className: "gf-form"
  }, condition !== undefined && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Seg__WEBPACK_IMPORTED_MODULE_1__["Seg"], {
    value: condition,
    loadOptions: loadConditionOptions,
    disabled: true,
    onChange: function onChange(v) {
      _onChange(__assign(__assign({}, tag), {
        condition: v.value
      }));
    }
  }), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Seg__WEBPACK_IMPORTED_MODULE_1__["Seg"], {
    allowCustomValue: true,
    value: tag.key,
    loadOptions: getTagKeySegmentOptions,
    onChange: function onChange(v) {
      var value = v.value;

      if (value === undefined) {
        onRemove();
      } else {
        _onChange(__assign(__assign({}, tag), {
          key: value !== null && value !== void 0 ? value : ''
        }));
      }
    }
  }), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Seg__WEBPACK_IMPORTED_MODULE_1__["Seg"], {
    value: operator,
    loadOptions: loadOperatorOptions,
    onChange: function onChange(op) {
      _onChange(__assign(__assign({}, tag), {
        operator: op.value
      }));
    }
  }), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Seg__WEBPACK_IMPORTED_MODULE_1__["Seg"], {
    allowCustomValue: true,
    value: tag.value,
    loadOptions: getTagValueSegmentOptions,
    onChange: function onChange(v) {
      var _a;

      var value = (_a = v.value) !== null && _a !== void 0 ? _a : '';

      _onChange(__assign(__assign({}, tag), {
        value: value,
        operator: Object(_common_tagUtils__WEBPACK_IMPORTED_MODULE_3__["adjustOperatorIfNeeded"])(operator, value)
      }));
    }
  }));
};

var TagsSection = function TagsSection(_a) {
  var tags = _a.tags,
      onChange = _a.onChange,
      getTagKeyOptions = _a.getTagKeyOptions,
      getTagValueOptions = _a.getTagValueOptions;

  var onTagChange = function onTagChange(newTag, index) {
    var newTags = tags.map(function (tag, i) {
      return index === i ? newTag : tag;
    });
    onChange(newTags);
  };

  var onTagRemove = function onTagRemove(index) {
    var newTags = tags.filter(function (t, i) {
      return i !== index;
    });
    onChange(newTags);
  };

  var getTagKeySegmentOptions = function getTagKeySegmentOptions() {
    return getTagKeyOptions().then(function (tags) {
      return tags.map(_common_toSelectableValue__WEBPACK_IMPORTED_MODULE_2__["toSelectableValue"]);
    });
  };

  var addNewTag = function addNewTag(tagKey, isFirst) {
    var minimalTag = {
      key: tagKey,
      value: 'select tag value'
    };
    var newTag = {
      key: minimalTag.key,
      value: minimalTag.value,
      operator: Object(_common_tagUtils__WEBPACK_IMPORTED_MODULE_3__["getOperator"])(minimalTag),
      condition: Object(_common_tagUtils__WEBPACK_IMPORTED_MODULE_3__["getCondition"])(minimalTag, isFirst)
    };
    onChange(__spreadArray(__spreadArray([], tags, true), [newTag], false));
  };

  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment, null, tags.map(function (t, i) {
    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Tag, {
      tag: t,
      isFirst: i === 0,
      key: i,
      onChange: function onChange(newT) {
        onTagChange(newT, i);
      },
      onRemove: function onRemove() {
        onTagRemove(i);
      },
      getTagKeyOptions: getTagKeyOptions,
      getTagValueOptions: getTagValueOptions
    });
  }), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_AddButton__WEBPACK_IMPORTED_MODULE_4__["AddButton"], {
    allowCustomValue: true,
    loadOptions: getTagKeySegmentOptions,
    onAdd: function onAdd(v) {
      addNewTag(v, tags.length === 0);
    }
  }));
};

/***/ }),

/***/ "./datasource/rum-service/components/styles.ts":
/*!*****************************************************!*\
  !*** ./datasource/rum-service/components/styles.ts ***!
  \*****************************************************/
/*! exports provided: paddingRightClass */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "paddingRightClass", function() { return paddingRightClass; });
/* harmony import */ var emotion__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! emotion */ "emotion");
/* harmony import */ var emotion__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(emotion__WEBPACK_IMPORTED_MODULE_0__);

var paddingRightClass = Object(emotion__WEBPACK_IMPORTED_MODULE_0__["css"])({
  paddingRight: '4px'
});

/***/ }),

/***/ "./datasource/rum-service/queryUtils.ts":
/*!**********************************************!*\
  !*** ./datasource/rum-service/queryUtils.ts ***!
  \**********************************************/
/*! exports provided: normalizeQuery, addNewSelectPart, removeSelectPart, changeSelectPart, addNewGroupByPart, removeGroupByPart, changeGroupByPart */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "normalizeQuery", function() { return normalizeQuery; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "addNewSelectPart", function() { return addNewSelectPart; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "removeSelectPart", function() { return removeSelectPart; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "changeSelectPart", function() { return changeSelectPart; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "addNewGroupByPart", function() { return addNewGroupByPart; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "removeGroupByPart", function() { return removeGroupByPart; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "changeGroupByPart", function() { return changeGroupByPart; });
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lodash */ "lodash");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _RUM_query_model__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./RUM_query_model */ "./datasource/rum-service/RUM_query_model.ts");
var __assign = undefined && undefined.__assign || function () {
  __assign = Object.assign || function (t) {
    for (var s, i = 1, n = arguments.length; i < n; i++) {
      s = arguments[i];

      for (var p in s) {
        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
      }
    }

    return t;
  };

  return __assign.apply(this, arguments);
};

var __spreadArray = undefined && undefined.__spreadArray || function (to, from, pack) {
  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {
    if (ar || !(i in from)) {
      if (!ar) ar = Array.prototype.slice.call(from, 0, i);
      ar[i] = from[i];
    }
  }
  return to.concat(ar || Array.prototype.slice.call(from));
};



function normalizeQuery(query) {
  // we return the original query if there is no need to update it
  if (query.policy !== undefined && query.resultFormat !== undefined && query.orderByTime !== undefined && query.tags !== undefined && query.groupBy !== undefined && query.select !== undefined) {
    return query;
  } // FIXME: we should move the whole normalizeQuery logic here,
  // and then have RUMQueryModel call this function,
  // to concentrate the whole logic here


  var queryCopy = Object(lodash__WEBPACK_IMPORTED_MODULE_0__["cloneDeep"])(query); // the query-model mutates the query

  return new _RUM_query_model__WEBPACK_IMPORTED_MODULE_1__["default"](queryCopy).target;
}
function addNewSelectPart(query, type, index) {
  var queryCopy = Object(lodash__WEBPACK_IMPORTED_MODULE_0__["cloneDeep"])(query); // the query-model mutates the query

  var model = new _RUM_query_model__WEBPACK_IMPORTED_MODULE_1__["default"](queryCopy);
  model.addSelectPart(model.selectModels[index], type);
  return model.target;
}
function removeSelectPart(query, partIndex, index) {
  var queryCopy = Object(lodash__WEBPACK_IMPORTED_MODULE_0__["cloneDeep"])(query); // the query-model mutates the query

  var model = new _RUM_query_model__WEBPACK_IMPORTED_MODULE_1__["default"](queryCopy);
  var selectModel = model.selectModels[index];
  model.removeSelectPart(selectModel, selectModel[partIndex]);
  return model.target;
}
function changeSelectPart(query, listIndex, partIndex, newParams) {
  var _a; // we need to make shallow copy of `query.select` down to `query.select[listIndex][partIndex]`


  var newSel = __spreadArray([], (_a = query.select) !== null && _a !== void 0 ? _a : [], true);

  newSel[listIndex] = __spreadArray([], newSel[listIndex], true);
  newSel[listIndex][partIndex] = __assign(__assign({}, newSel[listIndex][partIndex]), {
    params: newParams
  });
  return __assign(__assign({}, query), {
    select: newSel
  });
}
function addNewGroupByPart(query, type) {
  var queryCopy = Object(lodash__WEBPACK_IMPORTED_MODULE_0__["cloneDeep"])(query); // the query-model mutates the query

  var model = new _RUM_query_model__WEBPACK_IMPORTED_MODULE_1__["default"](queryCopy);
  model.addGroupBy(type);
  return model.target;
}
function removeGroupByPart(query, partIndex) {
  var queryCopy = Object(lodash__WEBPACK_IMPORTED_MODULE_0__["cloneDeep"])(query); // the query-model mutates the query

  var model = new _RUM_query_model__WEBPACK_IMPORTED_MODULE_1__["default"](queryCopy);
  model.removeGroupByPart(model.groupByParts[partIndex], partIndex);
  return model.target;
}
function changeGroupByPart(query, partIndex, newParams) {
  var _a; // we need to make shallow copy of `query.groupBy` down to `query.groupBy[partIndex]`


  var newGroupBy = __spreadArray([], (_a = query.groupBy) !== null && _a !== void 0 ? _a : [], true);

  newGroupBy[partIndex] = __assign(__assign({}, newGroupBy[partIndex]), {
    params: newParams
  });
  return __assign(__assign({}, query), {
    groupBy: newGroupBy
  });
}

/***/ }),

/***/ "./datasource/rum-service/query_builder.ts":
/*!*************************************************!*\
  !*** ./datasource/rum-service/query_builder.ts ***!
  \*************************************************/
/*! exports provided: RUMQueryBuilder */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RUMQueryBuilder", function() { return RUMQueryBuilder; });
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lodash */ "lodash");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var grafana_app_core_utils_kbn__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! grafana/app/core/utils/kbn */ "grafana/app/core/utils/kbn");
/* harmony import */ var grafana_app_core_utils_kbn__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(grafana_app_core_utils_kbn__WEBPACK_IMPORTED_MODULE_1__);



function renderTagCondition(tag, index) {
  // FIXME: merge this function with RUM_query_model/renderTagCondition
  var str = '';
  var operator = tag.operator;
  var value = tag.value;

  if (index > 0) {
    str = (tag.condition.toLowerCase() || 'AND') + ' ';
  }

  if (!operator) {
    if (/^\/.*\/$/.test(tag.value)) {
      operator = '=~';
    } else {
      operator = '=';
    }
  } // quote value unless regex or number, or if empty-string


  if (value === '' || operator !== '=~' && operator !== '!~') {
    value = "'" + value.replace(/\\/g, '\\\\').replace(/\'/g, "\\'") + "'";
  }

  return str + '"' + tag.key + '" ' + operator + ' ' + value;
}

var RUMQueryBuilder =
/** @class */
function () {
  // eslint-disable-next-line @typescript-eslint/no-parameter-properties
  function RUMQueryBuilder(target, database) {
    this.target = target;
    this.database = database;
  }

  RUMQueryBuilder.prototype.buildExploreQuery = function (type, withKey, withMeasurementFilter) {
    var query = '';
    var measurement;
    var policy;

    if (type === 'TAG_KEYS') {
      query = 'show tag keys';
      measurement = this.target.measurement;
      policy = this.target.policy;
    } else if (type === 'TAG_VALUES') {
      query = 'show tag values';
      measurement = this.target.measurement;
      policy = this.target.policy;
    } else if (type === 'MEASUREMENTS') {
      query = 'show measurements';

      if (withMeasurementFilter) {
        // we do a case-insensitive regex-based lookup
        query += ' with measurement =~ /(?i)' + grafana_app_core_utils_kbn__WEBPACK_IMPORTED_MODULE_1___default.a.regexEscape(withMeasurementFilter) + '/';
      }
    } else if (type === 'FIELDS') {
      measurement = this.target.measurement;
      policy = this.target.policy;

      if (!measurement.match('^/.*/')) {
        measurement = '"' + measurement + '"';

        if (policy && policy !== 'default') {
          policy = '"' + policy + '"';
          measurement = policy + '.' + measurement;
        }
      }

      return 'show field keys from ' + measurement;
    } else if (type === 'RETENTION POLICIES') {
      query = 'show retention policies on "' + this.database + '"';
      return query;
    }

    if (measurement) {
      if (!measurement.match('^/.*/') && !measurement.match(/^merge\(.*\)/)) {
        measurement = '"' + measurement + '"';
      }

      if (policy && policy !== 'default') {
        policy = '"' + policy + '"';
        measurement = policy + '.' + measurement;
      }

      query += ' from ' + measurement;
    }

    if (withKey) {
      query += ' with key = "' + withKey + '"';
    }

    if (this.target.tags && this.target.tags.length > 0) {
      var whereConditions = Object(lodash__WEBPACK_IMPORTED_MODULE_0__["reduce"])(this.target.tags, function (memo, tag) {
        if (type === 'MEASUREMENTS' && tag.key === 'id') {
          return memo;
        } // do not add a condition for the key we want to explore for


        if (tag.key === withKey) {
          return memo;
        } // value operators not supported in these types of queries


        if (tag.operator === '>' || tag.operator === '<') {
          return memo;
        }

        memo.push(renderTagCondition(tag, memo.length));
        return memo;
      }, []);

      if (whereConditions.length > 0) {
        query += ' where ' + whereConditions.join(' ');
      }
    }

    if (type === 'MEASUREMENTS') {
      query += ' limit 100'; // Solve issue #2524 by limiting the number of measurements returned
      // LIMIT must be after WITH MEASUREMENT and WHERE clauses
      // This also could be used for TAG KEYS and TAG VALUES, if desired
    }

    return query;
  };

  return RUMQueryBuilder;
}();



/***/ }),

/***/ "./datasource/rum-service/query_part.ts":
/*!**********************************************!*\
  !*** ./datasource/rum-service/query_part.ts ***!
  \**********************************************/
/*! exports provided: QueryPartDef, QueryPart, functionRenderer, suffixRenderer, identityRenderer, quotedIdentityRenderer, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "QueryPartDef", function() { return QueryPartDef; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "QueryPart", function() { return QueryPart; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "functionRenderer", function() { return functionRenderer; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "suffixRenderer", function() { return suffixRenderer; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "identityRenderer", function() { return identityRenderer; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "quotedIdentityRenderer", function() { return quotedIdentityRenderer; });
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lodash */ "lodash");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__);


var QueryPartDef =
/** @class */
function () {
  function QueryPartDef(options) {
    this.type = options.type;
    this.params = options.params;
    this.defaultParams = options.defaultParams;
    this.renderer = options.renderer;
    this.category = options.category;
    this.addStrategy = options.addStrategy;
  }

  return QueryPartDef;
}();



var QueryPart =
/** @class */
function () {
  function QueryPart(part, def) {
    this.part = part;
    this.def = def;

    if (!this.def) {
      // eslint-disable-next-line no-throw-literal
      throw {
        message: 'Could not find query part ' + part.type
      };
    }

    part.params = part.params || Object(lodash__WEBPACK_IMPORTED_MODULE_0__["clone"])(this.def.defaultParams);
    this.params = part.params;
    this.text = '';
    this.updateText();
  }

  QueryPart.prototype.render = function (innerExpr) {
    return this.def.renderer(this, innerExpr);
  };

  QueryPart.prototype.hasMultipleParamsInString = function (strValue, index) {
    if (strValue.indexOf(',') === -1) {
      return false;
    }

    return this.def.params[index + 1] && this.def.params[index + 1].optional;
  };

  QueryPart.prototype.updateParam = function (strValue, index) {
    var _this = this; // handle optional parameters
    // if string contains ',' and next param is optional, split and update both


    if (this.hasMultipleParamsInString(strValue, index)) {
      Object(lodash__WEBPACK_IMPORTED_MODULE_0__["each"])(strValue.split(','), function (partVal, idx) {
        _this.updateParam(partVal.trim(), idx);
      });
      return;
    }

    if (strValue === '' && this.def.params[index].optional) {
      this.params.splice(index, 1);
    } else {
      this.params[index] = strValue;
    }

    this.part.params = this.params;
    this.updateText();
  };

  QueryPart.prototype.updateText = function () {
    if (this.params.length === 0) {
      this.text = this.def.type + '()';
      return;
    }

    var text = this.def.type + '(';
    text += this.params.join(', ');
    text += ')';
    this.text = text;
  };

  return QueryPart;
}();


function functionRenderer(part, innerExpr) {
  var str = part.def.type + '(';
  var parameters = Object(lodash__WEBPACK_IMPORTED_MODULE_0__["map"])(part.params, function (value, index) {
    var paramType = part.def.params[index];

    if (paramType.type === 'time') {
      if (value === 'auto') {
        value = '$__interval';
      }
    }

    if (paramType.quote === 'single') {
      return "'" + value + "'";
    } else if (paramType.quote === 'double') {
      return '"' + value + '"';
    }

    return value;
  });

  if (innerExpr) {
    parameters.unshift(innerExpr);
  }

  return str + parameters.join(', ') + ')';
}
function suffixRenderer(part, innerExpr) {
  return innerExpr + ' ' + part.params[0];
}
function identityRenderer(part, innerExpr) {
  return part.params[0];
}
function quotedIdentityRenderer(part, innerExpr) {
  return '"' + part.params[0] + '"';
}
var index = [];
var categories = {
  Aggregations: [],
  Selectors: [],
  Transformations: [],
  Predictors: [],
  Math: [],
  Aliasing: [],
  Fields: []
};

function createPart(part) {
  var def = index[part.type];

  if (!def) {
    // eslint-disable-next-line no-throw-literal
    throw {
      message: 'Could not find query part ' + part.type
    };
  }

  return new QueryPart(part, def);
}

function register(options) {
  index[options.type] = new QueryPartDef(options);
  options.category.push(index[options.type]);
}

var groupByTimeFunctions = [];

function aliasRenderer(part, innerExpr) {
  // eslint-disable-next-line no-useless-concat
  return innerExpr + ' AS ' + '"' + part.params[0] + '"';
}

function fieldRenderer(part, innerExpr) {
  if (part.params[0] === '*') {
    return '*';
  }

  return '"' + part.params[0] + '"';
}

function replaceAggregationAddStrategy(selectParts, partModel) {
  // look for existing aggregation
  for (var i = 0; i < selectParts.length; i++) {
    var part = selectParts[i];

    if (part.def.category === categories.Aggregations) {
      if (part.def.type === partModel.def.type) {
        return;
      } // count distinct is allowed


      if (part.def.type === 'count' && partModel.def.type === 'distinct') {
        break;
      } // remove next aggregation if distinct was replaced


      if (part.def.type === 'distinct') {
        var morePartsAvailable = selectParts.length >= i + 2;

        if (partModel.def.type !== 'count' && morePartsAvailable) {
          var nextPart = selectParts[i + 1];

          if (nextPart.def.category === categories.Aggregations) {
            selectParts.splice(i + 1, 1);
          }
        } else if (partModel.def.type === 'count') {
          if (!morePartsAvailable || selectParts[i + 1].def.type !== 'count') {
            selectParts.splice(i + 1, 0, partModel);
          }

          return;
        }
      }

      selectParts[i] = partModel;
      return;
    }

    if (part.def.category === categories.Selectors) {
      selectParts[i] = partModel;
      return;
    }
  }

  selectParts.splice(1, 0, partModel);
}

function addTransformationStrategy(selectParts, partModel) {
  var i; // look for index to add transformation

  for (i = 0; i < selectParts.length; i++) {
    var part = selectParts[i];

    if (part.def.category === categories.Math || part.def.category === categories.Aliasing) {
      break;
    }
  }

  selectParts.splice(i, 0, partModel);
}

function addMathStrategy(selectParts, partModel) {
  var partCount = selectParts.length;

  if (partCount > 0) {
    // if last is math, replace it
    if (selectParts[partCount - 1].def.type === 'math') {
      selectParts[partCount - 1] = partModel;
      return;
    } // if next to last is math, replace it


    if (partCount > 1 && selectParts[partCount - 2].def.type === 'math') {
      selectParts[partCount - 2] = partModel;
      return;
    } else if (selectParts[partCount - 1].def.type === 'alias') {
      // if last is alias add it before
      selectParts.splice(partCount - 1, 0, partModel);
      return;
    }
  }

  selectParts.push(partModel);
}

function addAliasStrategy(selectParts, partModel) {
  var partCount = selectParts.length;

  if (partCount > 0) {
    // if last is alias, replace it
    if (selectParts[partCount - 1].def.type === 'alias') {
      selectParts[partCount - 1] = partModel;
      return;
    }
  }

  selectParts.push(partModel);
}

function addFieldStrategy(selectParts, partModel, query) {
  // copy all parts
  var parts = Object(lodash__WEBPACK_IMPORTED_MODULE_0__["map"])(selectParts, function (part) {
    return createPart({
      type: part.def.type,
      params: Object(lodash__WEBPACK_IMPORTED_MODULE_0__["clone"])(part.params)
    });
  });
  query.selectModels.push(parts);
}

register({
  type: 'field',
  addStrategy: addFieldStrategy,
  category: categories.Fields,
  params: [{
    type: 'field',
    dynamicLookup: true
  }],
  defaultParams: ['value'],
  renderer: fieldRenderer
}); // Aggregations

register({
  type: 'count',
  addStrategy: replaceAggregationAddStrategy,
  category: categories.Aggregations,
  params: [],
  defaultParams: [],
  renderer: functionRenderer
});
register({
  type: 'distinct',
  addStrategy: replaceAggregationAddStrategy,
  category: categories.Aggregations,
  params: [],
  defaultParams: [],
  renderer: functionRenderer
});
register({
  type: 'integral',
  addStrategy: replaceAggregationAddStrategy,
  category: categories.Aggregations,
  params: [],
  defaultParams: [],
  renderer: functionRenderer
});
register({
  type: 'mean',
  addStrategy: replaceAggregationAddStrategy,
  category: categories.Aggregations,
  params: [],
  defaultParams: [],
  renderer: functionRenderer
});
register({
  type: 'median',
  addStrategy: replaceAggregationAddStrategy,
  category: categories.Aggregations,
  params: [],
  defaultParams: [],
  renderer: functionRenderer
});
register({
  type: 'mode',
  addStrategy: replaceAggregationAddStrategy,
  category: categories.Aggregations,
  params: [],
  defaultParams: [],
  renderer: functionRenderer
});
register({
  type: 'sum',
  addStrategy: replaceAggregationAddStrategy,
  category: categories.Aggregations,
  params: [],
  defaultParams: [],
  renderer: functionRenderer
}); // transformations

register({
  type: 'derivative',
  addStrategy: addTransformationStrategy,
  category: categories.Transformations,
  params: [{
    name: 'duration',
    type: 'interval',
    options: ['1s', '10s', '1m', '5m', '10m', '15m', '1h']
  }],
  defaultParams: ['10s'],
  renderer: functionRenderer
});
register({
  type: 'spread',
  addStrategy: addTransformationStrategy,
  category: categories.Transformations,
  params: [],
  defaultParams: [],
  renderer: functionRenderer
});
register({
  type: 'non_negative_derivative',
  addStrategy: addTransformationStrategy,
  category: categories.Transformations,
  params: [{
    name: 'duration',
    type: 'interval',
    options: ['1s', '10s', '1m', '5m', '10m', '15m', '1h']
  }],
  defaultParams: ['10s'],
  renderer: functionRenderer
});
register({
  type: 'difference',
  addStrategy: addTransformationStrategy,
  category: categories.Transformations,
  params: [],
  defaultParams: [],
  renderer: functionRenderer
});
register({
  type: 'non_negative_difference',
  addStrategy: addTransformationStrategy,
  category: categories.Transformations,
  params: [],
  defaultParams: [],
  renderer: functionRenderer
});
register({
  type: 'moving_average',
  addStrategy: addTransformationStrategy,
  category: categories.Transformations,
  params: [{
    name: 'window',
    type: 'int',
    options: [5, 10, 20, 30, 40]
  }],
  defaultParams: [10],
  renderer: functionRenderer
});
register({
  type: 'cumulative_sum',
  addStrategy: addTransformationStrategy,
  category: categories.Transformations,
  params: [],
  defaultParams: [],
  renderer: functionRenderer
});
register({
  type: 'stddev',
  addStrategy: addTransformationStrategy,
  category: categories.Transformations,
  params: [],
  defaultParams: [],
  renderer: functionRenderer
});
register({
  type: 'time',
  category: groupByTimeFunctions,
  params: [{
    name: 'interval',
    type: 'time',
    options: ['$__interval', '1m', '5m', '10m', '15m', '1h']
  }],
  defaultParams: ['$__interval'],
  renderer: functionRenderer
});
register({
  type: 'fill',
  category: groupByTimeFunctions,
  params: [{
    name: 'fill',
    type: 'string',
    options: ['none', 'null', '0', 'previous', 'linear']
  }],
  defaultParams: ['null'],
  renderer: functionRenderer
});
register({
  type: 'elapsed',
  addStrategy: addTransformationStrategy,
  category: categories.Transformations,
  params: [{
    name: 'duration',
    type: 'interval',
    options: ['1s', '10s', '1m', '5m', '10m', '15m', '1h']
  }],
  defaultParams: ['10s'],
  renderer: functionRenderer
}); // predictions

register({
  type: 'holt_winters',
  addStrategy: addTransformationStrategy,
  category: categories.Predictors,
  params: [{
    name: 'number',
    type: 'int',
    options: [5, 10, 20, 30, 40]
  }, {
    name: 'season',
    type: 'int',
    options: [0, 1, 2, 5, 10]
  }],
  defaultParams: [10, 2],
  renderer: functionRenderer
});
register({
  type: 'holt_winters_with_fit',
  addStrategy: addTransformationStrategy,
  category: categories.Predictors,
  params: [{
    name: 'number',
    type: 'int',
    options: [5, 10, 20, 30, 40]
  }, {
    name: 'season',
    type: 'int',
    options: [0, 1, 2, 5, 10]
  }],
  defaultParams: [10, 2],
  renderer: functionRenderer
}); // Selectors

register({
  type: 'bottom',
  addStrategy: replaceAggregationAddStrategy,
  category: categories.Selectors,
  params: [{
    name: 'count',
    type: 'int'
  }],
  defaultParams: [3],
  renderer: functionRenderer
});
register({
  type: 'first',
  addStrategy: replaceAggregationAddStrategy,
  category: categories.Selectors,
  params: [],
  defaultParams: [],
  renderer: functionRenderer
});
register({
  type: 'last',
  addStrategy: replaceAggregationAddStrategy,
  category: categories.Selectors,
  params: [],
  defaultParams: [],
  renderer: functionRenderer
});
register({
  type: 'max',
  addStrategy: replaceAggregationAddStrategy,
  category: categories.Selectors,
  params: [],
  defaultParams: [],
  renderer: functionRenderer
});
register({
  type: 'min',
  addStrategy: replaceAggregationAddStrategy,
  category: categories.Selectors,
  params: [],
  defaultParams: [],
  renderer: functionRenderer
});
register({
  type: 'percentile',
  addStrategy: replaceAggregationAddStrategy,
  category: categories.Selectors,
  params: [{
    name: 'nth',
    type: 'int'
  }],
  defaultParams: [95],
  renderer: functionRenderer
});
register({
  type: 'top',
  addStrategy: replaceAggregationAddStrategy,
  category: categories.Selectors,
  params: [{
    name: 'count',
    type: 'int'
  }],
  defaultParams: [3],
  renderer: functionRenderer
});
register({
  type: 'tag',
  category: groupByTimeFunctions,
  params: [{
    name: 'tag',
    type: 'string',
    dynamicLookup: true
  }],
  defaultParams: ['tag'],
  renderer: fieldRenderer
});
register({
  type: 'math',
  addStrategy: addMathStrategy,
  category: categories.Math,
  params: [{
    name: 'expr',
    type: 'string'
  }],
  defaultParams: [' / 100'],
  renderer: suffixRenderer
});
register({
  type: 'alias',
  addStrategy: addAliasStrategy,
  category: categories.Aliasing,
  params: [{
    name: 'name',
    type: 'string',
    quote: 'double'
  }],
  defaultParams: ['alias'],
  renderMode: 'suffix',
  renderer: aliasRenderer
});
/* harmony default export */ __webpack_exports__["default"] = ({
  create: createPart,
  getCategories: function getCategories() {
    return categories;
  },
  replaceAggregationAdd: replaceAggregationAddStrategy
});

/***/ }),

/***/ "./datasource/rum-service/response_parser.ts":
/*!***************************************************!*\
  !*** ./datasource/rum-service/response_parser.ts ***!
  \***************************************************/
/*! exports provided: default, getSelectedParams */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getSelectedParams", function() { return getSelectedParams; });
/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @grafana/data */ "@grafana/data");
/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_grafana_data__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _grafana_runtime__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @grafana/runtime */ "@grafana/runtime");
/* harmony import */ var _grafana_runtime__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_grafana_runtime__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var grafana_app_core_table_model__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! grafana/app/core/table_model */ "grafana/app/core/table_model");
/* harmony import */ var grafana_app_core_table_model__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(grafana_app_core_table_model__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! lodash */ "lodash");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _common_constants__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./common/constants */ "./datasource/rum-service/common/constants.ts");
var __assign = undefined && undefined.__assign || function () {
  __assign = Object.assign || function (t) {
    for (var s, i = 1, n = arguments.length; i < n; i++) {
      s = arguments[i];

      for (var p in s) {
        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
      }
    }

    return t;
  };

  return __assign.apply(this, arguments);
};

var __awaiter = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {
  function adopt(value) {
    return value instanceof P ? value : new P(function (resolve) {
      resolve(value);
    });
  }

  return new (P || (P = Promise))(function (resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }

    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }

    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }

    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};

var __generator = undefined && undefined.__generator || function (thisArg, body) {
  var _ = {
    label: 0,
    sent: function sent() {
      if (t[0] & 1) throw t[1];
      return t[1];
    },
    trys: [],
    ops: []
  },
      f,
      y,
      t,
      g;
  return g = {
    next: verb(0),
    "throw": verb(1),
    "return": verb(2)
  }, typeof Symbol === "function" && (g[Symbol.iterator] = function () {
    return this;
  }), g;

  function verb(n) {
    return function (v) {
      return step([n, v]);
    };
  }

  function step(op) {
    if (f) throw new TypeError("Generator is already executing.");

    while (_) {
      try {
        if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
        if (y = 0, t) op = [op[0] & 2, t.value];

        switch (op[0]) {
          case 0:
          case 1:
            t = op;
            break;

          case 4:
            _.label++;
            return {
              value: op[1],
              done: false
            };

          case 5:
            _.label++;
            y = op[1];
            op = [0];
            continue;

          case 7:
            op = _.ops.pop();

            _.trys.pop();

            continue;

          default:
            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
              _ = 0;
              continue;
            }

            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
              _.label = op[1];
              break;
            }

            if (op[0] === 6 && _.label < t[1]) {
              _.label = t[1];
              t = op;
              break;
            }

            if (t && _.label < t[2]) {
              _.label = t[2];

              _.ops.push(op);

              break;
            }

            if (t[2]) _.ops.pop();

            _.trys.pop();

            continue;
        }

        op = body.call(thisArg, _);
      } catch (e) {
        op = [6, e];
        y = 0;
      } finally {
        f = t = 0;
      }
    }

    if (op[0] & 5) throw op[1];
    return {
      value: op[0] ? op[1] : void 0,
      done: true
    };
  }
};

var __spreadArray = undefined && undefined.__spreadArray || function (to, from, pack) {
  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {
    if (ar || !(i in from)) {
      if (!ar) ar = Array.prototype.slice.call(from, 0, i);
      ar[i] = from[i];
    }
  }
  return to.concat(ar || Array.prototype.slice.call(from));
};







var ResponseParser =
/** @class */
function () {
  function ResponseParser() {}

  ResponseParser.prototype.parse = function (query, results) {
    if (!(results === null || results === void 0 ? void 0 : results.results) || results.results.length === 0) {
      return [];
    }

    var RUMResults = results.results[0];

    if (!RUMResults.series) {
      return [];
    }

    var normalizedQuery = query.toLowerCase();
    var isValueFirst = normalizedQuery.indexOf('show field keys') >= 0 || normalizedQuery.indexOf('show retention policies') >= 0;
    var isShowMeasurements = normalizedQuery.indexOf('show measurements') >= 0;
    var res = new Set();
    Object(lodash__WEBPACK_IMPORTED_MODULE_3__["each"])(RUMResults.series, function (serie) {
      Object(lodash__WEBPACK_IMPORTED_MODULE_3__["each"])(serie.values, function (value) {
        if (Object(lodash__WEBPACK_IMPORTED_MODULE_3__["isArray"])(value)) {
          // In general, there are 2 possible shapes for the returned value.
          // The first one is a two-element array,
          // where the first element is somewhat a metadata value:
          // the tag name for SHOW TAG VALUES queries,
          // the time field for SELECT queries, etc.
          // The second shape is an one-element array,
          // that is containing an immediate value.
          // For example, SHOW FIELD KEYS queries return such shape.
          // Note, pre-0.11 versions return
          // the second shape for SHOW TAG VALUES queries
          // (while the newer versions—first).
          if (isValueFirst) {
            addUnique(res, value[0]);
          } else if (value[1] !== undefined) {
            addUnique(res, value[1]);
          } else {
            addUnique(res, value[0]);
          }
        } else {
          addUnique(res, value);
        }
      });
    });

    if (isShowMeasurements) {
      return Array.from(res).filter(function (item) {
        return _common_constants__WEBPACK_IMPORTED_MODULE_4__["ENABLE_MEASUREMENTS"].includes(item);
      }).map(function (v) {
        return {
          text: v
        };
      });
    }

    return Array.from(res).map(function (v) {
      return {
        text: v
      };
    });
  };

  ResponseParser.prototype.getTable = function (dfs, target, meta) {
    var _a, _b;

    var table = new grafana_app_core_table_model__WEBPACK_IMPORTED_MODULE_2___default.a();

    if (dfs.length > 0) {
      // @ts-ignore
      table.meta = __assign(__assign({}, meta), {
        executedQueryString: (_a = dfs[0].meta) === null || _a === void 0 ? void 0 : _a.executedQueryString
      }); // @ts-ignore

      table.refId = target.refId;
      table = getTableCols(dfs, table, target); // if group by tag(s) added

      if ((_b = dfs[0].fields[1]) === null || _b === void 0 ? void 0 : _b.labels) {
        var dfsByLabels = Object(lodash__WEBPACK_IMPORTED_MODULE_3__["groupBy"])(dfs, function (df) {
          return df.fields[1].labels ? Object.values(df.fields[1].labels) : null;
        });
        var labels = Object.keys(dfsByLabels);
        dfsByLabels = Object.values(dfsByLabels);

        for (var i = 0; i < dfsByLabels.length; i++) {
          table = getTableRows(dfsByLabels[i], table, __spreadArray([], labels[i].split(','), true));
        }
      } else {
        table = getTableRows(dfs, table, []);
      }
    }

    return table;
  };

  ResponseParser.prototype.transformAnnotationResponse = function (options, data, target) {
    return __awaiter(this, void 0, Promise, function () {
      var rsp, table, list_1, titleCol_1, timeCol_1, timeEndCol_1, tagsCol_1, textCol_1;
      return __generator(this, function (_a) {
        rsp = Object(_grafana_runtime__WEBPACK_IMPORTED_MODULE_1__["toDataQueryResponse"])(data, [target]);

        if (rsp) {
          table = this.getTable(rsp.data, target, {});
          list_1 = [];
          titleCol_1 = null;
          timeCol_1 = null;
          timeEndCol_1 = null;
          tagsCol_1 = [];
          textCol_1 = null;
          Object(lodash__WEBPACK_IMPORTED_MODULE_3__["each"])(table.columns, function (column, index) {
            if (column.text.toLowerCase() === 'time') {
              timeCol_1 = index;
              return;
            }

            if (column.text === options.annotation.titleColumn) {
              titleCol_1 = index;
              return;
            }

            if (colContainsTag(column.text, options.annotation.tagsColumn)) {
              tagsCol_1.push(index);
              return;
            }

            if (column.text.includes(options.annotation.textColumn)) {
              textCol_1 = index;
              return;
            }

            if (column.text === options.annotation.timeEndColumn) {
              timeEndCol_1 = index;
              return;
            } // legacy case


            if (!titleCol_1 && textCol_1 !== index) {
              titleCol_1 = index;
            }
          });
          Object(lodash__WEBPACK_IMPORTED_MODULE_3__["each"])(table.rows, function (value) {
            var data = {
              annotation: options.annotation,
              time: Number(new Date(value[timeCol_1])),
              title: value[titleCol_1],
              timeEnd: value[timeEndCol_1],
              // Remove empty values, then split in different tags for comma separated values
              tags: Object(lodash__WEBPACK_IMPORTED_MODULE_3__["flatten"])(tagsCol_1.filter(function (t) {
                return value[t];
              }).map(function (t) {
                return value[t].split(',');
              })),
              text: value[textCol_1]
            };
            list_1.push(data);
          });
          return [2
          /*return*/
          , list_1];
        }

        return [2
        /*return*/
        , []];
      });
    });
  };

  return ResponseParser;
}();

/* harmony default export */ __webpack_exports__["default"] = (ResponseParser);

function colContainsTag(colText, tagsColumn) {
  var tags = (tagsColumn || '').replace(' ', '').split(',');

  for (var _i = 0, tags_1 = tags; _i < tags_1.length; _i++) {
    var tag = tags_1[_i];

    if (colText.includes(tag)) {
      return true;
    }
  }

  return false;
}

function getTableCols(dfs, table, target) {
  var selectedParams = getSelectedParams(target);
  dfs[0].fields.forEach(function (field) {
    // Time col
    if (field.name === 'time') {
      table.columns.push({
        text: 'Time',
        type: _grafana_data__WEBPACK_IMPORTED_MODULE_0__["FieldType"].time
      });
    } // Group by (label) column(s)
    else if (field.name === 'value') {
      if (field.labels) {
        Object.keys(field.labels).forEach(function (key) {
          table.columns.push({
            text: key
          });
        });
      }
    }
  }); // Get cols for annotationQuery

  if (dfs[0].refId === 'metricFindQuery') {
    dfs.forEach(function (field) {
      if (field.name) {
        table.columns.push({
          text: field.name
        });
      }
    });
  } // Select (metric) column(s)
  // eslint-disable-next-line @typescript-eslint/prefer-for-of


  for (var i = 0; i < selectedParams.length; i++) {
    table.columns.push({
      text: selectedParams[i]
    });
  }

  return table;
}

function getTableRows(dfs, table, labels) {
  var values = dfs[0].fields[0].values.toArray();

  var _loop_1 = function _loop_1(i) {
    var time = values[i];
    var metrics = dfs.map(function (df) {
      return df.fields[1] ? df.fields[1].values.toArray()[i] : null;
    });

    if (metrics.indexOf(null) < 0) {
      table.rows.push(__spreadArray(__spreadArray([time], labels, true), metrics, true));
    }
  };

  for (var i = 0; i < values.length; i++) {
    _loop_1(i);
  }

  return table;
}

function getSelectedParams(target) {
  var _a;

  var allParams = [];
  (_a = target.select) === null || _a === void 0 ? void 0 : _a.forEach(function (select) {
    var _a, _b;

    var selector = select.filter(function (x) {
      return x.type !== 'field';
    });

    if (selector.length > 0) {
      allParams.push(selector[0].type);
    } else {
      if ((_b = (_a = select[0]) === null || _a === void 0 ? void 0 : _a.params) === null || _b === void 0 ? void 0 : _b[0]) {
        allParams.push(select[0].params[0].toString());
      }
    }
  });
  var uniqueParams = [];
  allParams.forEach(function (param) {
    uniqueParams.push(incrementName(param, param, uniqueParams, 0));
  });
  return uniqueParams;
}

function incrementName(name, nameIncremenet, params, index) {
  if (params.indexOf(nameIncremenet) > -1) {
    index++;
    return incrementName(name, name + '_' + index, params, index);
  }

  return nameIncremenet;
}

function addUnique(s, value) {
  s.add(value.toString());
}

/***/ }),

/***/ "./datasource/tc_monitor sync recursive ^.*$":
/*!*****************************************!*\
  !*** ./datasource/tc_monitor sync ^.*$ ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var map = {
	".": "./datasource/tc_monitor/index.ts",
	"./": "./datasource/tc_monitor/index.ts",
	"./MonitorDatasource": "./datasource/tc_monitor/MonitorDatasource.ts",
	"./MonitorDatasource.ts": "./datasource/tc_monitor/MonitorDatasource.ts",
	"./_base/datasource": "./datasource/tc_monitor/_base/datasource.ts",
	"./_base/datasource.ts": "./datasource/tc_monitor/_base/datasource.ts",
	"./_base/query": "./datasource/tc_monitor/_base/query.ts",
	"./_base/query.ts": "./datasource/tc_monitor/_base/query.ts",
	"./_base/query_filter": "./datasource/tc_monitor/_base/query_filter.ts",
	"./_base/query_filter.ts": "./datasource/tc_monitor/_base/query_filter.ts",
	"./_base/types": "./datasource/tc_monitor/_base/types.ts",
	"./_base/types.ts": "./datasource/tc_monitor/_base/types.ts",
	"./apigateway/datasource": "./datasource/tc_monitor/apigateway/datasource.ts",
	"./apigateway/datasource.ts": "./datasource/tc_monitor/apigateway/datasource.ts",
	"./apigateway/query": "./datasource/tc_monitor/apigateway/query.ts",
	"./apigateway/query.ts": "./datasource/tc_monitor/apigateway/query.ts",
	"./apigateway/query_def": "./datasource/tc_monitor/apigateway/query_def.ts",
	"./apigateway/query_def.ts": "./datasource/tc_monitor/apigateway/query_def.ts",
	"./bmIntraLb/datasource": "./datasource/tc_monitor/bmIntraLb/datasource.ts",
	"./bmIntraLb/datasource.ts": "./datasource/tc_monitor/bmIntraLb/datasource.ts",
	"./bmIntraLb/query": "./datasource/tc_monitor/bmIntraLb/query.ts",
	"./bmIntraLb/query.ts": "./datasource/tc_monitor/bmIntraLb/query.ts",
	"./bmIntraLb/query_def": "./datasource/tc_monitor/bmIntraLb/query_def.ts",
	"./bmIntraLb/query_def.ts": "./datasource/tc_monitor/bmIntraLb/query_def.ts",
	"./bm_lb/datasource": "./datasource/tc_monitor/bm_lb/datasource.ts",
	"./bm_lb/datasource.ts": "./datasource/tc_monitor/bm_lb/datasource.ts",
	"./bm_lb/query": "./datasource/tc_monitor/bm_lb/query.ts",
	"./bm_lb/query.ts": "./datasource/tc_monitor/bm_lb/query.ts",
	"./bm_lb/query_def": "./datasource/tc_monitor/bm_lb/query_def.ts",
	"./bm_lb/query_def.ts": "./datasource/tc_monitor/bm_lb/query_def.ts",
	"./bm_pcx/datasource": "./datasource/tc_monitor/bm_pcx/datasource.ts",
	"./bm_pcx/datasource.ts": "./datasource/tc_monitor/bm_pcx/datasource.ts",
	"./bm_pcx/query": "./datasource/tc_monitor/bm_pcx/query.ts",
	"./bm_pcx/query.ts": "./datasource/tc_monitor/bm_pcx/query.ts",
	"./bm_pcx/query_def": "./datasource/tc_monitor/bm_pcx/query_def.ts",
	"./bm_pcx/query_def.ts": "./datasource/tc_monitor/bm_pcx/query_def.ts",
	"./bwp/datasource": "./datasource/tc_monitor/bwp/datasource.ts",
	"./bwp/datasource.ts": "./datasource/tc_monitor/bwp/datasource.ts",
	"./bwp/query": "./datasource/tc_monitor/bwp/query.ts",
	"./bwp/query.ts": "./datasource/tc_monitor/bwp/query.ts",
	"./bwp/query_def": "./datasource/tc_monitor/bwp/query_def.ts",
	"./bwp/query_def.ts": "./datasource/tc_monitor/bwp/query_def.ts",
	"./cbs/datasource": "./datasource/tc_monitor/cbs/datasource.ts",
	"./cbs/datasource.ts": "./datasource/tc_monitor/cbs/datasource.ts",
	"./cbs/query": "./datasource/tc_monitor/cbs/query.ts",
	"./cbs/query.ts": "./datasource/tc_monitor/cbs/query.ts",
	"./cbs/query_def": "./datasource/tc_monitor/cbs/query_def.ts",
	"./cbs/query_def.ts": "./datasource/tc_monitor/cbs/query_def.ts",
	"./cdb/datasource": "./datasource/tc_monitor/cdb/datasource.ts",
	"./cdb/datasource.ts": "./datasource/tc_monitor/cdb/datasource.ts",
	"./cdb/query": "./datasource/tc_monitor/cdb/query.ts",
	"./cdb/query.ts": "./datasource/tc_monitor/cdb/query.ts",
	"./cdb/query_def": "./datasource/tc_monitor/cdb/query_def.ts",
	"./cdb/query_def.ts": "./datasource/tc_monitor/cdb/query_def.ts",
	"./cdn/datasource": "./datasource/tc_monitor/cdn/datasource.ts",
	"./cdn/datasource.ts": "./datasource/tc_monitor/cdn/datasource.ts",
	"./cdn/query": "./datasource/tc_monitor/cdn/query.ts",
	"./cdn/query.ts": "./datasource/tc_monitor/cdn/query.ts",
	"./cdn/query_def": "./datasource/tc_monitor/cdn/query_def.ts",
	"./cdn/query_def.ts": "./datasource/tc_monitor/cdn/query_def.ts",
	"./cdn_province/datasource": "./datasource/tc_monitor/cdn_province/datasource.ts",
	"./cdn_province/datasource.ts": "./datasource/tc_monitor/cdn_province/datasource.ts",
	"./cdn_province/query": "./datasource/tc_monitor/cdn_province/query.ts",
	"./cdn_province/query.ts": "./datasource/tc_monitor/cdn_province/query.ts",
	"./cdn_province/query_def": "./datasource/tc_monitor/cdn_province/query_def.ts",
	"./cdn_province/query_def.ts": "./datasource/tc_monitor/cdn_province/query_def.ts",
	"./ceip_summary/datasource": "./datasource/tc_monitor/ceip_summary/datasource.ts",
	"./ceip_summary/datasource.ts": "./datasource/tc_monitor/ceip_summary/datasource.ts",
	"./ceip_summary/query": "./datasource/tc_monitor/ceip_summary/query.ts",
	"./ceip_summary/query.ts": "./datasource/tc_monitor/ceip_summary/query.ts",
	"./ceip_summary/query_def": "./datasource/tc_monitor/ceip_summary/query_def.ts",
	"./ceip_summary/query_def.ts": "./datasource/tc_monitor/ceip_summary/query_def.ts",
	"./ces/datasource": "./datasource/tc_monitor/ces/datasource.ts",
	"./ces/datasource.ts": "./datasource/tc_monitor/ces/datasource.ts",
	"./ces/query": "./datasource/tc_monitor/ces/query.ts",
	"./ces/query.ts": "./datasource/tc_monitor/ces/query.ts",
	"./ces/query_def": "./datasource/tc_monitor/ces/query_def.ts",
	"./ces/query_def.ts": "./datasource/tc_monitor/ces/query_def.ts",
	"./cfs/datasource": "./datasource/tc_monitor/cfs/datasource.ts",
	"./cfs/datasource.ts": "./datasource/tc_monitor/cfs/datasource.ts",
	"./cfs/query": "./datasource/tc_monitor/cfs/query.ts",
	"./cfs/query.ts": "./datasource/tc_monitor/cfs/query.ts",
	"./cfs/query_def": "./datasource/tc_monitor/cfs/query_def.ts",
	"./cfs/query_def.ts": "./datasource/tc_monitor/cfs/query_def.ts",
	"./ckafka/datasource": "./datasource/tc_monitor/ckafka/datasource.ts",
	"./ckafka/datasource.ts": "./datasource/tc_monitor/ckafka/datasource.ts",
	"./ckafka/query": "./datasource/tc_monitor/ckafka/query.ts",
	"./ckafka/query.ts": "./datasource/tc_monitor/ckafka/query.ts",
	"./ckafka/query_def": "./datasource/tc_monitor/ckafka/query_def.ts",
	"./ckafka/query_def.ts": "./datasource/tc_monitor/ckafka/query_def.ts",
	"./clb/datasource": "./datasource/tc_monitor/clb/datasource.ts",
	"./clb/datasource.ts": "./datasource/tc_monitor/clb/datasource.ts",
	"./clb/query": "./datasource/tc_monitor/clb/query.ts",
	"./clb/query.ts": "./datasource/tc_monitor/clb/query.ts",
	"./clb/query_def": "./datasource/tc_monitor/clb/query_def.ts",
	"./clb/query_def.ts": "./datasource/tc_monitor/clb/query_def.ts",
	"./cls/datasource": "./datasource/tc_monitor/cls/datasource.ts",
	"./cls/datasource.ts": "./datasource/tc_monitor/cls/datasource.ts",
	"./cls/query": "./datasource/tc_monitor/cls/query.ts",
	"./cls/query.ts": "./datasource/tc_monitor/cls/query.ts",
	"./cls/query_def": "./datasource/tc_monitor/cls/query_def.ts",
	"./cls/query_def.ts": "./datasource/tc_monitor/cls/query_def.ts",
	"./cmq/datasource": "./datasource/tc_monitor/cmq/datasource.ts",
	"./cmq/datasource.ts": "./datasource/tc_monitor/cmq/datasource.ts",
	"./cmq/query": "./datasource/tc_monitor/cmq/query.ts",
	"./cmq/query.ts": "./datasource/tc_monitor/cmq/query.ts",
	"./cmq/query_def": "./datasource/tc_monitor/cmq/query_def.ts",
	"./cmq/query_def.ts": "./datasource/tc_monitor/cmq/query_def.ts",
	"./cmq_topic/datasource": "./datasource/tc_monitor/cmq_topic/datasource.ts",
	"./cmq_topic/datasource.ts": "./datasource/tc_monitor/cmq_topic/datasource.ts",
	"./cmq_topic/query": "./datasource/tc_monitor/cmq_topic/query.ts",
	"./cmq_topic/query.ts": "./datasource/tc_monitor/cmq_topic/query.ts",
	"./cmq_topic/query_def": "./datasource/tc_monitor/cmq_topic/query_def.ts",
	"./cmq_topic/query_def.ts": "./datasource/tc_monitor/cmq_topic/query_def.ts",
	"./cos/datasource": "./datasource/tc_monitor/cos/datasource.ts",
	"./cos/datasource.ts": "./datasource/tc_monitor/cos/datasource.ts",
	"./cos/query_def": "./datasource/tc_monitor/cos/query_def.ts",
	"./cos/query_def.ts": "./datasource/tc_monitor/cos/query_def.ts",
	"./cpm/datasource": "./datasource/tc_monitor/cpm/datasource.ts",
	"./cpm/datasource.ts": "./datasource/tc_monitor/cpm/datasource.ts",
	"./cpm/query": "./datasource/tc_monitor/cpm/query.ts",
	"./cpm/query.ts": "./datasource/tc_monitor/cpm/query.ts",
	"./cpm/query_def": "./datasource/tc_monitor/cpm/query_def.ts",
	"./cpm/query_def.ts": "./datasource/tc_monitor/cpm/query_def.ts",
	"./cvm/datasource": "./datasource/tc_monitor/cvm/datasource.ts",
	"./cvm/datasource.ts": "./datasource/tc_monitor/cvm/datasource.ts",
	"./cvm/query": "./datasource/tc_monitor/cvm/query.ts",
	"./cvm/query.ts": "./datasource/tc_monitor/cvm/query.ts",
	"./cvm/query_def": "./datasource/tc_monitor/cvm/query_def.ts",
	"./cvm/query_def.ts": "./datasource/tc_monitor/cvm/query_def.ts",
	"./cynosdb_mysql/datasource": "./datasource/tc_monitor/cynosdb_mysql/datasource.ts",
	"./cynosdb_mysql/datasource.ts": "./datasource/tc_monitor/cynosdb_mysql/datasource.ts",
	"./cynosdb_mysql/query": "./datasource/tc_monitor/cynosdb_mysql/query.ts",
	"./cynosdb_mysql/query.ts": "./datasource/tc_monitor/cynosdb_mysql/query.ts",
	"./cynosdb_mysql/query_def": "./datasource/tc_monitor/cynosdb_mysql/query_def.ts",
	"./cynosdb_mysql/query_def.ts": "./datasource/tc_monitor/cynosdb_mysql/query_def.ts",
	"./dc/datasource": "./datasource/tc_monitor/dc/datasource.ts",
	"./dc/datasource.ts": "./datasource/tc_monitor/dc/datasource.ts",
	"./dc/query": "./datasource/tc_monitor/dc/query.ts",
	"./dc/query.ts": "./datasource/tc_monitor/dc/query.ts",
	"./dc/query_def": "./datasource/tc_monitor/dc/query_def.ts",
	"./dc/query_def.ts": "./datasource/tc_monitor/dc/query_def.ts",
	"./dcdb/datasource": "./datasource/tc_monitor/dcdb/datasource.ts",
	"./dcdb/datasource.ts": "./datasource/tc_monitor/dcdb/datasource.ts",
	"./dcdb/query": "./datasource/tc_monitor/dcdb/query.ts",
	"./dcdb/query.ts": "./datasource/tc_monitor/dcdb/query.ts",
	"./dcdb/query_def": "./datasource/tc_monitor/dcdb/query_def.ts",
	"./dcdb/query_def.ts": "./datasource/tc_monitor/dcdb/query_def.ts",
	"./dcg/datasource": "./datasource/tc_monitor/dcg/datasource.ts",
	"./dcg/datasource.ts": "./datasource/tc_monitor/dcg/datasource.ts",
	"./dcg/query": "./datasource/tc_monitor/dcg/query.ts",
	"./dcg/query.ts": "./datasource/tc_monitor/dcg/query.ts",
	"./dcg/query_def": "./datasource/tc_monitor/dcg/query_def.ts",
	"./dcg/query_def.ts": "./datasource/tc_monitor/dcg/query_def.ts",
	"./dcx/datasource": "./datasource/tc_monitor/dcx/datasource.ts",
	"./dcx/datasource.ts": "./datasource/tc_monitor/dcx/datasource.ts",
	"./dcx/query": "./datasource/tc_monitor/dcx/query.ts",
	"./dcx/query.ts": "./datasource/tc_monitor/dcx/query.ts",
	"./dcx/query_def": "./datasource/tc_monitor/dcx/query_def.ts",
	"./dcx/query_def.ts": "./datasource/tc_monitor/dcx/query_def.ts",
	"./ecdn/datasource": "./datasource/tc_monitor/ecdn/datasource.ts",
	"./ecdn/datasource.ts": "./datasource/tc_monitor/ecdn/datasource.ts",
	"./ecdn/query": "./datasource/tc_monitor/ecdn/query.ts",
	"./ecdn/query.ts": "./datasource/tc_monitor/ecdn/query.ts",
	"./ecdn/query_def": "./datasource/tc_monitor/ecdn/query_def.ts",
	"./ecdn/query_def.ts": "./datasource/tc_monitor/ecdn/query_def.ts",
	"./ecm/datasource": "./datasource/tc_monitor/ecm/datasource.ts",
	"./ecm/datasource.ts": "./datasource/tc_monitor/ecm/datasource.ts",
	"./ecm/query": "./datasource/tc_monitor/ecm/query.ts",
	"./ecm/query.ts": "./datasource/tc_monitor/ecm/query.ts",
	"./ecm/query_def": "./datasource/tc_monitor/ecm/query_def.ts",
	"./ecm/query_def.ts": "./datasource/tc_monitor/ecm/query_def.ts",
	"./ecm_block_storage/datasource": "./datasource/tc_monitor/ecm_block_storage/datasource.ts",
	"./ecm_block_storage/datasource.ts": "./datasource/tc_monitor/ecm_block_storage/datasource.ts",
	"./ecm_block_storage/query": "./datasource/tc_monitor/ecm_block_storage/query.ts",
	"./ecm_block_storage/query.ts": "./datasource/tc_monitor/ecm_block_storage/query.ts",
	"./ecm_block_storage/query_def": "./datasource/tc_monitor/ecm_block_storage/query_def.ts",
	"./ecm_block_storage/query_def.ts": "./datasource/tc_monitor/ecm_block_storage/query_def.ts",
	"./ecm_lb/datasource": "./datasource/tc_monitor/ecm_lb/datasource.ts",
	"./ecm_lb/datasource.ts": "./datasource/tc_monitor/ecm_lb/datasource.ts",
	"./ecm_lb/query": "./datasource/tc_monitor/ecm_lb/query.ts",
	"./ecm_lb/query.ts": "./datasource/tc_monitor/ecm_lb/query.ts",
	"./ecm_lb/query_def": "./datasource/tc_monitor/ecm_lb/query_def.ts",
	"./ecm_lb/query_def.ts": "./datasource/tc_monitor/ecm_lb/query_def.ts",
	"./gse/datasource": "./datasource/tc_monitor/gse/datasource.ts",
	"./gse/datasource.ts": "./datasource/tc_monitor/gse/datasource.ts",
	"./gse/query": "./datasource/tc_monitor/gse/query.ts",
	"./gse/query.ts": "./datasource/tc_monitor/gse/query.ts",
	"./gse/query_def": "./datasource/tc_monitor/gse/query_def.ts",
	"./gse/query_def.ts": "./datasource/tc_monitor/gse/query_def.ts",
	"./index": "./datasource/tc_monitor/index.ts",
	"./index.ts": "./datasource/tc_monitor/index.ts",
	"./lb/datasource": "./datasource/tc_monitor/lb/datasource.ts",
	"./lb/datasource.ts": "./datasource/tc_monitor/lb/datasource.ts",
	"./lb/query": "./datasource/tc_monitor/lb/query.ts",
	"./lb/query.ts": "./datasource/tc_monitor/lb/query.ts",
	"./lb/query_def": "./datasource/tc_monitor/lb/query_def.ts",
	"./lb/query_def.ts": "./datasource/tc_monitor/lb/query_def.ts",
	"./lighthouse/datasource": "./datasource/tc_monitor/lighthouse/datasource.ts",
	"./lighthouse/datasource.ts": "./datasource/tc_monitor/lighthouse/datasource.ts",
	"./lighthouse/query": "./datasource/tc_monitor/lighthouse/query.ts",
	"./lighthouse/query.ts": "./datasource/tc_monitor/lighthouse/query.ts",
	"./lighthouse/query_def": "./datasource/tc_monitor/lighthouse/query_def.ts",
	"./lighthouse/query_def.ts": "./datasource/tc_monitor/lighthouse/query_def.ts",
	"./mongodb/datasource": "./datasource/tc_monitor/mongodb/datasource.ts",
	"./mongodb/datasource.ts": "./datasource/tc_monitor/mongodb/datasource.ts",
	"./mongodb/query": "./datasource/tc_monitor/mongodb/query.ts",
	"./mongodb/query.ts": "./datasource/tc_monitor/mongodb/query.ts",
	"./mongodb/query_def": "./datasource/tc_monitor/mongodb/query_def.ts",
	"./mongodb/query_def.ts": "./datasource/tc_monitor/mongodb/query_def.ts",
	"./mr/datasource": "./datasource/tc_monitor/mr/datasource.ts",
	"./mr/datasource.ts": "./datasource/tc_monitor/mr/datasource.ts",
	"./mr/query": "./datasource/tc_monitor/mr/query.ts",
	"./mr/query.ts": "./datasource/tc_monitor/mr/query.ts",
	"./mr/query_def": "./datasource/tc_monitor/mr/query_def.ts",
	"./mr/query_def.ts": "./datasource/tc_monitor/mr/query_def.ts",
	"./nat_gateway/datasource": "./datasource/tc_monitor/nat_gateway/datasource.ts",
	"./nat_gateway/datasource.ts": "./datasource/tc_monitor/nat_gateway/datasource.ts",
	"./nat_gateway/query": "./datasource/tc_monitor/nat_gateway/query.ts",
	"./nat_gateway/query.ts": "./datasource/tc_monitor/nat_gateway/query.ts",
	"./nat_gateway/query_def": "./datasource/tc_monitor/nat_gateway/query_def.ts",
	"./nat_gateway/query_def.ts": "./datasource/tc_monitor/nat_gateway/query_def.ts",
	"./ov_cdn/datasource": "./datasource/tc_monitor/ov_cdn/datasource.ts",
	"./ov_cdn/datasource.ts": "./datasource/tc_monitor/ov_cdn/datasource.ts",
	"./ov_cdn/query": "./datasource/tc_monitor/ov_cdn/query.ts",
	"./ov_cdn/query.ts": "./datasource/tc_monitor/ov_cdn/query.ts",
	"./ov_cdn/query_def": "./datasource/tc_monitor/ov_cdn/query_def.ts",
	"./ov_cdn/query_def.ts": "./datasource/tc_monitor/ov_cdn/query_def.ts",
	"./pcx/datasource": "./datasource/tc_monitor/pcx/datasource.ts",
	"./pcx/datasource.ts": "./datasource/tc_monitor/pcx/datasource.ts",
	"./pcx/query": "./datasource/tc_monitor/pcx/query.ts",
	"./pcx/query.ts": "./datasource/tc_monitor/pcx/query.ts",
	"./pcx/query_def": "./datasource/tc_monitor/pcx/query_def.ts",
	"./pcx/query_def.ts": "./datasource/tc_monitor/pcx/query_def.ts",
	"./postgresql/datasource": "./datasource/tc_monitor/postgresql/datasource.ts",
	"./postgresql/datasource.ts": "./datasource/tc_monitor/postgresql/datasource.ts",
	"./postgresql/query": "./datasource/tc_monitor/postgresql/query.ts",
	"./postgresql/query.ts": "./datasource/tc_monitor/postgresql/query.ts",
	"./postgresql/query_def": "./datasource/tc_monitor/postgresql/query_def.ts",
	"./postgresql/query_def.ts": "./datasource/tc_monitor/postgresql/query_def.ts",
	"./qaap/datasource": "./datasource/tc_monitor/qaap/datasource.ts",
	"./qaap/datasource.ts": "./datasource/tc_monitor/qaap/datasource.ts",
	"./qaap/query": "./datasource/tc_monitor/qaap/query.ts",
	"./qaap/query.ts": "./datasource/tc_monitor/qaap/query.ts",
	"./qaap/query_def": "./datasource/tc_monitor/qaap/query_def.ts",
	"./qaap/query_def.ts": "./datasource/tc_monitor/qaap/query_def.ts",
	"./redis/datasource": "./datasource/tc_monitor/redis/datasource.ts",
	"./redis/datasource.ts": "./datasource/tc_monitor/redis/datasource.ts",
	"./redis/query": "./datasource/tc_monitor/redis/query.ts",
	"./redis/query.ts": "./datasource/tc_monitor/redis/query.ts",
	"./redis/query_def": "./datasource/tc_monitor/redis/query_def.ts",
	"./redis/query_def.ts": "./datasource/tc_monitor/redis/query_def.ts",
	"./redis_mem/datasource": "./datasource/tc_monitor/redis_mem/datasource.ts",
	"./redis_mem/datasource.ts": "./datasource/tc_monitor/redis_mem/datasource.ts",
	"./redis_mem/query": "./datasource/tc_monitor/redis_mem/query.ts",
	"./redis_mem/query.ts": "./datasource/tc_monitor/redis_mem/query.ts",
	"./redis_mem/query_def": "./datasource/tc_monitor/redis_mem/query_def.ts",
	"./redis_mem/query_def.ts": "./datasource/tc_monitor/redis_mem/query_def.ts",
	"./scf/datasource": "./datasource/tc_monitor/scf/datasource.ts",
	"./scf/datasource.ts": "./datasource/tc_monitor/scf/datasource.ts",
	"./scf/query": "./datasource/tc_monitor/scf/query.ts",
	"./scf/query.ts": "./datasource/tc_monitor/scf/query.ts",
	"./scf/query_def": "./datasource/tc_monitor/scf/query_def.ts",
	"./scf/query_def.ts": "./datasource/tc_monitor/scf/query_def.ts",
	"./sqlserver/datasource": "./datasource/tc_monitor/sqlserver/datasource.ts",
	"./sqlserver/datasource.ts": "./datasource/tc_monitor/sqlserver/datasource.ts",
	"./sqlserver/query": "./datasource/tc_monitor/sqlserver/query.ts",
	"./sqlserver/query.ts": "./datasource/tc_monitor/sqlserver/query.ts",
	"./sqlserver/query_def": "./datasource/tc_monitor/sqlserver/query_def.ts",
	"./sqlserver/query_def.ts": "./datasource/tc_monitor/sqlserver/query_def.ts",
	"./tcaplus/datasource": "./datasource/tc_monitor/tcaplus/datasource.ts",
	"./tcaplus/datasource.ts": "./datasource/tc_monitor/tcaplus/datasource.ts",
	"./tcaplus/query": "./datasource/tc_monitor/tcaplus/query.ts",
	"./tcaplus/query.ts": "./datasource/tc_monitor/tcaplus/query.ts",
	"./tcaplus/query_def": "./datasource/tc_monitor/tcaplus/query_def.ts",
	"./tcaplus/query_def.ts": "./datasource/tc_monitor/tcaplus/query_def.ts",
	"./tdmq/datasource": "./datasource/tc_monitor/tdmq/datasource.ts",
	"./tdmq/datasource.ts": "./datasource/tc_monitor/tdmq/datasource.ts",
	"./tdmq/query": "./datasource/tc_monitor/tdmq/query.ts",
	"./tdmq/query.ts": "./datasource/tc_monitor/tdmq/query.ts",
	"./tdmq/query_def": "./datasource/tc_monitor/tdmq/query_def.ts",
	"./tdmq/query_def.ts": "./datasource/tc_monitor/tdmq/query_def.ts",
	"./tdmq_rabbitmq/datasource": "./datasource/tc_monitor/tdmq_rabbitmq/datasource.ts",
	"./tdmq_rabbitmq/datasource.ts": "./datasource/tc_monitor/tdmq_rabbitmq/datasource.ts",
	"./tdmq_rabbitmq/query": "./datasource/tc_monitor/tdmq_rabbitmq/query.ts",
	"./tdmq_rabbitmq/query.ts": "./datasource/tc_monitor/tdmq_rabbitmq/query.ts",
	"./tdmq_rabbitmq/query_def": "./datasource/tc_monitor/tdmq_rabbitmq/query_def.ts",
	"./tdmq_rabbitmq/query_def.ts": "./datasource/tc_monitor/tdmq_rabbitmq/query_def.ts",
	"./tdmq_rocketmq/datasource": "./datasource/tc_monitor/tdmq_rocketmq/datasource.ts",
	"./tdmq_rocketmq/datasource.ts": "./datasource/tc_monitor/tdmq_rocketmq/datasource.ts",
	"./tdmq_rocketmq/query": "./datasource/tc_monitor/tdmq_rocketmq/query.ts",
	"./tdmq_rocketmq/query.ts": "./datasource/tc_monitor/tdmq_rocketmq/query.ts",
	"./tdmq_rocketmq/query_def": "./datasource/tc_monitor/tdmq_rocketmq/query_def.ts",
	"./tdmq_rocketmq/query_def.ts": "./datasource/tc_monitor/tdmq_rocketmq/query_def.ts",
	"./tke/datasource": "./datasource/tc_monitor/tke/datasource.ts",
	"./tke/datasource.ts": "./datasource/tc_monitor/tke/datasource.ts",
	"./tke/query": "./datasource/tc_monitor/tke/query.ts",
	"./tke/query.ts": "./datasource/tc_monitor/tke/query.ts",
	"./tke/query_def": "./datasource/tc_monitor/tke/query_def.ts",
	"./tke/query_def.ts": "./datasource/tc_monitor/tke/query_def.ts",
	"./tsf/datasource": "./datasource/tc_monitor/tsf/datasource.ts",
	"./tsf/datasource.ts": "./datasource/tc_monitor/tsf/datasource.ts",
	"./tsf/query": "./datasource/tc_monitor/tsf/query.ts",
	"./tsf/query.ts": "./datasource/tc_monitor/tsf/query.ts",
	"./tsf/query_def": "./datasource/tc_monitor/tsf/query_def.ts",
	"./tsf/query_def.ts": "./datasource/tc_monitor/tsf/query_def.ts",
	"./v_clb/datasource": "./datasource/tc_monitor/v_clb/datasource.ts",
	"./v_clb/datasource.ts": "./datasource/tc_monitor/v_clb/datasource.ts",
	"./v_clb/query": "./datasource/tc_monitor/v_clb/query.ts",
	"./v_clb/query.ts": "./datasource/tc_monitor/v_clb/query.ts",
	"./v_clb/query_def": "./datasource/tc_monitor/v_clb/query_def.ts",
	"./v_clb/query_def.ts": "./datasource/tc_monitor/v_clb/query_def.ts",
	"./vbc/datasource": "./datasource/tc_monitor/vbc/datasource.ts",
	"./vbc/datasource.ts": "./datasource/tc_monitor/vbc/datasource.ts",
	"./vbc/query": "./datasource/tc_monitor/vbc/query.ts",
	"./vbc/query.ts": "./datasource/tc_monitor/vbc/query.ts",
	"./vbc/query_def": "./datasource/tc_monitor/vbc/query_def.ts",
	"./vbc/query_def.ts": "./datasource/tc_monitor/vbc/query_def.ts",
	"./vpc_net_detect/datasource": "./datasource/tc_monitor/vpc_net_detect/datasource.ts",
	"./vpc_net_detect/datasource.ts": "./datasource/tc_monitor/vpc_net_detect/datasource.ts",
	"./vpc_net_detect/query": "./datasource/tc_monitor/vpc_net_detect/query.ts",
	"./vpc_net_detect/query.ts": "./datasource/tc_monitor/vpc_net_detect/query.ts",
	"./vpc_net_detect/query_def": "./datasource/tc_monitor/vpc_net_detect/query_def.ts",
	"./vpc_net_detect/query_def.ts": "./datasource/tc_monitor/vpc_net_detect/query_def.ts",
	"./vpngw/datasource": "./datasource/tc_monitor/vpngw/datasource.ts",
	"./vpngw/datasource.ts": "./datasource/tc_monitor/vpngw/datasource.ts",
	"./vpngw/query": "./datasource/tc_monitor/vpngw/query.ts",
	"./vpngw/query.ts": "./datasource/tc_monitor/vpngw/query.ts",
	"./vpngw/query_def": "./datasource/tc_monitor/vpngw/query_def.ts",
	"./vpngw/query_def.ts": "./datasource/tc_monitor/vpngw/query_def.ts",
	"./vpnx/datasource": "./datasource/tc_monitor/vpnx/datasource.ts",
	"./vpnx/datasource.ts": "./datasource/tc_monitor/vpnx/datasource.ts",
	"./vpnx/query": "./datasource/tc_monitor/vpnx/query.ts",
	"./vpnx/query.ts": "./datasource/tc_monitor/vpnx/query.ts",
	"./vpnx/query_def": "./datasource/tc_monitor/vpnx/query_def.ts",
	"./vpnx/query_def.ts": "./datasource/tc_monitor/vpnx/query_def.ts",
	"./waf/datasource": "./datasource/tc_monitor/waf/datasource.ts",
	"./waf/datasource.ts": "./datasource/tc_monitor/waf/datasource.ts",
	"./waf/query": "./datasource/tc_monitor/waf/query.ts",
	"./waf/query.ts": "./datasource/tc_monitor/waf/query.ts",
	"./waf/query_def": "./datasource/tc_monitor/waf/query_def.ts",
	"./waf/query_def.ts": "./datasource/tc_monitor/waf/query_def.ts"
};


function webpackContext(req) {
	var id = webpackContextResolve(req);
	return __webpack_require__(id);
}
function webpackContextResolve(req) {
	if(!__webpack_require__.o(map, req)) {
		var e = new Error("Cannot find module '" + req + "'");
		e.code = 'MODULE_NOT_FOUND';
		throw e;
	}
	return map[req];
}
webpackContext.keys = function webpackContextKeys() {
	return Object.keys(map);
};
webpackContext.resolve = webpackContextResolve;
module.exports = webpackContext;
webpackContext.id = "./datasource/tc_monitor sync recursive ^.*$";

/***/ }),

/***/ "./datasource/tc_monitor sync recursive ^\\.\\/[a-zA-Z]\\w+\\/(datasource)|(query(_def)?)\\.ts$":
/*!***************************************************************************************!*\
  !*** ./datasource/tc_monitor sync ^\.\/[a-zA-Z]\w+\/(datasource)|(query(_def)?)\.ts$ ***!
  \***************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var map = {
	"./_base/query.ts": "./datasource/tc_monitor/_base/query.ts",
	"./apigateway/datasource": "./datasource/tc_monitor/apigateway/datasource.ts",
	"./apigateway/datasource.ts": "./datasource/tc_monitor/apigateway/datasource.ts",
	"./apigateway/query.ts": "./datasource/tc_monitor/apigateway/query.ts",
	"./apigateway/query_def.ts": "./datasource/tc_monitor/apigateway/query_def.ts",
	"./bmIntraLb/datasource": "./datasource/tc_monitor/bmIntraLb/datasource.ts",
	"./bmIntraLb/datasource.ts": "./datasource/tc_monitor/bmIntraLb/datasource.ts",
	"./bmIntraLb/query.ts": "./datasource/tc_monitor/bmIntraLb/query.ts",
	"./bmIntraLb/query_def.ts": "./datasource/tc_monitor/bmIntraLb/query_def.ts",
	"./bm_lb/datasource": "./datasource/tc_monitor/bm_lb/datasource.ts",
	"./bm_lb/datasource.ts": "./datasource/tc_monitor/bm_lb/datasource.ts",
	"./bm_lb/query.ts": "./datasource/tc_monitor/bm_lb/query.ts",
	"./bm_lb/query_def.ts": "./datasource/tc_monitor/bm_lb/query_def.ts",
	"./bm_pcx/datasource": "./datasource/tc_monitor/bm_pcx/datasource.ts",
	"./bm_pcx/datasource.ts": "./datasource/tc_monitor/bm_pcx/datasource.ts",
	"./bm_pcx/query.ts": "./datasource/tc_monitor/bm_pcx/query.ts",
	"./bm_pcx/query_def.ts": "./datasource/tc_monitor/bm_pcx/query_def.ts",
	"./bwp/datasource": "./datasource/tc_monitor/bwp/datasource.ts",
	"./bwp/datasource.ts": "./datasource/tc_monitor/bwp/datasource.ts",
	"./bwp/query.ts": "./datasource/tc_monitor/bwp/query.ts",
	"./bwp/query_def.ts": "./datasource/tc_monitor/bwp/query_def.ts",
	"./cbs/datasource": "./datasource/tc_monitor/cbs/datasource.ts",
	"./cbs/datasource.ts": "./datasource/tc_monitor/cbs/datasource.ts",
	"./cbs/query.ts": "./datasource/tc_monitor/cbs/query.ts",
	"./cbs/query_def.ts": "./datasource/tc_monitor/cbs/query_def.ts",
	"./cdb/datasource": "./datasource/tc_monitor/cdb/datasource.ts",
	"./cdb/datasource.ts": "./datasource/tc_monitor/cdb/datasource.ts",
	"./cdb/query.ts": "./datasource/tc_monitor/cdb/query.ts",
	"./cdb/query_def.ts": "./datasource/tc_monitor/cdb/query_def.ts",
	"./cdn/datasource": "./datasource/tc_monitor/cdn/datasource.ts",
	"./cdn/datasource.ts": "./datasource/tc_monitor/cdn/datasource.ts",
	"./cdn/query.ts": "./datasource/tc_monitor/cdn/query.ts",
	"./cdn/query_def.ts": "./datasource/tc_monitor/cdn/query_def.ts",
	"./cdn_province/datasource": "./datasource/tc_monitor/cdn_province/datasource.ts",
	"./cdn_province/datasource.ts": "./datasource/tc_monitor/cdn_province/datasource.ts",
	"./cdn_province/query.ts": "./datasource/tc_monitor/cdn_province/query.ts",
	"./cdn_province/query_def.ts": "./datasource/tc_monitor/cdn_province/query_def.ts",
	"./ceip_summary/datasource": "./datasource/tc_monitor/ceip_summary/datasource.ts",
	"./ceip_summary/datasource.ts": "./datasource/tc_monitor/ceip_summary/datasource.ts",
	"./ceip_summary/query.ts": "./datasource/tc_monitor/ceip_summary/query.ts",
	"./ceip_summary/query_def.ts": "./datasource/tc_monitor/ceip_summary/query_def.ts",
	"./ces/datasource": "./datasource/tc_monitor/ces/datasource.ts",
	"./ces/datasource.ts": "./datasource/tc_monitor/ces/datasource.ts",
	"./ces/query.ts": "./datasource/tc_monitor/ces/query.ts",
	"./ces/query_def.ts": "./datasource/tc_monitor/ces/query_def.ts",
	"./cfs/datasource": "./datasource/tc_monitor/cfs/datasource.ts",
	"./cfs/datasource.ts": "./datasource/tc_monitor/cfs/datasource.ts",
	"./cfs/query.ts": "./datasource/tc_monitor/cfs/query.ts",
	"./cfs/query_def.ts": "./datasource/tc_monitor/cfs/query_def.ts",
	"./ckafka/datasource": "./datasource/tc_monitor/ckafka/datasource.ts",
	"./ckafka/datasource.ts": "./datasource/tc_monitor/ckafka/datasource.ts",
	"./ckafka/query.ts": "./datasource/tc_monitor/ckafka/query.ts",
	"./ckafka/query_def.ts": "./datasource/tc_monitor/ckafka/query_def.ts",
	"./clb/datasource": "./datasource/tc_monitor/clb/datasource.ts",
	"./clb/datasource.ts": "./datasource/tc_monitor/clb/datasource.ts",
	"./clb/query.ts": "./datasource/tc_monitor/clb/query.ts",
	"./clb/query_def.ts": "./datasource/tc_monitor/clb/query_def.ts",
	"./cls/datasource": "./datasource/tc_monitor/cls/datasource.ts",
	"./cls/datasource.ts": "./datasource/tc_monitor/cls/datasource.ts",
	"./cls/query.ts": "./datasource/tc_monitor/cls/query.ts",
	"./cls/query_def.ts": "./datasource/tc_monitor/cls/query_def.ts",
	"./cmq/datasource": "./datasource/tc_monitor/cmq/datasource.ts",
	"./cmq/datasource.ts": "./datasource/tc_monitor/cmq/datasource.ts",
	"./cmq/query.ts": "./datasource/tc_monitor/cmq/query.ts",
	"./cmq/query_def.ts": "./datasource/tc_monitor/cmq/query_def.ts",
	"./cmq_topic/datasource": "./datasource/tc_monitor/cmq_topic/datasource.ts",
	"./cmq_topic/datasource.ts": "./datasource/tc_monitor/cmq_topic/datasource.ts",
	"./cmq_topic/query.ts": "./datasource/tc_monitor/cmq_topic/query.ts",
	"./cmq_topic/query_def.ts": "./datasource/tc_monitor/cmq_topic/query_def.ts",
	"./cos/datasource": "./datasource/tc_monitor/cos/datasource.ts",
	"./cos/datasource.ts": "./datasource/tc_monitor/cos/datasource.ts",
	"./cos/query_def.ts": "./datasource/tc_monitor/cos/query_def.ts",
	"./cpm/datasource": "./datasource/tc_monitor/cpm/datasource.ts",
	"./cpm/datasource.ts": "./datasource/tc_monitor/cpm/datasource.ts",
	"./cpm/query.ts": "./datasource/tc_monitor/cpm/query.ts",
	"./cpm/query_def.ts": "./datasource/tc_monitor/cpm/query_def.ts",
	"./cvm/datasource": "./datasource/tc_monitor/cvm/datasource.ts",
	"./cvm/datasource.ts": "./datasource/tc_monitor/cvm/datasource.ts",
	"./cvm/query.ts": "./datasource/tc_monitor/cvm/query.ts",
	"./cvm/query_def.ts": "./datasource/tc_monitor/cvm/query_def.ts",
	"./cynosdb_mysql/datasource": "./datasource/tc_monitor/cynosdb_mysql/datasource.ts",
	"./cynosdb_mysql/datasource.ts": "./datasource/tc_monitor/cynosdb_mysql/datasource.ts",
	"./cynosdb_mysql/query.ts": "./datasource/tc_monitor/cynosdb_mysql/query.ts",
	"./cynosdb_mysql/query_def.ts": "./datasource/tc_monitor/cynosdb_mysql/query_def.ts",
	"./dc/datasource": "./datasource/tc_monitor/dc/datasource.ts",
	"./dc/datasource.ts": "./datasource/tc_monitor/dc/datasource.ts",
	"./dc/query.ts": "./datasource/tc_monitor/dc/query.ts",
	"./dc/query_def.ts": "./datasource/tc_monitor/dc/query_def.ts",
	"./dcdb/datasource": "./datasource/tc_monitor/dcdb/datasource.ts",
	"./dcdb/datasource.ts": "./datasource/tc_monitor/dcdb/datasource.ts",
	"./dcdb/query.ts": "./datasource/tc_monitor/dcdb/query.ts",
	"./dcdb/query_def.ts": "./datasource/tc_monitor/dcdb/query_def.ts",
	"./dcg/datasource": "./datasource/tc_monitor/dcg/datasource.ts",
	"./dcg/datasource.ts": "./datasource/tc_monitor/dcg/datasource.ts",
	"./dcg/query.ts": "./datasource/tc_monitor/dcg/query.ts",
	"./dcg/query_def.ts": "./datasource/tc_monitor/dcg/query_def.ts",
	"./dcx/datasource": "./datasource/tc_monitor/dcx/datasource.ts",
	"./dcx/datasource.ts": "./datasource/tc_monitor/dcx/datasource.ts",
	"./dcx/query.ts": "./datasource/tc_monitor/dcx/query.ts",
	"./dcx/query_def.ts": "./datasource/tc_monitor/dcx/query_def.ts",
	"./ecdn/datasource": "./datasource/tc_monitor/ecdn/datasource.ts",
	"./ecdn/datasource.ts": "./datasource/tc_monitor/ecdn/datasource.ts",
	"./ecdn/query.ts": "./datasource/tc_monitor/ecdn/query.ts",
	"./ecdn/query_def.ts": "./datasource/tc_monitor/ecdn/query_def.ts",
	"./ecm/datasource": "./datasource/tc_monitor/ecm/datasource.ts",
	"./ecm/datasource.ts": "./datasource/tc_monitor/ecm/datasource.ts",
	"./ecm/query.ts": "./datasource/tc_monitor/ecm/query.ts",
	"./ecm/query_def.ts": "./datasource/tc_monitor/ecm/query_def.ts",
	"./ecm_block_storage/datasource": "./datasource/tc_monitor/ecm_block_storage/datasource.ts",
	"./ecm_block_storage/datasource.ts": "./datasource/tc_monitor/ecm_block_storage/datasource.ts",
	"./ecm_block_storage/query.ts": "./datasource/tc_monitor/ecm_block_storage/query.ts",
	"./ecm_block_storage/query_def.ts": "./datasource/tc_monitor/ecm_block_storage/query_def.ts",
	"./ecm_lb/datasource": "./datasource/tc_monitor/ecm_lb/datasource.ts",
	"./ecm_lb/datasource.ts": "./datasource/tc_monitor/ecm_lb/datasource.ts",
	"./ecm_lb/query.ts": "./datasource/tc_monitor/ecm_lb/query.ts",
	"./ecm_lb/query_def.ts": "./datasource/tc_monitor/ecm_lb/query_def.ts",
	"./gse/datasource": "./datasource/tc_monitor/gse/datasource.ts",
	"./gse/datasource.ts": "./datasource/tc_monitor/gse/datasource.ts",
	"./gse/query.ts": "./datasource/tc_monitor/gse/query.ts",
	"./gse/query_def.ts": "./datasource/tc_monitor/gse/query_def.ts",
	"./lb/datasource": "./datasource/tc_monitor/lb/datasource.ts",
	"./lb/datasource.ts": "./datasource/tc_monitor/lb/datasource.ts",
	"./lb/query.ts": "./datasource/tc_monitor/lb/query.ts",
	"./lb/query_def.ts": "./datasource/tc_monitor/lb/query_def.ts",
	"./lighthouse/datasource": "./datasource/tc_monitor/lighthouse/datasource.ts",
	"./lighthouse/datasource.ts": "./datasource/tc_monitor/lighthouse/datasource.ts",
	"./lighthouse/query.ts": "./datasource/tc_monitor/lighthouse/query.ts",
	"./lighthouse/query_def.ts": "./datasource/tc_monitor/lighthouse/query_def.ts",
	"./mongodb/datasource": "./datasource/tc_monitor/mongodb/datasource.ts",
	"./mongodb/datasource.ts": "./datasource/tc_monitor/mongodb/datasource.ts",
	"./mongodb/query.ts": "./datasource/tc_monitor/mongodb/query.ts",
	"./mongodb/query_def.ts": "./datasource/tc_monitor/mongodb/query_def.ts",
	"./mr/datasource": "./datasource/tc_monitor/mr/datasource.ts",
	"./mr/datasource.ts": "./datasource/tc_monitor/mr/datasource.ts",
	"./mr/query.ts": "./datasource/tc_monitor/mr/query.ts",
	"./mr/query_def.ts": "./datasource/tc_monitor/mr/query_def.ts",
	"./nat_gateway/datasource": "./datasource/tc_monitor/nat_gateway/datasource.ts",
	"./nat_gateway/datasource.ts": "./datasource/tc_monitor/nat_gateway/datasource.ts",
	"./nat_gateway/query.ts": "./datasource/tc_monitor/nat_gateway/query.ts",
	"./nat_gateway/query_def.ts": "./datasource/tc_monitor/nat_gateway/query_def.ts",
	"./ov_cdn/datasource": "./datasource/tc_monitor/ov_cdn/datasource.ts",
	"./ov_cdn/datasource.ts": "./datasource/tc_monitor/ov_cdn/datasource.ts",
	"./ov_cdn/query.ts": "./datasource/tc_monitor/ov_cdn/query.ts",
	"./ov_cdn/query_def.ts": "./datasource/tc_monitor/ov_cdn/query_def.ts",
	"./pcx/datasource": "./datasource/tc_monitor/pcx/datasource.ts",
	"./pcx/datasource.ts": "./datasource/tc_monitor/pcx/datasource.ts",
	"./pcx/query.ts": "./datasource/tc_monitor/pcx/query.ts",
	"./pcx/query_def.ts": "./datasource/tc_monitor/pcx/query_def.ts",
	"./postgresql/datasource": "./datasource/tc_monitor/postgresql/datasource.ts",
	"./postgresql/datasource.ts": "./datasource/tc_monitor/postgresql/datasource.ts",
	"./postgresql/query.ts": "./datasource/tc_monitor/postgresql/query.ts",
	"./postgresql/query_def.ts": "./datasource/tc_monitor/postgresql/query_def.ts",
	"./qaap/datasource": "./datasource/tc_monitor/qaap/datasource.ts",
	"./qaap/datasource.ts": "./datasource/tc_monitor/qaap/datasource.ts",
	"./qaap/query.ts": "./datasource/tc_monitor/qaap/query.ts",
	"./qaap/query_def.ts": "./datasource/tc_monitor/qaap/query_def.ts",
	"./redis/datasource": "./datasource/tc_monitor/redis/datasource.ts",
	"./redis/datasource.ts": "./datasource/tc_monitor/redis/datasource.ts",
	"./redis/query.ts": "./datasource/tc_monitor/redis/query.ts",
	"./redis/query_def.ts": "./datasource/tc_monitor/redis/query_def.ts",
	"./redis_mem/datasource": "./datasource/tc_monitor/redis_mem/datasource.ts",
	"./redis_mem/datasource.ts": "./datasource/tc_monitor/redis_mem/datasource.ts",
	"./redis_mem/query.ts": "./datasource/tc_monitor/redis_mem/query.ts",
	"./redis_mem/query_def.ts": "./datasource/tc_monitor/redis_mem/query_def.ts",
	"./scf/datasource": "./datasource/tc_monitor/scf/datasource.ts",
	"./scf/datasource.ts": "./datasource/tc_monitor/scf/datasource.ts",
	"./scf/query.ts": "./datasource/tc_monitor/scf/query.ts",
	"./scf/query_def.ts": "./datasource/tc_monitor/scf/query_def.ts",
	"./sqlserver/datasource": "./datasource/tc_monitor/sqlserver/datasource.ts",
	"./sqlserver/datasource.ts": "./datasource/tc_monitor/sqlserver/datasource.ts",
	"./sqlserver/query.ts": "./datasource/tc_monitor/sqlserver/query.ts",
	"./sqlserver/query_def.ts": "./datasource/tc_monitor/sqlserver/query_def.ts",
	"./tcaplus/datasource": "./datasource/tc_monitor/tcaplus/datasource.ts",
	"./tcaplus/datasource.ts": "./datasource/tc_monitor/tcaplus/datasource.ts",
	"./tcaplus/query.ts": "./datasource/tc_monitor/tcaplus/query.ts",
	"./tcaplus/query_def.ts": "./datasource/tc_monitor/tcaplus/query_def.ts",
	"./tdmq/datasource": "./datasource/tc_monitor/tdmq/datasource.ts",
	"./tdmq/datasource.ts": "./datasource/tc_monitor/tdmq/datasource.ts",
	"./tdmq/query.ts": "./datasource/tc_monitor/tdmq/query.ts",
	"./tdmq/query_def.ts": "./datasource/tc_monitor/tdmq/query_def.ts",
	"./tdmq_rabbitmq/datasource": "./datasource/tc_monitor/tdmq_rabbitmq/datasource.ts",
	"./tdmq_rabbitmq/datasource.ts": "./datasource/tc_monitor/tdmq_rabbitmq/datasource.ts",
	"./tdmq_rabbitmq/query.ts": "./datasource/tc_monitor/tdmq_rabbitmq/query.ts",
	"./tdmq_rabbitmq/query_def.ts": "./datasource/tc_monitor/tdmq_rabbitmq/query_def.ts",
	"./tdmq_rocketmq/datasource": "./datasource/tc_monitor/tdmq_rocketmq/datasource.ts",
	"./tdmq_rocketmq/datasource.ts": "./datasource/tc_monitor/tdmq_rocketmq/datasource.ts",
	"./tdmq_rocketmq/query.ts": "./datasource/tc_monitor/tdmq_rocketmq/query.ts",
	"./tdmq_rocketmq/query_def.ts": "./datasource/tc_monitor/tdmq_rocketmq/query_def.ts",
	"./tke/datasource": "./datasource/tc_monitor/tke/datasource.ts",
	"./tke/datasource.ts": "./datasource/tc_monitor/tke/datasource.ts",
	"./tke/query.ts": "./datasource/tc_monitor/tke/query.ts",
	"./tke/query_def.ts": "./datasource/tc_monitor/tke/query_def.ts",
	"./tsf/datasource": "./datasource/tc_monitor/tsf/datasource.ts",
	"./tsf/datasource.ts": "./datasource/tc_monitor/tsf/datasource.ts",
	"./tsf/query.ts": "./datasource/tc_monitor/tsf/query.ts",
	"./tsf/query_def.ts": "./datasource/tc_monitor/tsf/query_def.ts",
	"./v_clb/datasource": "./datasource/tc_monitor/v_clb/datasource.ts",
	"./v_clb/datasource.ts": "./datasource/tc_monitor/v_clb/datasource.ts",
	"./v_clb/query.ts": "./datasource/tc_monitor/v_clb/query.ts",
	"./v_clb/query_def.ts": "./datasource/tc_monitor/v_clb/query_def.ts",
	"./vbc/datasource": "./datasource/tc_monitor/vbc/datasource.ts",
	"./vbc/datasource.ts": "./datasource/tc_monitor/vbc/datasource.ts",
	"./vbc/query.ts": "./datasource/tc_monitor/vbc/query.ts",
	"./vbc/query_def.ts": "./datasource/tc_monitor/vbc/query_def.ts",
	"./vpc_net_detect/datasource": "./datasource/tc_monitor/vpc_net_detect/datasource.ts",
	"./vpc_net_detect/datasource.ts": "./datasource/tc_monitor/vpc_net_detect/datasource.ts",
	"./vpc_net_detect/query.ts": "./datasource/tc_monitor/vpc_net_detect/query.ts",
	"./vpc_net_detect/query_def.ts": "./datasource/tc_monitor/vpc_net_detect/query_def.ts",
	"./vpngw/datasource": "./datasource/tc_monitor/vpngw/datasource.ts",
	"./vpngw/datasource.ts": "./datasource/tc_monitor/vpngw/datasource.ts",
	"./vpngw/query.ts": "./datasource/tc_monitor/vpngw/query.ts",
	"./vpngw/query_def.ts": "./datasource/tc_monitor/vpngw/query_def.ts",
	"./vpnx/datasource": "./datasource/tc_monitor/vpnx/datasource.ts",
	"./vpnx/datasource.ts": "./datasource/tc_monitor/vpnx/datasource.ts",
	"./vpnx/query.ts": "./datasource/tc_monitor/vpnx/query.ts",
	"./vpnx/query_def.ts": "./datasource/tc_monitor/vpnx/query_def.ts",
	"./waf/datasource": "./datasource/tc_monitor/waf/datasource.ts",
	"./waf/datasource.ts": "./datasource/tc_monitor/waf/datasource.ts",
	"./waf/query.ts": "./datasource/tc_monitor/waf/query.ts",
	"./waf/query_def.ts": "./datasource/tc_monitor/waf/query_def.ts"
};


function webpackContext(req) {
	var id = webpackContextResolve(req);
	return __webpack_require__(id);
}
function webpackContextResolve(req) {
	if(!__webpack_require__.o(map, req)) {
		var e = new Error("Cannot find module '" + req + "'");
		e.code = 'MODULE_NOT_FOUND';
		throw e;
	}
	return map[req];
}
webpackContext.keys = function webpackContextKeys() {
	return Object.keys(map);
};
webpackContext.resolve = webpackContextResolve;
module.exports = webpackContext;
webpackContext.id = "./datasource/tc_monitor sync recursive ^\\.\\/[a-zA-Z]\\w+\\/(datasource)|(query(_def)?)\\.ts$";

/***/ }),

/***/ "./datasource/tc_monitor/MonitorDatasource.ts":
/*!****************************************************!*\
  !*** ./datasource/tc_monitor/MonitorDatasource.ts ***!
  \****************************************************/
/*! exports provided: TCMonitorDatasource */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TCMonitorDatasource", function() { return TCMonitorDatasource; });
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lodash */ "lodash");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./index */ "./datasource/tc_monitor/index.ts");
/* harmony import */ var _common_constants__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../common/constants */ "./datasource/common/constants.ts");
/* harmony import */ var _common_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../common/utils */ "./datasource/common/utils.ts");
/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @grafana/data */ "@grafana/data");
/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_grafana_data__WEBPACK_IMPORTED_MODULE_4__);






var TCMonitorDatasource =
/** @class */
function () {
  TCMonitorDatasource.$inject = ["instanceSettings", "backendSrv", "templateSrv"];

  /** @ngInject */
  function TCMonitorDatasource(instanceSettings, backendSrv, templateSrv) {
    var _this = this;

    this.instanceSettings = instanceSettings;
    this.backendSrv = backendSrv;
    this.templateSrv = templateSrv;

    lodash__WEBPACK_IMPORTED_MODULE_0___default.a.forEach(_index__WEBPACK_IMPORTED_MODULE_1__["Datasources"], function (_class, key) {
      _this[key] = new _class(_this.instanceSettings, _this.backendSrv, _this.templateSrv);
    });
  } // 根据 Datasource Config 配置时勾选的监控服务项，获取相应的命名空间


  TCMonitorDatasource.prototype.getNamespaces = function () {
    var _this = this;

    var namespaces = [];

    lodash__WEBPACK_IMPORTED_MODULE_0___default.a.forEach(_index__WEBPACK_IMPORTED_MODULE_1__["SERVICES"], function (service) {
      if (_this.instanceSettings.jsonData[service.service] === true) {
        // namespaces.push(service.namespace);
        namespaces.push(service);
      }
    });

    return namespaces;
  };

  TCMonitorDatasource.prototype.getCascaderNamespaces = function () {
    var _this = this;

    var validServices = _index__WEBPACK_IMPORTED_MODULE_1__["SERVICES"].filter(function (service) {
      return _this.instanceSettings.jsonData[service.service];
    });
    return Object(_common_utils__WEBPACK_IMPORTED_MODULE_3__["serviceGroupBy"])(validServices);
  };

  TCMonitorDatasource.prototype.getSelectedServices = function () {
    var namespaces = this.getNamespaces();
    return lodash__WEBPACK_IMPORTED_MODULE_0___default.a.map(namespaces, function (_a) {
      var namespace = _a.namespace;
      return Object(_common_constants__WEBPACK_IMPORTED_MODULE_2__["GetServiceFromNamespace"])(namespace);
    });
  };
  /**
   * 根据 Panel 的配置项，获取相应的监控数据
   *
   * @param options Panel 的配置参数，示例如下
   *  {
   *     cacheTimeout: undefined,
   *     dashboardId: 41,
   *     interval: "30s",
   *     intervalMs: 30000,
   *     maxDataPoints: 554,
   *     panelId: 2,
   *     range: {
   *        from: Moment,
   *        to: Moment,
   *        raw: {from: "now-6h", to: "now"}
   *     },
   *     rangeRaw: {from: "now-6h", to: "now"},
   *     scopedVars: {__interval: {…}, __interval_ms: {…}}
   *     targets: [
   *       {
   *          namespace: "QCE/CVM",
   *          refId: "A",
   *          service: "cvm",
   *          showInstanceDetails: false,
   *          cvm: {
   *            dimensionObject: {InstanceId: {…}}
   *            instance: "",
   *            instanceAlias: "InstanceId",
   *            metricName: "AccOuttraffic",
   *            metricUnit: "MB",
   *            period: 10,
   *            queries: {Filters: {…}, InstanceIds: Array(1), Limit: 20, Offset: 0, filtersChecked: false, …},
   *            region: "ap-beijing"
   *          },
   *          cdb: {},
   *       },
   *     ],
   *     timezone: "browser"
   *   }
   * @return 返回数据对象，示例如下
   * {
   *   data: [
   *     {
   *       "target": "AccOuttraffic - ins-123",
   *       "datapoints": [
   *         [861, 1450754160000],
   *         [767, 1450754220000]
   *       ]
   *     }
   *   ]
   * }
   */


  TCMonitorDatasource.prototype.query = function (options) {
    var _this = this;

    var promises = [];
    var services = this.getSelectedServices();

    lodash__WEBPACK_IMPORTED_MODULE_0___default.a.forEach(services, function (service) {
      var optionsTemp = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.cloneDeep(options);

      var targets = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.filter(optionsTemp.targets, function (item) {
        return item.service === service;
      });

      optionsTemp.targets = targets;

      if (optionsTemp.targets.length > 0) {
        var promiseTemp = _this["".concat(lodash__WEBPACK_IMPORTED_MODULE_0___default.a.toUpper(service), "Datasource")].query(optionsTemp);

        if (promiseTemp) {
          promises.push(promiseTemp);
        }
      }
    });

    if (promises.length === 0) {
      return Promise.resolve({
        data: [],
        state: _grafana_data__WEBPACK_IMPORTED_MODULE_4__["LoadingState"].Done
      });
    }

    return Promise.all(promises).then(function (results) {
      return {
        data: lodash__WEBPACK_IMPORTED_MODULE_0___default.a.flatten(results),
        state: _grafana_data__WEBPACK_IMPORTED_MODULE_4__["LoadingState"].Done
      };
    });
  };
  /**
   * 获取模板变量的选择项列表
   *
   * @param query 模板变量配置填写的 Query 参数字符串
   */


  TCMonitorDatasource.prototype.metricFindQuery = function (query, options) {
    var queries = Object(_common_constants__WEBPACK_IMPORTED_MODULE_2__["ParseMetricQuery"])(query);
    var service = Object(_common_constants__WEBPACK_IMPORTED_MODULE_2__["GetServiceFromNamespace"])(queries['namespace'] || '');

    if (lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isEmpty(queries) || !queries['namespace'] || !queries['action'] || !service) {
      return Promise.resolve([]);
    }

    if (this["".concat(lodash__WEBPACK_IMPORTED_MODULE_0___default.a.toUpper(service), "Datasource")].metricFindQuery) {
      var result = this["".concat(lodash__WEBPACK_IMPORTED_MODULE_0___default.a.toUpper(service), "Datasource")].metricFindQuery(queries, lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(options, 'variable.regex', undefined));

      if (result) {
        return result;
      }
    }

    return Promise.resolve([]);
  };
  /**
   * 获取地域列表
   * @param service
   */


  TCMonitorDatasource.prototype.getRegions = function (service) {
    if (this["".concat(lodash__WEBPACK_IMPORTED_MODULE_0___default.a.toUpper(service), "Datasource")].getRegions) {
      return this["".concat(lodash__WEBPACK_IMPORTED_MODULE_0___default.a.toUpper(service), "Datasource")].getRegions();
    }

    return [];
  };
  /**
   * 获取监控指标列表
   * @param service
   * @param region
   */


  TCMonitorDatasource.prototype.getMetrics = function (service, region) {
    return this["".concat(lodash__WEBPACK_IMPORTED_MODULE_0___default.a.toUpper(service), "Datasource")].getMetrics(region);
  };
  /**
   * 获取可用区列表
   * @param service
   * @param region
   */


  TCMonitorDatasource.prototype.getZones = function (service, region) {
    if (this["".concat(lodash__WEBPACK_IMPORTED_MODULE_0___default.a.toUpper(service), "Datasource")].getZones) {
      return this["".concat(lodash__WEBPACK_IMPORTED_MODULE_0___default.a.toUpper(service), "Datasource")].getZones(region);
    }

    return [];
  };
  /**
   * 获取filter中dropdown列表
   * @param service
   * @param param
   */


  TCMonitorDatasource.prototype.getFilterDropdown = function (service, param) {
    if (this["".concat(lodash__WEBPACK_IMPORTED_MODULE_0___default.a.toUpper(service), "Datasource")].getFilterDropdown) {
      return this["".concat(lodash__WEBPACK_IMPORTED_MODULE_0___default.a.toUpper(service), "Datasource")].getFilterDropdown(param);
    }

    return [];
  };
  /**
   * 获取实例列表
   * @param service
   * @param region
   * @param params
   */


  TCMonitorDatasource.prototype.getInstances = function (service, region, params) {
    return this["".concat(lodash__WEBPACK_IMPORTED_MODULE_0___default.a.toUpper(service), "Datasource")].getInstances(region, params);
  };
  /**
   * 获取监听器列表
   * @param service
   * @param region
   * @param params
   */


  TCMonitorDatasource.prototype.getListeners = function (service, region, instance) {
    if (!this["".concat(lodash__WEBPACK_IMPORTED_MODULE_0___default.a.toUpper(service), "Datasource")].getListeners) {
      return [];
    }

    return this["".concat(lodash__WEBPACK_IMPORTED_MODULE_0___default.a.toUpper(service), "Datasource")].getListeners(region, instance);
  };
  /**
   * 获取 私有网络列表
   * @param service
   */


  TCMonitorDatasource.prototype.getVpcIds = function (service, region) {
    if (this["".concat(lodash__WEBPACK_IMPORTED_MODULE_0___default.a.toUpper(service), "Datasource")].getVpcIds) {
      return this["".concat(lodash__WEBPACK_IMPORTED_MODULE_0___default.a.toUpper(service), "Datasource")].getVpcIds(region);
    }
  }; // 在 Datasource Config 配置时，验证 SerectId、SerectKey 的有效性，并测试勾选的监控服务项的对应 API 连通性


  TCMonitorDatasource.prototype.testDatasource = function () {
    var _this = this;

    var promises = [];
    var services = this.getSelectedServices();

    lodash__WEBPACK_IMPORTED_MODULE_0___default.a.forEach(services, function (service) {
      promises.push(_this["".concat(lodash__WEBPACK_IMPORTED_MODULE_0___default.a.toUpper(service), "Datasource")].testDatasource());
    });

    if (promises.length === 0) {
      return Promise.resolve(null);
    }

    return Promise.all(promises).then(function (results) {
      var status = 'success';
      var message = 'DataSource Connection OK';

      var errorMsg = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.reduce(results, function (acc, cur) {
        if (cur.status === 'error') {
          if (acc === '') acc += 'Oops! Found an error in: ';
          acc += "".concat(cur.service, ": ").concat(cur.message, "; \n");
        }

        return acc;
      }, '');

      if (errorMsg) {
        status = 'error';
        message = errorMsg;
      }

      return {
        status: status,
        message: message,
        title: lodash__WEBPACK_IMPORTED_MODULE_0___default.a.upperFirst(status)
      };
    });
  };

  TCMonitorDatasource.prototype.getServiceFn = function (service, fnName) {
    var _this = this;

    return function () {
      var _a;

      var argu = [];

      for (var _i = 0; _i < arguments.length; _i++) {
        argu[_i] = arguments[_i];
      }

      if (!_this["".concat(lodash__WEBPACK_IMPORTED_MODULE_0___default.a.toUpper(service), "Datasource")][fnName]) {
        return [];
      }

      return (_a = _this["".concat(lodash__WEBPACK_IMPORTED_MODULE_0___default.a.toUpper(service), "Datasource")])[fnName].apply(_a, argu);
    };
  };

  return TCMonitorDatasource;
}();



/***/ }),

/***/ "./datasource/tc_monitor/_base/datasource.ts":
/*!***************************************************!*\
  !*** ./datasource/tc_monitor/_base/datasource.ts ***!
  \***************************************************/
/*! exports provided: BaseDatasource */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BaseDatasource", function() { return BaseDatasource; });
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lodash */ "lodash");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! moment */ "moment");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _common_constants__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../common/constants */ "./datasource/common/constants.ts");
/* harmony import */ var _common_datasourceStorage__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../common/datasourceStorage */ "./datasource/common/datasourceStorage.ts");
/* harmony import */ var _common_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../common/utils */ "./datasource/common/utils.ts");
/* harmony import */ var _locale__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../locale */ "./locale/index.ts");
var __assign = undefined && undefined.__assign || function () {
  __assign = Object.assign || function (t) {
    for (var s, i = 1, n = arguments.length; i < n; i++) {
      s = arguments[i];

      for (var p in s) {
        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
      }
    }

    return t;
  };

  return __assign.apply(this, arguments);
};

var __awaiter = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {
  function adopt(value) {
    return value instanceof P ? value : new P(function (resolve) {
      resolve(value);
    });
  }

  return new (P || (P = Promise))(function (resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }

    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }

    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }

    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};

var __generator = undefined && undefined.__generator || function (thisArg, body) {
  var _ = {
    label: 0,
    sent: function sent() {
      if (t[0] & 1) throw t[1];
      return t[1];
    },
    trys: [],
    ops: []
  },
      f,
      y,
      t,
      g;
  return g = {
    next: verb(0),
    "throw": verb(1),
    "return": verb(2)
  }, typeof Symbol === "function" && (g[Symbol.iterator] = function () {
    return this;
  }), g;

  function verb(n) {
    return function (v) {
      return step([n, v]);
    };
  }

  function step(op) {
    if (f) throw new TypeError("Generator is already executing.");

    while (_) {
      try {
        if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
        if (y = 0, t) op = [op[0] & 2, t.value];

        switch (op[0]) {
          case 0:
          case 1:
            t = op;
            break;

          case 4:
            _.label++;
            return {
              value: op[1],
              done: false
            };

          case 5:
            _.label++;
            y = op[1];
            op = [0];
            continue;

          case 7:
            op = _.ops.pop();

            _.trys.pop();

            continue;

          default:
            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
              _ = 0;
              continue;
            }

            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
              _.label = op[1];
              break;
            }

            if (op[0] === 6 && _.label < t[1]) {
              _.label = t[1];
              t = op;
              break;
            }

            if (t && _.label < t[2]) {
              _.label = t[2];

              _.ops.push(op);

              break;
            }

            if (t[2]) _.ops.pop();

            _.trys.pop();

            continue;
        }

        op = body.call(thisArg, _);
      } catch (e) {
        op = [6, e];
        y = 0;
      } finally {
        f = t = 0;
      }
    }

    if (op[0] & 5) throw op[1];
    return {
      value: op[0] ? op[1] : void 0,
      done: true
    };
  }
};

var __spreadArray = undefined && undefined.__spreadArray || function (to, from, pack) {
  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {
    if (ar || !(i in from)) {
      if (!ar) ar = Array.prototype.slice.call(from, 0, i);
      ar[i] = from[i];
    }
  }
  return to.concat(ar || Array.prototype.slice.call(from));
};








var BaseDatasource =
/** @class */
function () {
  BaseDatasource.$inject = ["instanceSettings", "backendSrv", "templateSrv"];

  /** @ngInject */
  function BaseDatasource(instanceSettings, backendSrv, templateSrv) {
    this.instanceListCache = [];
    this.extraMetricDims = [];
    this.checkKeys = [];
    this.MetricReqConfig = {};
    this.extrasAlias = [];
    /*
    一个配置：(用于处理除了InstanceId之外的)(Record中的key是指标修正之后的维度，即通过InvalidDemsion处理后)
    1 dim_KeyInStorage 指标中维度dimension对应的storage中的key，获取缓存列表，sourceMapList、
    2 dim_KeyInTarget 通过getVariable方法获取变量中选中项。比如ListnerId为Lis-xxxx；即：STATE中的key。为空则取即通过InvalidDemsion处理后的key
    3 dim_KeyInMap 保存在模板变量value比如（监听器ID）源自sourceMapList（接口返回内容）的哪个key（ListenerId）。即：templateQueryIdMap中内容。联合上面2的内容筛选出原始sourceMap
    4 通过这个dim和sourceMap获取维度值。即sourceMap[dim]
    */

    this.queryMonitorExtraConfg = {};
    this.CandiateDimensions = {};
    this.instanceSettings = instanceSettings;
    this.backendSrv = backendSrv;
    this.templateSrv = templateSrv;
    this.url = instanceSettings.url;
    this.secretId = (instanceSettings.jsonData || {}).secretId || '';
    Object(_locale__WEBPACK_IMPORTED_MODULE_5__["setLanguage"])(instanceSettings.jsonData.language || _locale__WEBPACK_IMPORTED_MODULE_5__["Language"].Chinese);
  }

  Object.defineProperty(BaseDatasource.prototype, "namespace", {
    get: function get() {
      // 需要注意的是this.service来自于原型上，在实例中导入时注入
      return this.Namespace || Object(_common_utils__WEBPACK_IMPORTED_MODULE_4__["getNamesapceFromService"])(this.service);
    },
    enumerable: false,
    configurable: true
  }); // 获取额外要显示到图例里的内容

  BaseDatasource.prototype.getOtherAlias = function (instance, target) {
    var _this = this;

    var _a;

    var result = '';
    var alias = instance._InstanceAliasValue;
    (_a = this.extrasAlias) === null || _a === void 0 ? void 0 : _a.forEach(function (extra) {
      var extraAlia = _this.getVariable(target[extra]);

      if (extraAlia && alias.indexOf(extraAlia) === -1) {
        result += " - ".concat(extraAlia);
      }
    });
    return result;
  };
  /* 格式化模板变量上的显示 */


  BaseDatasource.prototype.getAliasValue = function (instance, alias) {
    var result = instance[alias];
    return Array.isArray(result) ? result.join() : result;
  };

  BaseDatasource.prototype.formatVarDisplay = function (instance, displayTpl, instanceAlias) {
    var _this = this; // 获取display=aaa${InstanceName}bbb${InstanceId}ccc


    if (displayTpl) {
      return displayTpl.replace(/\$\{(\w+)\}/g, function (a, b) {
        if (!b || !_this.InstanceAliasList.includes(b)) {
          return '';
        }

        return _this.getAliasValue(instance, b);
      });
    }

    return this.getAliasValue(instance, instanceAlias);
  };
  /**
   * @param query 模板变量配置填写的 Query 参数对象，由顶层将字符串转换为了对象
   */


  BaseDatasource.prototype.metricFindQuery = function (query, regex) {
    var _a;

    return __awaiter(this, void 0, void 0, function () {
      var action, namespace, display, _b, payload, region, _c, instancealias, regionQuery, result, res, instance, instanceCache, error_1;

      var _this = this;

      return __generator(this, function (_d) {
        switch (_d.label) {
          case 0:
            action = query.action, namespace = query.namespace, display = query.display, _b = query.payload, payload = _b === void 0 ? {} : _b;
            region = query.region, _c = query.instancealias, instancealias = _c === void 0 ? this.templateQueryIdMap.instance : _c;

            if (!action || !namespace) {
              return [2
              /*return*/
              , []];
            } // 支持payload里传入模板变量


            if (lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isObject(payload)) {
              lodash__WEBPACK_IMPORTED_MODULE_0___default.a.forEach(payload, function (value, key) {
                payload[key] = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isString(value) ? _this.getVariable(value) : value;
              });
            }

            regionQuery = action.match(/^DescribeRegions$/i);

            if (regionQuery) {
              return [2
              /*return*/
              , this.getRegions()];
            }

            region = this.getVariable(region); // 将模板region转换为真实值

            if (!(region && action.match(/^DescribeInstances/i))) return [3
            /*break*/
            , 3];
            return [4
            /*yield*/
            , this.getVariableInstances(region, payload)];

          case 1:
            result = _d.sent();
            instancealias = this.InstanceAliasList.includes(instancealias) ? instancealias : this.templateQueryIdMap.instance;
            res = result.flatMap(function (item) {
              var insAlias = _this.formatVarDisplay(item, display, instancealias);

              item._InstanceAliasValue = insAlias; // FIXME:

              if (!item[instancealias]) return [];
              return [{
                text: insAlias,
                value: item[_this.templateQueryIdMap.instance]
              }];
            }); // 缓存全量实例列表

            return [4
            /*yield*/
            , _common_datasourceStorage__WEBPACK_IMPORTED_MODULE_3__["default"].setInstance(this.service, result)];

          case 2:
            // 缓存全量实例列表
            _d.sent();

            return [2
            /*return*/
            , res];

          case 3:
            instance = this.getVariable(query['instance']);
            if (lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isArray(instance)) instance = instance[0]; // 有额外维度，仅支持实例单选情况

            if (!(region && action && instance)) return [3
            /*break*/
            , 8];
            _d.label = 4;

          case 4:
            _d.trys.push([4, 6,, 7]);

            return [4
            /*yield*/
            , _common_datasourceStorage__WEBPACK_IMPORTED_MODULE_3__["default"].getInstance(this.service)];

          case 5:
            instanceCache = _d.sent();
            instance = (_a = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.cloneDeep(instanceCache.find(function (item) {
              return item[_this.templateQueryIdMap.instance] === instance;
            }))) !== null && _a !== void 0 ? _a : {};
            return [3
            /*break*/
            , 7];

          case 6:
            error_1 = _d.sent();
            return [3
            /*break*/
            , 7];

          case 7:
            return [2
            /*return*/
            , this.fetchMetricData(action, region, instance, query)];

          case 8:
            return [2
            /*return*/
            , Promise.resolve([])];
        }
      });
    });
  }; // 获取指标数据


  BaseDatasource.prototype.fetchMetricData = function (action, region, instance, query) {
    return __awaiter(this, void 0, void 0, function () {
      return __generator(this, function (_a) {
        return [2
        /*return*/
        , []];
      });
    });
  };
  /**
   * 根据 Panel 的配置项，获取相应的监控数据
   *
   * @param options Panel 的配置参数
   * @return 返回数据数组，示例如下
   * [
   *   {
   *     "target": "AccOuttraffic - ins-123",
   *     "datapoints": [
   *       [861, 1450754160000],
   *       [767, 1450754220000]
   *     ]
   *   }
   * ]
   */


  BaseDatasource.prototype.dimensionsFormat = function (dimKeys, ins, dimensionObject, target, service, options) {
    var _a;

    return __awaiter(this, void 0, void 0, function () {
      var _loop_1, this_1, _i, dimKeys_1, key;

      return __generator(this, function (_b) {
        switch (_b.label) {
          case 0:
            _loop_1 = function _loop_1(key) {
              var keyTmp, invalidDim, extraDimValue, _c, dim_KeyInStorage, _d, dim_KeyInTarget, dim_KeyInMap_1, dim_KeyInIns, extraIns_1, extraSourceMap, error_2, extraStorage, isStringOrNumber, insAlias, otherAlias;

              return __generator(this, function (_e) {
                switch (_e.label) {
                  case 0:
                    keyTmp = key;
                    invalidDim = this_1.InvalidDimensions || this_1.getInvalidDimensions(this_1, target[service]);

                    if (invalidDim[key]) {
                      // 从【维度中】的字段到【实例中】字段的映射。 { functionName: FunctionName }
                      keyTmp = invalidDim[key];
                      ins[key] = ins[keyTmp];
                    }

                    extraDimValue = this_1.getVariable(target[service][keyTmp]);
                    if (!this_1.queryMonitorExtraConfg[keyTmp]) return [3
                    /*break*/
                    , 5];
                    _c = this_1.queryMonitorExtraConfg[keyTmp], dim_KeyInStorage = _c.dim_KeyInStorage, _d = _c.dim_KeyInTarget, dim_KeyInTarget = _d === void 0 ? keyTmp : _d, dim_KeyInMap_1 = _c.dim_KeyInMap, dim_KeyInIns = _c.dim_KeyInIns;
                    extraIns_1 = Object(_common_constants__WEBPACK_IMPORTED_MODULE_2__["ReplaceVariable"])(this_1.templateSrv, options.scopedVars, target[service][dim_KeyInTarget], true);
                    extraSourceMap = {};
                    _e.label = 1;

                  case 1:
                    _e.trys.push([1, 2,, 4]);

                    extraSourceMap = JSON.parse(extraIns_1); // 兼容json字符串的 形式

                    return [3
                    /*break*/
                    , 4];

                  case 2:
                    error_2 = _e.sent();
                    if (lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isArray(extraIns_1)) extraIns_1 = extraIns_1[0]; // 如果多个，取第一个。除了实例ID 暂不支持其他纬度多选

                    return [4
                    /*yield*/
                    , _common_datasourceStorage__WEBPACK_IMPORTED_MODULE_3__["default"].getExtraStorage(this_1.service, dim_KeyInStorage)];

                  case 3:
                    extraStorage = _e.sent();
                    extraSourceMap = (_a = extraStorage === null || extraStorage === void 0 ? void 0 : extraStorage.find(function (item) {
                      if (lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isArray(item[dim_KeyInMap_1])) {
                        return item[dim_KeyInMap_1][0] === extraIns_1;
                      }

                      return item[dim_KeyInMap_1] === extraIns_1;
                    })) !== null && _a !== void 0 ? _a : {};
                    return [3
                    /*break*/
                    , 4];

                  case 4:
                    isStringOrNumber = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isString(extraSourceMap) || lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isNumber(extraSourceMap);
                    insAlias = ins._InstanceAliasValue;
                    otherAlias = isStringOrNumber ? extraSourceMap : extraSourceMap._InstanceAliasValue;

                    if (otherAlias && insAlias.indexOf(otherAlias) === -1) {
                      ins._InstanceAliasValue += " - ".concat(otherAlias);
                    }

                    extraDimValue = isStringOrNumber ? extraSourceMap : extraSourceMap === null || extraSourceMap === void 0 ? void 0 : extraSourceMap[dim_KeyInIns || keyTmp];
                    return [3
                    /*break*/
                    , 6];

                  case 5:
                    ins._InstanceAliasValue += this_1.getOtherAlias(ins, target[service]);
                    _e.label = 6;

                  case 6:
                    if (Object(_common_utils__WEBPACK_IMPORTED_MODULE_4__["getTimeShiftInMs"])(target[service].timeshift) > 0 && ins._InstanceAliasValue.indexOf(target[service].timeshift) === -1) {
                      ins._InstanceAliasValue += "_".concat(target[service].timeshift);
                    } // 设置instance，针对额外的维度，需要注意模板变量的值
                    // ins[key] = ins[keyTmp] ?? extraDimValue;


                    ins[key] = this_1.getDimensionsVal(ins, keyTmp, extraDimValue); // cynosdb产品接口返回维度和入参不一致

                    if (this_1.checkKeys.length > 0) {
                      this_1.checkKeys.forEach(function (Ekey) {
                        ins[Ekey] = ins[key];
                      });
                    }

                    dimensionObject[key] = {
                      Name: key,
                      Value: ins[key]
                    };
                    return [2
                    /*return*/
                    ];
                }
              });
            };

            this_1 = this;
            _i = 0, dimKeys_1 = dimKeys;
            _b.label = 1;

          case 1:
            if (!(_i < dimKeys_1.length)) return [3
            /*break*/
            , 4];
            key = dimKeys_1[_i];
            return [5
            /*yield**/
            , _loop_1(key)];

          case 2:
            _b.sent();

            _b.label = 3;

          case 3:
            _i++;
            return [3
            /*break*/
            , 1];

          case 4:
            return [2
            /*return*/
            , dimensionObject];
        }
      });
    });
  };

  BaseDatasource.prototype.getDimensionsVal = function (ins, key, extraDimValue) {
    var dimVal = ins[key];

    if (lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isEmpty(dimVal) && this.CandiateDimensions[key]) {
      dimVal = ins[this.CandiateDimensions[key]];
    }

    return dimVal !== null && dimVal !== void 0 ? dimVal : extraDimValue;
  };

  BaseDatasource.prototype.query = function (options) {
    var _this = this;

    var service = this.service; // 强制声明非空

    var queries = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.filter(options.targets, function (item) {
      // 过滤无效的查询 target
      return item.hide !== true && !!item.namespace && !!item[service].metricName && !lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isEmpty(Object(_common_constants__WEBPACK_IMPORTED_MODULE_2__["ReplaceVariable"])(_this.templateSrv, options.scopedVars, item[service].region, false)) && !lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isEmpty(Object(_common_constants__WEBPACK_IMPORTED_MODULE_2__["ReplaceVariable"])(_this.templateSrv, options.scopedVars, item[service].instance, true));
    }).reduce(function (prev, target) {
      if (Object(_common_utils__WEBPACK_IMPORTED_MODULE_4__["getTimeShiftInMs"])(target[service].timeshift) > 0) {
        var cloneTarget = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.cloneDeep(target);

        cloneTarget[service].timeshift = '';
        return __spreadArray(__spreadArray([], prev, true), [cloneTarget, target], false);
      }

      return __spreadArray(__spreadArray([], prev, true), [target], false);
    }, []).map(function (target) {
      return __awaiter(_this, void 0, void 0, function () {
        var instances, instanceCache, timeshift, region, insInReq, _i, instances_1, ins, dimensionObject, dimKeys, dimResult, data;

        var _this = this;

        return __generator(this, function (_a) {
          switch (_a.label) {
            case 0:
              instances = Object(_common_constants__WEBPACK_IMPORTED_MODULE_2__["ReplaceVariable"])(this.templateSrv, options.scopedVars, target[service].instance, true);
              return [4
              /*yield*/
              , _common_datasourceStorage__WEBPACK_IMPORTED_MODULE_3__["default"].getInstance(this.service)];

            case 1:
              instanceCache = _a.sent();
              timeshift = Object(_common_utils__WEBPACK_IMPORTED_MODULE_4__["getTimeShiftInMs"])(target[service].timeshift);
              instances = [].concat(instances).map(function (inst) {
                var _a, _b;

                try {
                  return JSON.parse(inst); // 兼容json字符串的 形式
                } catch (error) {
                  // 如果没拿到缓存，取默认实例组
                  if (!instanceCache) return (_a = _this.getDefaultInsObj) === null || _a === void 0 ? void 0 : _a.call(_this, inst);
                  return (_b = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.cloneDeep(instanceCache.find(function (item) {
                    return item[_this.templateQueryIdMap.instance] === inst;
                  }))) !== null && _b !== void 0 ? _b : {};
                }
              });
              region = Object(_common_constants__WEBPACK_IMPORTED_MODULE_2__["ReplaceVariable"])(this.templateSrv, options.scopedVars, target[service].region, false);
              insInReq = [];
              _i = 0, instances_1 = instances;
              _a.label = 2;

            case 2:
              if (!(_i < instances_1.length)) return [3
              /*break*/
              , 5];
              ins = instances_1[_i];
              dimensionObject = target[service].dimensionObject;
              dimKeys = Object.keys(dimensionObject);
              return [4
              /*yield*/
              , this.dimensionsFormat(dimKeys, ins, dimensionObject, target, service, options)];

            case 3:
              dimResult = _a.sent();
              insInReq.push([{
                Dimensions: Object(_common_constants__WEBPACK_IMPORTED_MODULE_2__["GetDimensions"])(dimResult)
              }]);
              _a.label = 4;

            case 4:
              _i++;
              return [3
              /*break*/
              , 2];

            case 5:
              data = {
                StartTime: moment__WEBPACK_IMPORTED_MODULE_1___default()(options.range.from).subtract(timeshift).format(),
                EndTime: moment__WEBPACK_IMPORTED_MODULE_1___default()(options.range.to).subtract(timeshift).format(),
                Period: target[service].period || 300,
                Instances: lodash__WEBPACK_IMPORTED_MODULE_0___default.a.flatMap(insInReq),
                Namespace: target.namespace,
                MetricName: target[service].metricName
              };
              return [2
              /*return*/
              , this.getMonitorData(data, region, instances, target[service], options)];
          }
        });
      });
    });

    if (queries.length === 0) {
      return [];
    }

    return Promise.all(queries).then(function (responses) {
      return lodash__WEBPACK_IMPORTED_MODULE_0___default.a.flatten(responses);
    })["catch"](function (error) {
      return [];
    });
  };

  BaseDatasource.prototype.getDefaultInsObj = function (ins) {
    return {};
  };

  BaseDatasource.prototype.getInstanceReqConfig = function (selfIns) {
    return {};
  };

  BaseDatasource.prototype.getInvalidDimensions = function (selfIns, target) {
    return {};
  }; // 获取某个变量的实际值，this.templateSrv.replace() 函数返回实际值的字符串


  BaseDatasource.prototype.getVariable = function (metric) {
    var rs = this.templateSrv.replace((metric || '').trim());
    var valStr = rs.match(/\{([\w-,]+)\}/); // 判断是否为多选

    if (valStr) {
      return valStr[1].split(',');
    }

    return rs;
  };
  /**
   * 获取 监控数据
   * @param params 获取监控数据的请求参数
   * @param region 地域信息
   * @param instances 实例列表，用于对返回结果的匹配解析
   */


  BaseDatasource.prototype.getMonitorData = function (params, region, instances, target, options) {
    var serviceInfo = Object(_common_constants__WEBPACK_IMPORTED_MODULE_2__["GetServiceAPIInfo"])(region, 'monitor');
    var timeshift = Object(_common_utils__WEBPACK_IMPORTED_MODULE_4__["getTimeShiftInMs"])(target.timeshift);
    return this.doRequest({
      url: this.url + serviceInfo.path,
      data: params
    }, serviceInfo.service, {
      action: 'GetMonitorData',
      region: region
    }).then(function (response) {
      return Object(_common_constants__WEBPACK_IMPORTED_MODULE_2__["ParseQueryResult"])(response, instances, timeshift);
    });
  };

  BaseDatasource.prototype.getRegions = function () {
    return this.doRequest({
      url: this.url + '/cvm'
    }, 'cvm', {
      action: 'DescribeRegions'
    }).then(function (response) {
      return lodash__WEBPACK_IMPORTED_MODULE_0___default.a.filter(lodash__WEBPACK_IMPORTED_MODULE_0___default.a.map(response.RegionSet || [], function (item) {
        return {
          text: item.RegionName,
          value: item.Region,
          RegionState: item.RegionState
        };
      }), function (item) {
        return item.RegionState === 'AVAILABLE';
      });
    });
  };

  BaseDatasource.prototype.getMetrics = function (region) {
    var _this = this;

    if (region === void 0) {
      region = 'ap-guangzhou';
    }

    var serviceInfo = Object(_common_constants__WEBPACK_IMPORTED_MODULE_2__["GetServiceAPIInfo"])(region, 'monitor');
    return this.doRequest({
      url: this.url + serviceInfo.path,
      data: {
        Namespace: this.namespace
      }
    }, serviceInfo.service, {
      region: region,
      action: 'DescribeBaseMetrics'
    }).then(function (response) {
      var res = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.filter(lodash__WEBPACK_IMPORTED_MODULE_0___default.a.filter(response.MetricSet || [], function (item) {
        return !(item.Namespace !== _this.namespace || !item.MetricName);
      }));

      var resFilterFn = _this.MetricReqConfig.resultFilter;

      if (resFilterFn) {
        return res.map(function (item) {
          return resFilterFn(item);
        });
      }

      return res;
    });
  };

  BaseDatasource.prototype.getInstances = function (region, params) {
    if (params === void 0) {
      params = {};
    }

    var _a = this.InstanceReqConfig || this.getInstanceReqConfig(this),
        _b = _a.service,
        service = _b === void 0 ? this.service : _b,
        action = _a.action,
        field = _a.responseField,
        interceptor = _a.interceptor;

    params = __assign({
      Offset: 0,
      Limit: 100
    }, params);
    var serviceInfo = Object(_common_constants__WEBPACK_IMPORTED_MODULE_2__["GetServiceAPIInfo"])(region, service);
    return this.doRequest({
      url: this.url + serviceInfo.path,
      data: (interceptor === null || interceptor === void 0 ? void 0 : interceptor.request) ? interceptor.request(params) : params
    }, serviceInfo.service, {
      region: region,
      action: action
    }).then(function (response) {
      var _a, _b; // 处理异常，则不按正常的情况处理，直接抛出错误


      if (response === null || response === void 0 ? void 0 : response.Error) {
        console.error(response.Error);
        return response;
      }

      var result; // 先，field处理

      if (field) {
        result = (_b = (_a = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(response, field)) !== null && _a !== void 0 ? _a : lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(response, "Result.".concat(field))) !== null && _b !== void 0 ? _b : [];
      } // 后，拦截器处理


      if (interceptor === null || interceptor === void 0 ? void 0 : interceptor.response) {
        result = interceptor.response(result);
      }

      return result;
    });
  };

  BaseDatasource.prototype.getVariableInstances = function (region, query) {
    var _this = this;

    if (query === void 0) {
      query = {};
    }

    var result = [];

    var params = __assign({
      Offset: 0,
      Limit: 100
    }, query);

    var _a = this.InstanceReqConfig || this.getInstanceReqConfig(this),
        _b = _a.service,
        service = _b === void 0 ? this.service : _b,
        action = _a.action,
        field = _a.responseField,
        interceptor = _a.interceptor;

    var serviceInfo = Object(_common_constants__WEBPACK_IMPORTED_MODULE_2__["GetServiceAPIInfo"])(region, service);
    return this.doRequest({
      url: this.url + serviceInfo.path,
      data: (interceptor === null || interceptor === void 0 ? void 0 : interceptor.request) ? interceptor.request(params) : params
    }, serviceInfo.service, {
      region: region,
      action: action
    }).then(function (response) {
      var _a, _b, _c, _d, _e, _f;

      result = (_b = (_a = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(response, field)) !== null && _a !== void 0 ? _a : lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(response, "Result.".concat(field))) !== null && _b !== void 0 ? _b : [];
      var total = (_f = (_e = (_d = (_c = response.TotalCount) !== null && _c !== void 0 ? _c : response.TotalCnt) !== null && _d !== void 0 ? _d : response.TotalNumber) !== null && _e !== void 0 ? _e : lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(response, "Result.TotalCount")) !== null && _f !== void 0 ? _f : 0;

      if (result.length >= total) {
        return (interceptor === null || interceptor === void 0 ? void 0 : interceptor.response) ? interceptor.response(result) : result;
      } else {
        var param = Object(_common_constants__WEBPACK_IMPORTED_MODULE_2__["SliceLength"])(total, (params === null || params === void 0 ? void 0 : params.Limit) || 100);
        var promises_1 = [];

        lodash__WEBPACK_IMPORTED_MODULE_0___default.a.forEach(param, function (item) {
          promises_1.push(_this.getInstances(region, __assign(__assign({}, item), query)));
        });

        return Promise.all(promises_1).then(function (responses) {
          lodash__WEBPACK_IMPORTED_MODULE_0___default.a.forEach(responses, function (item) {
            result = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.concat(result, item);
          });

          return (interceptor === null || interceptor === void 0 ? void 0 : interceptor.response) ? interceptor.response(result) : result;
        })["catch"](function (error) {
          return (interceptor === null || interceptor === void 0 ? void 0 : interceptor.response) ? interceptor.response(result) : result;
        });
      }
    });
  }; // 检查某变量字段是否有值


  BaseDatasource.prototype.isValidConfigField = function (field) {
    return field && field.length > 0;
  };

  BaseDatasource.prototype.testDatasource = function () {
    // const { service = this.service, action } = this.InstanceReqConfig;
    // const serviceInfo = GetServiceAPIInfo('ap-guangzhou', service);
    var _this = this;

    if (!this.isValidConfigField(this.secretId)) {
      return {
        service: this.service,
        status: 'error',
        message: 'The SecretId/SecretKey field is required.'
      };
    }

    return Promise.all([this.getRegions(), this.getMetrics(), // this.doRequest(
    //   {
    //     url: this.url + serviceInfo.path,
    //     data: {
    //       Offset: 0,
    //       Limit: 1,
    //     },
    //   },
    //   service,
    //   { region: 'ap-guangzhou', action },
    // ),
    this.getInstances('ap-guangzhou', {
      Offset: 0,
      Limit: 1
    })]).then(function (responses) {
      var cvmErr = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(responses, '[0].Error', {});

      var monitorErr = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(responses, '[1].Error', {});

      var serviceErr = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(responses, '[2].Error', {}); // const cvmAuthFail = _.get(cvmErr, 'Code', '').indexOf('AuthFailure') !== -1;
      // const monitorAuthFail = _.get(monitorErr, 'Code', '').indexOf('AuthFailure') !== -1;
      // const serviceAuthFail = _.get(serviceErr, 'Code', '').indexOf('AuthFailure') !== -1;


      var cvmAuthFail = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(cvmErr, 'Code', '');

      var monitorAuthFail = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(monitorErr, 'Code', '');

      var serviceAuthFail = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(serviceErr, 'Code', '');

      if (cvmAuthFail || monitorAuthFail || serviceAuthFail) {
        var messages = [];

        if (cvmAuthFail) {
          messages.push(lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(cvmErr, 'Code'));
        }

        if (monitorAuthFail) {
          messages.push(lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(monitorErr, 'Code'));
        }

        if (serviceAuthFail) {
          messages.push(lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(serviceErr, 'Code'));
        }

        var message = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.join(lodash__WEBPACK_IMPORTED_MODULE_0___default.a.compact(lodash__WEBPACK_IMPORTED_MODULE_0___default.a.uniq(messages)), '; ');

        return {
          service: _this.service,
          status: 'error',
          message: message
        };
      } else {
        return {
          namespace: _this.namespace,
          service: _this.service,
          status: 'success',
          message: "Successfully queried the ".concat(_this.service, " service."),
          title: 'Success'
        };
      }
    })["catch"](function (error) {
      var message = "".concat(_this.service, " service:");
      message += error.statusText ? error.statusText + '; ' : '';

      if (lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(error, 'data.error.code', '')) {
        message += error.data.error.code + '. ' + error.data.error.message;
      } else if (lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(error, 'data.error', '')) {
        message += error.data.error;
      } else if (lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(error, 'data', '')) {
        message += error.data;
      } else {
        message += "Cannot connect to ".concat(_this.service, " service.");
      }

      return {
        service: _this.service,
        status: 'error',
        message: message
      };
    });
  };

  BaseDatasource.prototype.doRequest = function (options, service, signObj) {
    if (signObj === void 0) {
      signObj = {};
    }

    return __awaiter(this, void 0, void 0, function () {
      return __generator(this, function (_a) {
        switch (_a.label) {
          case 0:
            return [4
            /*yield*/
            , Object(_common_constants__WEBPACK_IMPORTED_MODULE_2__["GetRequestParams"])(options, service, signObj, this.secretId, this.instanceSettings.id, this.backendSrv)];

          case 1:
            options = _a.sent();
            return [2
            /*return*/
            , this.backendSrv.datasourceRequest(options).then(function (response) {
              return lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(response, 'data.Response', {});
            })["catch"](function (error) {
              throw error;
            })];
        }
      });
    });
  };

  return BaseDatasource;
}();



/***/ }),

/***/ "./datasource/tc_monitor/_base/query.ts":
/*!**********************************************!*\
  !*** ./datasource/tc_monitor/_base/query.ts ***!
  \**********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! grafana/app/core/core_module */ "grafana/app/core/core_module");
/* harmony import */ var grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _common_constants__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../common/constants */ "./datasource/common/constants.ts");



function classFactory(detailConfig) {
  return (
    /** @class */
    function () {
      QueryCtrl.$inject = ["$scope", "$rootScope"];

      /** @ngInject */
      function QueryCtrl($scope, $rootScope) {
        Object.assign($scope, detailConfig);

        $scope.getDropdown = function (field) {
          var service = Object(_common_constants__WEBPACK_IMPORTED_MODULE_1__["GetServiceFromNamespace"])($scope.namespace);
          return $scope.datasource.getFilterDropdown(service, {
            field: field,
            region: $scope.region
          });
        };
      }

      return QueryCtrl;
    }()
  );
}

var template = "\n<div>\n<div class=\"tc-sub-params\" ng-if=\"showDetail\">\n  <label class=\"gf-form-label tc-info-label\">\n  Instances are queried by following params.\n    <a target=\"_blank\" style=\"text-decoration:underline;color:#006eff;font-size:medium\" href=\"{{instanceDocUrl}}\">Click here to get API doc.</a>\n  </label>\n  <div class=\"gf-form-inline\" ng-repeat=\"field in fieldDescriptor\">\n    <div class=\"gf-form\">\n      <label class=\"gf-form-label width-14\">\n        {{ field.key }}\n        <info-popover mode=\"right-normal\">\n          {{ field.cnDescriptor }}\n          <a target=\"_blank\" href=\"{{field.link}}\" ng-if=\"field.link\">Click here for more information.</a>\n        </info-popover>\n      </label>\n      <input\n        ng-if=\"field.type === 'inputNumber'\"\n        style=\"margin-right:2px\"\n        type=\"number\"\n        ng-model=\"target.queries[field.key]\"\n        ng-change=\"onChange()\"\n        class=\"gf-form-input width-10\"\n        ng-min=\"field.min\"\n        ng-max=\"field.max\"\n      />\n      <input\n        ng-if=\"field.type === 'input'\"\n        style=\"margin-right:2px\"\n        type=\"text\"\n        ng-model=\"target.queries[field.key]\"\n        ng-change=\"onChange()\"\n        class=\"gf-form-input width-10\"\n      />    \n      <multi-condition\n        ng-if=\"field.type === 'inputNumberMulti'\"\n        type=\"'inputNumber'\"\n        max-cond=\"5\"\n        value=\"target.queries.Filters[field.key]\"\n        maxNum=\"field.max\"\n        minNum=\"field.min\"\n        on-change=\"onChange()\"\n      ></multi-condition>\n      <multi-condition\n        ng-if=\"field.type === 'inputMulti'\"\n        type=\"'input'\"\n        value=\"target.queries[field.key]\"\n        on-change=\"onChange()\"\n      ></multi-condition>\n      <multi-condition\n        ng-if=\"field.type === 'dropdownMulti'\"\n        type=\"'dropdown'\"\n        value=\"target.queries[field.key]\"\n        on-change=\"onChange()\"\n        get-options=\"getDropdown(field.key)\"\n      ></multi-condition>\n      <gf-form-dropdown \n        ng-if=\"field.type === 'dropdown'\"\n        model=\"target.queries[field.key]\" \n        allow-custom=\"true\" \n        lookup-text=\"true\" \n        get-options=\"getDropdown(field.key)\" \n        css-class=\"min-width-10\"\n        on-change=\"onChange()\">\n      </gf-form-dropdown>\n      <custom-select-dropdown\n        ng-if=\"field.type === 'select'\"\n        value=\"target.queries[field.key]\"\n        options=\"field.list\"\n        multiple=\"field.multiple || false\"\n        on-change=\"onChange()\"\n      ></custom-select-dropdown>\n      <gf-form-switch \n        ng-if=\"field.type === 'switch'\"\n        class=\"gf-form tc-switch\" \n        label-class=\"width-7\" \n        checked=\"target.queries[field.key]\" \n        switch-class=\"max-width-5\"\n      ></gf-form-switch>\n    </div>\n  </div>\n</div>\n  </div>\n";

function queryDDOFactory(QueryCtrl) {
  return function queryDDO() {
    return {
      template: template,
      controller: QueryCtrl,
      restrict: 'E',
      scope: {
        target: '=',
        showDetail: '=',
        region: '=',
        datasource: '=',
        getDropdownOptions: '&',
        onChange: '&'
      }
    };
  };
}

/* harmony default export */ __webpack_exports__["default"] = (function (name, config) {
  // QueryCtrl._config = config;
  var newQueryIns = classFactory(config);
  grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0___default.a.directive(name, queryDDOFactory(newQueryIns));
});

/***/ }),

/***/ "./datasource/tc_monitor/_base/query_filter.ts":
/*!*****************************************************!*\
  !*** ./datasource/tc_monitor/_base/query_filter.ts ***!
  \*****************************************************/
/*! exports provided: queryDDO, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "queryDDO", function() { return queryDDO; });
/* harmony import */ var grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! grafana/app/core/core_module */ "grafana/app/core/core_module");
/* harmony import */ var grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0__);


var SPQueryCtrl =
/** @class */
function () {
  SPQueryCtrl.$inject = ["$scope", "$rootScope"];

  /** @ngInject */
  function SPQueryCtrl($scope, $rootScope) {
    Object.assign($scope, SPQueryCtrl._config);

    $scope.onChecked = function (srcField, dstField) {
      if ($scope.target.queries[srcField] === true) {
        $scope.target.queries[dstField] = false;
      }

      $scope.onChange();
    };

    $scope.init();
  }

  return SPQueryCtrl;
}();

var template = "\n<div class=\"tc-sub-params\" ng-if=\"showDetail\">\n<label class=\"gf-form-label tc-info-label\">\n  Instances are queried by following params.\n  <a target=\"_blank\" style=\"text-decoration:underline;color:#006eff;font-size:medium\" href=\"{{instanceDocUrl}}\">Click here to get API doc.</a>\n</label>\n<div class=\"gf-form-inline\">\n  <div class=\"gf-form\">\n    <label class=\"gf-form-label width-14\">\n      Offset\n      <info-popover mode=\"right-normal\">\n        \u504F\u79FB\u91CF, \u4F8B\u5982Offset=20&Limit=20 \u8FD4\u56DE\u7B2C 20 \u5230 40 \u9879\n      </info-popover>\n    </label>\n    <input type=\"number\" ng-model=\"target.queries.Offset\" class=\"gf-form-input width-10\" ng-min=\"0\" ng-change=\"onChange()\">\n  </div>\n</div>\n<div class=\"gf-form-inline\">\n  <div class=\"gf-form\">\n    <label class=\"gf-form-label width-14\">\n      Limit\n      <info-popover mode=\"right-normal\">\n        \u5355\u6B21\u8BF7\u6C42\u8FD4\u56DE\u7684\u6570\u91CF\uFF0C\u9ED8\u8BA4\u4E3A20\uFF0C\u6700\u5C0F\u503C\u4E3A1\uFF0C\u6700\u5927\u503C\u4E3A100\n      </info-popover>\n    </label>\n    <input type=\"number\" ng-model=\"target.queries.Limit\" class=\"gf-form-input width-10\" ng-min=\"1\" ng-max=\"100\" ng-change=\"onChange()\">\n  </div>\n</div>\n<div class=\"gf-form-inline\">\n  <div class=\"gf-form\">\n    <label class=\"gf-form-label width-9\">\n      InstanceIds\n      <info-popover mode=\"right-normal\">\n        \u5B9E\u4F8B ID\uFF0C\u6BCF\u6B21\u8BF7\u6C42\u7684\u5B9E\u4F8B\u7684\u4E0A\u9650\u4E3A100\uFF0C\u53C2\u6570\u4E0D\u652F\u6301\u540C\u65F6\u6307\u5B9A InstanceIds \u548C Filters\n      </info-popover>\n    </label>\n    <gf-form-switch class=\"gf-form tc-switch\" label-class=\"width-7\" checked=\"target.queries.instanceIdsChecked\"\n      switch-class=\"max-width-5\" on-change=\"onChecked('instanceIdsChecked', 'filtersChecked')\"></gf-form-switch>\n  </div>\n</div>\n<div class=\"gf-form-inline tc-sub-params\" ng-if=\"target.queries.instanceIdsChecked\">\n  <multi-condition type=\"'input'\" max-cond=\"100\" value=\"target.queries.InstanceIds\" on-change=\"onChange()\">\n  </multi-condition>\n</div>\n<div class=\"gf-form-inline\">\n  <div class=\"gf-form\">\n    <label class=\"gf-form-label width-9\">\n      Filters\n      <info-popover mode=\"right-normal\">\n        \u8FC7\u6EE4\u6761\u4EF6\uFF0C\u6BCF\u6B21\u8BF7\u6C42\u7684 Filters \u7684\u4E0A\u9650\u4E3A10\uFF0CFilter.Values \u7684\u4E0A\u9650\u4E3A5\u3002\u53C2\u6570\u4E0D\u652F\u6301\u540C\u65F6\u6307\u5B9A InstanceIds \u548C Filters\n      </info-popover>\n    </label>\n    <gf-form-switch class=\"gf-form tc-switch\" label-class=\"width-7\" checked=\"target.queries.filtersChecked\" switch-class=\"max-width-5\"\n      on-change=\"onChecked('filtersChecked','instanceIdsChecked')\"></gf-form-switch>\n  </div>\n</div>\n<div ng-if=\"target.queries.filtersChecked\" class=\"tc-sub-params\">\n  <div class=\"gf-form-inline\" ng-repeat=\"field in CVMFilterFieldsDescriptor\">\n    <label class=\"gf-form-label width-14\">\n      {{ field.key }}\n      <info-popover mode=\"right-normal\">\n        {{ field.cnDescriptor }}\n        <a target=\"_blank\" href=\"{{field.link}}\" ng-if=\"field.link\">Click here for more information.</a>\n      </info-popover>\n    </label>\n    <multi-condition\n      ng-if=\"field.type === 'dropdownmulti'\"\n      type=\"'dropdown'\"\n      max-cond=\"5\"\n      value=\"target.queries.Filters[field.key]\"\n      get-options=\"getDropdown(field.key)\"\n      on-change=\"onChange()\"\n    ></multi-condition>\n    <multi-condition\n      ng-if=\"field.type === 'inputNumbermulti'\"\n      type=\"'inputNumber'\"\n      max-cond=\"5\"\n      value=\"target.queries.Filters[field.key]\"\n      maxNum=\"field.max\"\n      minNum=\"field.min\"\n      on-change=\"onChange()\"\n    ></multi-condition>\n    <multi-condition\n      ng-if=\"field.type === 'inputmulti'\"\n      type=\"'input'\"\n      max-cond=\"5\"\n      value=\"target.queries.Filters[field.key]\"\n      on-change=\"onChange()\"\n    ></multi-condition>\n    <custom-select-dropdown\n      ng-if=\"field.type === 'select'\"\n      value=\"target.queries.Filters[field.key]\"\n      options=\"field.list\"\n      multiple=\"true\"\n      on-change=\"onChange()\"\n    ></custom-select-dropdown>\n  </div>\n</div>\n</div>\n";
function queryDDO() {
  return {
    template: template,
    controller: SPQueryCtrl,
    restrict: 'E',
    scope: {
      target: '=',
      showDetail: '=',
      region: '=',
      datasource: '=',
      getDropdownOptions: '&',
      onChange: '&'
    }
  };
}
/* harmony default export */ __webpack_exports__["default"] = (function (name, config) {
  SPQueryCtrl._config = config;
  grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0___default.a.directive(name, queryDDO);
});

/***/ }),

/***/ "./datasource/tc_monitor/_base/types.ts":
/*!**********************************************!*\
  !*** ./datasource/tc_monitor/_base/types.ts ***!
  \**********************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);


/***/ }),

/***/ "./datasource/tc_monitor/apigateway/datasource.ts":
/*!********************************************************!*\
  !*** ./datasource/tc_monitor/apigateway/datasource.ts ***!
  \********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _query_def__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./query_def */ "./datasource/tc_monitor/apigateway/query_def.ts");
/* harmony import */ var _base_datasource__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../_base/datasource */ "./datasource/tc_monitor/_base/datasource.ts");
/* harmony import */ var _common_constants__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../common/constants */ "./datasource/common/constants.ts");
/* harmony import */ var _common_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../common/utils */ "./datasource/common/utils.ts");
/* harmony import */ var _common_datasourceStorage__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../common/datasourceStorage */ "./datasource/common/datasourceStorage.ts");
/* harmony import */ var _locale__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../locale */ "./locale/index.ts");
var __extends = undefined && undefined.__extends || function () {
  var _extendStatics = function extendStatics(d, b) {
    _extendStatics = Object.setPrototypeOf || {
      __proto__: []
    } instanceof Array && function (d, b) {
      d.__proto__ = b;
    } || function (d, b) {
      for (var p in b) {
        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];
      }
    };

    return _extendStatics(d, b);
  };

  return function (d, b) {
    if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");

    _extendStatics(d, b);

    function __() {
      this.constructor = d;
    }

    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();

var __awaiter = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {
  function adopt(value) {
    return value instanceof P ? value : new P(function (resolve) {
      resolve(value);
    });
  }

  return new (P || (P = Promise))(function (resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }

    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }

    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }

    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};

var __generator = undefined && undefined.__generator || function (thisArg, body) {
  var _ = {
    label: 0,
    sent: function sent() {
      if (t[0] & 1) throw t[1];
      return t[1];
    },
    trys: [],
    ops: []
  },
      f,
      y,
      t,
      g;
  return g = {
    next: verb(0),
    "throw": verb(1),
    "return": verb(2)
  }, typeof Symbol === "function" && (g[Symbol.iterator] = function () {
    return this;
  }), g;

  function verb(n) {
    return function (v) {
      return step([n, v]);
    };
  }

  function step(op) {
    if (f) throw new TypeError("Generator is already executing.");

    while (_) {
      try {
        if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
        if (y = 0, t) op = [op[0] & 2, t.value];

        switch (op[0]) {
          case 0:
          case 1:
            t = op;
            break;

          case 4:
            _.label++;
            return {
              value: op[1],
              done: false
            };

          case 5:
            _.label++;
            y = op[1];
            op = [0];
            continue;

          case 7:
            op = _.ops.pop();

            _.trys.pop();

            continue;

          default:
            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
              _ = 0;
              continue;
            }

            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
              _.label = op[1];
              break;
            }

            if (op[0] === 6 && _.label < t[1]) {
              _.label = t[1];
              t = op;
              break;
            }

            if (t && _.label < t[2]) {
              _.label = t[2];

              _.ops.push(op);

              break;
            }

            if (t[2]) _.ops.pop();

            _.trys.pop();

            continue;
        }

        op = body.call(thisArg, _);
      } catch (e) {
        op = [6, e];
        y = 0;
      } finally {
        f = t = 0;
      }
    }

    if (op[0] & 5) throw op[1];
    return {
      value: op[0] ? op[1] : void 0,
      done: true
    };
  }
};








var DCDatasource =
/** @class */
function (_super) {
  __extends(DCDatasource, _super);

  function DCDatasource(instanceSettings, backendSrv, templateSrv) {
    var _this = _super.call(this, instanceSettings, backendSrv, templateSrv) || this;

    _this.Namespace = _query_def__WEBPACK_IMPORTED_MODULE_0__["namespace"];
    _this.InstanceAliasList = _query_def__WEBPACK_IMPORTED_MODULE_0__["APIGATEWAYInstanceAliasList"];
    _this.InvalidDimensions = _query_def__WEBPACK_IMPORTED_MODULE_0__["APIGATEWAYInvalidDemensions"];
    _this.templateQueryIdMap = _query_def__WEBPACK_IMPORTED_MODULE_0__["templateQueryIdMap"]; // 此处service是接口的配置参数，需和plugin.json里一致，和constant.ts中SERVICES_API_INFO保持一致

    _this.InstanceReqConfig = {
      service: 'apigateway',
      action: 'DescribeServicesStatus',
      responseField: 'ServiceSet'
    };
    _this.keyInStorage = _query_def__WEBPACK_IMPORTED_MODULE_0__["keyInStorage"];
    _this.queryMonitorExtraConfg = _query_def__WEBPACK_IMPORTED_MODULE_0__["queryMonitorExtraConfg"];
    return _this;
  } // getFilterDropdown({ field }) {
  //   return super.getRegions();
  // }


  DCDatasource.prototype.getRegions = function () {
    return Promise.resolve(_query_def__WEBPACK_IMPORTED_MODULE_0__["regionSupported"].map(function (_a) {
      var value = _a.value;
      return {
        value: value,
        text: Object(_locale__WEBPACK_IMPORTED_MODULE_5__["t"])(value)
      };
    }));
  };

  DCDatasource.prototype.getEnvironmentNameList = function (params) {
    return __awaiter(this, void 0, void 0, function () {
      var region, instanceId, serviceInfo, res, rs;

      var _this = this;

      return __generator(this, function (_a) {
        switch (_a.label) {
          case 0:
            region = params.region, instanceId = params.instanceId;
            serviceInfo = Object(_common_constants__WEBPACK_IMPORTED_MODULE_2__["GetServiceAPIInfo"])(region, this.service);
            return [4
            /*yield*/
            , Object(_common_utils__WEBPACK_IMPORTED_MODULE_3__["fetchAllFactory"])(function (data) {
              return _this.doRequest({
                url: _this.url + serviceInfo.path,
                data: data
              }, serviceInfo.service, {
                region: region,
                action: 'DescribeServiceEnvironmentList'
              });
            }, {
              ServiceId: instanceId
            }, 'EnvironmentList')];

          case 1:
            res = _a.sent();
            rs = res[0];
            return [2
            /*return*/
            , rs];
        }
      });
    });
  };

  DCDatasource.prototype.fetchMetricData = function (action, region, instance) {
    return __awaiter(this, void 0, void 0, function () {
      var rs, result;

      var _this = this;

      return __generator(this, function (_a) {
        switch (_a.label) {
          case 0:
            if (!(action === 'DescribeServiceEnvironmentList')) return [3
            /*break*/
            , 3];
            return [4
            /*yield*/
            , this.getEnvironmentNameList({
              region: region,
              instanceId: instance[this.templateQueryIdMap.instance]
            })];

          case 1:
            rs = _a.sent();
            result = rs.map(function (o) {
              o._InstanceAliasValue = o[_this.templateQueryIdMap.environmentName];
              return {
                text: o[_this.templateQueryIdMap.environmentName],
                value: o[_this.templateQueryIdMap.environmentName]
              };
            });
            return [4
            /*yield*/
            , _common_datasourceStorage__WEBPACK_IMPORTED_MODULE_4__["default"].setExtraStorage(this.service, this.keyInStorage.environmentList, rs)];

          case 2:
            _a.sent();

            return [2
            /*return*/
            , result];

          case 3:
            return [2
            /*return*/
            , []];
        }
      });
    });
  };

  return DCDatasource;
}(_base_datasource__WEBPACK_IMPORTED_MODULE_1__["BaseDatasource"]);

/* harmony default export */ __webpack_exports__["default"] = (DCDatasource);

/***/ }),

/***/ "./datasource/tc_monitor/apigateway/query.ts":
/*!***************************************************!*\
  !*** ./datasource/tc_monitor/apigateway/query.ts ***!
  \***************************************************/
/*! exports provided: QueryCtrl, sQuery */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "QueryCtrl", function() { return QueryCtrl; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "sQuery", function() { return sQuery; });
/* harmony import */ var grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! grafana/app/core/core_module */ "grafana/app/core/core_module");
/* harmony import */ var grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _query_def__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./query_def */ "./datasource/tc_monitor/apigateway/query_def.ts");
/* harmony import */ var _common_constants__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../common/constants */ "./datasource/common/constants.ts");
var __awaiter = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {
  function adopt(value) {
    return value instanceof P ? value : new P(function (resolve) {
      resolve(value);
    });
  }

  return new (P || (P = Promise))(function (resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }

    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }

    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }

    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};

var __generator = undefined && undefined.__generator || function (thisArg, body) {
  var _ = {
    label: 0,
    sent: function sent() {
      if (t[0] & 1) throw t[1];
      return t[1];
    },
    trys: [],
    ops: []
  },
      f,
      y,
      t,
      g;
  return g = {
    next: verb(0),
    "throw": verb(1),
    "return": verb(2)
  }, typeof Symbol === "function" && (g[Symbol.iterator] = function () {
    return this;
  }), g;

  function verb(n) {
    return function (v) {
      return step([n, v]);
    };
  }

  function step(op) {
    if (f) throw new TypeError("Generator is already executing.");

    while (_) {
      try {
        if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
        if (y = 0, t) op = [op[0] & 2, t.value];

        switch (op[0]) {
          case 0:
          case 1:
            t = op;
            break;

          case 4:
            _.label++;
            return {
              value: op[1],
              done: false
            };

          case 5:
            _.label++;
            y = op[1];
            op = [0];
            continue;

          case 7:
            op = _.ops.pop();

            _.trys.pop();

            continue;

          default:
            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
              _ = 0;
              continue;
            }

            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
              _.label = op[1];
              break;
            }

            if (op[0] === 6 && _.label < t[1]) {
              _.label = t[1];
              t = op;
              break;
            }

            if (t && _.label < t[2]) {
              _.label = t[2];

              _.ops.push(op);

              break;
            }

            if (t[2]) _.ops.pop();

            _.trys.pop();

            continue;
        }

        op = body.call(thisArg, _);
      } catch (e) {
        op = [6, e];
        y = 0;
      } finally {
        f = t = 0;
      }
    }

    if (op[0] & 5) throw op[1];
    return {
      value: op[0] ? op[1] : void 0,
      done: true
    };
  }
};





var QueryCtrl =
/** @class */
function () {
  QueryCtrl.$inject = ["$scope", "$rootScope"];

  /** @ngInject */
  function QueryCtrl($scope, $rootScope) {
    var _this = this;

    $scope.init = function () {
      $scope.APIGATEWAYFilterFieldsDescriptor = _query_def__WEBPACK_IMPORTED_MODULE_1__["APIGATEWAYFilterFieldsDescriptor"];
      $scope.namespace = _query_def__WEBPACK_IMPORTED_MODULE_1__["namespace"];
    };

    $scope.getInstanceId = function () {
      var instance = $scope.target.instance;
      var service = Object(_common_constants__WEBPACK_IMPORTED_MODULE_2__["GetServiceFromNamespace"])($scope.namespace); // console.log({namespace, service});

      instance = $scope.datasource.getServiceFn(service, 'getVariable')(instance);

      if (!instance) {
        return '';
      }

      try {
        instance = JSON.parse(instance)[_query_def__WEBPACK_IMPORTED_MODULE_1__["templateQueryIdMap"].instance];
      } catch (error) {// console.log();
      }

      return instance;
    };

    $scope.getExtraDropdown = function (target) {
      return __awaiter(_this, void 0, void 0, function () {
        var service, instanceId, region, rs, result;
        return __generator(this, function (_a) {
          switch (_a.label) {
            case 0:
              service = Object(_common_constants__WEBPACK_IMPORTED_MODULE_2__["GetServiceFromNamespace"])($scope.namespace);
              instanceId = $scope.getInstanceId();
              region = $scope.datasource.getServiceFn(service, 'getVariable')(target.region);
              return [4
              /*yield*/
              , $scope.datasource.getServiceFn(service, 'getEnvironmentNameList')({
                region: region,
                instanceId: instanceId
              })];

            case 1:
              rs = _a.sent();
              result = rs.map(function (o) {
                return {
                  text: o.EnvironmentName,
                  value: JSON.stringify(o)
                };
              });
              return [2
              /*return*/
              , result];
          }
        });
      });
    };

    $scope.init();
  }

  return QueryCtrl;
}();


var template = "\n<div>\n<div class=\"tc-sub-params\" ng-if=\"showDetail\">\n  <label class=\"gf-form-label tc-info-label\">\n    Functions are queried by following params.\n    <a target=\"_blank\" style=\"text-decoration:underline;color:#006eff;font-size:medium\" href=\"https://cloud.tencent.com/document/product/248/45073\">Click here to get API doc.</a>\n  </label>\n  <div class=\"gf-form-inline\" ng-repeat=\"field in APIGATEWAYFilterFieldsDescriptor\">\n    <div class=\"gf-form\">\n      <label class=\"gf-form-label width-14\">\n        {{ field.key }}\n        <info-popover mode=\"right-normal\">\n          {{ field.cnDescriptor }}\n          <a target=\"_blank\" href=\"{{field.link}}\" ng-if=\"field.link\">Click here for more information.</a>\n        </info-popover>\n      </label>\n      <input\n        ng-if=\"field.type === 'inputNumber'\"\n        style=\"margin-right:2px\"\n        type=\"number\"\n        ng-model=\"target.queries[field.key]\"\n        ng-change=\"onChange()\"\n        class=\"gf-form-input width-10\"\n        ng-min=\"field.min\"\n        ng-max=\"field.max\"\n      />\n      <input\n        ng-if=\"field.type === 'input'\"\n        style=\"margin-right:2px\"\n        type=\"text\"\n        ng-model=\"target.queries[field.key]\"\n        ng-change=\"onChange()\"\n        class=\"gf-form-input width-10\"\n      />    \n      <multi-condition\n        ng-if=\"field.type === 'inputNumberMulti'\"\n        type=\"'inputNumber'\"\n        max-cond=\"5\"\n        value=\"target.queries.Filters[field.key]\"\n        maxNum=\"field.max\"\n        minNum=\"field.min\"\n        on-change=\"onChange()\"\n      ></multi-condition>\n      <multi-condition\n        ng-if=\"field.type === 'inputMulti'\"\n        type=\"'input'\"\n        value=\"target.queries[field.key]\"\n        on-change=\"onChange()\"\n      ></multi-condition>\n      <custom-select-dropdown\n        ng-if=\"field.type === 'select'\"\n        value=\"target.queries[field.key]\"\n        options=\"field.list\"\n        multiple=\"field.multiple || false\"\n        on-change=\"onChange()\"\n      ></custom-select-dropdown>\n    </div>\n  </div>\n</div>\n\n<!-- \u8D77\u59CB\u533A\u57DF \u76EE\u7684\u533A\u57DF\u7B49 -->\n  <div>\n    <div class=\"gf-form-inline\">\n      <div class=\"gf-form\">\n        <label class=\"gf-form-label query-keyword width-9\">EnvironmentName</label>\n        <div class=\"gf-form-select-wrapper gf-form-select-wrapper--caret-indent\">\n          <gf-form-dropdown model=\"target.EnvironmentName\" allow-custom=\"true\" lookup-text=\"true\"  get-options=\"getExtraDropdown(target)\"\n            on-change=\"onRefresh()\" css-class=\"min-width-10\">\n          </gf-form-dropdown>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n";
function sQuery() {
  return {
    template: template,
    controller: QueryCtrl,
    restrict: 'E',
    scope: {
      target: '=',
      showDetail: '=',
      region: '=',
      datasource: '=',
      getDropdownOptions: '&',
      onChange: '&',
      onRefresh: '&',
      dims: '='
    }
  };
}
grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0___default.a.directive(_query_def__WEBPACK_IMPORTED_MODULE_1__["queryEditorName"], sQuery);

/***/ }),

/***/ "./datasource/tc_monitor/apigateway/query_def.ts":
/*!*******************************************************!*\
  !*** ./datasource/tc_monitor/apigateway/query_def.ts ***!
  \*******************************************************/
/*! exports provided: default, APIGATEWAYFilterFieldsDescriptor, templateQueryIdMap, APIGATEWAYInstanceAliasList, APIGATEWAYInvalidDemensions, namespace, queryEditorName, queryEditorConfig, regionSupported, queryMonitorExtraConfg, keyInStorage, APIGATEWAYGetInstanceQueryParams */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "APIGATEWAYFilterFieldsDescriptor", function() { return APIGATEWAYFilterFieldsDescriptor; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "templateQueryIdMap", function() { return templateQueryIdMap; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "APIGATEWAYInstanceAliasList", function() { return APIGATEWAYInstanceAliasList; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "APIGATEWAYInvalidDemensions", function() { return APIGATEWAYInvalidDemensions; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "namespace", function() { return namespace; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "queryEditorName", function() { return queryEditorName; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "queryEditorConfig", function() { return queryEditorConfig; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "regionSupported", function() { return regionSupported; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "queryMonitorExtraConfg", function() { return queryMonitorExtraConfg; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "keyInStorage", function() { return keyInStorage; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "APIGATEWAYGetInstanceQueryParams", function() { return GetInstanceQueryParams; });
/* harmony import */ var _common_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../common/utils */ "./datasource/common/utils.ts");

var namespace = 'QCE/APIGATEWAY'; // 组件名称。这里名字要和index.ts中的SERVICES对应，后面会根据SERVICES中service字段拼接这个query组件名称

var queryEditorName = 'apigatewayQuery';
var APIGATEWAYInvalidDemensions = {
  serviceId: 'ServiceId',
  environmentName: 'EnvironmentName',
  apiid: 'Apiid',
  apiId: 'Apiid'
}; // 需和文件名对应

var APIGATEWAYInstanceAliasList = ['ServiceId', 'ServiceName'];
var templateQueryIdMap = {
  instance: 'ServiceId',
  environmentName: 'EnvironmentName'
}; // 需要缓存到storage的内容的key列表

var keyInStorage = {
  environmentList: 'EnvironmentList'
};
/*
如果有InstanceId额外的维度，原则上都需要传入此map结构配置
key的含义：
  经过InvalidDemensions处理后的string。topicId =》TopicId。
  否则认为指标中维度正确，和指标中维度字段保持一致，即topicId
value的含义：
  1 dim_KeyInStorage 指标中维度dimension对应的storage中的key，获取缓存列表，sourceMapList、
  2 dim_KeyInTarget  通过getVariable方法获取变量中选中项。比如ListnerId为Lis-xxxx；即：STATE中的key。
                    默认取通过InvalidDemsion处理后的key
  3 dim_KeyInMap     保存在模板变量value比如（监听器ID）源自sourceMapList（接口返回内容）的哪个key（ListenerId）。
                    即：templateQueryIdMap中内容。
                    联合上面2的内容筛选出原始sourceMap
*/

var queryMonitorExtraConfg = {
  EnvironmentName: {
    dim_KeyInStorage: keyInStorage.environmentList,
    dim_KeyInTarget: 'EnvironmentName',
    dim_KeyInMap: templateQueryIdMap.environmentName
  }
}; // select类型需要注意是{},multi后缀是[],dropdown是''

var APIGATEWAYFilterFields = {
  Limit: 20,
  Offset: 0,
  ServiceId: [],
  ServiceName: [],
  NotUsagePlanId: [],
  Environment: [],
  IpVersion: []
};
var APIGATEWAYFilterFieldsDescriptor = [{
  key: 'Offset',
  enDescriptor: 'Offset',
  cnDescriptor: '偏移量, 例如Offset=20&Limit=20 返回第 20 到 40 项',
  link: '',
  type: 'inputNumber',
  min: 0
}, {
  key: 'Limit',
  enDescriptor: 'Limit',
  cnDescriptor: '单次请求返回的数量，默认为20，最小值为1，最大值为100',
  link: '',
  type: 'inputNumber',
  min: 1,
  max: 100
}, {
  key: 'ServiceId',
  enDescriptor: 'ServiceId',
  cnDescriptor: '服务id',
  link: '',
  type: 'inputMulti'
}, {
  key: 'ServiceName',
  enDescriptor: 'ServiceName',
  cnDescriptor: '服务名称',
  link: '',
  type: 'inputMulti'
}, {
  key: 'NotUsagePlanId',
  enDescriptor: 'NotUsagePlanId',
  cnDescriptor: 'NotUsagePlanId',
  link: '',
  type: 'inputMulti'
}, {
  key: 'Environment',
  enDescriptor: 'Environment',
  cnDescriptor: '环境名称',
  link: '',
  type: 'inputMulti'
}, {
  key: 'IpVersion',
  enDescriptor: 'IpVersion',
  cnDescriptor: 'IP版本',
  link: '',
  type: 'inputMulti'
}]; // 各产品实例列表detail配置

var queryEditorConfig = {
  instanceDocUrl: 'https://cloud.tencent.com/document/api/628/45198',
  namespace: namespace,
  fieldDescriptor: APIGATEWAYFilterFieldsDescriptor
};
var APIGATEWAY_STATE = {
  region: '',
  metricName: '',
  metricUnit: '',
  period: undefined,
  dimensionObject: null,
  instance: '',
  instanceAlias: 'ServiceId',
  EnvironmentName: '',
  queries: APIGATEWAYFilterFields
};

function GetInstanceQueryParams(queries) {
  if (queries === void 0) {
    queries = {};
  }

  return Object(_common_utils__WEBPACK_IMPORTED_MODULE_0__["instanceQueryParamsBaseParse"])(queries, true);
} // regions for dropdown


var regionSupported = [{
  value: 'ap-beijing'
}, {
  value: 'ap-chengdu'
}, {
  value: 'ap-chongqing'
}, {
  value: 'ap-guangzhou'
}, {
  value: 'ap-hongkong'
}, {
  value: 'ap-mumbai'
}, {
  value: 'ap-nanjing'
}, {
  value: 'ap-shanghai'
}, {
  value: 'ap-shanghai-fsi'
}, {
  value: 'ap-shenzhen-fsi'
}, {
  value: 'ap-singapore'
}, {
  value: 'ap-tokyo'
}, {
  value: 'eu-frankfurt'
}, {
  value: 'na-ashburn'
}, {
  value: 'na-siliconvalley'
}, {
  value: 'na-toronto'
}];
/* harmony default export */ __webpack_exports__["default"] = (APIGATEWAY_STATE);


/***/ }),

/***/ "./datasource/tc_monitor/bmIntraLb/datasource.ts":
/*!*******************************************************!*\
  !*** ./datasource/tc_monitor/bmIntraLb/datasource.ts ***!
  \*******************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _query_def__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./query_def */ "./datasource/tc_monitor/bmIntraLb/query_def.ts");
/* harmony import */ var _base_datasource__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../_base/datasource */ "./datasource/tc_monitor/_base/datasource.ts");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lodash */ "lodash");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _locale__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../locale */ "./locale/index.ts");
var __extends = undefined && undefined.__extends || function () {
  var _extendStatics = function extendStatics(d, b) {
    _extendStatics = Object.setPrototypeOf || {
      __proto__: []
    } instanceof Array && function (d, b) {
      d.__proto__ = b;
    } || function (d, b) {
      for (var p in b) {
        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];
      }
    };

    return _extendStatics(d, b);
  };

  return function (d, b) {
    if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");

    _extendStatics(d, b);

    function __() {
      this.constructor = d;
    }

    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();

var __assign = undefined && undefined.__assign || function () {
  __assign = Object.assign || function (t) {
    for (var s, i = 1, n = arguments.length; i < n; i++) {
      s = arguments[i];

      for (var p in s) {
        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
      }
    }

    return t;
  };

  return __assign.apply(this, arguments);
};

var __awaiter = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {
  function adopt(value) {
    return value instanceof P ? value : new P(function (resolve) {
      resolve(value);
    });
  }

  return new (P || (P = Promise))(function (resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }

    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }

    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }

    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};

var __generator = undefined && undefined.__generator || function (thisArg, body) {
  var _ = {
    label: 0,
    sent: function sent() {
      if (t[0] & 1) throw t[1];
      return t[1];
    },
    trys: [],
    ops: []
  },
      f,
      y,
      t,
      g;
  return g = {
    next: verb(0),
    "throw": verb(1),
    "return": verb(2)
  }, typeof Symbol === "function" && (g[Symbol.iterator] = function () {
    return this;
  }), g;

  function verb(n) {
    return function (v) {
      return step([n, v]);
    };
  }

  function step(op) {
    if (f) throw new TypeError("Generator is already executing.");

    while (_) {
      try {
        if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
        if (y = 0, t) op = [op[0] & 2, t.value];

        switch (op[0]) {
          case 0:
          case 1:
            t = op;
            break;

          case 4:
            _.label++;
            return {
              value: op[1],
              done: false
            };

          case 5:
            _.label++;
            y = op[1];
            op = [0];
            continue;

          case 7:
            op = _.ops.pop();

            _.trys.pop();

            continue;

          default:
            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
              _ = 0;
              continue;
            }

            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
              _.label = op[1];
              break;
            }

            if (op[0] === 6 && _.label < t[1]) {
              _.label = t[1];
              t = op;
              break;
            }

            if (t && _.label < t[2]) {
              _.label = t[2];

              _.ops.push(op);

              break;
            }

            if (t[2]) _.ops.pop();

            _.trys.pop();

            continue;
        }

        op = body.call(thisArg, _);
      } catch (e) {
        op = [6, e];
        y = 0;
      } finally {
        f = t = 0;
      }
    }

    if (op[0] & 5) throw op[1];
    return {
      value: op[0] ? op[1] : void 0,
      done: true
    };
  }
};






var DCDatasource =
/** @class */
function (_super) {
  __extends(DCDatasource, _super);

  function DCDatasource(instanceSettings, backendSrv, templateSrv) {
    var _this = _super.call(this, instanceSettings, backendSrv, templateSrv) || this;

    _this.Namespace = _query_def__WEBPACK_IMPORTED_MODULE_0__["namespace"];
    _this.InstanceAliasList = _query_def__WEBPACK_IMPORTED_MODULE_0__["BMINTRALBInstanceAliasList"];
    _this.InvalidDimensions = _query_def__WEBPACK_IMPORTED_MODULE_0__["BMINTRALBInvalidDemensions"];
    _this.templateQueryIdMap = _query_def__WEBPACK_IMPORTED_MODULE_0__["templateQueryIdMap"]; // 此处service是接口的配置参数，需和plugin.json里一致，和constant.ts中SERVICES_API_INFO保持一致

    _this.InstanceReqConfig = {
      service: 'bmlb',
      action: 'DescribeLoadBalancers',
      responseField: 'LoadBalancerSet',
      interceptor: {
        request: function request(params) {
          return __assign(__assign({}, params), {
            LoadBalancerType: 'internal'
          });
        } // 设置一些请求参数的 默认值

      }
    };
    _this.RegionMap = {};
    return _this;
  } // 重写getRegion


  DCDatasource.prototype.getRegions = function () {
    var _this = this;

    return this.doRequest({
      url: this.url + '/bm'
    }, 'bm', {
      action: 'DescribeRegions',
      region: 'ap-guangzhou'
    }).then(function (response) {
      // 缓存，后面获取可用区zone
      _this.RegionMap = lodash__WEBPACK_IMPORTED_MODULE_2___default.a.keyBy(response.RegionInfoSet, 'Region');
      return lodash__WEBPACK_IMPORTED_MODULE_2___default.a.map(response.RegionInfoSet || [], function (item) {
        return {
          text: Object(_locale__WEBPACK_IMPORTED_MODULE_3__["t"])(item.Region),
          value: item.Region
        };
      });
    });
  };

  DCDatasource.prototype.getMetrics = function (region) {
    if (region === void 0) {
      region = 'ap-guangzhou';
    }

    return __awaiter(this, void 0, void 0, function () {
      var rawSet;
      return __generator(this, function (_a) {
        switch (_a.label) {
          case 0:
            return [4
            /*yield*/
            , _super.prototype.getMetrics.call(this, region)];

          case 1:
            rawSet = _a.sent();
            return [2
            /*return*/
            , lodash__WEBPACK_IMPORTED_MODULE_2___default.a.compact(rawSet.map(function (item) {
              if (Object(_query_def__WEBPACK_IMPORTED_MODULE_0__["isValidMetric"])(item)) {
                return item;
              }

              return null;
            }))];
        }
      });
    });
  };

  return DCDatasource;
}(_base_datasource__WEBPACK_IMPORTED_MODULE_1__["BaseDatasource"]);

/* harmony default export */ __webpack_exports__["default"] = (DCDatasource);

/***/ }),

/***/ "./datasource/tc_monitor/bmIntraLb/query.ts":
/*!**************************************************!*\
  !*** ./datasource/tc_monitor/bmIntraLb/query.ts ***!
  \**************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _base_query__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../_base/query */ "./datasource/tc_monitor/_base/query.ts");
/* harmony import */ var _query_def__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./query_def */ "./datasource/tc_monitor/bmIntraLb/query_def.ts");


Object(_base_query__WEBPACK_IMPORTED_MODULE_0__["default"])(_query_def__WEBPACK_IMPORTED_MODULE_1__["queryEditorName"], _query_def__WEBPACK_IMPORTED_MODULE_1__["queryEditorConfig"]);

/***/ }),

/***/ "./datasource/tc_monitor/bmIntraLb/query_def.ts":
/*!******************************************************!*\
  !*** ./datasource/tc_monitor/bmIntraLb/query_def.ts ***!
  \******************************************************/
/*! exports provided: default, BMINTRALBFilterFieldsDescriptor, templateQueryIdMap, BMINTRALBInstanceAliasList, BMINTRALBInvalidDemensions, namespace, queryEditorName, queryEditorConfig, isValidMetric, BMINTRALBGetInstanceQueryParams */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BMINTRALBFilterFieldsDescriptor", function() { return BMINTRALBFilterFieldsDescriptor; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "templateQueryIdMap", function() { return templateQueryIdMap; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BMINTRALBInstanceAliasList", function() { return BMINTRALBInstanceAliasList; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BMINTRALBInvalidDemensions", function() { return BMINTRALBInvalidDemensions; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "namespace", function() { return namespace; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "queryEditorName", function() { return queryEditorName; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "queryEditorConfig", function() { return queryEditorConfig; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isValidMetric", function() { return isValidMetric; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BMINTRALBGetInstanceQueryParams", function() { return GetInstanceQueryParams; });
/* harmony import */ var _common_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../common/utils */ "./datasource/common/utils.ts");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lodash */ "lodash");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_1__);


var namespace = 'QCE/BM_INTRA_LB'; // 组件名称。这里名字要和index.ts中的SERVICES对应，后面会根据SERVICES中service字段拼接这个query组件名称

var queryEditorName = 'bmIntraLbQuery';
var BMINTRALBInvalidDemensions = {
  vip: 'LoadBalancerVips',
  vpcId: 'VpcId'
}; // 要和文件名方式一致，ceip_summary=>CEIPSUMMARY

var BMINTRALBInstanceAliasList = ['LoadBalancerId', 'LoadBalancerVips', 'LoadBalancerName'];
var templateQueryIdMap = {
  instance: 'LoadBalancerId'
}; // select类型需要注意是{},multi后缀是[],dropdown是类型

var BMINTRALBFilterFields = {
  Limit: 20,
  Offset: 0,
  LoadBalancerIds: [],
  LoadBalancerName: [],
  LoadBalancerVips: []
};
var BMINTRALBFilterFieldsDescriptor = [{
  key: 'Offset',
  enDescriptor: 'Offset',
  cnDescriptor: '偏移量, 例如Offset=20&Limit=20 返回第 20 到 40 项',
  link: '',
  type: 'inputNumber',
  min: 0
}, {
  key: 'Limit',
  enDescriptor: 'Limit',
  cnDescriptor: '单次请求返回的数量，默认为20，最小值为1，最大值为100',
  link: '',
  type: 'inputNumber',
  min: 1,
  max: 100
}, {
  key: 'LoadBalancerIds',
  enDescriptor: 'LoadBalancerIds',
  cnDescriptor: '负载均衡器ID数组',
  link: '',
  type: 'inputMulti'
}, {
  key: 'LoadBalancerName',
  enDescriptor: 'LoadBalancerName',
  cnDescriptor: '负载均衡器名称',
  link: '',
  type: 'inputMulti'
}, {
  key: 'LoadBalancerVips',
  enDescriptor: 'LoadBalancerVips',
  cnDescriptor: '负载均衡获得的公网IP地址',
  link: '',
  type: 'inputMulti'
}]; // 各产品实例列表detail配置

var queryEditorConfig = {
  instanceDocUrl: 'https://cloud.tencent.com/document/api/1027/33280',
  namespace: namespace,
  fieldDescriptor: BMINTRALBFilterFieldsDescriptor
};
var BMINTRALB_STATE = {
  region: '',
  metricName: '',
  metricUnit: '',
  period: undefined,
  dimensionObject: null,
  instance: '',
  instanceAlias: 'LoadBalancerId',
  queries: BMINTRALBFilterFields
};
var BMLBValidMetricsT = ['Inpkg', 'Outpkg', 'Intraffic', 'Outtraffic', 'Connum', 'Req'];

function isValidMetric(metric) {
  var validMetrics = lodash__WEBPACK_IMPORTED_MODULE_1___default.a.map(BMLBValidMetricsT, lodash__WEBPACK_IMPORTED_MODULE_1___default.a.toUpper);

  return lodash__WEBPACK_IMPORTED_MODULE_1___default.a.indexOf(validMetrics, lodash__WEBPACK_IMPORTED_MODULE_1___default.a.toUpper(metric.MetricName)) !== -1;
}

function GetInstanceQueryParams(queries) {
  if (queries === void 0) {
    queries = {};
  }

  return Object(_common_utils__WEBPACK_IMPORTED_MODULE_0__["instanceQueryParamsBaseParse"])(queries, false);
}

/* harmony default export */ __webpack_exports__["default"] = (BMINTRALB_STATE);


/***/ }),

/***/ "./datasource/tc_monitor/bm_lb/datasource.ts":
/*!***************************************************!*\
  !*** ./datasource/tc_monitor/bm_lb/datasource.ts ***!
  \***************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _query_def__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./query_def */ "./datasource/tc_monitor/bm_lb/query_def.ts");
/* harmony import */ var _base_datasource__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../_base/datasource */ "./datasource/tc_monitor/_base/datasource.ts");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lodash */ "lodash");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _locale__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../locale */ "./locale/index.ts");
var __extends = undefined && undefined.__extends || function () {
  var _extendStatics = function extendStatics(d, b) {
    _extendStatics = Object.setPrototypeOf || {
      __proto__: []
    } instanceof Array && function (d, b) {
      d.__proto__ = b;
    } || function (d, b) {
      for (var p in b) {
        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];
      }
    };

    return _extendStatics(d, b);
  };

  return function (d, b) {
    if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");

    _extendStatics(d, b);

    function __() {
      this.constructor = d;
    }

    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();

var __assign = undefined && undefined.__assign || function () {
  __assign = Object.assign || function (t) {
    for (var s, i = 1, n = arguments.length; i < n; i++) {
      s = arguments[i];

      for (var p in s) {
        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
      }
    }

    return t;
  };

  return __assign.apply(this, arguments);
};

var __awaiter = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {
  function adopt(value) {
    return value instanceof P ? value : new P(function (resolve) {
      resolve(value);
    });
  }

  return new (P || (P = Promise))(function (resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }

    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }

    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }

    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};

var __generator = undefined && undefined.__generator || function (thisArg, body) {
  var _ = {
    label: 0,
    sent: function sent() {
      if (t[0] & 1) throw t[1];
      return t[1];
    },
    trys: [],
    ops: []
  },
      f,
      y,
      t,
      g;
  return g = {
    next: verb(0),
    "throw": verb(1),
    "return": verb(2)
  }, typeof Symbol === "function" && (g[Symbol.iterator] = function () {
    return this;
  }), g;

  function verb(n) {
    return function (v) {
      return step([n, v]);
    };
  }

  function step(op) {
    if (f) throw new TypeError("Generator is already executing.");

    while (_) {
      try {
        if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
        if (y = 0, t) op = [op[0] & 2, t.value];

        switch (op[0]) {
          case 0:
          case 1:
            t = op;
            break;

          case 4:
            _.label++;
            return {
              value: op[1],
              done: false
            };

          case 5:
            _.label++;
            y = op[1];
            op = [0];
            continue;

          case 7:
            op = _.ops.pop();

            _.trys.pop();

            continue;

          default:
            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
              _ = 0;
              continue;
            }

            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
              _.label = op[1];
              break;
            }

            if (op[0] === 6 && _.label < t[1]) {
              _.label = t[1];
              t = op;
              break;
            }

            if (t && _.label < t[2]) {
              _.label = t[2];

              _.ops.push(op);

              break;
            }

            if (t[2]) _.ops.pop();

            _.trys.pop();

            continue;
        }

        op = body.call(thisArg, _);
      } catch (e) {
        op = [6, e];
        y = 0;
      } finally {
        f = t = 0;
      }
    }

    if (op[0] & 5) throw op[1];
    return {
      value: op[0] ? op[1] : void 0,
      done: true
    };
  }
};






var DCDatasource =
/** @class */
function (_super) {
  __extends(DCDatasource, _super);

  function DCDatasource(instanceSettings, backendSrv, templateSrv) {
    var _this = _super.call(this, instanceSettings, backendSrv, templateSrv) || this;

    _this.Namespace = _query_def__WEBPACK_IMPORTED_MODULE_0__["namespace"];
    _this.InstanceAliasList = _query_def__WEBPACK_IMPORTED_MODULE_0__["BMLBInstanceAliasList"];
    _this.InvalidDimensions = _query_def__WEBPACK_IMPORTED_MODULE_0__["CPMInvalidDemensions"];
    _this.templateQueryIdMap = _query_def__WEBPACK_IMPORTED_MODULE_0__["templateQueryIdMap"]; // 此处service是接口的配置参数，需和plugin.json里一致，和constant.ts中SERVICES_API_INFO保持一致

    _this.InstanceReqConfig = {
      service: 'bmlb',
      action: 'DescribeLoadBalancers',
      responseField: 'LoadBalancerSet',
      interceptor: {
        request: function request(params) {
          return __assign(__assign({}, params), {
            LoadBalancerType: 'open'
          });
        } // 设置一些请求参数的 默认值

      }
    };
    _this.RegionMap = {};
    return _this;
  }

  DCDatasource.prototype.getMetrics = function (region) {
    if (region === void 0) {
      region = 'ap-guangzhou';
    }

    return __awaiter(this, void 0, void 0, function () {
      var rawSet;
      return __generator(this, function (_a) {
        switch (_a.label) {
          case 0:
            return [4
            /*yield*/
            , _super.prototype.getMetrics.call(this, region)];

          case 1:
            rawSet = _a.sent();
            return [2
            /*return*/
            , lodash__WEBPACK_IMPORTED_MODULE_2___default.a.compact(rawSet.map(function (item) {
              if (Object(_query_def__WEBPACK_IMPORTED_MODULE_0__["isValidMetric"])(item)) {
                return item;
              }

              return null;
            }))];
        }
      });
    });
  }; // 重写getRegion


  DCDatasource.prototype.getRegions = function () {
    var _this = this;

    return this.doRequest({
      url: this.url + '/bm'
    }, 'bm', {
      action: 'DescribeRegions',
      region: 'ap-guangzhou'
    }).then(function (response) {
      // 缓存，后面获取可用区zone
      _this.RegionMap = lodash__WEBPACK_IMPORTED_MODULE_2___default.a.keyBy(response.RegionInfoSet, 'Region');
      return lodash__WEBPACK_IMPORTED_MODULE_2___default.a.map(response.RegionInfoSet || [], function (item) {
        return {
          text: Object(_locale__WEBPACK_IMPORTED_MODULE_3__["t"])(item.Region),
          value: item.Region
        };
      });
    });
  };

  return DCDatasource;
}(_base_datasource__WEBPACK_IMPORTED_MODULE_1__["BaseDatasource"]);

/* harmony default export */ __webpack_exports__["default"] = (DCDatasource);

/***/ }),

/***/ "./datasource/tc_monitor/bm_lb/query.ts":
/*!**********************************************!*\
  !*** ./datasource/tc_monitor/bm_lb/query.ts ***!
  \**********************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _base_query__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../_base/query */ "./datasource/tc_monitor/_base/query.ts");
/* harmony import */ var _query_def__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./query_def */ "./datasource/tc_monitor/bm_lb/query_def.ts");


Object(_base_query__WEBPACK_IMPORTED_MODULE_0__["default"])(_query_def__WEBPACK_IMPORTED_MODULE_1__["queryEditorName"], _query_def__WEBPACK_IMPORTED_MODULE_1__["queryEditorConfig"]);

/***/ }),

/***/ "./datasource/tc_monitor/bm_lb/query_def.ts":
/*!**************************************************!*\
  !*** ./datasource/tc_monitor/bm_lb/query_def.ts ***!
  \**************************************************/
/*! exports provided: default, CPMFilterFieldsDescriptor, templateQueryIdMap, BMLBInstanceAliasList, CPMInvalidDemensions, namespace, queryEditorName, queryEditorConfig, isValidMetric, BMLBGetInstanceQueryParams */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CPMFilterFieldsDescriptor", function() { return CPMFilterFieldsDescriptor; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "templateQueryIdMap", function() { return templateQueryIdMap; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BMLBInstanceAliasList", function() { return BMLBInstanceAliasList; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CPMInvalidDemensions", function() { return CPMInvalidDemensions; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "namespace", function() { return namespace; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "queryEditorName", function() { return queryEditorName; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "queryEditorConfig", function() { return queryEditorConfig; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isValidMetric", function() { return isValidMetric; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BMLBGetInstanceQueryParams", function() { return GetInstanceQueryParams; });
/* harmony import */ var _common_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../common/utils */ "./datasource/common/utils.ts");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lodash */ "lodash");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_1__);


var namespace = 'QCE/BM_LB'; // 组件名称。这里名字要和index.ts中的SERVICES对应，后面会根据SERVICES中service字段拼接这个query组件名称

var queryEditorName = 'bmLbQuery';
var CPMInvalidDemensions = {
  vip: 'LoadBalancerVips'
}; // 要和文件名方式一致，ceip_summary=>CEIPSUMMARY

var BMLBInstanceAliasList = ['LoadBalancerId', 'LoadBalancerVips', 'LoadBalancerName'];
var templateQueryIdMap = {
  instance: 'LoadBalancerId'
}; // select类型需要注意是{},multi后缀是[],dropdown是类型

var CPMFilterFields = {
  Limit: 20,
  Offset: 0,
  LoadBalancerIds: [],
  LoadBalancerName: [],
  LoadBalancerVips: []
};
var CPMFilterFieldsDescriptor = [{
  key: 'Offset',
  enDescriptor: 'Offset',
  cnDescriptor: '偏移量, 例如Offset=20&Limit=20 返回第 20 到 40 项',
  link: '',
  type: 'inputNumber',
  min: 0
}, {
  key: 'Limit',
  enDescriptor: 'Limit',
  cnDescriptor: '单次请求返回的数量，默认为20，最小值为1，最大值为100',
  link: '',
  type: 'inputNumber',
  min: 1,
  max: 100
}, {
  key: 'LoadBalancerIds',
  enDescriptor: 'LoadBalancerIds',
  cnDescriptor: '负载均衡器ID数组',
  link: '',
  type: 'inputMulti'
}, {
  key: 'LoadBalancerName',
  enDescriptor: 'LoadBalancerName',
  cnDescriptor: '负载均衡器名称',
  link: '',
  type: 'inputMulti'
}, {
  key: 'LoadBalancerVips',
  enDescriptor: 'LoadBalancerVips',
  cnDescriptor: '负载均衡获得的公网IP地址',
  link: '',
  type: 'inputMulti'
}]; // 各产品实例列表detail配置

var queryEditorConfig = {
  instanceDocUrl: 'https://cloud.tencent.com/document/api/1027/33280',
  namespace: namespace,
  fieldDescriptor: CPMFilterFieldsDescriptor
};
var CPM_STATE = {
  region: '',
  metricName: '',
  metricUnit: '',
  period: undefined,
  dimensionObject: null,
  instance: '',
  instanceAlias: 'LoadBalancerId',
  queries: CPMFilterFields
};

function GetInstanceQueryParams(queries) {
  if (queries === void 0) {
    queries = {};
  }

  return Object(_common_utils__WEBPACK_IMPORTED_MODULE_0__["instanceQueryParamsBaseParse"])(queries, false);
}

var BMLBValidMetricsT = ['Inpkg', 'Outpkg', 'Intraffic', 'Outtraffic', 'Connum', 'Req'];

function isValidMetric(metric) {
  var validMetrics = lodash__WEBPACK_IMPORTED_MODULE_1___default.a.map(BMLBValidMetricsT, lodash__WEBPACK_IMPORTED_MODULE_1___default.a.toUpper);

  return lodash__WEBPACK_IMPORTED_MODULE_1___default.a.indexOf(validMetrics, lodash__WEBPACK_IMPORTED_MODULE_1___default.a.toUpper(metric.MetricName)) !== -1;
}

/* harmony default export */ __webpack_exports__["default"] = (CPM_STATE);


/***/ }),

/***/ "./datasource/tc_monitor/bm_pcx/datasource.ts":
/*!****************************************************!*\
  !*** ./datasource/tc_monitor/bm_pcx/datasource.ts ***!
  \****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _query_def__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./query_def */ "./datasource/tc_monitor/bm_pcx/query_def.ts");
/* harmony import */ var _base_datasource__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../_base/datasource */ "./datasource/tc_monitor/_base/datasource.ts");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lodash */ "lodash");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _locale__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../locale */ "./locale/index.ts");
var __extends = undefined && undefined.__extends || function () {
  var _extendStatics = function extendStatics(d, b) {
    _extendStatics = Object.setPrototypeOf || {
      __proto__: []
    } instanceof Array && function (d, b) {
      d.__proto__ = b;
    } || function (d, b) {
      for (var p in b) {
        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];
      }
    };

    return _extendStatics(d, b);
  };

  return function (d, b) {
    if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");

    _extendStatics(d, b);

    function __() {
      this.constructor = d;
    }

    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();






var DCDatasource =
/** @class */
function (_super) {
  __extends(DCDatasource, _super);

  function DCDatasource(instanceSettings, backendSrv, templateSrv) {
    var _this = _super.call(this, instanceSettings, backendSrv, templateSrv) || this;

    _this.Namespace = _query_def__WEBPACK_IMPORTED_MODULE_0__["namespace"];
    _this.InstanceAliasList = _query_def__WEBPACK_IMPORTED_MODULE_0__["BMPCXInstanceAliasList"];
    _this.InvalidDimensions = _query_def__WEBPACK_IMPORTED_MODULE_0__["BMPCXInvalidDemensions"];
    _this.templateQueryIdMap = _query_def__WEBPACK_IMPORTED_MODULE_0__["templateQueryIdMap"]; // 此处service是接口的配置参数，需和plugin.json里一致，和constant.ts中SERVICES_API_INFO保持一致

    _this.InstanceReqConfig = {
      service: 'bmvpc',
      action: 'DescribeVpcPeerConnections',
      responseField: 'VpcPeerConnectionSet'
    };
    _this.MetricReqConfig = {
      resultFilter: _query_def__WEBPACK_IMPORTED_MODULE_0__["modifyDimensons"]
    };
    _this.RegionMap = {};
    return _this;
  } // 重写getRegion


  DCDatasource.prototype.getRegions = function () {
    var _this = this;

    return this.doRequest({
      url: this.url + '/bm'
    }, 'bm', {
      action: 'DescribeRegions',
      region: 'ap-guangzhou'
    }).then(function (response) {
      // 缓存，后面获取可用区zone
      _this.RegionMap = lodash__WEBPACK_IMPORTED_MODULE_2___default.a.keyBy(response.RegionInfoSet, 'Region');
      return lodash__WEBPACK_IMPORTED_MODULE_2___default.a.map(response.RegionInfoSet || [], function (item) {
        return {
          text: Object(_locale__WEBPACK_IMPORTED_MODULE_3__["t"])(item.Region),
          value: item.Region
        };
      });
    });
  };

  return DCDatasource;
}(_base_datasource__WEBPACK_IMPORTED_MODULE_1__["BaseDatasource"]);

/* harmony default export */ __webpack_exports__["default"] = (DCDatasource);

/***/ }),

/***/ "./datasource/tc_monitor/bm_pcx/query.ts":
/*!***********************************************!*\
  !*** ./datasource/tc_monitor/bm_pcx/query.ts ***!
  \***********************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _base_query__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../_base/query */ "./datasource/tc_monitor/_base/query.ts");
/* harmony import */ var _query_def__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./query_def */ "./datasource/tc_monitor/bm_pcx/query_def.ts");


Object(_base_query__WEBPACK_IMPORTED_MODULE_0__["default"])(_query_def__WEBPACK_IMPORTED_MODULE_1__["queryEditorName"], _query_def__WEBPACK_IMPORTED_MODULE_1__["queryEditorConfig"]);

/***/ }),

/***/ "./datasource/tc_monitor/bm_pcx/query_def.ts":
/*!***************************************************!*\
  !*** ./datasource/tc_monitor/bm_pcx/query_def.ts ***!
  \***************************************************/
/*! exports provided: default, BMPCXFilterFieldsDescriptor, templateQueryIdMap, BMPCXInstanceAliasList, BMPCXInvalidDemensions, namespace, queryEditorName, queryEditorConfig, modifyDimensons, BMPCXGetInstanceQueryParams */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BMPCXFilterFieldsDescriptor", function() { return BMPCXFilterFieldsDescriptor; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "templateQueryIdMap", function() { return templateQueryIdMap; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BMPCXInstanceAliasList", function() { return BMPCXInstanceAliasList; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BMPCXInvalidDemensions", function() { return BMPCXInvalidDemensions; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "namespace", function() { return namespace; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "queryEditorName", function() { return queryEditorName; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "queryEditorConfig", function() { return queryEditorConfig; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "modifyDimensons", function() { return modifyDimensons; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BMPCXGetInstanceQueryParams", function() { return GetInstanceQueryParams; });
/* harmony import */ var _common_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../common/utils */ "./datasource/common/utils.ts");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lodash */ "lodash");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_1__);


var namespace = 'QCE/BM_PCX'; // 组件名称。这里名字要和index.ts中的SERVICES对应，后面会根据SERVICES中service字段拼接这个query组件名称

var queryEditorName = 'bmPcxQuery';
var BMPCXInvalidDemensions = {
  peeringConnectionId: 'VpcPeerConnectionId'
}; // 要和文件名方式一致，ceip_summary=>CEIPSUMMARY

var BMPCXInstanceAliasList = ['VpcPeerConnectionId', 'VpcPeerConnectionName'];
var templateQueryIdMap = {
  instance: 'VpcPeerConnectionId'
}; // select类型需要注意是{},multi后缀是[],dropdown是类型

var BMPCXFilterFields = {
  Limit: 20,
  Offset: 0,
  VpcPeerConnectionIds: []
};
var BMPCXFilterFieldsDescriptor = [{
  key: 'Offset',
  enDescriptor: 'Offset',
  cnDescriptor: '偏移量, 例如Offset=20&Limit=20 返回第 20 到 40 项',
  link: '',
  type: 'inputNumber',
  min: 0
}, {
  key: 'Limit',
  enDescriptor: 'Limit',
  cnDescriptor: '单次请求返回的数量，默认为20，最小值为1，最大值为100',
  link: '',
  type: 'inputNumber',
  min: 1,
  max: 100
}, {
  key: 'VpcPeerConnectionIds',
  enDescriptor: 'VpcPeerConnectionIds',
  cnDescriptor: '对等连接实例ID',
  link: '',
  type: 'inputMulti'
}]; // 各产品实例列表detail配置

var queryEditorConfig = {
  instanceDocUrl: 'https://cloud.tencent.com/document/product/1024/36903',
  namespace: namespace,
  fieldDescriptor: BMPCXFilterFieldsDescriptor
};
var BMPCX_STATE = {
  region: '',
  metricName: '',
  metricUnit: '',
  period: undefined,
  dimensionObject: null,
  instance: '',
  instanceAlias: 'VpcPeerConnectionId',
  queries: BMPCXFilterFields
};

function GetInstanceQueryParams(queries) {
  if (queries === void 0) {
    queries = {};
  }

  return Object(_common_utils__WEBPACK_IMPORTED_MODULE_0__["instanceQueryParamsBaseParse"])(queries, false);
}

function modifyDimensons(metricItem) {
  var metricTmp = lodash__WEBPACK_IMPORTED_MODULE_1___default.a.cloneDeep(metricItem);

  metricTmp.Dimensions.forEach(function (item) {
    item.Dimensions = ['peeringConnectionId'];
  });
  return metricTmp;
}

/* harmony default export */ __webpack_exports__["default"] = (BMPCX_STATE);


/***/ }),

/***/ "./datasource/tc_monitor/bwp/datasource.ts":
/*!*************************************************!*\
  !*** ./datasource/tc_monitor/bwp/datasource.ts ***!
  \*************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _query_def__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./query_def */ "./datasource/tc_monitor/bwp/query_def.ts");
/* harmony import */ var _base_datasource__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../_base/datasource */ "./datasource/tc_monitor/_base/datasource.ts");
var __extends = undefined && undefined.__extends || function () {
  var _extendStatics = function extendStatics(d, b) {
    _extendStatics = Object.setPrototypeOf || {
      __proto__: []
    } instanceof Array && function (d, b) {
      d.__proto__ = b;
    } || function (d, b) {
      for (var p in b) {
        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];
      }
    };

    return _extendStatics(d, b);
  };

  return function (d, b) {
    if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");

    _extendStatics(d, b);

    function __() {
      this.constructor = d;
    }

    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();




var BWPDatasource =
/** @class */
function (_super) {
  __extends(BWPDatasource, _super);

  function BWPDatasource(instanceSettings, backendSrv, templateSrv) {
    var _this = _super.call(this, instanceSettings, backendSrv, templateSrv) || this;

    _this.Namespace = 'QCE/BWP';
    _this.InstanceAliasList = _query_def__WEBPACK_IMPORTED_MODULE_0__["BWPInstanceAliasList"];
    _this.InvalidDimensions = _query_def__WEBPACK_IMPORTED_MODULE_0__["BWPInvalidDemensions"];
    _this.templateQueryIdMap = {
      instance: 'BandwidthPackageId'
    };
    _this.InstanceReqConfig = {
      service: 'vpc',
      action: 'DescribeBandwidthPackages',
      responseField: 'BandwidthPackageSet'
    };
    return _this;
  }

  return BWPDatasource;
}(_base_datasource__WEBPACK_IMPORTED_MODULE_1__["BaseDatasource"]);

/* harmony default export */ __webpack_exports__["default"] = (BWPDatasource);

/***/ }),

/***/ "./datasource/tc_monitor/bwp/query.ts":
/*!********************************************!*\
  !*** ./datasource/tc_monitor/bwp/query.ts ***!
  \********************************************/
/*! exports provided: BWPQueryCtrl, bwpQuery */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BWPQueryCtrl", function() { return BWPQueryCtrl; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "bwpQuery", function() { return bwpQuery; });
/* harmony import */ var grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! grafana/app/core/core_module */ "grafana/app/core/core_module");
/* harmony import */ var grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _query_def__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./query_def */ "./datasource/tc_monitor/bwp/query_def.ts");



var BWPQueryCtrl =
/** @class */
function () {
  BWPQueryCtrl.$inject = ["$scope", "$rootScope"];

  /** @ngInject */
  function BWPQueryCtrl($scope, $rootScope) {
    $scope.init = function () {
      $scope.BWPFilterFieldsDescriptor = _query_def__WEBPACK_IMPORTED_MODULE_1__["BWPFilterFieldsDescriptor"];
    };

    $scope.onChecked = function (srcField, dstField) {
      if ($scope.target.queries[srcField] === true) {
        $scope.target.queries[dstField] = false;
      }

      $scope.onChange();
    };

    $scope.getDropdown = function (field) {
      switch (field) {
        case 'zone':
          return $scope.getZones();

        default:
          return [];
      }
    };

    $scope.getZones = function () {
      if (!$scope.region) {
        return [];
      }

      return $scope.datasource.getZones('cvm', $scope.region);
    };

    $scope.init();
  }

  return BWPQueryCtrl;
}();


var template = "\n<div class=\"tc-sub-params\" ng-if=\"showDetail\">\n<label class=\"gf-form-label tc-info-label\">\n  Instances are queried by following params.\n  <a target=\"_blank\" style=\"text-decoration:underline;color:#006eff;font-size:medium\" href=\"https://cloud.tencent.com/document/api/213/15728\">Click here to get API doc.</a>\n</label>\n<div class=\"gf-form-inline\">\n  <div class=\"gf-form\">\n    <label class=\"gf-form-label width-14\">\n      Offset\n      <info-popover mode=\"right-normal\">\n        \u504F\u79FB\u91CF, \u4F8B\u5982Offset=20&Limit=20 \u8FD4\u56DE\u7B2C 20 \u5230 40 \u9879\n      </info-popover>\n    </label>\n    <input type=\"number\" ng-model=\"target.queries.Offset\" class=\"gf-form-input width-10\" ng-min=\"0\" ng-change=\"onChange()\">\n  </div>\n</div>\n<div class=\"gf-form-inline\">\n  <div class=\"gf-form\">\n    <label class=\"gf-form-label width-14\">\n      Limit\n      <info-popover mode=\"right-normal\">\n        \u5355\u6B21\u8BF7\u6C42\u8FD4\u56DE\u7684\u6570\u91CF\uFF0C\u9ED8\u8BA4\u4E3A20\uFF0C\u6700\u5C0F\u503C\u4E3A1\uFF0C\u6700\u5927\u503C\u4E3A100\n      </info-popover>\n    </label>\n    <input type=\"number\" ng-model=\"target.queries.Limit\" class=\"gf-form-input width-10\" ng-min=\"1\" ng-max=\"100\" ng-change=\"onChange()\">\n  </div>\n</div>\n<div class=\"gf-form-inline\">\n  <div class=\"gf-form\">\n    <label class=\"gf-form-label width-14\">\n      BandwidthPackageIds\n      <info-popover mode=\"right-normal\">\n        \u5E26\u5BBD\u5305\u552F\u4E00ID\u5217\u8868\uFF0C\u53C2\u6570\u4E0D\u652F\u6301\u540C\u65F6\u6307\u5B9A BandwidthPackageIds \u548C Filters\n      </info-popover>\n    </label>\n    <gf-form-switch class=\"gf-form tc-switch\" label-class=\"width-7\" checked=\"target.queries.instanceIdsChecked\"\n      switch-class=\"max-width-5\" on-change=\"onChecked('instanceIdsChecked', 'filtersChecked')\"></gf-form-switch>\n  </div>\n</div>\n<div class=\"gf-form-inline tc-sub-params\" ng-if=\"target.queries.instanceIdsChecked\">\n  <multi-condition type=\"'input'\" max-cond=\"100\" value=\"target.queries.BandwidthPackageIds\" on-change=\"onChange()\">\n  </multi-condition>\n</div>\n<div class=\"gf-form-inline\">\n  <div class=\"gf-form\">\n    <label class=\"gf-form-label width-9\">\n      Filters\n      <info-popover mode=\"right-normal\">\n        \u8FC7\u6EE4\u6761\u4EF6\uFF0C\u6BCF\u6B21\u8BF7\u6C42\u7684 Filters \u7684\u4E0A\u9650\u4E3A10\uFF0CFilter.Values \u7684\u4E0A\u9650\u4E3A5\u3002\u53C2\u6570\u4E0D\u652F\u6301\u540C\u65F6\u6307\u5B9A BandwidthPackageIds \u548C Filters\n      </info-popover>\n    </label>\n    <gf-form-switch class=\"gf-form tc-switch\" label-class=\"width-7\" checked=\"target.queries.filtersChecked\" switch-class=\"max-width-5\"\n      on-change=\"onChecked('filtersChecked','instanceIdsChecked')\"></gf-form-switch>\n  </div>\n</div>\n<div ng-if=\"target.queries.filtersChecked\" class=\"tc-sub-params\">\n  <div class=\"gf-form-inline\" ng-repeat=\"field in BWPFilterFieldsDescriptor\">\n    <label class=\"gf-form-label width-14\">\n      {{ field.key }}\n      <info-popover mode=\"right-normal\">\n        {{ field.cnDescriptor }}\n        <a target=\"_blank\" href=\"{{field.link}}\" ng-if=\"field.link\">Click here for more information.</a>\n      </info-popover>\n    </label>\n    <multi-condition\n      ng-if=\"field.type === 'dropdownmulti'\"\n      type=\"'dropdown'\"\n      max-cond=\"5\"\n      value=\"target.queries.Filters[field.key]\"\n      get-options=\"getDropdown(field.key)\"\n      on-change=\"onChange()\"\n    ></multi-condition>\n    <multi-condition\n      ng-if=\"field.type === 'inputNumbermulti'\"\n      type=\"'inputNumber'\"\n      max-cond=\"5\"\n      value=\"target.queries.Filters[field.key]\"\n      maxNum=\"field.max\"\n      minNum=\"field.min\"\n      on-change=\"onChange()\"\n    ></multi-condition>\n    <multi-condition\n      ng-if=\"field.type === 'inputmulti'\"\n      type=\"'input'\"\n      max-cond=\"5\"\n      value=\"target.queries.Filters[field.key]\"\n      on-change=\"onChange()\"\n    ></multi-condition>\n    <custom-select-dropdown\n      ng-if=\"field.type === 'select'\"\n      value=\"target.queries.Filters[field.key]\"\n      options=\"field.list\"\n      multiple=\"true\"\n      on-change=\"onChange()\"\n    ></custom-select-dropdown>\n  </div>\n</div>\n\n</div>\n";
function bwpQuery() {
  return {
    template: template,
    controller: BWPQueryCtrl,
    restrict: 'E',
    scope: {
      target: '=',
      showDetail: '=',
      region: '=',
      datasource: '=',
      getDropdownOptions: '&',
      onChange: '&'
    }
  };
}
grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0___default.a.directive('bwpQuery', bwpQuery);

/***/ }),

/***/ "./datasource/tc_monitor/bwp/query_def.ts":
/*!************************************************!*\
  !*** ./datasource/tc_monitor/bwp/query_def.ts ***!
  \************************************************/
/*! exports provided: default, BWPFilterFieldsDescriptor, templateQueryIdMap, BWPInstanceAliasList, BWPInvalidDemensions, BWPGetInstanceQueryParams */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BWPFilterFieldsDescriptor", function() { return BWPFilterFieldsDescriptor; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "templateQueryIdMap", function() { return templateQueryIdMap; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BWPInstanceAliasList", function() { return BWPInstanceAliasList; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BWPInvalidDemensions", function() { return BWPInvalidDemensions; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BWPGetInstanceQueryParams", function() { return GetInstanceQueryParams; });
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lodash */ "lodash");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__);
var __assign = undefined && undefined.__assign || function () {
  __assign = Object.assign || function (t) {
    for (var s, i = 1, n = arguments.length; i < n; i++) {
      s = arguments[i];

      for (var p in s) {
        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
      }
    }

    return t;
  };

  return __assign.apply(this, arguments);
};


var networkTypes = [{
  text: 'BGP',
  value: 'BGP'
}, {
  text: 'SINGLEISP',
  value: 'SINGLEISP'
}, {
  text: 'ANYCAST',
  value: 'ANYCAST'
}];
var chargeTypes = [{
  text: 'top5计费',
  value: 'TOP5_POSTPAID_BY_MONTH'
}, {
  text: '月95计费',
  value: 'PERCENT95_POSTPAID_BY_MONTH'
}];
var BWPFilterFields = {
  'bandwidth-package_id': [],
  'bandwidth-package-name': [],
  'network-type': [],
  'charge-type': []
};
var BWPFilterFieldsDescriptor = [{
  key: 'bandwidth-package_id',
  enDescriptor: 'BandwidthPackage Id',
  cnDescriptor: '带宽包ID',
  link: '',
  type: 'inputmulti'
}, {
  key: 'bandwidth-package-name',
  enDescriptor: 'BandwidthPackage Name',
  cnDescriptor: '带宽包名称',
  link: '',
  type: 'inputmulti'
}, {
  key: 'network-type',
  enDescriptor: 'network type',
  cnDescriptor: '带宽包类型',
  link: '',
  type: 'select',
  list: networkTypes
}, {
  key: 'charge-type',
  enDescriptor: 'charge type',
  cnDescriptor: '带宽包计费类型',
  link: '',
  type: 'select',
  list: chargeTypes
}];
var BWP_STATE = {
  region: '',
  metricName: '',
  metricUnit: '',
  period: undefined,
  dimensionObject: null,
  instance: '',
  instanceAlias: 'BandwidthPackageId',
  queries: {
    Limit: 20,
    Offset: 0,
    instanceIdsChecked: false,
    filtersChecked: false,
    BandwidthPackageIds: [''],
    Filters: __assign({}, BWPFilterFields)
  }
};

function GetInstanceQueryParams(queries) {
  if (queries === void 0) {
    queries = {};
  }

  var params = {};

  if (!lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isEmpty(queries)) {
    params.Limit = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(queries, 'Limit', 20) || 20;
    params.Offset = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(queries, 'Offset', 0) || 0;

    if (queries.instanceIdsChecked) {
      if (lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isArray(queries.BandwidthPackageIds)) {
        var BandwidthPackageIds = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.compact(queries.BandwidthPackageIds);

        if (lodash__WEBPACK_IMPORTED_MODULE_0___default.a.uniq(BandwidthPackageIds).length > 0) {
          params.BandwidthPackageIds = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.uniq(BandwidthPackageIds).slice(0, 100);
        }
      }
    } else if (queries.filtersChecked) {
      var Filters_1 = [];

      lodash__WEBPACK_IMPORTED_MODULE_0___default.a.forEach(queries.Filters, function (item, key) {
        if (Filters_1.length > 9) {
          return;
        }

        if (lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isArray(item)) {
          item = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.compact(item);

          if (item.length > 0) {
            Filters_1.push({
              Name: key,
              Values: lodash__WEBPACK_IMPORTED_MODULE_0___default.a.uniq(item).slice(0, 5)
            });
          }
        } else if (lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isObject(item)) {
          if (!lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isEmpty(lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(item, 'value', []))) {
            Filters_1.push({
              Name: key,
              Values: lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(item, 'value', []).slice(0, 5)
            });
          }
        }
      });

      if (Filters_1.length > 0) {
        params.Filters = Filters_1;
      }
    }
  }

  return params;
}

var BWPInstanceAliasList = ['BandwidthPackageId', 'BandwidthPackageName'];
var templateQueryIdMap = {
  instance: 'BandwidthPackageId'
};
var BWPInvalidDemensions = {
  bandwidthPackageId: 'BandwidthPackageId'
};
/* harmony default export */ __webpack_exports__["default"] = (BWP_STATE);


/***/ }),

/***/ "./datasource/tc_monitor/cbs/datasource.ts":
/*!*************************************************!*\
  !*** ./datasource/tc_monitor/cbs/datasource.ts ***!
  \*************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _query_def__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./query_def */ "./datasource/tc_monitor/cbs/query_def.ts");
/* harmony import */ var _base_datasource__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../_base/datasource */ "./datasource/tc_monitor/_base/datasource.ts");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lodash */ "lodash");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_2__);
var __extends = undefined && undefined.__extends || function () {
  var _extendStatics = function extendStatics(d, b) {
    _extendStatics = Object.setPrototypeOf || {
      __proto__: []
    } instanceof Array && function (d, b) {
      d.__proto__ = b;
    } || function (d, b) {
      for (var p in b) {
        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];
      }
    };

    return _extendStatics(d, b);
  };

  return function (d, b) {
    if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");

    _extendStatics(d, b);

    function __() {
      this.constructor = d;
    }

    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();

var __awaiter = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {
  function adopt(value) {
    return value instanceof P ? value : new P(function (resolve) {
      resolve(value);
    });
  }

  return new (P || (P = Promise))(function (resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }

    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }

    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }

    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};

var __generator = undefined && undefined.__generator || function (thisArg, body) {
  var _ = {
    label: 0,
    sent: function sent() {
      if (t[0] & 1) throw t[1];
      return t[1];
    },
    trys: [],
    ops: []
  },
      f,
      y,
      t,
      g;
  return g = {
    next: verb(0),
    "throw": verb(1),
    "return": verb(2)
  }, typeof Symbol === "function" && (g[Symbol.iterator] = function () {
    return this;
  }), g;

  function verb(n) {
    return function (v) {
      return step([n, v]);
    };
  }

  function step(op) {
    if (f) throw new TypeError("Generator is already executing.");

    while (_) {
      try {
        if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
        if (y = 0, t) op = [op[0] & 2, t.value];

        switch (op[0]) {
          case 0:
          case 1:
            t = op;
            break;

          case 4:
            _.label++;
            return {
              value: op[1],
              done: false
            };

          case 5:
            _.label++;
            y = op[1];
            op = [0];
            continue;

          case 7:
            op = _.ops.pop();

            _.trys.pop();

            continue;

          default:
            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
              _ = 0;
              continue;
            }

            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
              _.label = op[1];
              break;
            }

            if (op[0] === 6 && _.label < t[1]) {
              _.label = t[1];
              t = op;
              break;
            }

            if (t && _.label < t[2]) {
              _.label = t[2];

              _.ops.push(op);

              break;
            }

            if (t[2]) _.ops.pop();

            _.trys.pop();

            continue;
        }

        op = body.call(thisArg, _);
      } catch (e) {
        op = [6, e];
        y = 0;
      } finally {
        f = t = 0;
      }
    }

    if (op[0] & 5) throw op[1];
    return {
      value: op[0] ? op[1] : void 0,
      done: true
    };
  }
};





var DCDatasource =
/** @class */
function (_super) {
  __extends(DCDatasource, _super);

  function DCDatasource(instanceSettings, backendSrv, templateSrv) {
    var _this = _super.call(this, instanceSettings, backendSrv, templateSrv) || this;

    _this.Namespace = _query_def__WEBPACK_IMPORTED_MODULE_0__["namespace"];
    _this.InstanceAliasList = _query_def__WEBPACK_IMPORTED_MODULE_0__["CBSInstanceAliasList"];
    _this.InvalidDimensions = _query_def__WEBPACK_IMPORTED_MODULE_0__["CBSInvalidDemensions"];
    _this.templateQueryIdMap = _query_def__WEBPACK_IMPORTED_MODULE_0__["templateQueryIdMap"]; // 此处service是接口的配置参数，需和plugin.json里一致，和constant.ts中SERVICES_API_INFO保持一致

    _this.InstanceReqConfig = {
      service: 'cbs',
      action: 'DescribeDisks',
      responseField: 'DiskSet'
    };
    return _this;
  }

  DCDatasource.prototype.getMetrics = function (region) {
    if (region === void 0) {
      region = 'ap-guangzhou';
    }

    return __awaiter(this, void 0, void 0, function () {
      var rawSet;
      return __generator(this, function (_a) {
        switch (_a.label) {
          case 0:
            return [4
            /*yield*/
            , _super.prototype.getMetrics.call(this, region)];

          case 1:
            rawSet = _a.sent();
            return [2
            /*return*/
            , lodash__WEBPACK_IMPORTED_MODULE_2___default.a.filter(rawSet, _query_def__WEBPACK_IMPORTED_MODULE_0__["isValidMetric"])];
        }
      });
    });
  };

  return DCDatasource;
}(_base_datasource__WEBPACK_IMPORTED_MODULE_1__["BaseDatasource"]);

/* harmony default export */ __webpack_exports__["default"] = (DCDatasource);

/***/ }),

/***/ "./datasource/tc_monitor/cbs/query.ts":
/*!********************************************!*\
  !*** ./datasource/tc_monitor/cbs/query.ts ***!
  \********************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _base_query__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../_base/query */ "./datasource/tc_monitor/_base/query.ts");
/* harmony import */ var _query_def__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./query_def */ "./datasource/tc_monitor/cbs/query_def.ts");


Object(_base_query__WEBPACK_IMPORTED_MODULE_0__["default"])(_query_def__WEBPACK_IMPORTED_MODULE_1__["queryEditorName"], _query_def__WEBPACK_IMPORTED_MODULE_1__["queryEditorConfig"]);

/***/ }),

/***/ "./datasource/tc_monitor/cbs/query_def.ts":
/*!************************************************!*\
  !*** ./datasource/tc_monitor/cbs/query_def.ts ***!
  \************************************************/
/*! exports provided: default, CBSFilterFieldsDescriptor, templateQueryIdMap, CBSInstanceAliasList, CBSInvalidDemensions, namespace, queryEditorName, queryEditorConfig, isValidMetric, CBSGetInstanceQueryParams */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CBSFilterFieldsDescriptor", function() { return CBSFilterFieldsDescriptor; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "templateQueryIdMap", function() { return templateQueryIdMap; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CBSInstanceAliasList", function() { return CBSInstanceAliasList; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CBSInvalidDemensions", function() { return CBSInvalidDemensions; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "namespace", function() { return namespace; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "queryEditorName", function() { return queryEditorName; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "queryEditorConfig", function() { return queryEditorConfig; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isValidMetric", function() { return isValidMetric; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CBSGetInstanceQueryParams", function() { return GetInstanceQueryParams; });
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lodash */ "lodash");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _common_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../common/utils */ "./datasource/common/utils.ts");


var namespace = 'QCE/BLOCK_STORAGE';
var queryEditorName = 'cbsQuery';
var CBSInvalidDemensions = {
  diskId: 'DiskId',
  InstanceId: 'InstanceId',
  diskname: 'DiskName',
  unInstanceId: 'InstanceId'
};
var CBSInstanceAliasList = ['DiskId', 'DiskName'];
var templateQueryIdMap = {
  instance: 'DiskId'
}; // select类型需要注意是{},multi后缀是[]

var CBSFilterFields = {
  Limit: 20,
  Offset: 0,
  DiskIds: [],
  OrderField: [],
  Order: [],
  ReturnBindAutoSnapshotPolicy: false
};
var CBSFilterFieldsDescriptor = [{
  key: 'Offset',
  enDescriptor: 'Offset',
  cnDescriptor: '偏移量, 例如Offset=20&Limit=20 返回第 20 到 40 项',
  link: '',
  type: 'inputNumber',
  min: 0
}, {
  key: 'Limit',
  enDescriptor: 'Limit',
  cnDescriptor: '单次请求返回的数量，默认为20，最小值为1，最大值为100',
  link: '',
  type: 'inputNumber',
  min: 1,
  max: 100
}, {
  key: 'DiskIds',
  enDescriptor: 'DiskIds',
  cnDescriptor: '云硬盘ID',
  link: '',
  type: 'inputMulti'
}, {
  key: 'Order',
  enDescriptor: 'Order',
  cnDescriptor: '排列顺序',
  link: '',
  type: 'select',
  list: [{
    text: '升序排列',
    value: 'ASC'
  }, {
    text: '降序排列',
    value: 'DESC'
  }]
}, {
  key: 'OrderField',
  enDescriptor: 'OrderField',
  cnDescriptor: '排序的依据字段',
  link: '',
  type: 'select',
  list: [{
    text: '云盘的创建时间排序',
    value: 'CREATE_TIME'
  }, {
    text: '云盘的到期时间排序',
    value: 'DEADLINE'
  }]
}, {
  key: 'ReturnBindAutoSnapshotPolicy',
  enDescriptor: 'ReturnBindAutoSnapshotPolicy',
  cnDescriptor: '否需要返回云盘绑定的定期快照策略ID',
  link: '',
  type: 'switch'
}]; // 各产品实例列表detail配置

var queryEditorConfig = {
  instanceDocUrl: 'https://cloud.tencent.com/document/api/362/16315',
  namespace: namespace,
  fieldDescriptor: CBSFilterFieldsDescriptor
};
var CBS_STATE = {
  region: '',
  metricName: '',
  metricUnit: '',
  period: undefined,
  dimensionObject: null,
  instance: '',
  instanceAlias: 'DiskId',
  queries: CBSFilterFields
};

function GetInstanceQueryParams(queries) {
  if (queries === void 0) {
    queries = {};
  }

  return Object(_common_utils__WEBPACK_IMPORTED_MODULE_1__["instanceQueryParamsBaseParse"])(queries, false);
}

function isValidMetric(metricObj) {
  if (metricObj === void 0) {
    metricObj = {};
  }

  var dimension = lodash__WEBPACK_IMPORTED_MODULE_0__["get"](metricObj, 'Dimensions[0].Dimensions'); // console.log('dimension', dimension, dimension.length === 1 && _.indexOf(dimension, 'diskId') !== -1);


  return dimension.length === 1 && lodash__WEBPACK_IMPORTED_MODULE_0__["indexOf"](dimension, 'diskId') !== -1;
}

/* harmony default export */ __webpack_exports__["default"] = (CBS_STATE);


/***/ }),

/***/ "./datasource/tc_monitor/cdb/datasource.ts":
/*!*************************************************!*\
  !*** ./datasource/tc_monitor/cdb/datasource.ts ***!
  \*************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lodash */ "lodash");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _query_def__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./query_def */ "./datasource/tc_monitor/cdb/query_def.ts");
/* harmony import */ var _common_constants__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../common/constants */ "./datasource/common/constants.ts");
/* harmony import */ var _base_datasource__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../_base/datasource */ "./datasource/tc_monitor/_base/datasource.ts");
var __extends = undefined && undefined.__extends || function () {
  var _extendStatics = function extendStatics(d, b) {
    _extendStatics = Object.setPrototypeOf || {
      __proto__: []
    } instanceof Array && function (d, b) {
      d.__proto__ = b;
    } || function (d, b) {
      for (var p in b) {
        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];
      }
    };

    return _extendStatics(d, b);
  };

  return function (d, b) {
    if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");

    _extendStatics(d, b);

    function __() {
      this.constructor = d;
    }

    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();

var __awaiter = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {
  function adopt(value) {
    return value instanceof P ? value : new P(function (resolve) {
      resolve(value);
    });
  }

  return new (P || (P = Promise))(function (resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }

    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }

    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }

    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};

var __generator = undefined && undefined.__generator || function (thisArg, body) {
  var _ = {
    label: 0,
    sent: function sent() {
      if (t[0] & 1) throw t[1];
      return t[1];
    },
    trys: [],
    ops: []
  },
      f,
      y,
      t,
      g;
  return g = {
    next: verb(0),
    "throw": verb(1),
    "return": verb(2)
  }, typeof Symbol === "function" && (g[Symbol.iterator] = function () {
    return this;
  }), g;

  function verb(n) {
    return function (v) {
      return step([n, v]);
    };
  }

  function step(op) {
    if (f) throw new TypeError("Generator is already executing.");

    while (_) {
      try {
        if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
        if (y = 0, t) op = [op[0] & 2, t.value];

        switch (op[0]) {
          case 0:
          case 1:
            t = op;
            break;

          case 4:
            _.label++;
            return {
              value: op[1],
              done: false
            };

          case 5:
            _.label++;
            y = op[1];
            op = [0];
            continue;

          case 7:
            op = _.ops.pop();

            _.trys.pop();

            continue;

          default:
            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
              _ = 0;
              continue;
            }

            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
              _.label = op[1];
              break;
            }

            if (op[0] === 6 && _.label < t[1]) {
              _.label = t[1];
              t = op;
              break;
            }

            if (t && _.label < t[2]) {
              _.label = t[2];

              _.ops.push(op);

              break;
            }

            if (t[2]) _.ops.pop();

            _.trys.pop();

            continue;
        }

        op = body.call(thisArg, _);
      } catch (e) {
        op = [6, e];
        y = 0;
      } finally {
        f = t = 0;
      }
    }

    if (op[0] & 5) throw op[1];
    return {
      value: op[0] ? op[1] : void 0,
      done: true
    };
  }
};






var CDBDatasource =
/** @class */
function (_super) {
  __extends(CDBDatasource, _super);

  function CDBDatasource(instanceSettings, backendSrv, templateSrv) {
    var _this = _super.call(this, instanceSettings, backendSrv, templateSrv) || this;

    _this.Namespace = 'QCE/CDB';
    _this.InstanceAliasList = _query_def__WEBPACK_IMPORTED_MODULE_1__["CDBInstanceAliasList"];
    _this.InvalidDimensions = _query_def__WEBPACK_IMPORTED_MODULE_1__["CDBInvalidDemensions"];
    _this.templateQueryIdMap = {
      instance: 'InstanceId'
    };
    _this.InstanceReqConfig = {
      service: 'cdb',
      action: 'DescribeDBInstances',
      responseField: 'Items'
    };
    return _this;
  }

  CDBDatasource.prototype.getMetrics = function (region) {
    if (region === void 0) {
      region = 'ap-guangzhou';
    }

    return __awaiter(this, void 0, void 0, function () {
      var rawSet;
      return __generator(this, function (_a) {
        switch (_a.label) {
          case 0:
            return [4
            /*yield*/
            , _super.prototype.getMetrics.call(this, region)];

          case 1:
            rawSet = _a.sent();
            return [2
            /*return*/
            , lodash__WEBPACK_IMPORTED_MODULE_0___default.a.compact(rawSet.map(function (item) {
              if (Object(_query_def__WEBPACK_IMPORTED_MODULE_1__["isValidMetric"])(item)) {
                return Object(_query_def__WEBPACK_IMPORTED_MODULE_1__["modifyDimensons"])(item);
              }

              return null;
            }))];
        }
      });
    });
  };
  /**
   * 获取 可用区
   * @param region 地域信息
   */


  CDBDatasource.prototype.getZones = function (region) {
    var serviceInfo = Object(_common_constants__WEBPACK_IMPORTED_MODULE_2__["GetServiceAPIInfo"])(region, 'cvm');
    return this.doRequest({
      url: this.url + serviceInfo.path
    }, serviceInfo.service, {
      region: region,
      action: 'DescribeZones'
    }).then(function (response) {
      return lodash__WEBPACK_IMPORTED_MODULE_0___default.a.filter(lodash__WEBPACK_IMPORTED_MODULE_0___default.a.map(response.ZoneSet || [], function (item) {
        return {
          text: item.ZoneName,
          value: item.ZoneId,
          ZoneState: item.ZoneState,
          Zone: item.Zone
        };
      }), function (item) {
        return item.ZoneState === 'AVAILABLE';
      });
    });
  }; // 仅对维度组合是InstanceId和InstanceType的指标，其他指标不支持


  CDBDatasource.prototype.getDefaultInsObj = function (ins) {
    var _a;

    return _a = {}, _a[_query_def__WEBPACK_IMPORTED_MODULE_1__["templateQueryIdMap"].instance] = ins, _a.InstanceType = 1, _a;
  };

  return CDBDatasource;
}(_base_datasource__WEBPACK_IMPORTED_MODULE_3__["BaseDatasource"]);

/* harmony default export */ __webpack_exports__["default"] = (CDBDatasource);

/***/ }),

/***/ "./datasource/tc_monitor/cdb/query.ts":
/*!********************************************!*\
  !*** ./datasource/tc_monitor/cdb/query.ts ***!
  \********************************************/
/*! exports provided: CDBQueryCtrl, cdbQuery */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CDBQueryCtrl", function() { return CDBQueryCtrl; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "cdbQuery", function() { return cdbQuery; });
/* harmony import */ var grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! grafana/app/core/core_module */ "grafana/app/core/core_module");
/* harmony import */ var grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _query_def__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./query_def */ "./datasource/tc_monitor/cdb/query_def.ts");



var CDBQueryCtrl =
/** @class */
function () {
  CDBQueryCtrl.$inject = ["$scope", "$rootScope"];

  /** @ngInject */
  function CDBQueryCtrl($scope, $rootScope) {
    $scope.init = function () {
      $scope.CDBFieldsDescriptor = _query_def__WEBPACK_IMPORTED_MODULE_1__["CDBFieldsDescriptor"];
    };

    $scope.onChecked = function (srcField, dstField) {
      if ($scope.target.queries[srcField] === true) {
        $scope.target.queries[dstField] = false;
      }

      $scope.onChange();
    };

    $scope.getDropdown = function (field) {
      switch (field) {
        case 'ZoneIds':
          return $scope.getZones();

        default:
          return [];
      }
    };

    $scope.getZones = function () {
      if (!$scope.region) {
        return [];
      }

      return $scope.datasource.getZones('cdb', $scope.region);
    };

    $scope.init();
  }

  return CDBQueryCtrl;
}();


var template = "\n<div class=\"tc-sub-params\" ng-if=\"showDetail\">\n  <label class=\"gf-form-label tc-info-label\">\n    Instances are queried by following params.\n    <a target=\"_blank\" style=\"text-decoration:underline;color:#006eff;font-size:medium\" href=\"https://cloud.tencent.com/document/api/236/15872\">Click here to get API doc.</a>\n  </label>\n  <div class=\"gf-form-inline\" ng-repeat=\"field in CDBFieldsDescriptor\">\n    <div class=\"gf-form\">\n      <label class=\"gf-form-label width-14\">\n        {{ field.key }}\n        <info-popover mode=\"right-normal\">\n          {{ field.cnDescriptor }}\n          <a target=\"_blank\" href=\"{{field.link}}\" ng-if=\"field.link\">Click here for more information.</a>\n        </info-popover>\n      </label>\n      <input\n        ng-if=\"field.type === 'inputnumber'\"\n        style=\"margin-right:2px\"\n        type=\"number\"\n        ng-model=\"target.queries[field.key]\"\n        ng-change=\"onChange()\"\n        class=\"gf-form-input width-10\"\n        ng-min=\"field.min\"\n        ng-max=\"field.max\"\n      />\n      <input\n        ng-if=\"field.type === 'input'\"\n        style=\"margin-right:2px\"\n        type=\"text\"\n        ng-model=\"target.queries[field.key]\"\n        ng-change=\"onChange()\"\n        class=\"gf-form-input width-10\"\n      />\n      <multi-condition\n        ng-if=\"field.type === 'inputmulti'\"\n        type=\"'input'\"\n        value=\"target.queries[field.key]\"\n        on-change=\"onChange()\"\n      ></multi-condition>\n      <multi-condition\n        ng-if=\"field.type === 'dropdownmulti'\"\n        type=\"'dropdown'\"\n        value=\"target.queries[field.key]\"\n        on-change=\"onChange()\"\n        get-options=\"getDropdown(field.key)\"\n      ></multi-condition>\n      <custom-select-dropdown\n        ng-if=\"field.type === 'select'\"\n        value=\"target.queries[field.key]\"\n        options=\"field.list\"\n        multiple=\"field.multiple || false\"\n        on-change=\"onChange()\"\n      ></custom-select-dropdown>\n    </div>\n  </div>\n</div>\n";
function cdbQuery() {
  return {
    template: template,
    controller: CDBQueryCtrl,
    restrict: 'E',
    scope: {
      target: '=',
      showDetail: '=',
      region: '=',
      datasource: '=',
      getDropdownOptions: '&',
      onChange: '&'
    }
  };
}
grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0___default.a.directive('cdbQuery', cdbQuery);

/***/ }),

/***/ "./datasource/tc_monitor/cdb/query_def.ts":
/*!************************************************!*\
  !*** ./datasource/tc_monitor/cdb/query_def.ts ***!
  \************************************************/
/*! exports provided: default, CDBFieldsDescriptor, CDBInstanceAliasList, templateQueryIdMap, CDBInvalidDemensions, isValidMetric, modifyDimensons, CDBGetInstanceQueryParams */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CDBFieldsDescriptor", function() { return CDBFieldsDescriptor; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CDBInstanceAliasList", function() { return CDBInstanceAliasList; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "templateQueryIdMap", function() { return templateQueryIdMap; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CDBInvalidDemensions", function() { return CDBInvalidDemensions; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isValidMetric", function() { return isValidMetric; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "modifyDimensons", function() { return modifyDimensons; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CDBGetInstanceQueryParams", function() { return GetInstanceQueryParams; });
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lodash */ "lodash");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__);
var __assign = undefined && undefined.__assign || function () {
  __assign = Object.assign || function (t) {
    for (var s, i = 1, n = arguments.length; i < n; i++) {
      s = arguments[i];

      for (var p in s) {
        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
      }
    }

    return t;
  };

  return __assign.apply(this, arguments);
};


var InstanceTypes = [{
  text: '主实例',
  value: 1
}, {
  text: '备灾实例',
  value: 2
}, {
  text: '只读实例',
  value: 3
}];
var Status = [{
  text: '创建中',
  value: 0
}, {
  text: '运行中',
  value: 1
}, {
  text: '隔离中',
  value: 4
}, {
  text: '已隔离',
  value: 5
}];
var PayTypes = [{
  text: '包年包月',
  value: 0
}, {
  text: '小时计费',
  value: 1
}];
var TaskStatus = [{
  text: '没有任务',
  value: 0
}, {
  text: '升级中',
  value: 1
}, {
  text: '数据导入中',
  value: 2
}, {
  text: '开放Slave中',
  value: 3
}, {
  text: '外网访问开通中',
  value: 4
}, {
  text: '批量操作执行中',
  value: 5
}, {
  text: '回档中',
  value: 6
}, {
  text: '外网访问关闭中',
  value: 7
}, {
  text: '密码修改中',
  value: 8
}, {
  text: '实例名修改中',
  value: 9
}, {
  text: '重启中',
  value: 10
}, {
  text: '自建迁移中',
  value: 12
}, {
  text: '删除库表中',
  value: 13
}, {
  text: '灾备实例创建同步中',
  value: 14
}, {
  text: '升级待切换',
  value: 15
}, {
  text: '升级切换中',
  value: 16
}, {
  text: '升级切换完成',
  value: 17
}];
var EngineVersions = [{
  text: '5.1',
  value: '5.1'
}, {
  text: '5.5',
  value: '5.5'
}, {
  text: '5.6',
  value: '5.6'
}, {
  text: '5.7',
  value: '5.7'
}];
var OrderBy = [{
  text: 'InstanceId',
  value: 'InstanceId'
}, {
  text: 'InstanceName',
  value: 'InstanceName'
}, {
  text: 'CreateTime',
  value: 'CreateTime'
}, {
  text: 'DeadlineTime',
  value: 'DeadlineTime'
}];
var OrderDirection = [{
  text: 'ASC',
  value: 'ASC'
}, {
  text: 'DESC',
  value: 'DESC'
}];
var InitFlag = [{
  text: '未初始化',
  value: 0
}, {
  text: '初始化',
  value: 1
}];
var CdbErrors = [{
  text: '未锁定',
  value: 0
}, {
  text: '锁定',
  value: 1
}];
var CDBFields = {
  ProjectId: '',
  InstanceTypes: {},
  Vips: [],
  Status: {},
  Offset: 0,
  Limit: 20,
  SecurityGroupId: '',
  PayTypes: {},
  InstanceNames: [],
  TaskStatus: {},
  EngineVersions: {},
  VpcIds: [],
  ZoneIds: [],
  SubnetIds: [],
  CdbErrors: {},
  OrderBy: {},
  OrderDirection: {},
  InstanceIds: [],
  InitFlag: {}
};
var CDBFieldsDescriptor = [{
  key: 'Offset',
  enDescriptor: 'Offset',
  cnDescriptor: '偏移量, 例如Offset=20&Limit=20 返回第 20 到 40 项',
  link: '',
  type: 'inputnumber',
  min: 0
}, {
  key: 'Limit',
  enDescriptor: 'Limit',
  cnDescriptor: '单次请求返回的数量，默认为20，最小值为1，最大值为100',
  link: '',
  type: 'inputnumber',
  min: 1,
  max: 100
}, {
  key: 'InstanceNames',
  enDescriptor: 'Instance Name',
  cnDescriptor: '实例名称',
  link: '',
  type: 'inputmulti'
}, {
  key: 'InstanceIds',
  enDescriptor: 'Instance ID',
  cnDescriptor: '实例ID',
  link: '',
  type: 'inputmulti'
}, {
  key: 'ZoneIds',
  enDescriptor: 'Zone ID',
  cnDescriptor: '可用区的ID',
  link: '',
  type: 'dropdownmulti'
}, {
  key: 'InstanceTypes',
  enDescriptor: 'Instance Type',
  cnDescriptor: '实例类型',
  link: '',
  multiple: true,
  type: 'select',
  list: InstanceTypes
}, {
  key: 'EngineVersions',
  enDescriptor: 'Engine Version',
  cnDescriptor: '实例数据库引擎版本',
  link: '',
  multiple: true,
  type: 'select',
  list: EngineVersions
}, {
  key: 'TaskStatus',
  enDescriptor: 'Task Status',
  cnDescriptor: '实例任务',
  link: '',
  multiple: true,
  type: 'select',
  list: TaskStatus
}, {
  key: 'InitFlag',
  enDescriptor: 'Init Flag',
  cnDescriptor: '实例初始化状态',
  link: '',
  multiple: true,
  type: 'select',
  list: InitFlag
}, {
  key: 'PayTypes',
  enDescriptor: 'Pay Type',
  cnDescriptor: '付费类型',
  link: '',
  multiple: true,
  type: 'select',
  list: PayTypes
}, {
  key: 'CdbErrors',
  enDescriptor: 'CDB Errors',
  cnDescriptor: '实例锁定标记',
  link: '',
  multiple: true,
  type: 'select',
  list: CdbErrors
}, {
  key: 'Status',
  enDescriptor: 'Status',
  cnDescriptor: '实例状态',
  link: '',
  multiple: true,
  type: 'select',
  list: Status
}, {
  key: 'OrderBy',
  enDescriptor: 'OrderBy',
  cnDescriptor: '排序字段',
  link: '',
  type: 'select',
  list: OrderBy
}, {
  key: 'OrderDirection',
  enDescriptor: 'Order Direction',
  cnDescriptor: '排序方式',
  link: '',
  type: 'select',
  list: OrderDirection
}, {
  key: 'Vips',
  enDescriptor: 'Vip',
  cnDescriptor: '实例内网IP地址',
  link: '',
  type: 'inputmulti'
}, {
  key: 'VpcIds',
  enDescriptor: 'Vpc ID',
  cnDescriptor: '私有网络ID',
  link: 'https://cloud.tencent.com/document/api/215/15778',
  type: 'inputmulti'
}, {
  key: 'SubnetIds',
  enDescriptor: 'Subnet ID',
  cnDescriptor: '子网ID',
  link: 'https://cloud.tencent.com/document/api/215/15784',
  type: 'inputmulti'
}, {
  key: 'ProjectId',
  enDescriptor: 'Project ID',
  cnDescriptor: '项目ID',
  link: 'https://cloud.tencent.com/document/product/378/4400',
  type: 'input'
}, {
  key: 'SecurityGroupId',
  enDescriptor: 'Security Group ID',
  cnDescriptor: '安全组ID',
  link: 'https://cloud.tencent.com/document/api/236/15854',
  type: 'input'
}];
var CDB_STATE = {
  region: '',
  metricName: '',
  metricUnit: '',
  period: undefined,
  dimensionObject: null,
  instance: '',
  instanceAlias: 'InstanceId',
  queries: __assign({}, CDBFields)
};
var CDBInstanceAliasList = ['InstanceId', 'InstanceName', 'Vip'];

function GetInstanceQueryParams(queries) {
  if (queries === void 0) {
    queries = {};
  }

  var params = {};

  if (!lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isEmpty(queries)) {
    params.Limit = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(queries, 'Limit', 20) || 20;
    params.Offset = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(queries, 'Offset', 0) || 0;
    queries = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.omit(queries, ['Offset', 'Limit']);

    lodash__WEBPACK_IMPORTED_MODULE_0___default.a.forEach(queries, function (item, key) {
      if (lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isArray(item)) {
        item = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.compact(item);

        if (item.length > 0) {
          params[key] = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.uniq(item);
        }
      } else if (lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isObject(item)) {
        if (lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isNumber(lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(item, 'value', undefined)) || !lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isEmpty(lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(item, 'value', undefined))) {
          params[key] = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(item, 'value');
        }
      } else if (lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isNumber(item) || !lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isEmpty(item)) {
        params[key] = item;
      }
    });
  }

  return params;
}

function isValidMetric(metricObj) {
  if (metricObj === void 0) {
    metricObj = {};
  }

  var dimension = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(metricObj, 'Dimensions[0].Dimensions');

  return dimension.length === 2 && (lodash__WEBPACK_IMPORTED_MODULE_0___default.a.indexOf(dimension, 'instanceid') !== -1 && lodash__WEBPACK_IMPORTED_MODULE_0___default.a.indexOf(dimension, 'insttype') !== -1 || lodash__WEBPACK_IMPORTED_MODULE_0___default.a.indexOf(dimension, 'InstanceId') !== -1 && lodash__WEBPACK_IMPORTED_MODULE_0___default.a.indexOf(dimension, 'InstanceType') !== -1);
}

function modifyDimensons(metricItem) {
  var metricTmp = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.cloneDeep(metricItem);

  metricTmp.Dimensions.forEach(function (item) {
    item.Dimensions = item.Dimensions.map(function (i) {
      return CDBInvalidDemensions[i] || i;
    });
  });
  return metricTmp;
}

var CDBInvalidDemensions = {
  instanceid: 'InstanceId',
  insttype: 'InstanceType',
  region: 'Region'
};
var templateQueryIdMap = {
  instance: 'InstanceId'
};
/* harmony default export */ __webpack_exports__["default"] = (CDB_STATE);


/***/ }),

/***/ "./datasource/tc_monitor/cdn/datasource.ts":
/*!*************************************************!*\
  !*** ./datasource/tc_monitor/cdn/datasource.ts ***!
  \*************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _query_def__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./query_def */ "./datasource/tc_monitor/cdn/query_def.ts");
/* harmony import */ var _base_datasource__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../_base/datasource */ "./datasource/tc_monitor/_base/datasource.ts");
var __extends = undefined && undefined.__extends || function () {
  var _extendStatics = function extendStatics(d, b) {
    _extendStatics = Object.setPrototypeOf || {
      __proto__: []
    } instanceof Array && function (d, b) {
      d.__proto__ = b;
    } || function (d, b) {
      for (var p in b) {
        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];
      }
    };

    return _extendStatics(d, b);
  };

  return function (d, b) {
    if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");

    _extendStatics(d, b);

    function __() {
      this.constructor = d;
    }

    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();

var __assign = undefined && undefined.__assign || function () {
  __assign = Object.assign || function (t) {
    for (var s, i = 1, n = arguments.length; i < n; i++) {
      s = arguments[i];

      for (var p in s) {
        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
      }
    }

    return t;
  };

  return __assign.apply(this, arguments);
};

var __awaiter = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {
  function adopt(value) {
    return value instanceof P ? value : new P(function (resolve) {
      resolve(value);
    });
  }

  return new (P || (P = Promise))(function (resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }

    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }

    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }

    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};

var __generator = undefined && undefined.__generator || function (thisArg, body) {
  var _ = {
    label: 0,
    sent: function sent() {
      if (t[0] & 1) throw t[1];
      return t[1];
    },
    trys: [],
    ops: []
  },
      f,
      y,
      t,
      g;
  return g = {
    next: verb(0),
    "throw": verb(1),
    "return": verb(2)
  }, typeof Symbol === "function" && (g[Symbol.iterator] = function () {
    return this;
  }), g;

  function verb(n) {
    return function (v) {
      return step([n, v]);
    };
  }

  function step(op) {
    if (f) throw new TypeError("Generator is already executing.");

    while (_) {
      try {
        if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
        if (y = 0, t) op = [op[0] & 2, t.value];

        switch (op[0]) {
          case 0:
          case 1:
            t = op;
            break;

          case 4:
            _.label++;
            return {
              value: op[1],
              done: false
            };

          case 5:
            _.label++;
            y = op[1];
            op = [0];
            continue;

          case 7:
            op = _.ops.pop();

            _.trys.pop();

            continue;

          default:
            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
              _ = 0;
              continue;
            }

            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
              _.label = op[1];
              break;
            }

            if (op[0] === 6 && _.label < t[1]) {
              _.label = t[1];
              t = op;
              break;
            }

            if (t && _.label < t[2]) {
              _.label = t[2];

              _.ops.push(op);

              break;
            }

            if (t[2]) _.ops.pop();

            _.trys.pop();

            continue;
        }

        op = body.call(thisArg, _);
      } catch (e) {
        op = [6, e];
        y = 0;
      } finally {
        f = t = 0;
      }
    }

    if (op[0] & 5) throw op[1];
    return {
      value: op[0] ? op[1] : void 0,
      done: true
    };
  }
};




var CDNDatasource =
/** @class */
function (_super) {
  __extends(CDNDatasource, _super);

  function CDNDatasource(instanceSettings, backendSrv, templateSrv) {
    var _this = _super.call(this, instanceSettings, backendSrv, templateSrv) || this;

    _this.Namespace = 'QCE/CDN';
    _this.InstanceAliasList = _query_def__WEBPACK_IMPORTED_MODULE_0__["CDNInstanceAliasList"];
    _this.InvalidDimensions = _query_def__WEBPACK_IMPORTED_MODULE_0__["CDNInvalidDemensions"];
    _this.templateQueryIdMap = {
      instance: 'Domain'
    };
    _this.InstanceReqConfig = {
      service: 'cdn',
      action: 'DescribeDomains',
      responseField: 'Domains'
    };
    return _this;
  }

  CDNDatasource.prototype.metricFindQuery = function (query, regex) {
    return __awaiter(this, void 0, void 0, function () {
      return __generator(this, function (_a) {
        return [2
        /*return*/
        , _super.prototype.metricFindQuery.call(this, __assign(__assign({}, query), {
          region: 'ap-guangzhou'
        }), regex)];
      });
    });
  };

  return CDNDatasource;
}(_base_datasource__WEBPACK_IMPORTED_MODULE_1__["BaseDatasource"]);

/* harmony default export */ __webpack_exports__["default"] = (CDNDatasource);

/***/ }),

/***/ "./datasource/tc_monitor/cdn/query.ts":
/*!********************************************!*\
  !*** ./datasource/tc_monitor/cdn/query.ts ***!
  \********************************************/
/*! exports provided: CDNQueryCtrl, cdnQuery */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CDNQueryCtrl", function() { return CDNQueryCtrl; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "cdnQuery", function() { return cdnQuery; });
/* harmony import */ var grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! grafana/app/core/core_module */ "grafana/app/core/core_module");
/* harmony import */ var grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _query_def__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./query_def */ "./datasource/tc_monitor/cdn/query_def.ts");



var CDNQueryCtrl =
/** @class */
function () {
  CDNQueryCtrl.$inject = ["$scope", "$rootScope"];

  /** @ngInject */
  function CDNQueryCtrl($scope, $rootScope) {
    $scope.init = function () {
      $scope.CDNFilterFieldsDescriptor = _query_def__WEBPACK_IMPORTED_MODULE_1__["CDNFilterFieldsDescriptor"];
    }; // $scope.onChecked = (srcField, dstField) => {
    //   if ($scope.target.queries[srcField] === true) {
    //     $scope.target.queries[dstField] = false;
    //   }
    //   $scope.onChange();
    // };
    // $scope.getDropdown = (field) => {
    //   switch (field) {
    //     case 'zone':
    //       return $scope.getZones();
    //     default:
    //       return [];
    //   }
    // };
    // $scope.getZones = () => {
    //   if (!$scope.region) {
    //     return [];
    //   }
    //   return $scope.datasource.getZones('cvm', $scope.region);
    // };


    $scope.init();
  }

  return CDNQueryCtrl;
}();


var template = "\n<div class=\"tc-sub-params\" ng-if=\"showDetail\">\n<label class=\"gf-form-label tc-info-label\">\n  Instances are queried by following params.\n  <a target=\"_blank\" style=\"text-decoration:underline;color:#006eff;font-size:medium\" href=\"https://cloud.tencent.com/document/api/228/41118\">Click here to get API doc.</a>\n</label>\n<div class=\"gf-form-inline\">\n  <div class=\"gf-form\">\n    <label class=\"gf-form-label width-14\">\n      Offset\n      <info-popover mode=\"right-normal\">\n        \u504F\u79FB\u91CF, \u4F8B\u5982Offset=20&Limit=20 \u8FD4\u56DE\u7B2C 20 \u5230 40 \u9879\n      </info-popover>\n    </label>\n    <input type=\"number\" ng-model=\"target.queries.Offset\" class=\"gf-form-input width-10\" ng-min=\"0\" ng-change=\"onChange()\">\n  </div>\n</div>\n<div class=\"gf-form-inline\">\n  <div class=\"gf-form\">\n    <label class=\"gf-form-label width-14\">\n      Limit\n      <info-popover mode=\"right-normal\">\n        \u5355\u6B21\u8BF7\u6C42\u8FD4\u56DE\u7684\u6570\u91CF\uFF0C\u9ED8\u8BA4\u4E3A20\uFF0C\u6700\u5C0F\u503C\u4E3A1\uFF0C\u6700\u5927\u503C\u4E3A100\n      </info-popover>\n    </label>\n    <input type=\"number\" ng-model=\"target.queries.Limit\" class=\"gf-form-input width-10\" ng-min=\"1\" ng-max=\"100\" ng-change=\"onChange()\">\n  </div>\n</div>\n<div class=\"gf-form-inline\" ng-repeat=\"field in CDNFilterFieldsDescriptor\">\n<label class=\"gf-form-label width-14\">\n  {{ field.key }}\n  <info-popover mode=\"right-normal\">\n    {{ field.cnDescriptor }}\n    <a target=\"_blank\" href=\"{{field.link}}\" ng-if=\"field.link\">Click here for more information.</a>\n  </info-popover>\n</label>\n<multi-condition\n  ng-if=\"field.type === 'inputNumbermulti'\"\n  type=\"'inputNumber'\"\n  max-cond=\"5\"\n  value=\"target.queries.Filters[field.key]\"\n  maxNum=\"field.max\"\n  minNum=\"field.min\"\n  on-change=\"onChange()\"\n></multi-condition>\n<multi-condition\n  ng-if=\"field.type === 'inputmulti'\"\n  type=\"'input'\"\n  max-cond=\"5\"\n  value=\"target.queries.Filters[field.key]\"\n  on-change=\"onChange()\"\n></multi-condition>\n<custom-select-dropdown\n  ng-if=\"field.type === 'select'\"\n  value=\"target.queries.Filters[field.key]\"\n  options=\"field.list\"\n  multiple=\"true\"\n  on-change=\"onChange()\"\n></custom-select-dropdown>\n</div>\n\n</div>\n";
function cdnQuery() {
  return {
    template: template,
    controller: CDNQueryCtrl,
    restrict: 'E',
    scope: {
      target: '=',
      showDetail: '=',
      region: '=',
      datasource: '=',
      getDropdownOptions: '&',
      onChange: '&'
    }
  };
}
grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0___default.a.directive('cdnQuery', cdnQuery);

/***/ }),

/***/ "./datasource/tc_monitor/cdn/query_def.ts":
/*!************************************************!*\
  !*** ./datasource/tc_monitor/cdn/query_def.ts ***!
  \************************************************/
/*! exports provided: default, CDNFilterFieldsDescriptor, templateQueryIdMap, CDNInstanceAliasList, CDNInvalidDemensions, CDNGetInstanceQueryParams */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CDNFilterFieldsDescriptor", function() { return CDNFilterFieldsDescriptor; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "templateQueryIdMap", function() { return templateQueryIdMap; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CDNInstanceAliasList", function() { return CDNInstanceAliasList; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CDNInvalidDemensions", function() { return CDNInvalidDemensions; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CDNGetInstanceQueryParams", function() { return GetInstanceQueryParams; });
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lodash */ "lodash");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__);
var __assign = undefined && undefined.__assign || function () {
  __assign = Object.assign || function (t) {
    for (var s, i = 1, n = arguments.length; i < n; i++) {
      s = arguments[i];

      for (var p in s) {
        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
      }
    }

    return t;
  };

  return __assign.apply(this, arguments);
};


var CDNFilterFields = {
  origin: [],
  domain: [],
  resourceId: [],
  status: {},
  serviceType: {},
  projectId: [],
  domainType: {},
  fullUrlCache: {},
  https: {},
  originPullProtocol: {},
  tagKey: []
};
var CDNFilterFieldsDescriptor = [{
  key: 'origin',
  enDescriptor: 'origin',
  cnDescriptor: '主源站',
  link: '',
  type: 'inputmulti'
}, {
  key: 'domain',
  enDescriptor: 'domain',
  cnDescriptor: '域名',
  link: '',
  type: 'inputmulti'
}, {
  key: 'resourceId',
  enDescriptor: 'resourceId',
  cnDescriptor: '域名id',
  link: '',
  type: 'inputmulti'
}, {
  key: 'status',
  enDescriptor: 'status',
  cnDescriptor: '域名状态',
  link: '',
  type: 'select',
  list: [{
    text: 'online',
    value: 'online'
  }, {
    text: 'offline',
    value: 'offline'
  }, {
    text: 'processing',
    value: 'processing'
  }]
}, {
  key: 'serviceType',
  enDescriptor: 'serviceType',
  cnDescriptor: '业务类型',
  link: '',
  type: 'select',
  list: [{
    text: 'web',
    value: 'web'
  }, {
    text: 'download',
    value: 'download'
  }, {
    text: 'media',
    value: 'media'
  }]
}, {
  key: 'projectId',
  enDescriptor: 'projectId',
  cnDescriptor: '项目ID',
  link: '',
  type: 'inputNumbermulti'
}, {
  key: 'domainType',
  enDescriptor: 'domainType',
  cnDescriptor: '主源站类型',
  link: '',
  type: 'select',
  list: [{
    text: '自有源',
    value: 'cname'
  }, {
    text: 'cos接入',
    value: 'cos'
  }]
}, {
  key: 'fullUrlCache',
  enDescriptor: 'fullUrlCache',
  cnDescriptor: '全路径缓存',
  link: '',
  type: 'select',
  list: [{
    text: '打开',
    value: 'on'
  }, {
    text: '关闭',
    value: 'off'
  }]
}, {
  key: 'https',
  enDescriptor: 'https',
  cnDescriptor: '是否配置https',
  link: '',
  type: 'select',
  list: [{
    text: 'on',
    value: 'on'
  }, {
    text: 'off',
    value: 'off'
  }, {
    text: 'processing',
    value: 'processing'
  }]
}, {
  key: 'originPullProtocol',
  enDescriptor: 'originPullProtocol',
  cnDescriptor: '回源协议类型',
  link: '',
  type: 'select',
  list: [{
    text: 'http',
    value: 'http'
  }, {
    text: 'follow',
    value: 'follow'
  }, {
    text: 'https',
    value: 'https'
  }]
}, {
  key: 'tagKey',
  enDescriptor: 'tagKey',
  cnDescriptor: '标签键',
  link: '',
  type: 'inputmulti'
}];
var CDN_STATE = {
  region: 'ap-guangzhou',
  metricName: '',
  metricUnit: '',
  period: undefined,
  dimensionObject: null,
  instance: '',
  instanceAlias: 'Domain',
  queries: {
    Limit: 20,
    Offset: 0,
    Filters: __assign({}, CDNFilterFields)
  }
};

function GetInstanceQueryParams(queries) {
  if (queries === void 0) {
    queries = {};
  }

  var params = {};

  if (!lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isEmpty(queries)) {
    params.Limit = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(queries, 'Limit', 20) || 20;
    params.Offset = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(queries, 'Offset', 0) || 0;
    var Filters_1 = [];

    lodash__WEBPACK_IMPORTED_MODULE_0___default.a.forEach(queries.Filters, function (item, key) {
      // console.log('item', item, queries);
      if (lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isArray(item)) {
        item = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.compact(item);

        if (item.length > 0) {
          Filters_1.push({
            Name: key,
            Value: lodash__WEBPACK_IMPORTED_MODULE_0___default.a.uniq(item).slice(0, 5)
          });
        }
      } else if (lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isObject(item)) {
        if (!lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isEmpty(lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(item, 'value', []))) {
          Filters_1.push({
            Name: key,
            Value: lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(item, 'value', []).slice(0, 5)
          });
        }
      }
    });

    if (Filters_1.length > 0) {
      params.Filters = Filters_1;
    }
  }

  return params;
}

var CDNInstanceAliasList = ['Domain', 'ProjectId'];
var CDNInvalidDemensions = {
  projectId: 'ProjectId',
  domain: 'Domain'
};
var templateQueryIdMap = {
  instance: 'Domain'
};
/* harmony default export */ __webpack_exports__["default"] = (CDN_STATE);


/***/ }),

/***/ "./datasource/tc_monitor/cdn_province/datasource.ts":
/*!**********************************************************!*\
  !*** ./datasource/tc_monitor/cdn_province/datasource.ts ***!
  \**********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _query_def__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./query_def */ "./datasource/tc_monitor/cdn_province/query_def.ts");
/* harmony import */ var _base_datasource__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../_base/datasource */ "./datasource/tc_monitor/_base/datasource.ts");
/* harmony import */ var _common_constants__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../common/constants */ "./datasource/common/constants.ts");
var __extends = undefined && undefined.__extends || function () {
  var _extendStatics = function extendStatics(d, b) {
    _extendStatics = Object.setPrototypeOf || {
      __proto__: []
    } instanceof Array && function (d, b) {
      d.__proto__ = b;
    } || function (d, b) {
      for (var p in b) {
        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];
      }
    };

    return _extendStatics(d, b);
  };

  return function (d, b) {
    if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");

    _extendStatics(d, b);

    function __() {
      this.constructor = d;
    }

    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();

var __assign = undefined && undefined.__assign || function () {
  __assign = Object.assign || function (t) {
    for (var s, i = 1, n = arguments.length; i < n; i++) {
      s = arguments[i];

      for (var p in s) {
        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
      }
    }

    return t;
  };

  return __assign.apply(this, arguments);
};

var __awaiter = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {
  function adopt(value) {
    return value instanceof P ? value : new P(function (resolve) {
      resolve(value);
    });
  }

  return new (P || (P = Promise))(function (resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }

    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }

    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }

    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};

var __generator = undefined && undefined.__generator || function (thisArg, body) {
  var _ = {
    label: 0,
    sent: function sent() {
      if (t[0] & 1) throw t[1];
      return t[1];
    },
    trys: [],
    ops: []
  },
      f,
      y,
      t,
      g;
  return g = {
    next: verb(0),
    "throw": verb(1),
    "return": verb(2)
  }, typeof Symbol === "function" && (g[Symbol.iterator] = function () {
    return this;
  }), g;

  function verb(n) {
    return function (v) {
      return step([n, v]);
    };
  }

  function step(op) {
    if (f) throw new TypeError("Generator is already executing.");

    while (_) {
      try {
        if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
        if (y = 0, t) op = [op[0] & 2, t.value];

        switch (op[0]) {
          case 0:
          case 1:
            t = op;
            break;

          case 4:
            _.label++;
            return {
              value: op[1],
              done: false
            };

          case 5:
            _.label++;
            y = op[1];
            op = [0];
            continue;

          case 7:
            op = _.ops.pop();

            _.trys.pop();

            continue;

          default:
            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
              _ = 0;
              continue;
            }

            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
              _.label = op[1];
              break;
            }

            if (op[0] === 6 && _.label < t[1]) {
              _.label = t[1];
              t = op;
              break;
            }

            if (t && _.label < t[2]) {
              _.label = t[2];

              _.ops.push(op);

              break;
            }

            if (t[2]) _.ops.pop();

            _.trys.pop();

            continue;
        }

        op = body.call(thisArg, _);
      } catch (e) {
        op = [6, e];
        y = 0;
      } finally {
        f = t = 0;
      }
    }

    if (op[0] & 5) throw op[1];
    return {
      value: op[0] ? op[1] : void 0,
      done: true
    };
  }
};





var DCDatasource =
/** @class */
function (_super) {
  __extends(DCDatasource, _super);

  function DCDatasource(instanceSettings, backendSrv, templateSrv) {
    var _this = _super.call(this, instanceSettings, backendSrv, templateSrv) || this;

    _this.Namespace = _query_def__WEBPACK_IMPORTED_MODULE_0__["namespace"];
    _this.InstanceAliasList = _query_def__WEBPACK_IMPORTED_MODULE_0__["CDNPROVINCEInstanceAliasList"];
    _this.InvalidDimensions = _query_def__WEBPACK_IMPORTED_MODULE_0__["CDNPROVINCEInvalidDemensions"];
    _this.templateQueryIdMap = _query_def__WEBPACK_IMPORTED_MODULE_0__["templateQueryIdMap"]; // 此处service是接口的配置参数，需和plugin.json里一致，和constant.ts中SERVICES_API_INFO保持一致

    _this.InstanceReqConfig = {
      service: 'cdn',
      action: 'DescribeDomains',
      responseField: 'Domains'
    };
    _this.extrasAlias = ['isp', 'district'];
    return _this;
  } // getFilterDropdown({ field }) {
  //   return super.getRegions();
  // }


  DCDatasource.prototype.metricFindQuery = function (query, regex) {
    return __awaiter(this, void 0, void 0, function () {
      return __generator(this, function (_a) {
        return [2
        /*return*/
        , _super.prototype.metricFindQuery.call(this, __assign(__assign({}, query), {
          region: 'ap-guangzhou'
        }), regex)];
      });
    });
  };

  DCDatasource.prototype.getConsumerList = function (params) {
    return __awaiter(this, void 0, void 0, function () {
      var region, field, serviceInfo, rs;
      return __generator(this, function (_a) {
        switch (_a.label) {
          case 0:
            region = params.region, field = params.field;
            serviceInfo = Object(_common_constants__WEBPACK_IMPORTED_MODULE_2__["GetServiceAPIInfo"])(region, 'cdn');
            return [4
            /*yield*/
            , this.doRequest({
              url: this.url + serviceInfo.path,
              data: {
                Name: field
              }
            }, serviceInfo.service, {
              action: 'DescribeMapInfo'
            })];

          case 1:
            rs = _a.sent();
            return [2
            /*return*/
            , (rs.MapInfoList || []).map(function (o) {
              return {
                text: o.Name,
                value: o.Name
              };
            })];
        }
      });
    });
  };

  DCDatasource.prototype.fetchMetricData = function (action, region, instance, query) {
    return __awaiter(this, void 0, void 0, function () {
      var field, rs;
      return __generator(this, function (_a) {
        switch (_a.label) {
          case 0:
            if (!(action === 'DescribeMapInfo')) return [3
            /*break*/
            , 2];
            field = query.name;
            return [4
            /*yield*/
            , this.getConsumerList({
              region: region,
              field: field
            })];

          case 1:
            rs = _a.sent();
            return [2
            /*return*/
            , rs];

          case 2:
            return [2
            /*return*/
            , []];
        }
      });
    });
  };

  return DCDatasource;
}(_base_datasource__WEBPACK_IMPORTED_MODULE_1__["BaseDatasource"]);

/* harmony default export */ __webpack_exports__["default"] = (DCDatasource);

/***/ }),

/***/ "./datasource/tc_monitor/cdn_province/query.ts":
/*!*****************************************************!*\
  !*** ./datasource/tc_monitor/cdn_province/query.ts ***!
  \*****************************************************/
/*! exports provided: QueryCtrl, sQuery */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "QueryCtrl", function() { return QueryCtrl; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "sQuery", function() { return sQuery; });
/* harmony import */ var grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! grafana/app/core/core_module */ "grafana/app/core/core_module");
/* harmony import */ var grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _query_def__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./query_def */ "./datasource/tc_monitor/cdn_province/query_def.ts");
/* harmony import */ var _common_constants__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../common/constants */ "./datasource/common/constants.ts");
var __awaiter = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {
  function adopt(value) {
    return value instanceof P ? value : new P(function (resolve) {
      resolve(value);
    });
  }

  return new (P || (P = Promise))(function (resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }

    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }

    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }

    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};

var __generator = undefined && undefined.__generator || function (thisArg, body) {
  var _ = {
    label: 0,
    sent: function sent() {
      if (t[0] & 1) throw t[1];
      return t[1];
    },
    trys: [],
    ops: []
  },
      f,
      y,
      t,
      g;
  return g = {
    next: verb(0),
    "throw": verb(1),
    "return": verb(2)
  }, typeof Symbol === "function" && (g[Symbol.iterator] = function () {
    return this;
  }), g;

  function verb(n) {
    return function (v) {
      return step([n, v]);
    };
  }

  function step(op) {
    if (f) throw new TypeError("Generator is already executing.");

    while (_) {
      try {
        if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
        if (y = 0, t) op = [op[0] & 2, t.value];

        switch (op[0]) {
          case 0:
          case 1:
            t = op;
            break;

          case 4:
            _.label++;
            return {
              value: op[1],
              done: false
            };

          case 5:
            _.label++;
            y = op[1];
            op = [0];
            continue;

          case 7:
            op = _.ops.pop();

            _.trys.pop();

            continue;

          default:
            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
              _ = 0;
              continue;
            }

            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
              _.label = op[1];
              break;
            }

            if (op[0] === 6 && _.label < t[1]) {
              _.label = t[1];
              t = op;
              break;
            }

            if (t && _.label < t[2]) {
              _.label = t[2];

              _.ops.push(op);

              break;
            }

            if (t[2]) _.ops.pop();

            _.trys.pop();

            continue;
        }

        op = body.call(thisArg, _);
      } catch (e) {
        op = [6, e];
        y = 0;
      } finally {
        f = t = 0;
      }
    }

    if (op[0] & 5) throw op[1];
    return {
      value: op[0] ? op[1] : void 0,
      done: true
    };
  }
};




var ExtraFields = [{
  label: 'Isp',
  field: 'isp'
}, {
  label: 'Province',
  field: 'district'
}];

var QueryCtrl =
/** @class */
function () {
  QueryCtrl.$inject = ["$scope", "$rootScope"];

  /** @ngInject */
  function QueryCtrl($scope, $rootScope) {
    var _this = this;

    $scope.init = function () {
      $scope.CDNPROVINCEFilterFieldsDescriptor = _query_def__WEBPACK_IMPORTED_MODULE_1__["CDNPROVINCEFilterFieldsDescriptor"];
      $scope.ExtraFields = ExtraFields;
      $scope.namespace = _query_def__WEBPACK_IMPORTED_MODULE_1__["namespace"];
    };

    $scope.getExtraDropdown = function (target, field) {
      return __awaiter(_this, void 0, void 0, function () {
        var service, region, rs;
        return __generator(this, function (_a) {
          switch (_a.label) {
            case 0:
              service = Object(_common_constants__WEBPACK_IMPORTED_MODULE_2__["GetServiceFromNamespace"])($scope.namespace);
              region = $scope.datasource.getServiceFn(service, 'getVariable')(target.region);
              return [4
              /*yield*/
              , $scope.datasource.getServiceFn(service, 'getConsumerList')({
                region: region,
                field: field
              })];

            case 1:
              rs = _a.sent();
              return [2
              /*return*/
              , rs];
          }
        });
      });
    };

    $scope.init();
  }

  return QueryCtrl;
}();


var template = "\n<div>\n  <div class=\"tc-sub-params\" ng-if=\"showDetail\">\n    <label class=\"gf-form-label tc-info-label\">\n      Domains are queried by following params.\n      <a target=\"_blank\" style=\"text-decoration:underline;color:#006eff;font-size:medium\" href=\"https://cloud.tencent.com/document/api/228/41118\">Click here to get API doc.</a>\n    </label>\n    <div class=\"gf-form-inline\" ng-repeat=\"field in CDNPROVINCEFilterFieldsDescriptor\">\n      <div class=\"gf-form\">\n        <label class=\"gf-form-label width-14\">\n          {{ field.key }}\n          <info-popover mode=\"right-normal\">\n            {{ field.cnDescriptor }}\n            <a target=\"_blank\" href=\"{{field.link}}\" ng-if=\"field.link\">Click here for more information.</a>\n          </info-popover>\n        </label>\n        <input\n          ng-if=\"field.type === 'inputNumber'\"\n          style=\"margin-right:2px\"\n          type=\"number\"\n          ng-model=\"target.queries[field.key]\"\n          ng-change=\"onChange()\"\n          class=\"gf-form-input width-10\"\n          ng-min=\"field.min\"\n          ng-max=\"field.max\"\n        />\n        <input\n          ng-if=\"field.type === 'input'\"\n          style=\"margin-right:2px\"\n          type=\"text\"\n          ng-model=\"target.queries[field.key]\"\n          ng-change=\"onChange()\"\n          class=\"gf-form-input width-10\"\n        />    \n        <multi-condition\n          ng-if=\"field.type === 'inputNumberMulti'\"\n          type=\"'inputNumber'\"\n          max-cond=\"5\"\n          value=\"target.queries.Filters[field.key]\"\n          maxNum=\"field.max\"\n          minNum=\"field.min\"\n          on-change=\"onChange()\"\n        ></multi-condition>\n        <multi-condition\n          ng-if=\"field.type === 'inputMulti'\"\n          type=\"'input'\"\n          value=\"target.queries[field.key]\"\n          on-change=\"onChange()\"\n        ></multi-condition>\n        <custom-select-dropdown\n          ng-if=\"field.type === 'select'\"\n          value=\"target.queries[field.key]\"\n          options=\"field.list\"\n          multiple=\"field.multiple || false\"\n          on-change=\"onChange()\"\n        ></custom-select-dropdown>\n      </div>\n    </div>\n  </div>\n\n<!-- \u8D77\u59CB\u533A\u57DF \u76EE\u7684\u533A\u57DF\u7B49 -->\n  <div>\n    <div class=\"gf-form-inline\" ng-repeat=\"extra in ExtraFields\">\n      <div class=\"gf-form\">\n        <label class=\"gf-form-label query-keyword width-9\">{{extra.label}}</label>\n        <div class=\"gf-form-select-wrapper gf-form-select-wrapper--caret-indent\">\n          <gf-form-dropdown model=\"target[extra.field]\" allow-custom=\"false\" get-options=\"getExtraDropdown(target, extra.field)\"\n            on-change=\"onRefresh()\" css-class=\"min-width-10\">\n          </gf-form-dropdown>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n";
function sQuery() {
  return {
    template: template,
    controller: QueryCtrl,
    restrict: 'E',
    scope: {
      target: '=',
      showDetail: '=',
      region: '=',
      datasource: '=',
      getDropdownOptions: '&',
      onChange: '&',
      onRefresh: '&',
      dims: '='
    }
  };
}
grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0___default.a.directive(_query_def__WEBPACK_IMPORTED_MODULE_1__["queryEditorName"], sQuery);

/***/ }),

/***/ "./datasource/tc_monitor/cdn_province/query_def.ts":
/*!*********************************************************!*\
  !*** ./datasource/tc_monitor/cdn_province/query_def.ts ***!
  \*********************************************************/
/*! exports provided: default, CDNPROVINCEFilterFieldsDescriptor, templateQueryIdMap, CDNPROVINCEInstanceAliasList, CDNPROVINCEInvalidDemensions, namespace, queryEditorName, CDNPROVINCEGetInstanceQueryParams */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CDNPROVINCEFilterFieldsDescriptor", function() { return CDNPROVINCEFilterFieldsDescriptor; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "templateQueryIdMap", function() { return templateQueryIdMap; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CDNPROVINCEInstanceAliasList", function() { return CDNPROVINCEInstanceAliasList; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CDNPROVINCEInvalidDemensions", function() { return CDNPROVINCEInvalidDemensions; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "namespace", function() { return namespace; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "queryEditorName", function() { return queryEditorName; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CDNPROVINCEGetInstanceQueryParams", function() { return GetInstanceQueryParams; });
/* harmony import */ var _common_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../common/utils */ "./datasource/common/utils.ts");

var namespace = 'QCE/CDN_LOG_DATA'; // 组件名称。这里名字要和index.ts中的SERVICES对应，后面会根据SERVICES中service字段拼接这个query组件名称

var queryEditorName = 'cdnProvinceQuery';
var CDNPROVINCEInvalidDemensions = {
  domain: 'Domain',
  // isp: 'Isp',
  projectid: 'ProjectId',
  province: 'district',
  appid: 'AppId'
}; // 需和文件名对应

var CDNPROVINCEInstanceAliasList = ['Domain', 'ProjectId'];
var templateQueryIdMap = {
  instance: 'Domain'
}; // select类型需要注意是{},multi后缀是[],dropdown是''

var CDNPROVINCEFilterFields = {
  Limit: 20,
  Offset: 0,
  origin: [],
  domain: [],
  resourceId: [],
  status: {},
  serviceType: {},
  projectId: [],
  domainType: {},
  fullUrlCache: {},
  https: {},
  originPullProtocol: {},
  tagKey: []
};
var CDNPROVINCEFilterFieldsDescriptor = [{
  key: 'Offset',
  enDescriptor: 'Offset',
  cnDescriptor: '偏移量, 例如Offset=20&Limit=20 返回第 20 到 40 项',
  link: '',
  type: 'inputNumber',
  min: 0
}, {
  key: 'Limit',
  enDescriptor: 'Limit',
  cnDescriptor: '单次请求返回的数量，默认为20，最小值为1，最大值为100',
  link: '',
  type: 'inputNumber',
  min: 1,
  max: 100
}, {
  key: 'origin',
  enDescriptor: 'origin',
  cnDescriptor: '主源站',
  link: '',
  type: 'inputMulti'
}, {
  key: 'domain',
  enDescriptor: 'domain',
  cnDescriptor: '域名',
  link: '',
  type: 'inputMulti'
}, {
  key: 'resourceId',
  enDescriptor: 'resourceId',
  cnDescriptor: '域名id',
  link: '',
  type: 'inputMulti'
}, {
  key: 'status',
  enDescriptor: 'status',
  cnDescriptor: '域名状态',
  link: '',
  type: 'select',
  list: [{
    text: 'online',
    value: 'online'
  }, {
    text: 'offline',
    value: 'offline'
  }, {
    text: 'processing',
    value: 'processing'
  }]
}, {
  key: 'serviceType',
  enDescriptor: 'serviceType',
  cnDescriptor: '业务类型',
  link: '',
  type: 'select',
  list: [{
    text: 'web',
    value: 'web'
  }, {
    text: 'download',
    value: 'download'
  }, {
    text: 'media',
    value: 'media'
  }]
}, {
  key: 'projectId',
  enDescriptor: 'projectId',
  cnDescriptor: '项目ID',
  link: '',
  type: 'inputNumberMulti'
}, {
  key: 'domainType',
  enDescriptor: 'domainType',
  cnDescriptor: '主源站类型',
  link: '',
  type: 'select',
  list: [{
    text: '自有源',
    value: 'cname'
  }, {
    text: 'cos接入',
    value: 'cos'
  }]
}, {
  key: 'fullUrlCache',
  enDescriptor: 'fullUrlCache',
  cnDescriptor: '全路径缓存',
  link: '',
  type: 'select',
  list: [{
    text: '打开',
    value: 'on'
  }, {
    text: '关闭',
    value: 'off'
  }]
}, {
  key: 'https',
  enDescriptor: 'https',
  cnDescriptor: '是否配置https',
  link: '',
  type: 'select',
  list: [{
    text: 'on',
    value: 'on'
  }, {
    text: 'off',
    value: 'off'
  }, {
    text: 'processing',
    value: 'processing'
  }]
}, {
  key: 'originPullProtocol',
  enDescriptor: 'originPullProtocol',
  cnDescriptor: '回源协议类型',
  link: '',
  type: 'select',
  list: [{
    text: 'http',
    value: 'http'
  }, {
    text: 'follow',
    value: 'follow'
  }, {
    text: 'https',
    value: 'https'
  }]
}, {
  key: 'tagKey',
  enDescriptor: 'tagKey',
  cnDescriptor: '标签键',
  link: '',
  type: 'inputMulti'
}];
var CDNPROVINCE_STATE = {
  region: 'ap-guangzhou',
  metricName: '',
  metricUnit: '',
  period: undefined,
  dimensionObject: null,
  instance: '',
  instanceAlias: 'Domain',
  // Isp Province分别在两个接口，单独保存在state
  isp: '',
  district: '',
  queries: CDNPROVINCEFilterFields
};

function GetInstanceQueryParams(queries) {
  if (queries === void 0) {
    queries = {};
  }

  return Object(_common_utils__WEBPACK_IMPORTED_MODULE_0__["instanceQueryParamsBaseParse"])(queries, true);
} // const regionSupported = [
//   { text: '华北地区(北京)', value: 'ap-beijing' },
//   { text: '西南地区(成都)', value: 'ap-chengdu' },
//   { text: '西南地区(重庆)', value: 'ap-chongqing' },
//   { text: '华南地区(广州)', value: 'ap-guangzhou' },
//   { text: '港澳台地区(中国香港)', value: 'ap-hongkong' },
//   { text: '亚太南部(孟买)', value: 'ap-mumbai' },
//   { text: '华东地区(南京)', value: 'ap-nanjing' },
//   { text: '华东地区(上海)', value: 'ap-shanghai' },
//   { text: '华东地区(上海金融)', value: 'ap-shanghai-fsi' },
//   { text: '华南地区(深圳金融)', value: 'ap-shenzhen-fsi' },
//   { text: '亚太东南(新加坡)', value: 'ap-singapore' },
//   { text: '亚太东北(东京)', value: 'ap-tokyo' },
//   { text: '欧洲地区(法兰克福)', value: 'eu-frankfurt' },
//   { text: '美国东部(弗吉尼亚)', value: 'na-ashburn' },
//   { text: '美国西部(硅谷)', value: 'na-siliconvalley' },
//   { text: '北美地区(多伦多)', value: 'na-toronto' },
// ];


/* harmony default export */ __webpack_exports__["default"] = (CDNPROVINCE_STATE);


/***/ }),

/***/ "./datasource/tc_monitor/ceip_summary/datasource.ts":
/*!**********************************************************!*\
  !*** ./datasource/tc_monitor/ceip_summary/datasource.ts ***!
  \**********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _query_def__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./query_def */ "./datasource/tc_monitor/ceip_summary/query_def.ts");
/* harmony import */ var _base_datasource__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../_base/datasource */ "./datasource/tc_monitor/_base/datasource.ts");
var __extends = undefined && undefined.__extends || function () {
  var _extendStatics = function extendStatics(d, b) {
    _extendStatics = Object.setPrototypeOf || {
      __proto__: []
    } instanceof Array && function (d, b) {
      d.__proto__ = b;
    } || function (d, b) {
      for (var p in b) {
        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];
      }
    };

    return _extendStatics(d, b);
  };

  return function (d, b) {
    if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");

    _extendStatics(d, b);

    function __() {
      this.constructor = d;
    }

    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();




var DCDatasource =
/** @class */
function (_super) {
  __extends(DCDatasource, _super);

  function DCDatasource(instanceSettings, backendSrv, templateSrv) {
    var _this = _super.call(this, instanceSettings, backendSrv, templateSrv) || this;

    _this.Namespace = _query_def__WEBPACK_IMPORTED_MODULE_0__["namespace"];
    _this.InstanceAliasList = _query_def__WEBPACK_IMPORTED_MODULE_0__["CEIPSUMMARYInstanceAliasList"];
    _this.InvalidDimensions = _query_def__WEBPACK_IMPORTED_MODULE_0__["CEIPInvalidDemensions"];
    _this.templateQueryIdMap = _query_def__WEBPACK_IMPORTED_MODULE_0__["templateQueryIdMap"]; // 此处service是接口的配置参数，需和plugin.json里一致，和constant.ts中SERVICES_API_INFO保持一致

    _this.InstanceReqConfig = {
      service: 'vpc',
      action: 'DescribeAddresses',
      responseField: 'AddressSet',
      interceptor: {
        request: function request(params) {
          var Filters = params.Filters;

          if (!Filters) {
            params.Filters = [];
          }

          params.Filters.push({
            Name: 'address-type',
            Values: ['AnycastEIP']
          });
          return params;
        } // 设置一些请求参数的 默认值
        // response: (data: unknown[]) =>[
        //   {
        //     AddressId: 'AddressId',
        //     AddressIp: '111.22.3.4'
        //   },
        // ],

      }
    };
    _this.MetricReqConfig = {
      resultFilter: _query_def__WEBPACK_IMPORTED_MODULE_0__["modifyDimensons"]
    };
    return _this;
  }

  return DCDatasource;
}(_base_datasource__WEBPACK_IMPORTED_MODULE_1__["BaseDatasource"]);

/* harmony default export */ __webpack_exports__["default"] = (DCDatasource);

/***/ }),

/***/ "./datasource/tc_monitor/ceip_summary/query.ts":
/*!*****************************************************!*\
  !*** ./datasource/tc_monitor/ceip_summary/query.ts ***!
  \*****************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _base_query__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../_base/query */ "./datasource/tc_monitor/_base/query.ts");
/* harmony import */ var _query_def__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./query_def */ "./datasource/tc_monitor/ceip_summary/query_def.ts");


Object(_base_query__WEBPACK_IMPORTED_MODULE_0__["default"])(_query_def__WEBPACK_IMPORTED_MODULE_1__["queryEditorName"], _query_def__WEBPACK_IMPORTED_MODULE_1__["queryEditorConfig"]);

/***/ }),

/***/ "./datasource/tc_monitor/ceip_summary/query_def.ts":
/*!*********************************************************!*\
  !*** ./datasource/tc_monitor/ceip_summary/query_def.ts ***!
  \*********************************************************/
/*! exports provided: default, CEIPFilterFieldsDescriptor, templateQueryIdMap, CEIPSUMMARYInstanceAliasList, CEIPInvalidDemensions, namespace, queryEditorName, modifyDimensons, queryEditorConfig, CEIPSUMMARYGetInstanceQueryParams */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CEIPFilterFieldsDescriptor", function() { return CEIPFilterFieldsDescriptor; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "templateQueryIdMap", function() { return templateQueryIdMap; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CEIPSUMMARYInstanceAliasList", function() { return CEIPSUMMARYInstanceAliasList; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CEIPInvalidDemensions", function() { return CEIPInvalidDemensions; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "namespace", function() { return namespace; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "queryEditorName", function() { return queryEditorName; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "modifyDimensons", function() { return modifyDimensons; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "queryEditorConfig", function() { return queryEditorConfig; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CEIPSUMMARYGetInstanceQueryParams", function() { return GetInstanceQueryParams; });
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lodash */ "lodash");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _common_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../common/utils */ "./datasource/common/utils.ts");


var namespace = 'QCE/CEIP_SUMMARY'; // 组件名称。这里名字要和index.ts中的SERVICES对应，后面会根据SERVICES中service字段拼接这个query组件名称

var queryEditorName = 'ceipSummaryQuery';
var CEIPInvalidDemensions = {
  vip: 'AddressIp',
  eip: 'AddressIp'
}; // 要和文件名方式一致，ceip_summary=>CEIPSUMMARY

var CEIPSUMMARYInstanceAliasList = ['AddressId', 'AddressName', 'AddressIp'];
var templateQueryIdMap = {
  instance: 'AddressId'
}; // select类型需要注意是{},multi后缀是[]

var CEIPFilterFields = {
  Limit: 20,
  Offset: 0,
  'address-id': [],
  'address-name': [],
  'address-ip': [],
  'address-status': {},
  'is-arrears': {},
  'address-isp': {},
  'instance-id': [],
  'private-ip-address': [],
  'network-interface-id': []
};
var CEIPFilterFieldsDescriptor = [{
  key: 'Offset',
  enDescriptor: 'Offset',
  cnDescriptor: '偏移量, 例如Offset=20&Limit=20 返回第 20 到 40 项',
  link: '',
  type: 'inputNumber',
  min: 0
}, {
  key: 'Limit',
  enDescriptor: 'Limit',
  cnDescriptor: '单次请求返回的数量，默认为20，最小值为1，最大值为100',
  link: '',
  type: 'inputNumber',
  min: 1,
  max: 100
}, {
  key: 'address-id',
  enDescriptor: 'address-id',
  cnDescriptor: ' EIP 的唯一 ID',
  link: '',
  type: 'inputMulti'
}, {
  key: 'address-name',
  enDescriptor: 'address-name',
  cnDescriptor: 'EIP 名称',
  link: '',
  type: 'inputMulti'
}, {
  key: 'address-ip',
  enDescriptor: 'address-ip',
  cnDescriptor: 'EIP 的 IP 地址',
  link: '',
  type: 'inputMulti'
}, {
  key: 'address-status',
  enDescriptor: 'address-status',
  cnDescriptor: 'EIP 的状态',
  link: '',
  type: 'select',
  multiple: true,
  list: [{
    text: 'CREATING',
    value: 'CREATING'
  }, {
    text: 'BINDING',
    value: 'BINDING'
  }, {
    text: 'BIND',
    value: 'BIND'
  }, {
    text: 'UNBINDING',
    value: 'UNBINDING'
  }, {
    text: 'UNBIND',
    value: 'UNBIND'
  }, {
    text: 'OFFLINING',
    value: 'OFFLINING'
  }, {
    text: 'BIND_ENI',
    value: 'BIND_ENI'
  }]
}, {
  key: 'instance-id',
  enDescriptor: 'instance-id',
  cnDescriptor: 'EIP 绑定的实例 ID',
  link: '',
  type: 'inputMulti'
}, {
  key: 'private-ip-address',
  enDescriptor: 'private-ip-address',
  cnDescriptor: 'EIP 绑定的内网 IP ',
  link: '',
  type: 'inputMulti'
}, {
  key: 'network-interface-id',
  enDescriptor: 'network-interface-id',
  cnDescriptor: ' EIP 绑定的弹性网卡 ID',
  link: '',
  type: 'inputMulti'
}, {
  key: 'is-arrears',
  enDescriptor: 'is-arrears',
  cnDescriptor: 'EIP 是否欠费',
  link: '',
  type: 'select',
  multiple: true,
  list: [{
    text: '欠费状态',
    value: 'TRUE'
  }, {
    text: '费用状态正常',
    value: 'FALSE'
  }]
}, {
  key: 'address-isp',
  enDescriptor: 'address-isp',
  cnDescriptor: '运营商类型',
  link: '',
  type: 'select',
  multiple: true,
  list: [{
    text: 'BGP',
    value: 'BGP'
  }, {
    text: 'CMCC',
    value: 'CMCC'
  }, {
    text: 'CUCC',
    value: 'CUCC'
  }, {
    text: 'CTCC',
    value: 'CTCC'
  }]
}]; // 各产品实例列表detail配置

var queryEditorConfig = {
  instanceDocUrl: 'https://cloud.tencent.com/document/api/215/16702',
  namespace: namespace,
  fieldDescriptor: CEIPFilterFieldsDescriptor
};
var CEIP_STATE = {
  region: '',
  metricName: '',
  metricUnit: '',
  period: undefined,
  dimensionObject: null,
  instance: '',
  instanceAlias: 'AddressId',
  queries: CEIPFilterFields
};

function GetInstanceQueryParams(queries) {
  if (queries === void 0) {
    queries = {};
  }

  return Object(_common_utils__WEBPACK_IMPORTED_MODULE_1__["instanceQueryParamsBaseParse"])(queries, true);
}

function modifyDimensons(metricItem) {
  var metricTmp = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.cloneDeep(metricItem);

  metricTmp.Dimensions.forEach(function (item) {
    item.Dimensions = ['eip'];
  });
  return metricTmp;
}

/* harmony default export */ __webpack_exports__["default"] = (CEIP_STATE);


/***/ }),

/***/ "./datasource/tc_monitor/ces/datasource.ts":
/*!*************************************************!*\
  !*** ./datasource/tc_monitor/ces/datasource.ts ***!
  \*************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _query_def__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./query_def */ "./datasource/tc_monitor/ces/query_def.ts");
/* harmony import */ var _base_datasource__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../_base/datasource */ "./datasource/tc_monitor/_base/datasource.ts");
var __extends = undefined && undefined.__extends || function () {
  var _extendStatics = function extendStatics(d, b) {
    _extendStatics = Object.setPrototypeOf || {
      __proto__: []
    } instanceof Array && function (d, b) {
      d.__proto__ = b;
    } || function (d, b) {
      for (var p in b) {
        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];
      }
    };

    return _extendStatics(d, b);
  };

  return function (d, b) {
    if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");

    _extendStatics(d, b);

    function __() {
      this.constructor = d;
    }

    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();




var DCDatasource =
/** @class */
function (_super) {
  __extends(DCDatasource, _super);

  function DCDatasource(instanceSettings, backendSrv, templateSrv) {
    var _this = _super.call(this, instanceSettings, backendSrv, templateSrv) || this;

    _this.Namespace = _query_def__WEBPACK_IMPORTED_MODULE_0__["namespace"];
    _this.InstanceAliasList = _query_def__WEBPACK_IMPORTED_MODULE_0__["CESInstanceAliasList"];
    _this.InvalidDimensions = _query_def__WEBPACK_IMPORTED_MODULE_0__["CESInvalidDemensions"];
    _this.templateQueryIdMap = _query_def__WEBPACK_IMPORTED_MODULE_0__["templateQueryIdMap"]; // 此处service是接口的配置参数，需和plugin.json里一致，和constant.ts中SERVICES_API_INFO保持一致

    _this.InstanceReqConfig = {
      service: 'es',
      action: 'DescribeInstances',
      responseField: 'InstanceList'
    };
    return _this;
  }

  return DCDatasource;
}(_base_datasource__WEBPACK_IMPORTED_MODULE_1__["BaseDatasource"]);

/* harmony default export */ __webpack_exports__["default"] = (DCDatasource);

/***/ }),

/***/ "./datasource/tc_monitor/ces/query.ts":
/*!********************************************!*\
  !*** ./datasource/tc_monitor/ces/query.ts ***!
  \********************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _base_query__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../_base/query */ "./datasource/tc_monitor/_base/query.ts");
/* harmony import */ var _query_def__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./query_def */ "./datasource/tc_monitor/ces/query_def.ts");


Object(_base_query__WEBPACK_IMPORTED_MODULE_0__["default"])(_query_def__WEBPACK_IMPORTED_MODULE_1__["queryEditorName"], _query_def__WEBPACK_IMPORTED_MODULE_1__["queryEditorConfig"]);

/***/ }),

/***/ "./datasource/tc_monitor/ces/query_def.ts":
/*!************************************************!*\
  !*** ./datasource/tc_monitor/ces/query_def.ts ***!
  \************************************************/
/*! exports provided: default, CESFilterFieldsDescriptor, templateQueryIdMap, CESInstanceAliasList, CESInvalidDemensions, namespace, queryEditorName, queryEditorConfig, CESGetInstanceQueryParams */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CESFilterFieldsDescriptor", function() { return CESFilterFieldsDescriptor; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "templateQueryIdMap", function() { return templateQueryIdMap; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CESInstanceAliasList", function() { return CESInstanceAliasList; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CESInvalidDemensions", function() { return CESInvalidDemensions; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "namespace", function() { return namespace; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "queryEditorName", function() { return queryEditorName; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "queryEditorConfig", function() { return queryEditorConfig; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CESGetInstanceQueryParams", function() { return GetInstanceQueryParams; });
/* harmony import */ var _common_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../common/utils */ "./datasource/common/utils.ts");

var namespace = 'QCE/CES'; // 组件名称。这里名字要和index.ts中的SERVICES对应，后面会根据SERVICES中service字段拼接这个query组件名称

var queryEditorName = 'cesQuery';
var CESInvalidDemensions = {
  uInstanceId: 'InstanceId'
};
var CESInstanceAliasList = ['InstanceId', 'InstanceName'];
var templateQueryIdMap = {
  instance: 'InstanceId'
}; // select类型需要注意是{},multi后缀是[],dropdown是类型

var CESFilterFields = {
  Limit: 20,
  Offset: 0,
  InstanceIds: [],
  InstanceNames: [],
  OrderByKey: {},
  OrderByType: {},
  IpList: []
};
var CESFilterFieldsDescriptor = [{
  key: 'Offset',
  enDescriptor: 'Offset',
  cnDescriptor: '偏移量, 例如Offset=20&Limit=20 返回第 20 到 40 项',
  link: '',
  type: 'inputNumber',
  min: 0
}, {
  key: 'Limit',
  enDescriptor: 'Limit',
  cnDescriptor: '单次请求返回的数量，默认为20，最小值为1，最大值为100',
  link: '',
  type: 'inputNumber',
  min: 1,
  max: 100
}, {
  key: 'InstanceIds',
  enDescriptor: 'InstanceIds',
  cnDescriptor: '集群实例ID列表',
  link: '',
  type: 'inputMulti'
}, {
  key: 'InstanceNames',
  enDescriptor: 'InstanceNames',
  cnDescriptor: '集群实例名称列表',
  link: '',
  type: 'inputMulti'
}, {
  key: 'OrderByKey',
  enDescriptor: 'OrderByKey',
  cnDescriptor: '排序字段',
  link: '',
  type: 'select',
  list: [{
    text: '实例ID',
    value: 1
  }, {
    text: '实例名称',
    value: 2
  }, {
    text: '可用区',
    value: 3
  }, {
    text: '创建时间',
    value: 4
  }]
}, {
  key: 'OrderByType',
  enDescriptor: 'OrderByType',
  cnDescriptor: '排序方式',
  link: '',
  type: 'select',
  list: [{
    text: '升序',
    value: 0
  }, {
    text: '降序',
    value: 1
  }]
}, {
  key: 'IpList',
  enDescriptor: 'IpList',
  cnDescriptor: '私有网络vip列表',
  link: '',
  type: 'inputMulti'
}]; // 各产品实例列表detail配置

var queryEditorConfig = {
  instanceDocUrl: 'https://cloud.tencent.com/document/api/845/30631',
  namespace: namespace,
  fieldDescriptor: CESFilterFieldsDescriptor
};
var CES_STATE = {
  region: '',
  metricName: '',
  metricUnit: '',
  period: undefined,
  dimensionObject: null,
  instance: '',
  instanceAlias: 'InstanceId',
  queries: CESFilterFields
};

function GetInstanceQueryParams(queries) {
  if (queries === void 0) {
    queries = {};
  }

  return Object(_common_utils__WEBPACK_IMPORTED_MODULE_0__["instanceQueryParamsBaseParse"])(queries, false);
}

/* harmony default export */ __webpack_exports__["default"] = (CES_STATE);


/***/ }),

/***/ "./datasource/tc_monitor/cfs/datasource.ts":
/*!*************************************************!*\
  !*** ./datasource/tc_monitor/cfs/datasource.ts ***!
  \*************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _base_datasource__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../_base/datasource */ "./datasource/tc_monitor/_base/datasource.ts");
/* harmony import */ var _query_def__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./query_def */ "./datasource/tc_monitor/cfs/query_def.ts");
/* harmony import */ var _locale__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../locale */ "./locale/index.ts");
var __extends = undefined && undefined.__extends || function () {
  var _extendStatics = function extendStatics(d, b) {
    _extendStatics = Object.setPrototypeOf || {
      __proto__: []
    } instanceof Array && function (d, b) {
      d.__proto__ = b;
    } || function (d, b) {
      for (var p in b) {
        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];
      }
    };

    return _extendStatics(d, b);
  };

  return function (d, b) {
    if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");

    _extendStatics(d, b);

    function __() {
      this.constructor = d;
    }

    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();





var CFSDatasource =
/** @class */
function (_super) {
  __extends(CFSDatasource, _super);

  function CFSDatasource(instanceSettings, backendSrv, templateSrv) {
    var _this = _super.call(this, instanceSettings, backendSrv, templateSrv) || this;

    _this.templateQueryIdMap = {
      instance: 'FileSystemId'
    };
    _this.extrasAlias = ['version'];
    _this.Namespace = 'QCE/CFS';
    _this.InstanceAliasList = _query_def__WEBPACK_IMPORTED_MODULE_1__["CFSInstanceAliasList"];
    _this.InvalidDimensions = _query_def__WEBPACK_IMPORTED_MODULE_1__["CFSInvalidDemensions"];
    _this.InstanceReqConfig = {
      service: 'cfs',
      action: 'DescribeCfsFileSystems',
      responseField: 'FileSystems'
    };
    return _this;
  }

  CFSDatasource.prototype.getRegions = function () {
    return Promise.resolve(_query_def__WEBPACK_IMPORTED_MODULE_1__["regionSupported"].map(function (_a) {
      var value = _a.value;
      return {
        value: value,
        text: Object(_locale__WEBPACK_IMPORTED_MODULE_2__["t"])(value)
      };
    }));
  };

  return CFSDatasource;
}(_base_datasource__WEBPACK_IMPORTED_MODULE_0__["BaseDatasource"]);

/* harmony default export */ __webpack_exports__["default"] = (CFSDatasource);

/***/ }),

/***/ "./datasource/tc_monitor/cfs/query.ts":
/*!********************************************!*\
  !*** ./datasource/tc_monitor/cfs/query.ts ***!
  \********************************************/
/*! exports provided: SCFQueryCtrl, scfQuery */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SCFQueryCtrl", function() { return SCFQueryCtrl; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "scfQuery", function() { return scfQuery; });
/* harmony import */ var grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! grafana/app/core/core_module */ "grafana/app/core/core_module");
/* harmony import */ var grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _query_def__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./query_def */ "./datasource/tc_monitor/cfs/query_def.ts");
var __awaiter = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {
  function adopt(value) {
    return value instanceof P ? value : new P(function (resolve) {
      resolve(value);
    });
  }

  return new (P || (P = Promise))(function (resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }

    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }

    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }

    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};

var __generator = undefined && undefined.__generator || function (thisArg, body) {
  var _ = {
    label: 0,
    sent: function sent() {
      if (t[0] & 1) throw t[1];
      return t[1];
    },
    trys: [],
    ops: []
  },
      f,
      y,
      t,
      g;
  return g = {
    next: verb(0),
    "throw": verb(1),
    "return": verb(2)
  }, typeof Symbol === "function" && (g[Symbol.iterator] = function () {
    return this;
  }), g;

  function verb(n) {
    return function (v) {
      return step([n, v]);
    };
  }

  function step(op) {
    if (f) throw new TypeError("Generator is already executing.");

    while (_) {
      try {
        if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
        if (y = 0, t) op = [op[0] & 2, t.value];

        switch (op[0]) {
          case 0:
          case 1:
            t = op;
            break;

          case 4:
            _.label++;
            return {
              value: op[1],
              done: false
            };

          case 5:
            _.label++;
            y = op[1];
            op = [0];
            continue;

          case 7:
            op = _.ops.pop();

            _.trys.pop();

            continue;

          default:
            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
              _ = 0;
              continue;
            }

            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
              _.label = op[1];
              break;
            }

            if (op[0] === 6 && _.label < t[1]) {
              _.label = t[1];
              t = op;
              break;
            }

            if (t && _.label < t[2]) {
              _.label = t[2];

              _.ops.push(op);

              break;
            }

            if (t[2]) _.ops.pop();

            _.trys.pop();

            continue;
        }

        op = body.call(thisArg, _);
      } catch (e) {
        op = [6, e];
        y = 0;
      } finally {
        f = t = 0;
      }
    }

    if (op[0] & 5) throw op[1];
    return {
      value: op[0] ? op[1] : void 0,
      done: true
    };
  }
};




var SCFQueryCtrl =
/** @class */
function () {
  SCFQueryCtrl.$inject = ["$scope", "$rootScope"];

  /** @ngInject */
  function SCFQueryCtrl($scope, $rootScope) {
    var _this = this;

    $scope.init = function () {
      $scope.CFSQueryDescriptor = _query_def__WEBPACK_IMPORTED_MODULE_1__["CFSQueryDescriptor"];
    };

    $scope.getVersions = function (target) {
      return __awaiter(_this, void 0, void 0, function () {
        var instance, region, fetcher;
        return __generator(this, function (_a) {
          instance = target.instance, region = target.region;
          fetcher = $scope.datasource.getServiceFn('scf', 'getVersions');
          if (!instance || !region) return [2
          /*return*/
          , []];
          return [2
          /*return*/
          , fetcher(region, {
            FunctionName: JSON.parse(instance).FunctionName
          }).then(function (res) {
            // console.log(res, 'res');
            return res;
          })];
        });
      });
    }; // $scope.onChecked = (srcField, dstField) => {
    //   if ($scope.target.queries[srcField] === true) {
    //     $scope.target.queries[dstField] = false;
    //   }
    //   $scope.onChange();
    // };
    // $scope.getDropdown = (field) => {
    //   switch (field) {
    //     case 'zone':
    //       return $scope.getZones();
    //     default:
    //       return [];
    //   }
    // };
    // $scope.getZones = () => {
    //   if (!$scope.region) {
    //     return [];
    //   }
    //   return $scope.datasource.getZones('cvm', $scope.region);
    // };


    $scope.init();
  }

  return SCFQueryCtrl;
}();


var template = "\n<div>\n<div class=\"tc-sub-params\" ng-if=\"showDetail\">\n  <label class=\"gf-form-label tc-info-label\">\n  FileSystems are queried by following params.\n    <a target=\"_blank\" style=\"text-decoration:underline;color:#006eff;font-size:medium\" href=\"https://cloud.tencent.com/document/api/582/38170\">Click here to get API doc.</a>\n  </label>\n  <div class=\"gf-form-inline\" ng-repeat=\"field in CFSQueryDescriptor\">\n    <div class=\"gf-form\">\n      <label class=\"gf-form-label width-14\">\n        {{ field.key }}\n        <info-popover mode=\"right-normal\">\n          {{ field.cnDescriptor }}\n          <a target=\"_blank\" href=\"{{field.link}}\" ng-if=\"field.link\">Click here for more information.</a>\n        </info-popover>\n      </label>\n      <input\n        ng-if=\"field.type === 'inputnumber'\"\n        style=\"margin-right:2px\"\n        type=\"number\"\n        ng-model=\"target.queries[field.key]\"\n        ng-change=\"onChange()\"\n        class=\"gf-form-input width-10\"\n        ng-min=\"field.min\"\n        ng-max=\"field.max\"\n      />\n      <input\n        ng-if=\"field.type === 'input'\"\n        style=\"margin-right:2px\"\n        type=\"text\"\n        ng-model=\"target.queries[field.key]\"\n        ng-change=\"onChange()\"\n        class=\"gf-form-input width-10\"\n      />\n      <multi-condition\n        ng-if=\"field.type === 'inputmulti'\"\n        type=\"'input'\"\n        value=\"target.queries[field.key]\"\n        on-change=\"onChange()\"\n      ></multi-condition>\n      <multi-condition\n        ng-if=\"field.type === 'dropdownmulti'\"\n        type=\"'dropdown'\"\n        value=\"target.queries[field.key]\"\n        on-change=\"onChange()\"\n        get-options=\"getDropdown(field.key)\"\n      ></multi-condition>\n      <custom-select-dropdown\n        ng-if=\"field.type === 'select'\"\n        value=\"target.queries[field.key]\"\n        options=\"field.list\"\n        multiple=\"field.multiple || false\"\n        on-change=\"onChange()\"\n      ></custom-select-dropdown>\n    </div>\n  </div>\n</div>\n  </div>\n";
function scfQuery() {
  return {
    template: template,
    controller: SCFQueryCtrl,
    restrict: 'E',
    scope: {
      target: '=',
      showDetail: '=',
      region: '=',
      datasource: '=',
      getDropdownOptions: '&',
      onChange: '&'
    }
  };
}
grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0___default.a.directive('cfsQuery', scfQuery);

/***/ }),

/***/ "./datasource/tc_monitor/cfs/query_def.ts":
/*!************************************************!*\
  !*** ./datasource/tc_monitor/cfs/query_def.ts ***!
  \************************************************/
/*! exports provided: CFSQueryDescriptor, default, CFSInstanceAliasList, CFSInvalidDemensions, templateQueryIdMap, regionSupported, CFSGetInstanceQueryParams */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CFSQueryDescriptor", function() { return CFSQueryDescriptor; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CFSInstanceAliasList", function() { return CFSInstanceAliasList; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CFSInvalidDemensions", function() { return CFSInvalidDemensions; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "templateQueryIdMap", function() { return templateQueryIdMap; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "regionSupported", function() { return regionSupported; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CFSGetInstanceQueryParams", function() { return GetInstanceQueryParams; });
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lodash */ "lodash");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__);

var CFSQueryDescriptor = [{
  key: 'Offset',
  enDescriptor: 'Offset',
  cnDescriptor: '偏移量, 例如Offset=20&Limit=20 返回第 20 到 40 项',
  link: '',
  type: 'inputnumber',
  min: 0
}, {
  key: 'Limit',
  enDescriptor: 'Limit',
  cnDescriptor: '单次请求返回的数量，默认为20，最小值为1，最大值为100',
  link: '',
  type: 'inputnumber',
  min: 1,
  max: 100
}, {
  key: 'FileSystemId',
  enDescriptor: 'File System Id',
  cnDescriptor: '文件系统 ID',
  link: '',
  type: 'input'
}, {
  key: 'VpcId',
  enDescriptor: 'VpcId',
  cnDescriptor: '私有网络（VPC） ID',
  link: '',
  type: 'input'
}, {
  key: 'SubnetId',
  enDescriptor: 'SubnetId',
  cnDescriptor: '子网 ID',
  link: '',
  type: 'input'
}];
var CFS_STATE = {
  region: '',
  metricName: '',
  metricUnit: '',
  period: undefined,
  dimensionObject: null,
  instance: '',
  instanceAlias: 'FileSystemId',
  version: '',
  queries: {
    Offset: 0,
    Limit: 20,
    FileSystemId: '',
    VpcId: '',
    SubnetId: ''
  }
};

function GetInstanceQueryParams(queries) {
  if (queries === void 0) {
    queries = {};
  }

  var params = {};

  if (!lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isEmpty(queries)) {
    params.Limit = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(queries, 'Limit', 20) || 20;
    params.Offset = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(queries, 'Offset', 0) || 0;
    queries = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.omit(queries, ['Offset', 'Limit']);

    lodash__WEBPACK_IMPORTED_MODULE_0___default.a.forEach(queries, function (item, key) {
      if (lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isArray(item)) {
        item = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.compact(item);

        if (item.length > 0) {
          params[key] = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.uniq(item);
        }
      } else if (lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isObject(item)) {
        if (lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isNumber(lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(item, 'value', undefined)) || !lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isEmpty(lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(item, 'value', undefined))) {
          params[key] = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(item, 'value');
        }
      } else if (lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isNumber(item) || !lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isEmpty(item)) {
        params[key] = item;
      }
    });
  }

  return params;
}

var CFSInstanceAliasList = ['FileSystemId', 'FsName']; // 向实例里面塞dimensions对应的值，dimension中的key对应到实例中的key

var CFSInvalidDemensions = {// functionName: 'FunctionName',
  // namespace: 'Namespace'
};
var regionSupported = [{
  value: 'ap-beijing'
}, {
  value: 'ap-chengdu'
}, {
  value: 'ap-chongqing'
}, {
  value: 'ap-guangzhou'
}, {
  value: 'ap-hongkong'
}, {
  value: 'ap-mumbai'
}, {
  value: 'ap-nanjing'
}, {
  value: 'ap-seoul'
}, {
  value: 'ap-shanghai'
}, {
  value: 'ap-shanghai-fsi'
}, {
  value: 'ap-shenzhen-fsi'
}, {
  value: 'ap-singapore'
}, {
  value: 'ap-tokyo'
}, {
  value: 'eu-frankfurt'
}, {
  value: 'na-siliconvalley'
}, {
  value: 'na-toronto'
}];
var templateQueryIdMap = {
  instance: 'InstanceId'
};
/* harmony default export */ __webpack_exports__["default"] = (CFS_STATE);
 // monitor监控数据默认支持的维度
// export const SCFDefaultDimensionList = ['functionName', 'namespace', 'version'];

/***/ }),

/***/ "./datasource/tc_monitor/ckafka/datasource.ts":
/*!****************************************************!*\
  !*** ./datasource/tc_monitor/ckafka/datasource.ts ***!
  \****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lodash */ "lodash");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _common_constants__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../common/constants */ "./datasource/common/constants.ts");
/* harmony import */ var _common_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../common/utils */ "./datasource/common/utils.ts");
/* harmony import */ var _base_datasource__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../_base/datasource */ "./datasource/tc_monitor/_base/datasource.ts");
/* harmony import */ var _query_def__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./query_def */ "./datasource/tc_monitor/ckafka/query_def.ts");
/* harmony import */ var _common_datasourceStorage__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../common/datasourceStorage */ "./datasource/common/datasourceStorage.ts");
var __extends = undefined && undefined.__extends || function () {
  var _extendStatics = function extendStatics(d, b) {
    _extendStatics = Object.setPrototypeOf || {
      __proto__: []
    } instanceof Array && function (d, b) {
      d.__proto__ = b;
    } || function (d, b) {
      for (var p in b) {
        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];
      }
    };

    return _extendStatics(d, b);
  };

  return function (d, b) {
    if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");

    _extendStatics(d, b);

    function __() {
      this.constructor = d;
    }

    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();

var __awaiter = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {
  function adopt(value) {
    return value instanceof P ? value : new P(function (resolve) {
      resolve(value);
    });
  }

  return new (P || (P = Promise))(function (resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }

    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }

    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }

    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};

var __generator = undefined && undefined.__generator || function (thisArg, body) {
  var _ = {
    label: 0,
    sent: function sent() {
      if (t[0] & 1) throw t[1];
      return t[1];
    },
    trys: [],
    ops: []
  },
      f,
      y,
      t,
      g;
  return g = {
    next: verb(0),
    "throw": verb(1),
    "return": verb(2)
  }, typeof Symbol === "function" && (g[Symbol.iterator] = function () {
    return this;
  }), g;

  function verb(n) {
    return function (v) {
      return step([n, v]);
    };
  }

  function step(op) {
    if (f) throw new TypeError("Generator is already executing.");

    while (_) {
      try {
        if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
        if (y = 0, t) op = [op[0] & 2, t.value];

        switch (op[0]) {
          case 0:
          case 1:
            t = op;
            break;

          case 4:
            _.label++;
            return {
              value: op[1],
              done: false
            };

          case 5:
            _.label++;
            y = op[1];
            op = [0];
            continue;

          case 7:
            op = _.ops.pop();

            _.trys.pop();

            continue;

          default:
            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
              _ = 0;
              continue;
            }

            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
              _.label = op[1];
              break;
            }

            if (op[0] === 6 && _.label < t[1]) {
              _.label = t[1];
              t = op;
              break;
            }

            if (t && _.label < t[2]) {
              _.label = t[2];

              _.ops.push(op);

              break;
            }

            if (t[2]) _.ops.pop();

            _.trys.pop();

            continue;
        }

        op = body.call(thisArg, _);
      } catch (e) {
        op = [6, e];
        y = 0;
      } finally {
        f = t = 0;
      }
    }

    if (op[0] & 5) throw op[1];
    return {
      value: op[0] ? op[1] : void 0,
      done: true
    };
  }
};








var CKFKADatasource =
/** @class */
function (_super) {
  __extends(CKFKADatasource, _super);

  function CKFKADatasource(instanceSettings, backendSrv, templateSrv) {
    var _this = _super.call(this, instanceSettings, backendSrv, templateSrv) || this;

    _this.Namespace = 'QCE/CKAFKA';
    _this.InstanceAliasList = _query_def__WEBPACK_IMPORTED_MODULE_4__["CKAFKAInstanceAliasList"];
    _this.TopicAliasList = _query_def__WEBPACK_IMPORTED_MODULE_4__["CKAFKATopicAliasList"];
    _this.InvalidDimensions = _query_def__WEBPACK_IMPORTED_MODULE_4__["CKAFKAInvalidDemensions"];
    _this.templateQueryIdMap = _query_def__WEBPACK_IMPORTED_MODULE_4__["templateQueryIdMap"];
    _this.InstanceReqConfig = {
      service: 'ckafka',
      action: 'DescribeInstances',
      responseField: 'InstanceList'
    };
    _this.extraMetricDims = ['topicId']; // extrasAlias = ['topicId', 'consumerGroup', 'partition'];

    _this.keyInStorage = _query_def__WEBPACK_IMPORTED_MODULE_4__["keyInStorage"];
    _this.queryMonitorExtraConfg = _query_def__WEBPACK_IMPORTED_MODULE_4__["queryMonitorExtraConfg"];
    _this.consumerGroupCache = {};
    return _this;
  }

  CKFKADatasource.prototype.getConsumerGroups = function (region, params) {
    var _a, _b, _c;

    return __awaiter(this, void 0, void 0, function () {
      var serviceInfo, InstanceId, _d, groupname, _e, topicid, consumerGoup, topicList, GroupList, TopicList, PartitionList, GroupDetailList, SubscribedInfos, partitions;

      var _this = this;

      return __generator(this, function (_f) {
        switch (_f.label) {
          case 0:
            serviceInfo = Object(_common_constants__WEBPACK_IMPORTED_MODULE_1__["GetServiceAPIInfo"])(region, 'ckafka');
            InstanceId = params.InstanceId, _d = params.groupname, groupname = _d === void 0 ? '' : _d, _e = params.topicid, topicid = _e === void 0 ? '' : _e;
            groupname = this.getVariable(groupname); // 将模板转换为真实值

            topicid = this.getVariable(topicid); // 将模板转换为真实值

            try {
              groupname = JSON.parse(groupname)[_query_def__WEBPACK_IMPORTED_MODULE_4__["templateQueryIdMap"].groupName];
              topicid = JSON.parse(topicid)[_query_def__WEBPACK_IMPORTED_MODULE_4__["templateQueryIdMap"].topicId];
            } catch (e) {}

            consumerGoup = this.consumerGroupCache[InstanceId];
            if (!!consumerGoup) return [3
            /*break*/
            , 3];
            return [4
            /*yield*/
            , Object(_common_utils__WEBPACK_IMPORTED_MODULE_2__["fetchAllFactory"])(function (data) {
              return _this.doRequest({
                url: _this.url + serviceInfo.path,
                data: data
              }, serviceInfo.service, {
                region: region,
                action: 'DescribeConsumerGroup'
              });
            }, lodash__WEBPACK_IMPORTED_MODULE_0___default.a.pick(params, 'InstanceId'), ['GroupListForMonitor', 'TopicListForMonitor', 'PartitionListForMonitor', 'GroupList'])];

          case 1:
            // 从分页数据，获取全量数据
            consumerGoup = _f.sent();
            return [4
            /*yield*/
            , Object(_common_utils__WEBPACK_IMPORTED_MODULE_2__["fetchAllFactory"])(function (data) {
              return _this.doRequest({
                url: _this.url + serviceInfo.path,
                data: data
              }, serviceInfo.service, {
                region: region,
                action: 'DescribeTopic'
              });
            }, lodash__WEBPACK_IMPORTED_MODULE_0___default.a.pick(params, 'InstanceId'), ['TopicList'])];

          case 2:
            topicList = _f.sent();
            consumerGoup[1] = Object(lodash__WEBPACK_IMPORTED_MODULE_0__["flattenDeep"])(topicList);
            console.log({
              consumerGoup: consumerGoup,
              topicList: topicList
            });
            this.consumerGroupCache[InstanceId] = consumerGoup;
            _f.label = 3;

          case 3:
            GroupList = consumerGoup[0], TopicList = consumerGoup[1], PartitionList = consumerGoup[2], GroupDetailList = consumerGoup[3]; // 无重复数组

            TopicList = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.uniqBy(TopicList, function (item) {
              return item.TopicId;
            });
            GroupList = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.uniqBy(GroupList, function (item) {
              return item.GroupName;
            });
            PartitionList = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.uniqBy(PartitionList, function (item) {
              return item.PartitionId;
            });
            GroupDetailList = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.uniqBy(GroupDetailList, function (item) {
              return item.ConsumerGroupName;
            });
            SubscribedInfos = ((_a = GroupDetailList.find(function (d) {
              return d.ConsumerGroupName === groupname;
            })) === null || _a === void 0 ? void 0 : _a.SubscribedInfo) || [];
            partitions = ((_c = (_b = SubscribedInfos.find(function (sub) {
              return sub.TopicId === topicid;
            })) === null || _b === void 0 ? void 0 : _b.Partition) === null || _c === void 0 ? void 0 : _c.map(function (p) {
              var _a;

              return _a = {}, _a[_query_def__WEBPACK_IMPORTED_MODULE_4__["templateQueryIdMap"].partition] = p, _a;
            })) || [];
            return [2
            /*return*/
            , {
              GroupList: GroupList,
              TopicList: SubscribedInfos.length > 0 ? SubscribedInfos.map(function (_a) {
                var TopicId = _a.TopicId,
                    TopicName = _a.TopicName;
                return {
                  TopicId: TopicId,
                  TopicName: TopicName
                };
              }) : TopicList,
              PartitionList: partitions.length > 0 ? partitions : PartitionList
            }];
        }
      });
    });
  };

  CKFKADatasource.prototype.formatTopicVarDisplay = function (topic, displayTpl, topicAlias) {
    var _this = this;

    if (displayTpl) {
      return displayTpl.replace(/\$\{(\w+)\}/g, function (a, b) {
        if (!b || !_this.TopicAliasList.includes(b)) {
          return '';
        }

        return _this.getAliasValue(topic, b);
      });
    }

    return this.getAliasValue(topic, topicAlias);
  }; // 查询指标下的数据


  CKFKADatasource.prototype.fetchMetricData = function (action, region, instance, query) {
    return __awaiter(this, void 0, void 0, function () {
      var topicalias, groupname, topicid, result, display, TopicList, GroupList, PartitionList, rs;

      var _this = this;

      return __generator(this, function (_a) {
        switch (_a.label) {
          case 0:
            topicalias = query.topicalias, groupname = query.groupname, topicid = query.topicid;
            return [4
            /*yield*/
            , this.getConsumerGroups(region, {
              InstanceId: instance.InstanceId,
              groupname: groupname,
              topicid: topicid
            })];

          case 1:
            result = _a.sent();
            display = query.display;
            TopicList = result.TopicList, GroupList = result.GroupList, PartitionList = result.PartitionList;
            topicalias = this.TopicAliasList.includes(topicalias) ? topicalias : this.templateQueryIdMap.topicId;
            rs = {
              GroupList: GroupList.map(function (group) {
                group._InstanceAliasValue = group.GroupName;
                return {
                  text: group.GroupName,
                  value: group[_query_def__WEBPACK_IMPORTED_MODULE_4__["templateQueryIdMap"].groupName]
                };
              }),
              TopicList: TopicList.map(function (topic) {
                var topicAlias = _this.formatTopicVarDisplay(topic, display, topicalias);

                topic._InstanceAliasValue = topicAlias || topic[_query_def__WEBPACK_IMPORTED_MODULE_4__["templateQueryIdMap"].topicId];
                return {
                  text: topicAlias || topic[_query_def__WEBPACK_IMPORTED_MODULE_4__["templateQueryIdMap"].topicId],
                  value: topic[_query_def__WEBPACK_IMPORTED_MODULE_4__["templateQueryIdMap"].topicId],
                  TopicName: topic.TopicName
                };
              }),
              PartitionList: PartitionList.map(function (par) {
                par._InstanceAliasValue = par[_query_def__WEBPACK_IMPORTED_MODULE_4__["templateQueryIdMap"].partition];
                return {
                  text: par[_query_def__WEBPACK_IMPORTED_MODULE_4__["templateQueryIdMap"].partition],
                  value: par[_query_def__WEBPACK_IMPORTED_MODULE_4__["templateQueryIdMap"].partition]
                };
              })
            };
            return [4
            /*yield*/
            , _common_datasourceStorage__WEBPACK_IMPORTED_MODULE_5__["default"].setExtraStorage(this.service, this.keyInStorage.TopicList, TopicList)];

          case 2:
            _a.sent();

            return [4
            /*yield*/
            , _common_datasourceStorage__WEBPACK_IMPORTED_MODULE_5__["default"].setExtraStorage(this.service, this.keyInStorage.GroupList, GroupList)];

          case 3:
            _a.sent();

            return [4
            /*yield*/
            , _common_datasourceStorage__WEBPACK_IMPORTED_MODULE_5__["default"].setExtraStorage(this.service, this.keyInStorage.PartitionList, PartitionList)];

          case 4:
            _a.sent(); // console.log({ res1, res2, res3 });
            // console.log({rs});
            // 根据action返回指定的维度数据列表


            switch (action) {
              case 'DescribeTopicList':
                return [2
                /*return*/
                , rs.TopicList];

              case 'DescribeGroup':
                return [2
                /*return*/
                , rs.GroupList];

              case 'DescribePartion':
                return [2
                /*return*/
                , rs.PartitionList];

              default:
                return [2
                /*return*/
                , []];
            }

            return [2
            /*return*/
            ];
        }
      });
    });
  };

  return CKFKADatasource;
}(_base_datasource__WEBPACK_IMPORTED_MODULE_3__["BaseDatasource"]);

/* harmony default export */ __webpack_exports__["default"] = (CKFKADatasource);

/***/ }),

/***/ "./datasource/tc_monitor/ckafka/query.ts":
/*!***********************************************!*\
  !*** ./datasource/tc_monitor/ckafka/query.ts ***!
  \***********************************************/
/*! exports provided: CKAFKAQueryCtrl, scfQuery */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CKAFKAQueryCtrl", function() { return CKAFKAQueryCtrl; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "scfQuery", function() { return scfQuery; });
/* harmony import */ var grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! grafana/app/core/core_module */ "grafana/app/core/core_module");
/* harmony import */ var grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _query_def__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./query_def */ "./datasource/tc_monitor/ckafka/query_def.ts");
/* harmony import */ var _common_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../common/utils */ "./datasource/common/utils.ts");
var __awaiter = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {
  function adopt(value) {
    return value instanceof P ? value : new P(function (resolve) {
      resolve(value);
    });
  }

  return new (P || (P = Promise))(function (resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }

    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }

    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }

    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};

var __generator = undefined && undefined.__generator || function (thisArg, body) {
  var _ = {
    label: 0,
    sent: function sent() {
      if (t[0] & 1) throw t[1];
      return t[1];
    },
    trys: [],
    ops: []
  },
      f,
      y,
      t,
      g;
  return g = {
    next: verb(0),
    "throw": verb(1),
    "return": verb(2)
  }, typeof Symbol === "function" && (g[Symbol.iterator] = function () {
    return this;
  }), g;

  function verb(n) {
    return function (v) {
      return step([n, v]);
    };
  }

  function step(op) {
    if (f) throw new TypeError("Generator is already executing.");

    while (_) {
      try {
        if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
        if (y = 0, t) op = [op[0] & 2, t.value];

        switch (op[0]) {
          case 0:
          case 1:
            t = op;
            break;

          case 4:
            _.label++;
            return {
              value: op[1],
              done: false
            };

          case 5:
            _.label++;
            y = op[1];
            op = [0];
            continue;

          case 7:
            op = _.ops.pop();

            _.trys.pop();

            continue;

          default:
            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
              _ = 0;
              continue;
            }

            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
              _.label = op[1];
              break;
            }

            if (op[0] === 6 && _.label < t[1]) {
              _.label = t[1];
              t = op;
              break;
            }

            if (t && _.label < t[2]) {
              _.label = t[2];

              _.ops.push(op);

              break;
            }

            if (t[2]) _.ops.pop();

            _.trys.pop();

            continue;
        }

        op = body.call(thisArg, _);
      } catch (e) {
        op = [6, e];
        y = 0;
      } finally {
        f = t = 0;
      }
    }

    if (op[0] & 5) throw op[1];
    return {
      value: op[0] ? op[1] : void 0,
      done: true
    };
  }
};




var ExtraFields = [{
  label: 'ConsumerGroup',
  field: 'consumerGroup'
}, {
  label: 'TopicId',
  field: 'topicId'
}, {
  label: 'Partition',
  field: 'partition'
}];

var CKAFKAQueryCtrl =
/** @class */
function () {
  CKAFKAQueryCtrl.$inject = ["$scope", "$rootScope"];

  /** @ngInject */
  function CKAFKAQueryCtrl($scope, $rootScope) {
    var _this = this;

    $scope.init = function () {
      $scope.CKAFKAQueryDescriptor = _query_def__WEBPACK_IMPORTED_MODULE_1__["CKAFKAQueryDescriptor"];
    };

    $scope.getDropdown = function (field) {
      switch (field) {
        default:
          return [];
      }
    };

    $scope.onInstanceChange = function (n, o) {
      if (Object(_common_utils__WEBPACK_IMPORTED_MODULE_2__["isTargetEqual"])(n, o, 'LoadBalancerId')) return;
      $scope.target.consumerGroup = '';
      $scope.target.topicId = '';
      $scope.target.topicName = '';
      $scope.target.partition = '';
    };

    $scope.getExtraFields = function () {
      return ExtraFields.filter(function (item) {
        var _a;

        return item.field in ((_a = $scope.dims) !== null && _a !== void 0 ? _a : {});
      });
    };

    $scope.getInstanceId = function () {
      var instance = $scope.target.instance;
      instance = $scope.datasource.getServiceFn('ckafka', 'getVariable')(instance);
      if (Array.isArray(instance)) instance = instance[0];

      if (!instance) {
        return '';
      }

      try {
        instance = JSON.parse(instance).InstanceId;
      } catch (error) {// console.log();
      }

      return instance;
    };

    $scope.getExtraDropdown = function (target, field) {
      return __awaiter(_this, void 0, void 0, function () {
        var InstanceId, fetcher, region, res, TopicList, GroupList, PartitionList, data;
        return __generator(this, function (_a) {
          switch (_a.label) {
            case 0:
              InstanceId = $scope.getInstanceId();
              fetcher = $scope.datasource.getServiceFn('ckafka', 'getConsumerGroups');
              region = $scope.datasource.getServiceFn('ckafka', 'getVariable')(target.region);
              return [4
              /*yield*/
              , fetcher(region, {
                InstanceId: InstanceId,
                groupname: target.consumerGroup,
                topicid: target.topicId
              })];

            case 1:
              res = _a.sent();
              TopicList = res.TopicList, GroupList = res.GroupList, PartitionList = res.PartitionList;
              data = {
                GroupList: GroupList.map(function (group) {
                  group._InstanceAliasValue = group.GroupName;
                  return {
                    text: group.GroupName,
                    value: JSON.stringify(group)
                  };
                }),
                TopicList: TopicList.map(function (topic) {
                  topic._InstanceAliasValue = topic[_query_def__WEBPACK_IMPORTED_MODULE_1__["templateQueryIdMap"].topicId];
                  return {
                    text: topic[_query_def__WEBPACK_IMPORTED_MODULE_1__["templateQueryIdMap"].topicId],
                    value: JSON.stringify(topic) // 为了获取多维度的值，这里完全可以使用JSON.stringify()将整个对象放进去

                  };
                }),
                PartitionList: PartitionList.map(function (par) {
                  par._InstanceAliasValue = par[_query_def__WEBPACK_IMPORTED_MODULE_1__["templateQueryIdMap"].partition];
                  return {
                    text: String(par[_query_def__WEBPACK_IMPORTED_MODULE_1__["templateQueryIdMap"].partition]),
                    value: JSON.stringify(par)
                  };
                })
              };

              switch (field) {
                case 'consumerGroup':
                  return [2
                  /*return*/
                  , data.GroupList];

                case 'topicId':
                  return [2
                  /*return*/
                  , data.TopicList];

                case 'partition':
                  return [2
                  /*return*/
                  , data.PartitionList];
              }

              return [2
              /*return*/
              ];
          }
        });
      });
    };

    $scope.init();
  }

  return CKAFKAQueryCtrl;
}();


var template = "\n<div>\n<div class=\"tc-sub-params\" ng-if=\"showDetail\">\n  <label class=\"gf-form-label tc-info-label\">\n    Functions are queried by following params.\n    <a target=\"_blank\" style=\"text-decoration:underline;color:#006eff;font-size:medium\" href=\"https://cloud.tencent.com/document/api/583/18582\">Click here to get API doc.</a>\n  </label>\n  <div class=\"gf-form-inline\" ng-repeat=\"field in CKAFKAQueryDescriptor\">\n    <div class=\"gf-form\">\n      <label class=\"gf-form-label width-14\">\n        {{ field.key }}\n        <info-popover mode=\"right-normal\">\n          {{ field.cnDescriptor }}\n          <a target=\"_blank\" href=\"{{field.link}}\" ng-if=\"field.link\">Click here for more information.</a>\n        </info-popover>\n      </label>\n      <input\n        ng-if=\"field.type === 'inputnumber'\"\n        style=\"margin-right:2px\"\n        type=\"number\"\n        ng-model=\"target.queries[field.key]\"\n        ng-change=\"onChange()\"\n        class=\"gf-form-input width-10\"\n        ng-min=\"field.min\"\n        ng-max=\"field.max\"\n      />\n      <input\n        ng-if=\"field.type === 'input'\"\n        style=\"margin-right:2px\"\n        type=\"text\"\n        ng-model=\"target.queries[field.key]\"\n        ng-change=\"onChange()\"\n        class=\"gf-form-input width-10\"\n      />\n      <multi-condition\n        ng-if=\"field.type === 'inputmulti'\"\n        type=\"'input'\"\n        value=\"target.queries[field.key]\"\n        on-change=\"onChange()\"\n      ></multi-condition>\n      <multi-condition\n        ng-if=\"field.type === 'dropdownmulti'\"\n        type=\"'dropdown'\"\n        value=\"target.queries[field.key]\"\n        on-change=\"onChange()\"\n        get-options=\"getDropdown(field.key)\"\n      ></multi-condition>\n      <custom-select-dropdown\n        ng-if=\"field.type === 'select'\"\n        value=\"target.queries[field.key]\"\n        options=\"field.list\"\n        multiple=\"field.multiple || false\"\n        on-change=\"onChange()\"\n      ></custom-select-dropdown>\n    </div>\n  </div>\n</div>\n\n<!-- \u4E3B\u9898\uFF0C\u6D88\u8D39\u5206\u7EC4\uFF0C\u5206\u533A -->\n  <div ng-if=\"target.instance\">\n    <div class=\"gf-form-inline\" ng-repeat=\"extra in getExtraFields()\">\n      <div class=\"gf-form\">\n        <label class=\"gf-form-label query-keyword width-9\">{{extra.label}}</label>\n        <div class=\"gf-form-select-wrapper gf-form-select-wrapper--caret-indent\">\n          <gf-form-dropdown model=\"target[extra.field]\" allow-custom=\"true\" lookup-text=\"true\" get-options=\"getExtraDropdown(target, extra.field)\"\n            on-change=\"onRefresh()\" css-class=\"min-width-10\">\n          </gf-form-dropdown>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  </div>\n";
function scfQuery() {
  return {
    template: template,
    controller: CKAFKAQueryCtrl,
    restrict: 'E',
    scope: {
      target: '=',
      showDetail: '=',
      region: '=',
      datasource: '=',
      getDropdownOptions: '&',
      onChange: '&',
      onRefresh: '&',
      dims: '=',
      instance: '='
    },
    link: function link(scope, element, attrs) {
      scope.$watch('target.instance', function (newValue, oldValue) {
        var _a;

        (_a = scope.onInstanceChange) === null || _a === void 0 ? void 0 : _a.call(scope, newValue, oldValue);
      });
    }
  };
}
grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0___default.a.directive('ckafkaQuery', scfQuery);

/***/ }),

/***/ "./datasource/tc_monitor/ckafka/query_def.ts":
/*!***************************************************!*\
  !*** ./datasource/tc_monitor/ckafka/query_def.ts ***!
  \***************************************************/
/*! exports provided: CKAFKAQueryDescriptor, default, CKAFKAInstanceAliasList, CKAFKATopicAliasList, CKAFKAInvalidDemensions, templateQueryIdMap, keyInStorage, queryMonitorExtraConfg, CKAFKAGetInstanceQueryParams */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CKAFKAQueryDescriptor", function() { return CKAFKAQueryDescriptor; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CKAFKAInstanceAliasList", function() { return CKAFKAInstanceAliasList; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CKAFKATopicAliasList", function() { return CKAFKATopicAliasList; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CKAFKAInvalidDemensions", function() { return CKAFKAInvalidDemensions; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "templateQueryIdMap", function() { return templateQueryIdMap; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "keyInStorage", function() { return keyInStorage; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "queryMonitorExtraConfg", function() { return queryMonitorExtraConfg; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CKAFKAGetInstanceQueryParams", function() { return GetInstanceQueryParams; });
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lodash */ "lodash");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__);

var CKAFKAQueryDescriptor = [{
  key: 'Offset',
  enDescriptor: 'Offset',
  cnDescriptor: '偏移量, 例如Offset=20&Limit=20 返回第 20 到 40 项',
  link: '',
  type: 'inputnumber',
  min: 0
}, {
  key: 'Limit',
  enDescriptor: 'Limit',
  cnDescriptor: '单次请求返回的数量，默认为10，最小值为1，最大值为100',
  link: '',
  type: 'inputnumber',
  min: 1,
  max: 100
}, {
  key: 'InstanceId',
  enDescriptor: 'InstanceId',
  cnDescriptor: '按照实例ID过滤',
  link: '',
  type: 'input'
}, {
  key: 'SearchWord',
  enDescriptor: 'SearchWord',
  cnDescriptor: '按照实例名称过滤，支持模糊查询',
  link: '',
  type: 'input'
}, {
  key: 'TagKey',
  enDescriptor: 'TagKey',
  cnDescriptor: '匹配标签key值',
  link: '',
  type: 'input'
}, {
  key: 'Status',
  enDescriptor: 'Status',
  cnDescriptor: '实例的状态，不填默认返回全部',
  link: '',
  type: 'select',
  multiple: true,
  list: [{
    text: '创建中',
    value: 0
  }, {
    text: '运行中',
    value: 1
  }, {
    text: '删除中',
    value: 2
  }]
}];
var CKAFKA_STATE = {
  region: '',
  metricName: '',
  metricUnit: '',
  period: undefined,
  dimensionObject: null,
  instance: '',
  instanceAlias: 'InstanceId',
  topicId: '',
  topicName: '',
  consumerGroup: '',
  partition: '',
  queries: {
    Offset: 0,
    Limit: 10,
    Status: [],
    InstanceId: '',
    SearchWord: '',
    TagKey: ''
  }
};

function GetInstanceQueryParams(queries) {
  if (queries === void 0) {
    queries = {};
  }

  var params = {};

  if (!lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isEmpty(queries)) {
    params.Limit = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(queries, 'Limit', 20) || 20;
    params.Offset = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(queries, 'Offset', 0) || 0;
    queries = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.omit(queries, ['Offset', 'Limit']);

    lodash__WEBPACK_IMPORTED_MODULE_0___default.a.forEach(queries, function (item, key) {
      if (lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isArray(item)) {
        item = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.compact(item);

        if (item.length > 0) {
          params[key] = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.uniq(item);
        }
      } else if (lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isObject(item)) {
        if (lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isNumber(lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(item, 'value', undefined)) || !lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isEmpty(lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(item, 'value', undefined))) {
          params[key] = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(item, 'value');
        }
      } else if (lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isNumber(item) || !lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isEmpty(item)) {
        params[key] = item;
      }
    });
  }

  return params;
}

var CKAFKAInstanceAliasList = ['InstanceId', 'InstanceName'];
var CKAFKATopicAliasList = ['TopicId', 'TopicName']; // 保存在模板变量value中的key

var templateQueryIdMap = {
  instance: 'InstanceId',
  topicId: 'TopicId',
  groupName: 'GroupName',
  partition: 'PartitionId'
}; // 向实例里面塞dimensions对应的值，dimension中的key对应到实例中的key

var CKAFKAInvalidDemensions = new Proxy({
  topicId: 'TopicId',
  topicName: 'TopicName',
  consumerGroup: 'GroupName',
  partition: 'PartitionId'
}, {
  get: function get(obj, prop) {
    if (String(prop).toLocaleLowerCase() === 'instanceid') return 'InstanceId';
    return obj[prop];
  }
}); // 需要缓存到storage的内容的key列表

var keyInStorage = {
  TopicList: 'TopicList',
  GroupList: 'GroupList',
  PartitionList: 'PartitionList'
};
/*
如果有InstanceId额外的维度，原则上都需要传入此map结构配置
key的含义：
  经过InvalidDemensions处理后的string。topicId =》TopicId。
  否则认为指标中维度正确，和指标中维度字段保持一致，即topicId
value的含义：
  1 dim_KeyInStorage 指标中维度dimension对应的storage中的key，获取缓存列表，sourceMapList、
  2 dim_KeyInTarget  通过getVariable方法获取变量中选中项。比如ListnerId为Lis-xxxx；即：STATE中的key。
                    默认取通过InvalidDemsion处理后的key
  3 dim_KeyInMap     保存在模板变量value比如（监听器ID）源自sourceMapList（接口返回内容）的哪个key（ListenerId）。
                    即：templateQueryIdMap中内容。
                    联合上面2的内容筛选出原始sourceMap
*/

var queryMonitorExtraConfg = {
  TopicId: {
    dim_KeyInStorage: keyInStorage.TopicList,
    dim_KeyInTarget: 'topicId',
    dim_KeyInMap: templateQueryIdMap.topicId
  },
  // topicName和topicId是同一个storage中的source，所以根据topicId帅选
  TopicName: {
    dim_KeyInStorage: keyInStorage.TopicList,
    dim_KeyInTarget: 'topicId',
    dim_KeyInMap: templateQueryIdMap.topicId
  },
  GroupName: {
    dim_KeyInStorage: keyInStorage.GroupList,
    dim_KeyInTarget: 'consumerGroup',
    dim_KeyInMap: templateQueryIdMap.groupName
  },
  PartitionId: {
    dim_KeyInStorage: keyInStorage.PartitionList,
    dim_KeyInTarget: 'partition',
    dim_KeyInMap: templateQueryIdMap.partition
  }
};
/* harmony default export */ __webpack_exports__["default"] = (CKAFKA_STATE);


/***/ }),

/***/ "./datasource/tc_monitor/clb/datasource.ts":
/*!*************************************************!*\
  !*** ./datasource/tc_monitor/clb/datasource.ts ***!
  \*************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _query_def__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./query_def */ "./datasource/tc_monitor/clb/query_def.ts");
/* harmony import */ var _base_datasource__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../_base/datasource */ "./datasource/tc_monitor/_base/datasource.ts");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lodash */ "lodash");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _common_constants__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../common/constants */ "./datasource/common/constants.ts");
/* harmony import */ var _common_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../common/utils */ "./datasource/common/utils.ts");
/* harmony import */ var _common_datasourceStorage__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../common/datasourceStorage */ "./datasource/common/datasourceStorage.ts");
var __extends = undefined && undefined.__extends || function () {
  var _extendStatics = function extendStatics(d, b) {
    _extendStatics = Object.setPrototypeOf || {
      __proto__: []
    } instanceof Array && function (d, b) {
      d.__proto__ = b;
    } || function (d, b) {
      for (var p in b) {
        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];
      }
    };

    return _extendStatics(d, b);
  };

  return function (d, b) {
    if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");

    _extendStatics(d, b);

    function __() {
      this.constructor = d;
    }

    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();

var __assign = undefined && undefined.__assign || function () {
  __assign = Object.assign || function (t) {
    for (var s, i = 1, n = arguments.length; i < n; i++) {
      s = arguments[i];

      for (var p in s) {
        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
      }
    }

    return t;
  };

  return __assign.apply(this, arguments);
};

var __awaiter = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {
  function adopt(value) {
    return value instanceof P ? value : new P(function (resolve) {
      resolve(value);
    });
  }

  return new (P || (P = Promise))(function (resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }

    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }

    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }

    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};

var __generator = undefined && undefined.__generator || function (thisArg, body) {
  var _ = {
    label: 0,
    sent: function sent() {
      if (t[0] & 1) throw t[1];
      return t[1];
    },
    trys: [],
    ops: []
  },
      f,
      y,
      t,
      g;
  return g = {
    next: verb(0),
    "throw": verb(1),
    "return": verb(2)
  }, typeof Symbol === "function" && (g[Symbol.iterator] = function () {
    return this;
  }), g;

  function verb(n) {
    return function (v) {
      return step([n, v]);
    };
  }

  function step(op) {
    if (f) throw new TypeError("Generator is already executing.");

    while (_) {
      try {
        if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
        if (y = 0, t) op = [op[0] & 2, t.value];

        switch (op[0]) {
          case 0:
          case 1:
            t = op;
            break;

          case 4:
            _.label++;
            return {
              value: op[1],
              done: false
            };

          case 5:
            _.label++;
            y = op[1];
            op = [0];
            continue;

          case 7:
            op = _.ops.pop();

            _.trys.pop();

            continue;

          default:
            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
              _ = 0;
              continue;
            }

            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
              _.label = op[1];
              break;
            }

            if (op[0] === 6 && _.label < t[1]) {
              _.label = t[1];
              t = op;
              break;
            }

            if (t && _.label < t[2]) {
              _.label = t[2];

              _.ops.push(op);

              break;
            }

            if (t[2]) _.ops.pop();

            _.trys.pop();

            continue;
        }

        op = body.call(thisArg, _);
      } catch (e) {
        op = [6, e];
        y = 0;
      } finally {
        f = t = 0;
      }
    }

    if (op[0] & 5) throw op[1];
    return {
      value: op[0] ? op[1] : void 0,
      done: true
    };
  }
};








var DCDatasource =
/** @class */
function (_super) {
  __extends(DCDatasource, _super);

  function DCDatasource(instanceSettings, backendSrv, templateSrv) {
    var _this = _super.call(this, instanceSettings, backendSrv, templateSrv) || this; // Namespace = namespace;


    _this.InstanceAliasList = _query_def__WEBPACK_IMPORTED_MODULE_0__["InstanceAliasList"];
    _this.ListenerAliasList = _query_def__WEBPACK_IMPORTED_MODULE_0__["LOADBALANCEListenerAliasList"];
    _this.ServerAliasList = _query_def__WEBPACK_IMPORTED_MODULE_0__["LOADBALANCEServerAliasList"];
    _this.CandiateDimensions = _query_def__WEBPACK_IMPORTED_MODULE_0__["CANDIATEDIMENSIONS"]; // InvalidDimensions = LOADBALANCEVALIDDIMENSIONS;

    _this.templateQueryIdMap = _query_def__WEBPACK_IMPORTED_MODULE_0__["templateQueryIdMap"]; // 此处service是接口的配置参数，需和plugin.json里一致，和constant.ts中SERVICES_API_INFO保持一致
    // InstanceReqConfig = {
    //   service: 'clb',
    //   action: 'DescribeLoadBalancers',
    //   responseField: 'LoadBalancerSet',
    // };

    _this.keyInStorage = _query_def__WEBPACK_IMPORTED_MODULE_0__["keyInStorage"];
    _this.queryMonitorExtraConfg = _query_def__WEBPACK_IMPORTED_MODULE_0__["queryMonitorExtraConfg"];
    return _this;
  } // getFilterDropdown({ field }) {
  //   return super.getRegions();
  // }


  DCDatasource.prototype.getInvalidDimensions = function (selfIns, tagret) {
    if (selfIns.service === 'lbPrivate' || selfIns.service === 'lbPublic' && tagret.servers) return __assign(__assign({}, _query_def__WEBPACK_IMPORTED_MODULE_0__["LOADBALANCEVALIDDIMENSIONS"]), {
      vpcId: 'NumericalVpcId'
    });
    return _query_def__WEBPACK_IMPORTED_MODULE_0__["LOADBALANCEVALIDDIMENSIONS"];
  };

  DCDatasource.prototype.getInstanceReqConfig = function (selfIns) {
    var res = {
      service: 'clb',
      action: 'DescribeLoadBalancers',
      responseField: 'LoadBalancerSet'
    };

    if (selfIns.service === 'lbPrivate' || selfIns.service === 'loadBalance') {
      res.interceptor = {
        request: function request(param) {
          return __assign(__assign({}, param), {
            LoadBalancerType: 'INTERNAL'
          });
        }
      };
    }

    if (selfIns.service === 'lbPublic') {
      res.interceptor = {
        request: function request(param) {
          return __assign(__assign({}, param), {
            LoadBalancerType: 'OPEN'
          });
        }
      };
    }

    return res;
  };

  DCDatasource.prototype.getListenerList = function (params) {
    return __awaiter(this, void 0, void 0, function () {
      var region, instanceId, serviceInfo, res, rs;

      var _this = this;

      return __generator(this, function (_a) {
        switch (_a.label) {
          case 0:
            region = params.region, instanceId = params.instanceId;
            serviceInfo = Object(_common_constants__WEBPACK_IMPORTED_MODULE_3__["GetServiceAPIInfo"])(region, 'clb');
            return [4
            /*yield*/
            , Object(_common_utils__WEBPACK_IMPORTED_MODULE_4__["fetchAllFactory"])(function (data) {
              return _this.doRequest({
                url: _this.url + serviceInfo.path,
                data: data
              }, serviceInfo.service, {
                region: region,
                action: 'DescribeListeners'
              });
            }, {
              LoadBalancerId: instanceId
            }, 'Listeners')];

          case 1:
            res = _a.sent();
            rs = res[0];
            return [2
            /*return*/
            , rs];
        }
      });
    });
  };

  DCDatasource.prototype.formatVariableDisplay = function (data, displayTpl, alias, aliasList) {
    var _this = this;

    if (displayTpl) {
      return displayTpl.replace(/\$\{(\w+)\}/g, function (a, b) {
        if (!b || !aliasList.includes(b)) {
          return '';
        }

        return _this.getAliasValue(data, b);
      });
    }

    return this.getAliasValue(data, alias);
  };

  DCDatasource.prototype.getServerList = function (params) {
    return __awaiter(this, void 0, void 0, function () {
      var region, instanceId, listenerId, serviceInfo, res, Listeners, serversList;
      return __generator(this, function (_a) {
        switch (_a.label) {
          case 0:
            region = params.region, instanceId = params.instanceId, listenerId = params.listenerId;
            serviceInfo = Object(_common_constants__WEBPACK_IMPORTED_MODULE_3__["GetServiceAPIInfo"])(region, 'clb');
            return [4
            /*yield*/
            , this.doRequest({
              url: this.url + serviceInfo.path,
              data: {
                LoadBalancerId: instanceId,
                ListenerIds: [listenerId]
              }
            }, serviceInfo.service, {
              region: region,
              action: 'DescribeTargets'
            })];

          case 1:
            res = _a.sent();
            Listeners = res.Listeners;
            serversList = lodash__WEBPACK_IMPORTED_MODULE_2___default.a.reduce(Listeners, function (prev, item) {
              var Rules = item.Rules,
                  Targets = item.Targets;

              if (!lodash__WEBPACK_IMPORTED_MODULE_2___default.a.isEmpty(Rules)) {
                return lodash__WEBPACK_IMPORTED_MODULE_2___default.a.concat(prev, lodash__WEBPACK_IMPORTED_MODULE_2___default.a.flatten(lodash__WEBPACK_IMPORTED_MODULE_2___default.a.map(Rules, function (elem) {
                  return lodash__WEBPACK_IMPORTED_MODULE_2___default.a.isEmpty(elem.Targets) ? [] : elem.Targets;
                })));
              }

              if (!lodash__WEBPACK_IMPORTED_MODULE_2___default.a.isEmpty(Targets)) {
                return lodash__WEBPACK_IMPORTED_MODULE_2___default.a.concat(prev, Targets);
              }

              return prev;
            }, []);
            return [2
            /*return*/
            , serversList];
        }
      });
    });
  };

  DCDatasource.prototype.fetchMetricData = function (action, region, instance, query) {
    return __awaiter(this, void 0, void 0, function () {
      var display, rs, listeneralias_1, result, listenerid, serverprivateip, serveralias, serverPrivateIp_1, serversList, serverAlias_1, result;

      var _this = this;

      return __generator(this, function (_a) {
        switch (_a.label) {
          case 0:
            display = query.display;
            if (!(action === 'DescribeListeners')) return [3
            /*break*/
            , 3];
            return [4
            /*yield*/
            , this.getListenerList({
              region: region,
              instanceId: instance[this.templateQueryIdMap.instance]
            })];

          case 1:
            rs = _a.sent();
            listeneralias_1 = query.listeneralias;
            listeneralias_1 = this.ListenerAliasList.includes(listeneralias_1) ? listeneralias_1 : this.templateQueryIdMap.listener;
            result = rs.flatMap(function (o) {
              var listenAlias = _this.formatVariableDisplay(o, display, listeneralias_1, _this.ListenerAliasList);

              var lisId = o[_this.templateQueryIdMap.listener];
              o._InstanceAliasValue = listenAlias || lisId; // if (!o[listeneralias]) return [];

              return {
                text: listenAlias || lisId,
                value: lisId
              };
            });
            return [4
            /*yield*/
            , _common_datasourceStorage__WEBPACK_IMPORTED_MODULE_5__["default"].setExtraStorage(this.service, this.keyInStorage.listener, rs)];

          case 2:
            _a.sent();

            return [2
            /*return*/
            , result];

          case 3:
            if (!(action === 'DescribeServer' || action === 'DescribeServerPort')) return [3
            /*break*/
            , 6];
            listenerid = query.listenerid, serverprivateip = query.serverprivateip, serveralias = query.serveralias;
            serverPrivateIp_1 = this.getVariable(serverprivateip);
            return [4
            /*yield*/
            , this.getServerList({
              region: region,
              instanceId: instance[this.templateQueryIdMap.instance],
              listenerId: this.getVariable(listenerid)
            })];

          case 4:
            serversList = _a.sent();
            serverAlias_1 = this.ServerAliasList.includes(serveralias) ? serveralias : this.templateQueryIdMap.servers;
            result = lodash__WEBPACK_IMPORTED_MODULE_2___default.a.chain(serversList).filter(function (item) {
              if (action === 'DescribeServer') {
                return true;
              }

              return serverPrivateIp_1 === lodash__WEBPACK_IMPORTED_MODULE_2___default.a.get(item, 'PrivateIpAddresses.0');
            }).map(function (item) {
              var alias = _this.formatVariableDisplay(item, display, serverAlias_1, _this.ServerAliasList);

              var id = item[_this.templateQueryIdMap.servers][0];
              item._InstanceAliasValue = alias || id;
              return action === 'DescribeServer' ? {
                text: alias || id,
                value: id
              } : {
                text: "".concat(lodash__WEBPACK_IMPORTED_MODULE_2___default.a.get(item, 'Port')),
                value: lodash__WEBPACK_IMPORTED_MODULE_2___default.a.get(item, 'Port')
              };
            }).value();
            return [4
            /*yield*/
            , _common_datasourceStorage__WEBPACK_IMPORTED_MODULE_5__["default"].setExtraStorage(this.service, this.keyInStorage.servers, serversList)];

          case 5:
            _a.sent();

            return [2
            /*return*/
            , action === 'DescribeServer' ? result : lodash__WEBPACK_IMPORTED_MODULE_2___default.a.uniqBy(result, 'text')];

          case 6:
            return [2
            /*return*/
            , []];
        }
      });
    });
  };

  return DCDatasource;
}(_base_datasource__WEBPACK_IMPORTED_MODULE_1__["BaseDatasource"]);

/* harmony default export */ __webpack_exports__["default"] = (DCDatasource);

/***/ }),

/***/ "./datasource/tc_monitor/clb/query.ts":
/*!********************************************!*\
  !*** ./datasource/tc_monitor/clb/query.ts ***!
  \********************************************/
/*! exports provided: QueryCtrl, sQuery */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "QueryCtrl", function() { return QueryCtrl; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "sQuery", function() { return sQuery; });
/* harmony import */ var grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! grafana/app/core/core_module */ "grafana/app/core/core_module");
/* harmony import */ var grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lodash */ "lodash");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _query_def__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./query_def */ "./datasource/tc_monitor/clb/query_def.ts");
/* harmony import */ var _common_constants__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../common/constants */ "./datasource/common/constants.ts");
/* harmony import */ var _common_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../common/utils */ "./datasource/common/utils.ts");
var __awaiter = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {
  function adopt(value) {
    return value instanceof P ? value : new P(function (resolve) {
      resolve(value);
    });
  }

  return new (P || (P = Promise))(function (resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }

    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }

    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }

    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};

var __generator = undefined && undefined.__generator || function (thisArg, body) {
  var _ = {
    label: 0,
    sent: function sent() {
      if (t[0] & 1) throw t[1];
      return t[1];
    },
    trys: [],
    ops: []
  },
      f,
      y,
      t,
      g;
  return g = {
    next: verb(0),
    "throw": verb(1),
    "return": verb(2)
  }, typeof Symbol === "function" && (g[Symbol.iterator] = function () {
    return this;
  }), g;

  function verb(n) {
    return function (v) {
      return step([n, v]);
    };
  }

  function step(op) {
    if (f) throw new TypeError("Generator is already executing.");

    while (_) {
      try {
        if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
        if (y = 0, t) op = [op[0] & 2, t.value];

        switch (op[0]) {
          case 0:
          case 1:
            t = op;
            break;

          case 4:
            _.label++;
            return {
              value: op[1],
              done: false
            };

          case 5:
            _.label++;
            y = op[1];
            op = [0];
            continue;

          case 7:
            op = _.ops.pop();

            _.trys.pop();

            continue;

          default:
            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
              _ = 0;
              continue;
            }

            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
              _.label = op[1];
              break;
            }

            if (op[0] === 6 && _.label < t[1]) {
              _.label = t[1];
              t = op;
              break;
            }

            if (t && _.label < t[2]) {
              _.label = t[2];

              _.ops.push(op);

              break;
            }

            if (t[2]) _.ops.pop();

            _.trys.pop();

            continue;
        }

        op = body.call(thisArg, _);
      } catch (e) {
        op = [6, e];
        y = 0;
      } finally {
        f = t = 0;
      }
    }

    if (op[0] & 5) throw op[1];
    return {
      value: op[0] ? op[1] : void 0,
      done: true
    };
  }
};







var QueryCtrl =
/** @class */
function () {
  QueryCtrl.$inject = ["$scope", "$rootScope"];

  /** @ngInject */
  function QueryCtrl($scope, $rootScope) {
    var _this = this;

    $scope.init = function () {
      $scope.LOADBALANCEFieldsDescriptor = _query_def__WEBPACK_IMPORTED_MODULE_2__["LOADBALANCEFieldsDescriptor"];
      $scope.serversList = [];
    };

    $scope.onFieldChange = function (field) {
      $scope.onRefresh();
    };

    $scope.onInstanceChange = function (n, o) {
      if (Object(_common_utils__WEBPACK_IMPORTED_MODULE_4__["isTargetEqual"])(n, o, 'InstanceId')) return;
      $scope.target.listener = '';
      $scope.target.servers = '';
      $scope.target.serverPort = '';
    };

    $scope.getVariableId = function (data, type) {
      var variableData = data;
      var service = Object(_common_constants__WEBPACK_IMPORTED_MODULE_3__["GetServiceFromNamespace"])(_query_def__WEBPACK_IMPORTED_MODULE_2__["namespace"]);
      variableData = $scope.datasource.getServiceFn(service, 'getVariable')(variableData);

      if (!variableData) {
        return '';
      }

      try {
        variableData = JSON.parse(variableData)[_query_def__WEBPACK_IMPORTED_MODULE_2__["templateQueryIdMap"][type]];
      } catch (error) {// console.log();
      }

      return variableData;
    };

    $scope.getExtraDropdown = function (target) {
      return __awaiter(_this, void 0, void 0, function () {
        var instance, service, instanceId, region, rs, result;
        return __generator(this, function (_a) {
          switch (_a.label) {
            case 0:
              instance = $scope.target.instance;
              service = Object(_common_constants__WEBPACK_IMPORTED_MODULE_3__["GetServiceFromNamespace"])(_query_def__WEBPACK_IMPORTED_MODULE_2__["namespace"]);
              instanceId = $scope.getVariableId(instance, 'instance');
              region = $scope.datasource.getServiceFn(service, 'getVariable')(target.region);
              return [4
              /*yield*/
              , $scope.datasource.getServiceFn(service, 'getListenerList')({
                region: region,
                instanceId: instanceId
              })];

            case 1:
              rs = _a.sent();
              result = rs.map(function (o) {
                o._InstanceAliasValue = o[_query_def__WEBPACK_IMPORTED_MODULE_2__["templateQueryIdMap"].listener];
                return {
                  text: o[_query_def__WEBPACK_IMPORTED_MODULE_2__["templateQueryIdMap"].listener],
                  value: JSON.stringify(o)
                };
              });
              return [2
              /*return*/
              , result];
          }
        });
      });
    };

    $scope.getServersDropdown = function (target) {
      return __awaiter(_this, void 0, void 0, function () {
        var _a, instance, listener, service, instanceId, listenerId, region, serversList, res;

        return __generator(this, function (_b) {
          switch (_b.label) {
            case 0:
              _a = $scope.target, instance = _a.instance, listener = _a.listener;
              service = Object(_common_constants__WEBPACK_IMPORTED_MODULE_3__["GetServiceFromNamespace"])(_query_def__WEBPACK_IMPORTED_MODULE_2__["namespace"]);
              instanceId = $scope.getVariableId(instance, 'instance');
              listenerId = $scope.getVariableId(listener, 'listener');
              region = $scope.datasource.getServiceFn(service, 'getVariable')(target.region);
              return [4
              /*yield*/
              , $scope.datasource.getServiceFn(service, 'getServerList')({
                region: region,
                instanceId: instanceId,
                listenerId: listenerId
              })];

            case 1:
              serversList = _b.sent();
              $scope.serversList = serversList;
              res = Object(lodash__WEBPACK_IMPORTED_MODULE_1__["chain"])(serversList).map(function (item) {
                item._InstanceAliasValue = Object(lodash__WEBPACK_IMPORTED_MODULE_1__["get"])(item, 'PrivateIpAddresses.0');
                return {
                  text: Object(lodash__WEBPACK_IMPORTED_MODULE_1__["get"])(item, 'PrivateIpAddresses.0'),
                  value: JSON.stringify(item)
                };
              }).uniqBy('text').value();
              return [2
              /*return*/
              , res];
          }
        });
      });
    };

    $scope.getServerPortDropdown = function (target) {
      return __awaiter(_this, void 0, void 0, function () {
        var servers, serverPortList, serversSource_1;
        return __generator(this, function (_a) {
          servers = $scope.target.servers;
          serverPortList = [];

          try {
            serversSource_1 = JSON.parse(servers);
            serverPortList = Object(lodash__WEBPACK_IMPORTED_MODULE_1__["chain"])($scope.serversList).filter(function (item) {
              return Object(lodash__WEBPACK_IMPORTED_MODULE_1__["get"])(serversSource_1, 'PrivateIpAddresses.0') === Object(lodash__WEBPACK_IMPORTED_MODULE_1__["get"])(item, 'PrivateIpAddresses.0');
            }).map(function (item) {
              item._InstanceAliasValue = Object(lodash__WEBPACK_IMPORTED_MODULE_1__["get"])(item, 'Port');
              return {
                text: "".concat(Object(lodash__WEBPACK_IMPORTED_MODULE_1__["get"])(item, 'Port')),
                value: JSON.stringify(item)
              };
            }).value();
          } catch (error) {}

          return [2
          /*return*/
          , serverPortList];
        });
      });
    };

    $scope.init();
  }

  return QueryCtrl;
}();


var template = "\n<div>\n  <div class=\"tc-sub-params\" ng-if=\"showDetail\">\n    <label class=\"gf-form-label tc-info-label\">\n      Functions are queried by following params.\n      <a target=\"_blank\" style=\"text-decoration:underline;color:#006eff;font-size:medium\" href=\"https://cloud.tencent.com/document/api/214/30685\">Click here to get API doc.</a>\n    </label>\n    <div class=\"gf-form-inline\" ng-repeat=\"field in LOADBALANCEFieldsDescriptor\">\n      <div class=\"gf-form\">\n        <label class=\"gf-form-label width-14\">\n          {{ field.key }}\n          <info-popover mode=\"right-normal\">\n            {{ field.cnDescriptor }}\n            <a target=\"_blank\" href=\"{{field.link}}\" ng-if=\"field.link\">Click here for more information.</a>\n          </info-popover>\n        </label>\n        <input\n          ng-if=\"field.type === 'inputNumber'\"\n          style=\"margin-right:2px\"\n          type=\"number\"\n          ng-model=\"target.queries[field.key]\"\n          ng-change=\"onChange()\"\n          class=\"gf-form-input width-10\"\n          ng-min=\"field.min\"\n          ng-max=\"field.max\"\n        />\n        <input\n          ng-if=\"field.type === 'input'\"\n          style=\"margin-right:2px\"\n          type=\"text\"\n          ng-model=\"target.queries[field.key]\"\n          ng-change=\"onChange()\"\n          class=\"gf-form-input width-10\"\n        />\n        <multi-condition\n          ng-if=\"field.type === 'inputNumberMulti'\"\n          type=\"'inputNumber'\"\n          max-cond=\"5\"\n          value=\"target.queries.Filters[field.key]\"\n          maxNum=\"field.max\"\n          minNum=\"field.min\"\n          on-change=\"onChange()\"\n        ></multi-condition>\n        <multi-condition\n          ng-if=\"field.type === 'inputMulti'\"\n          type=\"'input'\"\n          value=\"target.queries[field.key]\"\n          on-change=\"onChange()\"\n        ></multi-condition>\n        <custom-select-dropdown\n          ng-if=\"field.type === 'select'\"\n          value=\"target.queries[field.key]\"\n          options=\"field.list\"\n          multiple=\"field.multiple || false\"\n          on-change=\"onChange()\"\n        ></custom-select-dropdown>\n      </div>\n    </div>\n  </div>\n</div>\n\n<!--Listener\u7EF4\u5EA6\u90E8\u5206-->\n<div class=\"gf-form-inline\" ng-if=\"target.instance\">\n  <div class=\"gf-form\">\n    <label class=\"gf-form-label query-keyword width-9\">\n      Listeners\n      <info-popover mode=\"right-normal\">\n        \u53EF\u4E0D\u9009\u62E9\u76D1\u542C\u5668\uFF0C\u8FD9\u65F6\u901A\u8FC7\u5B9E\u4F8B\u7EF4\u5EA6\u67E5\u8BE2\u76D1\u63A7\u6570\u636E\n      </info-popover>\n    </label>\n    <div class=\"gf-form-select-wrapper gf-form-select-wrapper--caret-indent\">\n      <gf-form-dropdown model=\"target.listener\" allow-custom=\"true\" lookup-text=\"true\" get-options=\"getExtraDropdown(target)\"\n        on-change=\"onRefresh()\" css-class=\"min-width-10\">\n      </gf-form-dropdown>\n    </div>\n  </div>\n</div>\n<div class=\"gf-form-inline\" ng-if=\"target.listener && namespace !== '".concat(_query_def__WEBPACK_IMPORTED_MODULE_2__["namespace"], "'\">\n  <div class=\"gf-form\">\n    <label class=\"gf-form-label query-keyword width-9\">Servers</label>\n    <div class=\"gf-form-select-wrapper gf-form-select-wrapper--caret-indent\">\n      <gf-form-dropdown model=\"target.servers\" allow-custom=\"true\" lookup-text=\"true\" get-options=\"getServersDropdown(target)\"\n        on-change=\"onRefresh()\" css-class=\"min-width-10\">\n      </gf-form-dropdown>\n    </div>\n  </div>\n</div>\n<div class=\"gf-form-inline\" ng-if=\"target.servers && namespace !== '").concat(_query_def__WEBPACK_IMPORTED_MODULE_2__["namespace"], "'\">\n  <div class=\"gf-form\">\n    <label class=\"gf-form-label query-keyword width-9\">ServerPort</label>\n    <div class=\"gf-form-select-wrapper gf-form-select-wrapper--caret-indent\">\n      <gf-form-dropdown model=\"target.serverPort\" allow-custom=\"true\" lookup-text=\"true\" get-options=\"getServerPortDropdown(target)\"\n        on-change=\"onRefresh()\" css-class=\"min-width-10\">\n      </gf-form-dropdown>\n    </div>\n  </div>\n</div>\n");
function sQuery() {
  return {
    template: template,
    controller: QueryCtrl,
    restrict: 'E',
    scope: {
      target: '=',
      namespace: '=',
      showDetail: '=',
      region: '=',
      datasource: '=',
      getDropdownOptions: '&',
      onChange: '&',
      onRefresh: '&',
      dims: '='
    },
    link: function link(scope, element, attrs) {
      scope.$watch('target.instance', function (newValue, oldValue) {
        var _a;

        (_a = scope.onInstanceChange) === null || _a === void 0 ? void 0 : _a.call(scope, newValue, oldValue);
      });
    }
  };
}
grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0___default.a.directive('clbQuery', sQuery);

/***/ }),

/***/ "./datasource/tc_monitor/clb/query_def.ts":
/*!************************************************!*\
  !*** ./datasource/tc_monitor/clb/query_def.ts ***!
  \************************************************/
/*! exports provided: default, LOADBALANCEFieldsDescriptor, InstanceAliasList, LOADBALANCEListenerAliasList, LOADBALANCEServerAliasList, LOADBALANCEVALIDDIMENSIONS, templateQueryIdMap, CANDIATEDIMENSIONS, queryMonitorExtraConfg, keyInStorage, queryEditorConfig, namespace, queryEditorName, GetInstanceQueryParams */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LOADBALANCEFieldsDescriptor", function() { return LOADBALANCEFieldsDescriptor; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "InstanceAliasList", function() { return InstanceAliasList; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LOADBALANCEListenerAliasList", function() { return LOADBALANCEListenerAliasList; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LOADBALANCEServerAliasList", function() { return LOADBALANCEServerAliasList; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LOADBALANCEVALIDDIMENSIONS", function() { return LOADBALANCEVALIDDIMENSIONS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "templateQueryIdMap", function() { return templateQueryIdMap; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CANDIATEDIMENSIONS", function() { return CANDIATEDIMENSIONS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "queryMonitorExtraConfg", function() { return queryMonitorExtraConfg; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "keyInStorage", function() { return keyInStorage; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "queryEditorConfig", function() { return queryEditorConfig; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "namespace", function() { return namespace; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "queryEditorName", function() { return queryEditorName; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GetInstanceQueryParams", function() { return GetInstanceQueryParams; });
/* harmony import */ var _common_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../common/utils */ "./datasource/common/utils.ts");

var namespace = 'QCE/LOADBALANCE'; // 组件名称。这里名字要和index.ts中的SERVICES对应，后面会根据SERVICES中service字段拼接这个query组件名称

var queryEditorName = 'loadBalanceQuery';
var ForwardTypes = [{
  text: '通用的负载均衡',
  value: 1
}, {
  text: '传统的负载均衡',
  value: 0
}];
var OrderBy = [{
  text: 'LoadBalancerName',
  value: 'LoadBalancerName'
}, {
  text: 'CreateTime',
  value: 'CreateTime'
}, {
  text: 'Domain',
  value: 'Domain'
}, {
  text: 'LoadBalancerType',
  value: 'LoadBalancerType'
}];
var OrderType = [{
  text: '升序',
  value: 0
}, {
  text: '降序',
  value: 1
}];
var WithRs = [{
  text: '没有绑定后端服务',
  value: 0
}, {
  text: '绑定后端服务',
  value: 1
}, {
  text: '查询全部',
  value: -1
}];
var LOADBALANCEFieldsDescriptor = [{
  key: 'Offset',
  enDescriptor: 'Offset',
  cnDescriptor: '偏移量, 例如Offset=20&Limit=20 返回第 20 到 40 项',
  link: '',
  type: 'inputNumber',
  min: 0
}, {
  key: 'Limit',
  enDescriptor: 'Limit',
  cnDescriptor: '单次请求返回的数量，默认为20，最小值为1',
  link: '',
  type: 'inputNumber',
  min: 1
}, {
  key: 'LoadBalancerIds',
  enDescriptor: 'LoadBalancer ID',
  cnDescriptor: '实例ID',
  link: '',
  type: 'inputMulti'
}, {
  key: 'LoadBalancerName',
  enDescriptor: 'LoadBalancer Name',
  cnDescriptor: '实例名称',
  link: '',
  type: 'input'
}, {
  key: 'Forward',
  enDescriptor: 'Forward',
  cnDescriptor: '负载均衡实例类型',
  link: '',
  type: 'select',
  list: ForwardTypes
}, {
  key: 'Domain',
  enDescriptor: 'Domain',
  cnDescriptor: '域名，腾讯云为负载均衡实例分配的域名，本参数仅对传统型公网负载均衡才有意义',
  link: '',
  type: 'input'
}, {
  key: 'LoadBalancerVips',
  enDescriptor: 'LoadBalancer Vips',
  cnDescriptor: '负载均衡实例的 VIP 地址',
  link: '',
  type: 'inputMulti'
}, {
  key: 'BackendPrivateIps',
  enDescriptor: 'BackendPrivate Ips',
  cnDescriptor: '负载均衡绑定的后端服务的内网 IP',
  link: '',
  type: 'inputMulti'
}, {
  key: 'BackendPublicIps',
  enDescriptor: 'BackendPublic Ips',
  cnDescriptor: '负载均衡绑定的后端服务的外网 IP',
  link: '',
  type: 'inputMulti'
}, {
  key: 'ProjectId',
  enDescriptor: 'Project ID',
  cnDescriptor: '负载均衡实例所属的项目 ID',
  link: '',
  type: 'inputNumber'
}, {
  key: 'VpcId',
  enDescriptor: 'Vpc ID',
  cnDescriptor: '负载均衡实例所属私有网络',
  link: '',
  type: 'input'
}, {
  key: 'SecurityGroup',
  enDescriptor: 'Security Group',
  cnDescriptor: '安全组ID',
  link: '',
  type: 'input'
}, {
  key: 'MasterZone',
  enDescriptor: 'Master Zone',
  cnDescriptor: '主可用区ID',
  link: '',
  type: 'input'
}, {
  key: 'WithRs',
  enDescriptor: 'WithRs',
  cnDescriptor: '负载均衡是否绑定后端服务',
  link: '',
  type: 'select',
  list: WithRs
}, {
  key: 'OrderBy',
  enDescriptor: 'OrderBy',
  cnDescriptor: '排序字段',
  link: '',
  type: 'select',
  list: OrderBy
}, {
  key: 'OrderType',
  enDescriptor: 'OrderByType',
  cnDescriptor: '排序方式',
  link: '',
  type: 'select',
  list: OrderType
}]; // 各产品实例列表detail配置

var queryEditorConfig = {
  instanceDocUrl: 'https://cloud.tencent.com/document/api/214/30685',
  namespace: namespace,
  fieldDescriptor: LOADBALANCEFieldsDescriptor
};
var LBFields = {
  LoadBalancerIds: [],
  Forward: undefined,
  LoadBalancerName: '',
  Domain: '',
  LoadBalancerVips: [],
  BackendPublicIps: [],
  BackendPrivateIps: [],
  Limit: 20,
  Offset: 0,
  ProjectId: undefined,
  WithRs: {},
  VpcId: '',
  SecurityGroup: '',
  MasterZone: '',
  OrderBy: {},
  OrderType: {}
};
var LOADBALANCE_STATE = {
  region: '',
  metricName: '',
  metricUnit: '',
  period: undefined,
  dimensionObject: null,
  instance: '',
  instanceAlias: 'LoadBalancerId',
  Port: '',
  Protocol: '',
  listener: '',
  servers: '',
  serverPort: '',
  // listenerAlias: 'ListenerId',
  queries: LBFields
}; // function GetInstanceQueryParams(queries: any = {}) {
//   const params: any = {};
//   if (!_.isEmpty(queries)) {
//     params.Limit = _.get(queries, 'Limit', 20) || 20;
//     params.Offset = _.get(queries, 'Offset', 0) || 0;
//     queries = _.omit(queries, ['Offset', 'Limit']);
//     _.forEach(queries, (item: any, key) => {
//       if (_.isArray(item)) {
//         item = _.compact(item);
//         if (item.length > 0) {
//           params[key] = _.uniq(item);
//         }
//       } else if (_.isObject(item)) {
//         if (_.isNumber(_.get(item, 'value', undefined)) || !_.isEmpty(_.get(item, 'value', undefined))) {
//           params[key] = _.get(item, 'value');
//         }
//       } else if (_.isNumber(item) || !_.isEmpty(item)) {
//         params[key] = item;
//       }
//     });
//   }
//   return params;
// }

function GetInstanceQueryParams(queries) {
  if (queries === void 0) {
    queries = {};
  }

  return Object(_common_utils__WEBPACK_IMPORTED_MODULE_0__["instanceQueryParamsBaseParse"])(queries, false);
}

var InstanceAliasList = ['LoadBalancerId', 'LoadBalancerName', 'LoadBalancerVips'];
var LOADBALANCEListenerAliasList = ['ListenerId', 'ListenerName', 'Port'];
var LOADBALANCEServerAliasList = ['PrivateIpAddresses', 'InstanceId'];
var LOADBALANCEVALIDDIMENSIONS = {
  vip: 'LoadBalancerVips',
  // vpcId: 'NumericalVpcId',
  loadBalancerPort: 'Port',
  protocol: 'Protocol',
  lanIp: 'PrivateIpAddresses',
  port: 'ServerPort'
}; // 对于ipv6类型，vip应该取AddressIPv6。

var CANDIATEDIMENSIONS = {
  LoadBalancerVips: 'AddressIPv6'
}; // dimensionObject[item] = { Name: item, Value: '' };
// const LOADBALANCE_INSTANCE_DIMENSIONOBJECTS = {
//   vip: { Name: 'vip', Value: '' },
// };
// const LOADBALANCE_LISTENER_DIMENSIONOBJECTS = {
//   vip: { Name: 'vip', Value: '' },
//   loadBalancerPort: { Name: 'loadBalancerPort', Value: '' },
//   protocol: { Name: 'protocol', Value: '' },
// };

var templateQueryIdMap = {
  instance: 'LoadBalancerId',
  listener: 'ListenerId',
  servers: 'PrivateIpAddresses',
  port: 'Port'
}; // 需要缓存到storage的内容的key列表

var keyInStorage = {
  listener: 'ListenerList',
  servers: 'ServersList'
};
/*
如果有InstanceId额外的维度，原则上都需要传入此map结构配置
key的含义：
  经过InvalidDemensions处理后的string。topicId =》TopicId。
  否则认为指标中维度正确，和指标中维度字段保持一致，即topicId
value的含义：
  1 dim_KeyInStorage 指标中维度dimension对应的storage中的key，获取缓存列表，sourceMapList、
  2 dim_KeyInTarget  通过getVariable方法获取变量中选中项。比如ListnerId为Lis-xxxx；即：STATE中的key。
                    默认取通过InvalidDemsion处理后的key
  3 dim_KeyInMap     保存在模板变量value比如（监听器ID）源自sourceMapList（接口返回内容）的哪个key（ListenerId）。
                    即：templateQueryIdMap中内容。
                    联合上面2的内容筛选出原始sourceMap
*/

var queryMonitorExtraConfg = {
  Port: {
    dim_KeyInStorage: keyInStorage.listener,
    dim_KeyInTarget: 'listener',
    dim_KeyInMap: templateQueryIdMap.listener
  },
  Protocol: {
    dim_KeyInStorage: keyInStorage.listener,
    dim_KeyInTarget: 'listener',
    dim_KeyInMap: templateQueryIdMap.listener
  },
  PrivateIpAddresses: {
    dim_KeyInStorage: keyInStorage.servers,
    dim_KeyInTarget: 'servers',
    dim_KeyInMap: templateQueryIdMap.servers
  },
  ServerPort: {
    dim_KeyInStorage: keyInStorage.servers,
    dim_KeyInTarget: 'serverPort',
    dim_KeyInIns: 'Port',
    dim_KeyInMap: templateQueryIdMap.port
  }
};
/* harmony default export */ __webpack_exports__["default"] = (LOADBALANCE_STATE);


/***/ }),

/***/ "./datasource/tc_monitor/cls/datasource.ts":
/*!*************************************************!*\
  !*** ./datasource/tc_monitor/cls/datasource.ts ***!
  \*************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _query_def__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./query_def */ "./datasource/tc_monitor/cls/query_def.ts");
/* harmony import */ var _base_datasource__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../_base/datasource */ "./datasource/tc_monitor/_base/datasource.ts");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lodash */ "lodash");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _locale__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../locale */ "./locale/index.ts");
var __extends = undefined && undefined.__extends || function () {
  var _extendStatics = function extendStatics(d, b) {
    _extendStatics = Object.setPrototypeOf || {
      __proto__: []
    } instanceof Array && function (d, b) {
      d.__proto__ = b;
    } || function (d, b) {
      for (var p in b) {
        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];
      }
    };

    return _extendStatics(d, b);
  };

  return function (d, b) {
    if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");

    _extendStatics(d, b);

    function __() {
      this.constructor = d;
    }

    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();

var __awaiter = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {
  function adopt(value) {
    return value instanceof P ? value : new P(function (resolve) {
      resolve(value);
    });
  }

  return new (P || (P = Promise))(function (resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }

    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }

    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }

    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};

var __generator = undefined && undefined.__generator || function (thisArg, body) {
  var _ = {
    label: 0,
    sent: function sent() {
      if (t[0] & 1) throw t[1];
      return t[1];
    },
    trys: [],
    ops: []
  },
      f,
      y,
      t,
      g;
  return g = {
    next: verb(0),
    "throw": verb(1),
    "return": verb(2)
  }, typeof Symbol === "function" && (g[Symbol.iterator] = function () {
    return this;
  }), g;

  function verb(n) {
    return function (v) {
      return step([n, v]);
    };
  }

  function step(op) {
    if (f) throw new TypeError("Generator is already executing.");

    while (_) {
      try {
        if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
        if (y = 0, t) op = [op[0] & 2, t.value];

        switch (op[0]) {
          case 0:
          case 1:
            t = op;
            break;

          case 4:
            _.label++;
            return {
              value: op[1],
              done: false
            };

          case 5:
            _.label++;
            y = op[1];
            op = [0];
            continue;

          case 7:
            op = _.ops.pop();

            _.trys.pop();

            continue;

          default:
            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
              _ = 0;
              continue;
            }

            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
              _.label = op[1];
              break;
            }

            if (op[0] === 6 && _.label < t[1]) {
              _.label = t[1];
              t = op;
              break;
            }

            if (t && _.label < t[2]) {
              _.label = t[2];

              _.ops.push(op);

              break;
            }

            if (t[2]) _.ops.pop();

            _.trys.pop();

            continue;
        }

        op = body.call(thisArg, _);
      } catch (e) {
        op = [6, e];
        y = 0;
      } finally {
        f = t = 0;
      }
    }

    if (op[0] & 5) throw op[1];
    return {
      value: op[0] ? op[1] : void 0,
      done: true
    };
  }
};






var DCDatasource =
/** @class */
function (_super) {
  __extends(DCDatasource, _super);

  function DCDatasource(instanceSettings, backendSrv, templateSrv) {
    var _this = _super.call(this, instanceSettings, backendSrv, templateSrv) || this;

    _this.Namespace = _query_def__WEBPACK_IMPORTED_MODULE_0__["namespace"];
    _this.InstanceAliasList = _query_def__WEBPACK_IMPORTED_MODULE_0__["CLSInstanceAliasList"];
    _this.InvalidDimensions = _query_def__WEBPACK_IMPORTED_MODULE_0__["CLSInvalidDemensions"];
    _this.templateQueryIdMap = _query_def__WEBPACK_IMPORTED_MODULE_0__["templateQueryIdMap"]; // 此处service是接口的配置参数，需和plugin.json里一致，和constant.ts中SERVICES_API_INFO保持一致

    _this.InstanceReqConfig = {
      service: 'cls',
      action: 'DescribeTopics',
      responseField: 'Topics'
    };
    return _this;
  } // getFilterDropdown({ field }) {
  //   return super.getRegions();
  // }


  DCDatasource.prototype.getRegions = function () {
    return Promise.resolve(_query_def__WEBPACK_IMPORTED_MODULE_0__["regionSupported"].map(function (_a) {
      var value = _a.value;
      return {
        value: value,
        text: Object(_locale__WEBPACK_IMPORTED_MODULE_3__["t"])(value)
      };
    }));
  }; // async getInstances(region, params = {}) {
  //   const superRes = await super.getInstances(region, params);
  //   console.log({ superRes });
  // }


  DCDatasource.prototype.getMetrics = function (region) {
    if (region === void 0) {
      region = 'ap-guangzhou';
    }

    return __awaiter(this, void 0, void 0, function () {
      var rawSet;
      return __generator(this, function (_a) {
        switch (_a.label) {
          case 0:
            return [4
            /*yield*/
            , _super.prototype.getMetrics.call(this, region)];

          case 1:
            rawSet = _a.sent();
            return [2
            /*return*/
            , lodash__WEBPACK_IMPORTED_MODULE_2___default.a.compact(rawSet.map(function (item) {
              return Object(_query_def__WEBPACK_IMPORTED_MODULE_0__["modifyDimensons"])(item);
            }))];
        }
      });
    });
  };

  return DCDatasource;
}(_base_datasource__WEBPACK_IMPORTED_MODULE_1__["BaseDatasource"]);

/* harmony default export */ __webpack_exports__["default"] = (DCDatasource);

/***/ }),

/***/ "./datasource/tc_monitor/cls/query.ts":
/*!********************************************!*\
  !*** ./datasource/tc_monitor/cls/query.ts ***!
  \********************************************/
/*! exports provided: QueryCtrl, sQuery */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "QueryCtrl", function() { return QueryCtrl; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "sQuery", function() { return sQuery; });
/* harmony import */ var grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! grafana/app/core/core_module */ "grafana/app/core/core_module");
/* harmony import */ var grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _query_def__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./query_def */ "./datasource/tc_monitor/cls/query_def.ts");



var QueryCtrl =
/** @class */
function () {
  QueryCtrl.$inject = ["$scope", "$rootScope"];

  /** @ngInject */
  function QueryCtrl($scope, $rootScope) {
    $scope.init = function () {
      $scope.GSEFilterFieldsDescriptor = _query_def__WEBPACK_IMPORTED_MODULE_1__["CLSFilterFieldsDescriptor"];
    };

    $scope.init();
  }

  return QueryCtrl;
}();


var template = "\n<div>\n<div class=\"tc-sub-params\" ng-if=\"showDetail\">\n  <label class=\"gf-form-label tc-info-label\">\n    Functions are queried by following params.\n    <a target=\"_blank\" style=\"text-decoration:underline;color:#006eff;font-size:medium\" href=\"https://cloud.tencent.com/document/product/248/45073\">Click here to get API doc.</a>\n  </label>\n  <div class=\"gf-form-inline\" ng-repeat=\"field in GSEFilterFieldsDescriptor\">\n    <div class=\"gf-form\">\n      <label class=\"gf-form-label width-14\">\n        {{ field.key }}\n        <info-popover mode=\"right-normal\">\n          {{ field.cnDescriptor }}\n          <a target=\"_blank\" href=\"{{field.link}}\" ng-if=\"field.link\">Click here for more information.</a>\n        </info-popover>\n      </label>\n      <input\n        ng-if=\"field.type === 'inputNumber'\"\n        style=\"margin-right:2px\"\n        type=\"number\"\n        ng-model=\"target.queries[field.key]\"\n        ng-change=\"onChange()\"\n        class=\"gf-form-input width-10\"\n        ng-min=\"field.min\"\n        ng-max=\"field.max\"\n      />\n      <input\n        ng-if=\"field.type === 'input'\"\n        style=\"margin-right:2px\"\n        type=\"text\"\n        ng-model=\"target.queries[field.key]\"\n        ng-change=\"onChange()\"\n        class=\"gf-form-input width-10\"\n      />    \n      <multi-condition\n        ng-if=\"field.type === 'inputNumberMulti'\"\n        type=\"'inputNumber'\"\n        max-cond=\"5\"\n        value=\"target.queries.Filters[field.key]\"\n        maxNum=\"field.max\"\n        minNum=\"field.min\"\n        on-change=\"onChange()\"\n      ></multi-condition>\n      <multi-condition\n        ng-if=\"field.type === 'inputMulti'\"\n        type=\"'input'\"\n        value=\"target.queries[field.key]\"\n        on-change=\"onChange()\"\n      ></multi-condition>\n      <custom-select-dropdown\n        ng-if=\"field.type === 'select'\"\n        value=\"target.queries[field.key]\"\n        options=\"field.list\"\n        multiple=\"field.multiple || false\"\n        on-change=\"onChange()\"\n      ></custom-select-dropdown>\n    </div>\n  </div>\n</div>\n\n<!-- \u8D77\u59CB\u533A\u57DF \u76EE\u7684\u533A\u57DF\u7B49 -->\n<div>\n  <div class=\"gf-form-inline\" >\n    <div class=\"gf-form\">\n      <label class=\"gf-form-label query-keyword width-9\">uin</label>\n      <input\n        style=\"margin-right:2px\"\n        type=\"text\"\n        ng-model=\"target.uin\"\n        ng-change=\"onChange()\"\n        class=\"gf-form-input width-10\"\n      />    \n    </div>\n  </div>\n</div>\n</div>\n";
function sQuery() {
  return {
    template: template,
    controller: QueryCtrl,
    restrict: 'E',
    scope: {
      target: '=',
      showDetail: '=',
      region: '=',
      datasource: '=',
      getDropdownOptions: '&',
      onChange: '&',
      onRefresh: '&',
      dims: '='
    }
  };
}
grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0___default.a.directive(_query_def__WEBPACK_IMPORTED_MODULE_1__["queryEditorName"], sQuery);

/***/ }),

/***/ "./datasource/tc_monitor/cls/query_def.ts":
/*!************************************************!*\
  !*** ./datasource/tc_monitor/cls/query_def.ts ***!
  \************************************************/
/*! exports provided: default, CLSFilterFieldsDescriptor, templateQueryIdMap, CLSInstanceAliasList, CLSInvalidDemensions, namespace, queryEditorName, queryEditorConfig, regionSupported, modifyDimensons, CLSGetInstanceQueryParams */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CLSFilterFieldsDescriptor", function() { return CLSFilterFieldsDescriptor; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "templateQueryIdMap", function() { return templateQueryIdMap; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CLSInstanceAliasList", function() { return CLSInstanceAliasList; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CLSInvalidDemensions", function() { return CLSInvalidDemensions; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "namespace", function() { return namespace; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "queryEditorName", function() { return queryEditorName; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "queryEditorConfig", function() { return queryEditorConfig; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "regionSupported", function() { return regionSupported; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "modifyDimensons", function() { return modifyDimensons; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CLSGetInstanceQueryParams", function() { return GetInstanceQueryParams; });
/* harmony import */ var _common_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../common/utils */ "./datasource/common/utils.ts");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lodash */ "lodash");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_1__);


var namespace = 'QCE/CLS';
var queryEditorName = 'clsQuery';
var CLSInvalidDemensions = {// instanceid: 'TopicId',
}; // 需和文件名对应

var CLSInstanceAliasList = ['TopicId', 'TopicName'];
var templateQueryIdMap = {
  instance: 'TopicId'
}; // 需要缓存到storage的内容的key列表
// const keyInStorage = {
//   fleet: 'fleet', // 实例队列
//   queue: 'queueName', // 会话队列
// };

/*
如果有InstanceId额外的维度，原则上都需要传入此map结构配置
key的含义：
  经过InvalidDemensions处理后的string。topicId =》TopicId。
  否则认为指标中维度正确，和指标中维度字段保持一致，即topicId
value的含义：
  1 dim_KeyInStorage 指标中维度dimension对应的storage中的key，获取缓存列表，sourceMapList、
  2 dim_KeyInTarget  通过getVariable方法获取变量中选中项。比如ListnerId为Lis-xxxx；即：STATE中的key。
                    默认取通过InvalidDemsion处理后的key
  3 dim_KeyInMap     保存在模板变量value比如（监听器ID）源自sourceMapList（接口返回内容）的哪个key（ListenerId）。
                    即：templateQueryIdMap中内容。
                    联合上面2的内容筛选出原始sourceMap
*/
// const queryMonitorExtraConfg = {
//   FleetId: {
//     dim_KeyInStorage: keyInStorage.fleet,
//     dim_KeyInTarget: 'FleetId',
//     dim_KeyInMap: templateQueryIdMap.FleetId,
//   },
//   Name: {
//     dim_KeyInStorage: keyInStorage.queue,
//     dim_KeyInTarget: 'Name',
//     dim_KeyInMap: templateQueryIdMap.Name,
//   },
// };
// select类型需要注意是{},multi后缀是[],dropdown是''

var CLSFilterFields = {
  Limit: 20,
  Offset: 0,
  topicName: [],
  topicId: [],
  logsetName: [],
  logsetId: [],
  tagKey: [],
  'tag:tagKey': [],
  storageType: {}
};
var CLSFilterFieldsDescriptor = [{
  key: 'Offset',
  enDescriptor: 'Offset',
  cnDescriptor: '偏移量, 例如Offset=20&Limit=20 返回第 20 到 40 项',
  link: '',
  type: 'inputNumber',
  min: 0
}, {
  key: 'Limit',
  enDescriptor: 'Limit',
  cnDescriptor: '单次请求返回的数量，默认为20，最小值为1，最大值为100',
  link: '',
  type: 'inputNumber',
  min: 1,
  max: 100
}, {
  key: 'topicName',
  enDescriptor: 'topicName',
  cnDescriptor: '日志主题名称',
  link: '',
  type: 'inputMulti'
}, {
  key: 'topicId',
  enDescriptor: 'topicId',
  cnDescriptor: '日志主题ID',
  link: '',
  type: 'inputMulti'
}, {
  key: 'logsetName',
  enDescriptor: 'logsetName',
  cnDescriptor: '日志集名称',
  link: '',
  type: 'inputMulti'
}, {
  key: 'logsetId',
  enDescriptor: 'logsetId',
  cnDescriptor: '日志集ID',
  link: '',
  type: 'inputMulti'
}, {
  key: 'tagKey',
  enDescriptor: 'tagKey',
  cnDescriptor: '标签键',
  link: '',
  type: 'inputMulti'
}, {
  key: 'tag:tagKey',
  enDescriptor: 'tag - tagKey',
  cnDescriptor: '标签键值对',
  link: '',
  type: 'inputMulti'
}, {
  key: 'storageType',
  enDescriptor: 'storageType',
  cnDescriptor: '日志主题的存储类型',
  link: '',
  type: 'select',
  list: [{
    text: '实时存储',
    value: 'hot'
  }, {
    text: '离线存储',
    value: 'cold'
  }]
}]; // 各产品实例列表detail配置

var queryEditorConfig = {
  instanceDocUrl: 'https://cloud.tencent.com/document/api/614/56454',
  namespace: namespace,
  fieldDescriptor: CLSFilterFieldsDescriptor
};
var CLS_STATE = {
  region: '',
  metricName: '',
  metricUnit: '',
  period: undefined,
  dimensionObject: null,
  instance: '',
  instanceAlias: 'TopicId',
  uin: '',
  queries: CLSFilterFields
};

function GetInstanceQueryParams(queries) {
  if (queries === void 0) {
    queries = {};
  }

  return Object(_common_utils__WEBPACK_IMPORTED_MODULE_0__["instanceQueryParamsBaseParse"])(queries, true);
} // regions for dropdown


var regionSupported = [{
  value: 'ap-bangkok'
}, {
  value: 'ap-beijing'
}, {
  value: 'ap-chengdu'
}, {
  value: 'ap-chongqing'
}, {
  value: 'ap-guangzhou'
}, {
  value: 'ap-hongkong'
}, {
  value: 'ap-jakarta'
}, {
  value: 'ap-mumbai'
}, {
  value: 'ap-seoul'
}, {
  value: 'ap-nanjing'
}, {
  value: 'ap-shanghai'
}, {
  value: 'ap-shanghai-fsi'
}, {
  value: 'ap-shenzhen-fsi'
}, {
  value: 'ap-singapore'
}, {
  value: 'ap-tokyo'
}, {
  value: 'eu-frankfurt'
}, {
  value: 'eu-moscow'
}, {
  value: 'na-ashburn'
}, {
  value: 'na-siliconvalley'
}, {
  value: 'na-toronto'
}];

function modifyDimensons(metricItem) {
  var metricTmp = lodash__WEBPACK_IMPORTED_MODULE_1___default.a.cloneDeep(metricItem);

  metricTmp.Dimensions.forEach(function (item) {
    // item.Dimensions = item.Dimensions.map((v) => CLSInvalidDemensions[v] || v);
    item.Dimensions = ['uin', 'TopicId'];
  });
  return metricTmp;
}

/* harmony default export */ __webpack_exports__["default"] = (CLS_STATE);


/***/ }),

/***/ "./datasource/tc_monitor/cmq/datasource.ts":
/*!*************************************************!*\
  !*** ./datasource/tc_monitor/cmq/datasource.ts ***!
  \*************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _base_datasource__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../_base/datasource */ "./datasource/tc_monitor/_base/datasource.ts");
/* harmony import */ var _query_def__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./query_def */ "./datasource/tc_monitor/cmq/query_def.ts");
var __extends = undefined && undefined.__extends || function () {
  var _extendStatics = function extendStatics(d, b) {
    _extendStatics = Object.setPrototypeOf || {
      __proto__: []
    } instanceof Array && function (d, b) {
      d.__proto__ = b;
    } || function (d, b) {
      for (var p in b) {
        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];
      }
    };

    return _extendStatics(d, b);
  };

  return function (d, b) {
    if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");

    _extendStatics(d, b);

    function __() {
      this.constructor = d;
    }

    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();

var __awaiter = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {
  function adopt(value) {
    return value instanceof P ? value : new P(function (resolve) {
      resolve(value);
    });
  }

  return new (P || (P = Promise))(function (resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }

    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }

    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }

    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};

var __generator = undefined && undefined.__generator || function (thisArg, body) {
  var _ = {
    label: 0,
    sent: function sent() {
      if (t[0] & 1) throw t[1];
      return t[1];
    },
    trys: [],
    ops: []
  },
      f,
      y,
      t,
      g;
  return g = {
    next: verb(0),
    "throw": verb(1),
    "return": verb(2)
  }, typeof Symbol === "function" && (g[Symbol.iterator] = function () {
    return this;
  }), g;

  function verb(n) {
    return function (v) {
      return step([n, v]);
    };
  }

  function step(op) {
    if (f) throw new TypeError("Generator is already executing.");

    while (_) {
      try {
        if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
        if (y = 0, t) op = [op[0] & 2, t.value];

        switch (op[0]) {
          case 0:
          case 1:
            t = op;
            break;

          case 4:
            _.label++;
            return {
              value: op[1],
              done: false
            };

          case 5:
            _.label++;
            y = op[1];
            op = [0];
            continue;

          case 7:
            op = _.ops.pop();

            _.trys.pop();

            continue;

          default:
            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
              _ = 0;
              continue;
            }

            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
              _.label = op[1];
              break;
            }

            if (op[0] === 6 && _.label < t[1]) {
              _.label = t[1];
              t = op;
              break;
            }

            if (t && _.label < t[2]) {
              _.label = t[2];

              _.ops.push(op);

              break;
            }

            if (t[2]) _.ops.pop();

            _.trys.pop();

            continue;
        }

        op = body.call(thisArg, _);
      } catch (e) {
        op = [6, e];
        y = 0;
      } finally {
        f = t = 0;
      }
    }

    if (op[0] & 5) throw op[1];
    return {
      value: op[0] ? op[1] : void 0,
      done: true
    };
  }
};

var __spreadArray = undefined && undefined.__spreadArray || function (to, from, pack) {
  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {
    if (ar || !(i in from)) {
      if (!ar) ar = Array.prototype.slice.call(from, 0, i);
      ar[i] = from[i];
    }
  }
  return to.concat(ar || Array.prototype.slice.call(from));
};




var CmqDatasource =
/** @class */
function (_super) {
  __extends(CmqDatasource, _super);

  function CmqDatasource() {
    var _this = _super !== null && _super.apply(this, arguments) || this;

    _this.InvalidDimensions = _query_def__WEBPACK_IMPORTED_MODULE_1__["InvalidDemensions"];
    _this.InstanceAliasList = _query_def__WEBPACK_IMPORTED_MODULE_1__["InstanceAliasList"];
    _this.templateQueryIdMap = _query_def__WEBPACK_IMPORTED_MODULE_1__["templateQueryIdMap"];
    _this.InstanceReqConfig = {
      service: 'cmq',
      action: 'DescribeQueueDetail',
      responseField: 'QueueSet'
    };
    return _this;
  }

  CmqDatasource.prototype.getMetrics = function (region) {
    if (region === void 0) {
      region = 'ap-guangzhou';
    }

    return __awaiter(this, void 0, void 0, function () {
      var rawMetric;
      return __generator(this, function (_a) {
        switch (_a.label) {
          case 0:
            return [4
            /*yield*/
            , _super.prototype.getMetrics.call(this, region)];

          case 1:
            rawMetric = _a.sent();
            return [2
            /*return*/
            , rawMetric.map(function (metric) {
              var dims = metric.Dimensions[0].Dimensions;
              dims = Array.from(new Set(__spreadArray(__spreadArray([], dims, true), ['queueId', 'queueName'], false)));
              metric.Dimensions[0].Dimensions = dims;
              return metric;
            })];
        }
      });
    });
  };

  return CmqDatasource;
}(_base_datasource__WEBPACK_IMPORTED_MODULE_0__["BaseDatasource"]);

/* harmony default export */ __webpack_exports__["default"] = (CmqDatasource);

/***/ }),

/***/ "./datasource/tc_monitor/cmq/query.ts":
/*!********************************************!*\
  !*** ./datasource/tc_monitor/cmq/query.ts ***!
  \********************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _base_query__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../_base/query */ "./datasource/tc_monitor/_base/query.ts");
/* harmony import */ var _query_def__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./query_def */ "./datasource/tc_monitor/cmq/query_def.ts");


Object(_base_query__WEBPACK_IMPORTED_MODULE_0__["default"])('cmqQuery', {
  fieldDescriptor: _query_def__WEBPACK_IMPORTED_MODULE_1__["InstanceQueryDescriptor"],
  instanceDocUrl: 'https://cloud.tencent.com/document/api/406/42624',
  namespace: 'QCE/CMQ'
});

/***/ }),

/***/ "./datasource/tc_monitor/cmq/query_def.ts":
/*!************************************************!*\
  !*** ./datasource/tc_monitor/cmq/query_def.ts ***!
  \************************************************/
/*! exports provided: InstanceQueryDescriptor, InvalidDemensions, templateQueryIdMap, InstanceAliasList, GetInstanceQueryParams, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "InstanceQueryDescriptor", function() { return InstanceQueryDescriptor; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "InvalidDemensions", function() { return InvalidDemensions; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "templateQueryIdMap", function() { return templateQueryIdMap; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "InstanceAliasList", function() { return InstanceAliasList; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GetInstanceQueryParams", function() { return GetInstanceQueryParams; });
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lodash */ "lodash");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__);

var InstanceQueryDescriptor = [{
  key: 'Offset',
  enDescriptor: 'Offset',
  cnDescriptor: '偏移量, 例如Offset=20&Limit=20 返回第 20 到 40 项',
  link: '',
  type: 'inputNumber',
  min: 0
}, {
  key: 'Limit',
  enDescriptor: 'Limit',
  cnDescriptor: '单次请求返回的数量，默认为10，最小值为1，最大值为100',
  link: '',
  type: 'inputNumber',
  min: 1,
  max: 50
}, {
  key: 'QueueName',
  enDescriptor: 'QueueName',
  cnDescriptor: '精确匹配QueueName',
  link: '',
  type: 'input'
}, {
  key: 'TagKey',
  enDescriptor: 'TagKey',
  cnDescriptor: '标签搜索',
  link: '',
  type: 'input'
}];

function GetInstanceQueryParams(queries) {
  if (queries === void 0) {
    queries = {};
  }

  var params = {};

  if (!lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isEmpty(queries)) {
    params.Limit = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(queries, 'Limit', 20) || 20;
    params.Offset = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(queries, 'Offset', 0) || 0;
    queries = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.omit(queries, ['Offset', 'Limit']);

    lodash__WEBPACK_IMPORTED_MODULE_0___default.a.forEach(queries, function (item, key) {
      if (lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isArray(item)) {
        item = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.compact(item);

        if (item.length > 0) {
          params[key] = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.uniq(item);
        }
      } else if (lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isObject(item)) {
        if (lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isNumber(lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(item, 'value', undefined)) || !lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isEmpty(lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(item, 'value', undefined))) {
          params[key] = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(item, 'value');
        }
      } else if (lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isNumber(item) || !lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isEmpty(item)) {
        params[key] = item;
      }
    });
  }

  return params;
} // 向实例里面塞dimensions对应的值，dimension中的key对应到实例中的key


var InvalidDemensions = {
  queueId: 'QueueId',
  queueName: 'QueueName'
};
var templateQueryIdMap = {
  instance: 'QueueName'
}; // 与名称挂钩的变量

var InstanceAliasList = ['QueueName', 'QueueId'];
 // 界面状态模型，default

/* harmony default export */ __webpack_exports__["default"] = ({
  region: '',
  metricName: '',
  metricUnit: '',
  period: undefined,
  dimensionObject: null,
  instance: '',
  instanceAlias: 'QueueName',
  queries: {
    Offset: 0,
    Limit: 20,
    QueueName: '',
    TagKey: ''
  }
});

/***/ }),

/***/ "./datasource/tc_monitor/cmq_topic/datasource.ts":
/*!*******************************************************!*\
  !*** ./datasource/tc_monitor/cmq_topic/datasource.ts ***!
  \*******************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _common_constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../common/constants */ "./datasource/common/constants.ts");
/* harmony import */ var _common_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../common/utils */ "./datasource/common/utils.ts");
/* harmony import */ var _base_datasource__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../_base/datasource */ "./datasource/tc_monitor/_base/datasource.ts");
/* harmony import */ var _query_def__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./query_def */ "./datasource/tc_monitor/cmq_topic/query_def.ts");
/* harmony import */ var _common_datasourceStorage__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../common/datasourceStorage */ "./datasource/common/datasourceStorage.ts");
var __extends = undefined && undefined.__extends || function () {
  var _extendStatics = function extendStatics(d, b) {
    _extendStatics = Object.setPrototypeOf || {
      __proto__: []
    } instanceof Array && function (d, b) {
      d.__proto__ = b;
    } || function (d, b) {
      for (var p in b) {
        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];
      }
    };

    return _extendStatics(d, b);
  };

  return function (d, b) {
    if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");

    _extendStatics(d, b);

    function __() {
      this.constructor = d;
    }

    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();

var __awaiter = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {
  function adopt(value) {
    return value instanceof P ? value : new P(function (resolve) {
      resolve(value);
    });
  }

  return new (P || (P = Promise))(function (resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }

    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }

    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }

    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};

var __generator = undefined && undefined.__generator || function (thisArg, body) {
  var _ = {
    label: 0,
    sent: function sent() {
      if (t[0] & 1) throw t[1];
      return t[1];
    },
    trys: [],
    ops: []
  },
      f,
      y,
      t,
      g;
  return g = {
    next: verb(0),
    "throw": verb(1),
    "return": verb(2)
  }, typeof Symbol === "function" && (g[Symbol.iterator] = function () {
    return this;
  }), g;

  function verb(n) {
    return function (v) {
      return step([n, v]);
    };
  }

  function step(op) {
    if (f) throw new TypeError("Generator is already executing.");

    while (_) {
      try {
        if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
        if (y = 0, t) op = [op[0] & 2, t.value];

        switch (op[0]) {
          case 0:
          case 1:
            t = op;
            break;

          case 4:
            _.label++;
            return {
              value: op[1],
              done: false
            };

          case 5:
            _.label++;
            y = op[1];
            op = [0];
            continue;

          case 7:
            op = _.ops.pop();

            _.trys.pop();

            continue;

          default:
            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
              _ = 0;
              continue;
            }

            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
              _.label = op[1];
              break;
            }

            if (op[0] === 6 && _.label < t[1]) {
              _.label = t[1];
              t = op;
              break;
            }

            if (t && _.label < t[2]) {
              _.label = t[2];

              _.ops.push(op);

              break;
            }

            if (t[2]) _.ops.pop();

            _.trys.pop();

            continue;
        }

        op = body.call(thisArg, _);
      } catch (e) {
        op = [6, e];
        y = 0;
      } finally {
        f = t = 0;
      }
    }

    if (op[0] & 5) throw op[1];
    return {
      value: op[0] ? op[1] : void 0,
      done: true
    };
  }
};







var CmqTopicDatasource =
/** @class */
function (_super) {
  __extends(CmqTopicDatasource, _super);

  function CmqTopicDatasource() {
    var _this = _super !== null && _super.apply(this, arguments) || this;

    _this.Namespace = 'QCE/CMQTOPIC';
    _this.InvalidDimensions = _query_def__WEBPACK_IMPORTED_MODULE_3__["InvalidDemensions"];
    _this.InstanceAliasList = _query_def__WEBPACK_IMPORTED_MODULE_3__["InstanceAliasList"];
    _this.templateQueryIdMap = _query_def__WEBPACK_IMPORTED_MODULE_3__["templateQueryIdMap"];
    _this.InstanceReqConfig = {
      service: 'cmq',
      action: 'DescribeTopicDetail',
      responseField: 'TopicSet'
    };
    _this.keyInStorage = _query_def__WEBPACK_IMPORTED_MODULE_3__["keyInStorage"];
    _this.queryMonitorExtraConfg = _query_def__WEBPACK_IMPORTED_MODULE_3__["queryMonitorExtraConfg"];
    _this.extraMetricDims = ['subscriptionId']; // 多选

    return _this;
  }

  CmqTopicDatasource.prototype.fetchAllSubscription = function (region, params) {
    return __awaiter(this, void 0, void 0, function () {
      var serviceInfo, rs;

      var _this = this;

      return __generator(this, function (_a) {
        switch (_a.label) {
          case 0:
            serviceInfo = Object(_common_constants__WEBPACK_IMPORTED_MODULE_0__["GetServiceAPIInfo"])(region, 'cmq');
            return [4
            /*yield*/
            , Object(_common_utils__WEBPACK_IMPORTED_MODULE_1__["fetchAllFactory"])(function (data) {
              return _this.doRequest({
                url: _this.url + serviceInfo.path,
                data: data
              }, serviceInfo.service, {
                region: region,
                action: 'DescribeSubscriptionDetail'
              });
            }, params, 'SubscriptionSet')];

          case 1:
            rs = _a.sent();
            return [2
            /*return*/
            , rs[0]];
        }
      });
    });
  };

  CmqTopicDatasource.prototype.fetchMetricData = function (action, region, instance) {
    return __awaiter(this, void 0, void 0, function () {
      var result, _a, rs;

      return __generator(this, function (_b) {
        switch (_b.label) {
          case 0:
            _a = action;

            switch (_a) {
              case 'DescribeSubscriptionDetail':
                return [3
                /*break*/
                , 1];
            }

            return [3
            /*break*/
            , 4];

          case 1:
            return [4
            /*yield*/
            , this.fetchAllSubscription(region, {
              TopicName: instance.TopicName
            })];

          case 2:
            result = _b.sent();
            rs = result.map(function (item) {
              item._InstanceAliasValue = item.SubscriptionId;
              return {
                text: item.SubscriptionId,
                value: item[_query_def__WEBPACK_IMPORTED_MODULE_3__["templateQueryIdMap"].subscription]
              };
            });
            return [4
            /*yield*/
            , _common_datasourceStorage__WEBPACK_IMPORTED_MODULE_4__["default"].setExtraStorage(this.service, this.keyInStorage.subscriptionId, result)];

          case 3:
            _b.sent();

            return [2
            /*return*/
            , rs];

          case 4:
            return [2
            /*return*/
            , []];
        }
      });
    });
  };

  CmqTopicDatasource.prototype.getMetrics = function (region) {
    if (region === void 0) {
      region = 'ap-guangzhou';
    }

    return __awaiter(this, void 0, void 0, function () {
      var rawMetric;
      return __generator(this, function (_a) {
        switch (_a.label) {
          case 0:
            return [4
            /*yield*/
            , _super.prototype.getMetrics.call(this, region)];

          case 1:
            rawMetric = _a.sent();
            return [2
            /*return*/
            , rawMetric.map(function (metric) {
              var dims = metric.Dimensions[0].Dimensions;
              dims.push('topicId');

              if (['NumOfNotify', 'NumOfSuccNotify'].includes(metric.MetricName)) {
                dims.push('subscriptionId');
              }

              dims = Array.from(new Set(dims));
              metric.Dimensions[0].Dimensions = dims;
              return metric;
            })];
        }
      });
    });
  };

  return CmqTopicDatasource;
}(_base_datasource__WEBPACK_IMPORTED_MODULE_2__["BaseDatasource"]);

/* harmony default export */ __webpack_exports__["default"] = (CmqTopicDatasource);

/***/ }),

/***/ "./datasource/tc_monitor/cmq_topic/query.ts":
/*!**************************************************!*\
  !*** ./datasource/tc_monitor/cmq_topic/query.ts ***!
  \**************************************************/
/*! exports provided: CmqTopicQueryCtrl, scfQuery */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CmqTopicQueryCtrl", function() { return CmqTopicQueryCtrl; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "scfQuery", function() { return scfQuery; });
/* harmony import */ var grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! grafana/app/core/core_module */ "grafana/app/core/core_module");
/* harmony import */ var grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _query_def__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./query_def */ "./datasource/tc_monitor/cmq_topic/query_def.ts");
var __awaiter = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {
  function adopt(value) {
    return value instanceof P ? value : new P(function (resolve) {
      resolve(value);
    });
  }

  return new (P || (P = Promise))(function (resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }

    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }

    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }

    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};

var __generator = undefined && undefined.__generator || function (thisArg, body) {
  var _ = {
    label: 0,
    sent: function sent() {
      if (t[0] & 1) throw t[1];
      return t[1];
    },
    trys: [],
    ops: []
  },
      f,
      y,
      t,
      g;
  return g = {
    next: verb(0),
    "throw": verb(1),
    "return": verb(2)
  }, typeof Symbol === "function" && (g[Symbol.iterator] = function () {
    return this;
  }), g;

  function verb(n) {
    return function (v) {
      return step([n, v]);
    };
  }

  function step(op) {
    if (f) throw new TypeError("Generator is already executing.");

    while (_) {
      try {
        if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
        if (y = 0, t) op = [op[0] & 2, t.value];

        switch (op[0]) {
          case 0:
          case 1:
            t = op;
            break;

          case 4:
            _.label++;
            return {
              value: op[1],
              done: false
            };

          case 5:
            _.label++;
            y = op[1];
            op = [0];
            continue;

          case 7:
            op = _.ops.pop();

            _.trys.pop();

            continue;

          default:
            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
              _ = 0;
              continue;
            }

            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
              _.label = op[1];
              break;
            }

            if (op[0] === 6 && _.label < t[1]) {
              _.label = t[1];
              t = op;
              break;
            }

            if (t && _.label < t[2]) {
              _.label = t[2];

              _.ops.push(op);

              break;
            }

            if (t[2]) _.ops.pop();

            _.trys.pop();

            continue;
        }

        op = body.call(thisArg, _);
      } catch (e) {
        op = [6, e];
        y = 0;
      } finally {
        f = t = 0;
      }
    }

    if (op[0] & 5) throw op[1];
    return {
      value: op[0] ? op[1] : void 0,
      done: true
    };
  }
};



var ExtraFields = [{
  label: 'Subscription(订阅)',
  field: 'subscriptionId'
}];

var CmqTopicQueryCtrl =
/** @class */
function () {
  CmqTopicQueryCtrl.$inject = ["$scope", "$rootScope"];

  /** @ngInject */
  function CmqTopicQueryCtrl($scope, $rootScope) {
    var _this = this;

    $scope.init = function () {
      $scope.InstanceQueryDescriptor = _query_def__WEBPACK_IMPORTED_MODULE_1__["InstanceQueryDescriptor"];
    };

    $scope.getDropdown = function (field) {
      switch (field) {
        default:
          return [];
      }
    }; // 各个实例下的订阅，由于不想每次都重复发请求，所以这里做了一层缓存，数据结构为{ [instanceId]: {   } }


    $scope.cacheMap = {};

    $scope.getExtraFields = function () {
      return ExtraFields.filter(function (item) {
        var _a;

        return item.field in ((_a = $scope.dims) !== null && _a !== void 0 ? _a : {});
      });
    };

    $scope.getTopicName = function () {
      var instance = $scope.target.instance;
      instance = $scope.datasource.getServiceFn('cmqTopic', 'getVariable')(instance);

      if (!instance) {
        return '';
      }

      try {
        instance = JSON.parse(instance).TopicName;
      } catch (error) {// console.log();
      }

      return instance;
    };

    $scope.onExtraFieldChange = function (field) {
      $scope.onRefresh();
    };

    $scope.getExtraDropdown = function (target, field) {
      return __awaiter(_this, void 0, void 0, function () {
        var TopicName, data, region, fetcher, datas;
        return __generator(this, function (_a) {
          switch (_a.label) {
            case 0:
              if (!(field === 'subscriptionId')) return [3
              /*break*/
              , 3];
              TopicName = $scope.getTopicName();
              data = $scope.cacheMap[TopicName];
              if (!!data) return [3
              /*break*/
              , 2];
              region = $scope.datasource.getServiceFn('cmqTopic', 'getVariable')(target.region);
              fetcher = $scope.datasource.getServiceFn('cmqTopic', 'fetchAllSubscription');
              return [4
              /*yield*/
              , fetcher(region, {
                TopicName: TopicName
              })];

            case 1:
              datas = _a.sent();
              data = datas.map(function (item) {
                item._InstanceAliasValue = item.SubscriptionId;
                return {
                  text: item.SubscriptionId,
                  value: JSON.stringify(item)
                };
              });
              _a.label = 2;

            case 2:
              // 缓存
              $scope.cacheMap[TopicName] = data;
              return [2
              /*return*/
              , data];

            case 3:
              return [2
              /*return*/
              , []];
          }
        });
      });
    };

    $scope.init();
  }

  return CmqTopicQueryCtrl;
}();


var template = "\n<div>\n<div class=\"tc-sub-params\" ng-if=\"showDetail\">\n  <label class=\"gf-form-label tc-info-label\">\n    Functions are queried by following params.\n    <a target=\"_blank\" style=\"text-decoration:underline;color:#006eff;font-size:medium\" href=\"https://cloud.tencent.com/document/api/406/42637\">Click here to get API doc.</a>\n  </label>\n  <div class=\"gf-form-inline\" ng-repeat=\"field in InstanceQueryDescriptor\">\n    <div class=\"gf-form\">\n      <label class=\"gf-form-label width-14\">\n        {{ field.key }}\n        <info-popover mode=\"right-normal\">\n          {{ field.cnDescriptor }}\n          <a target=\"_blank\" href=\"{{field.link}}\" ng-if=\"field.link\">Click here for more information.</a>\n        </info-popover>\n      </label>\n      <input\n        ng-if=\"field.type === 'inputnumber'\"\n        style=\"margin-right:2px\"\n        type=\"number\"\n        ng-model=\"target.queries[field.key]\"\n        ng-change=\"onChange()\"\n        class=\"gf-form-input width-10\"\n        ng-min=\"field.min\"\n        ng-max=\"field.max\"\n      />\n      <input\n        ng-if=\"field.type === 'input'\"\n        style=\"margin-right:2px\"\n        type=\"text\"\n        ng-model=\"target.queries[field.key]\"\n        ng-change=\"onChange()\"\n        class=\"gf-form-input width-10\"\n      />\n      <multi-condition\n        ng-if=\"field.type === 'inputmulti'\"\n        type=\"'input'\"\n        value=\"target.queries[field.key]\"\n        on-change=\"onChange()\"\n      ></multi-condition>\n      <multi-condition\n        ng-if=\"field.type === 'dropdownmulti'\"\n        type=\"'dropdown'\"\n        value=\"target.queries[field.key]\"\n        on-change=\"onChange()\"\n        get-options=\"getDropdown(field.key)\"\n      ></multi-condition>\n      <custom-select-dropdown\n        ng-if=\"field.type === 'select'\"\n        value=\"target.queries[field.key]\"\n        options=\"field.list\"\n        multiple=\"field.multiple || false\"\n        on-change=\"onChange()\"\n      ></custom-select-dropdown>\n    </div>\n  </div>\n</div>\n\n<!-- \u4E3B\u9898\u7684ui -->\n  <div ng-if=\"target.instance\">\n    <div class=\"gf-form-inline\" ng-repeat=\"extra in getExtraFields()\">\n      <div class=\"gf-form\">\n        <label class=\"gf-form-label query-keyword width-9\">{{extra.label}}</label>\n        <div class=\"gf-form-select-wrapper gf-form-select-wrapper--caret-indent\">\n          <gf-form-dropdown model=\"target[extra.field]\" allow-custom=\"true\" get-options=\"getExtraDropdown(target, extra.field)\"\n            on-change=\"onExtraFieldChange(extra.field)\" css-class=\"min-width-10\">\n          </gf-form-dropdown>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  </div>\n";
function scfQuery() {
  return {
    template: template,
    controller: CmqTopicQueryCtrl,
    restrict: 'E',
    scope: {
      target: '=',
      showDetail: '=',
      region: '=',
      datasource: '=',
      getDropdownOptions: '&',
      onChange: '&',
      onRefresh: '&',
      dims: '='
    }
  };
}
grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0___default.a.directive('cmqTopicQuery', scfQuery);

/***/ }),

/***/ "./datasource/tc_monitor/cmq_topic/query_def.ts":
/*!******************************************************!*\
  !*** ./datasource/tc_monitor/cmq_topic/query_def.ts ***!
  \******************************************************/
/*! exports provided: InstanceQueryDescriptor, InvalidDemensions, templateQueryIdMap, InstanceAliasList, GetInstanceQueryParams, queryMonitorExtraConfg, keyInStorage, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "InstanceQueryDescriptor", function() { return InstanceQueryDescriptor; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "InvalidDemensions", function() { return InvalidDemensions; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "templateQueryIdMap", function() { return templateQueryIdMap; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "InstanceAliasList", function() { return InstanceAliasList; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GetInstanceQueryParams", function() { return GetInstanceQueryParams; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "queryMonitorExtraConfg", function() { return queryMonitorExtraConfg; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "keyInStorage", function() { return keyInStorage; });
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lodash */ "lodash");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__);

var InstanceQueryDescriptor = [{
  key: 'Offset',
  enDescriptor: 'Offset',
  cnDescriptor: '偏移量, 例如Offset=20&Limit=20 返回第 20 到 40 项',
  link: '',
  type: 'inputNumber',
  min: 0
}, {
  key: 'Limit',
  enDescriptor: 'Limit',
  cnDescriptor: '单次请求返回的数量，默认为10，最小值为1，最大值为100',
  link: '',
  type: 'inputNumber',
  min: 1,
  max: 50
}, {
  key: 'TopicName',
  enDescriptor: 'TopicName',
  cnDescriptor: '精确匹配TopicName',
  link: '',
  type: 'input'
}, {
  key: 'TagKey',
  enDescriptor: 'TagKey',
  cnDescriptor: '标签搜索',
  link: '',
  type: 'input'
}];

function GetInstanceQueryParams(queries) {
  if (queries === void 0) {
    queries = {};
  }

  var params = {};

  if (!lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isEmpty(queries)) {
    params.Limit = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(queries, 'Limit', 20) || 20;
    params.Offset = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(queries, 'Offset', 0) || 0;
    queries = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.omit(queries, ['Offset', 'Limit']);

    lodash__WEBPACK_IMPORTED_MODULE_0___default.a.forEach(queries, function (item, key) {
      if (lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isArray(item)) {
        item = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.compact(item);

        if (item.length > 0) {
          params[key] = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.uniq(item);
        }
      } else if (lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isObject(item)) {
        if (lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isNumber(lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(item, 'value', undefined)) || !lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isEmpty(lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(item, 'value', undefined))) {
          params[key] = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(item, 'value');
        }
      } else if (lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isNumber(item) || !lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isEmpty(item)) {
        params[key] = item;
      }
    });
  }

  return params;
} // 向实例里面塞dimensions对应的值，dimension中的key对应到实例中的key


var InvalidDemensions = {
  topicId: 'TopicId'
}; // 因为cmq那边，以TopciName为主键

var templateQueryIdMap = {
  instance: 'TopicName',
  subscription: 'SubscriptionId'
}; // 需要缓存到storage的内容的key列表

var keyInStorage = {
  subscriptionId: 'subscriptionId'
};
/*
如果有InstanceId额外的维度，原则上都需要传入此map结构配置
key的含义：
  经过InvalidDemensions处理后的string。topicId =》TopicId。
  否则认为指标中维度正确，和指标中维度字段保持一致，即topicId
value的含义：
  1 dim_KeyInStorage 指标中维度dimension对应的storage中的key，获取缓存列表，sourceMapList、
  2 dim_KeyInTarget  通过getVariable方法获取变量中选中项。比如ListnerId为Lis-xxxx；即：STATE中的key。
                    默认取通过InvalidDemsion处理后的key
  3 dim_KeyInMap     保存在模板变量value比如（监听器ID）源自sourceMapList（接口返回内容）的哪个key（ListenerId）。
                    即：templateQueryIdMap中内容。
                    联合上面2的内容筛选出原始sourceMap
*/

var queryMonitorExtraConfg = {
  subscriptionId: {
    dim_KeyInStorage: keyInStorage.subscriptionId,
    dim_KeyInTarget: 'subscriptionId',
    dim_KeyInMap: templateQueryIdMap.subscription
  }
}; // 与名称挂钩的变量

var InstanceAliasList = ['TopicName', 'TopicId'];
 // 界面状态模型，default

/* harmony default export */ __webpack_exports__["default"] = ({
  region: '',
  metricName: '',
  metricUnit: '',
  period: undefined,
  dimensionObject: null,
  instance: '',
  instanceAlias: 'TopicName',
  subscriptionId: '',
  queries: {
    Offset: 0,
    Limit: 20,
    TopicName: '',
    TagKey: ''
  }
});

/***/ }),

/***/ "./datasource/tc_monitor/cos/datasource.ts":
/*!*************************************************!*\
  !*** ./datasource/tc_monitor/cos/datasource.ts ***!
  \*************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _base_datasource__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../_base/datasource */ "./datasource/tc_monitor/_base/datasource.ts");
var __extends = undefined && undefined.__extends || function () {
  var _extendStatics = function extendStatics(d, b) {
    _extendStatics = Object.setPrototypeOf || {
      __proto__: []
    } instanceof Array && function (d, b) {
      d.__proto__ = b;
    } || function (d, b) {
      for (var p in b) {
        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];
      }
    };

    return _extendStatics(d, b);
  };

  return function (d, b) {
    if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");

    _extendStatics(d, b);

    function __() {
      this.constructor = d;
    }

    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();

var __assign = undefined && undefined.__assign || function () {
  __assign = Object.assign || function (t) {
    for (var s, i = 1, n = arguments.length; i < n; i++) {
      s = arguments[i];

      for (var p in s) {
        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
      }
    }

    return t;
  };

  return __assign.apply(this, arguments);
};

var __awaiter = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {
  function adopt(value) {
    return value instanceof P ? value : new P(function (resolve) {
      resolve(value);
    });
  }

  return new (P || (P = Promise))(function (resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }

    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }

    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }

    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};

var __generator = undefined && undefined.__generator || function (thisArg, body) {
  var _ = {
    label: 0,
    sent: function sent() {
      if (t[0] & 1) throw t[1];
      return t[1];
    },
    trys: [],
    ops: []
  },
      f,
      y,
      t,
      g;
  return g = {
    next: verb(0),
    "throw": verb(1),
    "return": verb(2)
  }, typeof Symbol === "function" && (g[Symbol.iterator] = function () {
    return this;
  }), g;

  function verb(n) {
    return function (v) {
      return step([n, v]);
    };
  }

  function step(op) {
    if (f) throw new TypeError("Generator is already executing.");

    while (_) {
      try {
        if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
        if (y = 0, t) op = [op[0] & 2, t.value];

        switch (op[0]) {
          case 0:
          case 1:
            t = op;
            break;

          case 4:
            _.label++;
            return {
              value: op[1],
              done: false
            };

          case 5:
            _.label++;
            y = op[1];
            op = [0];
            continue;

          case 7:
            op = _.ops.pop();

            _.trys.pop();

            continue;

          default:
            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
              _ = 0;
              continue;
            }

            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
              _.label = op[1];
              break;
            }

            if (op[0] === 6 && _.label < t[1]) {
              _.label = t[1];
              t = op;
              break;
            }

            if (t && _.label < t[2]) {
              _.label = t[2];

              _.ops.push(op);

              break;
            }

            if (t[2]) _.ops.pop();

            _.trys.pop();

            continue;
        }

        op = body.call(thisArg, _);
      } catch (e) {
        op = [6, e];
        y = 0;
      } finally {
        f = t = 0;
      }
    }

    if (op[0] & 5) throw op[1];
    return {
      value: op[0] ? op[1] : void 0,
      done: true
    };
  }
};



var CosDatasource =
/** @class */
function (_super) {
  __extends(CosDatasource, _super);

  function CosDatasource(instanceSettings, backendSrv, templateSrv) {
    var _this = _super.call(this, instanceSettings, backendSrv, templateSrv) || this;

    _this.InvalidDimensions = {};
    _this.InstanceAliasList = ['BucketName'];
    _this.templateQueryIdMap = {
      instance: 'BucketName'
    };
    _this.InstanceReqConfig = {}; // 不必要的配置

    _this.cosURL = "/api/datasources/".concat(_this.instanceSettings.id, "/resources/tc_cos_list");
    return _this;
  }

  CosDatasource.prototype.getInstances = function (region) {
    return __awaiter(this, void 0, void 0, function () {
      return __generator(this, function (_a) {
        return [2
        /*return*/
        , this.backendSrv.datasourceRequest({
          url: this.cosURL,
          method: 'GET',
          params: {
            region: region
          },
          headers: {
            'Content-Type': 'application/json'
          }
        }).then(function (res) {
          var data = res.data;
          data = data || {};
          var Buckets = data.Buckets;
          Buckets = Buckets || []; // name contains appid，see detail https://cloud.tencent.com/document/product/436/8291

          return Buckets.map(function (item) {
            return __assign(__assign({}, item), {
              BucketName: item.Name,
              bucket: item.Name,
              appid: item.Name.split('-').slice(-1)[0]
            });
          });
        })];
      });
    });
  };

  CosDatasource.prototype.getVariableInstances = function (region) {
    return __awaiter(this, void 0, void 0, function () {
      return __generator(this, function (_a) {
        return [2
        /*return*/
        , this.getInstances(region)];
      });
    });
  };

  return CosDatasource;
}(_base_datasource__WEBPACK_IMPORTED_MODULE_0__["BaseDatasource"]);

/* harmony default export */ __webpack_exports__["default"] = (CosDatasource);

/***/ }),

/***/ "./datasource/tc_monitor/cos/query_def.ts":
/*!************************************************!*\
  !*** ./datasource/tc_monitor/cos/query_def.ts ***!
  \************************************************/
/*! exports provided: InstanceAliasList, GetInstanceQueryParams, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "InstanceAliasList", function() { return InstanceAliasList; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GetInstanceQueryParams", function() { return GetInstanceQueryParams; });
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lodash */ "lodash");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__);


function GetInstanceQueryParams(queries) {
  if (queries === void 0) {
    queries = {};
  }

  var params = {};

  if (!lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isEmpty(queries)) {
    params.Limit = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(queries, 'Limit', 20) || 20;
    params.Offset = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(queries, 'Offset', 0) || 0;
    queries = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.omit(queries, ['Offset', 'Limit']);

    lodash__WEBPACK_IMPORTED_MODULE_0___default.a.forEach(queries, function (item, key) {
      if (lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isArray(item)) {
        item = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.compact(item);

        if (item.length > 0) {
          params[key] = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.uniq(item);
        }
      } else if (lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isObject(item)) {
        if (lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isNumber(lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(item, 'value', undefined)) || !lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isEmpty(lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(item, 'value', undefined))) {
          params[key] = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(item, 'value');
        }
      } else if (lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isNumber(item) || !lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isEmpty(item)) {
        params[key] = item;
      }
    });
  }

  return params;
} // 与名称挂钩的变量


var InstanceAliasList = ['BucketName'];
 // 界面状态模型，default

/* harmony default export */ __webpack_exports__["default"] = ({
  region: '',
  metricName: '',
  metricUnit: '',
  period: undefined,
  dimensionObject: null,
  instance: '',
  instanceAlias: 'BucketName',
  queries: {}
});

/***/ }),

/***/ "./datasource/tc_monitor/cpm/datasource.ts":
/*!*************************************************!*\
  !*** ./datasource/tc_monitor/cpm/datasource.ts ***!
  \*************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _query_def__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./query_def */ "./datasource/tc_monitor/cpm/query_def.ts");
/* harmony import */ var _base_datasource__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../_base/datasource */ "./datasource/tc_monitor/_base/datasource.ts");
/* harmony import */ var _common_constants__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../common/constants */ "./datasource/common/constants.ts");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! lodash */ "lodash");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _locale__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../locale */ "./locale/index.ts");
var __extends = undefined && undefined.__extends || function () {
  var _extendStatics = function extendStatics(d, b) {
    _extendStatics = Object.setPrototypeOf || {
      __proto__: []
    } instanceof Array && function (d, b) {
      d.__proto__ = b;
    } || function (d, b) {
      for (var p in b) {
        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];
      }
    };

    return _extendStatics(d, b);
  };

  return function (d, b) {
    if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");

    _extendStatics(d, b);

    function __() {
      this.constructor = d;
    }

    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();

var __awaiter = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {
  function adopt(value) {
    return value instanceof P ? value : new P(function (resolve) {
      resolve(value);
    });
  }

  return new (P || (P = Promise))(function (resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }

    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }

    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }

    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};

var __generator = undefined && undefined.__generator || function (thisArg, body) {
  var _ = {
    label: 0,
    sent: function sent() {
      if (t[0] & 1) throw t[1];
      return t[1];
    },
    trys: [],
    ops: []
  },
      f,
      y,
      t,
      g;
  return g = {
    next: verb(0),
    "throw": verb(1),
    "return": verb(2)
  }, typeof Symbol === "function" && (g[Symbol.iterator] = function () {
    return this;
  }), g;

  function verb(n) {
    return function (v) {
      return step([n, v]);
    };
  }

  function step(op) {
    if (f) throw new TypeError("Generator is already executing.");

    while (_) {
      try {
        if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
        if (y = 0, t) op = [op[0] & 2, t.value];

        switch (op[0]) {
          case 0:
          case 1:
            t = op;
            break;

          case 4:
            _.label++;
            return {
              value: op[1],
              done: false
            };

          case 5:
            _.label++;
            y = op[1];
            op = [0];
            continue;

          case 7:
            op = _.ops.pop();

            _.trys.pop();

            continue;

          default:
            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
              _ = 0;
              continue;
            }

            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
              _.label = op[1];
              break;
            }

            if (op[0] === 6 && _.label < t[1]) {
              _.label = t[1];
              t = op;
              break;
            }

            if (t && _.label < t[2]) {
              _.label = t[2];

              _.ops.push(op);

              break;
            }

            if (t[2]) _.ops.pop();

            _.trys.pop();

            continue;
        }

        op = body.call(thisArg, _);
      } catch (e) {
        op = [6, e];
        y = 0;
      } finally {
        f = t = 0;
      }
    }

    if (op[0] & 5) throw op[1];
    return {
      value: op[0] ? op[1] : void 0,
      done: true
    };
  }
};







var DCDatasource =
/** @class */
function (_super) {
  __extends(DCDatasource, _super);

  function DCDatasource(instanceSettings, backendSrv, templateSrv) {
    var _this = _super.call(this, instanceSettings, backendSrv, templateSrv) || this;

    _this.Namespace = _query_def__WEBPACK_IMPORTED_MODULE_0__["namespace"];
    _this.InstanceAliasList = _query_def__WEBPACK_IMPORTED_MODULE_0__["CPMInstanceAliasList"];
    _this.InvalidDimensions = _query_def__WEBPACK_IMPORTED_MODULE_0__["CPMInvalidDemensions"];
    _this.templateQueryIdMap = _query_def__WEBPACK_IMPORTED_MODULE_0__["templateQueryIdMap"]; // 此处service是接口的配置参数，需和plugin.json里一致，和constant.ts中SERVICES_API_INFO保持一致

    _this.InstanceReqConfig = {
      service: 'bm',
      action: 'DescribeDevices',
      responseField: 'DeviceInfoSet'
    };
    _this.RegionMap = {};
    return _this;
  } // 重写getRegion


  DCDatasource.prototype.getRegions = function () {
    var _this = this;

    return this.doRequest({
      url: this.url + '/bm'
    }, 'bm', {
      action: 'DescribeRegions',
      region: 'ap-guangzhou'
    }).then(function (response) {
      // 缓存，后面获取可用区zone
      _this.RegionMap = lodash__WEBPACK_IMPORTED_MODULE_3___default.a.keyBy(response.RegionInfoSet, 'Region');
      return lodash__WEBPACK_IMPORTED_MODULE_3___default.a.map(response.RegionInfoSet || [], function (item) {
        return {
          text: Object(_locale__WEBPACK_IMPORTED_MODULE_4__["t"])(item.Region),
          value: item.Region
        };
      });
    });
  };

  DCDatasource.prototype.getMetrics = function (region) {
    if (region === void 0) {
      region = 'ap-guangzhou';
    }

    return __awaiter(this, void 0, void 0, function () {
      var rawSet;
      return __generator(this, function (_a) {
        switch (_a.label) {
          case 0:
            return [4
            /*yield*/
            , _super.prototype.getMetrics.call(this, region)];

          case 1:
            rawSet = _a.sent();
            return [2
            /*return*/
            , rawSet.map(function (item) {
              return Object(_query_def__WEBPACK_IMPORTED_MODULE_0__["modifyDimensons"])(item);
            })];
        }
      });
    });
  };

  DCDatasource.prototype.getFilterDropdown = function (_a) {
    var field = _a.field,
        region = _a.region;

    if (field === 'DeviceClassCode') {
      var serviceInfo = Object(_common_constants__WEBPACK_IMPORTED_MODULE_2__["GetServiceAPIInfo"])(region, 'bm');
      return this.doRequest({
        url: this.url + serviceInfo.path
      }, 'bm', {
        region: region,
        action: 'DescribeDeviceClass'
      }).then(function (response) {
        return lodash__WEBPACK_IMPORTED_MODULE_3___default.a.map(response.DeviceClassSet || [], function (item) {
          return {
            text: item.DeviceClassCode,
            value: item.DeviceClassCode
          };
        });
      });
    }

    return [];
  };

  return DCDatasource;
}(_base_datasource__WEBPACK_IMPORTED_MODULE_1__["BaseDatasource"]);

/* harmony default export */ __webpack_exports__["default"] = (DCDatasource);

/***/ }),

/***/ "./datasource/tc_monitor/cpm/query.ts":
/*!********************************************!*\
  !*** ./datasource/tc_monitor/cpm/query.ts ***!
  \********************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _base_query__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../_base/query */ "./datasource/tc_monitor/_base/query.ts");
/* harmony import */ var _query_def__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./query_def */ "./datasource/tc_monitor/cpm/query_def.ts");


Object(_base_query__WEBPACK_IMPORTED_MODULE_0__["default"])(_query_def__WEBPACK_IMPORTED_MODULE_1__["queryEditorName"], _query_def__WEBPACK_IMPORTED_MODULE_1__["queryEditorConfig"]);

/***/ }),

/***/ "./datasource/tc_monitor/cpm/query_def.ts":
/*!************************************************!*\
  !*** ./datasource/tc_monitor/cpm/query_def.ts ***!
  \************************************************/
/*! exports provided: default, CPMFilterFieldsDescriptor, templateQueryIdMap, CPMInstanceAliasList, CPMInvalidDemensions, namespace, queryEditorName, queryEditorConfig, modifyDimensons, CPMGetInstanceQueryParams */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CPMFilterFieldsDescriptor", function() { return CPMFilterFieldsDescriptor; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "templateQueryIdMap", function() { return templateQueryIdMap; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CPMInstanceAliasList", function() { return CPMInstanceAliasList; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CPMInvalidDemensions", function() { return CPMInvalidDemensions; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "namespace", function() { return namespace; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "queryEditorName", function() { return queryEditorName; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "queryEditorConfig", function() { return queryEditorConfig; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "modifyDimensons", function() { return modifyDimensons; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CPMGetInstanceQueryParams", function() { return GetInstanceQueryParams; });
/* harmony import */ var _common_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../common/utils */ "./datasource/common/utils.ts");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lodash */ "lodash");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_1__);


var namespace = 'QCE/CPM'; // 组件名称。这里名字要和index.ts中的SERVICES对应，后面会根据SERVICES中service字段拼接这个query组件名称

var queryEditorName = 'cpmQuery';
var CPMInvalidDemensions = {
  instanceId: 'InstanceId' // uniqid: 'InstanceId',

};
var CPMInstanceAliasList = ['InstanceId', 'Name'];
var templateQueryIdMap = {
  instance: 'InstanceId'
}; // select类型需要注意是{},multi后缀是[],dropdown是''

var CPMFilterFields = {
  Limit: 20,
  Offset: 0,
  DeviceClassCode: '',
  InstanceIds: [],
  WanIps: [],
  LanIps: [],
  Alias: '',
  VagueIp: '',
  AutoRenewFlag: {},
  VpcId: '',
  SubnetId: '',
  DeviceType: {},
  IsLuckyDevice: {}
};
var CPMFilterFieldsDescriptor = [{
  key: 'Offset',
  enDescriptor: 'Offset',
  cnDescriptor: '偏移量, 例如Offset=20&Limit=20 返回第 20 到 40 项',
  link: '',
  type: 'inputNumber',
  min: 0
}, {
  key: 'Limit',
  enDescriptor: 'Limit',
  cnDescriptor: '单次请求返回的数量，默认为20，最小值为1，最大值为100',
  link: '',
  type: 'inputNumber',
  min: 1,
  max: 100
}, {
  key: 'DeviceClassCode',
  enDescriptor: 'DeviceClassCode',
  cnDescriptor: '机型ID',
  link: '',
  type: 'dropdown'
}, {
  key: 'InstanceIds',
  enDescriptor: 'InstanceIds',
  cnDescriptor: '设备ID数组',
  link: '',
  type: 'inputMulti'
}, {
  key: 'WanIps',
  enDescriptor: 'WanIps',
  cnDescriptor: '外网IP数组',
  link: '',
  type: 'inputMulti'
}, {
  key: 'LanIps',
  enDescriptor: 'LanIps',
  cnDescriptor: '内网IP数组',
  link: '',
  type: 'inputMulti'
}, {
  key: 'Alias',
  enDescriptor: 'Alias',
  cnDescriptor: '设备名称',
  link: '',
  type: 'input'
}, {
  key: 'VagueIp',
  enDescriptor: 'VagueIp',
  cnDescriptor: '模糊IP查询',
  link: '',
  type: 'input'
}, {
  key: 'AutoRenewFlag',
  enDescriptor: 'AutoRenewFlag',
  cnDescriptor: '自动续费标志',
  link: '',
  type: 'select',
  list: [{
    text: '不自动续费',
    value: 0
  }, {
    text: '自动续费',
    value: 1
  }]
}, {
  key: 'VpcId',
  enDescriptor: 'VpcId',
  cnDescriptor: '私有网络唯一ID',
  link: '',
  type: 'input'
}, {
  key: 'SubnetId',
  enDescriptor: 'SubnetId',
  cnDescriptor: '子网唯一ID',
  link: '',
  type: 'input'
}, {
  key: 'DeviceType',
  enDescriptor: 'DeviceType',
  cnDescriptor: '子网实例ID',
  link: '',
  type: 'select',
  list: [{
    text: '计算型',
    value: 'compute'
  }, {
    text: '标准型',
    value: 'standard'
  }, {
    text: '存储型',
    value: 'storage'
  }]
}, {
  key: 'IsLuckyDevice',
  enDescriptor: 'IsLuckyDevice',
  cnDescriptor: '竞价实例机器过滤',
  link: '',
  type: 'select',
  list: [{
    text: '非竞价实例机器',
    value: 0
  }, {
    text: '竞价实例的机器',
    value: 1
  }]
}]; // 各产品实例列表detail配置

var queryEditorConfig = {
  instanceDocUrl: 'https://cloud.tencent.com/document/api/386/32904',
  namespace: namespace,
  fieldDescriptor: CPMFilterFieldsDescriptor
};
var CPM_STATE = {
  region: '',
  metricName: '',
  metricUnit: '',
  period: undefined,
  dimensionObject: null,
  instance: '',
  instanceAlias: 'InstanceId',
  queries: CPMFilterFields
};

function GetInstanceQueryParams(queries) {
  if (queries === void 0) {
    queries = {};
  }

  return Object(_common_utils__WEBPACK_IMPORTED_MODULE_0__["instanceQueryParamsBaseParse"])(queries, false);
}

function modifyDimensons(metricItem) {
  var metricTmp = lodash__WEBPACK_IMPORTED_MODULE_1___default.a.cloneDeep(metricItem);

  metricTmp.Dimensions.forEach(function (item) {
    item.Dimensions = ['instanceId'];
  });
  return metricTmp;
}

/* harmony default export */ __webpack_exports__["default"] = (CPM_STATE);


/***/ }),

/***/ "./datasource/tc_monitor/cvm/datasource.ts":
/*!*************************************************!*\
  !*** ./datasource/tc_monitor/cvm/datasource.ts ***!
  \*************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lodash */ "lodash");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _query_def__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./query_def */ "./datasource/tc_monitor/cvm/query_def.ts");
/* harmony import */ var _common_constants__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../common/constants */ "./datasource/common/constants.ts");
/* harmony import */ var _base_datasource__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../_base/datasource */ "./datasource/tc_monitor/_base/datasource.ts");
var __extends = undefined && undefined.__extends || function () {
  var _extendStatics = function extendStatics(d, b) {
    _extendStatics = Object.setPrototypeOf || {
      __proto__: []
    } instanceof Array && function (d, b) {
      d.__proto__ = b;
    } || function (d, b) {
      for (var p in b) {
        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];
      }
    };

    return _extendStatics(d, b);
  };

  return function (d, b) {
    if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");

    _extendStatics(d, b);

    function __() {
      this.constructor = d;
    }

    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();

var __awaiter = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {
  function adopt(value) {
    return value instanceof P ? value : new P(function (resolve) {
      resolve(value);
    });
  }

  return new (P || (P = Promise))(function (resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }

    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }

    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }

    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};

var __generator = undefined && undefined.__generator || function (thisArg, body) {
  var _ = {
    label: 0,
    sent: function sent() {
      if (t[0] & 1) throw t[1];
      return t[1];
    },
    trys: [],
    ops: []
  },
      f,
      y,
      t,
      g;
  return g = {
    next: verb(0),
    "throw": verb(1),
    "return": verb(2)
  }, typeof Symbol === "function" && (g[Symbol.iterator] = function () {
    return this;
  }), g;

  function verb(n) {
    return function (v) {
      return step([n, v]);
    };
  }

  function step(op) {
    if (f) throw new TypeError("Generator is already executing.");

    while (_) {
      try {
        if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
        if (y = 0, t) op = [op[0] & 2, t.value];

        switch (op[0]) {
          case 0:
          case 1:
            t = op;
            break;

          case 4:
            _.label++;
            return {
              value: op[1],
              done: false
            };

          case 5:
            _.label++;
            y = op[1];
            op = [0];
            continue;

          case 7:
            op = _.ops.pop();

            _.trys.pop();

            continue;

          default:
            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
              _ = 0;
              continue;
            }

            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
              _.label = op[1];
              break;
            }

            if (op[0] === 6 && _.label < t[1]) {
              _.label = t[1];
              t = op;
              break;
            }

            if (t && _.label < t[2]) {
              _.label = t[2];

              _.ops.push(op);

              break;
            }

            if (t[2]) _.ops.pop();

            _.trys.pop();

            continue;
        }

        op = body.call(thisArg, _);
      } catch (e) {
        op = [6, e];
        y = 0;
      } finally {
        f = t = 0;
      }
    }

    if (op[0] & 5) throw op[1];
    return {
      value: op[0] ? op[1] : void 0,
      done: true
    };
  }
};






var CVMDatasource =
/** @class */
function (_super) {
  __extends(CVMDatasource, _super);

  function CVMDatasource(instanceSettings, backendSrv, templateSrv) {
    var _this = _super.call(this, instanceSettings, backendSrv, templateSrv) || this;

    _this.Namespace = 'QCE/CVM';
    _this.InstanceAliasList = _query_def__WEBPACK_IMPORTED_MODULE_1__["CVMInstanceAliasList"];
    _this.InvalidDimensions = {};
    _this.templateQueryIdMap = {
      instance: 'InstanceId'
    };
    _this.InstanceReqConfig = {
      service: 'cvm',
      action: 'DescribeInstances',
      responseField: 'InstanceSet'
    };
    return _this;
  }

  CVMDatasource.prototype.getMetrics = function (region) {
    if (region === void 0) {
      region = 'ap-guangzhou';
    }

    return __awaiter(this, void 0, void 0, function () {
      var rawSet;
      return __generator(this, function (_a) {
        switch (_a.label) {
          case 0:
            return [4
            /*yield*/
            , _super.prototype.getMetrics.call(this, region)];

          case 1:
            rawSet = _a.sent();
            return [2
            /*return*/
            , lodash__WEBPACK_IMPORTED_MODULE_0___default.a.compact(rawSet.map(function (item) {
              if (Object(_query_def__WEBPACK_IMPORTED_MODULE_1__["isValidMetric"])(item)) {
                return Object(_query_def__WEBPACK_IMPORTED_MODULE_1__["modifyDimensons"])(item);
              }

              return null;
            }))];
        }
      });
    });
  };

  CVMDatasource.prototype.getRegions = function () {
    return this.doRequest({
      url: this.url + '/api',
      data: {
        Product: 'cvm'
      }
    }, 'api', {
      action: 'DescribeRegions'
    }).then(function (response) {
      return lodash__WEBPACK_IMPORTED_MODULE_0___default.a.filter(lodash__WEBPACK_IMPORTED_MODULE_0___default.a.map(response.RegionSet || [], function (item) {
        return {
          text: item.RegionName,
          value: item.Region,
          RegionState: item.RegionState
        };
      }), function (item) {
        return item.RegionState === 'AVAILABLE';
      });
    });
  };

  CVMDatasource.prototype.getZones = function (region) {
    var serviceInfo = Object(_common_constants__WEBPACK_IMPORTED_MODULE_2__["GetServiceAPIInfo"])(region, 'api');
    return this.doRequest({
      url: this.url + serviceInfo.path,
      data: {
        Product: 'cvm'
      }
    }, serviceInfo.service, {
      region: region,
      action: 'DescribeZones'
    }).then(function (response) {
      return lodash__WEBPACK_IMPORTED_MODULE_0___default.a.filter(lodash__WEBPACK_IMPORTED_MODULE_0___default.a.map(response.ZoneSet || [], function (item) {
        return {
          text: item.ZoneName,
          value: item.Zone,
          ZoneState: item.ZoneState,
          Zone: item.Zone
        };
      }), function (item) {
        return item.ZoneState === 'AVAILABLE';
      });
    });
  };

  return CVMDatasource;
}(_base_datasource__WEBPACK_IMPORTED_MODULE_3__["BaseDatasource"]);

/* harmony default export */ __webpack_exports__["default"] = (CVMDatasource);

/***/ }),

/***/ "./datasource/tc_monitor/cvm/query.ts":
/*!********************************************!*\
  !*** ./datasource/tc_monitor/cvm/query.ts ***!
  \********************************************/
/*! exports provided: CVMQueryCtrl, cvmQuery */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CVMQueryCtrl", function() { return CVMQueryCtrl; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "cvmQuery", function() { return cvmQuery; });
/* harmony import */ var grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! grafana/app/core/core_module */ "grafana/app/core/core_module");
/* harmony import */ var grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _query_def__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./query_def */ "./datasource/tc_monitor/cvm/query_def.ts");



var CVMQueryCtrl =
/** @class */
function () {
  CVMQueryCtrl.$inject = ["$scope", "$rootScope"];

  /** @ngInject */
  function CVMQueryCtrl($scope, $rootScope) {
    $scope.init = function () {
      $scope.CVMFilterFieldsDescriptor = _query_def__WEBPACK_IMPORTED_MODULE_1__["CVMFilterFieldsDescriptor"];
    };

    $scope.onChecked = function (srcField, dstField) {
      if ($scope.target.queries[srcField] === true) {
        $scope.target.queries[dstField] = false;
      }

      $scope.onChange();
    };

    $scope.getDropdown = function (field) {
      switch (field) {
        case 'zone':
          return $scope.getZones();

        default:
          return [];
      }
    };

    $scope.getZones = function () {
      if (!$scope.region) {
        return [];
      }

      return $scope.datasource.getZones('cvm', $scope.region);
    };

    $scope.init();
  }

  return CVMQueryCtrl;
}();


var template = "\n<div class=\"tc-sub-params\" ng-if=\"showDetail\">\n<label class=\"gf-form-label tc-info-label\">\n  Instances are queried by following params.\n  <a target=\"_blank\" style=\"text-decoration:underline;color:#006eff;font-size:medium\" href=\"https://cloud.tencent.com/document/api/213/15728\">Click here to get API doc.</a>\n</label>\n<div class=\"gf-form-inline\">\n  <div class=\"gf-form\">\n    <label class=\"gf-form-label width-14\">\n      Offset\n      <info-popover mode=\"right-normal\">\n        \u504F\u79FB\u91CF, \u4F8B\u5982Offset=20&Limit=20 \u8FD4\u56DE\u7B2C 20 \u5230 40 \u9879\n      </info-popover>\n    </label>\n    <input type=\"number\" ng-model=\"target.queries.Offset\" class=\"gf-form-input width-10\" ng-min=\"0\" ng-change=\"onChange()\">\n  </div>\n</div>\n<div class=\"gf-form-inline\">\n  <div class=\"gf-form\">\n    <label class=\"gf-form-label width-14\">\n      Limit\n      <info-popover mode=\"right-normal\">\n        \u5355\u6B21\u8BF7\u6C42\u8FD4\u56DE\u7684\u6570\u91CF\uFF0C\u9ED8\u8BA4\u4E3A20\uFF0C\u6700\u5C0F\u503C\u4E3A1\uFF0C\u6700\u5927\u503C\u4E3A100\n      </info-popover>\n    </label>\n    <input type=\"number\" ng-model=\"target.queries.Limit\" class=\"gf-form-input width-10\" ng-min=\"1\" ng-max=\"100\" ng-change=\"onChange()\">\n  </div>\n</div>\n<div class=\"gf-form-inline\">\n  <div class=\"gf-form\">\n    <label class=\"gf-form-label width-9\">\n      InstanceIds\n      <info-popover mode=\"right-normal\">\n        \u5B9E\u4F8B ID\uFF0C\u6BCF\u6B21\u8BF7\u6C42\u7684\u5B9E\u4F8B\u7684\u4E0A\u9650\u4E3A100\uFF0C\u53C2\u6570\u4E0D\u652F\u6301\u540C\u65F6\u6307\u5B9A InstanceIds \u548C Filters\n      </info-popover>\n    </label>\n    <gf-form-switch class=\"gf-form tc-switch\" label-class=\"width-7\" checked=\"target.queries.instanceIdsChecked\"\n      switch-class=\"max-width-5\" on-change=\"onChecked('instanceIdsChecked', 'filtersChecked')\"></gf-form-switch>\n  </div>\n</div>\n<div class=\"gf-form-inline tc-sub-params\" ng-if=\"target.queries.instanceIdsChecked\">\n  <multi-condition type=\"'input'\" max-cond=\"100\" value=\"target.queries.InstanceIds\" on-change=\"onChange()\">\n  </multi-condition>\n</div>\n<div class=\"gf-form-inline\">\n  <div class=\"gf-form\">\n    <label class=\"gf-form-label width-9\">\n      Filters\n      <info-popover mode=\"right-normal\">\n        \u8FC7\u6EE4\u6761\u4EF6\uFF0C\u6BCF\u6B21\u8BF7\u6C42\u7684 Filters \u7684\u4E0A\u9650\u4E3A10\uFF0CFilter.Values \u7684\u4E0A\u9650\u4E3A5\u3002\u53C2\u6570\u4E0D\u652F\u6301\u540C\u65F6\u6307\u5B9A InstanceIds \u548C Filters\n      </info-popover>\n    </label>\n    <gf-form-switch class=\"gf-form tc-switch\" label-class=\"width-7\" checked=\"target.queries.filtersChecked\" switch-class=\"max-width-5\"\n      on-change=\"onChecked('filtersChecked','instanceIdsChecked')\"></gf-form-switch>\n  </div>\n</div>\n<div ng-if=\"target.queries.filtersChecked\" class=\"tc-sub-params\">\n  <div class=\"gf-form-inline\" ng-repeat=\"field in CVMFilterFieldsDescriptor\">\n    <label class=\"gf-form-label width-14\">\n      {{ field.key }}\n      <info-popover mode=\"right-normal\">\n        {{ field.cnDescriptor }}\n        <a target=\"_blank\" href=\"{{field.link}}\" ng-if=\"field.link\">Click here for more information.</a>\n      </info-popover>\n    </label>\n    <multi-condition\n      ng-if=\"field.type === 'dropdownmulti'\"\n      type=\"'dropdown'\"\n      max-cond=\"5\"\n      value=\"target.queries.Filters[field.key]\"\n      get-options=\"getDropdown(field.key)\"\n      on-change=\"onChange()\"\n    ></multi-condition>\n    <multi-condition\n      ng-if=\"field.type === 'inputNumbermulti'\"\n      type=\"'inputNumber'\"\n      max-cond=\"5\"\n      value=\"target.queries.Filters[field.key]\"\n      maxNum=\"field.max\"\n      minNum=\"field.min\"\n      on-change=\"onChange()\"\n    ></multi-condition>\n    <multi-condition\n      ng-if=\"field.type === 'inputmulti'\"\n      type=\"'input'\"\n      max-cond=\"5\"\n      value=\"target.queries.Filters[field.key]\"\n      on-change=\"onChange()\"\n    ></multi-condition>\n    <custom-select-dropdown\n      ng-if=\"field.type === 'select'\"\n      value=\"target.queries.Filters[field.key]\"\n      options=\"field.list\"\n      multiple=\"true\"\n      on-change=\"onChange()\"\n    ></custom-select-dropdown>\n  </div>\n</div>\n\n</div>\n";
function cvmQuery() {
  return {
    template: template,
    controller: CVMQueryCtrl,
    restrict: 'E',
    scope: {
      target: '=',
      showDetail: '=',
      region: '=',
      datasource: '=',
      getDropdownOptions: '&',
      onChange: '&'
    }
  };
}
grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0___default.a.directive('cvmQuery', cvmQuery);

/***/ }),

/***/ "./datasource/tc_monitor/cvm/query_def.ts":
/*!************************************************!*\
  !*** ./datasource/tc_monitor/cvm/query_def.ts ***!
  \************************************************/
/*! exports provided: default, CVMFilterFieldsDescriptor, CVMInstanceAliasList, isValidMetric, modifyDimensons, templateQueryIdMap, CVMGetInstanceQueryParams */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CVMFilterFieldsDescriptor", function() { return CVMFilterFieldsDescriptor; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CVMInstanceAliasList", function() { return CVMInstanceAliasList; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isValidMetric", function() { return isValidMetric; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "modifyDimensons", function() { return modifyDimensons; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "templateQueryIdMap", function() { return templateQueryIdMap; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CVMGetInstanceQueryParams", function() { return GetInstanceQueryParams; });
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lodash */ "lodash");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__);
var __assign = undefined && undefined.__assign || function () {
  __assign = Object.assign || function (t) {
    for (var s, i = 1, n = arguments.length; i < n; i++) {
      s = arguments[i];

      for (var p in s) {
        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
      }
    }

    return t;
  };

  return __assign.apply(this, arguments);
};


var instanceChargeTypes = [{
  text: '预付费',
  value: 'PREPAID'
}, {
  text: '后付费',
  value: 'POSTPAID_BY_HOUR'
}, {
  text: 'CDH付费',
  value: 'CDHPAID'
}];
var CVMFilterFields = {
  zone: [],
  'project-id': [],
  'host-id': [],
  'vpc-id': [],
  'subnet-id': [],
  'instance-id': [],
  'security-group-id': [],
  'instance-name': [],
  'instance-charge-type': {},
  'private-ip-address': [],
  'public-ip-address': [],
  'tag-key': []
};
var CVMFilterFieldsDescriptor = [{
  key: 'zone',
  enDescriptor: 'Zone',
  cnDescriptor: '可用区',
  link: '',
  type: 'dropdownmulti'
}, {
  key: 'project-id',
  enDescriptor: 'Project ID',
  cnDescriptor: '项目ID',
  link: 'https://cloud.tencent.com/document/api/378/4400',
  type: 'inputNumbermulti'
}, {
  key: 'host-id',
  enDescriptor: 'CDH ID',
  cnDescriptor: 'CDH ID',
  link: 'https://cloud.tencent.com/document/product/416/19730',
  type: 'inputmulti'
}, {
  key: 'vpc-id',
  enDescriptor: 'VPC ID',
  cnDescriptor: 'VPC ID',
  link: '',
  type: 'inputmulti'
}, {
  key: 'subnet-id',
  enDescriptor: 'Subnet ID',
  cnDescriptor: '子网ID',
  link: '',
  type: 'inputmulti'
}, {
  key: 'instance-id',
  enDescriptor: 'Instance ID',
  cnDescriptor: '实例ID',
  link: '',
  type: 'inputmulti'
}, {
  key: 'security-group-id',
  enDescriptor: 'Security Group ID',
  cnDescriptor: '安全组ID',
  link: '',
  type: 'inputmulti'
}, {
  key: 'instance-name',
  enDescriptor: 'Instance Name',
  cnDescriptor: '实例名称',
  link: '',
  type: 'inputmulti'
}, {
  key: 'tag-key',
  enDescriptor: '标签简',
  cnDescriptor: '标签简',
  link: '',
  type: 'inputmulti'
}, {
  key: 'instance-charge-type',
  enDescriptor: 'Instance Charge Type',
  cnDescriptor: '实例计费模式',
  link: '',
  type: 'select',
  list: instanceChargeTypes
}, {
  key: 'private-ip-address',
  enDescriptor: 'Private IP Address',
  cnDescriptor: '实例主网卡的内网IP',
  link: '',
  type: 'inputmulti'
}, {
  key: 'public-ip-address',
  enDescriptor: 'Public IP Address',
  cnDescriptor: '实例主网卡的公网IP，包含实例创建时自动分配的IP和实例创建后手动绑定的弹性IP',
  link: '',
  type: 'inputmulti'
}];
var CVM_STATE = {
  region: '',
  metricName: '',
  metricUnit: '',
  period: undefined,
  dimensionObject: null,
  instance: '',
  instanceAlias: 'InstanceId',
  queries: {
    Limit: 20,
    Offset: 0,
    instanceIdsChecked: false,
    filtersChecked: false,
    InstanceIds: [''],
    Filters: __assign({}, CVMFilterFields)
  }
};

function GetInstanceQueryParams(queries) {
  if (queries === void 0) {
    queries = {};
  }

  var params = {};

  if (!lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isEmpty(queries)) {
    params.Limit = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(queries, 'Limit', 20) || 20;
    params.Offset = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(queries, 'Offset', 0) || 0;

    if (queries.instanceIdsChecked) {
      if (lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isArray(queries.InstanceIds)) {
        var InstanceIds = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.compact(queries.InstanceIds);

        if (lodash__WEBPACK_IMPORTED_MODULE_0___default.a.uniq(InstanceIds).length > 0) {
          params.InstanceIds = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.uniq(InstanceIds).slice(0, 100);
        }
      }
    } else if (queries.filtersChecked) {
      var Filters_1 = [];

      lodash__WEBPACK_IMPORTED_MODULE_0___default.a.forEach(queries.Filters, function (item, key) {
        if (Filters_1.length > 9) {
          return;
        }

        if (lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isArray(item)) {
          item = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.compact(item);

          if (item.length > 0) {
            Filters_1.push({
              Name: key,
              Values: lodash__WEBPACK_IMPORTED_MODULE_0___default.a.uniq(item).slice(0, 5)
            });
          }
        } else if (lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isObject(item)) {
          if (!lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isEmpty(lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(item, 'value', []))) {
            Filters_1.push({
              Name: key,
              Values: lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(item, 'value', []).slice(0, 5)
            });
          }
        }
      });

      if (Filters_1.length > 0) {
        params.Filters = Filters_1;
      }
    }
  }

  return params;
}

var CVMInstanceAliasList = ['InstanceId', 'InstanceName', 'PrivateIpAddresses', 'PublicIpAddresses'];
var CVMValidMetricsT = ['CPUUsage', 'CpuLoadavg', 'Cpuloadavg5m', 'Cpuloadavg15m', 'BaseCpuUsage', 'GpuMemTotal', 'GpuMemUsage', 'GpuMemUsed', 'GpuPowDraw', 'GpuPowLimit', 'GpuPowUsage', 'GpuTemp', 'GpuUtil', 'LanOuttraffic', 'LanIntraffic', 'LanOutpkg', 'LanInpkg', 'WanOuttraffic', 'WanIntraffic', 'WanOutpkg', 'WanInpkg', 'AccOuttraffic', 'TcpCurrEstab', 'TimeOffset', 'MemUsed', 'MemUsage', 'CvmDiskUsage', 'BaseCpuUsage', 'VmDiskReadIops']; // const CVMInvalidDemensions = {
//   'vm_uuid': 'InstanceId',
//   'vmUuid': 'InstanceId',
// };

var templateQueryIdMap = {
  instance: 'InstanceId'
};

function isValidMetric(metric) {
  var CVMValidMetrics = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.map(CVMValidMetricsT, lodash__WEBPACK_IMPORTED_MODULE_0___default.a.toUpper);

  return lodash__WEBPACK_IMPORTED_MODULE_0___default.a.indexOf(CVMValidMetrics, lodash__WEBPACK_IMPORTED_MODULE_0___default.a.toUpper(metric.MetricName)) !== -1;
}

function modifyDimensons(metricItem) {
  var metricTmp = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.cloneDeep(metricItem);

  metricTmp.Dimensions.forEach(function (item) {
    item.Dimensions = ['InstanceId'];
  });
  return metricTmp;
}

/* harmony default export */ __webpack_exports__["default"] = (CVM_STATE);


/***/ }),

/***/ "./datasource/tc_monitor/cynosdb_mysql/datasource.ts":
/*!***********************************************************!*\
  !*** ./datasource/tc_monitor/cynosdb_mysql/datasource.ts ***!
  \***********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _query_def__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./query_def */ "./datasource/tc_monitor/cynosdb_mysql/query_def.ts");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lodash */ "lodash");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _base_datasource__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../_base/datasource */ "./datasource/tc_monitor/_base/datasource.ts");
var __extends = undefined && undefined.__extends || function () {
  var _extendStatics = function extendStatics(d, b) {
    _extendStatics = Object.setPrototypeOf || {
      __proto__: []
    } instanceof Array && function (d, b) {
      d.__proto__ = b;
    } || function (d, b) {
      for (var p in b) {
        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];
      }
    };

    return _extendStatics(d, b);
  };

  return function (d, b) {
    if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");

    _extendStatics(d, b);

    function __() {
      this.constructor = d;
    }

    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();

var __awaiter = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {
  function adopt(value) {
    return value instanceof P ? value : new P(function (resolve) {
      resolve(value);
    });
  }

  return new (P || (P = Promise))(function (resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }

    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }

    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }

    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};

var __generator = undefined && undefined.__generator || function (thisArg, body) {
  var _ = {
    label: 0,
    sent: function sent() {
      if (t[0] & 1) throw t[1];
      return t[1];
    },
    trys: [],
    ops: []
  },
      f,
      y,
      t,
      g;
  return g = {
    next: verb(0),
    "throw": verb(1),
    "return": verb(2)
  }, typeof Symbol === "function" && (g[Symbol.iterator] = function () {
    return this;
  }), g;

  function verb(n) {
    return function (v) {
      return step([n, v]);
    };
  }

  function step(op) {
    if (f) throw new TypeError("Generator is already executing.");

    while (_) {
      try {
        if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
        if (y = 0, t) op = [op[0] & 2, t.value];

        switch (op[0]) {
          case 0:
          case 1:
            t = op;
            break;

          case 4:
            _.label++;
            return {
              value: op[1],
              done: false
            };

          case 5:
            _.label++;
            y = op[1];
            op = [0];
            continue;

          case 7:
            op = _.ops.pop();

            _.trys.pop();

            continue;

          default:
            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
              _ = 0;
              continue;
            }

            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
              _.label = op[1];
              break;
            }

            if (op[0] === 6 && _.label < t[1]) {
              _.label = t[1];
              t = op;
              break;
            }

            if (t && _.label < t[2]) {
              _.label = t[2];

              _.ops.push(op);

              break;
            }

            if (t[2]) _.ops.pop();

            _.trys.pop();

            continue;
        }

        op = body.call(thisArg, _);
      } catch (e) {
        op = [6, e];
        y = 0;
      } finally {
        f = t = 0;
      }
    }

    if (op[0] & 5) throw op[1];
    return {
      value: op[0] ? op[1] : void 0,
      done: true
    };
  }
};



 // import { t } from '../../../locale';

var CYNOSDBMYSQLDatasource =
/** @class */
function (_super) {
  __extends(CYNOSDBMYSQLDatasource, _super);

  function CYNOSDBMYSQLDatasource(instanceSettings, backendSrv, templateSrv) {
    var _this = _super.call(this, instanceSettings, backendSrv, templateSrv) || this;

    _this.Namespace = _query_def__WEBPACK_IMPORTED_MODULE_0__["namespace"];
    _this.InstanceAliasList = _query_def__WEBPACK_IMPORTED_MODULE_0__["CYNOSDBMYSQLInstanceAliasList"];
    _this.InvalidDimensions = _query_def__WEBPACK_IMPORTED_MODULE_0__["CYNOSDBInvalidDemensions"];
    _this.templateQueryIdMap = _query_def__WEBPACK_IMPORTED_MODULE_0__["templateQueryIdMap"];
    _this.checkKeys = _query_def__WEBPACK_IMPORTED_MODULE_0__["checkKeys"]; // 此处service是接口的配置参数，需和plugin.json里一致，和constant.ts中SERVICES_API_INFO保持一致

    _this.InstanceReqConfig = {
      service: 'cynosdb',
      action: 'DescribeInstances',
      responseField: 'InstanceSet'
    };
    return _this;
  }

  CYNOSDBMYSQLDatasource.prototype.getMetrics = function (region) {
    if (region === void 0) {
      region = 'ap-guangzhou';
    }

    return __awaiter(this, void 0, void 0, function () {
      var rawSet;
      return __generator(this, function (_a) {
        switch (_a.label) {
          case 0:
            return [4
            /*yield*/
            , _super.prototype.getMetrics.call(this, region)];

          case 1:
            rawSet = _a.sent();
            return [2
            /*return*/
            , rawSet.map(function (item) {
              return Object(_query_def__WEBPACK_IMPORTED_MODULE_0__["modifyDimensons"])(item);
            })];
        }
      });
    });
  }; // getRegions() {
  //   return Promise.resolve(regionSupported.map(({ value }) => ({ value, text: t(value) })));
  // }


  CYNOSDBMYSQLDatasource.prototype.getRegions = function () {
    return this.doRequest({
      url: this.url + '/api',
      data: {
        Product: 'cynosdbmysql'
      }
    }, 'api', {
      action: 'DescribeRegions'
    }).then(function (response) {
      return lodash__WEBPACK_IMPORTED_MODULE_1___default.a.filter(lodash__WEBPACK_IMPORTED_MODULE_1___default.a.map(response.RegionSet || [], function (item) {
        return {
          text: item.RegionName,
          value: item.Region,
          RegionState: item.RegionState
        };
      }), function (item) {
        return item.RegionState === 'AVAILABLE';
      });
    });
  }; // 仅对维度组合是InstanceId的指标，其他指标不支持


  CYNOSDBMYSQLDatasource.prototype.getDefaultInsObj = function (ins) {
    var _a;

    return _a = {}, _a[_query_def__WEBPACK_IMPORTED_MODULE_0__["templateQueryIdMap"].instance] = ins, _a;
  };

  return CYNOSDBMYSQLDatasource;
}(_base_datasource__WEBPACK_IMPORTED_MODULE_2__["BaseDatasource"]);

/* harmony default export */ __webpack_exports__["default"] = (CYNOSDBMYSQLDatasource);

/***/ }),

/***/ "./datasource/tc_monitor/cynosdb_mysql/query.ts":
/*!******************************************************!*\
  !*** ./datasource/tc_monitor/cynosdb_mysql/query.ts ***!
  \******************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _base_query__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../_base/query */ "./datasource/tc_monitor/_base/query.ts");
/* harmony import */ var _query_def__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./query_def */ "./datasource/tc_monitor/cynosdb_mysql/query_def.ts");


Object(_base_query__WEBPACK_IMPORTED_MODULE_0__["default"])(_query_def__WEBPACK_IMPORTED_MODULE_1__["queryEditorName"], _query_def__WEBPACK_IMPORTED_MODULE_1__["queryEditorConfig"]);

/***/ }),

/***/ "./datasource/tc_monitor/cynosdb_mysql/query_def.ts":
/*!**********************************************************!*\
  !*** ./datasource/tc_monitor/cynosdb_mysql/query_def.ts ***!
  \**********************************************************/
/*! exports provided: default, cynosdbMysqlFilterFieldsDescriptor, templateQueryIdMap, CYNOSDBMYSQLInstanceAliasList, CYNOSDBInvalidDemensions, namespace, queryEditorName, queryEditorConfig, regionSupported, modifyDimensons, checkKeys, CYNOSDBMYSQLGetInstanceQueryParams */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "cynosdbMysqlFilterFieldsDescriptor", function() { return cynosdbMysqlFilterFieldsDescriptor; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "templateQueryIdMap", function() { return templateQueryIdMap; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CYNOSDBMYSQLInstanceAliasList", function() { return CYNOSDBMYSQLInstanceAliasList; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CYNOSDBInvalidDemensions", function() { return CYNOSDBInvalidDemensions; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "namespace", function() { return namespace; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "queryEditorName", function() { return queryEditorName; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "queryEditorConfig", function() { return queryEditorConfig; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "regionSupported", function() { return regionSupported; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "modifyDimensons", function() { return modifyDimensons; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "checkKeys", function() { return checkKeys; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CYNOSDBMYSQLGetInstanceQueryParams", function() { return GetInstanceQueryParams; });
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lodash */ "lodash");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _common_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../common/utils */ "./datasource/common/utils.ts");


var namespace = 'QCE/CYNOSDB_MYSQL'; // 按照驼峰方式命名，和SERVICES保持一致，abcDeF会成为angular组件名字<abc-de-f-query />

var queryEditorName = 'cynosdbMysqlQuery';
var cynosdbMysqlFilterFields = {
  Limit: 20,
  Offset: 0,
  OrderBy: {},
  OrderByType: {},
  InstanceIds: [],
  DbType: {} // Status: '',

};
var cynosdbMysqlFilterFieldsDescriptor = [{
  key: 'Offset',
  enDescriptor: 'Offset',
  cnDescriptor: '偏移量, 例如Offset=20&Limit=20 返回第 20 到 40 项',
  link: '',
  type: 'inputNumber',
  min: 0
}, {
  key: 'Limit',
  enDescriptor: 'Limit',
  cnDescriptor: '单次请求返回的数量，默认为20，最小值为1，最大值为100',
  link: '',
  type: 'inputNumber',
  min: 1,
  max: 1000
}, {
  key: 'InstanceIds',
  enDescriptor: 'InstanceIds',
  cnDescriptor: '实例id列表',
  link: '',
  type: 'inputMulti'
}, {
  key: 'OrderBy',
  enDescriptor: 'OrderBy',
  cnDescriptor: '排序字段',
  link: '',
  type: 'select',
  list: [{
    text: '创建时间',
    value: 'CREATETIME'
  }, {
    text: '过期时间',
    value: 'PERIODENDTIME'
  }]
}, {
  key: 'OrderByType',
  enDescriptor: 'OrderByType',
  cnDescriptor: '排序类型',
  link: '',
  type: 'select',
  list: [{
    text: '升序',
    value: 'ASC'
  }, {
    text: '降序',
    value: 'DESC'
  }]
}, {
  key: 'DbType',
  enDescriptor: 'DbType',
  cnDescriptor: '引擎类型',
  link: '',
  type: 'select',
  list: [{
    text: 'MYSQL',
    value: 'MYSQL'
  }, {
    text: 'POSTGRESQL',
    value: 'POSTGRESQL'
  }]
} // {
//   key: 'Status',
//   enDescriptor: 'Status',
//   cnDescriptor: '实例状态',
//   link: '',
//   type: 'input',
// },
]; // regions for dropdown

var regionSupported = [{
  value: 'ap-beijing'
}, {
  value: 'ap-guangzhou'
}, {
  value: 'ap-nanjing'
}, {
  value: 'ap-shanghai'
}];
var queryEditorConfig = {
  instanceDocUrl: 'https://cloud.tencent.com/document/api/1003/48334',
  namespace: namespace,
  fieldDescriptor: cynosdbMysqlFilterFieldsDescriptor
};
var CYNOSDB_STATE = {
  region: '',
  metricName: '',
  metricUnit: '',
  period: undefined,
  dimensionObject: null,
  instance: '',
  instanceAlias: 'InstanceId',
  queries: cynosdbMysqlFilterFields
};

function GetInstanceQueryParams(queries) {
  if (queries === void 0) {
    queries = {};
  }

  return Object(_common_utils__WEBPACK_IMPORTED_MODULE_1__["instanceQueryParamsBaseParse"])(queries, false);
} // 和文件名字一样CYNOSDBMYSQL


var CYNOSDBMYSQLInstanceAliasList = ['InstanceId', 'InstanceName'];
var templateQueryIdMap = {
  instance: 'InstanceId'
};
var CYNOSDBInvalidDemensions = {
  instanceid: 'InstanceId',
  instanceId: 'InstanceId'
};
var checkKeys = ['instanceId'];

function modifyDimensons(metricItem) {
  var metricTmp = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.cloneDeep(metricItem);

  metricTmp.Dimensions.forEach(function (item) {
    item.Dimensions = ['InstanceId'];
  });
  return metricTmp;
}

/* harmony default export */ __webpack_exports__["default"] = (CYNOSDB_STATE);


/***/ }),

/***/ "./datasource/tc_monitor/dc/datasource.ts":
/*!************************************************!*\
  !*** ./datasource/tc_monitor/dc/datasource.ts ***!
  \************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _query_def__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./query_def */ "./datasource/tc_monitor/dc/query_def.ts");
/* harmony import */ var _base_datasource__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../_base/datasource */ "./datasource/tc_monitor/_base/datasource.ts");
var __extends = undefined && undefined.__extends || function () {
  var _extendStatics = function extendStatics(d, b) {
    _extendStatics = Object.setPrototypeOf || {
      __proto__: []
    } instanceof Array && function (d, b) {
      d.__proto__ = b;
    } || function (d, b) {
      for (var p in b) {
        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];
      }
    };

    return _extendStatics(d, b);
  };

  return function (d, b) {
    if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");

    _extendStatics(d, b);

    function __() {
      this.constructor = d;
    }

    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();

var __awaiter = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {
  function adopt(value) {
    return value instanceof P ? value : new P(function (resolve) {
      resolve(value);
    });
  }

  return new (P || (P = Promise))(function (resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }

    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }

    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }

    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};

var __generator = undefined && undefined.__generator || function (thisArg, body) {
  var _ = {
    label: 0,
    sent: function sent() {
      if (t[0] & 1) throw t[1];
      return t[1];
    },
    trys: [],
    ops: []
  },
      f,
      y,
      t,
      g;
  return g = {
    next: verb(0),
    "throw": verb(1),
    "return": verb(2)
  }, typeof Symbol === "function" && (g[Symbol.iterator] = function () {
    return this;
  }), g;

  function verb(n) {
    return function (v) {
      return step([n, v]);
    };
  }

  function step(op) {
    if (f) throw new TypeError("Generator is already executing.");

    while (_) {
      try {
        if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
        if (y = 0, t) op = [op[0] & 2, t.value];

        switch (op[0]) {
          case 0:
          case 1:
            t = op;
            break;

          case 4:
            _.label++;
            return {
              value: op[1],
              done: false
            };

          case 5:
            _.label++;
            y = op[1];
            op = [0];
            continue;

          case 7:
            op = _.ops.pop();

            _.trys.pop();

            continue;

          default:
            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
              _ = 0;
              continue;
            }

            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
              _.label = op[1];
              break;
            }

            if (op[0] === 6 && _.label < t[1]) {
              _.label = t[1];
              t = op;
              break;
            }

            if (t && _.label < t[2]) {
              _.label = t[2];

              _.ops.push(op);

              break;
            }

            if (t[2]) _.ops.pop();

            _.trys.pop();

            continue;
        }

        op = body.call(thisArg, _);
      } catch (e) {
        op = [6, e];
        y = 0;
      } finally {
        f = t = 0;
      }
    }

    if (op[0] & 5) throw op[1];
    return {
      value: op[0] ? op[1] : void 0,
      done: true
    };
  }
};




var DCDatasource =
/** @class */
function (_super) {
  __extends(DCDatasource, _super);

  function DCDatasource(instanceSettings, backendSrv, templateSrv) {
    var _this = _super.call(this, instanceSettings, backendSrv, templateSrv) || this;

    _this.Namespace = _query_def__WEBPACK_IMPORTED_MODULE_0__["namespace"];
    _this.InstanceAliasList = _query_def__WEBPACK_IMPORTED_MODULE_0__["DCInstanceAliasList"];
    _this.InvalidDimensions = _query_def__WEBPACK_IMPORTED_MODULE_0__["DCInvalidDemensions"];
    _this.templateQueryIdMap = {
      instance: 'DirectConnectId'
    };
    _this.InstanceReqConfig = {
      service: 'dc',
      action: 'DescribeDirectConnects',
      responseField: 'DirectConnectSet'
    };
    return _this;
  }

  DCDatasource.prototype.getMetrics = function (region) {
    if (region === void 0) {
      region = 'ap-guangzhou';
    }

    return __awaiter(this, void 0, void 0, function () {
      var rawSet;
      return __generator(this, function (_a) {
        switch (_a.label) {
          case 0:
            return [4
            /*yield*/
            , _super.prototype.getMetrics.call(this, region)];

          case 1:
            rawSet = _a.sent();
            return [2
            /*return*/
            , rawSet.map(function (item) {
              return Object(_query_def__WEBPACK_IMPORTED_MODULE_0__["modifyDimensons"])(item);
            })];
        }
      });
    });
  };

  return DCDatasource;
}(_base_datasource__WEBPACK_IMPORTED_MODULE_1__["BaseDatasource"]);

/* harmony default export */ __webpack_exports__["default"] = (DCDatasource);

/***/ }),

/***/ "./datasource/tc_monitor/dc/query.ts":
/*!*******************************************!*\
  !*** ./datasource/tc_monitor/dc/query.ts ***!
  \*******************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _base_query__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../_base/query */ "./datasource/tc_monitor/_base/query.ts");
/* harmony import */ var _query_def__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./query_def */ "./datasource/tc_monitor/dc/query_def.ts");


Object(_base_query__WEBPACK_IMPORTED_MODULE_0__["default"])(_query_def__WEBPACK_IMPORTED_MODULE_1__["queryEditorName"], _query_def__WEBPACK_IMPORTED_MODULE_1__["queryEditorConfig"]);

/***/ }),

/***/ "./datasource/tc_monitor/dc/query_def.ts":
/*!***********************************************!*\
  !*** ./datasource/tc_monitor/dc/query_def.ts ***!
  \***********************************************/
/*! exports provided: default, DCFilterFieldsDescriptor, templateQueryIdMap, DCInstanceAliasList, DCInvalidDemensions, namespace, queryEditorName, queryEditorConfig, modifyDimensons, DCGetInstanceQueryParams */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DCFilterFieldsDescriptor", function() { return DCFilterFieldsDescriptor; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "templateQueryIdMap", function() { return templateQueryIdMap; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DCInstanceAliasList", function() { return DCInstanceAliasList; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DCInvalidDemensions", function() { return DCInvalidDemensions; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "namespace", function() { return namespace; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "queryEditorName", function() { return queryEditorName; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "queryEditorConfig", function() { return queryEditorConfig; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "modifyDimensons", function() { return modifyDimensons; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DCGetInstanceQueryParams", function() { return GetInstanceQueryParams; });
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lodash */ "lodash");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _common_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../common/utils */ "./datasource/common/utils.ts");


var namespace = 'QCE/DC';
var queryEditorName = 'dcQuery';
var DCFilterFields = {
  Limit: 20,
  Offset: 0,
  DirectConnectIds: []
};
var DCFilterFieldsDescriptor = [{
  key: 'Offset',
  enDescriptor: 'Offset',
  cnDescriptor: '偏移量, 例如Offset=20&Limit=20 返回第 20 到 40 项',
  link: '',
  type: 'inputNumber',
  min: 0
}, {
  key: 'Limit',
  enDescriptor: 'Limit',
  cnDescriptor: '单次请求返回的数量，默认为20，最小值为1，最大值为100',
  link: '',
  type: 'inputNumber',
  min: 1,
  max: 100
}, {
  key: 'DirectConnectIds',
  enDescriptor: 'DirectConnectIds',
  cnDescriptor: '物理专线 ID',
  link: '',
  type: 'inputMulti'
}];
var queryEditorConfig = {
  instanceDocUrl: 'https://cloud.tencent.com/document/api/216/34826',
  namespace: namespace,
  fieldDescriptor: DCFilterFieldsDescriptor
};
var DC_STATE = {
  region: '',
  metricName: '',
  metricUnit: '',
  period: undefined,
  dimensionObject: null,
  instance: '',
  instanceAlias: 'DirectConnectId',
  queries: DCFilterFields
};

function GetInstanceQueryParams(queries) {
  if (queries === void 0) {
    queries = {};
  }

  return Object(_common_utils__WEBPACK_IMPORTED_MODULE_1__["instanceQueryParamsBaseParse"])(queries, false);
}

var DCInstanceAliasList = ['DirectConnectId', 'DirectConnectName'];
var templateQueryIdMap = {
  instance: 'DirectConnectId'
};
var DCInvalidDemensions = {
  directConnectId: 'DirectConnectId',
  directconnectid: 'DirectConnectId'
};

function modifyDimensons(metricItem) {
  var metricTmp = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.cloneDeep(metricItem);

  metricTmp.Dimensions.forEach(function (item) {
    item.Dimensions = ['directConnectId'];
  });
  return metricTmp;
}

/* harmony default export */ __webpack_exports__["default"] = (DC_STATE);


/***/ }),

/***/ "./datasource/tc_monitor/dcdb/datasource.ts":
/*!**************************************************!*\
  !*** ./datasource/tc_monitor/dcdb/datasource.ts ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _query_def__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./query_def */ "./datasource/tc_monitor/dcdb/query_def.ts");
/* harmony import */ var _base_datasource__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../_base/datasource */ "./datasource/tc_monitor/_base/datasource.ts");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lodash */ "lodash");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _common_constants__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../common/constants */ "./datasource/common/constants.ts");
/* harmony import */ var _common_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../common/utils */ "./datasource/common/utils.ts");
/* harmony import */ var _common_datasourceStorage__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../common/datasourceStorage */ "./datasource/common/datasourceStorage.ts");
/* harmony import */ var _locale__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../locale */ "./locale/index.ts");
var __extends = undefined && undefined.__extends || function () {
  var _extendStatics = function extendStatics(d, b) {
    _extendStatics = Object.setPrototypeOf || {
      __proto__: []
    } instanceof Array && function (d, b) {
      d.__proto__ = b;
    } || function (d, b) {
      for (var p in b) {
        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];
      }
    };

    return _extendStatics(d, b);
  };

  return function (d, b) {
    if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");

    _extendStatics(d, b);

    function __() {
      this.constructor = d;
    }

    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();

var __awaiter = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {
  function adopt(value) {
    return value instanceof P ? value : new P(function (resolve) {
      resolve(value);
    });
  }

  return new (P || (P = Promise))(function (resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }

    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }

    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }

    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};

var __generator = undefined && undefined.__generator || function (thisArg, body) {
  var _ = {
    label: 0,
    sent: function sent() {
      if (t[0] & 1) throw t[1];
      return t[1];
    },
    trys: [],
    ops: []
  },
      f,
      y,
      t,
      g;
  return g = {
    next: verb(0),
    "throw": verb(1),
    "return": verb(2)
  }, typeof Symbol === "function" && (g[Symbol.iterator] = function () {
    return this;
  }), g;

  function verb(n) {
    return function (v) {
      return step([n, v]);
    };
  }

  function step(op) {
    if (f) throw new TypeError("Generator is already executing.");

    while (_) {
      try {
        if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
        if (y = 0, t) op = [op[0] & 2, t.value];

        switch (op[0]) {
          case 0:
          case 1:
            t = op;
            break;

          case 4:
            _.label++;
            return {
              value: op[1],
              done: false
            };

          case 5:
            _.label++;
            y = op[1];
            op = [0];
            continue;

          case 7:
            op = _.ops.pop();

            _.trys.pop();

            continue;

          default:
            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
              _ = 0;
              continue;
            }

            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
              _.label = op[1];
              break;
            }

            if (op[0] === 6 && _.label < t[1]) {
              _.label = t[1];
              t = op;
              break;
            }

            if (t && _.label < t[2]) {
              _.label = t[2];

              _.ops.push(op);

              break;
            }

            if (t[2]) _.ops.pop();

            _.trys.pop();

            continue;
        }

        op = body.call(thisArg, _);
      } catch (e) {
        op = [6, e];
        y = 0;
      } finally {
        f = t = 0;
      }
    }

    if (op[0] & 5) throw op[1];
    return {
      value: op[0] ? op[1] : void 0,
      done: true
    };
  }
};









var DCDatasource =
/** @class */
function (_super) {
  __extends(DCDatasource, _super);

  function DCDatasource(instanceSettings, backendSrv, templateSrv) {
    var _this = _super.call(this, instanceSettings, backendSrv, templateSrv) || this;

    _this.Namespace = _query_def__WEBPACK_IMPORTED_MODULE_0__["namespace"];
    _this.InstanceAliasList = _query_def__WEBPACK_IMPORTED_MODULE_0__["DCDBInstanceAliasList"];
    _this.InvalidDimensions = _query_def__WEBPACK_IMPORTED_MODULE_0__["DCDBInvalidDemensions"];
    _this.templateQueryIdMap = _query_def__WEBPACK_IMPORTED_MODULE_0__["templateQueryIdMap"]; // 此处service是接口的配置参数，需和plugin.json里一致，和constant.ts中SERVICES_API_INFO保持一致

    _this.InstanceReqConfig = {
      service: 'dcdb',
      action: 'DescribeDCDBInstances',
      responseField: 'Instances'
    };
    _this.keyInStorage = _query_def__WEBPACK_IMPORTED_MODULE_0__["keyInStorage"];
    _this.queryMonitorExtraConfg = _query_def__WEBPACK_IMPORTED_MODULE_0__["queryMonitorExtraConfg"];
    _this.extraActionMap = {
      DescribeDCDBShards: {
        service: 'dcdb',
        action: 'DescribeDCDBShards',
        responseField: 'Shards',
        pickKey: 'ShardInstanceId'
      },
      DescribeDCDBInstanceNodeInfo: {
        service: 'dcdb',
        action: 'DescribeDCDBInstanceNodeInfo',
        responseField: 'NodesInfo',
        pickKey: 'NodeId'
      }
    };
    return _this;
  } // 重写getRegion, 入参的region用广州


  DCDatasource.prototype.getRegions = function () {
    return this.doRequest({
      url: this.url + '/dcdb'
    }, 'dcdb', {
      action: 'DescribeDCDBSaleInfo',
      region: 'ap-guangzhou'
    }).then(function (response) {
      return lodash__WEBPACK_IMPORTED_MODULE_2___default.a.map(response.RegionList || [], function (item) {
        return {
          text: Object(_locale__WEBPACK_IMPORTED_MODULE_6__["t"])(item.Region),
          value: item.Region,
          RegionState: item.RegionState
        };
      });
    });
  };

  DCDatasource.prototype.getMetrics = function (region) {
    if (region === void 0) {
      region = 'ap-guangzhou';
    }

    return __awaiter(this, void 0, void 0, function () {
      var rawSet;
      return __generator(this, function (_a) {
        switch (_a.label) {
          case 0:
            return [4
            /*yield*/
            , _super.prototype.getMetrics.call(this, region)];

          case 1:
            rawSet = _a.sent();
            return [2
            /*return*/
            , lodash__WEBPACK_IMPORTED_MODULE_2___default.a.compact(rawSet.map(function (item) {
              return Object(_query_def__WEBPACK_IMPORTED_MODULE_0__["modifyDimensons"])(item);
            }))];
        }
      });
    });
  };

  DCDatasource.prototype.getConsumerList = function (params) {
    return __awaiter(this, void 0, void 0, function () {
      var region, act, payload, _a, service, action, responseField, serviceInfo, rs;

      var _this = this;

      return __generator(this, function (_b) {
        switch (_b.label) {
          case 0:
            region = params.region, act = params.action, payload = params.payload;
            _a = this.extraActionMap[act], service = _a.service, action = _a.action, responseField = _a.responseField;
            serviceInfo = Object(_common_constants__WEBPACK_IMPORTED_MODULE_3__["GetServiceAPIInfo"])(region, service);
            return [4
            /*yield*/
            , Object(_common_utils__WEBPACK_IMPORTED_MODULE_4__["fetchAllFactory"])(function (data) {
              return _this.doRequest({
                url: _this.url + serviceInfo.path,
                data: data
              }, serviceInfo.service, {
                region: region,
                action: action
              });
            }, payload, responseField)];

          case 1:
            rs = _b.sent();
            return [2
            /*return*/
            , rs[0]];
        }
      });
    });
  };

  DCDatasource.prototype.fetchMetricData = function (action, region, instance, query) {
    return __awaiter(this, void 0, void 0, function () {
      var payload, rs, pickKey_1, result;

      var _this = this;

      return __generator(this, function (_a) {
        switch (_a.label) {
          case 0:
            payload = {
              InstanceId: instance[this.templateQueryIdMap.instance],
              Limit: 100
            };
            if (!(Object.keys(this.extraActionMap).indexOf(action) !== -1)) return [3
            /*break*/
            , 3];
            return [4
            /*yield*/
            , this.getConsumerList({
              region: region,
              action: action,
              payload: payload
            })];

          case 1:
            rs = _a.sent();
            pickKey_1 = this.extraActionMap[action].pickKey;
            result = rs.map(function (o) {
              o._InstanceAliasValue = o[_this.templateQueryIdMap[pickKey_1]];
              return {
                text: o[_this.templateQueryIdMap[pickKey_1]],
                value: o[_this.templateQueryIdMap[pickKey_1]]
              };
            });
            return [4
            /*yield*/
            , _common_datasourceStorage__WEBPACK_IMPORTED_MODULE_5__["default"].setExtraStorage(this.service, this.keyInStorage[pickKey_1], rs)];

          case 2:
            _a.sent();

            return [2
            /*return*/
            , result];

          case 3:
            return [2
            /*return*/
            , []];
        }
      });
    });
  };

  return DCDatasource;
}(_base_datasource__WEBPACK_IMPORTED_MODULE_1__["BaseDatasource"]);

/* harmony default export */ __webpack_exports__["default"] = (DCDatasource);

/***/ }),

/***/ "./datasource/tc_monitor/dcdb/query.ts":
/*!*********************************************!*\
  !*** ./datasource/tc_monitor/dcdb/query.ts ***!
  \*********************************************/
/*! exports provided: QueryCtrl, sQuery */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "QueryCtrl", function() { return QueryCtrl; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "sQuery", function() { return sQuery; });
/* harmony import */ var grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! grafana/app/core/core_module */ "grafana/app/core/core_module");
/* harmony import */ var grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _query_def__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./query_def */ "./datasource/tc_monitor/dcdb/query_def.ts");
/* harmony import */ var _common_constants__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../common/constants */ "./datasource/common/constants.ts");
var __awaiter = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {
  function adopt(value) {
    return value instanceof P ? value : new P(function (resolve) {
      resolve(value);
    });
  }

  return new (P || (P = Promise))(function (resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }

    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }

    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }

    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};

var __generator = undefined && undefined.__generator || function (thisArg, body) {
  var _ = {
    label: 0,
    sent: function sent() {
      if (t[0] & 1) throw t[1];
      return t[1];
    },
    trys: [],
    ops: []
  },
      f,
      y,
      t,
      g;
  return g = {
    next: verb(0),
    "throw": verb(1),
    "return": verb(2)
  }, typeof Symbol === "function" && (g[Symbol.iterator] = function () {
    return this;
  }), g;

  function verb(n) {
    return function (v) {
      return step([n, v]);
    };
  }

  function step(op) {
    if (f) throw new TypeError("Generator is already executing.");

    while (_) {
      try {
        if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
        if (y = 0, t) op = [op[0] & 2, t.value];

        switch (op[0]) {
          case 0:
          case 1:
            t = op;
            break;

          case 4:
            _.label++;
            return {
              value: op[1],
              done: false
            };

          case 5:
            _.label++;
            y = op[1];
            op = [0];
            continue;

          case 7:
            op = _.ops.pop();

            _.trys.pop();

            continue;

          default:
            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
              _ = 0;
              continue;
            }

            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
              _.label = op[1];
              break;
            }

            if (op[0] === 6 && _.label < t[1]) {
              _.label = t[1];
              t = op;
              break;
            }

            if (t && _.label < t[2]) {
              _.label = t[2];

              _.ops.push(op);

              break;
            }

            if (t[2]) _.ops.pop();

            _.trys.pop();

            continue;
        }

        op = body.call(thisArg, _);
      } catch (e) {
        op = [6, e];
        y = 0;
      } finally {
        f = t = 0;
      }
    }

    if (op[0] & 5) throw op[1];
    return {
      value: op[0] ? op[1] : void 0,
      done: true
    };
  }
};




var ExtraFields = [{
  label: 'nodeid',
  field: 'NodeId',
  action: 'DescribeDCDBInstanceNodeInfo'
}, {
  label: 'shardid',
  field: 'ShardId',
  action: 'DescribeDCDBShards'
}];
var dropdownTextConfig = {
  DescribeDCDBInstanceNodeInfo: 'NodeId',
  DescribeDCDBShards: 'ShardInstanceId'
};

var QueryCtrl =
/** @class */
function () {
  QueryCtrl.$inject = ["$scope", "$rootScope"];

  /** @ngInject */
  function QueryCtrl($scope, $rootScope) {
    var _this = this;

    $scope.init = function () {
      $scope.DCDBFilterFieldsDescriptor = _query_def__WEBPACK_IMPORTED_MODULE_1__["DCDBFilterFieldsDescriptor"];
      $scope.ExtraFields = ExtraFields;
      $scope.namespace = _query_def__WEBPACK_IMPORTED_MODULE_1__["namespace"];
    };

    $scope.getInstanceId = function () {
      var instance = $scope.target.instance;
      var service = Object(_common_constants__WEBPACK_IMPORTED_MODULE_2__["GetServiceFromNamespace"])($scope.namespace);
      instance = $scope.datasource.getServiceFn(service, 'getVariable')(instance);

      if (!instance) {
        return '';
      }

      try {
        instance = JSON.parse(instance)[_query_def__WEBPACK_IMPORTED_MODULE_1__["templateQueryIdMap"].instance];
      } catch (error) {// console.log();
      }

      return instance;
    };

    $scope.getExtraFields = function () {
      return ExtraFields.filter(function (item) {
        var _a, _b;

        return item.field in ((_a = $scope.dims) !== null && _a !== void 0 ? _a : {}) || item.label in ((_b = $scope.dims) !== null && _b !== void 0 ? _b : {});
      });
    };

    $scope.getExtraDropdown = function (target, action) {
      return __awaiter(_this, void 0, void 0, function () {
        var service, region, instanceId, payload, rs, result;
        return __generator(this, function (_a) {
          switch (_a.label) {
            case 0:
              service = Object(_common_constants__WEBPACK_IMPORTED_MODULE_2__["GetServiceFromNamespace"])($scope.namespace);
              region = $scope.datasource.getServiceFn(service, 'getVariable')(target.region);
              instanceId = $scope.getInstanceId();
              payload = {
                InstanceId: instanceId,
                Limit: 100
              };
              return [4
              /*yield*/
              , $scope.datasource.getServiceFn(service, 'getConsumerList')({
                region: region,
                action: action,
                payload: payload
              })];

            case 1:
              rs = _a.sent();
              result = rs.map(function (o) {
                o._InstanceAliasValue = o[_query_def__WEBPACK_IMPORTED_MODULE_1__["templateQueryIdMap"][dropdownTextConfig[action]]];
                return {
                  text: o[_query_def__WEBPACK_IMPORTED_MODULE_1__["templateQueryIdMap"][dropdownTextConfig[action]]],
                  value: JSON.stringify(o)
                };
              });
              return [2
              /*return*/
              , result];
          }
        });
      });
    };

    $scope.init();
  }

  return QueryCtrl;
}();


var template = "\n<div>\n  <div class=\"tc-sub-params\" ng-if=\"showDetail\">\n    <label class=\"gf-form-label tc-info-label\">\n      Functions are queried by following params.\n      <a target=\"_blank\" style=\"text-decoration:underline;color:#006eff;font-size:medium\" href=\"https://cloud.tencent.com/document/product/248/50388\">Click here to get API doc.</a>\n    </label>\n    <div class=\"gf-form-inline\" ng-repeat=\"field in DCDBFilterFieldsDescriptor\">\n      <div class=\"gf-form\">\n        <label class=\"gf-form-label width-14\">\n          {{ field.key }}\n          <info-popover mode=\"right-normal\">\n            {{ field.cnDescriptor }}\n            <a target=\"_blank\" href=\"{{field.link}}\" ng-if=\"field.link\">Click here for more information.</a>\n          </info-popover>\n        </label>\n        <input\n          ng-if=\"field.type === 'inputNumber'\"\n          style=\"margin-right:2px\"\n          type=\"number\"\n          ng-model=\"target.queries[field.key]\"\n          ng-change=\"onChange()\"\n          class=\"gf-form-input width-10\"\n          ng-min=\"field.min\"\n          ng-max=\"field.max\"\n        />\n        <input\n          ng-if=\"field.type === 'input'\"\n          style=\"margin-right:2px\"\n          type=\"text\"\n          ng-model=\"target.queries[field.key]\"\n          ng-change=\"onChange()\"\n          class=\"gf-form-input width-10\"\n        />    \n        <multi-condition\n          ng-if=\"field.type === 'inputNumberMulti'\"\n          type=\"'inputNumber'\"\n          max-cond=\"5\"\n          value=\"target.queries.Filters[field.key]\"\n          maxNum=\"field.max\"\n          minNum=\"field.min\"\n          on-change=\"onChange()\"\n        ></multi-condition>\n        <multi-condition\n          ng-if=\"field.type === 'inputMulti'\"\n          type=\"'input'\"\n          value=\"target.queries[field.key]\"\n          on-change=\"onChange()\"\n        ></multi-condition>\n        <custom-select-dropdown\n          ng-if=\"field.type === 'select'\"\n          value=\"target.queries[field.key]\"\n          options=\"field.list\"\n          multiple=\"field.multiple || false\"\n          on-change=\"onChange()\"\n        ></custom-select-dropdown>\n      </div>\n    </div>\n  </div>\n\n<!-- \u8D77\u59CB\u533A\u57DF \u76EE\u7684\u533A\u57DF\u7B49 -->\n  <div>\n    <div class=\"gf-form-inline\" ng-repeat=\"extra in getExtraFields()\">\n      <div class=\"gf-form\">\n        <label class=\"gf-form-label query-keyword width-9\">{{extra.label}}</label>\n        <div class=\"gf-form-select-wrapper gf-form-select-wrapper--caret-indent\">\n          <gf-form-dropdown model=\"target[extra.field]\" allow-custom=\"false\" get-options=\"getExtraDropdown(target, extra.action)\"\n            on-change=\"onRefresh()\" css-class=\"min-width-10\">\n          </gf-form-dropdown>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n";
function sQuery() {
  return {
    template: template,
    controller: QueryCtrl,
    restrict: 'E',
    scope: {
      target: '=',
      showDetail: '=',
      region: '=',
      datasource: '=',
      getDropdownOptions: '&',
      onChange: '&',
      onRefresh: '&',
      dims: '='
    }
  };
}
grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0___default.a.directive(_query_def__WEBPACK_IMPORTED_MODULE_1__["queryEditorName"], sQuery);

/***/ }),

/***/ "./datasource/tc_monitor/dcdb/query_def.ts":
/*!*************************************************!*\
  !*** ./datasource/tc_monitor/dcdb/query_def.ts ***!
  \*************************************************/
/*! exports provided: default, DCDBFilterFieldsDescriptor, templateQueryIdMap, DCDBInstanceAliasList, DCDBInvalidDemensions, namespace, queryEditorName, queryEditorConfig, regionSupported, keyInStorage, modifyDimensons, queryMonitorExtraConfg, DCDBGetInstanceQueryParams */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DCDBFilterFieldsDescriptor", function() { return DCDBFilterFieldsDescriptor; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "templateQueryIdMap", function() { return templateQueryIdMap; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DCDBInstanceAliasList", function() { return DCDBInstanceAliasList; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DCDBInvalidDemensions", function() { return DCDBInvalidDemensions; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "namespace", function() { return namespace; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "queryEditorName", function() { return queryEditorName; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "queryEditorConfig", function() { return queryEditorConfig; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "regionSupported", function() { return regionSupported; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "keyInStorage", function() { return keyInStorage; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "modifyDimensons", function() { return modifyDimensons; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "queryMonitorExtraConfg", function() { return queryMonitorExtraConfg; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DCDBGetInstanceQueryParams", function() { return GetInstanceQueryParams; });
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lodash */ "lodash");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _common_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../common/utils */ "./datasource/common/utils.ts");


var namespace = 'QCE/TDMYSQL'; // 组件名称。这里名字要和index.ts中的SERVICES对应，后面会根据SERVICES中service字段拼接这个query组件名称

var queryEditorName = 'dcdbQuery';
var DCDBInvalidDemensions = {
  nodeid: 'NodeId',
  instanceid: 'InstanceId',
  shardid: 'ShardInstanceId',
  ShardId: 'ShardInstanceId'
}; // 需和文件名对应

var DCDBInstanceAliasList = ['InstanceId', 'InstanceName'];
var templateQueryIdMap = {
  instance: 'InstanceId',
  NodeId: 'NodeId',
  ShardInstanceId: 'ShardInstanceId'
}; // select类型需要注意是{},multi后缀是[],dropdown是''

var DCDBFilterFields = {
  Limit: 20,
  Offset: 0,
  InstanceIds: [],
  SearchName: '',
  SearchKey: '',
  ProjectIds: [],
  // IsFilterVpc
  VpcId: '',
  SubnetId: '',
  OrderBy: {},
  OrderByType: {},
  // IsFilterExcluster: {},
  ExclusterType: {},
  ExclusterIds: [],
  FilterInstanceType: {}
};
var DCDBFilterFieldsDescriptor = [{
  key: 'Offset',
  enDescriptor: 'Offset',
  cnDescriptor: '偏移量, 例如Offset=20&Limit=20 返回第 20 到 40 项',
  link: '',
  type: 'inputNumber',
  min: 0
}, {
  key: 'Limit',
  enDescriptor: 'Limit',
  cnDescriptor: '单次请求返回的数量，默认为20，最小值为1，最大值为100',
  link: '',
  type: 'inputNumber',
  min: 1,
  max: 100
}, {
  key: 'InstanceIds',
  enDescriptor: 'InstanceIds',
  cnDescriptor: '实例 ID 查询',
  link: '',
  type: 'inputMulti'
}, {
  key: 'SearchName',
  enDescriptor: 'SearchName',
  cnDescriptor: '搜索的字段名,当前支持的值有：instancename、vip、all',
  link: '',
  type: 'input'
}, {
  key: 'SearchKey',
  enDescriptor: 'SearchKey',
  cnDescriptor: '搜索的关键字',
  link: '',
  type: 'input'
}, {
  key: 'ProjectIds',
  enDescriptor: 'ProjectIds',
  cnDescriptor: '按项目 ID 查询',
  link: '',
  type: 'inputNumberMulti'
}, {
  key: 'VpcId',
  enDescriptor: 'VpcId',
  cnDescriptor: '私有网络 ID',
  link: '',
  type: 'input'
}, {
  key: 'SubnetId',
  enDescriptor: 'SubnetId',
  cnDescriptor: '私有网络的子网 ID',
  link: '',
  type: 'input'
}, {
  key: 'OrderBy',
  enDescriptor: 'OrderBy',
  cnDescriptor: '排序字段',
  link: '',
  type: 'select',
  list: [{
    text: 'projectId',
    value: 'projectId'
  }, {
    text: 'createtime',
    value: 'createtime'
  }, {
    text: 'instancename',
    value: 'instancename'
  }]
}, {
  key: 'OrderByType',
  enDescriptor: 'OrderByType',
  cnDescriptor: '私有网络 ID',
  link: '',
  type: 'select',
  list: [{
    text: 'desc',
    value: 'desc'
  }, {
    text: 'asc',
    value: 'asc'
  }]
}, {
  key: 'ExclusterType',
  enDescriptor: 'ExclusterType',
  cnDescriptor: '集群类型',
  link: '',
  type: 'select',
  list: [{
    text: '非独享集群',
    value: 1
  }, {
    text: '独享集群',
    value: 2
  }, {
    text: '全部',
    value: 0
  }, {
    text: 'asc',
    value: 'asc'
  }]
}, {
  key: 'ExclusterIds',
  enDescriptor: 'ExclusterIds',
  cnDescriptor: '独享集群ID',
  link: '',
  type: 'inputMulti'
}, {
  key: 'FilterInstanceType',
  enDescriptor: 'FilterInstanceType',
  cnDescriptor: '实例类型过滤',
  link: '',
  type: 'select',
  multiple: true,
  list: [{
    text: '独享实例',
    value: 1
  }, {
    text: '主实例',
    value: 2
  }, {
    text: '灾备实例',
    value: 3
  }]
}]; // 各产品实例列表detail配置

var queryEditorConfig = {
  instanceDocUrl: 'https://cloud.tencent.com/document/api/557/16140',
  namespace: namespace,
  fieldDescriptor: DCDBFilterFieldsDescriptor
};
var DCDB_STATE = {
  region: '',
  metricName: '',
  metricUnit: '',
  period: undefined,
  dimensionObject: null,
  instance: '',
  instanceAlias: 'InstanceId',
  ShardId: '',
  NodeId: '',
  queries: DCDBFilterFields
};
var modifyMetricConf = {
  shardid: 'ShardId',
  instanceid: 'InstanceId',
  nodeid: 'NodeId'
};

function modifyDimensons(metricItem) {
  var metricTmp = Object(lodash__WEBPACK_IMPORTED_MODULE_0__["cloneDeep"])(metricItem);
  metricTmp.Dimensions.forEach(function (item) {
    item.Dimensions = item.Dimensions.map(function (v) {
      return modifyMetricConf[v] || v;
    });
  });
  return metricTmp;
}

function GetInstanceQueryParams(queries) {
  if (queries === void 0) {
    queries = {};
  }

  var params = Object(_common_utils__WEBPACK_IMPORTED_MODULE_1__["instanceQueryParamsBaseParse"])(queries, false); // 特殊处理

  params.IsFilterVpc = false;
  params.IsFilterExcluster = false;
  if (params.VpcId || params.SubnetId) params.IsFilterVpc = true;
  if (params.ExclusterType) params.IsFilterExcluster = true;
  if (Object(lodash__WEBPACK_IMPORTED_MODULE_0__["isArray"])(params.FilterInstanceType)) params.FilterInstanceType = params.FilterInstanceType.join(',');
  return params;
} // 需要缓存到storage的内容的key列表


var keyInStorage = {
  NodeId: 'NodeId',
  ShardInstanceId: 'ShardId'
};
/*
如果有InstanceId额外的维度，原则上都需要传入此map结构配置
key的含义：
  经过InvalidDemensions处理后的string。topicId =》TopicId。
  否则认为指标中维度正确，和指标中维度字段保持一致，即topicId
value的含义：
  1 dim_KeyInStorage 指标中维度dimension对应的storage中的key，获取缓存列表，sourceMapList、
  2 dim_KeyInTarget  通过getVariable方法获取变量中选中项。比如ListnerId为Lis-xxxx；即：STATE中的key。
                    默认取通过InvalidDemsion处理后的key
  3 dim_KeyInMap     保存在模板变量value比如（监听器ID）源自sourceMapList（接口返回内容）的哪个key（ListenerId）。
                    即：templateQueryIdMap中内容。
                    联合上面2的内容筛选出原始sourceMap
*/

var queryMonitorExtraConfg = {
  NodeId: {
    dim_KeyInStorage: keyInStorage.NodeId,
    dim_KeyInTarget: 'NodeId',
    dim_KeyInMap: templateQueryIdMap.NodeId
  },
  ShardInstanceId: {
    dim_KeyInStorage: keyInStorage.ShardInstanceId,
    dim_KeyInTarget: 'ShardId',
    dim_KeyInMap: templateQueryIdMap.ShardInstanceId
  }
}; // 和其他产品的展示保持一致

var regionSupported = [{
  text: '华北地区(北京)',
  value: 'ap-beijing'
}, {
  text: '西南地区(成都)',
  value: 'ap-chengdu'
}, {
  text: '西南地区(重庆)',
  value: 'ap-chongqing'
}, {
  text: '华南地区(广州)',
  value: 'ap-guangzhou'
}, {
  text: '港澳台地区(中国香港)',
  value: 'ap-hongkong'
}, {
  text: '亚太南部(孟买)',
  value: 'ap-mumbai'
}, {
  text: '华东地区(南京)',
  value: 'ap-nanjing'
}, {
  text: '华东地区(上海)',
  value: 'ap-shanghai'
}, {
  text: '华东地区(上海金融)',
  value: 'ap-shanghai-fsi'
}, {
  text: '华南地区(深圳金融)',
  value: 'ap-shenzhen-fsi'
}, {
  text: '亚太东南(新加坡)',
  value: 'ap-singapore'
}, {
  text: '亚太东北(东京)',
  value: 'ap-tokyo'
}, {
  text: '欧洲地区(法兰克福)',
  value: 'eu-frankfurt'
}, {
  text: '美国东部(弗吉尼亚)',
  value: 'na-ashburn'
}, {
  text: '美国西部(硅谷)',
  value: 'na-siliconvalley'
}, {
  text: '北美地区(多伦多)',
  value: 'na-toronto'
}];
/* harmony default export */ __webpack_exports__["default"] = (DCDB_STATE);


/***/ }),

/***/ "./datasource/tc_monitor/dcg/datasource.ts":
/*!*************************************************!*\
  !*** ./datasource/tc_monitor/dcg/datasource.ts ***!
  \*************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _query_def__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./query_def */ "./datasource/tc_monitor/dcg/query_def.ts");
/* harmony import */ var _base_datasource__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../_base/datasource */ "./datasource/tc_monitor/_base/datasource.ts");
var __extends = undefined && undefined.__extends || function () {
  var _extendStatics = function extendStatics(d, b) {
    _extendStatics = Object.setPrototypeOf || {
      __proto__: []
    } instanceof Array && function (d, b) {
      d.__proto__ = b;
    } || function (d, b) {
      for (var p in b) {
        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];
      }
    };

    return _extendStatics(d, b);
  };

  return function (d, b) {
    if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");

    _extendStatics(d, b);

    function __() {
      this.constructor = d;
    }

    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();




var DCDatasource =
/** @class */
function (_super) {
  __extends(DCDatasource, _super);

  function DCDatasource(instanceSettings, backendSrv, templateSrv) {
    var _this = _super.call(this, instanceSettings, backendSrv, templateSrv) || this;

    _this.Namespace = _query_def__WEBPACK_IMPORTED_MODULE_0__["namespace"];
    _this.InstanceAliasList = _query_def__WEBPACK_IMPORTED_MODULE_0__["DCGInstanceAliasList"];
    _this.InvalidDimensions = _query_def__WEBPACK_IMPORTED_MODULE_0__["DCGInvalidDemensions"];
    _this.templateQueryIdMap = _query_def__WEBPACK_IMPORTED_MODULE_0__["templateQueryIdMap"]; // 此处service是接口的配置参数，需和plugin.json里一致，和constant.ts中SERVICES_API_INFO保持一致

    _this.InstanceReqConfig = {
      service: 'vpc',
      action: 'DescribeDirectConnectGateways',
      responseField: 'DirectConnectGatewaySet'
    };
    return _this;
  }

  return DCDatasource;
}(_base_datasource__WEBPACK_IMPORTED_MODULE_1__["BaseDatasource"]);

/* harmony default export */ __webpack_exports__["default"] = (DCDatasource);

/***/ }),

/***/ "./datasource/tc_monitor/dcg/query.ts":
/*!********************************************!*\
  !*** ./datasource/tc_monitor/dcg/query.ts ***!
  \********************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _base_query__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../_base/query */ "./datasource/tc_monitor/_base/query.ts");
/* harmony import */ var _query_def__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./query_def */ "./datasource/tc_monitor/dcg/query_def.ts");


Object(_base_query__WEBPACK_IMPORTED_MODULE_0__["default"])(_query_def__WEBPACK_IMPORTED_MODULE_1__["queryEditorName"], _query_def__WEBPACK_IMPORTED_MODULE_1__["queryEditorConfig"]);

/***/ }),

/***/ "./datasource/tc_monitor/dcg/query_def.ts":
/*!************************************************!*\
  !*** ./datasource/tc_monitor/dcg/query_def.ts ***!
  \************************************************/
/*! exports provided: default, DCGFilterFieldsDescriptor, templateQueryIdMap, DCGInstanceAliasList, DCGInvalidDemensions, namespace, queryEditorName, queryEditorConfig, DCGGetInstanceQueryParams */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DCGFilterFieldsDescriptor", function() { return DCGFilterFieldsDescriptor; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "templateQueryIdMap", function() { return templateQueryIdMap; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DCGInstanceAliasList", function() { return DCGInstanceAliasList; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DCGInvalidDemensions", function() { return DCGInvalidDemensions; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "namespace", function() { return namespace; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "queryEditorName", function() { return queryEditorName; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "queryEditorConfig", function() { return queryEditorConfig; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DCGGetInstanceQueryParams", function() { return GetInstanceQueryParams; });
/* harmony import */ var _common_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../common/utils */ "./datasource/common/utils.ts");

var namespace = 'QCE/DCG';
var queryEditorName = 'dcgQuery';
var DCGInvalidDemensions = {
  directConnectGatewayId: 'DirectConnectGatewayId'
};
var DCGInstanceAliasList = ['DirectConnectGatewayId', 'DirectConnectGatewayName'];
var templateQueryIdMap = {
  instance: 'DirectConnectGatewayId'
}; // select类型需要注意是{},multi后缀是[]

var DCGFilterFields = {
  Limit: 20,
  Offset: 0,
  'direct-connect-gateway-id': [],
  'direct-connect-gateway-name': [],
  'direct-connect-gateway-ip': [],
  'gateway-type': {},
  'network-type': {},
  'ccn-id': [],
  'vpc-id': []
};
var DCGFilterFieldsDescriptor = [{
  key: 'Offset',
  enDescriptor: 'Offset',
  cnDescriptor: '偏移量, 例如Offset=20&Limit=20 返回第 20 到 40 项',
  link: '',
  type: 'inputNumber',
  min: 0
}, {
  key: 'Limit',
  enDescriptor: 'Limit',
  cnDescriptor: '单次请求返回的数量，默认为20，最小值为1，最大值为100',
  link: '',
  type: 'inputNumber',
  min: 1,
  max: 100
}, {
  key: 'direct-connect-gateway-id',
  enDescriptor: 'direct-connect-gateway-id',
  cnDescriptor: '专线网关唯一ID',
  link: '',
  type: 'inputMulti'
}, {
  key: 'direct-connect-gateway-name',
  enDescriptor: 'direct-connect-gateway-name',
  cnDescriptor: '专线网关名称',
  link: '',
  type: 'inputMulti'
}, {
  key: 'direct-connect-gateway-ip',
  enDescriptor: 'direct-connect-gateway-ip',
  cnDescriptor: '专线网关IP',
  link: '',
  type: 'inputMulti'
}, {
  key: 'gateway-type',
  enDescriptor: 'gateway-type',
  cnDescriptor: '网关类型',
  link: '',
  type: 'select',
  multiple: true,
  list: [{
    text: '普通型',
    value: 'NORMAL'
  }, {
    text: 'NAT型',
    value: 'NAT'
  }]
}, {
  key: 'network-type',
  enDescriptor: 'network-type',
  cnDescriptor: '网络类型',
  link: '',
  type: 'select',
  multiple: true,
  list: [{
    text: '私有网络类型',
    value: 'VPC'
  }, {
    text: '云联网类型',
    value: 'CCN'
  }]
}, {
  key: 'ccn-id',
  enDescriptor: 'ccn-id',
  cnDescriptor: '专线网关所在云联网ID',
  link: '',
  type: 'inputMulti'
}, {
  key: 'vpc-id',
  enDescriptor: 'vpc-id',
  cnDescriptor: '专线网关所在私有网络ID',
  link: '',
  type: 'inputMulti'
}]; // 各产品实例列表detail配置

var queryEditorConfig = {
  instanceDocUrl: 'https://cloud.tencent.com/document/api/215/30644',
  namespace: namespace,
  fieldDescriptor: DCGFilterFieldsDescriptor
};
var DCG_STATE = {
  region: '',
  metricName: '',
  metricUnit: '',
  period: undefined,
  dimensionObject: null,
  instance: '',
  instanceAlias: 'DirectConnectGatewayId',
  queries: DCGFilterFields
};

function GetInstanceQueryParams(queries) {
  if (queries === void 0) {
    queries = {};
  }

  return Object(_common_utils__WEBPACK_IMPORTED_MODULE_0__["instanceQueryParamsBaseParse"])(queries, true);
}

/* harmony default export */ __webpack_exports__["default"] = (DCG_STATE);


/***/ }),

/***/ "./datasource/tc_monitor/dcx/datasource.ts":
/*!*************************************************!*\
  !*** ./datasource/tc_monitor/dcx/datasource.ts ***!
  \*************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _query_def__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./query_def */ "./datasource/tc_monitor/dcx/query_def.ts");
/* harmony import */ var _base_datasource__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../_base/datasource */ "./datasource/tc_monitor/_base/datasource.ts");
var __extends = undefined && undefined.__extends || function () {
  var _extendStatics = function extendStatics(d, b) {
    _extendStatics = Object.setPrototypeOf || {
      __proto__: []
    } instanceof Array && function (d, b) {
      d.__proto__ = b;
    } || function (d, b) {
      for (var p in b) {
        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];
      }
    };

    return _extendStatics(d, b);
  };

  return function (d, b) {
    if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");

    _extendStatics(d, b);

    function __() {
      this.constructor = d;
    }

    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();

var __awaiter = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {
  function adopt(value) {
    return value instanceof P ? value : new P(function (resolve) {
      resolve(value);
    });
  }

  return new (P || (P = Promise))(function (resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }

    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }

    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }

    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};

var __generator = undefined && undefined.__generator || function (thisArg, body) {
  var _ = {
    label: 0,
    sent: function sent() {
      if (t[0] & 1) throw t[1];
      return t[1];
    },
    trys: [],
    ops: []
  },
      f,
      y,
      t,
      g;
  return g = {
    next: verb(0),
    "throw": verb(1),
    "return": verb(2)
  }, typeof Symbol === "function" && (g[Symbol.iterator] = function () {
    return this;
  }), g;

  function verb(n) {
    return function (v) {
      return step([n, v]);
    };
  }

  function step(op) {
    if (f) throw new TypeError("Generator is already executing.");

    while (_) {
      try {
        if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
        if (y = 0, t) op = [op[0] & 2, t.value];

        switch (op[0]) {
          case 0:
          case 1:
            t = op;
            break;

          case 4:
            _.label++;
            return {
              value: op[1],
              done: false
            };

          case 5:
            _.label++;
            y = op[1];
            op = [0];
            continue;

          case 7:
            op = _.ops.pop();

            _.trys.pop();

            continue;

          default:
            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
              _ = 0;
              continue;
            }

            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
              _.label = op[1];
              break;
            }

            if (op[0] === 6 && _.label < t[1]) {
              _.label = t[1];
              t = op;
              break;
            }

            if (t && _.label < t[2]) {
              _.label = t[2];

              _.ops.push(op);

              break;
            }

            if (t[2]) _.ops.pop();

            _.trys.pop();

            continue;
        }

        op = body.call(thisArg, _);
      } catch (e) {
        op = [6, e];
        y = 0;
      } finally {
        f = t = 0;
      }
    }

    if (op[0] & 5) throw op[1];
    return {
      value: op[0] ? op[1] : void 0,
      done: true
    };
  }
};




var DCXDatasource =
/** @class */
function (_super) {
  __extends(DCXDatasource, _super);

  function DCXDatasource(instanceSettings, backendSrv, templateSrv) {
    var _this = _super.call(this, instanceSettings, backendSrv, templateSrv) || this;

    _this.Namespace = _query_def__WEBPACK_IMPORTED_MODULE_0__["namespace"];
    _this.InstanceAliasList = _query_def__WEBPACK_IMPORTED_MODULE_0__["DCXInstanceAliasList"];
    _this.InvalidDimensions = _query_def__WEBPACK_IMPORTED_MODULE_0__["DCXInvalidDemensions"];
    _this.templateQueryIdMap = {
      instance: 'DirectConnectTunnelId'
    };
    _this.InstanceReqConfig = {
      service: 'dc',
      action: 'DescribeDirectConnectTunnels',
      responseField: 'DirectConnectTunnelSet'
    };
    return _this;
  }

  DCXDatasource.prototype.getMetrics = function (region) {
    if (region === void 0) {
      region = 'ap-guangzhou';
    }

    return __awaiter(this, void 0, void 0, function () {
      var rawSet;
      return __generator(this, function (_a) {
        switch (_a.label) {
          case 0:
            return [4
            /*yield*/
            , _super.prototype.getMetrics.call(this, region)];

          case 1:
            rawSet = _a.sent();
            return [2
            /*return*/
            , rawSet.map(function (item) {
              return Object(_query_def__WEBPACK_IMPORTED_MODULE_0__["modifyDimensons"])(item);
            })];
        }
      });
    });
  };

  return DCXDatasource;
}(_base_datasource__WEBPACK_IMPORTED_MODULE_1__["BaseDatasource"]);

/* harmony default export */ __webpack_exports__["default"] = (DCXDatasource);

/***/ }),

/***/ "./datasource/tc_monitor/dcx/query.ts":
/*!********************************************!*\
  !*** ./datasource/tc_monitor/dcx/query.ts ***!
  \********************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _base_query__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../_base/query */ "./datasource/tc_monitor/_base/query.ts");
/* harmony import */ var _query_def__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./query_def */ "./datasource/tc_monitor/dcx/query_def.ts");


Object(_base_query__WEBPACK_IMPORTED_MODULE_0__["default"])(_query_def__WEBPACK_IMPORTED_MODULE_1__["queryEditorName"], _query_def__WEBPACK_IMPORTED_MODULE_1__["queryEditorConfig"]);

/***/ }),

/***/ "./datasource/tc_monitor/dcx/query_def.ts":
/*!************************************************!*\
  !*** ./datasource/tc_monitor/dcx/query_def.ts ***!
  \************************************************/
/*! exports provided: default, DCXFilterFieldsDescriptor, templateQueryIdMap, DCXInstanceAliasList, DCXInvalidDemensions, namespace, queryEditorName, queryEditorConfig, modifyDimensons, DCXGetInstanceQueryParams */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DCXFilterFieldsDescriptor", function() { return DCXFilterFieldsDescriptor; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "templateQueryIdMap", function() { return templateQueryIdMap; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DCXInstanceAliasList", function() { return DCXInstanceAliasList; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DCXInvalidDemensions", function() { return DCXInvalidDemensions; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "namespace", function() { return namespace; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "queryEditorName", function() { return queryEditorName; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "queryEditorConfig", function() { return queryEditorConfig; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "modifyDimensons", function() { return modifyDimensons; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DCXGetInstanceQueryParams", function() { return GetInstanceQueryParams; });
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lodash */ "lodash");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _common_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../common/utils */ "./datasource/common/utils.ts");
var __assign = undefined && undefined.__assign || function () {
  __assign = Object.assign || function (t) {
    for (var s, i = 1, n = arguments.length; i < n; i++) {
      s = arguments[i];

      for (var p in s) {
        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
      }
    }

    return t;
  };

  return __assign.apply(this, arguments);
};



var namespace = 'QCE/DCX';
var queryEditorName = 'dcxQuery';
var DCXFilterFields = {
  'direct-connect-tunnel-name': [],
  'direct-connect-tunnel-id': [],
  'direct-connect-id': []
};
var DCXFilterFieldsDescriptor = [{
  key: 'Offset',
  enDescriptor: 'Offset',
  cnDescriptor: '偏移量, 例如Offset=20&Limit=20 返回第 20 到 40 项',
  link: '',
  type: 'inputNumber',
  min: 0
}, {
  key: 'Limit',
  enDescriptor: 'Limit',
  cnDescriptor: '单次请求返回的数量，默认为20，最小值为1，最大值为100',
  link: '',
  type: 'inputNumber',
  min: 1,
  max: 100
}, {
  key: 'direct-connect-tunnel-name',
  enDescriptor: 'direct-connect-tunnel-name',
  cnDescriptor: '专用通道名称',
  link: '',
  type: 'inputMulti'
}, {
  key: 'direct-connect-tunnel-id',
  enDescriptor: 'direct-connect-tunnel-id',
  cnDescriptor: '专用通道实例ID',
  link: '',
  type: 'inputMulti'
}, {
  key: 'direct-connect-id',
  enDescriptor: 'direct-connect-id',
  cnDescriptor: '物理专线实例ID',
  link: '',
  type: 'inputMulti'
}];
var queryEditorConfig = {
  instanceDocUrl: 'https://cloud.tencent.com/document/api/216/19819',
  namespace: namespace,
  fieldDescriptor: DCXFilterFieldsDescriptor
};
var DCX_STATE = {
  region: '',
  metricName: '',
  metricUnit: '',
  period: undefined,
  dimensionObject: null,
  instance: '',
  instanceAlias: 'DirectConnectTunnelId',
  queries: __assign({
    Limit: 20,
    Offset: 0
  }, DCXFilterFields)
};

function GetInstanceQueryParams(queries) {
  if (queries === void 0) {
    queries = {};
  }

  return Object(_common_utils__WEBPACK_IMPORTED_MODULE_1__["instanceQueryParamsBaseParse"])(queries, true);
}

var DCXInstanceAliasList = ['DirectConnectTunnelId', 'DirectConnectTunnelName'];
var templateQueryIdMap = {
  instance: 'DirectConnectTunnelId'
};
var DCXInvalidDemensions = {
  directconnectconnid: 'DirectConnectTunnelId',
  directConnectConnId: 'DirectConnectTunnelId'
};

function modifyDimensons(metricItem) {
  var metricTmp = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.cloneDeep(metricItem);

  metricTmp.Dimensions.forEach(function (item) {
    item.Dimensions = ['directConnectConnId'];
  });
  return metricTmp;
}

/* harmony default export */ __webpack_exports__["default"] = (DCX_STATE);


/***/ }),

/***/ "./datasource/tc_monitor/ecdn/datasource.ts":
/*!**************************************************!*\
  !*** ./datasource/tc_monitor/ecdn/datasource.ts ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _base_datasource__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../_base/datasource */ "./datasource/tc_monitor/_base/datasource.ts");
/* harmony import */ var _query_def__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./query_def */ "./datasource/tc_monitor/ecdn/query_def.ts");
var __extends = undefined && undefined.__extends || function () {
  var _extendStatics = function extendStatics(d, b) {
    _extendStatics = Object.setPrototypeOf || {
      __proto__: []
    } instanceof Array && function (d, b) {
      d.__proto__ = b;
    } || function (d, b) {
      for (var p in b) {
        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];
      }
    };

    return _extendStatics(d, b);
  };

  return function (d, b) {
    if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");

    _extendStatics(d, b);

    function __() {
      this.constructor = d;
    }

    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();

var __awaiter = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {
  function adopt(value) {
    return value instanceof P ? value : new P(function (resolve) {
      resolve(value);
    });
  }

  return new (P || (P = Promise))(function (resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }

    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }

    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }

    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};

var __generator = undefined && undefined.__generator || function (thisArg, body) {
  var _ = {
    label: 0,
    sent: function sent() {
      if (t[0] & 1) throw t[1];
      return t[1];
    },
    trys: [],
    ops: []
  },
      f,
      y,
      t,
      g;
  return g = {
    next: verb(0),
    "throw": verb(1),
    "return": verb(2)
  }, typeof Symbol === "function" && (g[Symbol.iterator] = function () {
    return this;
  }), g;

  function verb(n) {
    return function (v) {
      return step([n, v]);
    };
  }

  function step(op) {
    if (f) throw new TypeError("Generator is already executing.");

    while (_) {
      try {
        if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
        if (y = 0, t) op = [op[0] & 2, t.value];

        switch (op[0]) {
          case 0:
          case 1:
            t = op;
            break;

          case 4:
            _.label++;
            return {
              value: op[1],
              done: false
            };

          case 5:
            _.label++;
            y = op[1];
            op = [0];
            continue;

          case 7:
            op = _.ops.pop();

            _.trys.pop();

            continue;

          default:
            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
              _ = 0;
              continue;
            }

            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
              _.label = op[1];
              break;
            }

            if (op[0] === 6 && _.label < t[1]) {
              _.label = t[1];
              t = op;
              break;
            }

            if (t && _.label < t[2]) {
              _.label = t[2];

              _.ops.push(op);

              break;
            }

            if (t[2]) _.ops.pop();

            _.trys.pop();

            continue;
        }

        op = body.call(thisArg, _);
      } catch (e) {
        op = [6, e];
        y = 0;
      } finally {
        f = t = 0;
      }
    }

    if (op[0] & 5) throw op[1];
    return {
      value: op[0] ? op[1] : void 0,
      done: true
    };
  }
};




var ECDNDatasource =
/** @class */
function (_super) {
  __extends(ECDNDatasource, _super);

  function ECDNDatasource(instanceSettings, backendSrv, templateSrv) {
    var _this = _super.call(this, instanceSettings, backendSrv, templateSrv) || this;

    _this.Namespace = _query_def__WEBPACK_IMPORTED_MODULE_1__["namespace"];
    _this.InstanceAliasList = _query_def__WEBPACK_IMPORTED_MODULE_1__["ECDNInstanceAliasList"];
    _this.InvalidDimensions = _query_def__WEBPACK_IMPORTED_MODULE_1__["ECDNInvalidDemensions"];
    _this.templateQueryIdMap = _query_def__WEBPACK_IMPORTED_MODULE_1__["templateQueryIdMap"];
    _this.InstanceReqConfig = {
      service: 'ecdn',
      action: 'DescribeDomains',
      responseField: 'Domains'
    };
    return _this;
  }

  ECDNDatasource.prototype.getMetrics = function (region) {
    if (region === void 0) {
      region = 'ap-guangzhou';
    }

    return __awaiter(this, void 0, void 0, function () {
      var rawSet;
      return __generator(this, function (_a) {
        switch (_a.label) {
          case 0:
            return [4
            /*yield*/
            , _super.prototype.getMetrics.call(this, region)];

          case 1:
            rawSet = _a.sent();
            return [2
            /*return*/
            , rawSet.map(function (item) {
              return Object(_query_def__WEBPACK_IMPORTED_MODULE_1__["modifyDimensons"])(item);
            })];
        }
      });
    });
  };

  return ECDNDatasource;
}(_base_datasource__WEBPACK_IMPORTED_MODULE_0__["BaseDatasource"]);

/* harmony default export */ __webpack_exports__["default"] = (ECDNDatasource);

/***/ }),

/***/ "./datasource/tc_monitor/ecdn/query.ts":
/*!*********************************************!*\
  !*** ./datasource/tc_monitor/ecdn/query.ts ***!
  \*********************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _base_query__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../_base/query */ "./datasource/tc_monitor/_base/query.ts");
/* harmony import */ var _query_def__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./query_def */ "./datasource/tc_monitor/ecdn/query_def.ts");


Object(_base_query__WEBPACK_IMPORTED_MODULE_0__["default"])(_query_def__WEBPACK_IMPORTED_MODULE_1__["queryEditorName"], _query_def__WEBPACK_IMPORTED_MODULE_1__["queryEditorConfig"]);

/***/ }),

/***/ "./datasource/tc_monitor/ecdn/query_def.ts":
/*!*************************************************!*\
  !*** ./datasource/tc_monitor/ecdn/query_def.ts ***!
  \*************************************************/
/*! exports provided: default, ECDNFilterFieldsDescriptor, templateQueryIdMap, ECDNInstanceAliasList, ECDNInvalidDemensions, namespace, queryEditorName, queryEditorConfig, modifyDimensons, ECDNGetInstanceQueryParams */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ECDNFilterFieldsDescriptor", function() { return ECDNFilterFieldsDescriptor; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "templateQueryIdMap", function() { return templateQueryIdMap; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ECDNInstanceAliasList", function() { return ECDNInstanceAliasList; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ECDNInvalidDemensions", function() { return ECDNInvalidDemensions; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "namespace", function() { return namespace; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "queryEditorName", function() { return queryEditorName; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "queryEditorConfig", function() { return queryEditorConfig; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "modifyDimensons", function() { return modifyDimensons; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ECDNGetInstanceQueryParams", function() { return GetInstanceQueryParams; });
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lodash */ "lodash");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__);
var __assign = undefined && undefined.__assign || function () {
  __assign = Object.assign || function (t) {
    for (var s, i = 1, n = arguments.length; i < n; i++) {
      s = arguments[i];

      for (var p in s) {
        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
      }
    }

    return t;
  };

  return __assign.apply(this, arguments);
};


var namespace = 'QCE/DSA';
var queryEditorName = 'ecdnQuery';
var ECDNInstanceAliasList = ['Domain'];
var templateQueryIdMap = {
  instance: 'Domain'
};
var ECDNInvalidDemensions = {
  domain: 'Domain',
  projectid: 'ProjectId'
};
var ECDN_STATE = {
  region: '',
  metricName: '',
  metricUnit: '',
  period: undefined,
  dimensionObject: null,
  instance: '',
  instanceAlias: 'Domain',
  queries: {
    Limit: 100,
    Offset: 0,
    origin: [],
    domain: [],
    resourceId: [],
    status: [],
    disable: [],
    projectId: [],
    fullUrlCache: [],
    https: [],
    originPullProtocol: [],
    area: [],
    tagKey: []
  }
};
var ECDNFilterFieldsDescriptor = [{
  key: 'Offset',
  enDescriptor: 'Offset',
  cnDescriptor: '偏移量, 例如Offset=20&Limit=20 返回第 20 到 40 项',
  link: '',
  type: 'inputNumber',
  min: 0
}, {
  key: 'Limit',
  enDescriptor: 'Limit',
  cnDescriptor: '单次请求返回的数量，默认为20，最小值为1，最大值为100',
  link: '',
  type: 'inputNumber',
  min: 1,
  max: 100
}, {
  key: 'origin',
  enDescriptor: 'Origin',
  cnDescriptor: '主源站',
  link: '',
  type: 'inputMulti'
}, {
  key: 'domain',
  enDescriptor: 'Domain',
  cnDescriptor: '域名',
  link: '',
  type: 'inputMulti'
}, {
  key: 'resourceId',
  enDescriptor: 'ResourceId',
  cnDescriptor: '域名id',
  link: '',
  type: 'inputMulti'
}, {
  key: 'status',
  enDescriptor: 'Status',
  cnDescriptor: '域名状态',
  link: '',
  type: 'select',
  list: [{
    text: 'online',
    value: 'online'
  }, {
    text: 'offline',
    value: 'offline'
  }, {
    text: 'processing',
    value: 'processing'
  }]
}, {
  key: 'disable',
  enDescriptor: 'Disable',
  cnDescriptor: '域名封禁状态',
  link: '',
  type: 'select',
  list: [{
    text: 'normal',
    value: 'normal'
  }, {
    text: 'unlicensed',
    value: 'unlicensed'
  }]
}, {
  key: 'projectId',
  enDescriptor: 'ProjectId',
  cnDescriptor: '项目ID',
  link: '',
  type: 'inputMulti'
}, {
  key: 'fullUrlCache',
  enDescriptor: 'FullUrlCache',
  cnDescriptor: '全路径缓存',
  link: '',
  type: 'select',
  list: [{
    text: 'on',
    value: 'on'
  }, {
    text: 'off',
    value: 'off'
  }]
}, {
  key: 'https',
  enDescriptor: 'Https',
  cnDescriptor: '是否配置https',
  link: '',
  type: 'select',
  list: [{
    text: 'on',
    value: 'on'
  }, {
    text: 'off',
    value: 'off'
  }, {
    text: 'processing',
    value: 'processing'
  }]
}, {
  key: 'originPullProtocol',
  enDescriptor: 'OriginPullProtocol',
  cnDescriptor: '回源协议类型',
  link: '',
  type: 'select',
  list: [{
    text: 'http',
    value: 'http'
  }, {
    text: 'https',
    value: 'https'
  }, {
    text: 'follow',
    value: 'follow'
  }]
}, {
  key: 'area',
  enDescriptor: 'Area',
  cnDescriptor: '加速区域',
  link: '',
  type: 'select',
  list: [{
    text: 'mainland',
    value: 'mainland'
  }, {
    text: 'overseas',
    value: 'overseas'
  }, {
    text: 'global',
    value: 'global'
  }]
}, {
  key: 'tagKey',
  enDescriptor: 'TagKey',
  cnDescriptor: '标签键',
  link: '',
  type: 'inputMulti'
}];
var queryEditorConfig = {
  instanceDocUrl: 'https://cloud.tencent.com/document/api/570/42462',
  namespace: namespace,
  fieldDescriptor: ECDNFilterFieldsDescriptor
};

function GetInstanceQueryParams(queries) {
  if (queries === void 0) {
    queries = {};
  }

  var params = {};

  if (!Object(lodash__WEBPACK_IMPORTED_MODULE_0__["isEmpty"])(queries)) {
    params.Limit = Object(lodash__WEBPACK_IMPORTED_MODULE_0__["get"])(queries, 'Limit', 20) || 20;
    params.Offset = Object(lodash__WEBPACK_IMPORTED_MODULE_0__["get"])(queries, 'Offset', 0) || 0;

    var _queries = Object(lodash__WEBPACK_IMPORTED_MODULE_0__["omit"])(queries, ['Offset', 'Limit']);

    var Filters_1 = [];
    Object(lodash__WEBPACK_IMPORTED_MODULE_0__["forEach"])(_queries, function (item, key) {
      if (Object(lodash__WEBPACK_IMPORTED_MODULE_0__["isArray"])(item)) {
        item = Object(lodash__WEBPACK_IMPORTED_MODULE_0__["compact"])(item);

        if (item.length > 0) {
          Filters_1.push({
            Name: key,
            Value: Object(lodash__WEBPACK_IMPORTED_MODULE_0__["uniq"])(item).slice(0, 5)
          });
        }
      } else if (Object(lodash__WEBPACK_IMPORTED_MODULE_0__["isObject"])(item)) {
        if (!Object(lodash__WEBPACK_IMPORTED_MODULE_0__["isEmpty"])(Object(lodash__WEBPACK_IMPORTED_MODULE_0__["get"])(item, 'value', []))) {
          Filters_1.push({
            Name: key,
            Value: [Object(lodash__WEBPACK_IMPORTED_MODULE_0__["get"])(item, 'value', [])].slice(0, 5)
          });
        }
      }
    });

    if (Filters_1.length > 0) {
      params.Filters = Filters_1.map(function (item) {
        if (item.Name === 'domain') {
          return __assign(__assign({}, item), {
            Fuzzy: true
          });
        }

        return item;
      });
      return params;
    }
  }

  return params;
}

function modifyDimensons(metricItem) {
  var metricTmp = Object(lodash__WEBPACK_IMPORTED_MODULE_0__["cloneDeep"])(metricItem);
  metricTmp.Dimensions.forEach(function (item) {
    item.Dimensions = ['domain', 'projectid'];
  });
  return metricTmp;
}

/* harmony default export */ __webpack_exports__["default"] = (ECDN_STATE);


/***/ }),

/***/ "./datasource/tc_monitor/ecm/datasource.ts":
/*!*************************************************!*\
  !*** ./datasource/tc_monitor/ecm/datasource.ts ***!
  \*************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _query_def__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./query_def */ "./datasource/tc_monitor/ecm/query_def.ts");
/* harmony import */ var _base_datasource__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../_base/datasource */ "./datasource/tc_monitor/_base/datasource.ts");
var __extends = undefined && undefined.__extends || function () {
  var _extendStatics = function extendStatics(d, b) {
    _extendStatics = Object.setPrototypeOf || {
      __proto__: []
    } instanceof Array && function (d, b) {
      d.__proto__ = b;
    } || function (d, b) {
      for (var p in b) {
        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];
      }
    };

    return _extendStatics(d, b);
  };

  return function (d, b) {
    if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");

    _extendStatics(d, b);

    function __() {
      this.constructor = d;
    }

    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();

var __assign = undefined && undefined.__assign || function () {
  __assign = Object.assign || function (t) {
    for (var s, i = 1, n = arguments.length; i < n; i++) {
      s = arguments[i];

      for (var p in s) {
        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
      }
    }

    return t;
  };

  return __assign.apply(this, arguments);
};

var __awaiter = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {
  function adopt(value) {
    return value instanceof P ? value : new P(function (resolve) {
      resolve(value);
    });
  }

  return new (P || (P = Promise))(function (resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }

    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }

    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }

    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};

var __generator = undefined && undefined.__generator || function (thisArg, body) {
  var _ = {
    label: 0,
    sent: function sent() {
      if (t[0] & 1) throw t[1];
      return t[1];
    },
    trys: [],
    ops: []
  },
      f,
      y,
      t,
      g;
  return g = {
    next: verb(0),
    "throw": verb(1),
    "return": verb(2)
  }, typeof Symbol === "function" && (g[Symbol.iterator] = function () {
    return this;
  }), g;

  function verb(n) {
    return function (v) {
      return step([n, v]);
    };
  }

  function step(op) {
    if (f) throw new TypeError("Generator is already executing.");

    while (_) {
      try {
        if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
        if (y = 0, t) op = [op[0] & 2, t.value];

        switch (op[0]) {
          case 0:
          case 1:
            t = op;
            break;

          case 4:
            _.label++;
            return {
              value: op[1],
              done: false
            };

          case 5:
            _.label++;
            y = op[1];
            op = [0];
            continue;

          case 7:
            op = _.ops.pop();

            _.trys.pop();

            continue;

          default:
            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
              _ = 0;
              continue;
            }

            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
              _.label = op[1];
              break;
            }

            if (op[0] === 6 && _.label < t[1]) {
              _.label = t[1];
              t = op;
              break;
            }

            if (t && _.label < t[2]) {
              _.label = t[2];

              _.ops.push(op);

              break;
            }

            if (t[2]) _.ops.pop();

            _.trys.pop();

            continue;
        }

        op = body.call(thisArg, _);
      } catch (e) {
        op = [6, e];
        y = 0;
      } finally {
        f = t = 0;
      }
    }

    if (op[0] & 5) throw op[1];
    return {
      value: op[0] ? op[1] : void 0,
      done: true
    };
  }
};




var DCDatasource =
/** @class */
function (_super) {
  __extends(DCDatasource, _super);

  function DCDatasource(instanceSettings, backendSrv, templateSrv) {
    var _this = _super.call(this, instanceSettings, backendSrv, templateSrv) || this;

    _this.Namespace = _query_def__WEBPACK_IMPORTED_MODULE_0__["namespace"];
    _this.InstanceAliasList = _query_def__WEBPACK_IMPORTED_MODULE_0__["ECMInstanceAliasList"];
    _this.InvalidDimensions = _query_def__WEBPACK_IMPORTED_MODULE_0__["ECMInvalidDemensions"];
    _this.templateQueryIdMap = _query_def__WEBPACK_IMPORTED_MODULE_0__["templateQueryIdMap"]; // 此处service是接口的配置参数，需和plugin.json里一致，和constant.ts中SERVICES_API_INFO保持一致

    _this.InstanceReqConfig = {
      service: 'ecm',
      action: 'DescribeInstances',
      responseField: 'InstanceSet'
    };
    _this.MetricReqConfig = {
      resultFilter: _query_def__WEBPACK_IMPORTED_MODULE_0__["modifyDimensons"]
    };
    return _this;
  }

  DCDatasource.prototype.metricFindQuery = function (query, regex) {
    return __awaiter(this, void 0, void 0, function () {
      return __generator(this, function (_a) {
        return [2
        /*return*/
        , _super.prototype.metricFindQuery.call(this, __assign(__assign({}, query), {
          region: 'ap-guangzhou'
        }), regex)];
      });
    });
  };

  return DCDatasource;
}(_base_datasource__WEBPACK_IMPORTED_MODULE_1__["BaseDatasource"]);

/* harmony default export */ __webpack_exports__["default"] = (DCDatasource);

/***/ }),

/***/ "./datasource/tc_monitor/ecm/query.ts":
/*!********************************************!*\
  !*** ./datasource/tc_monitor/ecm/query.ts ***!
  \********************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _base_query__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../_base/query */ "./datasource/tc_monitor/_base/query.ts");
/* harmony import */ var _query_def__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./query_def */ "./datasource/tc_monitor/ecm/query_def.ts");


Object(_base_query__WEBPACK_IMPORTED_MODULE_0__["default"])(_query_def__WEBPACK_IMPORTED_MODULE_1__["queryEditorName"], _query_def__WEBPACK_IMPORTED_MODULE_1__["queryEditorConfig"]);

/***/ }),

/***/ "./datasource/tc_monitor/ecm/query_def.ts":
/*!************************************************!*\
  !*** ./datasource/tc_monitor/ecm/query_def.ts ***!
  \************************************************/
/*! exports provided: default, ECMFilterFieldsDescriptor, templateQueryIdMap, ECMInstanceAliasList, ECMInvalidDemensions, namespace, queryEditorName, queryEditorConfig, modifyDimensons, ECMGetInstanceQueryParams */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ECMFilterFieldsDescriptor", function() { return ECMFilterFieldsDescriptor; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "templateQueryIdMap", function() { return templateQueryIdMap; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ECMInstanceAliasList", function() { return ECMInstanceAliasList; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ECMInvalidDemensions", function() { return ECMInvalidDemensions; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "namespace", function() { return namespace; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "queryEditorName", function() { return queryEditorName; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "queryEditorConfig", function() { return queryEditorConfig; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "modifyDimensons", function() { return modifyDimensons; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ECMGetInstanceQueryParams", function() { return GetInstanceQueryParams; });
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lodash */ "lodash");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _common_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../common/utils */ "./datasource/common/utils.ts");


var namespace = 'QCE/ECM';
var queryEditorName = 'ecmQuery';
var ECMInvalidDemensions = {
  // diskId: 'InstanceId',
  uuid: 'UUID' // unInstanceId: 'InstanceId',

};
var ECMInstanceAliasList = ['InstanceId', 'InstanceName'];
var templateQueryIdMap = {
  instance: 'InstanceId'
}; // select类型需要注意是{},multi后缀是[]

var ECMFilterFields = {
  Limit: 20,
  Offset: 0,
  zone: [],
  'zone-name': [],
  'module-id': [],
  'module-name': [],
  'instance-id': [],
  'instance-name': [],
  'ip-address': [],
  'instance-uuid': [],
  'instance-state': {},
  'internet-service-provider': [],
  'instance-family': [],
  'image-id': [],
  'vpc-id': [],
  'subnet-id': []
};
var ECMFilterFieldsDescriptor = [{
  key: 'Offset',
  enDescriptor: 'Offset',
  cnDescriptor: '偏移量, 例如Offset=20&Limit=20 返回第 20 到 40 项',
  link: '',
  type: 'inputNumber',
  min: 0
}, {
  key: 'Limit',
  enDescriptor: 'Limit',
  cnDescriptor: '单次请求返回的数量，默认为20，最小值为1，最大值为100',
  link: '',
  type: 'inputNumber',
  min: 1,
  max: 100
}, {
  key: 'zone',
  enDescriptor: 'zone',
  cnDescriptor: '可用区英文标识',
  link: '',
  type: 'dropdownMulti'
}, {
  key: 'zone-name',
  enDescriptor: 'zone-name',
  cnDescriptor: '排列顺序',
  link: '',
  type: 'inputMulti'
}, {
  key: 'module-id',
  enDescriptor: 'module-id',
  cnDescriptor: '模块ID',
  link: '',
  type: 'inputMulti'
}, {
  key: 'module-name',
  enDescriptor: 'module-name',
  cnDescriptor: '模块名称',
  link: '',
  type: 'inputMulti'
}, {
  key: 'instance-id',
  enDescriptor: 'instance-id',
  cnDescriptor: '实例ID',
  link: '',
  type: 'inputMulti'
}, {
  key: 'instance-name',
  enDescriptor: 'instance-name',
  cnDescriptor: '实例名称',
  link: '',
  type: 'inputMulti'
}, {
  key: 'ip-address',
  enDescriptor: 'ip-address',
  cnDescriptor: '内网/公网IP',
  link: '',
  type: 'inputMulti'
}, {
  key: 'instance-uuid',
  enDescriptor: 'instance-uuid',
  cnDescriptor: '实例uuid',
  link: '',
  type: 'inputMulti'
}, {
  key: 'instance-state',
  enDescriptor: 'instance-state',
  cnDescriptor: '实例状态',
  link: '',
  type: 'select',
  multiple: true,
  list: [{
    text: '创建中',
    value: 'PENDING'
  }, {
    text: '创建失败',
    value: 'LAUNCH_FAILED'
  }, {
    text: '运行中',
    value: 'RUNNING'
  }, {
    text: '关机',
    value: 'STOPPED'
  }, {
    text: '开机中',
    value: 'STARTING'
  }, {
    text: '关机中',
    value: 'STOPPING'
  }, {
    text: '重启中',
    value: 'REBOOTING'
  }, {
    text: '停止待销毁',
    value: 'SHUTDOWN'
  }, {
    text: '销毁中',
    value: 'TERMINATING'
  }]
}, {
  key: 'internet-service-provider',
  enDescriptor: 'internet-service-provider',
  cnDescriptor: '公网IP所属的运营商',
  link: '',
  type: 'inputMulti'
}, {
  key: 'instance-family',
  enDescriptor: 'instance-family',
  cnDescriptor: '机型family',
  link: '',
  type: 'inputMulti'
}, {
  key: 'image-id',
  enDescriptor: 'image-id',
  cnDescriptor: '镜像ID',
  link: '',
  type: 'inputMulti'
}, {
  key: 'vpc-id',
  enDescriptor: 'vpc-id',
  cnDescriptor: '实例的vpc id',
  link: '',
  type: 'inputMulti'
}, {
  key: 'subnet-id',
  enDescriptor: 'subnet-id',
  cnDescriptor: '实例的subnet id',
  link: '',
  type: 'inputMulti'
}]; // 各产品实例列表detail配置

var queryEditorConfig = {
  instanceDocUrl: 'https://cloud.tencent.com/document/api/1108/42565',
  namespace: namespace,
  fieldDescriptor: ECMFilterFieldsDescriptor
};
var ECM_STATE = {
  region: 'ap-guangzhou',
  metricName: '',
  metricUnit: '',
  period: undefined,
  dimensionObject: null,
  instance: '',
  instanceAlias: 'InstanceId',
  queries: ECMFilterFields
};

function GetInstanceQueryParams(queries) {
  if (queries === void 0) {
    queries = {};
  }

  return Object(_common_utils__WEBPACK_IMPORTED_MODULE_1__["instanceQueryParamsBaseParse"])(queries, true);
} // function isValidMetric(metricObj: any = {}) {
//   const dimension = _.get(metricObj, 'Dimensions[0].Dimensions');
//   // console.log('dimension', dimension, dimension.length === 1 && _.indexOf(dimension, 'diskId') !== -1);
//   return dimension.length === 1 &&( _.indexOf(dimension, 'UUID') !== -1 || _.indexOf(dimension, 'uuid') !== -1);
// }


function modifyDimensons(metricItem) {
  var metricTmp = lodash__WEBPACK_IMPORTED_MODULE_0__["cloneDeep"](metricItem);

  metricTmp.Dimensions.forEach(function (item) {
    item.Dimensions = ['UUID'];
  });
  return metricTmp;
}

/* harmony default export */ __webpack_exports__["default"] = (ECM_STATE);


/***/ }),

/***/ "./datasource/tc_monitor/ecm_block_storage/datasource.ts":
/*!***************************************************************!*\
  !*** ./datasource/tc_monitor/ecm_block_storage/datasource.ts ***!
  \***************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _query_def__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./query_def */ "./datasource/tc_monitor/ecm_block_storage/query_def.ts");
/* harmony import */ var _base_datasource__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../_base/datasource */ "./datasource/tc_monitor/_base/datasource.ts");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lodash */ "lodash");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _common_datasourceStorage__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../common/datasourceStorage */ "./datasource/common/datasourceStorage.ts");
var __extends = undefined && undefined.__extends || function () {
  var _extendStatics = function extendStatics(d, b) {
    _extendStatics = Object.setPrototypeOf || {
      __proto__: []
    } instanceof Array && function (d, b) {
      d.__proto__ = b;
    } || function (d, b) {
      for (var p in b) {
        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];
      }
    };

    return _extendStatics(d, b);
  };

  return function (d, b) {
    if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");

    _extendStatics(d, b);

    function __() {
      this.constructor = d;
    }

    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();

var __awaiter = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {
  function adopt(value) {
    return value instanceof P ? value : new P(function (resolve) {
      resolve(value);
    });
  }

  return new (P || (P = Promise))(function (resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }

    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }

    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }

    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};

var __generator = undefined && undefined.__generator || function (thisArg, body) {
  var _ = {
    label: 0,
    sent: function sent() {
      if (t[0] & 1) throw t[1];
      return t[1];
    },
    trys: [],
    ops: []
  },
      f,
      y,
      t,
      g;
  return g = {
    next: verb(0),
    "throw": verb(1),
    "return": verb(2)
  }, typeof Symbol === "function" && (g[Symbol.iterator] = function () {
    return this;
  }), g;

  function verb(n) {
    return function (v) {
      return step([n, v]);
    };
  }

  function step(op) {
    if (f) throw new TypeError("Generator is already executing.");

    while (_) {
      try {
        if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
        if (y = 0, t) op = [op[0] & 2, t.value];

        switch (op[0]) {
          case 0:
          case 1:
            t = op;
            break;

          case 4:
            _.label++;
            return {
              value: op[1],
              done: false
            };

          case 5:
            _.label++;
            y = op[1];
            op = [0];
            continue;

          case 7:
            op = _.ops.pop();

            _.trys.pop();

            continue;

          default:
            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
              _ = 0;
              continue;
            }

            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
              _.label = op[1];
              break;
            }

            if (op[0] === 6 && _.label < t[1]) {
              _.label = t[1];
              t = op;
              break;
            }

            if (t && _.label < t[2]) {
              _.label = t[2];

              _.ops.push(op);

              break;
            }

            if (t[2]) _.ops.pop();

            _.trys.pop();

            continue;
        }

        op = body.call(thisArg, _);
      } catch (e) {
        op = [6, e];
        y = 0;
      } finally {
        f = t = 0;
      }
    }

    if (op[0] & 5) throw op[1];
    return {
      value: op[0] ? op[1] : void 0,
      done: true
    };
  }
};






var DCDatasource =
/** @class */
function (_super) {
  __extends(DCDatasource, _super);

  function DCDatasource(instanceSettings, backendSrv, templateSrv) {
    var _this = _super.call(this, instanceSettings, backendSrv, templateSrv) || this;

    _this.Namespace = _query_def__WEBPACK_IMPORTED_MODULE_0__["namespace"];
    _this.InstanceAliasList = _query_def__WEBPACK_IMPORTED_MODULE_0__["ECMBLOCKSTORAGEInstanceAliasList"];
    _this.InvalidDimensions = _query_def__WEBPACK_IMPORTED_MODULE_0__["ECMBLOCKSTORAGEInvalidDemensions"];
    _this.queryMonitorExtraConfg = _query_def__WEBPACK_IMPORTED_MODULE_0__["queryMonitorExtraConfg"];
    _this.templateQueryIdMap = _query_def__WEBPACK_IMPORTED_MODULE_0__["templateQueryIdMap"];
    _this.keyInStorage = _query_def__WEBPACK_IMPORTED_MODULE_0__["keyInStorage"]; // 此处service是接口的配置参数，需和plugin.json里一致，和constant.ts中SERVICES_API_INFO保持一致

    _this.InstanceReqConfig = {
      service: 'ecm',
      action: 'DescribeInstances',
      responseField: 'InstanceSet'
    };
    return _this;
  }

  DCDatasource.prototype.getDiskList = function (params) {
    var _a;

    return __awaiter(this, void 0, void 0, function () {
      var payload, InstanceId, instanceCache, instanceObj, dataDisks;

      var _this = this;

      return __generator(this, function (_b) {
        switch (_b.label) {
          case 0:
            payload = params.payload;
            InstanceId = payload.InstanceId;
            return [4
            /*yield*/
            , _common_datasourceStorage__WEBPACK_IMPORTED_MODULE_3__["default"].getInstance(this.service)];

          case 1:
            instanceCache = _b.sent();
            instanceObj = (_a = lodash__WEBPACK_IMPORTED_MODULE_2___default.a.cloneDeep(instanceCache.find(function (item) {
              return item[_this.templateQueryIdMap.instance] === InstanceId;
            }))) !== null && _a !== void 0 ? _a : {};
            dataDisks = instanceObj.DataDisks;
            return [2
            /*return*/
            , dataDisks];
        }
      });
    });
  };

  DCDatasource.prototype.fetchMetricData = function (action, region, instance, query) {
    return __awaiter(this, void 0, void 0, function () {
      var payload, rs, result;

      var _this = this;

      return __generator(this, function (_a) {
        switch (_a.label) {
          case 0:
            payload = {
              InstanceId: instance,
              Limit: 100
            };
            return [4
            /*yield*/
            , this.getDiskList({
              region: region,
              action: action,
              payload: payload
            })];

          case 1:
            rs = _a.sent();
            result = rs.map(function (o) {
              o._InstanceAliasValue = o[_this.templateQueryIdMap.diskId];
              return {
                text: o[_this.templateQueryIdMap.diskId],
                value: o[_this.templateQueryIdMap.diskId]
              };
            });
            return [4
            /*yield*/
            , _common_datasourceStorage__WEBPACK_IMPORTED_MODULE_3__["default"].setExtraStorage(this.service, this.keyInStorage.diskId, rs)];

          case 2:
            _a.sent();

            return [2
            /*return*/
            , result];
        }
      });
    });
  };

  return DCDatasource;
}(_base_datasource__WEBPACK_IMPORTED_MODULE_1__["BaseDatasource"]);

/* harmony default export */ __webpack_exports__["default"] = (DCDatasource);

/***/ }),

/***/ "./datasource/tc_monitor/ecm_block_storage/query.ts":
/*!**********************************************************!*\
  !*** ./datasource/tc_monitor/ecm_block_storage/query.ts ***!
  \**********************************************************/
/*! exports provided: QueryCtrl, sQuery */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "QueryCtrl", function() { return QueryCtrl; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "sQuery", function() { return sQuery; });
/* harmony import */ var grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! grafana/app/core/core_module */ "grafana/app/core/core_module");
/* harmony import */ var grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _query_def__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./query_def */ "./datasource/tc_monitor/ecm_block_storage/query_def.ts");
/* harmony import */ var _common_constants__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../common/constants */ "./datasource/common/constants.ts");



var ExtraFields = [// {
//   label: 'nodeid',
//   field: 'NodeId',
//   action: 'DescribeInstanceNodeInfo',
// },
{
  label: 'diskId',
  field: 'diskId'
}];

var QueryCtrl =
/** @class */
function () {
  QueryCtrl.$inject = ["$scope", "$rootScope"];

  /** @ngInject */
  function QueryCtrl($scope, $rootScope) {
    $scope.init = function () {
      $scope.ECMBLOCKSTORAGEFilterFieldsDescriptor = _query_def__WEBPACK_IMPORTED_MODULE_1__["ECMBLOCKSTORAGEFilterFieldsDescriptor"];
      $scope.ExtraFields = ExtraFields;
      $scope.namespace = _query_def__WEBPACK_IMPORTED_MODULE_1__["namespace"];
    }; // $scope.getInstanceId = () => {
    //   let { instance } = $scope.target;
    //   const service = GetServiceFromNamespace($scope.namespace);
    //   instance = $scope.datasource.getServiceFn(service, 'getVariable')(instance);
    //   if (!instance) {
    //     return '';
    //   }
    //   try {
    //     instance = JSON.parse(instance)[templateQueryIdMap.instance];
    //   } catch (error) {
    //     console.log();
    //   }
    //   return instance;
    // };


    $scope.getExtraFields = function () {
      return ExtraFields.filter(function (item) {
        var _a, _b;

        return item.field in ((_a = $scope.dims) !== null && _a !== void 0 ? _a : {}) || item.label in ((_b = $scope.dims) !== null && _b !== void 0 ? _b : {});
      });
    };

    $scope.getExtraDropdown = function (target, action) {
      var instance = target.instance;
      var service = Object(_common_constants__WEBPACK_IMPORTED_MODULE_2__["GetServiceFromNamespace"])($scope.namespace);
      instance = $scope.datasource.getServiceFn(service, 'getVariable')(instance);

      try {
        instance = JSON.parse(instance);
        var dataDisks = instance.DataDisks;
        return dataDisks.map(function (o) {
          o._InstanceAliasValue = o[_query_def__WEBPACK_IMPORTED_MODULE_1__["templateQueryIdMap"].diskId];
          return {
            text: o[_query_def__WEBPACK_IMPORTED_MODULE_1__["templateQueryIdMap"].diskId],
            value: JSON.stringify(o)
          };
        });
      } catch (error) {
        // console.log('instance error', instance);
        var payload = {
          InstanceId: instance
        };
        var rs = $scope.datasource.getServiceFn(service, 'getDiskList')({
          payload: payload
        });
        var result = rs.map(function (o) {
          return {
            text: o[_query_def__WEBPACK_IMPORTED_MODULE_1__["templateQueryIdMap"].diskId],
            value: JSON.stringify(o)
          };
        });
        return result;
      }
    };

    $scope.init();
  }

  return QueryCtrl;
}();


var template = "\n<div>\n  <div class=\"tc-sub-params\" ng-if=\"showDetail\">\n    <label class=\"gf-form-label tc-info-label\">\n      Functions are queried by following params.\n      <a target=\"_blank\" style=\"text-decoration:underline;color:#006eff;font-size:medium\" href=\"https://cloud.tencent.com/document/product/248/50388\">Click here to get API doc.</a>\n    </label>\n    <div class=\"gf-form-inline\" ng-repeat=\"field in ECMBLOCKSTORAGEFilterFieldsDescriptor\">\n      <div class=\"gf-form\">\n        <label class=\"gf-form-label width-14\">\n          {{ field.key }}\n          <info-popover mode=\"right-normal\">\n            {{ field.cnDescriptor }}\n            <a target=\"_blank\" href=\"{{field.link}}\" ng-if=\"field.link\">Click here for more information.</a>\n          </info-popover>\n        </label>\n        <input\n          ng-if=\"field.type === 'inputNumber'\"\n          style=\"margin-right:2px\"\n          type=\"number\"\n          ng-model=\"target.queries[field.key]\"\n          ng-change=\"onChange()\"\n          class=\"gf-form-input width-10\"\n          ng-min=\"field.min\"\n          ng-max=\"field.max\"\n        />\n        <input\n          ng-if=\"field.type === 'input'\"\n          style=\"margin-right:2px\"\n          type=\"text\"\n          ng-model=\"target.queries[field.key]\"\n          ng-change=\"onChange()\"\n          class=\"gf-form-input width-10\"\n        />    \n        <multi-condition\n          ng-if=\"field.type === 'inputNumberMulti'\"\n          type=\"'inputNumber'\"\n          max-cond=\"5\"\n          value=\"target.queries.Filters[field.key]\"\n          maxNum=\"field.max\"\n          minNum=\"field.min\"\n          on-change=\"onChange()\"\n        ></multi-condition>\n        <multi-condition\n          ng-if=\"field.type === 'inputMulti'\"\n          type=\"'input'\"\n          value=\"target.queries[field.key]\"\n          on-change=\"onChange()\"\n        ></multi-condition>\n        <custom-select-dropdown\n          ng-if=\"field.type === 'select'\"\n          value=\"target.queries[field.key]\"\n          options=\"field.list\"\n          multiple=\"field.multiple || false\"\n          on-change=\"onChange()\"\n        ></custom-select-dropdown>\n      </div>\n    </div>\n  </div>\n\n<!-- \u8D77\u59CB\u533A\u57DF \u76EE\u7684\u533A\u57DF\u7B49 -->\n  <div>\n    <div class=\"gf-form-inline\" ng-repeat=\"extra in getExtraFields()\">\n      <div class=\"gf-form\">\n        <label class=\"gf-form-label query-keyword width-9\">{{extra.label}}</label>\n        <div class=\"gf-form-select-wrapper gf-form-select-wrapper--caret-indent\">\n          <gf-form-dropdown model=\"target[extra.field]\" allow-custom=\"false\" get-options=\"getExtraDropdown(target)\"\n            on-change=\"onRefresh()\" css-class=\"min-width-10\">\n          </gf-form-dropdown>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n";
function sQuery() {
  return {
    template: template,
    controller: QueryCtrl,
    restrict: 'E',
    scope: {
      target: '=',
      showDetail: '=',
      region: '=',
      datasource: '=',
      getDropdownOptions: '&',
      onChange: '&',
      onRefresh: '&',
      dims: '='
    }
  };
}
grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0___default.a.directive(_query_def__WEBPACK_IMPORTED_MODULE_1__["queryEditorName"], sQuery);

/***/ }),

/***/ "./datasource/tc_monitor/ecm_block_storage/query_def.ts":
/*!**************************************************************!*\
  !*** ./datasource/tc_monitor/ecm_block_storage/query_def.ts ***!
  \**************************************************************/
/*! exports provided: default, ECMBLOCKSTORAGEFilterFieldsDescriptor, templateQueryIdMap, ECMBLOCKSTORAGEInstanceAliasList, ECMBLOCKSTORAGEInvalidDemensions, namespace, queryEditorName, queryEditorConfig, keyInStorage, queryMonitorExtraConfg, ECMBLOCKSTORAGEGetInstanceQueryParams */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ECMBLOCKSTORAGEFilterFieldsDescriptor", function() { return ECMBLOCKSTORAGEFilterFieldsDescriptor; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "templateQueryIdMap", function() { return templateQueryIdMap; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ECMBLOCKSTORAGEInstanceAliasList", function() { return ECMBLOCKSTORAGEInstanceAliasList; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ECMBLOCKSTORAGEInvalidDemensions", function() { return ECMBLOCKSTORAGEInvalidDemensions; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "namespace", function() { return namespace; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "queryEditorName", function() { return queryEditorName; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "queryEditorConfig", function() { return queryEditorConfig; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "keyInStorage", function() { return keyInStorage; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "queryMonitorExtraConfg", function() { return queryMonitorExtraConfg; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ECMBLOCKSTORAGEGetInstanceQueryParams", function() { return GetInstanceQueryParams; });
/* harmony import */ var _common_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../common/utils */ "./datasource/common/utils.ts");

var namespace = 'QCE/ECM_BLOCK_STORAGE'; // 组件名称。这里名字要和index.ts中的SERVICES对应，后面会根据SERVICES中service字段拼接这个query组件名称

var queryEditorName = 'ecmBlockStorageQuery';
var ECMBLOCKSTORAGEInvalidDemensions = {
  uuid: 'UUID',
  diskId: 'DiskId'
}; // 需和文件名对应

var ECMBLOCKSTORAGEInstanceAliasList = ['InstanceId', 'InstanceName'];
var templateQueryIdMap = {
  instance: 'InstanceId',
  diskId: 'DiskId'
}; // select类型需要注意是{},multi后缀是[],dropdown是''

var ECMBLOCKSTORAGEFilterFields = {
  Limit: 20,
  Offset: 0,
  'zone-name': [],
  'module-id': [],
  'module-name': [],
  'instance-id': [],
  'instance-name': [],
  'ip-address': [],
  'instance-uuid': [],
  'instance-state': {},
  'internet-service-provider': [],
  'instance-family': [],
  'image-id': [],
  'vpc-id': [],
  'subnet-id': []
};
var ECMBLOCKSTORAGEFilterFieldsDescriptor = [{
  key: 'Offset',
  enDescriptor: 'Offset',
  cnDescriptor: '偏移量, 例如Offset=20&Limit=20 返回第 20 到 40 项',
  link: '',
  type: 'inputNumber',
  min: 0
}, {
  key: 'Limit',
  enDescriptor: 'Limit',
  cnDescriptor: '单次请求返回的数量，默认为20，最小值为1，最大值为100',
  link: '',
  type: 'inputNumber',
  min: 1,
  max: 100
}, {
  key: 'zone-name',
  enDescriptor: 'zone-name',
  cnDescriptor: '排列顺序',
  link: '',
  type: 'inputMulti'
}, {
  key: 'module-id',
  enDescriptor: 'module-id',
  cnDescriptor: '模块ID',
  link: '',
  type: 'inputMulti'
}, {
  key: 'module-name',
  enDescriptor: 'module-name',
  cnDescriptor: '模块名称',
  link: '',
  type: 'inputMulti'
}, {
  key: 'instance-id',
  enDescriptor: 'instance-id',
  cnDescriptor: '实例ID',
  link: '',
  type: 'inputMulti'
}, {
  key: 'instance-name',
  enDescriptor: 'instance-name',
  cnDescriptor: '实例名称',
  link: '',
  type: 'inputMulti'
}, {
  key: 'ip-address',
  enDescriptor: 'ip-address',
  cnDescriptor: '内网/公网IP',
  link: '',
  type: 'inputMulti'
}, {
  key: 'instance-uuid',
  enDescriptor: 'instance-uuid',
  cnDescriptor: '实例uuid',
  link: '',
  type: 'inputMulti'
}, {
  key: 'instance-state',
  enDescriptor: 'instance-state',
  cnDescriptor: '实例状态',
  link: '',
  type: 'select',
  multiple: true,
  list: [{
    text: '创建中',
    value: 'PENDING'
  }, {
    text: '创建失败',
    value: 'LAUNCH_FAILED'
  }, {
    text: '运行中',
    value: 'RUNNING'
  }, {
    text: '关机',
    value: 'STOPPED'
  }, {
    text: '开机中',
    value: 'STARTING'
  }, {
    text: '关机中',
    value: 'STOPPING'
  }, {
    text: '重启中',
    value: 'REBOOTING'
  }, {
    text: '停止待销毁',
    value: 'SHUTDOWN'
  }, {
    text: '销毁中',
    value: 'TERMINATING'
  }]
}, {
  key: 'internet-service-provider',
  enDescriptor: 'internet-service-provider',
  cnDescriptor: '公网IP所属的运营商',
  link: '',
  type: 'inputMulti'
}, {
  key: 'instance-family',
  enDescriptor: 'instance-family',
  cnDescriptor: '机型family',
  link: '',
  type: 'inputMulti'
}, {
  key: 'image-id',
  enDescriptor: 'image-id',
  cnDescriptor: '镜像ID',
  link: '',
  type: 'inputMulti'
}, {
  key: 'vpc-id',
  enDescriptor: 'vpc-id',
  cnDescriptor: '实例的vpc id',
  link: '',
  type: 'inputMulti'
}, {
  key: 'subnet-id',
  enDescriptor: 'subnet-id',
  cnDescriptor: '实例的subnet id',
  link: '',
  type: 'inputMulti'
}]; // 各产品实例列表detail配置

var queryEditorConfig = {
  instanceDocUrl: 'https://cloud.tencent.com/document/api/1108/42565',
  namespace: namespace,
  fieldDescriptor: ECMBLOCKSTORAGEFilterFieldsDescriptor
};
var ECMBLOCKSTORAGE_STATE = {
  region: 'ap-guangzhou',
  metricName: '',
  metricUnit: '',
  period: undefined,
  dimensionObject: null,
  instance: '',
  instanceAlias: 'InstanceId',
  diskId: '',
  queries: ECMBLOCKSTORAGEFilterFields
}; // 需要缓存到storage的内容的key列表

var keyInStorage = {
  diskId: 'diskId'
};
/*
如果有InstanceId额外的维度，原则上都需要传入此map结构配置
key的含义：
  经过InvalidDemensions处理后的string。topicId =》TopicId。
  否则认为指标中维度正确，和指标中维度字段保持一致，即topicId
value的含义：
  1 dim_KeyInStorage 指标中维度dimension对应的storage中的key，获取缓存列表，sourceMapList、
  2 dim_KeyInTarget  通过getVariable方法获取变量中选中项。比如ListnerId为Lis-xxxx；即：STATE中的key。
                    默认取通过InvalidDemsion处理后的key
  3 dim_KeyInMap     保存在模板变量value比如（监听器ID）源自sourceMapList（接口返回内容）的哪个key（ListenerId）。
                    即：templateQueryIdMap中内容。
                    联合上面2的内容筛选出原始sourceMap
*/

var queryMonitorExtraConfg = {
  DiskId: {
    dim_KeyInStorage: keyInStorage.diskId,
    dim_KeyInTarget: 'diskId',
    dim_KeyInMap: templateQueryIdMap.diskId
  }
};

function GetInstanceQueryParams(queries) {
  if (queries === void 0) {
    queries = {};
  }

  return Object(_common_utils__WEBPACK_IMPORTED_MODULE_0__["instanceQueryParamsBaseParse"])(queries, true);
}

/* harmony default export */ __webpack_exports__["default"] = (ECMBLOCKSTORAGE_STATE);


/***/ }),

/***/ "./datasource/tc_monitor/ecm_lb/datasource.ts":
/*!****************************************************!*\
  !*** ./datasource/tc_monitor/ecm_lb/datasource.ts ***!
  \****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _query_def__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./query_def */ "./datasource/tc_monitor/ecm_lb/query_def.ts");
/* harmony import */ var _base_datasource__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../_base/datasource */ "./datasource/tc_monitor/_base/datasource.ts");
var __extends = undefined && undefined.__extends || function () {
  var _extendStatics = function extendStatics(d, b) {
    _extendStatics = Object.setPrototypeOf || {
      __proto__: []
    } instanceof Array && function (d, b) {
      d.__proto__ = b;
    } || function (d, b) {
      for (var p in b) {
        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];
      }
    };

    return _extendStatics(d, b);
  };

  return function (d, b) {
    if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");

    _extendStatics(d, b);

    function __() {
      this.constructor = d;
    }

    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();

var __assign = undefined && undefined.__assign || function () {
  __assign = Object.assign || function (t) {
    for (var s, i = 1, n = arguments.length; i < n; i++) {
      s = arguments[i];

      for (var p in s) {
        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
      }
    }

    return t;
  };

  return __assign.apply(this, arguments);
};

var __awaiter = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {
  function adopt(value) {
    return value instanceof P ? value : new P(function (resolve) {
      resolve(value);
    });
  }

  return new (P || (P = Promise))(function (resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }

    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }

    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }

    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};

var __generator = undefined && undefined.__generator || function (thisArg, body) {
  var _ = {
    label: 0,
    sent: function sent() {
      if (t[0] & 1) throw t[1];
      return t[1];
    },
    trys: [],
    ops: []
  },
      f,
      y,
      t,
      g;
  return g = {
    next: verb(0),
    "throw": verb(1),
    "return": verb(2)
  }, typeof Symbol === "function" && (g[Symbol.iterator] = function () {
    return this;
  }), g;

  function verb(n) {
    return function (v) {
      return step([n, v]);
    };
  }

  function step(op) {
    if (f) throw new TypeError("Generator is already executing.");

    while (_) {
      try {
        if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
        if (y = 0, t) op = [op[0] & 2, t.value];

        switch (op[0]) {
          case 0:
          case 1:
            t = op;
            break;

          case 4:
            _.label++;
            return {
              value: op[1],
              done: false
            };

          case 5:
            _.label++;
            y = op[1];
            op = [0];
            continue;

          case 7:
            op = _.ops.pop();

            _.trys.pop();

            continue;

          default:
            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
              _ = 0;
              continue;
            }

            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
              _.label = op[1];
              break;
            }

            if (op[0] === 6 && _.label < t[1]) {
              _.label = t[1];
              t = op;
              break;
            }

            if (t && _.label < t[2]) {
              _.label = t[2];

              _.ops.push(op);

              break;
            }

            if (t[2]) _.ops.pop();

            _.trys.pop();

            continue;
        }

        op = body.call(thisArg, _);
      } catch (e) {
        op = [6, e];
        y = 0;
      } finally {
        f = t = 0;
      }
    }

    if (op[0] & 5) throw op[1];
    return {
      value: op[0] ? op[1] : void 0,
      done: true
    };
  }
};




var DCDatasource =
/** @class */
function (_super) {
  __extends(DCDatasource, _super);

  function DCDatasource(instanceSettings, backendSrv, templateSrv) {
    var _this = _super.call(this, instanceSettings, backendSrv, templateSrv) || this;

    _this.Namespace = _query_def__WEBPACK_IMPORTED_MODULE_0__["namespace"];
    _this.InstanceAliasList = _query_def__WEBPACK_IMPORTED_MODULE_0__["ECMLBInstanceAliasList"];
    _this.InvalidDimensions = _query_def__WEBPACK_IMPORTED_MODULE_0__["ECMLBInvalidDemensions"];
    _this.templateQueryIdMap = _query_def__WEBPACK_IMPORTED_MODULE_0__["templateQueryIdMap"]; // 此处service是接口的配置参数，需和plugin.json里一致，和constant.ts中SERVICES_API_INFO保持一致

    _this.InstanceReqConfig = {
      service: 'ecm',
      action: 'DescribeLoadBalancers',
      responseField: 'LoadBalancerSet'
    };
    return _this;
  }

  DCDatasource.prototype.metricFindQuery = function (query, regex) {
    return __awaiter(this, void 0, void 0, function () {
      return __generator(this, function (_a) {
        return [2
        /*return*/
        , _super.prototype.metricFindQuery.call(this, __assign(__assign({}, query), {
          region: 'ap-guangzhou'
        }), regex)];
      });
    });
  };

  return DCDatasource;
}(_base_datasource__WEBPACK_IMPORTED_MODULE_1__["BaseDatasource"]);

/* harmony default export */ __webpack_exports__["default"] = (DCDatasource);

/***/ }),

/***/ "./datasource/tc_monitor/ecm_lb/query.ts":
/*!***********************************************!*\
  !*** ./datasource/tc_monitor/ecm_lb/query.ts ***!
  \***********************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _base_query__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../_base/query */ "./datasource/tc_monitor/_base/query.ts");
/* harmony import */ var _query_def__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./query_def */ "./datasource/tc_monitor/ecm_lb/query_def.ts");


Object(_base_query__WEBPACK_IMPORTED_MODULE_0__["default"])(_query_def__WEBPACK_IMPORTED_MODULE_1__["queryEditorName"], _query_def__WEBPACK_IMPORTED_MODULE_1__["queryEditorConfig"]);

/***/ }),

/***/ "./datasource/tc_monitor/ecm_lb/query_def.ts":
/*!***************************************************!*\
  !*** ./datasource/tc_monitor/ecm_lb/query_def.ts ***!
  \***************************************************/
/*! exports provided: default, ECMLBFilterFieldsDescriptor, templateQueryIdMap, ECMLBInstanceAliasList, ECMLBInvalidDemensions, namespace, queryEditorName, queryEditorConfig, modifyDimensons, ECMLBGetInstanceQueryParams */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ECMLBFilterFieldsDescriptor", function() { return ECMLBFilterFieldsDescriptor; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "templateQueryIdMap", function() { return templateQueryIdMap; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ECMLBInstanceAliasList", function() { return ECMLBInstanceAliasList; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ECMLBInvalidDemensions", function() { return ECMLBInvalidDemensions; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "namespace", function() { return namespace; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "queryEditorName", function() { return queryEditorName; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "queryEditorConfig", function() { return queryEditorConfig; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "modifyDimensons", function() { return modifyDimensons; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ECMLBGetInstanceQueryParams", function() { return GetInstanceQueryParams; });
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lodash */ "lodash");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _common_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../common/utils */ "./datasource/common/utils.ts");


var namespace = 'QCE/ECM_LB';
var queryEditorName = 'ecmLbQuery';
var ECMLBInvalidDemensions = {
  vip: 'LoadBalancerVips'
};
var ECMLBInstanceAliasList = ['LoadBalancerId', 'LoadBalancerName'];
var templateQueryIdMap = {
  instance: 'LoadBalancerId'
}; // select类型需要注意是{},multi后缀是[]

var ECMLBFilterFields = {
  Limit: 20,
  Offset: 0,
  LoadBalancerIds: [],
  LoadBalancerName: [],
  LoadBalancerVips: [],
  BackendPrivateIps: [],
  VpcId: ''
};
var ECMLBFilterFieldsDescriptor = [{
  key: 'Offset',
  enDescriptor: 'Offset',
  cnDescriptor: '偏移量, 例如Offset=20&Limit=20 返回第 20 到 40 项',
  link: '',
  type: 'inputNumber',
  min: 0
}, {
  key: 'Limit',
  enDescriptor: 'Limit',
  cnDescriptor: '单次请求返回的数量，默认为20，最小值为1，最大值为100',
  link: '',
  type: 'inputNumber',
  min: 1,
  max: 100
}, {
  key: 'LoadBalancerIds',
  enDescriptor: 'LoadBalancerIds',
  cnDescriptor: '负载均衡器ID数组',
  link: '',
  type: 'inputMulti'
}, {
  key: 'LoadBalancerName',
  enDescriptor: 'LoadBalancerName',
  cnDescriptor: '负载均衡器名称',
  link: '',
  type: 'inputMulti'
}, {
  key: 'LoadBalancerVips',
  enDescriptor: 'LoadBalancerVips',
  cnDescriptor: '负载均衡获得的公网IP地址',
  link: '',
  type: 'inputMulti'
}, {
  key: 'BackendPrivateIps',
  enDescriptor: 'BackendPrivateIps',
  cnDescriptor: '绑定的后端服务的内网 IP',
  link: '',
  type: 'inputMulti'
}, {
  key: 'VpcId',
  enDescriptor: 'VpcId',
  cnDescriptor: '实例所属私有网络唯一ID',
  link: '',
  type: 'input'
}]; // 各产品实例列表detail配置

var queryEditorConfig = {
  instanceDocUrl: 'https://cloud.tencent.com/document/api/1108/48459',
  namespace: namespace,
  fieldDescriptor: ECMLBFilterFieldsDescriptor
};
var ECM_STATE = {
  region: 'ap-guangzhou',
  metricName: '',
  metricUnit: '',
  period: undefined,
  dimensionObject: null,
  instance: '',
  instanceAlias: 'LoadBalancerId',
  queries: ECMLBFilterFields
};

function GetInstanceQueryParams(queries) {
  if (queries === void 0) {
    queries = {};
  }

  return Object(_common_utils__WEBPACK_IMPORTED_MODULE_1__["instanceQueryParamsBaseParse"])(queries, false);
} // function isValidMetric(metricObj: any = {}) {
//   const dimension = _.get(metricObj, 'Dimensions[0].Dimensions');
//   // console.log('dimension', dimension, dimension.length === 1 && _.indexOf(dimension, 'diskId') !== -1);
//   return dimension.length === 1 &&( _.indexOf(dimension, 'UUID') !== -1 || _.indexOf(dimension, 'uuid') !== -1);
// }


function modifyDimensons(metricItem) {
  var metricTmp = lodash__WEBPACK_IMPORTED_MODULE_0__["cloneDeep"](metricItem);

  metricTmp.Dimensions.forEach(function (item) {// item.Dimensions = ['UUID'];
  });
  return metricTmp;
}

/* harmony default export */ __webpack_exports__["default"] = (ECM_STATE);


/***/ }),

/***/ "./datasource/tc_monitor/gse/datasource.ts":
/*!*************************************************!*\
  !*** ./datasource/tc_monitor/gse/datasource.ts ***!
  \*************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _query_def__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./query_def */ "./datasource/tc_monitor/gse/query_def.ts");
/* harmony import */ var _base_datasource__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../_base/datasource */ "./datasource/tc_monitor/_base/datasource.ts");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lodash */ "lodash");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _common_constants__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../common/constants */ "./datasource/common/constants.ts");
/* harmony import */ var _common_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../common/utils */ "./datasource/common/utils.ts");
/* harmony import */ var _common_datasourceStorage__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../common/datasourceStorage */ "./datasource/common/datasourceStorage.ts");
/* harmony import */ var _locale__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../locale */ "./locale/index.ts");
var __extends = undefined && undefined.__extends || function () {
  var _extendStatics = function extendStatics(d, b) {
    _extendStatics = Object.setPrototypeOf || {
      __proto__: []
    } instanceof Array && function (d, b) {
      d.__proto__ = b;
    } || function (d, b) {
      for (var p in b) {
        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];
      }
    };

    return _extendStatics(d, b);
  };

  return function (d, b) {
    if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");

    _extendStatics(d, b);

    function __() {
      this.constructor = d;
    }

    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();

var __awaiter = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {
  function adopt(value) {
    return value instanceof P ? value : new P(function (resolve) {
      resolve(value);
    });
  }

  return new (P || (P = Promise))(function (resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }

    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }

    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }

    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};

var __generator = undefined && undefined.__generator || function (thisArg, body) {
  var _ = {
    label: 0,
    sent: function sent() {
      if (t[0] & 1) throw t[1];
      return t[1];
    },
    trys: [],
    ops: []
  },
      f,
      y,
      t,
      g;
  return g = {
    next: verb(0),
    "throw": verb(1),
    "return": verb(2)
  }, typeof Symbol === "function" && (g[Symbol.iterator] = function () {
    return this;
  }), g;

  function verb(n) {
    return function (v) {
      return step([n, v]);
    };
  }

  function step(op) {
    if (f) throw new TypeError("Generator is already executing.");

    while (_) {
      try {
        if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
        if (y = 0, t) op = [op[0] & 2, t.value];

        switch (op[0]) {
          case 0:
          case 1:
            t = op;
            break;

          case 4:
            _.label++;
            return {
              value: op[1],
              done: false
            };

          case 5:
            _.label++;
            y = op[1];
            op = [0];
            continue;

          case 7:
            op = _.ops.pop();

            _.trys.pop();

            continue;

          default:
            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
              _ = 0;
              continue;
            }

            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
              _.label = op[1];
              break;
            }

            if (op[0] === 6 && _.label < t[1]) {
              _.label = t[1];
              t = op;
              break;
            }

            if (t && _.label < t[2]) {
              _.label = t[2];

              _.ops.push(op);

              break;
            }

            if (t[2]) _.ops.pop();

            _.trys.pop();

            continue;
        }

        op = body.call(thisArg, _);
      } catch (e) {
        op = [6, e];
        y = 0;
      } finally {
        f = t = 0;
      }
    }

    if (op[0] & 5) throw op[1];
    return {
      value: op[0] ? op[1] : void 0,
      done: true
    };
  }
};









var DCDatasource =
/** @class */
function (_super) {
  __extends(DCDatasource, _super);

  function DCDatasource(instanceSettings, backendSrv, templateSrv) {
    var _this = _super.call(this, instanceSettings, backendSrv, templateSrv) || this;

    _this.Namespace = _query_def__WEBPACK_IMPORTED_MODULE_0__["namespace"];
    _this.InstanceAliasList = _query_def__WEBPACK_IMPORTED_MODULE_0__["GSEInstanceAliasList"];
    _this.InvalidDimensions = _query_def__WEBPACK_IMPORTED_MODULE_0__["GSEInvalidDemensions"];
    _this.templateQueryIdMap = _query_def__WEBPACK_IMPORTED_MODULE_0__["templateQueryIdMap"];
    _this.queryMonitorExtraConfg = _query_def__WEBPACK_IMPORTED_MODULE_0__["queryMonitorExtraConfg"]; // 此处service是接口的配置参数，需和plugin.json里一致，和constant.ts中SERVICES_API_INFO保持一致

    _this.InstanceReqConfig = {
      service: 'gse',
      action: 'DescribeInstances',
      responseField: 'Instances'
    };
    _this.keyInStorage = _query_def__WEBPACK_IMPORTED_MODULE_0__["keyInStorage"];
    return _this;
  } // getFilterDropdown({ field }) {
  //   return super.getRegions();
  // }


  DCDatasource.prototype.getRegions = function () {
    return Promise.resolve(_query_def__WEBPACK_IMPORTED_MODULE_0__["regionSupported"].map(function (_a) {
      var value = _a.value;
      return {
        value: value,
        text: Object(_locale__WEBPACK_IMPORTED_MODULE_6__["t"])(value)
      };
    }));
  };

  DCDatasource.prototype.getMetrics = function (region) {
    if (region === void 0) {
      region = 'ap-guangzhou';
    }

    return __awaiter(this, void 0, void 0, function () {
      var rawSet;
      return __generator(this, function (_a) {
        switch (_a.label) {
          case 0:
            return [4
            /*yield*/
            , _super.prototype.getMetrics.call(this, region)];

          case 1:
            rawSet = _a.sent();
            return [2
            /*return*/
            , lodash__WEBPACK_IMPORTED_MODULE_2___default.a.compact(rawSet.map(function (item) {
              return Object(_query_def__WEBPACK_IMPORTED_MODULE_0__["modifyDimensons"])(item);
            }))];
        }
      });
    });
  };

  DCDatasource.prototype.getQueueNameList = function (params) {
    return __awaiter(this, void 0, void 0, function () {
      var region, serviceInfo, res, rs;

      var _this = this;

      return __generator(this, function (_a) {
        switch (_a.label) {
          case 0:
            region = params.region;
            serviceInfo = Object(_common_constants__WEBPACK_IMPORTED_MODULE_3__["GetServiceAPIInfo"])(region, this.service);
            return [4
            /*yield*/
            , Object(_common_utils__WEBPACK_IMPORTED_MODULE_4__["fetchAllFactory"])(function (data) {
              return _this.doRequest({
                url: _this.url + serviceInfo.path,
                data: data
              }, serviceInfo.service, {
                region: region,
                action: 'DescribeGameServerSessionQueues'
              });
            }, {}, 'GameServerSessionQueues')];

          case 1:
            res = _a.sent();
            rs = res[0];
            return [2
            /*return*/
            , rs];
        }
      });
    });
  };

  DCDatasource.prototype.getFleetList = function (params) {
    return __awaiter(this, void 0, void 0, function () {
      var region, serviceInfo, res, rs;

      var _this = this;

      return __generator(this, function (_a) {
        switch (_a.label) {
          case 0:
            region = params.region;
            serviceInfo = Object(_common_constants__WEBPACK_IMPORTED_MODULE_3__["GetServiceAPIInfo"])(region, this.service);
            return [4
            /*yield*/
            , Object(_common_utils__WEBPACK_IMPORTED_MODULE_4__["fetchAllFactory"])(function (data) {
              return _this.doRequest({
                url: _this.url + serviceInfo.path,
                data: data
              }, serviceInfo.service, {
                region: region,
                action: 'ListFleets'
              });
            }, {}, 'FleetIds')];

          case 1:
            res = _a.sent();
            rs = res[0];
            return [2
            /*return*/
            , rs.map(function (r) {
              var _a;

              return _a = {}, _a[_this.templateQueryIdMap.FleetId] = r, _a;
            })];
        }
      });
    });
  };

  DCDatasource.prototype.fetchMetricData = function (action, region, instance) {
    return __awaiter(this, void 0, void 0, function () {
      var rs, result, rs, result;

      var _this = this;

      return __generator(this, function (_a) {
        switch (_a.label) {
          case 0:
            if (!(action === 'DescribeGameServerSessionQueues')) return [3
            /*break*/
            , 3];
            return [4
            /*yield*/
            , this.getQueueNameList({
              region: region,
              instanceId: instance[this.templateQueryIdMap.instance]
            })];

          case 1:
            rs = _a.sent();
            result = rs.map(function (o) {
              o._InstanceAliasValue = o[_this.templateQueryIdMap.Name];
              return {
                text: o[_this.templateQueryIdMap.Name],
                value: o[_this.templateQueryIdMap.Name]
              };
            });
            return [4
            /*yield*/
            , _common_datasourceStorage__WEBPACK_IMPORTED_MODULE_5__["default"].setExtraStorage(this.service, this.keyInStorage.queue, rs)];

          case 2:
            _a.sent();

            return [2
            /*return*/
            , result];

          case 3:
            if (!(action === 'ListFleets')) return [3
            /*break*/
            , 6];
            return [4
            /*yield*/
            , this.getFleetList({
              region: region,
              instanceId: instance[this.templateQueryIdMap.instance]
            })];

          case 4:
            rs = _a.sent();
            result = rs.map(function (o) {
              o._InstanceAliasValue = o[_this.templateQueryIdMap.FleetId];
              return {
                text: o[_this.templateQueryIdMap.FleetId],
                value: o[_this.templateQueryIdMap.FleetId]
              };
            });
            return [4
            /*yield*/
            , _common_datasourceStorage__WEBPACK_IMPORTED_MODULE_5__["default"].setExtraStorage(this.service, this.keyInStorage.fleet, rs)];

          case 5:
            _a.sent();

            return [2
            /*return*/
            , result];

          case 6:
            return [2
            /*return*/
            , []];
        }
      });
    });
  };

  return DCDatasource;
}(_base_datasource__WEBPACK_IMPORTED_MODULE_1__["BaseDatasource"]);

/* harmony default export */ __webpack_exports__["default"] = (DCDatasource);

/***/ }),

/***/ "./datasource/tc_monitor/gse/query.ts":
/*!********************************************!*\
  !*** ./datasource/tc_monitor/gse/query.ts ***!
  \********************************************/
/*! exports provided: QueryCtrl, sQuery */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "QueryCtrl", function() { return QueryCtrl; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "sQuery", function() { return sQuery; });
/* harmony import */ var grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! grafana/app/core/core_module */ "grafana/app/core/core_module");
/* harmony import */ var grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _query_def__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./query_def */ "./datasource/tc_monitor/gse/query_def.ts");
/* harmony import */ var _common_constants__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../common/constants */ "./datasource/common/constants.ts");
var __awaiter = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {
  function adopt(value) {
    return value instanceof P ? value : new P(function (resolve) {
      resolve(value);
    });
  }

  return new (P || (P = Promise))(function (resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }

    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }

    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }

    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};

var __generator = undefined && undefined.__generator || function (thisArg, body) {
  var _ = {
    label: 0,
    sent: function sent() {
      if (t[0] & 1) throw t[1];
      return t[1];
    },
    trys: [],
    ops: []
  },
      f,
      y,
      t,
      g;
  return g = {
    next: verb(0),
    "throw": verb(1),
    "return": verb(2)
  }, typeof Symbol === "function" && (g[Symbol.iterator] = function () {
    return this;
  }), g;

  function verb(n) {
    return function (v) {
      return step([n, v]);
    };
  }

  function step(op) {
    if (f) throw new TypeError("Generator is already executing.");

    while (_) {
      try {
        if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
        if (y = 0, t) op = [op[0] & 2, t.value];

        switch (op[0]) {
          case 0:
          case 1:
            t = op;
            break;

          case 4:
            _.label++;
            return {
              value: op[1],
              done: false
            };

          case 5:
            _.label++;
            y = op[1];
            op = [0];
            continue;

          case 7:
            op = _.ops.pop();

            _.trys.pop();

            continue;

          default:
            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
              _ = 0;
              continue;
            }

            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
              _.label = op[1];
              break;
            }

            if (op[0] === 6 && _.label < t[1]) {
              _.label = t[1];
              t = op;
              break;
            }

            if (t && _.label < t[2]) {
              _.label = t[2];

              _.ops.push(op);

              break;
            }

            if (t[2]) _.ops.pop();

            _.trys.pop();

            continue;
        }

        op = body.call(thisArg, _);
      } catch (e) {
        op = [6, e];
        y = 0;
      } finally {
        f = t = 0;
      }
    }

    if (op[0] & 5) throw op[1];
    return {
      value: op[0] ? op[1] : void 0,
      done: true
    };
  }
};




var ExtraFields = [{
  label: 'fleetId',
  field: 'FleetId'
}, {
  label: 'queueName',
  field: 'Name'
}];
var actionMaps = {
  FleetId: 'getFleetList',
  Name: 'getQueueNameList'
};

var QueryCtrl =
/** @class */
function () {
  QueryCtrl.$inject = ["$scope", "$rootScope"];

  /** @ngInject */
  function QueryCtrl($scope, $rootScope) {
    var _this = this;

    $scope.init = function () {
      $scope.GSEFilterFieldsDescriptor = _query_def__WEBPACK_IMPORTED_MODULE_1__["GSEFilterFieldsDescriptor"];
      $scope.namespace = _query_def__WEBPACK_IMPORTED_MODULE_1__["namespace"];
    };

    $scope.getExtraFields = function () {
      return ExtraFields.filter(function (item) {
        var _a;

        return item.field in ((_a = $scope.dims) !== null && _a !== void 0 ? _a : {});
      });
    };

    $scope.getInstanceId = function () {
      var instance = $scope.target.instance;
      var service = Object(_common_constants__WEBPACK_IMPORTED_MODULE_2__["GetServiceFromNamespace"])($scope.namespace); // console.log({namespace, service});

      instance = $scope.datasource.getServiceFn(service, 'getVariable')(instance);

      if (!instance) {
        return '';
      }

      try {
        instance = JSON.parse(instance)[_query_def__WEBPACK_IMPORTED_MODULE_1__["templateQueryIdMap"].instance];
      } catch (error) {// console.log();
      }

      return instance;
    };

    $scope.getExtraDropdown = function (target, field) {
      return __awaiter(_this, void 0, void 0, function () {
        var service, instanceId, region, rs, result;
        return __generator(this, function (_a) {
          switch (_a.label) {
            case 0:
              service = Object(_common_constants__WEBPACK_IMPORTED_MODULE_2__["GetServiceFromNamespace"])($scope.namespace);
              instanceId = $scope.getInstanceId();
              region = $scope.datasource.getServiceFn(service, 'getVariable')(target.region);
              return [4
              /*yield*/
              , $scope.datasource.getServiceFn(service, actionMaps[field])({
                region: region,
                instanceId: instanceId
              })];

            case 1:
              rs = _a.sent();
              result = rs.map(function (o) {
                o._InstanceAliasValue = o[_query_def__WEBPACK_IMPORTED_MODULE_1__["templateQueryIdMap"][field]];
                return {
                  text: o[_query_def__WEBPACK_IMPORTED_MODULE_1__["templateQueryIdMap"][field]],
                  value: JSON.stringify(o)
                };
              });
              return [2
              /*return*/
              , result];
          }
        });
      });
    };

    $scope.init();
  }

  return QueryCtrl;
}();


var template = "\n<div>\n<div class=\"tc-sub-params\" ng-if=\"showDetail\">\n  <label class=\"gf-form-label tc-info-label\">\n    Functions are queried by following params.\n    <a target=\"_blank\" style=\"text-decoration:underline;color:#006eff;font-size:medium\" href=\"https://cloud.tencent.com/document/product/248/45073\">Click here to get API doc.</a>\n  </label>\n  <div class=\"gf-form-inline\" ng-repeat=\"field in GSEFilterFieldsDescriptor\">\n    <div class=\"gf-form\">\n      <label class=\"gf-form-label width-14\">\n        {{ field.key }}\n        <info-popover mode=\"right-normal\">\n          {{ field.cnDescriptor }}\n          <a target=\"_blank\" href=\"{{field.link}}\" ng-if=\"field.link\">Click here for more information.</a>\n        </info-popover>\n      </label>\n      <input\n        ng-if=\"field.type === 'inputNumber'\"\n        style=\"margin-right:2px\"\n        type=\"number\"\n        ng-model=\"target.queries[field.key]\"\n        ng-change=\"onChange()\"\n        class=\"gf-form-input width-10\"\n        ng-min=\"field.min\"\n        ng-max=\"field.max\"\n      />\n      <input\n        ng-if=\"field.type === 'input'\"\n        style=\"margin-right:2px\"\n        type=\"text\"\n        ng-model=\"target.queries[field.key]\"\n        ng-change=\"onChange()\"\n        class=\"gf-form-input width-10\"\n      />    \n      <multi-condition\n        ng-if=\"field.type === 'inputNumberMulti'\"\n        type=\"'inputNumber'\"\n        max-cond=\"5\"\n        value=\"target.queries.Filters[field.key]\"\n        maxNum=\"field.max\"\n        minNum=\"field.min\"\n        on-change=\"onChange()\"\n      ></multi-condition>\n      <multi-condition\n        ng-if=\"field.type === 'inputMulti'\"\n        type=\"'input'\"\n        value=\"target.queries[field.key]\"\n        on-change=\"onChange()\"\n      ></multi-condition>\n      <custom-select-dropdown\n        ng-if=\"field.type === 'select'\"\n        value=\"target.queries[field.key]\"\n        options=\"field.list\"\n        multiple=\"field.multiple || false\"\n        on-change=\"onChange()\"\n      ></custom-select-dropdown>\n    </div>\n  </div>\n</div>\n\n<!-- \u8D77\u59CB\u533A\u57DF \u76EE\u7684\u533A\u57DF\u7B49 -->\n<div>\n  <div class=\"gf-form-inline\" ng-repeat=\"extra in getExtraFields()\">\n    <div class=\"gf-form\">\n      <label class=\"gf-form-label query-keyword width-9\">{{extra.label}}</label>\n      <div class=\"gf-form-select-wrapper gf-form-select-wrapper--caret-indent\">\n        <gf-form-dropdown model=\"target[extra.field]\" allow-custom=\"true\" lookup-text=\"true\" get-options=\"getExtraDropdown(target, extra.field)\"\n          on-change=\"onRefresh()\" css-class=\"min-width-10\">\n        </gf-form-dropdown>\n      </div>\n    </div>\n  </div>\n</div>\n</div>\n";
function sQuery() {
  return {
    template: template,
    controller: QueryCtrl,
    restrict: 'E',
    scope: {
      target: '=',
      showDetail: '=',
      region: '=',
      datasource: '=',
      getDropdownOptions: '&',
      onChange: '&',
      onRefresh: '&',
      dims: '='
    }
  };
}
grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0___default.a.directive(_query_def__WEBPACK_IMPORTED_MODULE_1__["queryEditorName"], sQuery);

/***/ }),

/***/ "./datasource/tc_monitor/gse/query_def.ts":
/*!************************************************!*\
  !*** ./datasource/tc_monitor/gse/query_def.ts ***!
  \************************************************/
/*! exports provided: default, GSEFilterFieldsDescriptor, templateQueryIdMap, GSEInstanceAliasList, GSEInvalidDemensions, namespace, queryEditorName, queryEditorConfig, regionSupported, modifyDimensons, queryMonitorExtraConfg, fleetId, keyInStorage, GSEGetInstanceQueryParams */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GSEFilterFieldsDescriptor", function() { return GSEFilterFieldsDescriptor; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "templateQueryIdMap", function() { return templateQueryIdMap; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GSEInstanceAliasList", function() { return GSEInstanceAliasList; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GSEInvalidDemensions", function() { return GSEInvalidDemensions; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "namespace", function() { return namespace; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "queryEditorName", function() { return queryEditorName; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "queryEditorConfig", function() { return queryEditorConfig; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "regionSupported", function() { return regionSupported; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "modifyDimensons", function() { return modifyDimensons; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "queryMonitorExtraConfg", function() { return queryMonitorExtraConfg; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "fleetId", function() { return fleetId; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "keyInStorage", function() { return keyInStorage; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GSEGetInstanceQueryParams", function() { return GetInstanceQueryParams; });
/* harmony import */ var _common_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../common/utils */ "./datasource/common/utils.ts");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lodash */ "lodash");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_1__);


var namespace = 'QCE/GSE';
var fleetId = 'FleetId'; // 为和cvm其他产品保持一致，即将string[]改为Array<{fleetid: xxx}>,在此声明key
// 组件名称。这里名字要和index.ts中的SERVICES对应，后面会根据SERVICES中service字段拼接这个query组件名称

var queryEditorName = 'gseQuery';
var GSEInvalidDemensions = {
  instanceid: 'InstanceId',
  fleetid: 'FleetId',
  queuename: 'Name'
}; // 需和文件名对应

var GSEInstanceAliasList = ['InstanceId', 'PrivateIpAddress', 'IpAddress'];
var templateQueryIdMap = {
  instance: 'InstanceId',
  Name: 'Name',
  FleetId: fleetId
}; // 需要缓存到storage的内容的key列表

var keyInStorage = {
  fleet: 'fleet',
  queue: 'queueName' // 会话队列

};
/*
如果有InstanceId额外的维度，原则上都需要传入此map结构配置
key的含义：
  经过InvalidDemensions处理后的string。topicId =》TopicId。
  否则认为指标中维度正确，和指标中维度字段保持一致，即topicId
value的含义：
  1 dim_KeyInStorage 指标中维度dimension对应的storage中的key，获取缓存列表，sourceMapList、
  2 dim_KeyInTarget  通过getVariable方法获取变量中选中项。比如ListnerId为Lis-xxxx；即：STATE中的key。
                    默认取通过InvalidDemsion处理后的key
  3 dim_KeyInMap     保存在模板变量value比如（监听器ID）源自sourceMapList（接口返回内容）的哪个key（ListenerId）。
                    即：templateQueryIdMap中内容。
                    联合上面2的内容筛选出原始sourceMap
*/

var queryMonitorExtraConfg = {
  FleetId: {
    dim_KeyInStorage: keyInStorage.fleet,
    dim_KeyInTarget: 'FleetId',
    dim_KeyInMap: templateQueryIdMap.FleetId
  },
  Name: {
    dim_KeyInStorage: keyInStorage.queue,
    dim_KeyInTarget: 'Name',
    dim_KeyInMap: templateQueryIdMap.Name
  }
}; // select类型需要注意是{},multi后缀是[],dropdown是''

var GSEFilterFields = {
  Limit: 20,
  Offset: 0,
  InstanceId: '',
  FleetId: ''
};
var GSEFilterFieldsDescriptor = [{
  key: 'Offset',
  enDescriptor: 'Offset',
  cnDescriptor: '偏移量, 例如Offset=20&Limit=20 返回第 20 到 40 项',
  link: '',
  type: 'inputNumber',
  min: 0
}, {
  key: 'Limit',
  enDescriptor: 'Limit',
  cnDescriptor: '单次请求返回的数量，默认为20，最小值为1，最大值为100',
  link: '',
  type: 'inputNumber',
  min: 1,
  max: 100
}, {
  key: 'InstanceId',
  enDescriptor: 'resourceName',
  cnDescriptor: '资源名称',
  link: '',
  type: 'input'
}, {
  key: 'FleetId',
  enDescriptor: 'tagKey',
  cnDescriptor: '标签键',
  link: '',
  type: 'input'
}]; // 各产品实例列表detail配置

var queryEditorConfig = {
  instanceDocUrl: 'https://cloud.tencent.com/document/api/1165/42604',
  namespace: namespace,
  fieldDescriptor: GSEFilterFieldsDescriptor
};
var GSE_STATE = {
  region: '',
  metricName: '',
  metricUnit: '',
  period: undefined,
  dimensionObject: null,
  instance: '',
  instanceAlias: 'InstanceId',
  FleetId: '',
  Name: '',
  queries: GSEFilterFields
};

function GetInstanceQueryParams(queries) {
  if (queries === void 0) {
    queries = {};
  }

  return Object(_common_utils__WEBPACK_IMPORTED_MODULE_0__["instanceQueryParamsBaseParse"])(queries, true);
} // regions for dropdown


var regionSupported = [{
  value: 'ap-bangkok'
}, {
  value: 'ap-beijing'
}, {
  value: 'ap-chengdu'
}, // { value: 'ap-chongqing' },
{
  value: 'ap-guangzhou'
}, {
  value: 'ap-hongkong'
}, {
  value: 'ap-mumbai'
}, {
  value: 'ap-seoul'
}, {
  value: 'ap-nanjing'
}, {
  value: 'ap-shanghai'
}, // { value: 'ap-shanghai-fsi' },
// { value: 'ap-shenzhen-fsi' },
{
  value: 'ap-singapore'
}, {
  value: 'ap-tokyo'
}, {
  value: 'eu-frankfurt'
}, {
  value: 'na-ashburn'
}, {
  value: 'na-siliconvalley'
} // { value: 'na-toronto' },
];

function modifyDimensons(metricItem) {
  var metricTmp = lodash__WEBPACK_IMPORTED_MODULE_1___default.a.cloneDeep(metricItem);

  metricTmp.Dimensions.forEach(function (item) {
    item.Dimensions = item.Dimensions.map(function (v) {
      return GSEInvalidDemensions[v] || v;
    });
  });
  return metricTmp;
}

/* harmony default export */ __webpack_exports__["default"] = (GSE_STATE);


/***/ }),

/***/ "./datasource/tc_monitor/index.ts":
/*!****************************************!*\
  !*** ./datasource/tc_monitor/index.ts ***!
  \****************************************/
/*! exports provided: InitServiceState, SERVICES, Datasources, InstanceAliasList, GetInstanceQueryParams */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "InitServiceState", function() { return InitStates; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SERVICES", function() { return SERVICES; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Datasources", function() { return Datasources; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "InstanceAliasList", function() { return InstanceAliasList; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GetInstanceQueryParams", function() { return GetInstanceQueryParams; });
/* harmony import */ var _locale__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../locale */ "./locale/index.ts");
var __spreadArray = undefined && undefined.__spreadArray || function (to, from, pack) {
  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {
    if (ar || !(i in from)) {
      if (!ar) ar = Array.prototype.slice.call(from, 0, i);
      ar[i] = from[i];
    }
  }
  return to.concat(ar || Array.prototype.slice.call(from));
};


var SERVICES = [{
  service: 'cvm',

  get label() {
    return Object(_locale__WEBPACK_IMPORTED_MODULE_0__["t"])('CVM');
  },

  namespace: 'QCE/CVM',
  href: 'https://cloud.tencent.com/document/api/213/15688'
}, {
  service: 'cdb',

  get label() {
    return Object(_locale__WEBPACK_IMPORTED_MODULE_0__["t"])('CDB');
  },

  namespace: 'QCE/CDB',
  href: 'https://cloud.tencent.com/document/api/236/15829',

  get groupName() {
    return Object(_locale__WEBPACK_IMPORTED_MODULE_0__["t"])('cloud_database');
  }

}, {
  service: 'mongoDB',

  get label() {
    return Object(_locale__WEBPACK_IMPORTED_MODULE_0__["t"])('CMONGO');
  },

  namespace: 'QCE/CMONGO',
  href: 'https://cloud.tencent.com/document/api/240/38568',

  get groupName() {
    return Object(_locale__WEBPACK_IMPORTED_MODULE_0__["t"])('cloud_database');
  }

}, {
  service: 'postgres',

  get label() {
    return Object(_locale__WEBPACK_IMPORTED_MODULE_0__["t"])('POSTGRES');
  },

  namespace: 'QCE/POSTGRES',
  href: 'https://cloud.tencent.com/document/product/248/45105',

  get groupName() {
    return Object(_locale__WEBPACK_IMPORTED_MODULE_0__["t"])('cloud_database');
  }

}, {
  service: 'redis',

  get label() {
    return Object(_locale__WEBPACK_IMPORTED_MODULE_0__["t"])('REDIS');
  },

  namespace: 'QCE/REDIS',
  href: 'https://cloud.tencent.com/document/product/248/45110',

  get groupName() {
    return Object(_locale__WEBPACK_IMPORTED_MODULE_0__["t"])('cloud_database');
  }

}, {
  service: 'redisMem',

  get label() {
    return Object(_locale__WEBPACK_IMPORTED_MODULE_0__["t"])('REDIS_MEM');
  },

  namespace: 'QCE/REDIS_MEM',
  href: 'https://cloud.tencent.com/document/product/248/49729',

  get groupName() {
    return Object(_locale__WEBPACK_IMPORTED_MODULE_0__["t"])('cloud_database');
  }

}, {
  service: 'sqlserver',

  get label() {
    return Object(_locale__WEBPACK_IMPORTED_MODULE_0__["t"])('SQLSERVER');
  },

  namespace: 'QCE/SQLSERVER',
  href: 'https://cloud.tencent.com/document/product/248/45146',

  get groupName() {
    return Object(_locale__WEBPACK_IMPORTED_MODULE_0__["t"])('cloud_database');
  }

}, {
  service: 'cynosdbMysql',

  get label() {
    return Object(_locale__WEBPACK_IMPORTED_MODULE_0__["t"])('CYNOSDB_MYSQL');
  },

  namespace: 'QCE/CYNOSDB_MYSQL',
  href: 'https://cloud.tencent.com/document/product/248/45106',

  get groupName() {
    return Object(_locale__WEBPACK_IMPORTED_MODULE_0__["t"])('cloud_database');
  }

}, {
  service: 'tcaplus',

  get label() {
    return Object(_locale__WEBPACK_IMPORTED_MODULE_0__["t"])('TCAPLUS');
  },

  namespace: 'QCE/TCAPLUS',
  href: 'https://cloud.tencent.com/document/product/248/45107',

  get groupName() {
    return Object(_locale__WEBPACK_IMPORTED_MODULE_0__["t"])('cloud_database');
  }

}, {
  service: 'dcdb',

  get label() {
    return Object(_locale__WEBPACK_IMPORTED_MODULE_0__["t"])('TDMYSQL');
  },

  namespace: 'QCE/TDMYSQL',
  href: 'https://cloud.tencent.com/document/product/248/45108'
}, {
  service: 'pcx',

  get label() {
    return Object(_locale__WEBPACK_IMPORTED_MODULE_0__["t"])('PCX');
  },

  namespace: 'QCE/PCX',
  href: 'https://cloud.tencent.com/document/product/215/5181',

  get groupName() {
    return Object(_locale__WEBPACK_IMPORTED_MODULE_0__["t"])('virtual_private_cloud');
  }

}, {
  service: 'bwp',

  get label() {
    return Object(_locale__WEBPACK_IMPORTED_MODULE_0__["t"])('BWP');
  },

  namespace: 'QCE/BWP',
  href: 'https://cloud.tencent.com/document/api/215/19209',

  get groupName() {
    return Object(_locale__WEBPACK_IMPORTED_MODULE_0__["t"])('virtual_private_cloud');
  }

}, {
  service: 'natGateway',

  get label() {
    return Object(_locale__WEBPACK_IMPORTED_MODULE_0__["t"])('NAT_GATEWAY');
  },

  namespace: 'QCE/NAT_GATEWAY',
  href: 'https://cloud.tencent.com/document/api/215/36034',

  get groupName() {
    return Object(_locale__WEBPACK_IMPORTED_MODULE_0__["t"])('virtual_private_cloud');
  }

}, {
  service: 'vpngw',

  get label() {
    return Object(_locale__WEBPACK_IMPORTED_MODULE_0__["t"])('VPNGW');
  },

  namespace: 'QCE/VPNGW',
  href: 'https://cloud.tencent.com/document/product/248/45070',

  get groupName() {
    return Object(_locale__WEBPACK_IMPORTED_MODULE_0__["t"])('virtual_private_cloud');
  }

}, {
  service: 'vpnx',

  get label() {
    return Object(_locale__WEBPACK_IMPORTED_MODULE_0__["t"])('VPNX');
  },

  namespace: 'QCE/VPNX',
  href: 'https://cloud.tencent.com/document/product/248/45071',

  get groupName() {
    return Object(_locale__WEBPACK_IMPORTED_MODULE_0__["t"])('virtual_private_cloud');
  }

}, {
  service: 'dcg',

  get label() {
    return Object(_locale__WEBPACK_IMPORTED_MODULE_0__["t"])('DCG');
  },

  namespace: 'QCE/DCG',
  href: 'https://cloud.tencent.com/document/product/248/45072',

  get groupName() {
    return Object(_locale__WEBPACK_IMPORTED_MODULE_0__["t"])('virtual_private_cloud');
  }

}, {
  service: 'ceipSummary',

  get label() {
    return Object(_locale__WEBPACK_IMPORTED_MODULE_0__["t"])('CEIP_SUMMARY');
  },

  namespace: 'QCE/CEIP_SUMMARY',
  href: 'https://cloud.tencent.com/document/product/248/50381',

  get groupName() {
    return Object(_locale__WEBPACK_IMPORTED_MODULE_0__["t"])('virtual_private_cloud');
  }

}, {
  service: 'vpcNetDetect',

  get label() {
    return Object(_locale__WEBPACK_IMPORTED_MODULE_0__["t"])('VPC_NET_DETECT');
  },

  namespace: 'QCE/VPC_NET_DETECT',
  href: 'https://cloud.tencent.com/document/product/248/50384',

  get groupName() {
    return Object(_locale__WEBPACK_IMPORTED_MODULE_0__["t"])('virtual_private_cloud');
  }

}, {
  service: 'vbc',

  get label() {
    return Object(_locale__WEBPACK_IMPORTED_MODULE_0__["t"])('VBC');
  },

  namespace: 'QCE/VBC',
  href: 'https://cloud.tencent.com/document/product/248/45073',

  get groupName() {
    return Object(_locale__WEBPACK_IMPORTED_MODULE_0__["t"])('virtual_private_cloud');
  }

}, {
  service: 'lb',

  get label() {
    return Object(_locale__WEBPACK_IMPORTED_MODULE_0__["t"])('LB');
  },

  namespace: 'QCE/LB',
  href: 'https://cloud.tencent.com/document/product/248/45099',

  get groupName() {
    return Object(_locale__WEBPACK_IMPORTED_MODULE_0__["t"])('virtual_private_cloud');
  }

}, {
  service: 'lbPublic',

  get label() {
    return Object(_locale__WEBPACK_IMPORTED_MODULE_0__["t"])('LB_PUBLIC');
  },

  namespace: 'QCE/LB_PUBLIC',
  href: 'https://cloud.tencent.com/document/product/248/51898',

  get groupName() {
    return "".concat(Object(_locale__WEBPACK_IMPORTED_MODULE_0__["t"])('cloud_load_balancer'), "(").concat(Object(_locale__WEBPACK_IMPORTED_MODULE_0__["t"])('multi_scene'), ")");
  }

}, {
  service: 'lbPrivate',

  get label() {
    return Object(_locale__WEBPACK_IMPORTED_MODULE_0__["t"])('LB_PRIVATE');
  },

  namespace: 'QCE/LB_PRIVATE',
  href: 'https://cloud.tencent.com/document/product/248/51899',

  get groupName() {
    return "".concat(Object(_locale__WEBPACK_IMPORTED_MODULE_0__["t"])('cloud_load_balancer'), "(").concat(Object(_locale__WEBPACK_IMPORTED_MODULE_0__["t"])('multi_scene'), ")");
  }

}, {
  service: 'loadBalance',

  get label() {
    return Object(_locale__WEBPACK_IMPORTED_MODULE_0__["t"])('LOADBALANCE');
  },

  namespace: 'QCE/LOADBALANCE',
  href: 'https://cloud.tencent.com/document/product/248/51901',

  get groupName() {
    return "".concat(Object(_locale__WEBPACK_IMPORTED_MODULE_0__["t"])('cloud_load_balancer'), "(").concat(Object(_locale__WEBPACK_IMPORTED_MODULE_0__["t"])('multi_scene'), ")");
  }

}, {
  service: 'vClb',

  get label() {
    return "".concat(Object(_locale__WEBPACK_IMPORTED_MODULE_0__["t"])('cloud_load_balancer'), "(").concat(Object(_locale__WEBPACK_IMPORTED_MODULE_0__["t"])('lite'), ")");
  },

  namespace: 'QCE/V_CLB',
  href: 'https://cloud.tencent.com/document/product/248/51901',

  get groupName() {
    return "".concat(Object(_locale__WEBPACK_IMPORTED_MODULE_0__["t"])('cloud_load_balancer'), "(").concat(Object(_locale__WEBPACK_IMPORTED_MODULE_0__["t"])('lite'), ")");
  }

}, {
  service: 'cdn',

  get label() {
    return Object(_locale__WEBPACK_IMPORTED_MODULE_0__["t"])('CDN');
  },

  namespace: 'QCE/CDN',
  hideRegion: true,
  href: 'https://cloud.tencent.com/document/product/248/50386',

  get groupName() {
    return Object(_locale__WEBPACK_IMPORTED_MODULE_0__["t"])('content_delivery_network');
  }

}, {
  service: 'cdnProvince',

  get label() {
    return Object(_locale__WEBPACK_IMPORTED_MODULE_0__["t"])('CDN_LOG_DATA');
  },

  namespace: 'QCE/CDN_LOG_DATA',
  hideRegion: true,
  href: 'https://cloud.tencent.com/document/product/248/50388',

  get groupName() {
    return Object(_locale__WEBPACK_IMPORTED_MODULE_0__["t"])('content_delivery_network');
  }

}, {
  service: 'ovCdn',

  get label() {
    return Object(_locale__WEBPACK_IMPORTED_MODULE_0__["t"])('OV_CDN');
  },

  namespace: 'QCE/OV_CDN',
  hideRegion: true,
  href: 'https://cloud.tencent.com/document/product/248/50387',

  get groupName() {
    return Object(_locale__WEBPACK_IMPORTED_MODULE_0__["t"])('content_delivery_network');
  }

}, {
  service: 'scf',

  get label() {
    return Object(_locale__WEBPACK_IMPORTED_MODULE_0__["t"])('SCF_V2');
  },

  namespace: 'QCE/SCF_V2',
  href: 'https://cloud.tencent.com/document/product/248/45130'
}, {
  service: 'cfs',

  get label() {
    return Object(_locale__WEBPACK_IMPORTED_MODULE_0__["t"])('CFS');
  },

  namespace: 'QCE/CFS',
  href: 'https://cloud.tencent.com/document/product/248/45143'
}, {
  service: 'cos',

  get label() {
    return Object(_locale__WEBPACK_IMPORTED_MODULE_0__["t"])('COS');
  },

  namespace: 'QCE/COS',
  href: 'https://cloud.tencent.com/document/product/248/45140'
}, {
  service: 'ckafka',

  get label() {
    return Object(_locale__WEBPACK_IMPORTED_MODULE_0__["t"])('CKAFKA');
  },

  namespace: 'QCE/CKAFKA',
  href: 'https://cloud.tencent.com/document/product/248/45121',

  get groupName() {
    return Object(_locale__WEBPACK_IMPORTED_MODULE_0__["t"])('message_queue');
  }

}, {
  service: 'cmq',

  get label() {
    return Object(_locale__WEBPACK_IMPORTED_MODULE_0__["t"])('CMQ');
  },

  namespace: 'QCE/CMQ',
  href: 'https://cloud.tencent.com/document/product/248/45114',

  get groupName() {
    return Object(_locale__WEBPACK_IMPORTED_MODULE_0__["t"])('message_queue');
  }

}, {
  service: 'cmqTopic',

  get label() {
    return Object(_locale__WEBPACK_IMPORTED_MODULE_0__["t"])('CMQTOPIC');
  },

  namespace: 'QCE/CMQTOPIC',
  href: 'https://cloud.tencent.com/document/product/248/45113',

  get groupName() {
    return Object(_locale__WEBPACK_IMPORTED_MODULE_0__["t"])('message_queue');
  }

}, {
  service: 'tdmq',

  get label() {
    return Object(_locale__WEBPACK_IMPORTED_MODULE_0__["t"])('TDMQ');
  },

  namespace: 'QCE/TDMQ',
  href: 'https://cloud.tencent.com/document/product/248/51450',

  get groupName() {
    return Object(_locale__WEBPACK_IMPORTED_MODULE_0__["t"])('message_queue');
  }

}, {
  service: 'tdmqRocketmq',

  get label() {
    return Object(_locale__WEBPACK_IMPORTED_MODULE_0__["t"])('TDMQ_ROCKETMQ');
  },

  namespace: 'QCE/ROCKETMQ',
  href: 'https://cloud.tencent.com/document/product/248/51450',

  get groupName() {
    return Object(_locale__WEBPACK_IMPORTED_MODULE_0__["t"])('message_queue');
  }

}, {
  service: 'tdmqRabbitmq',

  get label() {
    return Object(_locale__WEBPACK_IMPORTED_MODULE_0__["t"])('TDMQ_RABBITMQ');
  },

  namespace: 'QCE/RABBITMQ',
  href: 'https://cloud.tencent.com/document/product/248/51450',

  get groupName() {
    return Object(_locale__WEBPACK_IMPORTED_MODULE_0__["t"])('message_queue');
  }

}, {
  service: 'dcx',

  get label() {
    return Object(_locale__WEBPACK_IMPORTED_MODULE_0__["t"])('DCX');
  },

  namespace: 'QCE/DCX',
  href: 'https://cloud.tencent.com/document/product/248/45101',

  get groupName() {
    return Object(_locale__WEBPACK_IMPORTED_MODULE_0__["t"])('direct_connect');
  }

}, {
  service: 'dc',

  get label() {
    return Object(_locale__WEBPACK_IMPORTED_MODULE_0__["t"])('DC');
  },

  namespace: 'QCE/DC',
  href: 'https://cloud.tencent.com/document/product/248/45102',

  get groupName() {
    return Object(_locale__WEBPACK_IMPORTED_MODULE_0__["t"])('direct_connect');
  }

}, {
  service: 'cpm',

  get label() {
    return Object(_locale__WEBPACK_IMPORTED_MODULE_0__["t"])('CPM');
  },

  namespace: 'QCE/CPM',
  href: 'https://cloud.tencent.com/document/product/248/45881',

  get groupName() {
    return Object(_locale__WEBPACK_IMPORTED_MODULE_0__["t"])('cloud_physical_machine');
  }

}, {
  service: 'bmPcx',

  get label() {
    return Object(_locale__WEBPACK_IMPORTED_MODULE_0__["t"])('BM_PCX');
  },

  namespace: 'QCE/BM_PCX',
  href: 'https://cloud.tencent.com/document/product/248/45884',

  get groupName() {
    return Object(_locale__WEBPACK_IMPORTED_MODULE_0__["t"])('cloud_physical_machine');
  }

}, {
  service: 'bmLb',

  get label() {
    return Object(_locale__WEBPACK_IMPORTED_MODULE_0__["t"])('BM_LB');
  },

  namespace: 'QCE/BM_LB',
  href: 'https://cloud.tencent.com/document/product/248/45886',

  get groupName() {
    return Object(_locale__WEBPACK_IMPORTED_MODULE_0__["t"])('cloud_physical_machine');
  }

}, {
  service: 'bmIntraLb',

  get label() {
    return Object(_locale__WEBPACK_IMPORTED_MODULE_0__["t"])('BM_INTRA_LB');
  },

  namespace: 'QCE/BM_INTRA_LB',
  href: 'https://cloud.tencent.com/document/product/248/45885',

  get groupName() {
    return Object(_locale__WEBPACK_IMPORTED_MODULE_0__["t"])('cloud_physical_machine');
  }

}, {
  service: 'ces',

  get label() {
    return Object(_locale__WEBPACK_IMPORTED_MODULE_0__["t"])('CES');
  },

  namespace: 'QCE/CES',
  href: 'https://cloud.tencent.com/document/product/248/45129'
}, {
  service: 'mrHDFS',

  get label() {
    return "".concat(Object(_locale__WEBPACK_IMPORTED_MODULE_0__["t"])('elastic_mapReduce'), "(HDFS)");
  },

  namespace: 'QCE/TXMR_HDFS',
  href: 'https://cloud.tencent.com/document/product/248/44797',

  get groupName() {
    return Object(_locale__WEBPACK_IMPORTED_MODULE_0__["t"])('elastic_mapReduce');
  }

}, {
  service: 'mrHBASE',

  get label() {
    return "".concat(Object(_locale__WEBPACK_IMPORTED_MODULE_0__["t"])('elastic_mapReduce'), "(HBASE)");
  },

  namespace: 'QCE/TXMR_HBASE',
  href: 'https://cloud.tencent.com/document/product/248/45567',

  get groupName() {
    return Object(_locale__WEBPACK_IMPORTED_MODULE_0__["t"])('elastic_mapReduce');
  }

}, {
  service: 'mrHIVE',

  get label() {
    return "".concat(Object(_locale__WEBPACK_IMPORTED_MODULE_0__["t"])('elastic_mapReduce'), "(HIVE)");
  },

  namespace: 'QCE/TXMR_HIVE',
  href: 'https://cloud.tencent.com/document/product/248/45569',

  get groupName() {
    return Object(_locale__WEBPACK_IMPORTED_MODULE_0__["t"])('elastic_mapReduce');
  }

}, {
  service: 'mrNODE',

  get label() {
    return "".concat(Object(_locale__WEBPACK_IMPORTED_MODULE_0__["t"])('elastic_mapReduce'), "(NODE)");
  },

  namespace: 'QCE/TXMR_NODE',
  href: 'https://cloud.tencent.com/document/product/248/45570',

  get groupName() {
    return Object(_locale__WEBPACK_IMPORTED_MODULE_0__["t"])('elastic_mapReduce');
  }

}, {
  service: 'mrPRESTO',

  get label() {
    return "".concat(Object(_locale__WEBPACK_IMPORTED_MODULE_0__["t"])('elastic_mapReduce'), "(PRESTO)");
  },

  namespace: 'QCE/TXMR_PRESTO',
  href: 'https://cloud.tencent.com/document/product/248/45571',

  get groupName() {
    return Object(_locale__WEBPACK_IMPORTED_MODULE_0__["t"])('elastic_mapReduce');
  }

}, {
  service: 'mrSPARK',

  get label() {
    return "".concat(Object(_locale__WEBPACK_IMPORTED_MODULE_0__["t"])('elastic_mapReduce'), "(SPARK)");
  },

  namespace: 'QCE/TXMR_SPARK',
  href: 'https://cloud.tencent.com/document/product/248/45572',

  get groupName() {
    return Object(_locale__WEBPACK_IMPORTED_MODULE_0__["t"])('elastic_mapReduce');
  }

}, {
  service: 'mrYARN',

  get label() {
    return "".concat(Object(_locale__WEBPACK_IMPORTED_MODULE_0__["t"])('elastic_mapReduce'), "(YARN)");
  },

  namespace: 'QCE/TXMR_YARN',
  href: 'https://cloud.tencent.com/document/product/248/45573',

  get groupName() {
    return Object(_locale__WEBPACK_IMPORTED_MODULE_0__["t"])('elastic_mapReduce');
  }

}, {
  service: 'mrZOOKEEPER',

  get label() {
    return "".concat(Object(_locale__WEBPACK_IMPORTED_MODULE_0__["t"])('elastic_mapReduce'), "(ZOOKEEPER)");
  },

  namespace: 'QCE/TXMR_ZOOKEEPER',
  href: 'https://cloud.tencent.com/document/product/248/45574',

  get groupName() {
    return Object(_locale__WEBPACK_IMPORTED_MODULE_0__["t"])('elastic_mapReduce');
  }

}, {
  service: 'cbs',

  get label() {
    return Object(_locale__WEBPACK_IMPORTED_MODULE_0__["t"])('BLOCK_STORAGE');
  },

  namespace: 'QCE/BLOCK_STORAGE',
  href: 'https://cloud.tencent.com/document/product/362/2345'
}, {
  service: 'apigateway',

  get label() {
    return Object(_locale__WEBPACK_IMPORTED_MODULE_0__["t"])('APIGATEWAY');
  },

  namespace: 'QCE/APIGATEWAY',
  href: 'https://cloud.tencent.com/document/product/248/45127'
}, {
  service: 'qaap',

  get label() {
    return Object(_locale__WEBPACK_IMPORTED_MODULE_0__["t"])('QAAP');
  },

  namespace: 'QCE/QAAP',
  href: 'https://cloud.tencent.com/document/product/608'
}, {
  service: 'ecm',

  get label() {
    return Object(_locale__WEBPACK_IMPORTED_MODULE_0__["t"])('ECM');
  },

  hideRegion: true,
  namespace: 'QCE/ECM',
  href: 'https://cloud.tencent.com/document/product/1108',

  get groupName() {
    return Object(_locale__WEBPACK_IMPORTED_MODULE_0__["t"])('edge_computing_machine');
  }

}, {
  service: 'ecmBlockStorage',

  get label() {
    return Object(_locale__WEBPACK_IMPORTED_MODULE_0__["t"])('ECM_BLOCK_STORAGE');
  },

  hideRegion: true,
  namespace: 'QCE/ECM_BLOCK_STORAGE',
  href: 'https://cloud.tencent.com/document/product/1108',

  get groupName() {
    return Object(_locale__WEBPACK_IMPORTED_MODULE_0__["t"])('edge_computing_machine');
  }

}, {
  service: 'ecmLb',

  get label() {
    return Object(_locale__WEBPACK_IMPORTED_MODULE_0__["t"])('ECM_LB');
  },

  hideRegion: true,
  namespace: 'QCE/ECM_LB',
  href: 'https://cloud.tencent.com/document/product/1108',

  get groupName() {
    return Object(_locale__WEBPACK_IMPORTED_MODULE_0__["t"])('edge_computing_machine');
  }

}, {
  service: 'gse',

  get label() {
    return Object(_locale__WEBPACK_IMPORTED_MODULE_0__["t"])('GSE');
  },

  namespace: 'QCE/GSE',
  href: 'https://cloud.tencent.com/document/product/1165'
}, {
  service: 'cls',

  get label() {
    return Object(_locale__WEBPACK_IMPORTED_MODULE_0__["t"])('CLS');
  },

  namespace: 'QCE/CLS',
  href: 'https://cloud.tencent.com/document/product/614'
}, {
  service: 'tke',

  get label() {
    return Object(_locale__WEBPACK_IMPORTED_MODULE_0__["t"])('TKE');
  },

  namespace: 'QCE/TKE2',
  href: 'https://cloud.tencent.com/document/product/457'
}, {
  service: 'ecdn',

  get label() {
    return Object(_locale__WEBPACK_IMPORTED_MODULE_0__["t"])('ECDN');
  },

  namespace: 'QCE/DSA',
  href: 'https://cloud.tencent.com/document/product/570'
}, // {
//   service: 'lighthouse',
//   label: '轻量应用服务器(LIGHTHOUSE)',
//   namespace: 'QCE/LIGHTHOUSE',
//   href: 'https://cloud.tencent.com/document/product/1207',
// },
// {
//   service: 'tsf',
//   label: ' 微服务平台(TSF)',
//   namespace: 'QCE/TSF',
//   href: 'https://cloud.tencent.com/document/product/649',
// },
{
  service: 'waf',

  get label() {
    return Object(_locale__WEBPACK_IMPORTED_MODULE_0__["t"])('WAF');
  },

  // hideRegion: true,
  namespace: 'QCE/WAF',
  href: 'https://cloud.tencent.com/document/product/627'
}];
var Datasources = {};
var InitStates = {};
var InstanceAliasList = {};
var GetInstanceQueryParams = {};
/**
 * 由于目录命名不规范，导致需要使用额外逻辑保证正确性。从目录到具体service的映射
 */

var hackModuleName = {
  // lb_loadBalance: 'loadBalance',
  postgresql: 'postgres',
  mongodb: 'mongoDB',
  clb: ['lbPrivate', 'lbPublic', 'loadBalance'],
  mr: ['mrHDFS', 'mrHBASE', 'mrHIVE', 'mrNODE', 'mrPRESTO', 'mrSPARK', 'mrYARN', 'mrZOOKEEPER']
};

var requireModule = __webpack_require__("./datasource/tc_monitor sync recursive ^\\.\\/[a-zA-Z]\\w+\\/(datasource)|(query(_def)?)\\.ts$");

requireModule.keys().forEach(function (filePath) {
  var _a;

  var _b = filePath.split('/'),
      moduleName = _b[1],
      fileName = _b[2]; // hack： 这里是由于产品目录命名不规范,所以才会多这么一段代码


  moduleName = (_a = hackModuleName[moduleName]) !== null && _a !== void 0 ? _a : moduleName; // 目录与模块的映射关系，不管是一对一还是一对多，均按数组进行统一处理

  [].concat(moduleName).forEach(function (module) {
    var _a, _b; // 这个service就是产品配置中的service，需要注意这里的service是根据目录名称算出来的，因此目录名称一定要和service对应


    var service = module.replace(/_([a-zA-Z])/g, function (_, b) {
      return b.toUpperCase();
    });
    var prefix = service.toUpperCase(); // 命名规则
    // datasource

    if (fileName === 'datasource.ts') {
      var Cls_1 = __webpack_require__("./datasource/tc_monitor sync recursive ^.*$")("".concat(filePath))["default"]; // 想办法为实例注入service，不能为prototype或则类本身注入，因为会造成互相污染，详尽mrDatasource


      Datasources["".concat(prefix, "Datasource")] =
      /** @class */
      function () {
        function class_1() {
          var params = [];

          for (var _i = 0; _i < arguments.length; _i++) {
            params[_i] = arguments[_i];
          }

          var target = new (Cls_1.bind.apply(Cls_1, __spreadArray(__spreadArray([void 0], params, false), [service], false)))();
          target.service = service; // eslint-disable-next-line no-constructor-return

          return target;
        }

        return class_1;
      }();
    } // query


    if (fileName === 'query.ts') {
      __webpack_require__("./datasource/tc_monitor sync recursive ^.*$")("".concat(filePath));
    } // query_def


    if (fileName === 'query_def.ts') {
      var alias = "".concat(prefix, "InstanceAliasList");
      var getParams = "".concat(prefix, "GetInstanceQueryParams");

      var target = __webpack_require__("./datasource/tc_monitor sync recursive ^.*$")("".concat(filePath));

      InitStates[service] = target["default"]; // FIXME: 这里需不需要深拷贝？

      InstanceAliasList[alias] = (_a = target[alias]) !== null && _a !== void 0 ? _a : target['InstanceAliasList'];
      GetInstanceQueryParams[getParams] = (_b = target[getParams]) !== null && _b !== void 0 ? _b : target['GetInstanceQueryParams'];
    }
  });
});
 // console.log(Datasources, InitStates, InstanceAliasList, GetInstanceQueryParams);

/***/ }),

/***/ "./datasource/tc_monitor/lb/datasource.ts":
/*!************************************************!*\
  !*** ./datasource/tc_monitor/lb/datasource.ts ***!
  \************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _base_datasource__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../_base/datasource */ "./datasource/tc_monitor/_base/datasource.ts");
/* harmony import */ var _query_def__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./query_def */ "./datasource/tc_monitor/lb/query_def.ts");
var __extends = undefined && undefined.__extends || function () {
  var _extendStatics = function extendStatics(d, b) {
    _extendStatics = Object.setPrototypeOf || {
      __proto__: []
    } instanceof Array && function (d, b) {
      d.__proto__ = b;
    } || function (d, b) {
      for (var p in b) {
        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];
      }
    };

    return _extendStatics(d, b);
  };

  return function (d, b) {
    if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");

    _extendStatics(d, b);

    function __() {
      this.constructor = d;
    }

    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();

var __awaiter = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {
  function adopt(value) {
    return value instanceof P ? value : new P(function (resolve) {
      resolve(value);
    });
  }

  return new (P || (P = Promise))(function (resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }

    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }

    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }

    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};

var __generator = undefined && undefined.__generator || function (thisArg, body) {
  var _ = {
    label: 0,
    sent: function sent() {
      if (t[0] & 1) throw t[1];
      return t[1];
    },
    trys: [],
    ops: []
  },
      f,
      y,
      t,
      g;
  return g = {
    next: verb(0),
    "throw": verb(1),
    "return": verb(2)
  }, typeof Symbol === "function" && (g[Symbol.iterator] = function () {
    return this;
  }), g;

  function verb(n) {
    return function (v) {
      return step([n, v]);
    };
  }

  function step(op) {
    if (f) throw new TypeError("Generator is already executing.");

    while (_) {
      try {
        if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
        if (y = 0, t) op = [op[0] & 2, t.value];

        switch (op[0]) {
          case 0:
          case 1:
            t = op;
            break;

          case 4:
            _.label++;
            return {
              value: op[1],
              done: false
            };

          case 5:
            _.label++;
            y = op[1];
            op = [0];
            continue;

          case 7:
            op = _.ops.pop();

            _.trys.pop();

            continue;

          default:
            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
              _ = 0;
              continue;
            }

            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
              _.label = op[1];
              break;
            }

            if (op[0] === 6 && _.label < t[1]) {
              _.label = t[1];
              t = op;
              break;
            }

            if (t && _.label < t[2]) {
              _.label = t[2];

              _.ops.push(op);

              break;
            }

            if (t[2]) _.ops.pop();

            _.trys.pop();

            continue;
        }

        op = body.call(thisArg, _);
      } catch (e) {
        op = [6, e];
        y = 0;
      } finally {
        f = t = 0;
      }
    }

    if (op[0] & 5) throw op[1];
    return {
      value: op[0] ? op[1] : void 0,
      done: true
    };
  }
};




var SCFDatasource =
/** @class */
function (_super) {
  __extends(SCFDatasource, _super);

  function SCFDatasource(instanceSettings, backendSrv, templateSrv) {
    var _this = _super.call(this, instanceSettings, backendSrv, templateSrv) || this;

    _this.Namespace = 'QCE/LB';
    _this.InstanceAliasList = _query_def__WEBPACK_IMPORTED_MODULE_1__["LBInstanceAliasList"];
    _this.InvalidDimensions = _query_def__WEBPACK_IMPORTED_MODULE_1__["LBInvalidDemensions"];
    _this.templateQueryIdMap = {
      instance: 'AddressId'
    };
    _this.InstanceReqConfig = {
      service: 'vpc',
      action: 'DescribeAddresses',
      responseField: 'AddressSet',
      interceptor: {
        request: function request(params) {
          var Filters = params.Filters;

          if (!Filters) {
            params.Filters = [];
          }

          params.Filters.push({
            Name: 'address-type',
            Values: ['EIP']
          });
          return params;
        } // 设置一些请求参数的 默认值

      }
    };
    return _this;
  }

  SCFDatasource.prototype.getMetrics = function (region) {
    if (region === void 0) {
      region = 'ap-guangzhou';
    }

    return __awaiter(this, void 0, void 0, function () {
      var rawSet;
      return __generator(this, function (_a) {
        switch (_a.label) {
          case 0:
            return [4
            /*yield*/
            , _super.prototype.getMetrics.call(this, region)];

          case 1:
            rawSet = _a.sent();
            return [2
            /*return*/
            , rawSet.filter(function (item) {
              var _a, _b, _c;
              /* hack：这里多加了筛选条件，是因为后端数据不准确，坑啊！ 只拿取包含eip的指标 */


              return (_c = (_b = (_a = item.Dimensions) === null || _a === void 0 ? void 0 : _a[0]) === null || _b === void 0 ? void 0 : _b.Dimensions) === null || _c === void 0 ? void 0 : _c.includes('eip');
            })];
        }
      });
    });
  };

  return SCFDatasource;
}(_base_datasource__WEBPACK_IMPORTED_MODULE_0__["BaseDatasource"]);

/* harmony default export */ __webpack_exports__["default"] = (SCFDatasource);

/***/ }),

/***/ "./datasource/tc_monitor/lb/query.ts":
/*!*******************************************!*\
  !*** ./datasource/tc_monitor/lb/query.ts ***!
  \*******************************************/
/*! exports provided: LBQueryCtrl, lbQuery */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LBQueryCtrl", function() { return LBQueryCtrl; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "lbQuery", function() { return lbQuery; });
/* harmony import */ var grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! grafana/app/core/core_module */ "grafana/app/core/core_module");
/* harmony import */ var grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _query_def__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./query_def */ "./datasource/tc_monitor/lb/query_def.ts");



var LBQueryCtrl =
/** @class */
function () {
  LBQueryCtrl.$inject = ["$scope", "$rootScope"];

  /** @ngInject */
  function LBQueryCtrl($scope, $rootScope) {
    $scope.init = function () {
      // $scope.LBQueryDescriptor = LBQueryDescriptor;
      $scope.LBFilterDescriptor = _query_def__WEBPACK_IMPORTED_MODULE_1__["LBFilterDescriptor"];
    };

    $scope.onChecked = function (srcField, dstField) {
      if ($scope.target.queries[srcField] === true) {
        $scope.target.queries[dstField] = false;
      }

      $scope.onChange();
    };

    $scope.getDropdown = function (field) {
      switch (field) {
        case 'zone':
          return $scope.getZones();

        default:
          return [];
      }
    };

    $scope.getZones = function () {
      if (!$scope.region) {
        return [];
      }

      return $scope.datasource.getZones('cvm', $scope.region);
    };

    $scope.init();
  }

  return LBQueryCtrl;
}();


var template = "\n<div class=\"tc-sub-params\" ng-if=\"showDetail\">\n<label class=\"gf-form-label tc-info-label\">\n  Instances are queried by following params.\n  <a target=\"_blank\" style=\"text-decoration:underline;color:#006eff;font-size:medium\" href=\"https://cloud.tencent.com/document/api/215/16702\">Click here to get API doc.</a>\n</label>\n\n<div class=\"gf-form-inline\">\n  <div class=\"gf-form\">\n    <label class=\"gf-form-label width-14\">\n      Offset\n      <info-popover mode=\"right-normal\">\n        \u504F\u79FB\u91CF, \u4F8B\u5982Offset=20&Limit=20 \u8FD4\u56DE\u7B2C 20 \u5230 40 \u9879\n      </info-popover>\n    </label>\n    <input type=\"number\" ng-model=\"target.queries.Offset\" class=\"gf-form-input width-10\" ng-min=\"0\" ng-change=\"onChange()\">\n  </div>\n</div>\n<div class=\"gf-form-inline\">\n  <div class=\"gf-form\">\n    <label class=\"gf-form-label width-14\">\n      Limit\n      <info-popover mode=\"right-normal\">\n        \u5355\u6B21\u8BF7\u6C42\u8FD4\u56DE\u7684\u6570\u91CF\uFF0C\u9ED8\u8BA4\u4E3A20\uFF0C\u6700\u5C0F\u503C\u4E3A1\uFF0C\u6700\u5927\u503C\u4E3A100\n      </info-popover>\n    </label>\n    <input type=\"number\" ng-model=\"target.queries.Limit\" class=\"gf-form-input width-10\" ng-min=\"1\" ng-max=\"100\" ng-change=\"onChange()\">\n  </div>\n</div>\n<div class=\"gf-form-inline\">\n  <div class=\"gf-form\">\n    <label class=\"gf-form-label width-9\">\n      AddressIds\n      <info-popover mode=\"right-normal\">\n        \u5B9E\u4F8B ID\uFF0C\u6BCF\u6B21\u8BF7\u6C42\u7684\u5B9E\u4F8B\u7684\u4E0A\u9650\u4E3A100\uFF0C\u53C2\u6570\u4E0D\u652F\u6301\u540C\u65F6\u6307\u5B9A AddressIds \u548C Filters\n      </info-popover>\n    </label>\n    <gf-form-switch class=\"gf-form tc-switch\" label-class=\"width-7\" checked=\"target.queries.instanceIdsChecked\"\n      switch-class=\"max-width-5\" on-change=\"onChecked('instanceIdsChecked', 'filtersChecked')\"></gf-form-switch>\n  </div>\n</div>\n<div class=\"gf-form-inline tc-sub-params\" ng-if=\"target.queries.instanceIdsChecked\">\n  <multi-condition type=\"'input'\" max-cond=\"100\" value=\"target.queries.AddressIds\" on-change=\"onChange()\">\n  </multi-condition>\n</div>\n<div class=\"gf-form-inline\">\n  <div class=\"gf-form\">\n    <label class=\"gf-form-label width-9\">\n      Filters\n      <info-popover mode=\"right-normal\">\n        \u8FC7\u6EE4\u6761\u4EF6\uFF0C\u6BCF\u6B21\u8BF7\u6C42\u7684 Filters \u7684\u4E0A\u9650\u4E3A10\uFF0CFilter.Values \u7684\u4E0A\u9650\u4E3A5\u3002\u53C2\u6570\u4E0D\u652F\u6301\u540C\u65F6\u6307\u5B9A AddressIds \u548C Filters\n      </info-popover>\n    </label>\n    <gf-form-switch class=\"gf-form tc-switch\" label-class=\"width-7\" checked=\"target.queries.filtersChecked\" switch-class=\"max-width-5\"\n      on-change=\"onChecked('filtersChecked','instanceIdsChecked')\"></gf-form-switch>\n  </div>\n</div>\n\n<!--Filters\u90E8\u5206-->\n<div ng-if=\"target.queries.filtersChecked\" class=\"tc-sub-params\">\n  <div class=\"gf-form-inline\" ng-repeat=\"field in LBFilterDescriptor\">\n    <label class=\"gf-form-label width-14\">\n      {{ field.key }}\n      <info-popover mode=\"right-normal\">\n        {{ field.cnDescriptor }}\n        <a target=\"_blank\" href=\"{{field.link}}\" ng-if=\"field.link\">Click here for more information.</a>\n      </info-popover>\n    </label>\n    <multi-condition\n      ng-if=\"field.type === 'dropdownmulti'\"\n      type=\"'dropdown'\"\n      max-cond=\"5\"\n      value=\"target.queries.Filters[field.key]\"\n      get-options=\"getDropdown(field.key)\"\n      on-change=\"onChange()\"\n    ></multi-condition>\n    <multi-condition\n      ng-if=\"field.type === 'inputNumbermulti'\"\n      type=\"'inputNumber'\"\n      max-cond=\"5\"\n      value=\"target.queries.Filters[field.key]\"\n      maxNum=\"field.max\"\n      minNum=\"field.min\"\n      on-change=\"onChange()\"\n    ></multi-condition>\n    <multi-condition\n      ng-if=\"field.type === 'inputmulti'\"\n      type=\"'input'\"\n      max-cond=\"5\"\n      value=\"target.queries.Filters[field.key]\"\n      on-change=\"onChange()\"\n    ></multi-condition>\n    <custom-select-dropdown\n      ng-if=\"field.type === 'select'\"\n      value=\"target.queries.Filters[field.key]\"\n      options=\"field.list\"\n      multiple=\"true\"\n      on-change=\"onChange()\"\n    ></custom-select-dropdown>\n  </div>\n</div>\n\n</div>\n";
function lbQuery() {
  return {
    template: template,
    controller: LBQueryCtrl,
    restrict: 'E',
    scope: {
      target: '=',
      showDetail: '=',
      region: '=',
      datasource: '=',
      getDropdownOptions: '&',
      onChange: '&'
    }
  };
}
grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0___default.a.directive('lbQuery', lbQuery);

/***/ }),

/***/ "./datasource/tc_monitor/lb/query_def.ts":
/*!***********************************************!*\
  !*** ./datasource/tc_monitor/lb/query_def.ts ***!
  \***********************************************/
/*! exports provided: LBFilterDescriptor, default, LBInstanceAliasList, LBInvalidDemensions, templateQueryIdMap, LBGetInstanceQueryParams */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LBFilterDescriptor", function() { return LBFilterDescriptor; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LBInstanceAliasList", function() { return LBInstanceAliasList; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LBInvalidDemensions", function() { return LBInvalidDemensions; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "templateQueryIdMap", function() { return templateQueryIdMap; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LBGetInstanceQueryParams", function() { return GetInstanceQueryParams; });
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lodash */ "lodash");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__);
var _a;

 // export const LBQueryDescriptor = [{
//   key: 'Offset',
//   enDescriptor: 'Offset',
//   cnDescriptor: '偏移量, 例如Offset=20&Limit=20 返回第 20 到 40 项',
//   link: '',
//   type: 'inputnumber',
//   min: 0,
// },
// {
//   key: 'Limit',
//   enDescriptor: 'Limit',
//   cnDescriptor: '单次请求返回的数量，默认为20，最小值为1，最大值为2000',
//   link: '',
//   type: 'inputnumber',
//   min: 1,
//   max: 2000,
// },
// {
//   key: 'AddressId',
//   enDescriptor: 'Address Id',
//   cnDescriptor: '标识 EIP 的唯一 ID ',
//   link: '',
//   type: 'inputmulti',
// }
// ];

var LBFilterDescriptor = [{
  key: 'address-id',
  enDescriptor: 'Address ID',
  cnDescriptor: 'EIP 的唯一 ID ',
  link: '',
  type: 'inputmulti'
}, {
  key: 'address-name',
  enDescriptor: 'Address Name',
  cnDescriptor: 'EIP 名称 ',
  link: '',
  type: 'inputmulti'
}, {
  key: 'address-ip',
  enDescriptor: 'Address IP',
  cnDescriptor: 'EIP 的 IP 地址 ',
  link: '',
  type: 'inputmulti'
}, {
  key: 'address-status',
  enDescriptor: 'Address Status',
  cnDescriptor: 'EIP 的状态',
  link: '',
  type: 'select',
  list: [{
    value: 'CREATING',
    text: 'CREATING'
  }, {
    value: 'BINDING',
    text: 'BINDING'
  }, {
    value: 'BIND',
    text: 'BIND'
  }, {
    value: 'UNBINDING',
    text: 'UNBINDING'
  }, {
    value: 'UNBIND',
    text: 'UNBIND'
  }, {
    value: 'OFFLINING',
    text: 'OFFLINING'
  }, {
    value: 'BIND_ENI',
    text: 'BIND_ENI'
  }]
}, {
  key: 'instance-id',
  enDescriptor: 'Instance ID',
  cnDescriptor: '实例ID ',
  link: '',
  type: 'inputmulti'
}, {
  key: 'private-ip-address',
  enDescriptor: 'Private IP Address',
  cnDescriptor: 'EIP 绑定的内网 IP',
  link: '',
  type: 'inputmulti'
}, {
  key: 'network-interface-id',
  enDescriptor: 'Network Interface ID',
  cnDescriptor: 'EIP 绑定的弹性网卡 ID',
  link: '',
  type: 'inputmulti'
}, {
  key: 'is-arrears',
  enDescriptor: 'Arrears',
  cnDescriptor: 'EIP 是否欠费 ',
  link: '',
  type: 'select',
  list: [{
    text: '正常',
    value: 'FALSE'
  }, {
    text: '欠费',
    value: 'TRUE'
  }]
}]; // const LBFilterFields = {
//   "address-id": [],
//   "address-name": [],
//   "address-ip": [],
//   "address-status ": [],
//   "instance-id ": [],
//   "private-ip-address": [],
//   "network-interface-id ": [],
//   "is-arrears ": [],
// };

var InstanceKey = 'AddressIds';
var LB_STATE = {
  region: '',
  metricName: '',
  metricUnit: '',
  period: undefined,
  dimensionObject: null,
  instance: '',
  instanceAlias: 'AddressId',
  version: '',
  queries: (_a = {
    Offset: 0,
    Limit: 20
  }, _a[InstanceKey] = [''], _a.Filters = {
    'address-id': [],
    'address-name': [],
    'address-ip': [],
    'address-status ': [],
    'instance-id ': [],
    'private-ip-address': [],
    'network-interface-id ': [],
    'is-arrears ': []
  }, _a)
};

function GetInstanceQueryParams(queries) {
  if (queries === void 0) {
    queries = {};
  }

  var params = {};

  if (!lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isEmpty(queries)) {
    params.Limit = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(queries, 'Limit', 20) || 20;
    params.Offset = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(queries, 'Offset', 0) || 0;

    if (queries.instanceIdsChecked) {
      if (lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isArray(queries[InstanceKey])) {
        var InstanceIds = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.compact(queries[InstanceKey]);

        if (lodash__WEBPACK_IMPORTED_MODULE_0___default.a.uniq(InstanceIds).length > 0) {
          params[InstanceKey] = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.uniq(InstanceIds).slice(0, 100);
        }
      }
    } else if (queries.filtersChecked) {
      var Filters_1 = [];

      lodash__WEBPACK_IMPORTED_MODULE_0___default.a.forEach(queries.Filters, function (item, key) {
        if (Filters_1.length > 9) {
          return;
        }

        if (lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isArray(item)) {
          item = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.compact(item);

          if (item.length > 0) {
            Filters_1.push({
              Name: key,
              Values: lodash__WEBPACK_IMPORTED_MODULE_0___default.a.uniq(item).slice(0, 5)
            });
          }
        } else if (lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isObject(item)) {
          if (!lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isEmpty(lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(item, 'value', []))) {
            Filters_1.push({
              Name: key,
              Values: lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(item, 'value', []).slice(0, 5)
            });
          }
        }
      });

      if (Filters_1.length > 0) {
        params.Filters = Filters_1;
      }
    }
  }

  return params;
}

var LBInstanceAliasList = ['AddressId', 'AddressName', 'AddressIp']; // 维度eip对应于实例中的哪个字段？映射

var LBInvalidDemensions = {
  eip: 'AddressIp'
};
var templateQueryIdMap = {
  instance: 'AddressId'
}; // 从monitor维度到LB实例对应字段的映射
// export const metric2Instance = {
//   functionName: 'FunctionName',
//   namespace: 'Namespace'
// };

/* harmony default export */ __webpack_exports__["default"] = (LB_STATE);
 // monitor监控数据默认支持的维度
// export const LBDefaultDimensionList = ['functionName', 'namespace', 'version'];

/***/ }),

/***/ "./datasource/tc_monitor/lighthouse/datasource.ts":
/*!********************************************************!*\
  !*** ./datasource/tc_monitor/lighthouse/datasource.ts ***!
  \********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lodash */ "lodash");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _query_def__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./query_def */ "./datasource/tc_monitor/lighthouse/query_def.ts");
/* harmony import */ var _common_constants__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../common/constants */ "./datasource/common/constants.ts");
/* harmony import */ var _base_datasource__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../_base/datasource */ "./datasource/tc_monitor/_base/datasource.ts");
var __extends = undefined && undefined.__extends || function () {
  var _extendStatics = function extendStatics(d, b) {
    _extendStatics = Object.setPrototypeOf || {
      __proto__: []
    } instanceof Array && function (d, b) {
      d.__proto__ = b;
    } || function (d, b) {
      for (var p in b) {
        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];
      }
    };

    return _extendStatics(d, b);
  };

  return function (d, b) {
    if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");

    _extendStatics(d, b);

    function __() {
      this.constructor = d;
    }

    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();

var __awaiter = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {
  function adopt(value) {
    return value instanceof P ? value : new P(function (resolve) {
      resolve(value);
    });
  }

  return new (P || (P = Promise))(function (resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }

    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }

    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }

    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};

var __generator = undefined && undefined.__generator || function (thisArg, body) {
  var _ = {
    label: 0,
    sent: function sent() {
      if (t[0] & 1) throw t[1];
      return t[1];
    },
    trys: [],
    ops: []
  },
      f,
      y,
      t,
      g;
  return g = {
    next: verb(0),
    "throw": verb(1),
    "return": verb(2)
  }, typeof Symbol === "function" && (g[Symbol.iterator] = function () {
    return this;
  }), g;

  function verb(n) {
    return function (v) {
      return step([n, v]);
    };
  }

  function step(op) {
    if (f) throw new TypeError("Generator is already executing.");

    while (_) {
      try {
        if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
        if (y = 0, t) op = [op[0] & 2, t.value];

        switch (op[0]) {
          case 0:
          case 1:
            t = op;
            break;

          case 4:
            _.label++;
            return {
              value: op[1],
              done: false
            };

          case 5:
            _.label++;
            y = op[1];
            op = [0];
            continue;

          case 7:
            op = _.ops.pop();

            _.trys.pop();

            continue;

          default:
            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
              _ = 0;
              continue;
            }

            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
              _.label = op[1];
              break;
            }

            if (op[0] === 6 && _.label < t[1]) {
              _.label = t[1];
              t = op;
              break;
            }

            if (t && _.label < t[2]) {
              _.label = t[2];

              _.ops.push(op);

              break;
            }

            if (t[2]) _.ops.pop();

            _.trys.pop();

            continue;
        }

        op = body.call(thisArg, _);
      } catch (e) {
        op = [6, e];
        y = 0;
      } finally {
        f = t = 0;
      }
    }

    if (op[0] & 5) throw op[1];
    return {
      value: op[0] ? op[1] : void 0,
      done: true
    };
  }
};






var LighthouseDatasource =
/** @class */
function (_super) {
  __extends(LighthouseDatasource, _super);

  function LighthouseDatasource(instanceSettings, backendSrv, templateSrv) {
    var _this = _super.call(this, instanceSettings, backendSrv, templateSrv) || this;

    _this.Namespace = 'QCE/LIGHTHOUSE';
    _this.InstanceAliasList = _query_def__WEBPACK_IMPORTED_MODULE_1__["LIGHTHOUSEInstanceAliasList"];
    _this.InvalidDimensions = _query_def__WEBPACK_IMPORTED_MODULE_1__["LighthouseInvalidDemensions"];
    _this.templateQueryIdMap = _query_def__WEBPACK_IMPORTED_MODULE_1__["templateQueryIdMap"];
    _this.InstanceReqConfig = {
      service: 'lighthouse',
      action: 'DescribeInstances',
      responseField: 'InstanceSet'
    };
    return _this;
  }

  LighthouseDatasource.prototype.getRegions = function () {
    return this.doRequest({
      url: this.url + '/api',
      data: {
        Product: 'lighthouse'
      }
    }, 'api', {
      action: 'DescribeRegions'
    }).then(function (response) {
      return lodash__WEBPACK_IMPORTED_MODULE_0___default.a.filter(lodash__WEBPACK_IMPORTED_MODULE_0___default.a.map(response.RegionSet || [], function (item) {
        return {
          text: item.RegionName,
          value: item.Region,
          RegionState: item.RegionState
        };
      }), function (item) {
        return item.RegionState === 'AVAILABLE';
      });
    });
  };

  LighthouseDatasource.prototype.getZones = function (region) {
    var serviceInfo = Object(_common_constants__WEBPACK_IMPORTED_MODULE_2__["GetServiceAPIInfo"])(region, 'api');
    return this.doRequest({
      url: this.url + serviceInfo.path,
      data: {
        Product: 'lighthouse'
      }
    }, serviceInfo.service, {
      region: region,
      action: 'DescribeZones'
    }).then(function (response) {
      return lodash__WEBPACK_IMPORTED_MODULE_0___default.a.filter(lodash__WEBPACK_IMPORTED_MODULE_0___default.a.map(response.ZoneSet || [], function (item) {
        return {
          text: item.ZoneName,
          value: item.Zone,
          ZoneState: item.ZoneState,
          Zone: item.Zone
        };
      }), function (item) {
        return item.ZoneState === 'AVAILABLE';
      });
    });
  };

  LighthouseDatasource.prototype.getMetrics = function (region) {
    if (region === void 0) {
      region = 'ap-guangzhou';
    }

    return __awaiter(this, void 0, void 0, function () {
      var rawSet;
      return __generator(this, function (_a) {
        switch (_a.label) {
          case 0:
            return [4
            /*yield*/
            , _super.prototype.getMetrics.call(this, region)];

          case 1:
            rawSet = _a.sent();
            return [2
            /*return*/
            , lodash__WEBPACK_IMPORTED_MODULE_0___default.a.compact(rawSet.map(function (item) {
              return Object(_query_def__WEBPACK_IMPORTED_MODULE_1__["modifyDimensons"])(item);
            }))];
        }
      });
    });
  };

  return LighthouseDatasource;
}(_base_datasource__WEBPACK_IMPORTED_MODULE_3__["BaseDatasource"]);

/* harmony default export */ __webpack_exports__["default"] = (LighthouseDatasource);

/***/ }),

/***/ "./datasource/tc_monitor/lighthouse/query.ts":
/*!***************************************************!*\
  !*** ./datasource/tc_monitor/lighthouse/query.ts ***!
  \***************************************************/
/*! exports provided: LighthouseQueryCtrl, lighthouseQuery */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LighthouseQueryCtrl", function() { return LighthouseQueryCtrl; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "lighthouseQuery", function() { return lighthouseQuery; });
/* harmony import */ var grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! grafana/app/core/core_module */ "grafana/app/core/core_module");
/* harmony import */ var grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _query_def__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./query_def */ "./datasource/tc_monitor/lighthouse/query_def.ts");



var LighthouseQueryCtrl =
/** @class */
function () {
  LighthouseQueryCtrl.$inject = ["$scope", "$rootScope"];

  /** @ngInject */
  function LighthouseQueryCtrl($scope, $rootScope) {
    $scope.init = function () {
      $scope.LighthouseFilterFieldsDescriptor = _query_def__WEBPACK_IMPORTED_MODULE_1__["LighthouseFilterFieldsDescriptor"];
    };

    $scope.onChecked = function (srcField, dstField) {
      if ($scope.target.queries[srcField] === true) {
        $scope.target.queries[dstField] = false;
      }

      $scope.onChange();
    };

    $scope.getDropdown = function (field) {
      switch (field) {
        case 'zone':
          return $scope.getZones();

        default:
          return [];
      }
    };

    $scope.getZones = function () {
      if (!$scope.region) {
        return [];
      }

      return $scope.datasource.getZones('lighthouse', $scope.region);
    };

    $scope.init();
  }

  return LighthouseQueryCtrl;
}();


var template = "\n<div class=\"tc-sub-params\" ng-if=\"showDetail\">\n  <label class=\"gf-form-label tc-info-label\">\n    Instances are queried by following params.\n    <a target=\"_blank\" style=\"text-decoration:underline;color:#006eff;font-size:medium\" href=\"https://cloud.tencent.com/document/api/1207/47573\">Click here to get API doc.</a>\n  </label>\n  <div class=\"gf-form-inline\">\n    <div class=\"gf-form\">\n      <label class=\"gf-form-label width-14\">\n        Offset\n        <info-popover mode=\"right-normal\">\n          \u504F\u79FB\u91CF, \u4F8B\u5982Offset=20&Limit=20 \u8FD4\u56DE\u7B2C 20 \u5230 40 \u9879\n        </info-popover>\n      </label>\n      <input type=\"number\" ng-model=\"target.queries.Offset\" class=\"gf-form-input width-10\" ng-min=\"0\" ng-change=\"onChange()\">\n    </div>\n  </div>\n  <div class=\"gf-form-inline\">\n    <div class=\"gf-form\">\n      <label class=\"gf-form-label width-14\">\n        Limit\n        <info-popover mode=\"right-normal\">\n          \u5355\u6B21\u8BF7\u6C42\u8FD4\u56DE\u7684\u6570\u91CF\uFF0C\u9ED8\u8BA4\u4E3A20\uFF0C\u6700\u5C0F\u503C\u4E3A1\uFF0C\u6700\u5927\u503C\u4E3A100\n        </info-popover>\n      </label>\n      <input type=\"number\" ng-model=\"target.queries.Limit\" class=\"gf-form-input width-10\" ng-min=\"1\" ng-max=\"100\" ng-change=\"onChange()\">\n    </div>\n  </div>\n  <div class=\"gf-form-inline\">\n    <div class=\"gf-form\">\n      <label class=\"gf-form-label width-9\">\n        InstanceIds\n        <info-popover mode=\"right-normal\">\n          \u5B9E\u4F8B ID\uFF0C\u6BCF\u6B21\u8BF7\u6C42\u7684\u5B9E\u4F8B\u7684\u4E0A\u9650\u4E3A100\uFF0C\u53C2\u6570\u4E0D\u652F\u6301\u540C\u65F6\u6307\u5B9A InstanceIds \u548C Filters\n        </info-popover>\n      </label>\n      <gf-form-switch class=\"gf-form tc-switch\" label-class=\"width-7\" checked=\"target.queries.instanceIdsChecked\"\n        switch-class=\"max-width-5\" on-change=\"onChecked('instanceIdsChecked', 'filtersChecked')\"></gf-form-switch>\n    </div>\n  </div>\n  <div class=\"gf-form-inline tc-sub-params\" ng-if=\"target.queries.instanceIdsChecked\">\n    <multi-condition type=\"'input'\" max-cond=\"100\" value=\"target.queries.InstanceIds\" on-change=\"onChange()\">\n    </multi-condition>\n  </div>\n  <div class=\"gf-form-inline\">\n    <div class=\"gf-form\">\n      <label class=\"gf-form-label width-9\">\n        Filters\n        <info-popover mode=\"right-normal\">\n          \u8FC7\u6EE4\u6761\u4EF6\uFF0C\u6BCF\u6B21\u8BF7\u6C42\u7684 Filters \u7684\u4E0A\u9650\u4E3A10\uFF0CFilter.Values \u7684\u4E0A\u9650\u4E3A5\u3002\u53C2\u6570\u4E0D\u652F\u6301\u540C\u65F6\u6307\u5B9A InstanceIds \u548C Filters\n        </info-popover>\n      </label>\n      <gf-form-switch class=\"gf-form tc-switch\" label-class=\"width-7\" checked=\"target.queries.filtersChecked\" switch-class=\"max-width-5\"\n        on-change=\"onChecked('filtersChecked','instanceIdsChecked')\"></gf-form-switch>\n    </div>\n  </div>\n  <div ng-if=\"target.queries.filtersChecked\" class=\"tc-sub-params\">\n    <div class=\"gf-form-inline\" ng-repeat=\"field in LighthouseFilterFieldsDescriptor\">\n      <label class=\"gf-form-label width-14\">\n        {{ field.key }}\n        <info-popover mode=\"right-normal\">\n          {{ field.cnDescriptor }}\n          <a target=\"_blank\" href=\"{{field.link}}\" ng-if=\"field.link\">Click here for more information.</a>\n        </info-popover>\n      </label>\n      <multi-condition\n        ng-if=\"field.type === 'dropdownmulti'\"\n        type=\"'dropdown'\"\n        max-cond=\"5\"\n        value=\"target.queries.Filters[field.key]\"\n        get-options=\"getDropdown(field.key)\"\n        on-change=\"onChange()\"\n      ></multi-condition>\n      <multi-condition\n        ng-if=\"field.type === 'inputNumbermulti'\"\n        type=\"'inputNumber'\"\n        max-cond=\"5\"\n        value=\"target.queries.Filters[field.key]\"\n        maxNum=\"field.max\"\n        minNum=\"field.min\"\n        on-change=\"onChange()\"\n      ></multi-condition>\n      <multi-condition\n        ng-if=\"field.type === 'inputmulti'\"\n        type=\"'input'\"\n        max-cond=\"5\"\n        value=\"target.queries.Filters[field.key]\"\n        on-change=\"onChange()\"\n      ></multi-condition>\n      <custom-select-dropdown\n        ng-if=\"field.type === 'select'\"\n        value=\"target.queries.Filters[field.key]\"\n        options=\"field.list\"\n        multiple=\"true\"\n        on-change=\"onChange()\"\n      ></custom-select-dropdown>\n    </div>\n  </div>\n</div>\n";
function lighthouseQuery() {
  return {
    template: template,
    controller: LighthouseQueryCtrl,
    restrict: 'E',
    scope: {
      target: '=',
      showDetail: '=',
      region: '=',
      datasource: '=',
      getDropdownOptions: '&',
      onChange: '&'
    }
  };
}
grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0___default.a.directive('lighthouseQuery', lighthouseQuery);

/***/ }),

/***/ "./datasource/tc_monitor/lighthouse/query_def.ts":
/*!*******************************************************!*\
  !*** ./datasource/tc_monitor/lighthouse/query_def.ts ***!
  \*******************************************************/
/*! exports provided: default, LighthouseFilterFieldsDescriptor, LIGHTHOUSEInstanceAliasList, LighthouseInvalidDemensions, templateQueryIdMap, modifyDimensons, LIGHTHOUSEGetInstanceQueryParams */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LighthouseFilterFieldsDescriptor", function() { return LighthouseFilterFieldsDescriptor; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LIGHTHOUSEInstanceAliasList", function() { return LIGHTHOUSEInstanceAliasList; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LighthouseInvalidDemensions", function() { return LighthouseInvalidDemensions; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "templateQueryIdMap", function() { return templateQueryIdMap; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "modifyDimensons", function() { return modifyDimensons; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LIGHTHOUSEGetInstanceQueryParams", function() { return GetInstanceQueryParams; });
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lodash */ "lodash");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__);
var __assign = undefined && undefined.__assign || function () {
  __assign = Object.assign || function (t) {
    for (var s, i = 1, n = arguments.length; i < n; i++) {
      s = arguments[i];

      for (var p in s) {
        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
      }
    }

    return t;
  };

  return __assign.apply(this, arguments);
};


var LighthouseStateType = [{
  text: '创建中',
  value: 'PENDING'
}, {
  text: '创建失败',
  value: 'LAUNCH_FAILED'
}, {
  text: '运行中',
  value: 'RUNNING'
}, {
  text: '关机',
  value: 'STOPPED'
}, {
  text: '开机中',
  value: 'STARTING'
}, {
  text: '关机中',
  value: 'STOPPING'
}, {
  text: '重启中',
  value: 'REBOOTING'
}, {
  text: '停止待销毁',
  value: 'SHUTDOWN'
}, {
  text: '销毁中',
  value: 'TERMINATING'
}];
var LighthouseFilterFields = {
  zone: [],
  'instance-name': [],
  'instance-state': {},
  'private-ip-address': [],
  'public-ip-address': []
};
var LighthouseFilterFieldsDescriptor = [{
  key: 'instance-name',
  enDescriptor: 'Instance Name',
  cnDescriptor: '实例名称',
  link: '',
  type: 'inputmulti'
}, {
  key: 'private-ip-address',
  enDescriptor: 'Private IP Address',
  cnDescriptor: '实例主网卡的内网IP',
  link: '',
  type: 'inputmulti'
}, {
  key: 'public-ip-address',
  enDescriptor: 'Public IP Address',
  cnDescriptor: '实例主网卡的公网IP',
  link: '',
  type: 'inputmulti'
}, {
  key: 'zone',
  enDescriptor: 'Zone',
  cnDescriptor: '可用区',
  link: '',
  type: 'dropdownmulti'
}, {
  key: 'instance-state',
  enDescriptor: 'Instance State',
  cnDescriptor: '实例状态',
  link: '',
  type: 'select',
  list: LighthouseStateType
}];
var LIGHTHOUSE_STATE = {
  region: '',
  metricName: '',
  metricUnit: '',
  period: undefined,
  dimensionObject: null,
  instance: '',
  instanceAlias: 'InstanceId',
  queries: {
    Limit: 20,
    Offset: 0,
    instanceIdsChecked: false,
    filtersChecked: false,
    InstanceIds: [''],
    Filters: __assign({}, LighthouseFilterFields)
  }
};

function GetInstanceQueryParams(queries) {
  if (queries === void 0) {
    queries = {};
  }

  var params = {};

  if (!lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isEmpty(queries)) {
    params.Limit = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(queries, 'Limit', 20) || 20;
    params.Offset = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(queries, 'Offset', 0) || 0;

    if (queries.instanceIdsChecked) {
      if (lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isArray(queries.InstanceIds)) {
        var InstanceIds = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.compact(queries.InstanceIds);

        if (lodash__WEBPACK_IMPORTED_MODULE_0___default.a.uniq(InstanceIds).length > 0) {
          params.InstanceIds = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.uniq(InstanceIds).slice(0, 100);
        }
      }
    } else if (queries.filtersChecked) {
      var Filters_1 = [];

      lodash__WEBPACK_IMPORTED_MODULE_0___default.a.forEach(queries.Filters, function (item, key) {
        if (Filters_1.length > 9) {
          return;
        }

        if (lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isArray(item)) {
          item = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.compact(item);

          if (item.length > 0) {
            Filters_1.push({
              Name: key,
              Values: lodash__WEBPACK_IMPORTED_MODULE_0___default.a.uniq(item).slice(0, 5)
            });
          }
        } else if (lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isObject(item)) {
          if (!lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isEmpty(lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(item, 'value', []))) {
            Filters_1.push({
              Name: key,
              Values: lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(item, 'value', []).slice(0, 5)
            });
          }
        }
      });

      if (Filters_1.length > 0) {
        params.Filters = Filters_1;
      }
    }
  }

  return params;
}

var LIGHTHOUSEInstanceAliasList = ['InstanceId', 'InstanceName', 'PrivateIpAddresses', 'PublicIpAddresses'];
var LighthouseInvalidDemensions = {
  instanceid: 'InstanceId'
};
var templateQueryIdMap = {
  instance: 'InstanceId'
};

function modifyDimensons(metricItem) {
  var metricTmp = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.cloneDeep(metricItem);

  metricTmp.Dimensions.forEach(function (item) {
    item.Dimensions = ['InstanceId'];
  });
  return metricTmp;
}

/* harmony default export */ __webpack_exports__["default"] = (LIGHTHOUSE_STATE);


/***/ }),

/***/ "./datasource/tc_monitor/mongodb/datasource.ts":
/*!*****************************************************!*\
  !*** ./datasource/tc_monitor/mongodb/datasource.ts ***!
  \*****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lodash */ "lodash");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _query_def__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./query_def */ "./datasource/tc_monitor/mongodb/query_def.ts");
/* harmony import */ var _base_datasource__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../_base/datasource */ "./datasource/tc_monitor/_base/datasource.ts");
/* harmony import */ var _common_datasourceStorage__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../common/datasourceStorage */ "./datasource/common/datasourceStorage.ts");
var __extends = undefined && undefined.__extends || function () {
  var _extendStatics = function extendStatics(d, b) {
    _extendStatics = Object.setPrototypeOf || {
      __proto__: []
    } instanceof Array && function (d, b) {
      d.__proto__ = b;
    } || function (d, b) {
      for (var p in b) {
        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];
      }
    };

    return _extendStatics(d, b);
  };

  return function (d, b) {
    if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");

    _extendStatics(d, b);

    function __() {
      this.constructor = d;
    }

    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();

var __awaiter = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {
  function adopt(value) {
    return value instanceof P ? value : new P(function (resolve) {
      resolve(value);
    });
  }

  return new (P || (P = Promise))(function (resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }

    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }

    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }

    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};

var __generator = undefined && undefined.__generator || function (thisArg, body) {
  var _ = {
    label: 0,
    sent: function sent() {
      if (t[0] & 1) throw t[1];
      return t[1];
    },
    trys: [],
    ops: []
  },
      f,
      y,
      t,
      g;
  return g = {
    next: verb(0),
    "throw": verb(1),
    "return": verb(2)
  }, typeof Symbol === "function" && (g[Symbol.iterator] = function () {
    return this;
  }), g;

  function verb(n) {
    return function (v) {
      return step([n, v]);
    };
  }

  function step(op) {
    if (f) throw new TypeError("Generator is already executing.");

    while (_) {
      try {
        if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
        if (y = 0, t) op = [op[0] & 2, t.value];

        switch (op[0]) {
          case 0:
          case 1:
            t = op;
            break;

          case 4:
            _.label++;
            return {
              value: op[1],
              done: false
            };

          case 5:
            _.label++;
            y = op[1];
            op = [0];
            continue;

          case 7:
            op = _.ops.pop();

            _.trys.pop();

            continue;

          default:
            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
              _ = 0;
              continue;
            }

            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
              _.label = op[1];
              break;
            }

            if (op[0] === 6 && _.label < t[1]) {
              _.label = t[1];
              t = op;
              break;
            }

            if (t && _.label < t[2]) {
              _.label = t[2];

              _.ops.push(op);

              break;
            }

            if (t[2]) _.ops.pop();

            _.trys.pop();

            continue;
        }

        op = body.call(thisArg, _);
      } catch (e) {
        op = [6, e];
        y = 0;
      } finally {
        f = t = 0;
      }
    }

    if (op[0] & 5) throw op[1];
    return {
      value: op[0] ? op[1] : void 0,
      done: true
    };
  }
};

var __spreadArray = undefined && undefined.__spreadArray || function (to, from, pack) {
  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {
    if (ar || !(i in from)) {
      if (!ar) ar = Array.prototype.slice.call(from, 0, i);
      ar[i] = from[i];
    }
  }
  return to.concat(ar || Array.prototype.slice.call(from));
};






var MONGODBDatasource =
/** @class */
function (_super) {
  __extends(MONGODBDatasource, _super);

  function MONGODBDatasource(instanceSettings, backendSrv, templateSrv) {
    var _this = _super.call(this, instanceSettings, backendSrv, templateSrv) || this;

    _this.Namespace = 'QCE/CMONGO';
    _this.InstanceAliasList = _query_def__WEBPACK_IMPORTED_MODULE_1__["MONGODBInstanceAliasList"];
    _this.ReplicaAliasList = ['ReplicaSetId', 'ReplicaSetName'];
    _this.templateQueryIdMap = _query_def__WEBPACK_IMPORTED_MODULE_1__["templateQueryIdMap"];
    _this.queryMonitorExtraConfg = _query_def__WEBPACK_IMPORTED_MODULE_1__["queryMonitorExtraConfg"];
    _this.InstanceReqConfig = {
      service: 'mongodb',
      action: 'DescribeDBInstances',
      responseField: 'InstanceDetails'
    };
    return _this;
  }

  MONGODBDatasource.prototype.getInvalidDimensions = function (selfIns, target) {
    if (target.node && target.node !== '') {
      return {
        target: 'Node'
      };
    }

    if (target.replica && target.replica !== '') {
      return {
        target: 'Replica'
      };
    }

    return _query_def__WEBPACK_IMPORTED_MODULE_1__["MONGODBInvalidDemensions"];
  };

  MONGODBDatasource.prototype.formatVariableDisplay = function (data, displayTpl, alias, aliasList) {
    var _this = this;

    if (displayTpl) {
      return displayTpl.replace(/\$\{(\w+)\}/g, function (a, b) {
        if (!b || !aliasList.includes(b)) {
          return '';
        }

        return _this.getAliasValue(data, b);
      });
    }

    return this.getAliasValue(data, alias);
  };

  MONGODBDatasource.prototype.fetchMetricData = function (action, region, instance, query) {
    return __awaiter(this, void 0, void 0, function () {
      var display, res, replicaalias_1, result, res, replicasetid, targetReplica_1, result;

      var _this = this;

      return __generator(this, function (_a) {
        switch (_a.label) {
          case 0:
            display = query.display;
            if (!(action === 'DescribeReplicas')) return [3
            /*break*/
            , 3];
            return [4
            /*yield*/
            , this.getInstances(region, {
              InstanceIds: [instance[this.templateQueryIdMap.instance]]
            })];

          case 1:
            res = _a.sent()[0];
            replicaalias_1 = query.replicaalias;
            replicaalias_1 = this.ReplicaAliasList.includes(replicaalias_1) ? replicaalias_1 : this.templateQueryIdMap.replica;
            result = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.map(lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(res, 'ReplicaSets', []), function (item) {
              var replicaAlias = _this.formatVariableDisplay(item, display, replicaalias_1, _this.ReplicaAliasList);

              item._InstanceAliasValue = replicaAlias || item[_this.templateQueryIdMap.replica];
              return {
                text: item.ReplicaSetId,
                value: item.ReplicaSetId
              };
            });
            return [4
            /*yield*/
            , _common_datasourceStorage__WEBPACK_IMPORTED_MODULE_3__["default"].setExtraStorage(this.service, this.queryMonitorExtraConfg.Replica.dim_KeyInStorage, lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(res, 'ReplicaSets', []))];

          case 2:
            _a.sent();

            return [2
            /*return*/
            , result];

          case 3:
            if (!(action === 'DescribeReplicaNodes')) return [3
            /*break*/
            , 6];
            return [4
            /*yield*/
            , this.getInstances(region, {
              InstanceIds: [instance[this.templateQueryIdMap.instance]]
            })];

          case 4:
            res = _a.sent()[0];
            replicasetid = query.replicasetid;
            targetReplica_1 = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.find(lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(res, 'ReplicaSets', []), {
              ReplicaSetId: this.getVariable(replicasetid)
            });
            result = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.times(targetReplica_1.SecondaryNum, function (index) {
              var nodeId = "".concat(targetReplica_1.ReplicaSetId, "-node-slave").concat(index);
              return {
                text: nodeId,
                value: nodeId
              };
            });

            if (targetReplica_1) {
              result = __spreadArray([{
                text: "".concat(targetReplica_1.ReplicaSetId, "-node-primary"),
                value: "".concat(targetReplica_1.ReplicaSetId, "-node-primary")
              }], result, true);
            }

            return [4
            /*yield*/
            , _common_datasourceStorage__WEBPACK_IMPORTED_MODULE_3__["default"].setExtraStorage(this.service, this.queryMonitorExtraConfg.Node.dim_KeyInStorage, result.map(function (item) {
              return {
                NodeId: item.value,
                _InstanceAliasValue: item.value
              };
            }))];

          case 5:
            _a.sent();

            return [2
            /*return*/
            , result];

          case 6:
            return [2
            /*return*/
            , []];
        }
      });
    });
  };

  return MONGODBDatasource;
}(_base_datasource__WEBPACK_IMPORTED_MODULE_2__["BaseDatasource"]);

/* harmony default export */ __webpack_exports__["default"] = (MONGODBDatasource);

/***/ }),

/***/ "./datasource/tc_monitor/mongodb/query.ts":
/*!************************************************!*\
  !*** ./datasource/tc_monitor/mongodb/query.ts ***!
  \************************************************/
/*! exports provided: MongoDBQueryCtrl, mongodbQuery */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MongoDBQueryCtrl", function() { return MongoDBQueryCtrl; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "mongodbQuery", function() { return mongodbQuery; });
/* harmony import */ var grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! grafana/app/core/core_module */ "grafana/app/core/core_module");
/* harmony import */ var grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lodash */ "lodash");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _query_def__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./query_def */ "./datasource/tc_monitor/mongodb/query_def.ts");
/* harmony import */ var _common_constants__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../common/constants */ "./datasource/common/constants.ts");
var __awaiter = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {
  function adopt(value) {
    return value instanceof P ? value : new P(function (resolve) {
      resolve(value);
    });
  }

  return new (P || (P = Promise))(function (resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }

    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }

    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }

    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};

var __generator = undefined && undefined.__generator || function (thisArg, body) {
  var _ = {
    label: 0,
    sent: function sent() {
      if (t[0] & 1) throw t[1];
      return t[1];
    },
    trys: [],
    ops: []
  },
      f,
      y,
      t,
      g;
  return g = {
    next: verb(0),
    "throw": verb(1),
    "return": verb(2)
  }, typeof Symbol === "function" && (g[Symbol.iterator] = function () {
    return this;
  }), g;

  function verb(n) {
    return function (v) {
      return step([n, v]);
    };
  }

  function step(op) {
    if (f) throw new TypeError("Generator is already executing.");

    while (_) {
      try {
        if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
        if (y = 0, t) op = [op[0] & 2, t.value];

        switch (op[0]) {
          case 0:
          case 1:
            t = op;
            break;

          case 4:
            _.label++;
            return {
              value: op[1],
              done: false
            };

          case 5:
            _.label++;
            y = op[1];
            op = [0];
            continue;

          case 7:
            op = _.ops.pop();

            _.trys.pop();

            continue;

          default:
            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
              _ = 0;
              continue;
            }

            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
              _.label = op[1];
              break;
            }

            if (op[0] === 6 && _.label < t[1]) {
              _.label = t[1];
              t = op;
              break;
            }

            if (t && _.label < t[2]) {
              _.label = t[2];

              _.ops.push(op);

              break;
            }

            if (t[2]) _.ops.pop();

            _.trys.pop();

            continue;
        }

        op = body.call(thisArg, _);
      } catch (e) {
        op = [6, e];
        y = 0;
      } finally {
        f = t = 0;
      }
    }

    if (op[0] & 5) throw op[1];
    return {
      value: op[0] ? op[1] : void 0,
      done: true
    };
  }
};

var __spreadArray = undefined && undefined.__spreadArray || function (to, from, pack) {
  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {
    if (ar || !(i in from)) {
      if (!ar) ar = Array.prototype.slice.call(from, 0, i);
      ar[i] = from[i];
    }
  }
  return to.concat(ar || Array.prototype.slice.call(from));
};






var MongoDBQueryCtrl =
/** @class */
function () {
  MongoDBQueryCtrl.$inject = ["$scope", "$rootScope"];

  /** @ngInject */
  function MongoDBQueryCtrl($scope, $rootScope) {
    var _this = this;

    $scope.init = function () {
      $scope.MONGODBFieldsDescriptor = _query_def__WEBPACK_IMPORTED_MODULE_2__["MONGODBFieldsDescriptor"];
    };

    $scope.onChecked = function (srcField, dstField) {
      if ($scope.target.queries[srcField] === true) {
        $scope.target.queries[dstField] = false;
      }

      $scope.onChange();
    };

    $scope.getDropdown = function (field) {
      switch (field) {
        default:
          return [];
      }
    };

    $scope.onInstanceChange = function (n, o) {
      if (n === o) {
        return;
      }

      $scope.target.replica = '';
      $scope.target.node = '';
    };

    $scope.getVariableId = function (data, type) {
      var variableData = data;
      var service = Object(_common_constants__WEBPACK_IMPORTED_MODULE_3__["GetServiceFromNamespace"])('QCE/CMONGO');
      variableData = $scope.datasource.getServiceFn(service, 'getVariable')(variableData);

      if (!variableData) {
        return '';
      }

      try {
        variableData = JSON.parse(variableData)[_query_def__WEBPACK_IMPORTED_MODULE_2__["templateQueryIdMap"][type]];
      } catch (error) {// console.log();
      }

      return variableData;
    };

    $scope.getExtraDropdown = function (target, type) {
      return __awaiter(_this, void 0, void 0, function () {
        var _a, instance, replica, service, instanceId, region, res, replicaId, targetReplica_1, options;

        return __generator(this, function (_b) {
          switch (_b.label) {
            case 0:
              _a = $scope.target, instance = _a.instance, replica = _a.replica;
              service = Object(_common_constants__WEBPACK_IMPORTED_MODULE_3__["GetServiceFromNamespace"])('QCE/CMONGO');
              instanceId = $scope.getVariableId(instance, 'instance');
              region = $scope.datasource.getServiceFn(service, 'getVariable')(target.region);
              return [4
              /*yield*/
              , $scope.datasource.getServiceFn(service, 'getInstances')(region, {
                InstanceIds: [instanceId]
              })];

            case 1:
              res = _b.sent()[0];

              if (type === 'replica') {
                return [2
                /*return*/
                , Object(lodash__WEBPACK_IMPORTED_MODULE_1__["map"])(Object(lodash__WEBPACK_IMPORTED_MODULE_1__["get"])(res, 'ReplicaSets', []), function (item) {
                  item._InstanceAliasValue = item.ReplicaSetId;
                  return {
                    text: item.ReplicaSetId,
                    value: JSON.stringify(item)
                  };
                })];
              }

              if (type === 'node' && replica !== '') {
                replicaId = $scope.getVariableId(replica, 'replica');
                targetReplica_1 = Object(lodash__WEBPACK_IMPORTED_MODULE_1__["find"])(Object(lodash__WEBPACK_IMPORTED_MODULE_1__["get"])(res, 'ReplicaSets', []), {
                  ReplicaSetId: replicaId
                });
                options = Object(lodash__WEBPACK_IMPORTED_MODULE_1__["times"])(targetReplica_1.SecondaryNum, function (index) {
                  var nodeId = "".concat(targetReplica_1.ReplicaSetId, "-node-slave").concat(index);
                  return {
                    text: nodeId,
                    value: JSON.stringify({
                      NodeId: nodeId,
                      _InstanceAliasValue: "".concat(targetReplica_1.ReplicaSetId, " - ").concat(nodeId)
                    })
                  };
                });
                return [2
                /*return*/
                , __spreadArray([{
                  text: "".concat(targetReplica_1.ReplicaSetId, "-node-primary"),
                  value: JSON.stringify({
                    NodeId: "".concat(targetReplica_1.ReplicaSetId, "-node-primary"),
                    _InstanceAliasValue: "".concat(targetReplica_1.ReplicaSetId, " - ").concat("".concat(targetReplica_1.ReplicaSetId, "-node-primary"))
                  })
                }], options, true)];
              }

              return [2
              /*return*/
              , []];
          }
        });
      });
    };

    $scope.init();
  }

  return MongoDBQueryCtrl;
}();


var template = "\n<div class=\"tc-sub-params\" ng-if=\"showDetail\">\n  <label class=\"gf-form-label tc-info-label\">\n    Instances are queried by following params.\n    <a target=\"_blank\" style=\"text-decoration:underline;color:#006eff;font-size:medium\" href=\"https://cloud.tencent.com/document/api/240/35769\">Click here to get API doc.</a>\n  </label>\n  <div class=\"gf-form-inline\" ng-repeat=\"field in MONGODBFieldsDescriptor\">\n    <div class=\"gf-form\">\n      <label class=\"gf-form-label width-14\">\n        {{ field.key }}\n        <info-popover mode=\"right-normal\">\n          {{ field.cnDescriptor }}\n          <a target=\"_blank\" href=\"{{field.link}}\" ng-if=\"field.link\">Click here for more information.</a>\n        </info-popover>\n      </label>\n      <input\n        ng-if=\"field.type === 'inputnumber'\"\n        style=\"margin-right:2px\"\n        type=\"number\"\n        ng-model=\"target.queries[field.key]\"\n        ng-change=\"onChange()\"\n        class=\"gf-form-input width-10\"\n        ng-min=\"field.min\"\n        ng-max=\"field.max\"\n      />\n      <input\n        ng-if=\"field.type === 'input'\"\n        style=\"margin-right:2px\"\n        type=\"text\"\n        ng-model=\"target.queries[field.key]\"\n        ng-change=\"onChange()\"\n        class=\"gf-form-input width-10\"\n      />\n      <gf-form-dropdown\n        ng-if=\"field.type === 'dropdown'\"\n        model=\"target.queries[field.key]\"\n        allow-custom=\"true\"\n        lookup-text=\"true\"\n        get-options=\"getDropdown(field.key)\"\n        on-change=\"onChange()\"\n        css-class=\"min-width-10\"\n      ></gf-form-dropdown>\n      <multi-condition\n        ng-if=\"field.type === 'inputmulti'\"\n        type=\"'input'\"\n        value=\"target.queries[field.key]\"\n        on-change=\"onChange()\"\n      ></multi-condition>\n      <multi-condition\n        ng-if=\"field.type === 'dropdownmulti'\"\n        type=\"'dropdown'\"\n        value=\"target.queries[field.key]\"\n        on-change=\"onChange()\"\n        get-options=\"getDropdown(field.key)\"\n      ></multi-condition>\n      <custom-select-dropdown\n        ng-if=\"field.type === 'select'\"\n        value=\"target.queries[field.key]\"\n        options=\"field.list\"\n        multiple=\"field.multiple || false\"\n        on-change=\"onChange()\"\n      ></custom-select-dropdown>\n    </div>\n  </div>\n</div>\n\n<div class=\"gf-form-inline\" ng-if=\"target.instance\">\n  <div class=\"gf-form\">\n    <label class=\"gf-form-label query-keyword width-9\">\n      Replica\n    </label>\n    <div class=\"gf-form-select-wrapper gf-form-select-wrapper--caret-indent\">\n      <gf-form-dropdown model=\"target.replica\" allow-custom=\"true\" lookup-text=\"true\" get-options=\"getExtraDropdown(target, 'replica')\"\n        on-change=\"onRefresh()\" css-class=\"min-width-10\">\n      </gf-form-dropdown>\n    </div>\n  </div>\n</div>\n\n<div class=\"gf-form-inline\" ng-if=\"target.replica\">\n  <div class=\"gf-form\">\n    <label class=\"gf-form-label query-keyword width-9\">\n      Node\n    </label>\n    <div class=\"gf-form-select-wrapper gf-form-select-wrapper--caret-indent\">\n      <gf-form-dropdown model=\"target.node\" allow-custom=\"true\" lookup-text=\"true\" get-options=\"getExtraDropdown(target, 'node')\"\n        on-change=\"onRefresh()\" css-class=\"min-width-10\">\n      </gf-form-dropdown>\n    </div>\n  </div>\n</div>\n";
function mongodbQuery() {
  return {
    template: template,
    controller: MongoDBQueryCtrl,
    restrict: 'E',
    scope: {
      target: '=',
      showDetail: '=',
      region: '=',
      datasource: '=',
      onRefresh: '&',
      onChange: '&'
    },
    link: function link(scope, element, attrs) {
      scope.$watch('target.instance', function (newValue, oldValue) {
        var _a;

        (_a = scope.onInstanceChange) === null || _a === void 0 ? void 0 : _a.call(scope, newValue, oldValue);
      });
    }
  };
}
grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0___default.a.directive('mongodbQuery', mongodbQuery);

/***/ }),

/***/ "./datasource/tc_monitor/mongodb/query_def.ts":
/*!****************************************************!*\
  !*** ./datasource/tc_monitor/mongodb/query_def.ts ***!
  \****************************************************/
/*! exports provided: default, MONGODBFieldsDescriptor, MONGODBInvalidDemensions, MONGODBInstanceAliasList, templateQueryIdMap, queryMonitorExtraConfg, MONGODBGetInstanceQueryParams */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MONGODBFieldsDescriptor", function() { return MONGODBFieldsDescriptor; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MONGODBInvalidDemensions", function() { return MONGODBInvalidDemensions; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MONGODBInstanceAliasList", function() { return MONGODBInstanceAliasList; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "templateQueryIdMap", function() { return templateQueryIdMap; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "queryMonitorExtraConfg", function() { return queryMonitorExtraConfg; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MONGODBGetInstanceQueryParams", function() { return GetInstanceQueryParams; });
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lodash */ "lodash");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__);
var __assign = undefined && undefined.__assign || function () {
  __assign = Object.assign || function (t) {
    for (var s, i = 1, n = arguments.length; i < n; i++) {
      s = arguments[i];

      for (var p in s) {
        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
      }
    }

    return t;
  };

  return __assign.apply(this, arguments);
};


var InstanceTypes = [{
  text: '所有实例',
  value: 0
}, {
  text: '正式实例',
  value: 1
}, {
  text: '临时实例',
  value: 2
}, {
  text: '只读实例',
  value: 3
}, {
  text: '正式，只读，灾备实例',
  value: -1
}];
var ClusterTypes = [{
  text: '副本集实例',
  value: 0
}, {
  text: '分片实例',
  value: 1
}, {
  text: '所有实例',
  value: -1
}];
var Status = [{
  text: '待初始化',
  value: 0
}, {
  text: '流程执行中',
  value: 1
}, {
  text: '实例有效',
  value: 2
}, {
  text: '实例已过期',
  value: -2
}];
var PayMode = [{
  text: '按量计费',
  value: 0
}, {
  text: '包年包月',
  value: 1
}, {
  text: '按量包年包月计费',
  value: -1
}];
var OrderBy = [{
  text: 'ProjectId',
  value: 'ProjectId'
}, {
  text: 'InstanceName',
  value: 'InstanceName'
}, {
  text: 'CreateTime',
  value: 'CreateTime'
}];
var OrderByType = [{
  text: '升序',
  value: 'ASC'
}, {
  text: '降序',
  value: 'DESC'
}];
var MongoDBFields = {
  InstanceIds: [],
  InstanceType: {},
  ClusterType: {},
  Status: [],
  VpcId: '',
  SubnetId: '',
  PayMode: {},
  Limit: 20,
  Offset: 0,
  OrderBy: '',
  OrderByType: ''
};
var MONGODBFieldsDescriptor = [{
  key: 'Offset',
  enDescriptor: 'Offset',
  cnDescriptor: '偏移量, 例如Offset=20&Limit=20 返回第 20 到 40 项',
  link: '',
  type: 'inputnumber',
  min: 0
}, {
  key: 'Limit',
  enDescriptor: 'Limit',
  cnDescriptor: '单次请求返回的数量，默认为20，最小值为1，最大值为100',
  link: '',
  type: 'inputnumber',
  min: 1,
  max: 100
}, {
  key: 'InstanceIds',
  enDescriptor: 'InstancesIds',
  cnDescriptor: '实例名称',
  type: 'inputmulti'
}, {
  key: 'InstanceType',
  enDescriptor: 'InstanceType',
  cnDescriptor: '实例类型',
  link: '',
  type: 'select',
  list: InstanceTypes
}, {
  key: 'ClusterType',
  enDescriptor: 'ClusterType',
  cnDescriptor: '集群类型',
  link: '',
  type: 'select',
  list: ClusterTypes
}, {
  key: 'Status',
  enDescriptor: 'Status',
  cnDescriptor: '实例状态',
  link: '',
  multiple: true,
  type: 'select',
  list: Status
}, {
  key: 'VpcId',
  enDescriptor: 'VpcId',
  cnDescriptor: '私有网络的ID',
  link: '',
  type: 'input'
}, {
  key: 'SubnetId',
  enDescriptor: 'SubnetId',
  cnDescriptor: '私有网络的子网ID，基础网络则不传该参数。入参设置该参数的同时，必须设置相应的VpcId',
  link: '',
  type: 'input'
}, {
  key: 'PayMode',
  enDescriptor: 'PayMode',
  cnDescriptor: '付费类型',
  link: '',
  type: 'select',
  list: PayMode
}, {
  key: 'OrderBy',
  enDescriptor: 'OrderBy',
  cnDescriptor: '排序字段',
  link: '',
  type: 'select',
  list: OrderBy
}, {
  key: 'OrderByType',
  enDescriptor: 'OrderByType',
  cnDescriptor: '排序方式',
  link: '',
  type: 'select',
  list: OrderByType
}];
var MONGODB_STATE = {
  region: '',
  metricName: '',
  metricUnit: '',
  period: undefined,
  dimensionObject: null,
  instance: '',
  instanceAlias: 'InstanceId',
  queries: __assign({}, MongoDBFields)
};

function GetInstanceQueryParams(queries) {
  if (queries === void 0) {
    queries = {};
  }

  var params = {};

  if (!lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isEmpty(queries)) {
    params.Limit = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(queries, 'Limit', 20) || 20;
    params.Offset = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(queries, 'Offset', 0) || 0;
    queries = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.omit(queries, ['Offset', 'Limit']);

    lodash__WEBPACK_IMPORTED_MODULE_0___default.a.forEach(queries, function (item, key) {
      if (lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isArray(item)) {
        item = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.compact(item);

        if (item.length > 0) {
          params[key] = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.uniq(item);
        }
      } else if (lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isObject(item)) {
        // select 单选
        if (lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isNumber(lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(item, 'value', undefined)) || !lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isEmpty(lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(item, 'value', undefined))) {
          params[key] = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(item, 'value');
        }
      } else if (lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isNumber(item) || !lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isEmpty(item)) {
        params[key] = item;
      }
    });
  }

  return params;
}

var MONGODBInstanceAliasList = ['InstanceId', 'InstanceName'];
var MONGODBInvalidDemensions = {
  target: 'InstanceId'
};
var templateQueryIdMap = {
  instance: 'InstanceId',
  replica: 'ReplicaSetId'
};
var queryMonitorExtraConfg = {
  Replica: {
    dim_KeyInStorage: 'ReplicaSets',
    dim_KeyInTarget: 'replica',
    dim_KeyInMap: 'ReplicaSetId',
    dim_KeyInIns: 'ReplicaSetId'
  },
  Node: {
    dim_KeyInStorage: 'ReplicaNodeSets',
    dim_KeyInTarget: 'node',
    dim_KeyInMap: 'NodeId',
    dim_KeyInIns: 'NodeId'
  }
};
/* harmony default export */ __webpack_exports__["default"] = (MONGODB_STATE);


/***/ }),

/***/ "./datasource/tc_monitor/mr/datasource.ts":
/*!************************************************!*\
  !*** ./datasource/tc_monitor/mr/datasource.ts ***!
  \************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _common_constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../common/constants */ "./datasource/common/constants.ts");
/* harmony import */ var _common_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../common/utils */ "./datasource/common/utils.ts");
/* harmony import */ var _base_datasource__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../_base/datasource */ "./datasource/tc_monitor/_base/datasource.ts");
/* harmony import */ var _query_def__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./query_def */ "./datasource/tc_monitor/mr/query_def.ts");
/* harmony import */ var _common_datasourceStorage__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../common/datasourceStorage */ "./datasource/common/datasourceStorage.ts");
var __extends = undefined && undefined.__extends || function () {
  var _extendStatics = function extendStatics(d, b) {
    _extendStatics = Object.setPrototypeOf || {
      __proto__: []
    } instanceof Array && function (d, b) {
      d.__proto__ = b;
    } || function (d, b) {
      for (var p in b) {
        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];
      }
    };

    return _extendStatics(d, b);
  };

  return function (d, b) {
    if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");

    _extendStatics(d, b);

    function __() {
      this.constructor = d;
    }

    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();

var __assign = undefined && undefined.__assign || function () {
  __assign = Object.assign || function (t) {
    for (var s, i = 1, n = arguments.length; i < n; i++) {
      s = arguments[i];

      for (var p in s) {
        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
      }
    }

    return t;
  };

  return __assign.apply(this, arguments);
};

var __awaiter = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {
  function adopt(value) {
    return value instanceof P ? value : new P(function (resolve) {
      resolve(value);
    });
  }

  return new (P || (P = Promise))(function (resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }

    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }

    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }

    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};

var __generator = undefined && undefined.__generator || function (thisArg, body) {
  var _ = {
    label: 0,
    sent: function sent() {
      if (t[0] & 1) throw t[1];
      return t[1];
    },
    trys: [],
    ops: []
  },
      f,
      y,
      t,
      g;
  return g = {
    next: verb(0),
    "throw": verb(1),
    "return": verb(2)
  }, typeof Symbol === "function" && (g[Symbol.iterator] = function () {
    return this;
  }), g;

  function verb(n) {
    return function (v) {
      return step([n, v]);
    };
  }

  function step(op) {
    if (f) throw new TypeError("Generator is already executing.");

    while (_) {
      try {
        if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
        if (y = 0, t) op = [op[0] & 2, t.value];

        switch (op[0]) {
          case 0:
          case 1:
            t = op;
            break;

          case 4:
            _.label++;
            return {
              value: op[1],
              done: false
            };

          case 5:
            _.label++;
            y = op[1];
            op = [0];
            continue;

          case 7:
            op = _.ops.pop();

            _.trys.pop();

            continue;

          default:
            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
              _ = 0;
              continue;
            }

            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
              _.label = op[1];
              break;
            }

            if (op[0] === 6 && _.label < t[1]) {
              _.label = t[1];
              t = op;
              break;
            }

            if (t && _.label < t[2]) {
              _.label = t[2];

              _.ops.push(op);

              break;
            }

            if (t[2]) _.ops.pop();

            _.trys.pop();

            continue;
        }

        op = body.call(thisArg, _);
      } catch (e) {
        op = [6, e];
        y = 0;
      } finally {
        f = t = 0;
      }
    }

    if (op[0] & 5) throw op[1];
    return {
      value: op[0] ? op[1] : void 0,
      done: true
    };
  }
};







var MrHdfsDatasource =
/** @class */
function (_super) {
  __extends(MrHdfsDatasource, _super);

  function MrHdfsDatasource() {
    var _this = _super !== null && _super.apply(this, arguments) || this;

    _this.InvalidDimensions = _query_def__WEBPACK_IMPORTED_MODULE_3__["InvalidDemensions"];
    _this.InstanceAliasList = _query_def__WEBPACK_IMPORTED_MODULE_3__["InstanceAliasList"];
    _this.templateQueryIdMap = _query_def__WEBPACK_IMPORTED_MODULE_3__["templateQueryIdMap"];
    _this.extrasAlias = [];
    _this.keyInStorage = _query_def__WEBPACK_IMPORTED_MODULE_3__["keyInStorage"];
    _this.queryMonitorExtraConfg = _query_def__WEBPACK_IMPORTED_MODULE_3__["queryMonitorExtraConfg"];
    _this.InstanceReqConfig = {
      service: 'emr',
      action: 'DescribeInstances',
      responseField: 'ClusterList',
      interceptor: {
        request: function request(params) {
          return __assign(__assign({}, params), {
            DisplayStrategy: params.DisplayStrategy || 'monitorManage',
            ProjectId: params.ProjectId || -1
          });
        },
        response: function response(data) {
          return data.map(function (_a) {
            var ClusterId = _a.ClusterId,
                ClusterName = _a.ClusterName;
            return {
              ClusterId: ClusterId,
              ClusterName: ClusterName
            };
          });
        }
      }
    };
    return _this;
  }

  MrHdfsDatasource.prototype.fetchAllNodes = function (region, params) {
    return __awaiter(this, void 0, void 0, function () {
      var serviceInfo, rs;

      var _this = this;

      return __generator(this, function (_a) {
        switch (_a.label) {
          case 0:
            serviceInfo = Object(_common_constants__WEBPACK_IMPORTED_MODULE_0__["GetServiceAPIInfo"])(region, 'emr');
            return [4
            /*yield*/
            , Object(_common_utils__WEBPACK_IMPORTED_MODULE_1__["fetchAllFactory"])(function (data) {
              return _this.doRequest({
                url: _this.url + serviceInfo.path,
                data: data
              }, serviceInfo.service, {
                region: region,
                action: 'DescribeClusterNodes'
              });
            }, __assign(__assign({}, params), {
              isOffsetPage: true
            }), 'NodeList')];

          case 1:
            rs = _a.sent(); // return rs[0].map((item) => ({ text: item.Ip, value: item.Ip }));

            return [2
            /*return*/
            , rs[0]];
        }
      });
    });
  };

  MrHdfsDatasource.prototype.fetchMetricData = function (action, region, instance) {
    return __awaiter(this, void 0, void 0, function () {
      var result, _a, resultT;

      return __generator(this, function (_b) {
        switch (_b.label) {
          case 0:
            _a = action;

            switch (_a) {
              case 'DescribeClusterNodes':
                return [3
                /*break*/
                , 1];
            }

            return [3
            /*break*/
            , 4];

          case 1:
            return [4
            /*yield*/
            , this.fetchAllNodes(region, {
              InstanceId: instance.ClusterId,
              NodeFlag: 'all'
            })];

          case 2:
            resultT = _b.sent();
            result = resultT.map(function (item) {
              item._InstanceAliasValue = item[_query_def__WEBPACK_IMPORTED_MODULE_3__["templateQueryIdMap"].node];
              return {
                text: item[_query_def__WEBPACK_IMPORTED_MODULE_3__["templateQueryIdMap"].node],
                value: item[_query_def__WEBPACK_IMPORTED_MODULE_3__["templateQueryIdMap"].node]
              };
            });
            return [4
            /*yield*/
            , _common_datasourceStorage__WEBPACK_IMPORTED_MODULE_4__["default"].setExtraStorage(this.service, this.keyInStorage.node, resultT)];

          case 3:
            _b.sent();

            return [2
            /*return*/
            , result];

          case 4:
            return [2
            /*return*/
            , []];
        }
      });
    });
  };

  return MrHdfsDatasource;
}(_base_datasource__WEBPACK_IMPORTED_MODULE_2__["BaseDatasource"]);

/* harmony default export */ __webpack_exports__["default"] = (MrHdfsDatasource);

/***/ }),

/***/ "./datasource/tc_monitor/mr/query.ts":
/*!*******************************************!*\
  !*** ./datasource/tc_monitor/mr/query.ts ***!
  \*******************************************/
/*! exports provided: MrQueryCtrl, mrQuery */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MrQueryCtrl", function() { return MrQueryCtrl; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "mrQuery", function() { return mrQuery; });
/* harmony import */ var _query_def__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./query_def */ "./datasource/tc_monitor/mr/query_def.ts");
/* harmony import */ var grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! grafana/app/core/core_module */ "grafana/app/core/core_module");
/* harmony import */ var grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_1__);
var __awaiter = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {
  function adopt(value) {
    return value instanceof P ? value : new P(function (resolve) {
      resolve(value);
    });
  }

  return new (P || (P = Promise))(function (resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }

    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }

    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }

    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};

var __generator = undefined && undefined.__generator || function (thisArg, body) {
  var _ = {
    label: 0,
    sent: function sent() {
      if (t[0] & 1) throw t[1];
      return t[1];
    },
    trys: [],
    ops: []
  },
      f,
      y,
      t,
      g;
  return g = {
    next: verb(0),
    "throw": verb(1),
    "return": verb(2)
  }, typeof Symbol === "function" && (g[Symbol.iterator] = function () {
    return this;
  }), g;

  function verb(n) {
    return function (v) {
      return step([n, v]);
    };
  }

  function step(op) {
    if (f) throw new TypeError("Generator is already executing.");

    while (_) {
      try {
        if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
        if (y = 0, t) op = [op[0] & 2, t.value];

        switch (op[0]) {
          case 0:
          case 1:
            t = op;
            break;

          case 4:
            _.label++;
            return {
              value: op[1],
              done: false
            };

          case 5:
            _.label++;
            y = op[1];
            op = [0];
            continue;

          case 7:
            op = _.ops.pop();

            _.trys.pop();

            continue;

          default:
            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
              _ = 0;
              continue;
            }

            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
              _.label = op[1];
              break;
            }

            if (op[0] === 6 && _.label < t[1]) {
              _.label = t[1];
              t = op;
              break;
            }

            if (t && _.label < t[2]) {
              _.label = t[2];

              _.ops.push(op);

              break;
            }

            if (t[2]) _.ops.pop();

            _.trys.pop();

            continue;
        }

        op = body.call(thisArg, _);
      } catch (e) {
        op = [6, e];
        y = 0;
      } finally {
        f = t = 0;
      }
    }

    if (op[0] & 5) throw op[1];
    return {
      value: op[0] ? op[1] : void 0,
      done: true
    };
  }
};



var ExtraFields = [{
  label: 'NodeIP',
  field: 'nodeIP'
}];

var MrQueryCtrl =
/** @class */
function () {
  MrQueryCtrl.$inject = ["$scope", "$rootScope"];

  /** @ngInject */
  function MrQueryCtrl($scope, $rootScope) {
    var _this = this;

    $scope.init = function () {
      $scope.InstanceQueryDescriptor = _query_def__WEBPACK_IMPORTED_MODULE_0__["InstanceQueryDescriptor"];
    };

    $scope.getDropdown = function (field) {
      switch (field) {
        default:
          return [];
      }
    }; // 各个实例下的订阅，由于不想每次都重复发请求，所以这里做了一层缓存，数据结构为{ [instanceId]: {   } }


    $scope.cacheMap = {};

    $scope.getExtraFields = function () {
      var _a;

      return Object.keys((_a = $scope.dims) !== null && _a !== void 0 ? _a : {}).some(function (item) {
        return item.startsWith('host4');
      }) ? ExtraFields : []; // return ExtraFields;
    };

    $scope.getInstanceId = function () {
      var instance = $scope.target.instance;
      instance = $scope.datasource.getServiceFn('mrHDFS', 'getVariable')(instance);

      if (!instance) {
        return '';
      }

      try {
        instance = JSON.parse(instance).ClusterId;
      } catch (error) {// console.log();
      }

      return instance;
    };

    $scope.onExtraFieldChange = function (field) {
      $scope.onRefresh();
    };

    $scope.getExtraDropdown = function (target, field) {
      return __awaiter(_this, void 0, void 0, function () {
        var InstanceId, data, region, fetcher, dataT;
        return __generator(this, function (_a) {
          switch (_a.label) {
            case 0:
              if (!(field === 'nodeIP')) return [3
              /*break*/
              , 3];
              InstanceId = $scope.getInstanceId();
              data = $scope.cacheMap[InstanceId];
              if (!!data) return [3
              /*break*/
              , 2];
              region = $scope.datasource.getServiceFn('mrHDFS', 'getVariable')(target.region);
              fetcher = $scope.datasource.getServiceFn('mrHDFS', 'fetchAllNodes');
              return [4
              /*yield*/
              , fetcher(region, {
                InstanceId: InstanceId,
                NodeFlag: 'all'
              })];

            case 1:
              dataT = _a.sent();
              data = dataT.map(function (item) {
                item._InstanceAliasValue = item[_query_def__WEBPACK_IMPORTED_MODULE_0__["templateQueryIdMap"].node];
                return {
                  text: item[_query_def__WEBPACK_IMPORTED_MODULE_0__["templateQueryIdMap"].node],
                  value: JSON.stringify(item)
                };
              });
              _a.label = 2;

            case 2:
              // 缓存
              $scope.cacheMap[InstanceId] = data;
              return [2
              /*return*/
              , data];

            case 3:
              return [2
              /*return*/
              , []];
          }
        });
      });
    };

    $scope.init();
  }

  return MrQueryCtrl;
}();


var template = "\n<div>\n<div class=\"tc-sub-params\" ng-if=\"showDetail\">\n  <label class=\"gf-form-label tc-info-label\">\n    Functions are queried by following params.\n    <a target=\"_blank\" style=\"text-decoration:underline;color:#006eff;font-size:medium\" href=\"https://cloud.tencent.com/document/api/589/34266\">Click here to get API doc.</a>\n  </label>\n  <div class=\"gf-form-inline\" ng-repeat=\"field in InstanceQueryDescriptor\">\n    <div class=\"gf-form\">\n      <label class=\"gf-form-label width-14\">\n        {{ field.key }}\n        <info-popover mode=\"right-normal\">\n          {{ field.cnDescriptor }}\n          <a target=\"_blank\" href=\"{{field.link}}\" ng-if=\"field.link\">Click here for more information.</a>\n        </info-popover>\n      </label>\n      <input\n        ng-if=\"field.type === 'inputnumber'\"\n        style=\"margin-right:2px\"\n        type=\"number\"\n        ng-model=\"target.queries[field.key]\"\n        ng-change=\"onChange()\"\n        class=\"gf-form-input width-10\"\n        ng-min=\"field.min\"\n        ng-max=\"field.max\"\n      />\n      <input\n        ng-if=\"field.type === 'input'\"\n        style=\"margin-right:2px\"\n        type=\"text\"\n        ng-model=\"target.queries[field.key]\"\n        ng-change=\"onChange()\"\n        class=\"gf-form-input width-10\"\n      />\n      <multi-condition\n        ng-if=\"field.type === 'inputmulti'\"\n        type=\"'input'\"\n        value=\"target.queries[field.key]\"\n        on-change=\"onChange()\"\n      ></multi-condition>\n      <multi-condition\n        ng-if=\"field.type === 'dropdownmulti'\"\n        type=\"'dropdown'\"\n        value=\"target.queries[field.key]\"\n        on-change=\"onChange()\"\n        get-options=\"getDropdown(field.key)\"\n      ></multi-condition>\n      <custom-select-dropdown\n        ng-if=\"field.type === 'select'\"\n        value=\"target.queries[field.key]\"\n        options=\"field.list\"\n        multiple=\"field.multiple || false\"\n        on-change=\"onChange()\"\n      ></custom-select-dropdown>\n    </div>\n  </div>\n</div>\n<!-- \u4E3B\u9898\u7684ui -->\n  <div ng-if=\"target.instance\">\n    <div class=\"gf-form-inline\" ng-repeat=\"extra in getExtraFields()\">\n      <div class=\"gf-form\">\n        <label class=\"gf-form-label query-keyword width-9\">{{extra.label}}</label>\n        <div class=\"gf-form-select-wrapper gf-form-select-wrapper--caret-indent\">\n\n          <gf-form-dropdown model=\"target[extra.field]\" allow-custom=\"false\" get-options=\"getExtraDropdown(target, extra.field)\"\n            on-change=\"onExtraFieldChange(extra.field)\" css-class=\"min-width-10\">\n          </gf-form-dropdown>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  </div>\n";
function mrQuery() {
  return {
    template: template,
    controller: MrQueryCtrl,
    restrict: 'E',
    scope: {
      target: '=',
      showDetail: '=',
      region: '=',
      datasource: '=',
      getDropdownOptions: '&',
      onChange: '&',
      onRefresh: '&',
      dims: '='
    }
  };
}
grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_1___default.a.directive('mrQuery', mrQuery);

/***/ }),

/***/ "./datasource/tc_monitor/mr/query_def.ts":
/*!***********************************************!*\
  !*** ./datasource/tc_monitor/mr/query_def.ts ***!
  \***********************************************/
/*! exports provided: InstanceQueryDescriptor, InvalidDemensions, templateQueryIdMap, InstanceAliasList, GetInstanceQueryParams, queryMonitorExtraConfg, keyInStorage, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "InstanceQueryDescriptor", function() { return InstanceQueryDescriptor; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "InvalidDemensions", function() { return InvalidDemensions; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "templateQueryIdMap", function() { return templateQueryIdMap; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "InstanceAliasList", function() { return InstanceAliasList; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GetInstanceQueryParams", function() { return GetInstanceQueryParams; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "queryMonitorExtraConfg", function() { return queryMonitorExtraConfg; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "keyInStorage", function() { return keyInStorage; });
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lodash */ "lodash");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__);

var InstanceQueryDescriptor = [{
  key: 'Offset',
  enDescriptor: 'Offset',
  cnDescriptor: '偏移量, 例如Offset=20&Limit=20 返回第 20 到 40 项',
  link: '',
  type: 'inputnumber',
  min: 0
}, {
  key: 'Limit',
  enDescriptor: 'Limit',
  cnDescriptor: '单次请求返回的数量，默认为10，最小值为1，最大值为100',
  link: '',
  type: 'inputnumber',
  min: 1,
  max: 100
}, {
  key: 'InstanceIds',
  enDescriptor: 'InstanceIds',
  cnDescriptor: '按照一个或者多个实例ID查询。实例ID形如: emr-xxxxxxxx ',
  link: '',
  type: 'inputmulti'
}, {
  key: 'OrderField',
  enDescriptor: 'OrderBy',
  cnDescriptor: '排序字段',
  link: '',
  type: 'select',
  list: [{
    text: '实例ID',
    value: 'clusterId'
  }, {
    text: '创建时间',
    value: 'addTime'
  }, {
    text: '状态',
    value: 'status'
  }]
}, {
  key: 'Asc',
  enDescriptor: 'Order Direction',
  cnDescriptor: '排序方式',
  link: '',
  type: 'select',
  list: [{
    text: '降序',
    value: 0
  }, {
    text: '升序',
    value: 1
  }]
}, {
  key: 'ProjectId',
  enDescriptor: 'ProjectId',
  cnDescriptor: '实例所属项目ID',
  link: '',
  type: 'inputnumber'
}, {
  key: 'DisplayStrategy',
  enDescriptor: 'DisplayStrategy',
  cnDescriptor: '集群筛选策略',
  link: '',
  type: 'select',
  list: [{
    text: '未销毁的实例',
    value: 'clusterList'
  }, {
    text: '正常运行的实例',
    value: 'monitorManage'
  }]
}];

function GetInstanceQueryParams(queries) {
  if (queries === void 0) {
    queries = {};
  }

  var params = {};

  if (!lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isEmpty(queries)) {
    params.Limit = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(queries, 'Limit', 20) || 20;
    params.Offset = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(queries, 'Offset', 0) || 0;
    queries = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.omit(queries, ['Offset', 'Limit']);

    lodash__WEBPACK_IMPORTED_MODULE_0___default.a.forEach(queries, function (item, key) {
      if (lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isArray(item)) {
        item = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.compact(item);

        if (item.length > 0) {
          params[key] = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.uniq(item);
        }
      } else if (lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isObject(item)) {
        if (lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isNumber(lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(item, 'value', undefined)) || !lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isEmpty(lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(item, 'value', undefined))) {
          params[key] = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(item, 'value');
        }
      } else if (lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isNumber(item) || !lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isEmpty(item)) {
        params[key] = item;
      }
    });
  }

  return params;
} // 向实例里面塞dimensions对应的值，dimension中的key对应到实例中的key


var InvalidDemensions = new Proxy({}, {
  get: function get(target, k, receiver) {
    if (typeof k === 'string') {
      if (k.startsWith('id4')) return 'ClusterId'; // id4****

      if (k.startsWith('host4')) return 'Ip'; // host4***
    }

    return Reflect.get(target, k, receiver);
  },
  has: function has(target, propKey) {
    return true;
  }
});
var templateQueryIdMap = {
  instance: 'ClusterId',
  node: 'Ip'
}; // 需要缓存到storage的内容的key列表

var keyInStorage = {
  node: 'nodeIP'
};
/**
 * 如果有InstanceId额外的维度，原则上都需要传入此map结构配置
 *
 * `key` 的含义：
 *   经过InvalidDemensions处理后的string。topicId => TopicId。
 *   否则认为指标中维度正确，和指标中维度字段保持一致，即topicId
 *
 * `value` 的含义：
 *   @param {1} dim_KeyInStorage  指标中维度dimension对应的storage中的key，获取缓存列表，sourceMapList、
 *   @param {2} dim_KeyInTarget   通过getVariable方法获取变量中选中项。比如ListnerId为Lis-xxxx；即：STATE中的key。
 *                                  默认取通过InvalidDemsion处理后的key
 *   @param {3} dim_KeyInMap      保存在模板变量value比如（监听器ID）源自sourceMapList（接口返回内容）的哪个key（ListenerId）。
 *                                  即：templateQueryIdMap中内容。
 *                                  联合上面 2 的内容筛选出原始sourceMap
 */

var queryMonitorExtraConfg = {
  Ip: {
    dim_KeyInStorage: keyInStorage.node,
    dim_KeyInTarget: 'nodeIP',
    dim_KeyInMap: templateQueryIdMap.node
  }
}; // 与名称挂钩的变量

var InstanceAliasList = ['ClusterId', 'ClusterName'];
 // 界面状态模型，default

/* harmony default export */ __webpack_exports__["default"] = ({
  region: '',
  metricName: '',
  metricUnit: '',
  period: undefined,
  dimensionObject: null,
  instance: '',
  instanceAlias: 'ClusterId',
  nodeIP: '',
  queries: {
    Offset: 0,
    Limit: 10,
    DisplayStrategy: '',
    OrderBy: {},
    Order: {},
    InstanceIds: [],
    ProjectId: -1,
    OrderField: '',
    Asc: ''
  }
});

/***/ }),

/***/ "./datasource/tc_monitor/nat_gateway/datasource.ts":
/*!*********************************************************!*\
  !*** ./datasource/tc_monitor/nat_gateway/datasource.ts ***!
  \*********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _query_def__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./query_def */ "./datasource/tc_monitor/nat_gateway/query_def.ts");
/* harmony import */ var _base_datasource__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../_base/datasource */ "./datasource/tc_monitor/_base/datasource.ts");
var __extends = undefined && undefined.__extends || function () {
  var _extendStatics = function extendStatics(d, b) {
    _extendStatics = Object.setPrototypeOf || {
      __proto__: []
    } instanceof Array && function (d, b) {
      d.__proto__ = b;
    } || function (d, b) {
      for (var p in b) {
        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];
      }
    };

    return _extendStatics(d, b);
  };

  return function (d, b) {
    if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");

    _extendStatics(d, b);

    function __() {
      this.constructor = d;
    }

    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();




var NATGATEWAYDatasource =
/** @class */
function (_super) {
  __extends(NATGATEWAYDatasource, _super);

  function NATGATEWAYDatasource(instanceSettings, backendSrv, templateSrv) {
    var _this = _super.call(this, instanceSettings, backendSrv, templateSrv) || this;

    _this.Namespace = 'QCE/NAT_GATEWAY';
    _this.InstanceAliasList = _query_def__WEBPACK_IMPORTED_MODULE_0__["NATGATEWAYInstanceAliasList"];
    _this.InvalidDimensions = _query_def__WEBPACK_IMPORTED_MODULE_0__["NATInvalidDemensions"];
    _this.templateQueryIdMap = {
      instance: 'NatGatewayId'
    };
    _this.InstanceReqConfig = {
      service: 'vpc',
      action: 'DescribeNatGateways',
      responseField: 'NatGatewaySet'
    };
    return _this;
  }

  return NATGATEWAYDatasource;
}(_base_datasource__WEBPACK_IMPORTED_MODULE_1__["BaseDatasource"]);

/* harmony default export */ __webpack_exports__["default"] = (NATGATEWAYDatasource);

/***/ }),

/***/ "./datasource/tc_monitor/nat_gateway/query.ts":
/*!****************************************************!*\
  !*** ./datasource/tc_monitor/nat_gateway/query.ts ***!
  \****************************************************/
/*! exports provided: NatGatewayQueryCtrl, natGatewayQuery */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "NatGatewayQueryCtrl", function() { return NatGatewayQueryCtrl; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "natGatewayQuery", function() { return natGatewayQuery; });
/* harmony import */ var grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! grafana/app/core/core_module */ "grafana/app/core/core_module");
/* harmony import */ var grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _query_def__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./query_def */ "./datasource/tc_monitor/nat_gateway/query_def.ts");



var NatGatewayQueryCtrl =
/** @class */
function () {
  NatGatewayQueryCtrl.$inject = ["$scope", "$rootScope"];

  /** @ngInject */
  function NatGatewayQueryCtrl($scope, $rootScope) {
    $scope.init = function () {
      $scope.NATGatewayFilterFieldsDescriptor = _query_def__WEBPACK_IMPORTED_MODULE_1__["NATGatewayFilterFieldsDescriptor"];
    };

    $scope.onChecked = function (srcField, dstField) {
      if ($scope.target.queries[srcField] === true) {
        $scope.target.queries[dstField] = false;
      }

      $scope.onChange();
    };

    $scope.getDropdown = function (field) {
      switch (field) {
        default:
          return [];
      }
    };

    $scope.init();
  }

  return NatGatewayQueryCtrl;
}();


var template = "\n<div class=\"tc-sub-params\" ng-if=\"showDetail\">\n<label class=\"gf-form-label tc-info-label\">\n  Instances are queried by following params.\n  <a target=\"_blank\" style=\"text-decoration:underline;color:#006eff;font-size:medium\" href=\"https://cloud.tencent.com/document/api/215/36034\">Click here to get API doc.</a>\n</label>\n<div class=\"gf-form-inline\">\n  <div class=\"gf-form\">\n    <label class=\"gf-form-label width-14\">\n      Offset\n      <info-popover mode=\"right-normal\">\n        \u504F\u79FB\u91CF, \u4F8B\u5982Offset=20&Limit=20 \u8FD4\u56DE\u7B2C 20 \u5230 40 \u9879\n      </info-popover>\n    </label>\n    <input type=\"number\" ng-model=\"target.queries.Offset\" class=\"gf-form-input width-10\" ng-min=\"0\" ng-change=\"onChange()\">\n  </div>\n</div>\n<div class=\"gf-form-inline\">\n  <div class=\"gf-form\">\n    <label class=\"gf-form-label width-14\">\n      Limit\n      <info-popover mode=\"right-normal\">\n        \u5355\u6B21\u8BF7\u6C42\u8FD4\u56DE\u7684\u6570\u91CF\uFF0C\u9ED8\u8BA4\u4E3A20\uFF0C\u6700\u5C0F\u503C\u4E3A1\uFF0C\u6700\u5927\u503C\u4E3A100\n      </info-popover>\n    </label>\n    <input type=\"number\" ng-model=\"target.queries.Limit\" class=\"gf-form-input width-10\" ng-min=\"1\" ng-max=\"100\" ng-change=\"onChange()\">\n  </div>\n</div>\n<div class=\"gf-form-inline\">\n  <div class=\"gf-form\">\n    <label class=\"gf-form-label width-10\">\n      NatGatewayIds\n      <info-popover mode=\"right-normal\">\n        NAT\u7F51\u5173\u7EDF\u4E00 ID\uFF0C\u53C2\u6570\u4E0D\u652F\u6301\u540C\u65F6\u6307\u5B9A NatGatewayIds \u548C Filters\n      </info-popover>\n    </label>\n    <gf-form-switch class=\"gf-form tc-switch\" label-class=\"width-7\" checked=\"target.queries.instanceIdsChecked\"\n      switch-class=\"max-width-5\" on-change=\"onChecked('instanceIdsChecked', 'filtersChecked')\"></gf-form-switch>\n  </div>\n</div>\n<div class=\"gf-form-inline tc-sub-params\" ng-if=\"target.queries.instanceIdsChecked\">\n  <multi-condition type=\"'input'\" value=\"target.queries.NatGatewayIds\" on-change=\"onChange()\">\n  </multi-condition>\n</div>\n<div class=\"gf-form-inline\">\n  <div class=\"gf-form\">\n    <label class=\"gf-form-label width-10\">\n      Filters\n      <info-popover mode=\"right-normal\">\n        \u8FC7\u6EE4\u6761\u4EF6\uFF0C\u53C2\u6570\u4E0D\u652F\u6301\u540C\u65F6\u6307\u5B9ANatGatewayIds\u548CFilters\n      </info-popover>\n    </label>\n    <gf-form-switch class=\"gf-form tc-switch\" label-class=\"width-7\" checked=\"target.queries.filtersChecked\" switch-class=\"max-width-5\"\n      on-change=\"onChecked('filtersChecked','instanceIdsChecked')\"></gf-form-switch>\n  </div>\n</div>\n<div ng-if=\"target.queries.filtersChecked\" class=\"tc-sub-params\">\n  <div class=\"gf-form-inline\" ng-repeat=\"field in NATGatewayFilterFieldsDescriptor\">\n    <label class=\"gf-form-label width-14\">\n      {{ field.key }}\n      <info-popover mode=\"right-normal\">\n        {{ field.cnDescriptor }}\n        <a target=\"_blank\" href=\"{{field.link}}\" ng-if=\"field.link\">Click here for more information.</a>\n      </info-popover>\n    </label>\n    <multi-condition\n      ng-if=\"field.type === 'dropdownmulti'\"\n      type=\"'dropdown'\"\n      value=\"target.queries.Filters[field.key]\"\n      get-options=\"getDropdown(field.key)\"\n      on-change=\"onChange()\"\n    ></multi-condition>\n    <multi-condition\n      ng-if=\"field.type === 'inputNumbermulti'\"\n      type=\"'inputNumber'\"\n      value=\"target.queries.Filters[field.key]\"\n      maxNum=\"field.max\"\n      minNum=\"field.min\"\n      on-change=\"onChange()\"\n    ></multi-condition>\n    <multi-condition\n      ng-if=\"field.type === 'inputmulti'\"\n      type=\"'input'\"\n      value=\"target.queries.Filters[field.key]\"\n      on-change=\"onChange()\"\n    ></multi-condition>\n    <custom-select-dropdown\n      ng-if=\"field.type === 'select'\"\n      value=\"target.queries.Filters[field.key]\"\n      options=\"field.list\"\n      multiple=\"true\"\n      on-change=\"onChange()\"\n    ></custom-select-dropdown>\n  </div>\n</div>\n\n</div>\n";
function natGatewayQuery() {
  return {
    template: template,
    controller: NatGatewayQueryCtrl,
    restrict: 'E',
    scope: {
      target: '=',
      showDetail: '=',
      region: '=',
      datasource: '=',
      getDropdownOptions: '&',
      onChange: '&'
    }
  };
}
grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0___default.a.directive('natGatewayQuery', natGatewayQuery);

/***/ }),

/***/ "./datasource/tc_monitor/nat_gateway/query_def.ts":
/*!********************************************************!*\
  !*** ./datasource/tc_monitor/nat_gateway/query_def.ts ***!
  \********************************************************/
/*! exports provided: default, NATGatewayFilterFieldsDescriptor, NATGATEWAYInstanceAliasList, templateQueryIdMap, NATInvalidDemensions, NATGATEWAYGetInstanceQueryParams */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "NATGatewayFilterFieldsDescriptor", function() { return NATGatewayFilterFieldsDescriptor; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "NATGATEWAYInstanceAliasList", function() { return NATGATEWAYInstanceAliasList; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "templateQueryIdMap", function() { return templateQueryIdMap; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "NATInvalidDemensions", function() { return NATInvalidDemensions; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "NATGATEWAYGetInstanceQueryParams", function() { return GetInstanceQueryParams; });
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lodash */ "lodash");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__);
var __assign = undefined && undefined.__assign || function () {
  __assign = Object.assign || function (t) {
    for (var s, i = 1, n = arguments.length; i < n; i++) {
      s = arguments[i];

      for (var p in s) {
        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
      }
    }

    return t;
  };

  return __assign.apply(this, arguments);
};


var NATGATEWAYInstanceAliasList = ['NatGatewayId', 'NatGatewayName'];
var NATGatewayFilterFields = {
  'nat-gateway-id': [],
  'nat-gateway-name': [],
  'vpc-id': []
};
var NATGatewayFilterFieldsDescriptor = [{
  key: 'nat-gateway-id',
  enDescriptor: 'NatGateway ID',
  cnDescriptor: 'NAT网关统一 ID',
  link: '',
  type: 'inputmulti'
}, {
  key: 'nat-gateway-name',
  enDescriptor: 'NatGateway Name',
  cnDescriptor: 'NatGateway Name',
  link: '',
  type: 'inputmulti'
}, {
  key: 'vpc-id',
  enDescriptor: 'VPC ID',
  cnDescriptor: '私有网络 ID',
  link: '',
  type: 'inputmulti'
}];
var NATGATEWAY_STATE = {
  region: '',
  metricName: '',
  metricUnit: '',
  period: undefined,
  dimensionObject: null,
  instance: '',
  instanceAlias: 'NatGatewayId',
  queries: {
    Limit: 20,
    Offset: 0,
    instanceIdsChecked: false,
    filtersChecked: false,
    NatGatewayIds: [''],
    Filters: __assign({}, NATGatewayFilterFields)
  }
};

function GetInstanceQueryParams(queries) {
  if (queries === void 0) {
    queries = {};
  }

  var params = {};

  if (!lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isEmpty(queries)) {
    params.Limit = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(queries, 'Limit', 20) || 20;
    params.Offset = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(queries, 'Offset', 0) || 0;

    if (queries.instanceIdsChecked) {
      if (lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isArray(queries.NatGatewayIds)) {
        var NatGatewayIds = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.compact(queries.NatGatewayIds);

        if (lodash__WEBPACK_IMPORTED_MODULE_0___default.a.uniq(NatGatewayIds).length > 0) {
          params.InstanceIds = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.uniq(NatGatewayIds).slice(0, 100);
        }
      }
    } else if (queries.filtersChecked) {
      var Filters_1 = [];

      lodash__WEBPACK_IMPORTED_MODULE_0___default.a.forEach(queries.Filters, function (item, key) {
        if (Filters_1.length > 9) {
          return;
        }

        if (lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isArray(item)) {
          item = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.compact(item);

          if (item.length > 0) {
            Filters_1.push({
              Name: key,
              Values: lodash__WEBPACK_IMPORTED_MODULE_0___default.a.uniq(item).slice(0, 5)
            });
          }
        } else if (lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isObject(item)) {
          if (!lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isEmpty(lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(item, 'value', []))) {
            Filters_1.push({
              Name: key,
              Values: lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(item, 'value', []).slice(0, 5)
            });
          }
        }
      });

      if (Filters_1.length > 0) {
        params.Filters = Filters_1;
      }
    }
  }

  return params;
}

var templateQueryIdMap = {
  instance: 'NatGatewayId'
};
var NATInvalidDemensions = {
  natId: 'NatGatewayId'
};
/* harmony default export */ __webpack_exports__["default"] = (NATGATEWAY_STATE);


/***/ }),

/***/ "./datasource/tc_monitor/ov_cdn/datasource.ts":
/*!****************************************************!*\
  !*** ./datasource/tc_monitor/ov_cdn/datasource.ts ***!
  \****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _query_def__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./query_def */ "./datasource/tc_monitor/ov_cdn/query_def.ts");
/* harmony import */ var _base_datasource__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../_base/datasource */ "./datasource/tc_monitor/_base/datasource.ts");
var __extends = undefined && undefined.__extends || function () {
  var _extendStatics = function extendStatics(d, b) {
    _extendStatics = Object.setPrototypeOf || {
      __proto__: []
    } instanceof Array && function (d, b) {
      d.__proto__ = b;
    } || function (d, b) {
      for (var p in b) {
        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];
      }
    };

    return _extendStatics(d, b);
  };

  return function (d, b) {
    if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");

    _extendStatics(d, b);

    function __() {
      this.constructor = d;
    }

    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();

var __assign = undefined && undefined.__assign || function () {
  __assign = Object.assign || function (t) {
    for (var s, i = 1, n = arguments.length; i < n; i++) {
      s = arguments[i];

      for (var p in s) {
        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
      }
    }

    return t;
  };

  return __assign.apply(this, arguments);
};

var __awaiter = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {
  function adopt(value) {
    return value instanceof P ? value : new P(function (resolve) {
      resolve(value);
    });
  }

  return new (P || (P = Promise))(function (resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }

    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }

    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }

    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};

var __generator = undefined && undefined.__generator || function (thisArg, body) {
  var _ = {
    label: 0,
    sent: function sent() {
      if (t[0] & 1) throw t[1];
      return t[1];
    },
    trys: [],
    ops: []
  },
      f,
      y,
      t,
      g;
  return g = {
    next: verb(0),
    "throw": verb(1),
    "return": verb(2)
  }, typeof Symbol === "function" && (g[Symbol.iterator] = function () {
    return this;
  }), g;

  function verb(n) {
    return function (v) {
      return step([n, v]);
    };
  }

  function step(op) {
    if (f) throw new TypeError("Generator is already executing.");

    while (_) {
      try {
        if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
        if (y = 0, t) op = [op[0] & 2, t.value];

        switch (op[0]) {
          case 0:
          case 1:
            t = op;
            break;

          case 4:
            _.label++;
            return {
              value: op[1],
              done: false
            };

          case 5:
            _.label++;
            y = op[1];
            op = [0];
            continue;

          case 7:
            op = _.ops.pop();

            _.trys.pop();

            continue;

          default:
            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
              _ = 0;
              continue;
            }

            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
              _.label = op[1];
              break;
            }

            if (op[0] === 6 && _.label < t[1]) {
              _.label = t[1];
              t = op;
              break;
            }

            if (t && _.label < t[2]) {
              _.label = t[2];

              _.ops.push(op);

              break;
            }

            if (t[2]) _.ops.pop();

            _.trys.pop();

            continue;
        }

        op = body.call(thisArg, _);
      } catch (e) {
        op = [6, e];
        y = 0;
      } finally {
        f = t = 0;
      }
    }

    if (op[0] & 5) throw op[1];
    return {
      value: op[0] ? op[1] : void 0,
      done: true
    };
  }
};




var OVCDNDatasource =
/** @class */
function (_super) {
  __extends(OVCDNDatasource, _super);

  function OVCDNDatasource(instanceSettings, backendSrv, templateSrv) {
    var _this = _super.call(this, instanceSettings, backendSrv, templateSrv) || this;

    _this.Namespace = 'QCE/OV_CDN';
    _this.InstanceAliasList = _query_def__WEBPACK_IMPORTED_MODULE_0__["OVCDNInstanceAliasList"];
    _this.InvalidDimensions = _query_def__WEBPACK_IMPORTED_MODULE_0__["OVCDNInvalidDemensions"];
    _this.templateQueryIdMap = {
      instance: 'Domain'
    };
    _this.InstanceReqConfig = {
      service: 'cdn',
      action: 'DescribeDomains',
      responseField: 'Domains'
    };
    return _this;
  }

  OVCDNDatasource.prototype.metricFindQuery = function (query, regex) {
    return __awaiter(this, void 0, void 0, function () {
      return __generator(this, function (_a) {
        return [2
        /*return*/
        , _super.prototype.metricFindQuery.call(this, __assign(__assign({}, query), {
          region: 'ap-guangzhou'
        }), regex)];
      });
    });
  };

  return OVCDNDatasource;
}(_base_datasource__WEBPACK_IMPORTED_MODULE_1__["BaseDatasource"]);

/* harmony default export */ __webpack_exports__["default"] = (OVCDNDatasource);

/***/ }),

/***/ "./datasource/tc_monitor/ov_cdn/query.ts":
/*!***********************************************!*\
  !*** ./datasource/tc_monitor/ov_cdn/query.ts ***!
  \***********************************************/
/*! exports provided: OVCDNQueryCtrl, ovCdnQuery */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "OVCDNQueryCtrl", function() { return OVCDNQueryCtrl; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ovCdnQuery", function() { return ovCdnQuery; });
/* harmony import */ var grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! grafana/app/core/core_module */ "grafana/app/core/core_module");
/* harmony import */ var grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _query_def__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./query_def */ "./datasource/tc_monitor/ov_cdn/query_def.ts");



var OVCDNQueryCtrl =
/** @class */
function () {
  OVCDNQueryCtrl.$inject = ["$scope", "$rootScope"];

  /** @ngInject */
  function OVCDNQueryCtrl($scope, $rootScope) {
    $scope.init = function () {
      $scope.OVCDNFilterFieldsDescriptor = _query_def__WEBPACK_IMPORTED_MODULE_1__["OVCDNFilterFieldsDescriptor"];
    }; // $scope.onChecked = (srcField, dstField) => {
    //   if ($scope.target.queries[srcField] === true) {
    //     $scope.target.queries[dstField] = false;
    //   }
    //   $scope.onChange();
    // };
    // $scope.getDropdown = (field) => {
    //   switch (field) {
    //     case 'zone':
    //       return $scope.getZones();
    //     default:
    //       return [];
    //   }
    // };
    // $scope.getZones = () => {
    //   if (!$scope.region) {
    //     return [];
    //   }
    //   return $scope.datasource.getZones('cvm', $scope.region);
    // };


    $scope.init();
  }

  return OVCDNQueryCtrl;
}();


var template = "\n<div class=\"tc-sub-params\" ng-if=\"showDetail\">\n<label class=\"gf-form-label tc-info-label\">\n  Instances are queried by following params.\n  <a target=\"_blank\" style=\"text-decoration:underline;color:#006eff;font-size:medium\" href=\"https://cloud.tencent.com/document/api/213/15728\">Click here to get API doc.</a>\n</label>\n<div class=\"gf-form-inline\">\n  <div class=\"gf-form\">\n    <label class=\"gf-form-label width-14\">\n      Offset\n      <info-popover mode=\"right-normal\">\n        \u504F\u79FB\u91CF, \u4F8B\u5982Offset=20&Limit=20 \u8FD4\u56DE\u7B2C 20 \u5230 40 \u9879\n      </info-popover>\n    </label>\n    <input type=\"number\" ng-model=\"target.queries.Offset\" class=\"gf-form-input width-10\" ng-min=\"0\" ng-change=\"onChange()\">\n  </div>\n</div>\n<div class=\"gf-form-inline\">\n  <div class=\"gf-form\">\n    <label class=\"gf-form-label width-14\">\n      Limit\n      <info-popover mode=\"right-normal\">\n        \u5355\u6B21\u8BF7\u6C42\u8FD4\u56DE\u7684\u6570\u91CF\uFF0C\u9ED8\u8BA4\u4E3A20\uFF0C\u6700\u5C0F\u503C\u4E3A1\uFF0C\u6700\u5927\u503C\u4E3A100\n      </info-popover>\n    </label>\n    <input type=\"number\" ng-model=\"target.queries.Limit\" class=\"gf-form-input width-10\" ng-min=\"1\" ng-max=\"100\" ng-change=\"onChange()\">\n  </div>\n</div>\n<div class=\"gf-form-inline\" ng-repeat=\"field in OVCDNFilterFieldsDescriptor\">\n<label class=\"gf-form-label width-14\">\n  {{ field.key }}\n  <info-popover mode=\"right-normal\">\n    {{ field.cnDescriptor }}\n    <a target=\"_blank\" href=\"{{field.link}}\" ng-if=\"field.link\">Click here for more information.</a>\n  </info-popover>\n</label>\n<multi-condition\n  ng-if=\"field.type === 'inputNumbermulti'\"\n  type=\"'inputNumber'\"\n  max-cond=\"5\"\n  value=\"target.queries.Filters[field.key]\"\n  maxNum=\"field.max\"\n  minNum=\"field.min\"\n  on-change=\"onChange()\"\n></multi-condition>\n<multi-condition\n  ng-if=\"field.type === 'inputmulti'\"\n  type=\"'input'\"\n  max-cond=\"5\"\n  value=\"target.queries.Filters[field.key]\"\n  on-change=\"onChange()\"\n></multi-condition>\n<custom-select-dropdown\n  ng-if=\"field.type === 'select'\"\n  value=\"target.queries.Filters[field.key]\"\n  options=\"field.list\"\n  multiple=\"true\"\n  on-change=\"onChange()\"\n></custom-select-dropdown>\n</div>\n\n</div>\n";
function ovCdnQuery() {
  return {
    template: template,
    controller: OVCDNQueryCtrl,
    restrict: 'E',
    scope: {
      target: '=',
      showDetail: '=',
      region: '=',
      datasource: '=',
      getDropdownOptions: '&',
      onChange: '&'
    }
  };
}
grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0___default.a.directive('ovCdnQuery', ovCdnQuery);

/***/ }),

/***/ "./datasource/tc_monitor/ov_cdn/query_def.ts":
/*!***************************************************!*\
  !*** ./datasource/tc_monitor/ov_cdn/query_def.ts ***!
  \***************************************************/
/*! exports provided: default, OVCDNFilterFieldsDescriptor, OVCDNInstanceAliasList, templateQueryIdMap, OVCDNInvalidDemensions, OVCDNGetInstanceQueryParams */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "OVCDNFilterFieldsDescriptor", function() { return OVCDNFilterFieldsDescriptor; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "OVCDNInstanceAliasList", function() { return OVCDNInstanceAliasList; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "templateQueryIdMap", function() { return templateQueryIdMap; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "OVCDNInvalidDemensions", function() { return OVCDNInvalidDemensions; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "OVCDNGetInstanceQueryParams", function() { return GetInstanceQueryParams; });
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lodash */ "lodash");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__);
var __assign = undefined && undefined.__assign || function () {
  __assign = Object.assign || function (t) {
    for (var s, i = 1, n = arguments.length; i < n; i++) {
      s = arguments[i];

      for (var p in s) {
        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
      }
    }

    return t;
  };

  return __assign.apply(this, arguments);
};


var CDNFilterFields = {
  origin: [],
  domain: [],
  resourceId: [],
  status: [],
  serviceType: [],
  projectId: [],
  domainType: [],
  fullUrlCache: [],
  https: [],
  originPullProtocol: [],
  tagKey: []
};
var OVCDNFilterFieldsDescriptor = [{
  key: 'origin',
  enDescriptor: 'origin',
  cnDescriptor: '主源站',
  link: '',
  type: 'inputmulti'
}, {
  key: 'domain',
  enDescriptor: 'domain',
  cnDescriptor: '域名',
  link: '',
  type: 'inputmulti'
}, {
  key: 'resourceId',
  enDescriptor: 'resourceId',
  cnDescriptor: '域名id',
  link: '',
  type: 'inputmulti'
}, {
  key: 'status',
  enDescriptor: 'status',
  cnDescriptor: '域名状态',
  link: '',
  type: 'select',
  list: [{
    text: 'online',
    value: 'online'
  }, {
    text: 'offline',
    value: 'offline'
  }, {
    text: 'processing',
    value: 'processing'
  }]
}, {
  key: 'serviceType',
  enDescriptor: 'serviceType',
  cnDescriptor: '业务类型',
  link: '',
  type: 'select',
  list: [{
    text: 'web',
    value: 'web'
  }, {
    text: 'download',
    value: 'download'
  }, {
    text: 'media',
    value: 'media'
  }]
}, {
  key: 'projectId',
  enDescriptor: 'projectId',
  cnDescriptor: '项目ID',
  link: '',
  type: 'inputNumbermulti'
}, {
  key: 'domainType',
  enDescriptor: 'domainType',
  cnDescriptor: '主源站类型',
  link: '',
  type: 'select',
  list: [{
    text: '自有源',
    value: 'cname'
  }, {
    text: 'cos接入',
    value: 'cos'
  }]
}, {
  key: 'fullUrlCache',
  enDescriptor: 'fullUrlCache',
  cnDescriptor: '全路径缓存',
  link: '',
  type: 'select',
  list: [{
    text: '打开',
    value: 'on'
  }, {
    text: '关闭',
    value: 'off'
  }]
}, {
  key: 'https',
  enDescriptor: 'https',
  cnDescriptor: '是否配置https',
  link: '',
  type: 'select',
  list: [{
    text: 'on',
    value: 'on'
  }, {
    text: 'off',
    value: 'off'
  }, {
    text: 'processing',
    value: 'processing'
  }]
}, {
  key: 'originPullProtocol',
  enDescriptor: 'originPullProtocol',
  cnDescriptor: '回源协议类型',
  link: '',
  type: 'select',
  list: [{
    text: 'http',
    value: 'http'
  }, {
    text: 'follow',
    value: 'follow'
  }, {
    text: 'https',
    value: 'https'
  }]
}, {
  key: 'tagKey',
  enDescriptor: 'tagKey',
  cnDescriptor: '标签键',
  link: '',
  type: 'inputmulti'
}];
var OVCDN_STATE = {
  region: 'ap-guangzhou',
  metricName: '',
  metricUnit: '',
  period: undefined,
  dimensionObject: null,
  instance: '',
  instanceAlias: 'Domain',
  queries: {
    Limit: 20,
    Offset: 0,
    Filters: __assign({}, CDNFilterFields)
  }
};

function GetInstanceQueryParams(queries) {
  if (queries === void 0) {
    queries = {};
  }

  var params = {};

  if (!lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isEmpty(queries)) {
    params.Limit = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(queries, 'Limit', 20) || 20;
    params.Offset = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(queries, 'Offset', 0) || 0;
    var Filters_1 = [];

    lodash__WEBPACK_IMPORTED_MODULE_0___default.a.forEach(queries.Filters, function (item, key) {
      if (lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isArray(item)) {
        item = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.compact(item);

        if (item.length > 0) {
          Filters_1.push({
            Name: key,
            Value: lodash__WEBPACK_IMPORTED_MODULE_0___default.a.uniq(item).slice(0, 5)
          });
        }
      } else if (lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isObject(item)) {
        if (!lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isEmpty(lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(item, 'value', []))) {
          Filters_1.push({
            Name: key,
            Value: lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(item, 'value', []).slice(0, 5)
          });
        }
      }
    });

    if (Filters_1.length > 0) {
      params.Filters = Filters_1;
    }
  }

  return params;
}

var OVCDNInstanceAliasList = ['Domain', 'ResourceId'];
var OVCDNInvalidDemensions = {
  projectId: 'ProjectId',
  domain: 'Domain'
};
var templateQueryIdMap = {
  instance: 'Domain'
};
/* harmony default export */ __webpack_exports__["default"] = (OVCDN_STATE);


/***/ }),

/***/ "./datasource/tc_monitor/pcx/datasource.ts":
/*!*************************************************!*\
  !*** ./datasource/tc_monitor/pcx/datasource.ts ***!
  \*************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _query_def__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./query_def */ "./datasource/tc_monitor/pcx/query_def.ts");
/* harmony import */ var _base_datasource__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../_base/datasource */ "./datasource/tc_monitor/_base/datasource.ts");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lodash */ "lodash");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _common_constants__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../common/constants */ "./datasource/common/constants.ts");
var __extends = undefined && undefined.__extends || function () {
  var _extendStatics = function extendStatics(d, b) {
    _extendStatics = Object.setPrototypeOf || {
      __proto__: []
    } instanceof Array && function (d, b) {
      d.__proto__ = b;
    } || function (d, b) {
      for (var p in b) {
        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];
      }
    };

    return _extendStatics(d, b);
  };

  return function (d, b) {
    if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");

    _extendStatics(d, b);

    function __() {
      this.constructor = d;
    }

    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();

var __assign = undefined && undefined.__assign || function () {
  __assign = Object.assign || function (t) {
    for (var s, i = 1, n = arguments.length; i < n; i++) {
      s = arguments[i];

      for (var p in s) {
        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
      }
    }

    return t;
  };

  return __assign.apply(this, arguments);
};

var __awaiter = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {
  function adopt(value) {
    return value instanceof P ? value : new P(function (resolve) {
      resolve(value);
    });
  }

  return new (P || (P = Promise))(function (resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }

    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }

    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }

    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};

var __generator = undefined && undefined.__generator || function (thisArg, body) {
  var _ = {
    label: 0,
    sent: function sent() {
      if (t[0] & 1) throw t[1];
      return t[1];
    },
    trys: [],
    ops: []
  },
      f,
      y,
      t,
      g;
  return g = {
    next: verb(0),
    "throw": verb(1),
    "return": verb(2)
  }, typeof Symbol === "function" && (g[Symbol.iterator] = function () {
    return this;
  }), g;

  function verb(n) {
    return function (v) {
      return step([n, v]);
    };
  }

  function step(op) {
    if (f) throw new TypeError("Generator is already executing.");

    while (_) {
      try {
        if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
        if (y = 0, t) op = [op[0] & 2, t.value];

        switch (op[0]) {
          case 0:
          case 1:
            t = op;
            break;

          case 4:
            _.label++;
            return {
              value: op[1],
              done: false
            };

          case 5:
            _.label++;
            y = op[1];
            op = [0];
            continue;

          case 7:
            op = _.ops.pop();

            _.trys.pop();

            continue;

          default:
            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
              _ = 0;
              continue;
            }

            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
              _.label = op[1];
              break;
            }

            if (op[0] === 6 && _.label < t[1]) {
              _.label = t[1];
              t = op;
              break;
            }

            if (t && _.label < t[2]) {
              _.label = t[2];

              _.ops.push(op);

              break;
            }

            if (t[2]) _.ops.pop();

            _.trys.pop();

            continue;
        }

        op = body.call(thisArg, _);
      } catch (e) {
        op = [6, e];
        y = 0;
      } finally {
        f = t = 0;
      }
    }

    if (op[0] & 5) throw op[1];
    return {
      value: op[0] ? op[1] : void 0,
      done: true
    };
  }
};






var DCDatasource =
/** @class */
function (_super) {
  __extends(DCDatasource, _super);

  function DCDatasource(instanceSettings, backendSrv, templateSrv) {
    var _this = _super.call(this, instanceSettings, backendSrv, templateSrv) || this;

    _this.Namespace = _query_def__WEBPACK_IMPORTED_MODULE_0__["namespace"];
    _this.InstanceAliasList = _query_def__WEBPACK_IMPORTED_MODULE_0__["PCXInstanceAliasList"];
    _this.InvalidDimensions = {};
    _this.templateQueryIdMap = _query_def__WEBPACK_IMPORTED_MODULE_0__["templateQueryIdMap"]; // 此处service是接口的配置参数，需和plugin.json里一致，和constant.ts中SERVICES_API_INFO保持一致

    _this.InstanceReqConfig = {
      service: 'xx',
      action: 'xx',
      responseField: 'xx'
    };
    return _this;
  }

  DCDatasource.prototype.getInstances = function (region, params) {
    if (region === void 0) {
      region = 'ap-guangzhou';
    }

    if (params === void 0) {
      params = {};
    }

    params = __assign({
      offset: 0,
      limit: 50
    }, params);
    var serviceInfo = Object(_common_constants__WEBPACK_IMPORTED_MODULE_3__["GetServiceAPIInfo"])(region, 'pcx');
    return this.doRequestV2({
      url: this.url + serviceInfo.path,
      data: params
    }, serviceInfo.service, {
      region: region,
      action: 'DescribeVpcPeeringConnections'
    }).then(function (response) {
      return response.data || [];
    });
  };
  /**
   * 模板变量中获取全量的 PCX 实例列表
   * @param region 地域信息
   */


  DCDatasource.prototype.getVariableInstances = function (region, query) {
    var _this = this;

    var result = [];

    var params = __assign({
      Offset: 0,
      Limit: 50
    }, query);

    var serviceInfo = Object(_common_constants__WEBPACK_IMPORTED_MODULE_3__["GetServiceAPIInfo"])(region, 'pcx');
    return this.doRequestV2({
      url: this.url + serviceInfo.path,
      data: params
    }, serviceInfo.service, {
      region: region,
      action: 'DescribeVpcPeeringConnections'
    }).then(function (response) {
      result = response.data || [];
      var total = response.totalCount || 0;

      if (result.length >= total) {
        return result;
      } else {
        var param = Object(_common_constants__WEBPACK_IMPORTED_MODULE_3__["SliceLength"])(total, 50);
        var promises_1 = [];

        lodash__WEBPACK_IMPORTED_MODULE_2___default.a.forEach(param, function (item) {
          promises_1.push(_this.getInstances(region, item));
        });

        return Promise.all(promises_1).then(function (responses) {
          lodash__WEBPACK_IMPORTED_MODULE_2___default.a.forEach(responses, function (item) {
            result = lodash__WEBPACK_IMPORTED_MODULE_2___default.a.concat(result, item);
          });

          return result;
        })["catch"](function (error) {
          return result;
        });
      }
    });
  };

  DCDatasource.prototype.getVpcId = function (region, params) {
    if (params === void 0) {
      params = {};
    }

    params = __assign({
      Offset: 0,
      Limit: 20
    }, params); // TODO 等待腾讯云接口查问题

    params.Offset = String(params.Offset);
    params.Limit = String(params.Limit);
    var serviceInfo = Object(_common_constants__WEBPACK_IMPORTED_MODULE_3__["GetServiceAPIInfo"])(region, 'vpc');
    return this.doRequest({
      url: this.url + serviceInfo.path,
      data: params
    }, serviceInfo.service, {
      region: region,
      action: 'DescribeVpcs'
    }).then(function (response) {
      return lodash__WEBPACK_IMPORTED_MODULE_2___default.a.map(response.VpcSet || [], function (item) {
        return {
          text: item.VpcId,
          value: item.VpcId
        };
      });
    });
  };

  DCDatasource.prototype.getVpcIds = function (region) {
    var _this = this;

    var result = [];
    var params = {
      Offset: 0,
      Limit: 100
    }; // TODO 等待腾讯云接口查问题

    params.Offset = String(params.Offset);
    params.Limit = String(params.Limit);
    var serviceInfo = Object(_common_constants__WEBPACK_IMPORTED_MODULE_3__["GetServiceAPIInfo"])(region, 'vpc');
    return this.doRequest({
      url: this.url + serviceInfo.path,
      data: params
    }, serviceInfo.service, {
      region: region,
      action: 'DescribeVpcs'
    }).then(function (response) {
      result = lodash__WEBPACK_IMPORTED_MODULE_2___default.a.map(response.VpcSet || [], function (item) {
        return {
          text: item.VpcId,
          value: item.VpcId
        };
      });
      var total = response.TotalCount || 0;

      if (result.length >= total) {
        return result;
      } else {
        var param = Object(_common_constants__WEBPACK_IMPORTED_MODULE_3__["SliceLength"])(total, 100);
        var promises_2 = [];

        lodash__WEBPACK_IMPORTED_MODULE_2___default.a.forEach(param, function (item) {
          promises_2.push(_this.getVpcId(region, item));
        });

        return Promise.all(promises_2).then(function (responses) {
          lodash__WEBPACK_IMPORTED_MODULE_2___default.a.forEach(responses, function (item) {
            result = lodash__WEBPACK_IMPORTED_MODULE_2___default.a.concat(result, item);
          });

          return result;
        })["catch"](function (error) {
          return result;
        });
      }
    });
  };
  /**
   * 腾讯云 API 2.0 请求接口
   * @param options
   * @param service
   * @param signObj
   */


  DCDatasource.prototype.doRequestV2 = function (options, service, signObj) {
    if (signObj === void 0) {
      signObj = {};
    }

    return __awaiter(this, void 0, void 0, function () {
      return __generator(this, function (_a) {
        switch (_a.label) {
          case 0:
            return [4
            /*yield*/
            , Object(_common_constants__WEBPACK_IMPORTED_MODULE_3__["GetRequestParamsV2"])(options, service, signObj, this.secretId, this.instanceSettings.id, this.backendSrv)];

          case 1:
            options = _a.sent();
            return [2
            /*return*/
            , this.backendSrv.datasourceRequest(options).then(function (response) {
              return lodash__WEBPACK_IMPORTED_MODULE_2___default.a.get(response, 'data', {});
            })["catch"](function (error) {
              throw error;
            })];
        }
      });
    });
  };

  return DCDatasource;
}(_base_datasource__WEBPACK_IMPORTED_MODULE_1__["BaseDatasource"]);

/* harmony default export */ __webpack_exports__["default"] = (DCDatasource);

/***/ }),

/***/ "./datasource/tc_monitor/pcx/query.ts":
/*!********************************************!*\
  !*** ./datasource/tc_monitor/pcx/query.ts ***!
  \********************************************/
/*! exports provided: PCXQueryCtrl, pcxQuery */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PCXQueryCtrl", function() { return PCXQueryCtrl; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "pcxQuery", function() { return pcxQuery; });
/* harmony import */ var grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! grafana/app/core/core_module */ "grafana/app/core/core_module");
/* harmony import */ var grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _query_def__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./query_def */ "./datasource/tc_monitor/pcx/query_def.ts");



var PCXQueryCtrl =
/** @class */
function () {
  PCXQueryCtrl.$inject = ["$scope", "$rootScope"];

  /** @ngInject */
  function PCXQueryCtrl($scope, $rootScope) {
    $scope.init = function () {
      $scope.PCXFieldsDescriptor = _query_def__WEBPACK_IMPORTED_MODULE_1__["PCXFieldsDescriptor"];
    };

    $scope.onChecked = function (srcField, dstField) {
      if ($scope.target.queries[srcField] === true) {
        $scope.target.queries[dstField] = false;
      }

      $scope.onChange();
    };

    $scope.getDropdown = function (field) {
      switch (field) {
        case 'vpcId':
          return $scope.getVpcIds();

        default:
          return [];
      }
    };

    $scope.getVpcIds = function () {
      if (!$scope.region) {
        return [];
      }

      return $scope.datasource.getVpcIds('pcx', $scope.region);
    };

    $scope.init();
  }

  return PCXQueryCtrl;
}();


var template = "\n<div class=\"tc-sub-params\" ng-if=\"showDetail\">\n  <label class=\"gf-form-label tc-info-label\">\n    Instances are queried by following params.\n    <a target=\"_blank\" style=\"text-decoration:underline;color:#006eff;font-size:medium\" href=\"https://cloud.tencent.com/document/api/215/2101\">Click here to get API doc.</a>\n  </label>\n  <div class=\"gf-form-inline\" ng-repeat=\"field in PCXFieldsDescriptor\">\n    <div class=\"gf-form\">\n      <label class=\"gf-form-label width-14\">\n        {{ field.key }}\n        <info-popover mode=\"right-normal\">\n          {{ field.cnDescriptor }}\n          <a target=\"_blank\" href=\"{{field.link}}\" ng-if=\"field.link\">Click here for more information.</a>\n        </info-popover>\n      </label>\n      <input\n        ng-if=\"field.type === 'inputnumber'\"\n        style=\"margin-right:2px\"\n        type=\"number\"\n        ng-model=\"target.queries[field.key]\"\n        ng-change=\"onChange()\"\n        class=\"gf-form-input width-10\"\n        ng-min=\"field.min\"\n        ng-max=\"field.max\"\n      />\n      <input\n        ng-if=\"field.type === 'input'\"\n        style=\"margin-right:2px\"\n        type=\"text\"\n        ng-model=\"target.queries[field.key]\"\n        ng-change=\"onChange()\"\n        class=\"gf-form-input width-10\"\n      />\n      <gf-form-dropdown\n        ng-if=\"field.type === 'dropdown'\"\n        model=\"target.queries[field.key]\"\n        allow-custom=\"true\"\n        lookup-text=\"true\"\n        get-options=\"getDropdown(field.key)\"\n        on-change=\"onChange()\"\n        css-class=\"min-width-10\"\n      ></gf-form-dropdown>\n      <multi-condition\n        ng-if=\"field.type === 'inputmulti'\"\n        type=\"'input'\"\n        value=\"target.queries[field.key]\"\n        on-change=\"onChange()\"\n      ></multi-condition>\n      <multi-condition\n        ng-if=\"field.type === 'dropdownmulti'\"\n        type=\"'dropdown'\"\n        value=\"target.queries[field.key]\"\n        on-change=\"onChange()\"\n        get-options=\"getDropdown(field.key)\"\n      ></multi-condition>\n      <custom-select-dropdown\n        ng-if=\"field.type === 'select'\"\n        value=\"target.queries[field.key]\"\n        options=\"field.list\"\n        multiple=\"field.multiple || false\"\n        on-change=\"onChange()\"\n      ></custom-select-dropdown>\n    </div>\n  </div>\n\n</div>\n";
function pcxQuery() {
  return {
    template: template,
    controller: PCXQueryCtrl,
    restrict: 'E',
    scope: {
      target: '=',
      showDetail: '=',
      region: '=',
      datasource: '=',
      onChange: '&'
    }
  };
}
grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0___default.a.directive('pcxQuery', pcxQuery);

/***/ }),

/***/ "./datasource/tc_monitor/pcx/query_def.ts":
/*!************************************************!*\
  !*** ./datasource/tc_monitor/pcx/query_def.ts ***!
  \************************************************/
/*! exports provided: default, PCXInstanceAliasList, PCXFieldsDescriptor, templateQueryIdMap, namespace, PCXGetInstanceQueryParams */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PCXInstanceAliasList", function() { return PCXInstanceAliasList; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PCXFieldsDescriptor", function() { return PCXFieldsDescriptor; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "templateQueryIdMap", function() { return templateQueryIdMap; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "namespace", function() { return namespace; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PCXGetInstanceQueryParams", function() { return GetInstanceQueryParams; });
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lodash */ "lodash");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__);
var __assign = undefined && undefined.__assign || function () {
  __assign = Object.assign || function (t) {
    for (var s, i = 1, n = arguments.length; i < n; i++) {
      s = arguments[i];

      for (var p in s) {
        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
      }
    }

    return t;
  };

  return __assign.apply(this, arguments);
};


var namespace = 'QCE/PCX';
var PCXFields = {
  limit: 20,
  offset: 0,
  peeringConnectionId: '',
  peeringConnectionName: '',
  vpcId: '',
  state: undefined
};
var PCX_STATE = {
  region: '',
  metricName: '',
  metricUnit: '',
  period: undefined,
  dimensionObject: null,
  instance: '',
  instanceAlias: 'peeringConnectionId',
  queries: __assign({}, PCXFields)
};
var StateTypes = [{
  text: '申请中',
  value: 0
}, {
  text: '连接成功',
  value: 1
}, {
  text: '已过期',
  value: 2
}, {
  text: '对端已拒绝',
  value: 3
}, {
  text: '对端已删除',
  value: 4
}];
var PCXFieldsDescriptor = [{
  key: 'offset',
  enDescriptor: 'offset',
  cnDescriptor: '偏移量, 例如Offset=20&Limit=20 返回第 20 到 40 项',
  link: '',
  type: 'inputnumber',
  min: 0
}, {
  key: 'limit',
  enDescriptor: 'limit',
  cnDescriptor: '单次请求返回的数量，默认为20，最小值为1，最大值为50',
  link: '',
  type: 'inputnumber',
  min: 1,
  max: 50
}, {
  key: 'peeringConnectionId',
  enDescriptor: 'PeeringConnection Id',
  cnDescriptor: '私有网络对等连接 ID',
  link: '',
  type: 'input'
}, {
  key: 'peeringConnectionName',
  enDescriptor: 'PeeringConnection Name',
  cnDescriptor: '对等连接名称',
  link: '',
  type: 'input'
}, {
  key: 'vpcId',
  enDescriptor: 'vpcId',
  cnDescriptor: '发起方私有网络 ID 值',
  link: 'https://cloud.tencent.com/document/api/215/1372',
  type: 'dropdown'
}, {
  key: 'state',
  enDescriptor: 'state',
  cnDescriptor: '连接状态',
  link: '',
  type: 'select',
  list: StateTypes
}];
var PCXInstanceAliasList = ['peeringConnectionId', 'peeringConnectionName'];
var templateQueryIdMap = {
  instance: 'peeringConnectionId'
};

function GetInstanceQueryParams(queries) {
  if (queries === void 0) {
    queries = {};
  }

  var params = {};

  if (!lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isEmpty(queries)) {
    params.limit = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(queries, 'limit', 20) || 20;
    params.offset = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(queries, 'offset', 0) || 0;
    queries = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.omit(queries, ['offset', 'limit']);

    lodash__WEBPACK_IMPORTED_MODULE_0___default.a.forEach(queries, function (item, key) {
      if (lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isArray(item)) {
        item = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.compact(item);

        if (item.length > 0) {
          params[key] = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.uniq(item);
        }
      } else if (lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isObject(item)) {
        if (lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isNumber(lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(item, 'value', undefined)) || !lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isEmpty(lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(item, 'value', undefined))) {
          params[key] = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(item, 'value');
        }
      } else if (lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isNumber(item) || !lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isEmpty(item)) {
        params[key] = item;
      }
    });
  }

  return params;
}

/* harmony default export */ __webpack_exports__["default"] = (PCX_STATE);


/***/ }),

/***/ "./datasource/tc_monitor/postgresql/datasource.ts":
/*!********************************************************!*\
  !*** ./datasource/tc_monitor/postgresql/datasource.ts ***!
  \********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _query_def__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./query_def */ "./datasource/tc_monitor/postgresql/query_def.ts");
/* harmony import */ var _base_datasource__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../_base/datasource */ "./datasource/tc_monitor/_base/datasource.ts");
var __extends = undefined && undefined.__extends || function () {
  var _extendStatics = function extendStatics(d, b) {
    _extendStatics = Object.setPrototypeOf || {
      __proto__: []
    } instanceof Array && function (d, b) {
      d.__proto__ = b;
    } || function (d, b) {
      for (var p in b) {
        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];
      }
    };

    return _extendStatics(d, b);
  };

  return function (d, b) {
    if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");

    _extendStatics(d, b);

    function __() {
      this.constructor = d;
    }

    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();




var CDBDatasource =
/** @class */
function (_super) {
  __extends(CDBDatasource, _super);

  function CDBDatasource(instanceSettings, backendSrv, templateSrv) {
    var _this = _super.call(this, instanceSettings, backendSrv, templateSrv) || this;

    _this.Namespace = _query_def__WEBPACK_IMPORTED_MODULE_0__["namespace"];
    _this.InstanceAliasList = _query_def__WEBPACK_IMPORTED_MODULE_0__["POSTGRESInstanceAliasList"];
    _this.InvalidDimensions = _query_def__WEBPACK_IMPORTED_MODULE_0__["PostgreInvalidDemensions"];
    _this.templateQueryIdMap = _query_def__WEBPACK_IMPORTED_MODULE_0__["templateQueryIdMap"];
    _this.InstanceReqConfig = {
      service: 'postgres',
      action: 'DescribeDBInstances',
      responseField: 'DBInstanceSet'
    };
    _this.MetricReqConfig = {
      resultFilter: _query_def__WEBPACK_IMPORTED_MODULE_0__["modifyDimensons"]
    };
    return _this;
  }

  return CDBDatasource;
}(_base_datasource__WEBPACK_IMPORTED_MODULE_1__["BaseDatasource"]);

/* harmony default export */ __webpack_exports__["default"] = (CDBDatasource);

/***/ }),

/***/ "./datasource/tc_monitor/postgresql/query.ts":
/*!***************************************************!*\
  !*** ./datasource/tc_monitor/postgresql/query.ts ***!
  \***************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _base_query__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../_base/query */ "./datasource/tc_monitor/_base/query.ts");
/* harmony import */ var _query_def__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./query_def */ "./datasource/tc_monitor/postgresql/query_def.ts");


Object(_base_query__WEBPACK_IMPORTED_MODULE_0__["default"])(_query_def__WEBPACK_IMPORTED_MODULE_1__["queryEditorName"], _query_def__WEBPACK_IMPORTED_MODULE_1__["queryEditorConfig"]);

/***/ }),

/***/ "./datasource/tc_monitor/postgresql/query_def.ts":
/*!*******************************************************!*\
  !*** ./datasource/tc_monitor/postgresql/query_def.ts ***!
  \*******************************************************/
/*! exports provided: default, PostgresFieldsDescriptor, POSTGRESInstanceAliasList, templateQueryIdMap, modifyDimensons, namespace, queryEditorName, queryEditorConfig, PostgreInvalidDemensions, POSTGRESGetInstanceQueryParams */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PostgresFieldsDescriptor", function() { return PostgresFieldsDescriptor; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "POSTGRESInstanceAliasList", function() { return POSTGRESInstanceAliasList; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "templateQueryIdMap", function() { return templateQueryIdMap; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "modifyDimensons", function() { return modifyDimensons; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "namespace", function() { return namespace; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "queryEditorName", function() { return queryEditorName; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "queryEditorConfig", function() { return queryEditorConfig; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PostgreInvalidDemensions", function() { return PostgreInvalidDemensions; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "POSTGRESGetInstanceQueryParams", function() { return GetInstanceQueryParams; });
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lodash */ "lodash");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _common_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../common/utils */ "./datasource/common/utils.ts");
var __assign = undefined && undefined.__assign || function () {
  __assign = Object.assign || function (t) {
    for (var s, i = 1, n = arguments.length; i < n; i++) {
      s = arguments[i];

      for (var p in s) {
        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
      }
    }

    return t;
  };

  return __assign.apply(this, arguments);
};



var namespace = 'QCE/POSTGRES'; // 组件名称。这里名字要和index.ts中的SERVICES对应，后面会根据SERVICES中service字段拼接这个query组件名称

var queryEditorName = 'postgresQuery';
var PostgresFields = {
  'db-instance-id': [],
  'db-instance-name': []
};
var PostgresFieldsDescriptor = [{
  key: 'db-instance-id',
  enDescriptor: 'DB Instance ID',
  cnDescriptor: 'DB 实例ID',
  link: '',
  type: 'inputMulti',
  min: 0
}, {
  key: 'db-instance-name',
  enDescriptor: 'DB Instance Name',
  cnDescriptor: 'DB 实例名称',
  link: '',
  type: 'inputMulti'
}]; // 各产品实例列表detail配置

var queryEditorConfig = {
  instanceDocUrl: 'https://cloud.tencent.com/document/api/409/16773',
  namespace: namespace,
  fieldDescriptor: PostgresFieldsDescriptor
};
var POSTGRESInstanceAliasList = ['DBInstanceId', 'DBInstanceName'];
var POSTGRES_STATE = {
  region: '',
  metricName: '',
  metricUnit: '',
  period: undefined,
  dimensionObject: null,
  instance: '',
  instanceAlias: 'DBInstanceId',
  queries: {
    Limit: 20,
    Offset: 0,
    Filters: __assign({}, PostgresFields)
  }
};

function GetInstanceQueryParams(queries) {
  if (queries === void 0) {
    queries = {};
  }

  return Object(_common_utils__WEBPACK_IMPORTED_MODULE_1__["instanceQueryParamsBaseParse"])(queries, true);
}

function modifyDimensons(metricItem) {
  var metricTmp = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.cloneDeep(metricItem);

  metricTmp.Dimensions.forEach(function (item) {
    item.Dimensions = ['resourceId'];
  });
  return metricTmp;
}

var PostgreInvalidDemensions = {
  uid: 'DBInstanceId',
  resourceId: 'DBInstanceId'
};
var templateQueryIdMap = {
  instance: 'DBInstanceId'
};
/* harmony default export */ __webpack_exports__["default"] = (POSTGRES_STATE);


/***/ }),

/***/ "./datasource/tc_monitor/qaap/datasource.ts":
/*!**************************************************!*\
  !*** ./datasource/tc_monitor/qaap/datasource.ts ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lodash */ "lodash");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _query_def__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./query_def */ "./datasource/tc_monitor/qaap/query_def.ts");
/* harmony import */ var _base_datasource__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../_base/datasource */ "./datasource/tc_monitor/_base/datasource.ts");
var __extends = undefined && undefined.__extends || function () {
  var _extendStatics = function extendStatics(d, b) {
    _extendStatics = Object.setPrototypeOf || {
      __proto__: []
    } instanceof Array && function (d, b) {
      d.__proto__ = b;
    } || function (d, b) {
      for (var p in b) {
        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];
      }
    };

    return _extendStatics(d, b);
  };

  return function (d, b) {
    if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");

    _extendStatics(d, b);

    function __() {
      this.constructor = d;
    }

    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();

var __awaiter = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {
  function adopt(value) {
    return value instanceof P ? value : new P(function (resolve) {
      resolve(value);
    });
  }

  return new (P || (P = Promise))(function (resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }

    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }

    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }

    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};

var __generator = undefined && undefined.__generator || function (thisArg, body) {
  var _ = {
    label: 0,
    sent: function sent() {
      if (t[0] & 1) throw t[1];
      return t[1];
    },
    trys: [],
    ops: []
  },
      f,
      y,
      t,
      g;
  return g = {
    next: verb(0),
    "throw": verb(1),
    "return": verb(2)
  }, typeof Symbol === "function" && (g[Symbol.iterator] = function () {
    return this;
  }), g;

  function verb(n) {
    return function (v) {
      return step([n, v]);
    };
  }

  function step(op) {
    if (f) throw new TypeError("Generator is already executing.");

    while (_) {
      try {
        if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
        if (y = 0, t) op = [op[0] & 2, t.value];

        switch (op[0]) {
          case 0:
          case 1:
            t = op;
            break;

          case 4:
            _.label++;
            return {
              value: op[1],
              done: false
            };

          case 5:
            _.label++;
            y = op[1];
            op = [0];
            continue;

          case 7:
            op = _.ops.pop();

            _.trys.pop();

            continue;

          default:
            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
              _ = 0;
              continue;
            }

            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
              _.label = op[1];
              break;
            }

            if (op[0] === 6 && _.label < t[1]) {
              _.label = t[1];
              t = op;
              break;
            }

            if (t && _.label < t[2]) {
              _.label = t[2];

              _.ops.push(op);

              break;
            }

            if (t[2]) _.ops.pop();

            _.trys.pop();

            continue;
        }

        op = body.call(thisArg, _);
      } catch (e) {
        op = [6, e];
        y = 0;
      } finally {
        f = t = 0;
      }
    }

    if (op[0] & 5) throw op[1];
    return {
      value: op[0] ? op[1] : void 0,
      done: true
    };
  }
};





var QAAPDatasource =
/** @class */
function (_super) {
  __extends(QAAPDatasource, _super); // MetricReqConfig = {
  //   resultFilter: modifyDimensons,
  // };


  function QAAPDatasource(instanceSettings, backendSrv, templateSrv) {
    var _this = _super.call(this, instanceSettings, backendSrv, templateSrv) || this;

    _this.Namespace = _query_def__WEBPACK_IMPORTED_MODULE_1__["namespace"];
    _this.InstanceAliasList = _query_def__WEBPACK_IMPORTED_MODULE_1__["QAAPInstanceAliasList"];
    _this.InvalidDimensions = _query_def__WEBPACK_IMPORTED_MODULE_1__["QAAPInvalidDemensions"];
    _this.templateQueryIdMap = _query_def__WEBPACK_IMPORTED_MODULE_1__["templateQueryIdMap"]; // 此处service是接口的配置参数，需和plugin.json里一致，和constant.ts中SERVICES_API_INFO保持一致

    _this.InstanceReqConfig = {
      service: 'gaap',
      action: 'DescribeProxies',
      responseField: 'ProxySet',
      interceptor: {// response: (data: unknown[]) =>[
        //   {
        //     "NetDetectId": "netd-12345678",
        //   },
        // ],
      }
    };
    return _this;
  }

  QAAPDatasource.prototype.getMetrics = function (region) {
    if (region === void 0) {
      region = 'ap-guangzhou';
    }

    return __awaiter(this, void 0, void 0, function () {
      var rawSet;
      return __generator(this, function (_a) {
        switch (_a.label) {
          case 0:
            return [4
            /*yield*/
            , _super.prototype.getMetrics.call(this, region)];

          case 1:
            rawSet = _a.sent();
            return [2
            /*return*/
            , rawSet.filter(function (item) {
              return Object(lodash__WEBPACK_IMPORTED_MODULE_0__["get"])(item, 'Dimensions.length') === 1 && Object(lodash__WEBPACK_IMPORTED_MODULE_0__["get"])(item, 'Dimensions[0].Dimensions.length') === 1 && Object(lodash__WEBPACK_IMPORTED_MODULE_0__["get"])(item, 'Dimensions[0].Dimensions[0]') === 'channelId';
            })];
        }
      });
    });
  };

  return QAAPDatasource;
}(_base_datasource__WEBPACK_IMPORTED_MODULE_2__["BaseDatasource"]);

/* harmony default export */ __webpack_exports__["default"] = (QAAPDatasource);

/***/ }),

/***/ "./datasource/tc_monitor/qaap/query.ts":
/*!*********************************************!*\
  !*** ./datasource/tc_monitor/qaap/query.ts ***!
  \*********************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _base_query__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../_base/query */ "./datasource/tc_monitor/_base/query.ts");
/* harmony import */ var _query_def__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./query_def */ "./datasource/tc_monitor/qaap/query_def.ts");


Object(_base_query__WEBPACK_IMPORTED_MODULE_0__["default"])(_query_def__WEBPACK_IMPORTED_MODULE_1__["queryEditorName"], _query_def__WEBPACK_IMPORTED_MODULE_1__["queryEditorConfig"]);

/***/ }),

/***/ "./datasource/tc_monitor/qaap/query_def.ts":
/*!*************************************************!*\
  !*** ./datasource/tc_monitor/qaap/query_def.ts ***!
  \*************************************************/
/*! exports provided: default, QAAPFilterFieldsDescriptor, templateQueryIdMap, QAAPInstanceAliasList, QAAPInvalidDemensions, namespace, queryEditorName, queryEditorConfig, modifyDimensons, QAAPGetInstanceQueryParams */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "QAAPFilterFieldsDescriptor", function() { return QAAPFilterFieldsDescriptor; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "templateQueryIdMap", function() { return templateQueryIdMap; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "QAAPInstanceAliasList", function() { return QAAPInstanceAliasList; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "QAAPInvalidDemensions", function() { return QAAPInvalidDemensions; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "namespace", function() { return namespace; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "queryEditorName", function() { return queryEditorName; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "queryEditorConfig", function() { return queryEditorConfig; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "modifyDimensons", function() { return modifyDimensons; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "QAAPGetInstanceQueryParams", function() { return GetInstanceQueryParams; });
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lodash */ "lodash");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _common_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../common/utils */ "./datasource/common/utils.ts");


var namespace = 'QCE/QAAP'; // 组件名称。这里名字要和index.ts中的SERVICES对应，后面会根据SERVICES中service字段拼接这个query组件名称

var queryEditorName = 'qaapQuery';
var QAAPInvalidDemensions = {
  channelId: 'InstanceId'
};
var QAAPInstanceAliasList = ['InstanceId'];
var templateQueryIdMap = {
  instance: 'InstanceId'
}; // select类型需要注意是{},multi后缀是[]

var QAAPFilterFields = {
  Limit: 20,
  Offset: 0,
  ProjectId: [],
  AccessRegion: [],
  RealServerRegion: [],
  GroupId: []
};
var QAAPFilterFieldsDescriptor = [{
  key: 'Offset',
  enDescriptor: 'Offset',
  cnDescriptor: '偏移量, 例如Offset=20&Limit=20 返回第 20 到 40 项',
  link: '',
  type: 'inputNumber',
  min: 0
}, {
  key: 'Limit',
  enDescriptor: 'Limit',
  cnDescriptor: '单次请求返回的数量，默认为20，最小值为1，最大值为100',
  link: '',
  type: 'inputNumber',
  min: 1,
  max: 100
}, {
  key: 'ProjectId',
  enDescriptor: 'ProjectId',
  cnDescriptor: '项目ID',
  link: '',
  type: 'inputMulti'
}, {
  key: 'AccessRegion',
  enDescriptor: 'AccessRegion',
  cnDescriptor: '接入地域',
  link: '',
  type: 'inputMulti'
}, {
  key: 'RealServerRegion',
  enDescriptor: 'RealServerRegion',
  cnDescriptor: '源站地域',
  link: '',
  type: 'inputMulti'
}, {
  key: 'GroupId',
  enDescriptor: 'GroupId',
  cnDescriptor: '通道组ID',
  link: '',
  type: 'inputMulti'
}]; // 各产品实例列表detail配置

var queryEditorConfig = {
  instanceDocUrl: 'https://cloud.tencent.com/document/api/608/36963',
  namespace: namespace,
  fieldDescriptor: QAAPFilterFieldsDescriptor
};
var QAAP_STATE = {
  region: '',
  metricName: '',
  metricUnit: '',
  period: undefined,
  dimensionObject: null,
  instance: '',
  instanceAlias: 'InstanceId',
  queries: QAAPFilterFields
};

function GetInstanceQueryParams(queries) {
  if (queries === void 0) {
    queries = {};
  }

  return Object(_common_utils__WEBPACK_IMPORTED_MODULE_1__["instanceQueryParamsBaseParse"])(queries, true);
}

function modifyDimensons(metricItem) {
  var metricTmp = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.cloneDeep(metricItem); // metricTmp.Dimensions.forEach((item) => {
  //   item.Dimensions = ['netDetectId'];
  // });


  return metricTmp;
}

/* harmony default export */ __webpack_exports__["default"] = (QAAP_STATE);


/***/ }),

/***/ "./datasource/tc_monitor/redis/datasource.ts":
/*!***************************************************!*\
  !*** ./datasource/tc_monitor/redis/datasource.ts ***!
  \***************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _query_def__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./query_def */ "./datasource/tc_monitor/redis/query_def.ts");
/* harmony import */ var _base_datasource__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../_base/datasource */ "./datasource/tc_monitor/_base/datasource.ts");
var __extends = undefined && undefined.__extends || function () {
  var _extendStatics = function extendStatics(d, b) {
    _extendStatics = Object.setPrototypeOf || {
      __proto__: []
    } instanceof Array && function (d, b) {
      d.__proto__ = b;
    } || function (d, b) {
      for (var p in b) {
        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];
      }
    };

    return _extendStatics(d, b);
  };

  return function (d, b) {
    if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");

    _extendStatics(d, b);

    function __() {
      this.constructor = d;
    }

    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();

var __assign = undefined && undefined.__assign || function () {
  __assign = Object.assign || function (t) {
    for (var s, i = 1, n = arguments.length; i < n; i++) {
      s = arguments[i];

      for (var p in s) {
        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
      }
    }

    return t;
  };

  return __assign.apply(this, arguments);
};

var __awaiter = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {
  function adopt(value) {
    return value instanceof P ? value : new P(function (resolve) {
      resolve(value);
    });
  }

  return new (P || (P = Promise))(function (resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }

    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }

    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }

    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};

var __generator = undefined && undefined.__generator || function (thisArg, body) {
  var _ = {
    label: 0,
    sent: function sent() {
      if (t[0] & 1) throw t[1];
      return t[1];
    },
    trys: [],
    ops: []
  },
      f,
      y,
      t,
      g;
  return g = {
    next: verb(0),
    "throw": verb(1),
    "return": verb(2)
  }, typeof Symbol === "function" && (g[Symbol.iterator] = function () {
    return this;
  }), g;

  function verb(n) {
    return function (v) {
      return step([n, v]);
    };
  }

  function step(op) {
    if (f) throw new TypeError("Generator is already executing.");

    while (_) {
      try {
        if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
        if (y = 0, t) op = [op[0] & 2, t.value];

        switch (op[0]) {
          case 0:
          case 1:
            t = op;
            break;

          case 4:
            _.label++;
            return {
              value: op[1],
              done: false
            };

          case 5:
            _.label++;
            y = op[1];
            op = [0];
            continue;

          case 7:
            op = _.ops.pop();

            _.trys.pop();

            continue;

          default:
            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
              _ = 0;
              continue;
            }

            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
              _.label = op[1];
              break;
            }

            if (op[0] === 6 && _.label < t[1]) {
              _.label = t[1];
              t = op;
              break;
            }

            if (t && _.label < t[2]) {
              _.label = t[2];

              _.ops.push(op);

              break;
            }

            if (t[2]) _.ops.pop();

            _.trys.pop();

            continue;
        }

        op = body.call(thisArg, _);
      } catch (e) {
        op = [6, e];
        y = 0;
      } finally {
        f = t = 0;
      }
    }

    if (op[0] & 5) throw op[1];
    return {
      value: op[0] ? op[1] : void 0,
      done: true
    };
  }
};




var REDISDatasource =
/** @class */
function (_super) {
  __extends(REDISDatasource, _super);

  function REDISDatasource(instanceSettings, backendSrv, templateSrv) {
    var _this = _super.call(this, instanceSettings, backendSrv, templateSrv) || this;

    _this.Namespace = 'QCE/REDIS';
    _this.InstanceAliasList = _query_def__WEBPACK_IMPORTED_MODULE_0__["REDISInstanceAliasList"];
    _this.InvalidDimensions = _query_def__WEBPACK_IMPORTED_MODULE_0__["RedisInvalidDemensions"];
    _this.templateQueryIdMap = {
      instance: 'InstanceId'
    };
    _this.InstanceReqConfig = {
      service: 'redis',
      action: 'DescribeInstances',
      responseField: 'InstanceSet',
      interceptor: {
        request: function request(params) {
          return __assign(__assign({}, params), {
            MonitorVersion: '1m'
          });
        }
      }
    };
    return _this;
  }

  REDISDatasource.prototype.getMetrics = function (region) {
    if (region === void 0) {
      region = 'ap-guangzhou';
    }

    return __awaiter(this, void 0, void 0, function () {
      var rawSet;
      return __generator(this, function (_a) {
        switch (_a.label) {
          case 0:
            return [4
            /*yield*/
            , _super.prototype.getMetrics.call(this, region)];

          case 1:
            rawSet = _a.sent();
            return [2
            /*return*/
            , rawSet.filter(function (item) {
              return Object(_query_def__WEBPACK_IMPORTED_MODULE_0__["isValidMetric"])(item);
            })];
        }
      });
    });
  };

  return REDISDatasource;
}(_base_datasource__WEBPACK_IMPORTED_MODULE_1__["BaseDatasource"]);

/* harmony default export */ __webpack_exports__["default"] = (REDISDatasource);

/***/ }),

/***/ "./datasource/tc_monitor/redis/query.ts":
/*!**********************************************!*\
  !*** ./datasource/tc_monitor/redis/query.ts ***!
  \**********************************************/
/*! exports provided: RedisQueryCtrl, redisQuery */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RedisQueryCtrl", function() { return RedisQueryCtrl; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "redisQuery", function() { return redisQuery; });
/* harmony import */ var grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! grafana/app/core/core_module */ "grafana/app/core/core_module");
/* harmony import */ var grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _query_def__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./query_def */ "./datasource/tc_monitor/redis/query_def.ts");



var RedisQueryCtrl =
/** @class */
function () {
  RedisQueryCtrl.$inject = ["$scope", "$rootScope"];

  /** @ngInject */
  function RedisQueryCtrl($scope, $rootScope) {
    $scope.init = function () {
      $scope.RedisFieldsDescriptor = _query_def__WEBPACK_IMPORTED_MODULE_1__["RedisFieldsDescriptor"];
    };

    $scope.onChecked = function (srcField, dstField) {
      if ($scope.target.queries[srcField] === true) {
        $scope.target.queries[dstField] = false;
      }

      $scope.onChange();
    };

    $scope.getDropdown = function (field) {
      switch (field) {
        default:
          return [];
      }
    };

    $scope.init();
  }

  return RedisQueryCtrl;
}();


var template = "\n<div class=\"tc-sub-params\" ng-if=\"showDetail\">\n  <label class=\"gf-form-label tc-info-label\">\n    Instances are queried by following params.\n    <a target=\"_blank\" style=\"text-decoration:underline;color:#006eff;font-size:medium\" href=\"https://cloud.tencent.com/document/api/240/35769\">Click here to get API doc.</a>\n  </label>\n  <div class=\"gf-form-inline\" ng-repeat=\"field in RedisFieldsDescriptor\">\n    <div class=\"gf-form\">\n      <label class=\"gf-form-label width-14\">\n        {{ field.key }}\n        <info-popover mode=\"right-normal\">\n          {{ field.cnDescriptor }}\n          <a target=\"_blank\" href=\"{{field.link}}\" ng-if=\"field.link\">Click here for more information.</a>\n        </info-popover>\n      </label>\n      <input\n        ng-if=\"field.type === 'inputnumber'\"\n        style=\"margin-right:2px\"\n        type=\"number\"\n        ng-model=\"target.queries[field.key]\"\n        ng-change=\"onChange()\"\n        class=\"gf-form-input width-10\"\n        ng-min=\"field.min\"\n        ng-max=\"field.max\"\n      />\n      <input\n        ng-if=\"field.type === 'input'\"\n        style=\"margin-right:2px\"\n        type=\"text\"\n        ng-model=\"target.queries[field.key]\"\n        ng-change=\"onChange()\"\n        class=\"gf-form-input width-10\"\n      />\n      <gf-form-dropdown\n        ng-if=\"field.type === 'dropdown'\"\n        model=\"target.queries[field.key]\"\n        allow-custom=\"true\"\n        lookup-text=\"true\"\n        get-options=\"getDropdown(field.key)\"\n        on-change=\"onChange()\"\n        css-class=\"min-width-10\"\n      ></gf-form-dropdown>\n      <multi-condition\n        ng-if=\"field.type === 'inputmulti'\"\n        type=\"'input'\"\n        value=\"target.queries[field.key]\"\n        on-change=\"onChange()\"\n      ></multi-condition>\n      <multi-condition\n        ng-if=\"field.type === 'dropdownmulti'\"\n        type=\"'dropdown'\"\n        value=\"target.queries[field.key]\"\n        on-change=\"onChange()\"\n        get-options=\"getDropdown(field.key)\"\n      ></multi-condition>\n      <custom-select-dropdown\n        ng-if=\"field.type === 'select'\"\n        value=\"target.queries[field.key]\"\n        options=\"field.list\"\n        multiple=\"field.multiple || false\"\n        on-change=\"onChange()\"\n      ></custom-select-dropdown>\n    </div>\n  </div>\n\n</div>\n";
function redisQuery() {
  return {
    template: template,
    controller: RedisQueryCtrl,
    restrict: 'E',
    scope: {
      target: '=',
      showDetail: '=',
      region: '=',
      datasource: '=',
      onChange: '&'
    }
  };
}
grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0___default.a.directive('redisQuery', redisQuery);

/***/ }),

/***/ "./datasource/tc_monitor/redis/query_def.ts":
/*!**************************************************!*\
  !*** ./datasource/tc_monitor/redis/query_def.ts ***!
  \**************************************************/
/*! exports provided: default, RedisFieldsDescriptor, RedisInvalidDemensions, templateQueryIdMap, REDISInstanceAliasList, isValidMetric, REDISGetInstanceQueryParams */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RedisFieldsDescriptor", function() { return RedisFieldsDescriptor; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RedisInvalidDemensions", function() { return RedisInvalidDemensions; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "templateQueryIdMap", function() { return templateQueryIdMap; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "REDISInstanceAliasList", function() { return REDISInstanceAliasList; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isValidMetric", function() { return isValidMetric; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "REDISGetInstanceQueryParams", function() { return GetInstanceQueryParams; });
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lodash */ "lodash");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__);
var __assign = undefined && undefined.__assign || function () {
  __assign = Object.assign || function (t) {
    for (var s, i = 1, n = arguments.length; i < n; i++) {
      s = arguments[i];

      for (var p in s) {
        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
      }
    }

    return t;
  };

  return __assign.apply(this, arguments);
};


var BillingMode = [{
  text: '按量计费',
  value: 'postpaid'
}, {
  text: '包年包月',
  value: 'prepaid'
}];
var AutoRenew = [{
  text: '手动续费',
  value: 0
}, {
  text: '自动续费',
  value: 1
}, {
  text: '明确不自动续费',
  value: 2
}];
var Status = [{
  text: '待初始化',
  value: 0
}, {
  text: '流程执行中',
  value: 1
}, {
  text: '运行中',
  value: 2
}, {
  text: '已隔离',
  value: -2
}, {
  text: '待删除',
  value: -3
}];
var TypeVersion = [{
  text: '单机版',
  value: 1
}, {
  text: '主从版',
  value: 2
}, {
  text: '集群版',
  value: 3
}];
var OrderBy = [{
  text: 'projectId',
  value: 'projectId'
}, {
  text: 'instancename',
  value: 'instancename'
}, {
  text: 'createtime',
  value: 'createtime'
}, {
  text: 'type',
  value: 'type'
}, {
  text: 'curDeadline',
  value: 'curDeadline'
}];
var OrderType = [{
  text: '升序',
  value: 0
}, {
  text: '降序',
  value: 1
}];
var Type = [{
  text: 'Redis老集群版',
  value: 1
}, {
  text: 'Redis 2.8主从版',
  value: 2
}, {
  text: 'CKV主从版',
  value: 3
}, {
  text: 'CKV集群版',
  value: 4
}, {
  text: 'Redis 2.8单机版',
  value: 5
}, {
  text: 'Redis 4.0主从版',
  value: 6
}, {
  text: 'Redis 4.0集群版',
  value: 7
}, {
  text: 'Redis5.0主从版',
  value: 8
}, {
  text: 'Redis5.0集群版',
  value: 9
}];
var RedisFields = {
  InstanceId: '',
  OrderBy: '',
  OrderType: null,
  VpcIds: [],
  SubnetIds: [],
  ProjectIds: [],
  SearchKey: '',
  InstanceName: '',
  UniqVpcIds: [],
  UniqSubnetIds: [],
  Status: [],
  TypeVersion: null,
  EngineName: '',
  AutoRenew: null,
  BillingMode: '',
  Type: null
};
var RedisFieldsDescriptor = [{
  key: 'Offset',
  enDescriptor: 'Offset',
  cnDescriptor: '偏移量, 例如Offset=20&Limit=20 返回第 20 到 40 项',
  link: '',
  type: 'inputnumber',
  min: 0
}, {
  key: 'Limit',
  enDescriptor: 'Limit',
  cnDescriptor: '单次请求返回的数量，默认为20，最小值为1，最大值为100',
  link: '',
  type: 'inputnumber',
  min: 1,
  max: 100
}, {
  key: 'InstanceId',
  enDescriptor: 'InstancesId',
  cnDescriptor: '实例id',
  type: 'input'
}, {
  key: 'OrderBy',
  enDescriptor: 'OrderBy',
  cnDescriptor: '排序字段',
  link: '',
  type: 'select',
  list: OrderBy
}, {
  key: 'OrderType',
  enDescriptor: 'OrderType',
  cnDescriptor: '排序字段',
  link: '',
  type: 'select',
  list: OrderType
}, {
  key: 'VpcIds',
  enDescriptor: 'VpcIds',
  cnDescriptor: '私有网络ID数组，数组下标从0开始，如果不传则默认选择基础网络，如：47525',
  link: '',
  type: 'inputmulti'
}, {
  key: 'SubnetIds',
  enDescriptor: 'SubnetIds',
  cnDescriptor: '子网ID数组，数组下标从0开始，如：56854',
  link: '',
  type: 'inputmulti'
}, {
  key: 'ProjectIds',
  enDescriptor: 'ProjectIds',
  cnDescriptor: '项目ID 组成的数组',
  link: '',
  type: 'inputmulti'
}, {
  key: 'SearchKey',
  enDescriptor: 'SearchKey',
  cnDescriptor: '查找实例的ID',
  link: '',
  type: 'input'
}, {
  key: 'InstanceName',
  enDescriptor: 'InstanceName',
  cnDescriptor: '实例名称',
  link: '',
  type: 'input'
}, {
  key: 'UniqVpcIds',
  enDescriptor: 'UniqVpcIds',
  cnDescriptor: '私有网络ID数组，数组下标从0开始，如果不传则默认选择基础网络，如：vpc-sad23jfdfk',
  link: '',
  type: 'inputmulti'
}, {
  key: 'UniqSubnetIds',
  enDescriptor: 'UniqSubnetIds',
  cnDescriptor: '子网ID数组，数组下标从0开始，如：subnet-fdj24n34j2',
  link: '',
  type: 'inputmulti'
}, {
  key: 'Status',
  enDescriptor: 'Status',
  cnDescriptor: '实例状态',
  multiple: true,
  type: 'select',
  list: Status
}, {
  key: 'TypeVersion',
  enDescriptor: 'TypeVersion',
  cnDescriptor: '类型版本',
  link: '',
  type: 'select',
  list: TypeVersion
}, {
  key: 'EngineName',
  enDescriptor: 'EngineName',
  cnDescriptor: '引擎信息：Redis-2.8，Redis-4.0，CKV',
  link: '',
  type: 'input'
}, {
  key: 'AutoRenew',
  enDescriptor: 'AutoRenew',
  cnDescriptor: '续费模式',
  multiple: true,
  type: 'select',
  list: AutoRenew
}, {
  key: 'BillingMode',
  enDescriptor: 'BillingMode',
  cnDescriptor: '计费模式：postpaid-按量计费；prepaid-包年包月',
  link: '',
  type: 'select',
  list: BillingMode
}, {
  key: 'Type',
  enDescriptor: 'Type',
  cnDescriptor: '实例类型',
  link: '',
  type: 'select',
  list: Type
}];
var REDIS_STATE = {
  region: '',
  metricName: '',
  metricUnit: '',
  period: undefined,
  dimensionObject: null,
  instance: '',
  instanceAlias: 'InstanceId',
  queries: __assign({}, RedisFields)
};

function GetInstanceQueryParams(queries) {
  if (queries === void 0) {
    queries = {};
  }

  var params = {};

  if (!lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isEmpty(queries)) {
    params.Limit = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(queries, 'Limit', 20) || 20;
    params.Offset = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(queries, 'Offset', 0) || 0;
    queries = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.omit(queries, ['Offset', 'Limit']);

    lodash__WEBPACK_IMPORTED_MODULE_0___default.a.forEach(queries, function (item, key) {
      if (lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isArray(item)) {
        item = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.compact(item);

        if (item.length > 0) {
          params[key] = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.uniq(item);
        }
      } else if (lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isObject(item)) {
        // select 单选
        if (lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isNumber(lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(item, 'value', undefined)) || !lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isEmpty(lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(item, 'value', undefined))) {
          params[key] = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(item, 'value');
        }
      } else if (lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isNumber(item) || !lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isEmpty(item)) {
        params[key] = item;
      }
    });
  }

  return params;
}

function isValidMetric(metricObj) {
  if (metricObj === void 0) {
    metricObj = {};
  }

  var dimension = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(metricObj, 'Dimensions[0].Dimensions');

  return dimension.length === 1 && lodash__WEBPACK_IMPORTED_MODULE_0___default.a.indexOf(dimension, 'instanceid') !== -1;
}

var REDISInstanceAliasList = ['InstanceId', 'InstanceName', 'WanIp'];
var RedisInvalidDemensions = {
  redis_uuid: 'InstanceId',
  instanceid: 'InstanceId'
};
var templateQueryIdMap = {
  instance: 'InstanceId'
};
/* harmony default export */ __webpack_exports__["default"] = (REDIS_STATE);


/***/ }),

/***/ "./datasource/tc_monitor/redis_mem/datasource.ts":
/*!*******************************************************!*\
  !*** ./datasource/tc_monitor/redis_mem/datasource.ts ***!
  \*******************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lodash */ "lodash");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _query_def__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./query_def */ "./datasource/tc_monitor/redis_mem/query_def.ts");
/* harmony import */ var _base_datasource__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../_base/datasource */ "./datasource/tc_monitor/_base/datasource.ts");
/* harmony import */ var _common_constants__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../common/constants */ "./datasource/common/constants.ts");
/* harmony import */ var _common_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../common/utils */ "./datasource/common/utils.ts");
var __extends = undefined && undefined.__extends || function () {
  var _extendStatics = function extendStatics(d, b) {
    _extendStatics = Object.setPrototypeOf || {
      __proto__: []
    } instanceof Array && function (d, b) {
      d.__proto__ = b;
    } || function (d, b) {
      for (var p in b) {
        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];
      }
    };

    return _extendStatics(d, b);
  };

  return function (d, b) {
    if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");

    _extendStatics(d, b);

    function __() {
      this.constructor = d;
    }

    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();

var __assign = undefined && undefined.__assign || function () {
  __assign = Object.assign || function (t) {
    for (var s, i = 1, n = arguments.length; i < n; i++) {
      s = arguments[i];

      for (var p in s) {
        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
      }
    }

    return t;
  };

  return __assign.apply(this, arguments);
};

var __awaiter = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {
  function adopt(value) {
    return value instanceof P ? value : new P(function (resolve) {
      resolve(value);
    });
  }

  return new (P || (P = Promise))(function (resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }

    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }

    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }

    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};

var __generator = undefined && undefined.__generator || function (thisArg, body) {
  var _ = {
    label: 0,
    sent: function sent() {
      if (t[0] & 1) throw t[1];
      return t[1];
    },
    trys: [],
    ops: []
  },
      f,
      y,
      t,
      g;
  return g = {
    next: verb(0),
    "throw": verb(1),
    "return": verb(2)
  }, typeof Symbol === "function" && (g[Symbol.iterator] = function () {
    return this;
  }), g;

  function verb(n) {
    return function (v) {
      return step([n, v]);
    };
  }

  function step(op) {
    if (f) throw new TypeError("Generator is already executing.");

    while (_) {
      try {
        if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
        if (y = 0, t) op = [op[0] & 2, t.value];

        switch (op[0]) {
          case 0:
          case 1:
            t = op;
            break;

          case 4:
            _.label++;
            return {
              value: op[1],
              done: false
            };

          case 5:
            _.label++;
            y = op[1];
            op = [0];
            continue;

          case 7:
            op = _.ops.pop();

            _.trys.pop();

            continue;

          default:
            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
              _ = 0;
              continue;
            }

            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
              _.label = op[1];
              break;
            }

            if (op[0] === 6 && _.label < t[1]) {
              _.label = t[1];
              t = op;
              break;
            }

            if (t && _.label < t[2]) {
              _.label = t[2];

              _.ops.push(op);

              break;
            }

            if (t[2]) _.ops.pop();

            _.trys.pop();

            continue;
        }

        op = body.call(thisArg, _);
      } catch (e) {
        op = [6, e];
        y = 0;
      } finally {
        f = t = 0;
      }
    }

    if (op[0] & 5) throw op[1];
    return {
      value: op[0] ? op[1] : void 0,
      done: true
    };
  }
};







var REDISDatasource =
/** @class */
function (_super) {
  __extends(REDISDatasource, _super);

  function REDISDatasource(instanceSettings, backendSrv, templateSrv) {
    var _this = _super.call(this, instanceSettings, backendSrv, templateSrv) || this;

    _this.Namespace = _query_def__WEBPACK_IMPORTED_MODULE_1__["namespace"];
    _this.InstanceAliasList = _query_def__WEBPACK_IMPORTED_MODULE_1__["REDISMEMInstanceAliasList"];
    _this.InvalidDimensions = _query_def__WEBPACK_IMPORTED_MODULE_1__["RedisMemInvalidDemensions"];
    _this.templateQueryIdMap = _query_def__WEBPACK_IMPORTED_MODULE_1__["templateQueryIdMap"];
    _this.extrasAlias = [_query_def__WEBPACK_IMPORTED_MODULE_1__["RedisMemInvalidDemensions"].pnodeid, _query_def__WEBPACK_IMPORTED_MODULE_1__["RedisMemInvalidDemensions"].rnodeid];
    _this.InstanceReqConfig = {
      service: 'redis',
      action: 'DescribeInstances',
      responseField: 'InstanceSet',
      interceptor: {
        request: function request(params) {
          return __assign(__assign({}, params), {
            MonitorVersion: '5s'
          });
        }
      }
    };
    return _this;
  }

  REDISDatasource.prototype.getInstanceNodeInfo = function (params) {
    return __awaiter(this, void 0, void 0, function () {
      var region, instanceId, serviceInfo, res;

      var _this = this;

      return __generator(this, function (_a) {
        switch (_a.label) {
          case 0:
            region = params.region, instanceId = params.instanceId;
            serviceInfo = Object(_common_constants__WEBPACK_IMPORTED_MODULE_3__["GetServiceAPIInfo"])(region, 'redis');
            return [4
            /*yield*/
            , Object(_common_utils__WEBPACK_IMPORTED_MODULE_4__["fetchAllFactory"])(function (data) {
              return _this.doRequest({
                url: _this.url + serviceInfo.path,
                data: data
              }, serviceInfo.service, {
                region: region,
                action: 'DescribeInstanceNodeInfo'
              });
            }, {
              InstanceId: instanceId
            }, _query_def__WEBPACK_IMPORTED_MODULE_1__["NodeType"])];

          case 1:
            res = _a.sent();
            return [2
            /*return*/
            , res];
        }
      });
    });
  };

  REDISDatasource.prototype.fetchMetricData = function (action, region, instance, query) {
    return __awaiter(this, void 0, void 0, function () {
      var rs, nodetype, ndoeTypeIndex;
      return __generator(this, function (_a) {
        switch (_a.label) {
          case 0:
            if (!(action === 'DescribeInstanceNodeInfo')) return [3
            /*break*/
            , 2];
            return [4
            /*yield*/
            , this.getInstanceNodeInfo({
              region: region,
              instanceId: instance[this.templateQueryIdMap.instance]
            })];

          case 1:
            rs = _a.sent();
            nodetype = query.nodetype;
            ndoeTypeIndex = _query_def__WEBPACK_IMPORTED_MODULE_1__["NodeType"].indexOf(nodetype);
            return [2
            /*return*/
            , ndoeTypeIndex === -1 ? [] : lodash__WEBPACK_IMPORTED_MODULE_0___default.a.map(rs[ndoeTypeIndex], function (item) {
              return {
                text: item.NodeId,
                value: item.NodeId
              };
            })];

          case 2:
            return [2
            /*return*/
            , []];
        }
      });
    });
  };

  return REDISDatasource;
}(_base_datasource__WEBPACK_IMPORTED_MODULE_2__["BaseDatasource"]);

/* harmony default export */ __webpack_exports__["default"] = (REDISDatasource);

/***/ }),

/***/ "./datasource/tc_monitor/redis_mem/query.ts":
/*!**************************************************!*\
  !*** ./datasource/tc_monitor/redis_mem/query.ts ***!
  \**************************************************/
/*! exports provided: RedisMemQueryCtrl, redisMemQuery */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RedisMemQueryCtrl", function() { return RedisMemQueryCtrl; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "redisMemQuery", function() { return redisMemQuery; });
/* harmony import */ var grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! grafana/app/core/core_module */ "grafana/app/core/core_module");
/* harmony import */ var grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lodash */ "lodash");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _query_def__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./query_def */ "./datasource/tc_monitor/redis_mem/query_def.ts");
/* harmony import */ var _common_constants__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../common/constants */ "./datasource/common/constants.ts");
var __awaiter = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {
  function adopt(value) {
    return value instanceof P ? value : new P(function (resolve) {
      resolve(value);
    });
  }

  return new (P || (P = Promise))(function (resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }

    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }

    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }

    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};

var __generator = undefined && undefined.__generator || function (thisArg, body) {
  var _ = {
    label: 0,
    sent: function sent() {
      if (t[0] & 1) throw t[1];
      return t[1];
    },
    trys: [],
    ops: []
  },
      f,
      y,
      t,
      g;
  return g = {
    next: verb(0),
    "throw": verb(1),
    "return": verb(2)
  }, typeof Symbol === "function" && (g[Symbol.iterator] = function () {
    return this;
  }), g;

  function verb(n) {
    return function (v) {
      return step([n, v]);
    };
  }

  function step(op) {
    if (f) throw new TypeError("Generator is already executing.");

    while (_) {
      try {
        if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
        if (y = 0, t) op = [op[0] & 2, t.value];

        switch (op[0]) {
          case 0:
          case 1:
            t = op;
            break;

          case 4:
            _.label++;
            return {
              value: op[1],
              done: false
            };

          case 5:
            _.label++;
            y = op[1];
            op = [0];
            continue;

          case 7:
            op = _.ops.pop();

            _.trys.pop();

            continue;

          default:
            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
              _ = 0;
              continue;
            }

            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
              _.label = op[1];
              break;
            }

            if (op[0] === 6 && _.label < t[1]) {
              _.label = t[1];
              t = op;
              break;
            }

            if (t && _.label < t[2]) {
              _.label = t[2];

              _.ops.push(op);

              break;
            }

            if (t[2]) _.ops.pop();

            _.trys.pop();

            continue;
        }

        op = body.call(thisArg, _);
      } catch (e) {
        op = [6, e];
        y = 0;
      } finally {
        f = t = 0;
      }
    }

    if (op[0] & 5) throw op[1];
    return {
      value: op[0] ? op[1] : void 0,
      done: true
    };
  }
};






var RedisMemQueryCtrl =
/** @class */
function () {
  RedisMemQueryCtrl.$inject = ["$scope", "$rootScope"];

  /** @ngInject */
  function RedisMemQueryCtrl($scope, $rootScope) {
    var _this = this;

    $scope.init = function () {
      $scope.RedisMemFieldsDescriptor = _query_def__WEBPACK_IMPORTED_MODULE_2__["RedisMemFieldsDescriptor"];
    };

    $scope.clearExtrasAlias = function () {
      $scope.target.rnodeid = '';
      $scope.target.pnodeid = '';
    };

    $scope.onChecked = function (srcField, dstField) {
      if ($scope.target.queries[srcField] === true) {
        $scope.target.queries[dstField] = false;
      }

      $scope.onChange();
    };

    $scope.getDropdown = function (field) {
      switch (field) {
        default:
          return [];
      }
    };

    $scope.getVariableId = function (data, type) {
      var variableData = data;
      var service = Object(_common_constants__WEBPACK_IMPORTED_MODULE_3__["GetServiceFromNamespace"])(_query_def__WEBPACK_IMPORTED_MODULE_2__["namespace"]);
      variableData = $scope.datasource.getServiceFn(service, 'getVariable')(variableData);

      if (!variableData) {
        return '';
      }

      try {
        variableData = JSON.parse(variableData)[_query_def__WEBPACK_IMPORTED_MODULE_2__["templateQueryIdMap"][type]];
      } catch (error) {}

      return variableData;
    };

    $scope.getExtraDropdown = function (target, nodetype) {
      return __awaiter(_this, void 0, void 0, function () {
        var instance, service, instanceId, region, rs, ndoeTypeIndex;
        return __generator(this, function (_a) {
          switch (_a.label) {
            case 0:
              instance = $scope.target.instance;
              service = Object(_common_constants__WEBPACK_IMPORTED_MODULE_3__["GetServiceFromNamespace"])(_query_def__WEBPACK_IMPORTED_MODULE_2__["namespace"]);
              instanceId = $scope.getVariableId(instance, 'instance');
              region = $scope.datasource.getServiceFn(service, 'getVariable')(target.region);
              return [4
              /*yield*/
              , $scope.datasource.getServiceFn(service, 'getInstanceNodeInfo')({
                region: region,
                instanceId: instanceId
              })];

            case 1:
              rs = _a.sent();
              ndoeTypeIndex = _query_def__WEBPACK_IMPORTED_MODULE_2__["NodeType"].indexOf(nodetype);
              return [2
              /*return*/
              , ndoeTypeIndex === -1 ? [] : Object(lodash__WEBPACK_IMPORTED_MODULE_1__["map"])(rs[ndoeTypeIndex], function (item) {
                return {
                  text: item.NodeId,
                  value: item.NodeId
                };
              })];
          }
        });
      });
    };

    $scope.init();
  }

  return RedisMemQueryCtrl;
}();


var template = "\n<div class=\"tc-sub-params\" ng-if=\"showDetail\">\n  <label class=\"gf-form-label tc-info-label\">\n    Instances are queried by following params.\n    <a target=\"_blank\" style=\"text-decoration:underline;color:#006eff;font-size:medium\" href=\"https://cloud.tencent.com/document/api/240/35769\">Click here to get API doc.</a>\n  </label>\n  <div class=\"gf-form-inline\" ng-repeat=\"field in RedisMemFieldsDescriptor\">\n    <div class=\"gf-form\">\n      <label class=\"gf-form-label width-14\">\n        {{ field.key }}\n        <info-popover mode=\"right-normal\">\n          {{ field.cnDescriptor }}\n          <a target=\"_blank\" href=\"{{field.link}}\" ng-if=\"field.link\">Click here for more information.</a>\n        </info-popover>\n      </label>\n      <input\n        ng-if=\"field.type === 'inputnumber'\"\n        style=\"margin-right:2px\"\n        type=\"number\"\n        ng-model=\"target.queries[field.key]\"\n        ng-change=\"onChange()\"\n        class=\"gf-form-input width-10\"\n        ng-min=\"field.min\"\n        ng-max=\"field.max\"\n      />\n      <input\n        ng-if=\"field.type === 'input'\"\n        style=\"margin-right:2px\"\n        type=\"text\"\n        ng-model=\"target.queries[field.key]\"\n        ng-change=\"onChange()\"\n        class=\"gf-form-input width-10\"\n      />\n      <gf-form-dropdown\n        ng-if=\"field.type === 'dropdown'\"\n        model=\"target.queries[field.key]\"\n        allow-custom=\"true\"\n        lookup-text=\"true\"\n        get-options=\"getDropdown(field.key)\"\n        on-change=\"onChange()\"\n        css-class=\"min-width-10\"\n      ></gf-form-dropdown>\n      <multi-condition\n        ng-if=\"field.type === 'inputmulti'\"\n        type=\"'input'\"\n        value=\"target.queries[field.key]\"\n        on-change=\"onChange()\"\n      ></multi-condition>\n      <multi-condition\n        ng-if=\"field.type === 'dropdownmulti'\"\n        type=\"'dropdown'\"\n        value=\"target.queries[field.key]\"\n        on-change=\"onChange()\"\n        get-options=\"getDropdown(field.key)\"\n      ></multi-condition>\n      <custom-select-dropdown\n        ng-if=\"field.type === 'select'\"\n        value=\"target.queries[field.key]\"\n        options=\"field.list\"\n        multiple=\"field.multiple || false\"\n        on-change=\"onChange()\"\n      ></custom-select-dropdown>\n    </div>\n  </div>\n\n</div>\n\n<div class=\"gf-form-inline\" ng-if=\"target.instance && dims.rnodeid\">\n  <div class=\"gf-form\">\n    <label class=\"gf-form-label query-keyword width-9\">\n      RedisNode\n    </label>\n    <div class=\"gf-form-select-wrapper gf-form-select-wrapper--caret-indent\">\n      <gf-form-dropdown model=\"target.rnodeid\" allow-custom=\"true\" lookup-text=\"true\" get-options=\"getExtraDropdown(target, 'Redis')\"\n        on-change=\"onRefresh()\" css-class=\"min-width-10\">\n      </gf-form-dropdown>\n    </div>\n  </div>\n</div>\n<div class=\"gf-form-inline\" ng-if=\"target.instance && dims.pnodeid\">\n  <div class=\"gf-form\">\n    <label class=\"gf-form-label query-keyword width-9\">\n      ProxyNode\n    </label>\n    <div class=\"gf-form-select-wrapper gf-form-select-wrapper--caret-indent\">\n      <gf-form-dropdown model=\"target.pnodeid\" allow-custom=\"true\" lookup-text=\"true\" get-options=\"getExtraDropdown(target, 'Proxy')\"\n        on-change=\"onRefresh()\" css-class=\"min-width-10\">\n      </gf-form-dropdown>\n    </div>\n  </div>\n</div>\n";
function redisMemQuery() {
  return {
    template: template,
    controller: RedisMemQueryCtrl,
    restrict: 'E',
    scope: {
      target: '=',
      showDetail: '=',
      region: '=',
      datasource: '=',
      onChange: '&',
      onRefresh: '&',
      dims: '='
    },
    link: function link(scope, element, attrs) {
      scope.$watch('target.instance', function () {
        var _a;

        (_a = scope.clearExtrasAlias) === null || _a === void 0 ? void 0 : _a.call(scope);
      });
      scope.$watch('target.metricName', function () {
        var _a;

        (_a = scope.clearExtrasAlias) === null || _a === void 0 ? void 0 : _a.call(scope);
      });
    }
  };
}
grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0___default.a.directive('redisMemQuery', redisMemQuery);

/***/ }),

/***/ "./datasource/tc_monitor/redis_mem/query_def.ts":
/*!******************************************************!*\
  !*** ./datasource/tc_monitor/redis_mem/query_def.ts ***!
  \******************************************************/
/*! exports provided: default, RedisMemFieldsDescriptor, RedisMemInvalidDemensions, REDISMEMInstanceAliasList, templateQueryIdMap, namespace, NodeType, REDISMEMGetInstanceQueryParams */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RedisMemFieldsDescriptor", function() { return RedisMemFieldsDescriptor; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RedisMemInvalidDemensions", function() { return RedisMemInvalidDemensions; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "REDISMEMInstanceAliasList", function() { return REDISMEMInstanceAliasList; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "templateQueryIdMap", function() { return templateQueryIdMap; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "namespace", function() { return namespace; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "NodeType", function() { return NodeType; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "REDISMEMGetInstanceQueryParams", function() { return GetInstanceQueryParams; });
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lodash */ "lodash");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__);
var __assign = undefined && undefined.__assign || function () {
  __assign = Object.assign || function (t) {
    for (var s, i = 1, n = arguments.length; i < n; i++) {
      s = arguments[i];

      for (var p in s) {
        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
      }
    }

    return t;
  };

  return __assign.apply(this, arguments);
};


var namespace = 'QCE/REDIS_MEM';
var BillingMode = [{
  text: '按量计费',
  value: 'postpaid'
}, {
  text: '包年包月',
  value: 'prepaid'
}];
var AutoRenew = [{
  text: '手动续费',
  value: 0
}, {
  text: '自动续费',
  value: 1
}, {
  text: '明确不自动续费',
  value: 2
}];
var Status = [{
  text: '待初始化',
  value: 0
}, {
  text: '流程执行中',
  value: 1
}, {
  text: '运行中',
  value: 2
}, {
  text: '已隔离',
  value: -2
}, {
  text: '待删除',
  value: -3
}];
var TypeVersion = [{
  text: '单机版',
  value: 1
}, {
  text: '主从版',
  value: 2
}, {
  text: '集群版',
  value: 3
}];
var OrderBy = [{
  text: 'projectId',
  value: 'projectId'
}, {
  text: 'instancename',
  value: 'instancename'
}, {
  text: 'createtime',
  value: 'createtime'
}, {
  text: 'type',
  value: 'type'
}, {
  text: 'curDeadline',
  value: 'curDeadline'
}];
var OrderType = [{
  text: '升序',
  value: 0
}, {
  text: '降序',
  value: 1
}];
var Type = [{
  text: 'Redis老集群版',
  value: 1
}, {
  text: 'Redis 2.8主从版',
  value: 2
}, {
  text: 'CKV主从版',
  value: 3
}, {
  text: 'CKV集群版',
  value: 4
}, {
  text: 'Redis 2.8单机版',
  value: 5
}, {
  text: 'Redis 4.0主从版',
  value: 6
}, {
  text: 'Redis 4.0集群版',
  value: 7
}, {
  text: 'Redis5.0主从版',
  value: 8
}, {
  text: 'Redis5.0集群版',
  value: 9
}];
var RedisFields = {
  InstanceId: '',
  OrderBy: '',
  OrderType: null,
  VpcIds: [],
  SubnetIds: [],
  ProjectIds: [],
  SearchKey: '',
  InstanceName: '',
  UniqVpcIds: [],
  UniqSubnetIds: [],
  Status: [],
  TypeVersion: null,
  EngineName: '',
  AutoRenew: null,
  BillingMode: '',
  Type: null
};
var RedisMemFieldsDescriptor = [{
  key: 'Offset',
  enDescriptor: 'Offset',
  cnDescriptor: '偏移量, 例如Offset=20&Limit=20 返回第 20 到 40 项',
  link: '',
  type: 'inputnumber',
  min: 0
}, {
  key: 'Limit',
  enDescriptor: 'Limit',
  cnDescriptor: '单次请求返回的数量，默认为20，最小值为1，最大值为100',
  link: '',
  type: 'inputnumber',
  min: 1,
  max: 100
}, {
  key: 'InstanceId',
  enDescriptor: 'InstancesId',
  cnDescriptor: '实例id',
  type: 'input'
}, {
  key: 'OrderBy',
  enDescriptor: 'OrderBy',
  cnDescriptor: '排序字段',
  link: '',
  type: 'select',
  list: OrderBy
}, {
  key: 'OrderType',
  enDescriptor: 'OrderType',
  cnDescriptor: '排序字段',
  link: '',
  type: 'select',
  list: OrderType
}, {
  key: 'VpcIds',
  enDescriptor: 'VpcIds',
  cnDescriptor: '私有网络ID数组，数组下标从0开始，如果不传则默认选择基础网络，如：47525',
  link: '',
  type: 'inputmulti'
}, {
  key: 'SubnetIds',
  enDescriptor: 'SubnetIds',
  cnDescriptor: '子网ID数组，数组下标从0开始，如：56854',
  link: '',
  type: 'inputmulti'
}, {
  key: 'ProjectIds',
  enDescriptor: 'ProjectIds',
  cnDescriptor: '项目ID 组成的数组',
  link: '',
  type: 'inputmulti'
}, {
  key: 'SearchKey',
  enDescriptor: 'SearchKey',
  cnDescriptor: '查找实例的ID',
  link: '',
  type: 'input'
}, {
  key: 'InstanceName',
  enDescriptor: 'InstanceName',
  cnDescriptor: '实例名称',
  link: '',
  type: 'input'
}, {
  key: 'UniqVpcIds',
  enDescriptor: 'UniqVpcIds',
  cnDescriptor: '私有网络ID数组，数组下标从0开始，如果不传则默认选择基础网络，如：vpc-sad23jfdfk',
  link: '',
  type: 'inputmulti'
}, {
  key: 'UniqSubnetIds',
  enDescriptor: 'UniqSubnetIds',
  cnDescriptor: '子网ID数组，数组下标从0开始，如：subnet-fdj24n34j2',
  link: '',
  type: 'inputmulti'
}, {
  key: 'Status',
  enDescriptor: 'Status',
  cnDescriptor: '实例状态',
  multiple: true,
  type: 'select',
  list: Status
}, {
  key: 'TypeVersion',
  enDescriptor: 'TypeVersion',
  cnDescriptor: '类型版本',
  link: '',
  type: 'select',
  list: TypeVersion
}, {
  key: 'EngineName',
  enDescriptor: 'EngineName',
  cnDescriptor: '引擎信息：Redis-2.8，Redis-4.0，CKV',
  link: '',
  type: 'input'
}, {
  key: 'AutoRenew',
  enDescriptor: 'AutoRenew',
  cnDescriptor: '续费模式',
  multiple: true,
  type: 'select',
  list: AutoRenew
}, {
  key: 'BillingMode',
  enDescriptor: 'BillingMode',
  cnDescriptor: '计费模式：postpaid-按量计费；prepaid-包年包月',
  link: '',
  type: 'select',
  list: BillingMode
}, {
  key: 'Type',
  enDescriptor: 'Type',
  cnDescriptor: '实例类型',
  link: '',
  type: 'select',
  list: Type
}];
var REDISMEM_STATE = {
  region: '',
  metricName: '',
  metricUnit: '',
  period: undefined,
  dimensionObject: null,
  instance: '',
  instanceAlias: 'InstanceId',
  queries: __assign({}, RedisFields),
  rnodeid: '',
  pnodeid: ''
};

function GetInstanceQueryParams(queries) {
  if (queries === void 0) {
    queries = {};
  }

  var params = {};

  if (!lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isEmpty(queries)) {
    params.Limit = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(queries, 'Limit', 20) || 20;
    params.Offset = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(queries, 'Offset', 0) || 0;
    queries = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.omit(queries, ['Offset', 'Limit']);

    lodash__WEBPACK_IMPORTED_MODULE_0___default.a.forEach(queries, function (item, key) {
      if (lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isArray(item)) {
        item = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.compact(item);

        if (item.length > 0) {
          params[key] = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.uniq(item);
        }
      } else if (lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isObject(item)) {
        // select 单选
        if (lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isNumber(lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(item, 'value', undefined)) || !lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isEmpty(lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(item, 'value', undefined))) {
          params[key] = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(item, 'value');
        }
      } else if (lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isNumber(item) || !lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isEmpty(item)) {
        params[key] = item;
      }
    });
  }

  return params;
}

var REDISMEMInstanceAliasList = ['InstanceId', 'InstanceName', 'WanIp'];
var RedisMemInvalidDemensions = {
  instanceid: 'InstanceId',
  rnodeid: 'rnodeid',
  pnodeid: 'pnodeid'
};
var templateQueryIdMap = {
  instance: 'InstanceId',
  rnodeid: 'rnodeid',
  pnodeid: 'pnodeid'
};
var NodeType = ['Redis', 'Proxy'];
/* harmony default export */ __webpack_exports__["default"] = (REDISMEM_STATE);


/***/ }),

/***/ "./datasource/tc_monitor/scf/datasource.ts":
/*!*************************************************!*\
  !*** ./datasource/tc_monitor/scf/datasource.ts ***!
  \*************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _common_constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../common/constants */ "./datasource/common/constants.ts");
/* harmony import */ var _base_datasource__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../_base/datasource */ "./datasource/tc_monitor/_base/datasource.ts");
/* harmony import */ var _query_def__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./query_def */ "./datasource/tc_monitor/scf/query_def.ts");
/* harmony import */ var _common_datasourceStorage__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../common/datasourceStorage */ "./datasource/common/datasourceStorage.ts");
/* harmony import */ var _locale__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../locale */ "./locale/index.ts");
var __extends = undefined && undefined.__extends || function () {
  var _extendStatics = function extendStatics(d, b) {
    _extendStatics = Object.setPrototypeOf || {
      __proto__: []
    } instanceof Array && function (d, b) {
      d.__proto__ = b;
    } || function (d, b) {
      for (var p in b) {
        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];
      }
    };

    return _extendStatics(d, b);
  };

  return function (d, b) {
    if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");

    _extendStatics(d, b);

    function __() {
      this.constructor = d;
    }

    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();

var __awaiter = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {
  function adopt(value) {
    return value instanceof P ? value : new P(function (resolve) {
      resolve(value);
    });
  }

  return new (P || (P = Promise))(function (resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }

    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }

    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }

    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};

var __generator = undefined && undefined.__generator || function (thisArg, body) {
  var _ = {
    label: 0,
    sent: function sent() {
      if (t[0] & 1) throw t[1];
      return t[1];
    },
    trys: [],
    ops: []
  },
      f,
      y,
      t,
      g;
  return g = {
    next: verb(0),
    "throw": verb(1),
    "return": verb(2)
  }, typeof Symbol === "function" && (g[Symbol.iterator] = function () {
    return this;
  }), g;

  function verb(n) {
    return function (v) {
      return step([n, v]);
    };
  }

  function step(op) {
    if (f) throw new TypeError("Generator is already executing.");

    while (_) {
      try {
        if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
        if (y = 0, t) op = [op[0] & 2, t.value];

        switch (op[0]) {
          case 0:
          case 1:
            t = op;
            break;

          case 4:
            _.label++;
            return {
              value: op[1],
              done: false
            };

          case 5:
            _.label++;
            y = op[1];
            op = [0];
            continue;

          case 7:
            op = _.ops.pop();

            _.trys.pop();

            continue;

          default:
            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
              _ = 0;
              continue;
            }

            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
              _.label = op[1];
              break;
            }

            if (op[0] === 6 && _.label < t[1]) {
              _.label = t[1];
              t = op;
              break;
            }

            if (t && _.label < t[2]) {
              _.label = t[2];

              _.ops.push(op);

              break;
            }

            if (t[2]) _.ops.pop();

            _.trys.pop();

            continue;
        }

        op = body.call(thisArg, _);
      } catch (e) {
        op = [6, e];
        y = 0;
      } finally {
        f = t = 0;
      }
    }

    if (op[0] & 5) throw op[1];
    return {
      value: op[0] ? op[1] : void 0,
      done: true
    };
  }
};







var SCFDatasource =
/** @class */
function (_super) {
  __extends(SCFDatasource, _super);

  function SCFDatasource(instanceSettings, backendSrv, templateSrv) {
    var _this = _super.call(this, instanceSettings, backendSrv, templateSrv) || this;

    _this.templateQueryIdMap = _query_def__WEBPACK_IMPORTED_MODULE_2__["templateQueryIdMap"];
    _this.queryMonitorExtraConfg = _query_def__WEBPACK_IMPORTED_MODULE_2__["queryMonitorExtraConfg"];
    _this.keyInStorage = _query_def__WEBPACK_IMPORTED_MODULE_2__["keyInStorage"];
    _this.Namespace = 'QCE/SCF_V2';
    _this.InstanceAliasList = _query_def__WEBPACK_IMPORTED_MODULE_2__["SCFInstanceAliasList"];
    _this.InvalidDimensions = _query_def__WEBPACK_IMPORTED_MODULE_2__["SCFInvalidDemensions"];
    _this.InstanceReqConfig = {
      service: 'scf',
      action: 'ListFunctions',
      responseField: 'Functions'
    };
    return _this;
  }

  SCFDatasource.prototype.getRegions = function () {
    return Promise.resolve(_query_def__WEBPACK_IMPORTED_MODULE_2__["regionSupported"].map(function (_a) {
      var value = _a.value;
      return {
        value: value,
        text: Object(_locale__WEBPACK_IMPORTED_MODULE_4__["t"])(value)
      };
    }));
  };

  SCFDatasource.prototype.getMetrics = function (region) {
    if (region === void 0) {
      region = 'ap-guangzhou';
    }

    return __awaiter(this, void 0, void 0, function () {
      var rawSet;
      return __generator(this, function (_a) {
        switch (_a.label) {
          case 0:
            return [4
            /*yield*/
            , _super.prototype.getMetrics.call(this, region)];

          case 1:
            rawSet = _a.sent();
            return [2
            /*return*/
            , rawSet.filter(function (item) {
              var _a, _b, _c, _d, _e, _f;
              /* hack：这里多加了筛选条件，是因为后端数据不准确，坑啊！ 只拿取包含functionName的指标 */


              return ((_c = (_b = (_a = item.Dimensions) === null || _a === void 0 ? void 0 : _a[0]) === null || _b === void 0 ? void 0 : _b.Dimensions) === null || _c === void 0 ? void 0 : _c.includes('functionName')) && ((_f = (_e = (_d = item.Dimensions) === null || _d === void 0 ? void 0 : _d[0]) === null || _e === void 0 ? void 0 : _e.Dimensions) === null || _f === void 0 ? void 0 : _f.includes('namespace')) && !item.MetricName.startsWith('Name');
            })];
        }
      });
    });
  };

  SCFDatasource.prototype.getVersions = function (region, params) {
    var serviceInfo = Object(_common_constants__WEBPACK_IMPORTED_MODULE_0__["GetServiceAPIInfo"])(region, 'scf');
    return this.doRequest({
      url: this.url + serviceInfo.path,
      data: params
    }, serviceInfo.service, {
      region: region,
      action: 'ListVersionByFunction'
    }).then(function (response) {
      return response.Versions;
    });
  };

  SCFDatasource.prototype.fetchMetricData = function (action, region, instance) {
    return __awaiter(this, void 0, void 0, function () {
      var rs, result;

      var _this = this;

      return __generator(this, function (_a) {
        switch (_a.label) {
          case 0:
            if (!(action === 'ListVersionByFunction')) return [3
            /*break*/
            , 3];
            return [4
            /*yield*/
            , this.getVersions(region, {
              FunctionName: instance[this.templateQueryIdMap.instance]
            })];

          case 1:
            rs = _a.sent();
            result = rs.map(function (o) {
              o._InstanceAliasValue = o[_this.templateQueryIdMap.version];
              return {
                text: o[_this.templateQueryIdMap.version],
                value: o[_this.templateQueryIdMap.version]
              };
            });
            return [4
            /*yield*/
            , _common_datasourceStorage__WEBPACK_IMPORTED_MODULE_3__["default"].setExtraStorage(this.service, this.keyInStorage.version, rs)];

          case 2:
            _a.sent();

            return [2
            /*return*/
            , result];

          case 3:
            return [2
            /*return*/
            , []];
        }
      });
    });
  };

  return SCFDatasource;
}(_base_datasource__WEBPACK_IMPORTED_MODULE_1__["BaseDatasource"]);

/* harmony default export */ __webpack_exports__["default"] = (SCFDatasource);

/***/ }),

/***/ "./datasource/tc_monitor/scf/query.ts":
/*!********************************************!*\
  !*** ./datasource/tc_monitor/scf/query.ts ***!
  \********************************************/
/*! exports provided: SCFQueryCtrl, scfQuery */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SCFQueryCtrl", function() { return SCFQueryCtrl; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "scfQuery", function() { return scfQuery; });
/* harmony import */ var grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! grafana/app/core/core_module */ "grafana/app/core/core_module");
/* harmony import */ var grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _query_def__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./query_def */ "./datasource/tc_monitor/scf/query_def.ts");
var __awaiter = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {
  function adopt(value) {
    return value instanceof P ? value : new P(function (resolve) {
      resolve(value);
    });
  }

  return new (P || (P = Promise))(function (resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }

    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }

    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }

    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};

var __generator = undefined && undefined.__generator || function (thisArg, body) {
  var _ = {
    label: 0,
    sent: function sent() {
      if (t[0] & 1) throw t[1];
      return t[1];
    },
    trys: [],
    ops: []
  },
      f,
      y,
      t,
      g;
  return g = {
    next: verb(0),
    "throw": verb(1),
    "return": verb(2)
  }, typeof Symbol === "function" && (g[Symbol.iterator] = function () {
    return this;
  }), g;

  function verb(n) {
    return function (v) {
      return step([n, v]);
    };
  }

  function step(op) {
    if (f) throw new TypeError("Generator is already executing.");

    while (_) {
      try {
        if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
        if (y = 0, t) op = [op[0] & 2, t.value];

        switch (op[0]) {
          case 0:
          case 1:
            t = op;
            break;

          case 4:
            _.label++;
            return {
              value: op[1],
              done: false
            };

          case 5:
            _.label++;
            y = op[1];
            op = [0];
            continue;

          case 7:
            op = _.ops.pop();

            _.trys.pop();

            continue;

          default:
            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
              _ = 0;
              continue;
            }

            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
              _.label = op[1];
              break;
            }

            if (op[0] === 6 && _.label < t[1]) {
              _.label = t[1];
              t = op;
              break;
            }

            if (t && _.label < t[2]) {
              _.label = t[2];

              _.ops.push(op);

              break;
            }

            if (t[2]) _.ops.pop();

            _.trys.pop();

            continue;
        }

        op = body.call(thisArg, _);
      } catch (e) {
        op = [6, e];
        y = 0;
      } finally {
        f = t = 0;
      }
    }

    if (op[0] & 5) throw op[1];
    return {
      value: op[0] ? op[1] : void 0,
      done: true
    };
  }
};




var SCFQueryCtrl =
/** @class */
function () {
  SCFQueryCtrl.$inject = ["$scope", "$rootScope"];

  /** @ngInject */
  function SCFQueryCtrl($scope, $rootScope) {
    var _this = this;

    $scope.init = function () {
      $scope.SCFQueryDescriptor = _query_def__WEBPACK_IMPORTED_MODULE_1__["SCFQueryDescriptor"];
    };

    $scope.getInstanceId = function () {
      var instance = $scope.target.instance;
      instance = $scope.datasource.getServiceFn('scf', 'getVariable')(instance);

      if (!instance) {
        return '';
      }

      try {
        instance = JSON.parse(instance).FunctionName;
      } catch (error) {// console.log();
      }

      return instance;
    };

    $scope.getVersions = function (target) {
      return __awaiter(_this, void 0, void 0, function () {
        var FunctionName, region, fetcher;
        return __generator(this, function (_a) {
          FunctionName = $scope.getInstanceId();
          region = $scope.datasource.getServiceFn('scf', 'getVariable')(target.region);
          if (!FunctionName || !region) return [2
          /*return*/
          , []];
          fetcher = $scope.datasource.getServiceFn('scf', 'getVersions');
          return [2
          /*return*/
          , fetcher(region, {
            FunctionName: FunctionName
          }).then(function (res) {
            // console.log(res, 'res');
            var result = res.map(function (o) {
              o._InstanceAliasValue = o[_query_def__WEBPACK_IMPORTED_MODULE_1__["templateQueryIdMap"].version];
              return {
                text: o[_query_def__WEBPACK_IMPORTED_MODULE_1__["templateQueryIdMap"].version],
                value: JSON.stringify(o)
              };
            });
            return result;
          })];
        });
      });
    }; // $scope.onChecked = (srcField, dstField) => {
    //   if ($scope.target.queries[srcField] === true) {
    //     $scope.target.queries[dstField] = false;
    //   }
    //   $scope.onChange();
    // };
    // $scope.getDropdown = (field) => {
    //   switch (field) {
    //     case 'zone':
    //       return $scope.getZones();
    //     default:
    //       return [];
    //   }
    // };
    // $scope.getZones = () => {
    //   if (!$scope.region) {
    //     return [];
    //   }
    //   return $scope.datasource.getZones('cvm', $scope.region);
    // };


    $scope.init();
  }

  return SCFQueryCtrl;
}();


var template = "\n<div>\n\n<div class=\"tc-sub-params\" ng-if=\"showDetail\">\n  <label class=\"gf-form-label tc-info-label\">\n    Functions are queried by following params.\n    <a target=\"_blank\" style=\"text-decoration:underline;color:#006eff;font-size:medium\" href=\"https://cloud.tencent.com/document/api/583/18582\">Click here to get API doc.</a>\n  </label>\n  <div class=\"gf-form-inline\" ng-repeat=\"field in SCFQueryDescriptor\">\n    <div class=\"gf-form\">\n      <label class=\"gf-form-label width-14\">\n        {{ field.key }}\n        <info-popover mode=\"right-normal\">\n          {{ field.cnDescriptor }}\n          <a target=\"_blank\" href=\"{{field.link}}\" ng-if=\"field.link\">Click here for more information.</a>\n        </info-popover>\n      </label>\n      <input\n        ng-if=\"field.type === 'inputnumber'\"\n        style=\"margin-right:2px\"\n        type=\"number\"\n        ng-model=\"target.queries[field.key]\"\n        ng-change=\"onChange()\"\n        class=\"gf-form-input width-10\"\n        ng-min=\"field.min\"\n        ng-max=\"field.max\"\n      />\n      <input\n        ng-if=\"field.type === 'input'\"\n        style=\"margin-right:2px\"\n        type=\"text\"\n        ng-model=\"target.queries[field.key]\"\n        ng-change=\"onChange()\"\n        class=\"gf-form-input width-10\"\n      />\n      <multi-condition\n        ng-if=\"field.type === 'inputmulti'\"\n        type=\"'input'\"\n        value=\"target.queries[field.key]\"\n        on-change=\"onChange()\"\n      ></multi-condition>\n      <multi-condition\n        ng-if=\"field.type === 'dropdownmulti'\"\n        type=\"'dropdown'\"\n        value=\"target.queries[field.key]\"\n        on-change=\"onChange()\"\n        get-options=\"getDropdown(field.key)\"\n      ></multi-condition>\n      <custom-select-dropdown\n        ng-if=\"field.type === 'select'\"\n        value=\"target.queries[field.key]\"\n        options=\"field.list\"\n        multiple=\"field.multiple || false\"\n        on-change=\"onChange()\"\n      ></custom-select-dropdown>\n    </div>\n  </div>\n</div>\n\n<!-- version\u90E8\u5206 -->\n<div class=\"gf-form-inline\" ng-if=\"target.instance\">\n  <div class=\"gf-form\">\n    <label class=\"gf-form-label query-keyword width-9\">Version</label>\n    <div class=\"gf-form-select-wrapper gf-form-select-wrapper--caret-indent\">\n      <gf-form-dropdown model=\"target.version\" allow-custom=\"false\" get-options=\"getVersions(target)\"\n        on-change=\"onRefresh()\" css-class=\"min-width-10\">\n      </gf-form-dropdown>\n    </div>\n  </div>\n</div>\n\n  </div>\n";
function scfQuery() {
  return {
    template: template,
    controller: SCFQueryCtrl,
    restrict: 'E',
    scope: {
      target: '=',
      showDetail: '=',
      region: '=',
      datasource: '=',
      getDropdownOptions: '&',
      onChange: '&',
      onRefresh: '&'
    }
  };
}
grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0___default.a.directive('scfQuery', scfQuery);

/***/ }),

/***/ "./datasource/tc_monitor/scf/query_def.ts":
/*!************************************************!*\
  !*** ./datasource/tc_monitor/scf/query_def.ts ***!
  \************************************************/
/*! exports provided: SCFQueryDescriptor, default, SCFInstanceAliasList, SCFInvalidDemensions, queryMonitorExtraConfg, regionSupported, templateQueryIdMap, keyInStorage, SCFGetInstanceQueryParams, SCFDefaultDimensionList */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SCFQueryDescriptor", function() { return SCFQueryDescriptor; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SCFInstanceAliasList", function() { return SCFInstanceAliasList; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SCFInvalidDemensions", function() { return SCFInvalidDemensions; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "queryMonitorExtraConfg", function() { return queryMonitorExtraConfg; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "regionSupported", function() { return regionSupported; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "templateQueryIdMap", function() { return templateQueryIdMap; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "keyInStorage", function() { return keyInStorage; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SCFGetInstanceQueryParams", function() { return GetInstanceQueryParams; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SCFDefaultDimensionList", function() { return SCFDefaultDimensionList; });
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lodash */ "lodash");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__);

var SCFQueryDescriptor = [{
  key: 'Offset',
  enDescriptor: 'Offset',
  cnDescriptor: '偏移量, 例如Offset=20&Limit=20 返回第 20 到 40 项',
  link: '',
  type: 'inputnumber',
  min: 0
}, {
  key: 'Limit',
  enDescriptor: 'Limit',
  cnDescriptor: '单次请求返回的数量，默认为20，最小值为1，最大值为100',
  link: '',
  type: 'inputnumber',
  min: 1,
  max: 100
}, {
  key: 'SearchKey',
  enDescriptor: 'SearchKey',
  cnDescriptor: '支持FunctionName模糊匹配',
  link: '',
  type: 'input'
}, {
  key: 'Namespace',
  enDescriptor: 'Namespace',
  cnDescriptor: '云函数命名空间',
  link: '',
  type: 'input'
}, {
  key: 'Description',
  enDescriptor: 'Description',
  cnDescriptor: '函数描述，支持模糊搜索',
  link: '',
  type: 'input'
}, {
  key: 'OrderBy',
  enDescriptor: 'OrderBy',
  cnDescriptor: '排序字段',
  link: '',
  type: 'select',
  list: [{
    text: 'AddTime',
    value: 'AddTime'
  }, {
    text: 'ModTime',
    value: 'ModTime'
  }, {
    text: 'FunctionName',
    value: 'FunctionName'
  }]
}, {
  key: 'Order',
  enDescriptor: 'Order Direction',
  cnDescriptor: '排序方式',
  link: '',
  type: 'select',
  list: [{
    text: 'ASC',
    value: 'ASC'
  }, {
    text: 'DESC',
    value: 'DESC'
  }]
} // {
//   key: 'Filters',
//   enDescriptor: 'Filters',
//   cnDescriptor: '按照标签键值对进行过滤',
//   link: '',
//   type: 'dropdownmulti',
// },
];
var SCF_STATE = {
  region: '',
  metricName: '',
  metricUnit: '',
  period: undefined,
  dimensionObject: null,
  instance: '',
  instanceAlias: 'FunctionName',
  version: '',
  queries: {
    Offset: 0,
    Limit: 20,
    OrderBy: {},
    Order: {},
    SearchKey: '',
    Namespace: '',
    Description: '' // Filters:  {},

  }
};

function GetInstanceQueryParams(queries) {
  if (queries === void 0) {
    queries = {};
  }

  var params = {};

  if (!lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isEmpty(queries)) {
    params.Limit = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(queries, 'Limit', 20) || 20;
    params.Offset = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(queries, 'Offset', 0) || 0;
    queries = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.omit(queries, ['Offset', 'Limit']);

    lodash__WEBPACK_IMPORTED_MODULE_0___default.a.forEach(queries, function (item, key) {
      if (lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isArray(item)) {
        item = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.compact(item);

        if (item.length > 0) {
          params[key] = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.uniq(item);
        }
      } else if (lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isObject(item)) {
        if (lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isNumber(lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(item, 'value', undefined)) || !lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isEmpty(lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(item, 'value', undefined))) {
          params[key] = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(item, 'value');
        }
      } else if (lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isNumber(item) || !lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isEmpty(item)) {
        params[key] = item;
      }
    });
  }

  return params;
}

var SCFInstanceAliasList = ['FunctionId', 'FunctionName']; // 向实例里面塞dimensions对应的值，dimension中的key对应到实例中的key

var SCFInvalidDemensions = {
  functionName: 'FunctionName',
  namespace: 'Namespace',
  version: 'Version'
};
var templateQueryIdMap = {
  instance: 'FunctionName',
  version: 'Version'
};
var regionSupported = [{
  value: 'ap-beijing'
}, {
  value: 'ap-chengdu'
}, {
  value: 'ap-chongqing'
}, {
  value: 'ap-guangzhou'
}, {
  value: 'ap-hongkong'
}, {
  value: 'ap-mumbai'
}, {
  value: 'ap-shanghai'
}, {
  value: 'ap-shanghai-fsi'
}, {
  value: 'ap-shenzhen-fsi'
}, {
  value: 'ap-singapore'
}, {
  value: 'ap-tokyo'
}, {
  value: 'eu-frankfurt'
}, {
  value: 'na-siliconvalley'
}, {
  value: 'na-toronto'
}]; // 需要缓存到storage的内容的key列表

var keyInStorage = {
  version: 'version'
};
/*
如果有InstanceId额外的维度，原则上都需要传入此map结构配置
key的含义：
  经过InvalidDemensions处理后的string。topicId =》TopicId。
  否则认为指标中维度正确，和指标中维度字段保持一致，即topicId
value的含义：
  1 dim_KeyInStorage 指标中维度dimension对应的storage中的key，获取缓存列表，sourceMapList、
  2 dim_KeyInTarget  通过getVariable方法获取变量中选中项。比如ListnerId为Lis-xxxx；即：STATE中的key。
                    默认取通过InvalidDemsion处理后的key
  3 dim_KeyInMap     保存在模板变量value比如（监听器ID）源自sourceMapList（接口返回内容）的哪个key（ListenerId）。
                    即：templateQueryIdMap中内容。
                    联合上面2的内容筛选出原始sourceMap
*/

var queryMonitorExtraConfg = {
  Version: {
    dim_KeyInStorage: keyInStorage.version,
    dim_KeyInTarget: 'version',
    dim_KeyInMap: templateQueryIdMap.version
  }
};
/* harmony default export */ __webpack_exports__["default"] = (SCF_STATE);
 // monitor监控数据默认支持的维度

var SCFDefaultDimensionList = ['functionName', 'namespace', 'version'];

/***/ }),

/***/ "./datasource/tc_monitor/sqlserver/datasource.ts":
/*!*******************************************************!*\
  !*** ./datasource/tc_monitor/sqlserver/datasource.ts ***!
  \*******************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _query_def__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./query_def */ "./datasource/tc_monitor/sqlserver/query_def.ts");
/* harmony import */ var _base_datasource__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../_base/datasource */ "./datasource/tc_monitor/_base/datasource.ts");
/* harmony import */ var _common_constants__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../common/constants */ "./datasource/common/constants.ts");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! lodash */ "lodash");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _locale__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../locale */ "./locale/index.ts");
var __extends = undefined && undefined.__extends || function () {
  var _extendStatics = function extendStatics(d, b) {
    _extendStatics = Object.setPrototypeOf || {
      __proto__: []
    } instanceof Array && function (d, b) {
      d.__proto__ = b;
    } || function (d, b) {
      for (var p in b) {
        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];
      }
    };

    return _extendStatics(d, b);
  };

  return function (d, b) {
    if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");

    _extendStatics(d, b);

    function __() {
      this.constructor = d;
    }

    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();

var __awaiter = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {
  function adopt(value) {
    return value instanceof P ? value : new P(function (resolve) {
      resolve(value);
    });
  }

  return new (P || (P = Promise))(function (resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }

    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }

    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }

    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};

var __generator = undefined && undefined.__generator || function (thisArg, body) {
  var _ = {
    label: 0,
    sent: function sent() {
      if (t[0] & 1) throw t[1];
      return t[1];
    },
    trys: [],
    ops: []
  },
      f,
      y,
      t,
      g;
  return g = {
    next: verb(0),
    "throw": verb(1),
    "return": verb(2)
  }, typeof Symbol === "function" && (g[Symbol.iterator] = function () {
    return this;
  }), g;

  function verb(n) {
    return function (v) {
      return step([n, v]);
    };
  }

  function step(op) {
    if (f) throw new TypeError("Generator is already executing.");

    while (_) {
      try {
        if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
        if (y = 0, t) op = [op[0] & 2, t.value];

        switch (op[0]) {
          case 0:
          case 1:
            t = op;
            break;

          case 4:
            _.label++;
            return {
              value: op[1],
              done: false
            };

          case 5:
            _.label++;
            y = op[1];
            op = [0];
            continue;

          case 7:
            op = _.ops.pop();

            _.trys.pop();

            continue;

          default:
            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
              _ = 0;
              continue;
            }

            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
              _.label = op[1];
              break;
            }

            if (op[0] === 6 && _.label < t[1]) {
              _.label = t[1];
              t = op;
              break;
            }

            if (t && _.label < t[2]) {
              _.label = t[2];

              _.ops.push(op);

              break;
            }

            if (t[2]) _.ops.pop();

            _.trys.pop();

            continue;
        }

        op = body.call(thisArg, _);
      } catch (e) {
        op = [6, e];
        y = 0;
      } finally {
        f = t = 0;
      }
    }

    if (op[0] & 5) throw op[1];
    return {
      value: op[0] ? op[1] : void 0,
      done: true
    };
  }
};







var DCDatasource =
/** @class */
function (_super) {
  __extends(DCDatasource, _super);

  function DCDatasource(instanceSettings, backendSrv, templateSrv) {
    var _this = _super.call(this, instanceSettings, backendSrv, templateSrv) || this;

    _this.Namespace = _query_def__WEBPACK_IMPORTED_MODULE_0__["namespace"];
    _this.InstanceAliasList = _query_def__WEBPACK_IMPORTED_MODULE_0__["SQLSERVERInstanceAliasList"];
    _this.InvalidDimensions = _query_def__WEBPACK_IMPORTED_MODULE_0__["SQLSERVERInvalidDemensions"];
    _this.templateQueryIdMap = _query_def__WEBPACK_IMPORTED_MODULE_0__["templateQueryIdMap"]; // 此处service是接口的配置参数，需和plugin.json里一致，和constant.ts中SERVICES_API_INFO保持一致

    _this.InstanceReqConfig = {
      service: 'sqlserver',
      action: 'DescribeDBInstances',
      responseField: 'DBInstances'
    };
    return _this;
  }

  DCDatasource.prototype.getMetrics = function (region) {
    if (region === void 0) {
      region = 'ap-guangzhou';
    }

    return __awaiter(this, void 0, void 0, function () {
      var rawSet;
      return __generator(this, function (_a) {
        switch (_a.label) {
          case 0:
            return [4
            /*yield*/
            , _super.prototype.getMetrics.call(this, region)];

          case 1:
            rawSet = _a.sent();
            return [2
            /*return*/
            , lodash__WEBPACK_IMPORTED_MODULE_3___default.a.compact(rawSet.map(function (item) {
              return Object(_query_def__WEBPACK_IMPORTED_MODULE_0__["modifyDimensons"])(item);
            }))];
        }
      });
    });
  };

  DCDatasource.prototype.getRegions = function () {
    return Promise.resolve(_query_def__WEBPACK_IMPORTED_MODULE_0__["regionSupported"].map(function (_a) {
      var value = _a.value;
      return {
        value: value,
        text: Object(_locale__WEBPACK_IMPORTED_MODULE_4__["t"])(value)
      };
    }));
  };

  DCDatasource.prototype.getFilterDropdown = function (_a) {
    var field = _a.field,
        region = _a.region;

    if (field === 'Zone') {
      var serviceInfo = Object(_common_constants__WEBPACK_IMPORTED_MODULE_2__["GetServiceAPIInfo"])(region, 'cvm');
      return this.doRequest({
        url: this.url + serviceInfo.path
      }, serviceInfo.service, {
        region: region,
        action: 'DescribeZones'
      }).then(function (response) {
        return lodash__WEBPACK_IMPORTED_MODULE_3___default.a.filter(lodash__WEBPACK_IMPORTED_MODULE_3___default.a.map(response.ZoneSet || [], function (item) {
          return {
            text: item.ZoneName,
            value: item.Zone,
            ZoneState: item.ZoneState,
            Zone: item.Zone
          };
        }), function (item) {
          return item.ZoneState === 'AVAILABLE';
        });
      });
    }

    return [];
  };

  return DCDatasource;
}(_base_datasource__WEBPACK_IMPORTED_MODULE_1__["BaseDatasource"]);

/* harmony default export */ __webpack_exports__["default"] = (DCDatasource);

/***/ }),

/***/ "./datasource/tc_monitor/sqlserver/query.ts":
/*!**************************************************!*\
  !*** ./datasource/tc_monitor/sqlserver/query.ts ***!
  \**************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _base_query__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../_base/query */ "./datasource/tc_monitor/_base/query.ts");
/* harmony import */ var _query_def__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./query_def */ "./datasource/tc_monitor/sqlserver/query_def.ts");


Object(_base_query__WEBPACK_IMPORTED_MODULE_0__["default"])(_query_def__WEBPACK_IMPORTED_MODULE_1__["queryEditorName"], _query_def__WEBPACK_IMPORTED_MODULE_1__["queryEditorConfig"]);

/***/ }),

/***/ "./datasource/tc_monitor/sqlserver/query_def.ts":
/*!******************************************************!*\
  !*** ./datasource/tc_monitor/sqlserver/query_def.ts ***!
  \******************************************************/
/*! exports provided: default, SQLSERVERNETFilterFieldsDescriptor, templateQueryIdMap, SQLSERVERInstanceAliasList, SQLSERVERInvalidDemensions, namespace, queryEditorName, queryEditorConfig, regionSupported, modifyDimensons, SQLSERVERGetInstanceQueryParams */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SQLSERVERNETFilterFieldsDescriptor", function() { return SQLSERVERNETFilterFieldsDescriptor; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "templateQueryIdMap", function() { return templateQueryIdMap; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SQLSERVERInstanceAliasList", function() { return SQLSERVERInstanceAliasList; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SQLSERVERInvalidDemensions", function() { return SQLSERVERInvalidDemensions; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "namespace", function() { return namespace; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "queryEditorName", function() { return queryEditorName; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "queryEditorConfig", function() { return queryEditorConfig; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "regionSupported", function() { return regionSupported; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "modifyDimensons", function() { return modifyDimensons; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SQLSERVERGetInstanceQueryParams", function() { return GetInstanceQueryParams; });
/* harmony import */ var _common_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../common/utils */ "./datasource/common/utils.ts");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lodash */ "lodash");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_1__);


var namespace = 'QCE/SQLSERVER'; // 组件名称。这里名字要和index.ts中的SERVICES对应，后面会根据SERVICES中service字段拼接这个query组件名称

var queryEditorName = 'sqlserverQuery';
var SQLSERVERInvalidDemensions = {
  resourceId: 'InstanceId'
};
var SQLSERVERInstanceAliasList = ['InstanceId', 'Name'];
var templateQueryIdMap = {
  instance: 'InstanceId'
}; // select类型需要注意是{},multi后缀是[]

var SQLSERVERNETFilterFields = {
  Limit: 20,
  Offset: 0,
  ProjectId: null,
  Status: {},
  InstanceIdSet: [],
  PayMode: {},
  VpcId: '',
  SubnetId: '',
  VipSet: [],
  InstanceNameSet: [],
  VersionSet: [],
  Zone: ''
};
var SQLSERVERNETFilterFieldsDescriptor = [{
  key: 'Offset',
  enDescriptor: 'Offset',
  cnDescriptor: '偏移量, 例如Offset=20&Limit=20 返回第 20 到 40 项',
  link: '',
  type: 'inputNumber',
  min: 0
}, {
  key: 'Limit',
  enDescriptor: 'Limit',
  cnDescriptor: '单次请求返回的数量，默认为20，最小值为1，最大值为100',
  link: '',
  type: 'inputNumber',
  min: 1,
  max: 100
}, {
  key: 'ProjectId',
  enDescriptor: 'ProjectId',
  cnDescriptor: '项目ID',
  link: '',
  type: 'inputNumber'
}, {
  key: 'Status',
  enDescriptor: 'Status',
  cnDescriptor: '实例状态',
  link: '',
  type: 'select',
  list: [{
    text: '申请中',
    value: 1
  }, {
    text: '运行中',
    value: 2
  }, {
    text: '受限运行中 (主备切换中)',
    value: 3
  }, {
    text: '已隔离',
    value: 4
  }, {
    text: '回收中',
    value: 5
  }, {
    text: '已回收',
    value: 6
  }, {
    text: '任务执行中',
    value: 7
  }, {
    text: '已下线',
    value: 8
  }, {
    text: '实例扩容中',
    value: 9
  }, {
    text: '实例迁移中',
    value: 10
  }, {
    text: '只读',
    value: 11
  }, {
    text: '重启中',
    value: 12
  }]
}, {
  key: 'InstanceIdSet',
  enDescriptor: 'InstanceIdSet',
  cnDescriptor: '实例ID',
  link: '',
  type: 'inputMulti'
}, {
  key: 'PayMode',
  enDescriptor: 'PayMode',
  cnDescriptor: '子网实例ID',
  link: '',
  type: 'select',
  list: [{
    text: '包年包月',
    value: 1
  }, {
    text: '按量计费',
    value: 0
  }]
}, {
  key: 'VpcId',
  enDescriptor: 'VpcId',
  cnDescriptor: '实例所属VPC的唯一字符串ID',
  link: '',
  type: 'input'
}, {
  key: 'SubnetId',
  enDescriptor: 'SubnetId',
  cnDescriptor: '实例所属子网的唯一字符串ID',
  link: '',
  type: 'input'
}, {
  key: 'VipSet',
  enDescriptor: 'VipSet',
  cnDescriptor: '实例内网地址列表',
  link: '',
  type: 'inputMulti'
}, {
  key: 'InstanceNameSet',
  enDescriptor: 'InstanceNameSet',
  cnDescriptor: '实例名称列表, 模糊查询',
  link: '',
  type: 'inputMulti'
}, {
  key: 'VersionSet',
  enDescriptor: 'VersionSet',
  cnDescriptor: '实例版本代号列表',
  link: '',
  type: 'inputMulti'
}, {
  key: 'Zone',
  enDescriptor: 'Zone',
  cnDescriptor: '实例可用区',
  link: '',
  type: 'dropdown'
}]; // 各产品实例列表detail配置

var queryEditorConfig = {
  instanceDocUrl: 'https://cloud.tencent.com/document/api/238/19969',
  namespace: namespace,
  fieldDescriptor: SQLSERVERNETFilterFieldsDescriptor
}; // regions for dropdown

var regionSupported = [{
  value: 'ap-beijing'
}, {
  value: 'ap-chengdu'
}, {
  value: 'ap-chongqing'
}, {
  value: 'ap-guangzhou'
}, {
  value: 'ap-hongkong'
}, {
  value: 'ap-nanjing'
}, {
  value: 'ap-seoul'
}, {
  value: 'ap-shanghai'
}, {
  value: 'ap-shanghai-fsi'
}, {
  value: 'ap-shenzhen-fsi'
}, {
  value: 'ap-singapore'
}, {
  value: 'ap-tokyo'
}, {
  value: 'eu-moscow'
}, {
  value: 'na-siliconvalley'
}];
var SQLSERVER_STATE = {
  region: '',
  metricName: '',
  metricUnit: '',
  period: undefined,
  dimensionObject: null,
  instance: '',
  instanceAlias: 'InstanceId',
  queries: SQLSERVERNETFilterFields
};

function modifyDimensons(metricItem) {
  var metricTmp = lodash__WEBPACK_IMPORTED_MODULE_1___default.a.cloneDeep(metricItem);

  metricTmp.Dimensions.forEach(function (item) {
    item.Dimensions = ['resourceId'];
  });
  return metricTmp;
}

function GetInstanceQueryParams(queries) {
  if (queries === void 0) {
    queries = {};
  }

  return Object(_common_utils__WEBPACK_IMPORTED_MODULE_0__["instanceQueryParamsBaseParse"])(queries, false);
}

/* harmony default export */ __webpack_exports__["default"] = (SQLSERVER_STATE);


/***/ }),

/***/ "./datasource/tc_monitor/tcaplus/datasource.ts":
/*!*****************************************************!*\
  !*** ./datasource/tc_monitor/tcaplus/datasource.ts ***!
  \*****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _query_def__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./query_def */ "./datasource/tc_monitor/tcaplus/query_def.ts");
/* harmony import */ var _base_datasource__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../_base/datasource */ "./datasource/tc_monitor/_base/datasource.ts");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lodash */ "lodash");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _locale__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../locale */ "./locale/index.ts");
var __extends = undefined && undefined.__extends || function () {
  var _extendStatics = function extendStatics(d, b) {
    _extendStatics = Object.setPrototypeOf || {
      __proto__: []
    } instanceof Array && function (d, b) {
      d.__proto__ = b;
    } || function (d, b) {
      for (var p in b) {
        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];
      }
    };

    return _extendStatics(d, b);
  };

  return function (d, b) {
    if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");

    _extendStatics(d, b);

    function __() {
      this.constructor = d;
    }

    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();






var DCDatasource =
/** @class */
function (_super) {
  __extends(DCDatasource, _super);

  function DCDatasource(instanceSettings, backendSrv, templateSrv) {
    var _this = _super.call(this, instanceSettings, backendSrv, templateSrv) || this;

    _this.Namespace = _query_def__WEBPACK_IMPORTED_MODULE_0__["namespace"];
    _this.InstanceAliasList = _query_def__WEBPACK_IMPORTED_MODULE_0__["TCAPLUSInstanceAliasList"];
    _this.InvalidDimensions = _query_def__WEBPACK_IMPORTED_MODULE_0__["TCAPLUSInvalidDemensions"];
    _this.templateQueryIdMap = _query_def__WEBPACK_IMPORTED_MODULE_0__["templateQueryIdMap"]; // 此处service是接口的配置参数，需和plugin.json里一致，和constant.ts中SERVICES_API_INFO保持一致

    _this.InstanceReqConfig = {
      service: 'tcaplusdb',
      action: 'DescribeTables',
      responseField: 'TableInfos'
    };
    return _this;
  } // 重写getRegion


  DCDatasource.prototype.getRegions = function () {
    return this.doRequest({
      url: this.url + '/tcaplusdb'
    }, 'tcaplusdb', {
      action: 'DescribeRegions',
      region: 'ap-guangzhou'
    }).then(function (response) {
      return lodash__WEBPACK_IMPORTED_MODULE_2___default.a.map(response.RegionInfos || [], function (item) {
        return {
          text: Object(_locale__WEBPACK_IMPORTED_MODULE_3__["t"])(item.RegionName),
          value: item.RegionName
        };
      });
    });
  };

  return DCDatasource;
}(_base_datasource__WEBPACK_IMPORTED_MODULE_1__["BaseDatasource"]);

/* harmony default export */ __webpack_exports__["default"] = (DCDatasource);

/***/ }),

/***/ "./datasource/tc_monitor/tcaplus/query.ts":
/*!************************************************!*\
  !*** ./datasource/tc_monitor/tcaplus/query.ts ***!
  \************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _base_query__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../_base/query */ "./datasource/tc_monitor/_base/query.ts");
/* harmony import */ var _query_def__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./query_def */ "./datasource/tc_monitor/tcaplus/query_def.ts");


Object(_base_query__WEBPACK_IMPORTED_MODULE_0__["default"])(_query_def__WEBPACK_IMPORTED_MODULE_1__["queryEditorName"], _query_def__WEBPACK_IMPORTED_MODULE_1__["queryEditorConfig"]);

/***/ }),

/***/ "./datasource/tc_monitor/tcaplus/query_def.ts":
/*!****************************************************!*\
  !*** ./datasource/tc_monitor/tcaplus/query_def.ts ***!
  \****************************************************/
/*! exports provided: default, TCAPLUSFilterFieldsDescriptor, templateQueryIdMap, TCAPLUSInstanceAliasList, TCAPLUSInvalidDemensions, namespace, queryEditorName, queryEditorConfig, regonsMap, TCAPLUSGetInstanceQueryParams */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TCAPLUSFilterFieldsDescriptor", function() { return TCAPLUSFilterFieldsDescriptor; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "templateQueryIdMap", function() { return templateQueryIdMap; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TCAPLUSInstanceAliasList", function() { return TCAPLUSInstanceAliasList; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TCAPLUSInvalidDemensions", function() { return TCAPLUSInvalidDemensions; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "namespace", function() { return namespace; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "queryEditorName", function() { return queryEditorName; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "queryEditorConfig", function() { return queryEditorConfig; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "regonsMap", function() { return regonsMap; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TCAPLUSGetInstanceQueryParams", function() { return GetInstanceQueryParams; });
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lodash */ "lodash");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__);

var namespace = 'QCE/TCAPLUS'; // 组件名称。这里名字要和index.ts中的SERVICES对应，后面会根据SERVICES中service字段拼接这个query组件名称

var queryEditorName = 'tcaplusQuery';
var TCAPLUSInvalidDemensions = {// TableInstanceId: 'TableInstanceId',
  // ClusterId: 'ClusterId',
}; // 需和文件名对应

var TCAPLUSInstanceAliasList = ['TableInstanceId', 'TableName'];
var templateQueryIdMap = {
  instance: 'TableInstanceId'
}; // select类型需要注意是{},multi后缀是[],dropdown是类型

var TCAPLUSFilterFields = {
  Limit: 20,
  Offset: 0,
  ClusterId: '',
  TableGroupIds: [],
  TableName: '',
  TableInstanceId: '',
  TableIdlType: {},
  TableType: {},
  ListElementNum: null,
  ReservedVolume: null,
  ReservedReadQps: null,
  ReservedWriteQps: null,
  Memo: '',
  FileName: '',
  FileExtType: '',
  FileSize: null,
  FileContent: ''
};
var TCAPLUSFilterFieldsDescriptor = [{
  key: 'Offset',
  enDescriptor: 'Offset',
  cnDescriptor: '偏移量, 例如Offset=20&Limit=20 返回第 20 到 40 项',
  link: '',
  type: 'inputNumber',
  min: 0
}, {
  key: 'Limit',
  enDescriptor: 'Limit',
  cnDescriptor: '单次请求返回的数量，默认为20，最小值为1，最大值为100',
  link: '',
  type: 'inputNumber',
  min: 1,
  max: 100
}, {
  key: 'ClusterId',
  enDescriptor: 'ClusterId',
  cnDescriptor: '表格所属集群ID',
  link: '',
  type: 'input'
}, {
  key: 'TableGroupIds',
  enDescriptor: 'TableGroupIds',
  cnDescriptor: '表格组ID列表',
  link: '',
  type: 'inputMulti'
}, {
  key: 'TableName',
  enDescriptor: 'TableName',
  cnDescriptor: '表格名称',
  link: '',
  type: 'input'
}, {
  key: 'TableInstanceId',
  enDescriptor: 'TableInstanceId',
  cnDescriptor: '表实例ID',
  link: '',
  type: 'input'
}, {
  key: 'TableIdlType',
  enDescriptor: 'TableIdlType',
  cnDescriptor: '表格描述语言类型',
  link: '',
  type: 'select',
  list: [{
    text: 'PROTO',
    value: 'PROTO'
  }, {
    text: 'TDR',
    value: 'TDR'
  }]
}, {
  key: 'TableType',
  enDescriptor: 'TableType',
  cnDescriptor: '表格数据结构类型',
  link: '',
  type: 'select',
  list: [{
    text: 'GENERIC',
    value: 'GENERIC'
  }, {
    text: 'LIST',
    value: 'LIST'
  }]
}, {
  key: 'ListElementNum',
  enDescriptor: 'ListElementNum',
  cnDescriptor: 'LIST表元素个数',
  link: '',
  type: 'inputNumber'
}, {
  key: 'ReservedVolume',
  enDescriptor: 'ReservedVolume',
  cnDescriptor: '表格预留容量（GB）',
  link: '',
  type: 'inputNumber'
}, {
  key: 'ReservedReadQps',
  enDescriptor: 'ReservedReadQps',
  cnDescriptor: '表格预留读CU',
  link: '',
  type: 'inputNumber'
}, {
  key: 'ReservedWriteQps',
  enDescriptor: 'ReservedWriteQps',
  cnDescriptor: '表格预留写CU',
  link: '',
  type: 'inputNumber'
}, {
  key: 'Memo',
  enDescriptor: 'Memo',
  cnDescriptor: '表格备注信息',
  link: '',
  type: 'input'
}, {
  key: 'FileName',
  enDescriptor: 'FileName',
  cnDescriptor: 'Key回档文件名，回档专用',
  link: '',
  type: 'input'
}, {
  key: 'FileExtType',
  enDescriptor: 'FileExtType',
  cnDescriptor: 'Key回档文件扩展名，回档专用',
  link: '',
  type: 'input'
}, {
  key: 'FileSize',
  enDescriptor: 'FileSize',
  cnDescriptor: 'Key回档文件大小，回档专用',
  link: '',
  type: 'inputNumber'
}, {
  key: 'FileContent',
  enDescriptor: 'FileContent',
  cnDescriptor: 'Key回档文件内容，回档专用',
  link: '',
  type: 'input'
}]; // 各产品实例列表detail配置

var queryEditorConfig = {
  instanceDocUrl: 'https://cloud.tencent.com/document/api/596/39664',
  namespace: namespace,
  fieldDescriptor: TCAPLUSFilterFieldsDescriptor
};
var TCAPLUS_STATE = {
  region: '',
  metricName: '',
  metricUnit: '',
  period: undefined,
  dimensionObject: null,
  instance: '',
  instanceAlias: 'TableInstanceId',
  queries: TCAPLUSFilterFields
};

function GetInstanceQueryParams(queries) {
  if (queries === void 0) {
    queries = {};
  }

  var params = {};
  params.Limit = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(queries, 'Limit', 20) || 20;
  params.Offset = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(queries, 'Offset', 0) || 0;
  params.ClusterId = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(queries, 'ClusterId', '') || '';
  params.TableGroupIds = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(queries, 'TableGroupIds', []) || [];
  queries = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.omit(queries, ['Offset', 'Limit', 'TableGroupIds', 'ClusterId']);
  var SelectedTables = [];

  lodash__WEBPACK_IMPORTED_MODULE_0___default.a.forEach(queries, function (item, key) {
    if (lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isArray(item)) {
      item = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.compact(item);

      if (item.length > 0) {
        SelectedTables[key] = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.uniq(item);
      }
    } else if (lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isObject(item)) {
      if (lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isNumber(lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(item, 'value', undefined)) || !lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isEmpty(lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(item, 'value', undefined))) {
        SelectedTables[key] = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(item, 'value');
      }
    } else if (lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isNumber(item) || !lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isEmpty(item)) {
      SelectedTables[key] = item;
    }
  });

  params.SelectedTables = SelectedTables;
  return params;
} // 和其他产品的展示保持一致


var regonsMap = {
  'ap-beijing': '华北地区(北京)',
  'ap-guangzhou': '华南地区(广州)',
  'ap-hongkong': '港澳台地区(中国香港)',
  'ap-seoul': '亚太东北(首尔)',
  'ap-shanghai': '华东地区(上海)',
  'ap-singapore': '亚太东南(新加坡)',
  'ap-tokyo': '亚太东北(东京)',
  'eu-frankfurt': '欧洲地区(法兰克福)',
  'na-ashburn': '美国东部(弗吉尼亚)',
  'na-siliconvalley': '美国西部(硅谷)'
};
/* harmony default export */ __webpack_exports__["default"] = (TCAPLUS_STATE);


/***/ }),

/***/ "./datasource/tc_monitor/tdmq/datasource.ts":
/*!**************************************************!*\
  !*** ./datasource/tc_monitor/tdmq/datasource.ts ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _query_def__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./query_def */ "./datasource/tc_monitor/tdmq/query_def.ts");
/* harmony import */ var _base_datasource__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../_base/datasource */ "./datasource/tc_monitor/_base/datasource.ts");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lodash */ "lodash");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _common_constants__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../common/constants */ "./datasource/common/constants.ts");
/* harmony import */ var _common_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../common/utils */ "./datasource/common/utils.ts");
/* harmony import */ var _common_datasourceStorage__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../common/datasourceStorage */ "./datasource/common/datasourceStorage.ts");
/* harmony import */ var _locale__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../locale */ "./locale/index.ts");
var __extends = undefined && undefined.__extends || function () {
  var _extendStatics = function extendStatics(d, b) {
    _extendStatics = Object.setPrototypeOf || {
      __proto__: []
    } instanceof Array && function (d, b) {
      d.__proto__ = b;
    } || function (d, b) {
      for (var p in b) {
        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];
      }
    };

    return _extendStatics(d, b);
  };

  return function (d, b) {
    if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");

    _extendStatics(d, b);

    function __() {
      this.constructor = d;
    }

    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();

var __awaiter = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {
  function adopt(value) {
    return value instanceof P ? value : new P(function (resolve) {
      resolve(value);
    });
  }

  return new (P || (P = Promise))(function (resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }

    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }

    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }

    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};

var __generator = undefined && undefined.__generator || function (thisArg, body) {
  var _ = {
    label: 0,
    sent: function sent() {
      if (t[0] & 1) throw t[1];
      return t[1];
    },
    trys: [],
    ops: []
  },
      f,
      y,
      t,
      g;
  return g = {
    next: verb(0),
    "throw": verb(1),
    "return": verb(2)
  }, typeof Symbol === "function" && (g[Symbol.iterator] = function () {
    return this;
  }), g;

  function verb(n) {
    return function (v) {
      return step([n, v]);
    };
  }

  function step(op) {
    if (f) throw new TypeError("Generator is already executing.");

    while (_) {
      try {
        if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
        if (y = 0, t) op = [op[0] & 2, t.value];

        switch (op[0]) {
          case 0:
          case 1:
            t = op;
            break;

          case 4:
            _.label++;
            return {
              value: op[1],
              done: false
            };

          case 5:
            _.label++;
            y = op[1];
            op = [0];
            continue;

          case 7:
            op = _.ops.pop();

            _.trys.pop();

            continue;

          default:
            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
              _ = 0;
              continue;
            }

            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
              _.label = op[1];
              break;
            }

            if (op[0] === 6 && _.label < t[1]) {
              _.label = t[1];
              t = op;
              break;
            }

            if (t && _.label < t[2]) {
              _.label = t[2];

              _.ops.push(op);

              break;
            }

            if (t[2]) _.ops.pop();

            _.trys.pop();

            continue;
        }

        op = body.call(thisArg, _);
      } catch (e) {
        op = [6, e];
        y = 0;
      } finally {
        f = t = 0;
      }
    }

    if (op[0] & 5) throw op[1];
    return {
      value: op[0] ? op[1] : void 0,
      done: true
    };
  }
};









var TDMQDatasource =
/** @class */
function (_super) {
  __extends(TDMQDatasource, _super);

  function TDMQDatasource(instanceSettings, backendSrv, templateSrv) {
    var _this = _super.call(this, instanceSettings, backendSrv, templateSrv) || this;

    _this.Namespace = _query_def__WEBPACK_IMPORTED_MODULE_0__["namespace"];
    _this.InstanceAliasList = _query_def__WEBPACK_IMPORTED_MODULE_0__["TDMQInstanceAliasList"];
    _this.InvalidDimensions = _query_def__WEBPACK_IMPORTED_MODULE_0__["TDMQInvalidDemensions"];
    _this.templateQueryIdMap = _query_def__WEBPACK_IMPORTED_MODULE_0__["templateQueryIdMap"];
    _this.queryMonitorExtraConfg = _query_def__WEBPACK_IMPORTED_MODULE_0__["queryMonitorExtraConfg"];
    _this.keyInStorage = _query_def__WEBPACK_IMPORTED_MODULE_0__["keyInStorage"]; // 此处service是接口的配置参数，需和plugin.json里一致，和constant.ts中SERVICES_API_INFO保持一致

    _this.InstanceReqConfig = {
      service: 'tdmq',
      action: 'DescribeClusters',
      responseField: 'ClusterSet'
    };
    _this.extraActionMap = {
      DescribeTopics: {
        service: 'tdmq',
        action: 'DescribeTopics',
        responseField: 'TopicSets',
        pickKey: 'TopicName'
      },
      DescribeEnvironments: {
        service: 'tdmq',
        action: 'DescribeEnvironments',
        responseField: 'EnvironmentSet',
        pickKey: 'EnvironmentId'
      }
    };
    return _this;
  } // getFilterDropdown({ field }) {
  //   return super.getRegions();
  // }


  TDMQDatasource.prototype.getRegions = function () {
    return Promise.resolve(_query_def__WEBPACK_IMPORTED_MODULE_0__["regionSupported"].map(function (_a) {
      var value = _a.value;
      return {
        value: value,
        text: Object(_locale__WEBPACK_IMPORTED_MODULE_6__["t"])(value)
      };
    }));
  };

  TDMQDatasource.prototype.getMetrics = function (region) {
    if (region === void 0) {
      region = 'ap-guangzhou';
    }

    return __awaiter(this, void 0, void 0, function () {
      var rawSet;
      return __generator(this, function (_a) {
        switch (_a.label) {
          case 0:
            return [4
            /*yield*/
            , _super.prototype.getMetrics.call(this, region)];

          case 1:
            rawSet = _a.sent();
            return [2
            /*return*/
            , lodash__WEBPACK_IMPORTED_MODULE_2___default.a.compact(rawSet.map(function (item) {
              return Object(_query_def__WEBPACK_IMPORTED_MODULE_0__["modifyDimensons"])(item);
            }))];
        }
      });
    });
  };

  TDMQDatasource.prototype.getConsumerList = function (params) {
    return __awaiter(this, void 0, void 0, function () {
      var region, act, payload, _a, service, action, responseField, serviceInfo, rs;

      var _this = this;

      return __generator(this, function (_b) {
        switch (_b.label) {
          case 0:
            region = params.region, act = params.action, payload = params.payload;
            _a = this.extraActionMap[act], service = _a.service, action = _a.action, responseField = _a.responseField;
            serviceInfo = Object(_common_constants__WEBPACK_IMPORTED_MODULE_3__["GetServiceAPIInfo"])(region, service);
            return [4
            /*yield*/
            , Object(_common_utils__WEBPACK_IMPORTED_MODULE_4__["fetchAllFactory"])(function (data) {
              return _this.doRequest({
                url: _this.url + serviceInfo.path,
                data: data
              }, serviceInfo.service, {
                region: region,
                action: action
              });
            }, payload, responseField)];

          case 1:
            rs = _b.sent(); // console.log({ rs });

            return [2
            /*return*/
            , rs[0]];
        }
      });
    });
  };

  TDMQDatasource.prototype.fetchMetricData = function (action, region, instance, query) {
    return __awaiter(this, void 0, void 0, function () {
      var payload, rs, pickKey_1, result;

      var _this = this;

      return __generator(this, function (_a) {
        switch (_a.label) {
          case 0:
            payload = {
              Limit: 100,
              ClusterId: instance[this.templateQueryIdMap.instance]
            };
            if (!(Object.keys(this.extraActionMap).indexOf(action) !== -1)) return [3
            /*break*/
            , 3];

            if (action === 'DescribeTopics') {
              payload.EnvironmentId = this.getVariable(query['environmentid']);
            }

            return [4
            /*yield*/
            , this.getConsumerList({
              region: region,
              action: action,
              payload: payload
            })];

          case 1:
            rs = _a.sent();
            pickKey_1 = this.extraActionMap[action].pickKey;
            result = rs.map(function (o) {
              o._InstanceAliasValue = o[_this.templateQueryIdMap[pickKey_1]];
              return {
                text: o[_this.templateQueryIdMap[pickKey_1]],
                value: o[_this.templateQueryIdMap[pickKey_1]]
              };
            });
            return [4
            /*yield*/
            , _common_datasourceStorage__WEBPACK_IMPORTED_MODULE_5__["default"].setExtraStorage(this.service, this.keyInStorage[pickKey_1], rs)];

          case 2:
            _a.sent();

            return [2
            /*return*/
            , result];

          case 3:
            return [2
            /*return*/
            , []];
        }
      });
    });
  };

  return TDMQDatasource;
}(_base_datasource__WEBPACK_IMPORTED_MODULE_1__["BaseDatasource"]);

/* harmony default export */ __webpack_exports__["default"] = (TDMQDatasource);

/***/ }),

/***/ "./datasource/tc_monitor/tdmq/query.ts":
/*!*********************************************!*\
  !*** ./datasource/tc_monitor/tdmq/query.ts ***!
  \*********************************************/
/*! exports provided: QueryCtrl, sQuery */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "QueryCtrl", function() { return QueryCtrl; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "sQuery", function() { return sQuery; });
/* harmony import */ var grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! grafana/app/core/core_module */ "grafana/app/core/core_module");
/* harmony import */ var grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _query_def__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./query_def */ "./datasource/tc_monitor/tdmq/query_def.ts");
/* harmony import */ var _common_constants__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../common/constants */ "./datasource/common/constants.ts");
var __awaiter = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {
  function adopt(value) {
    return value instanceof P ? value : new P(function (resolve) {
      resolve(value);
    });
  }

  return new (P || (P = Promise))(function (resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }

    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }

    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }

    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};

var __generator = undefined && undefined.__generator || function (thisArg, body) {
  var _ = {
    label: 0,
    sent: function sent() {
      if (t[0] & 1) throw t[1];
      return t[1];
    },
    trys: [],
    ops: []
  },
      f,
      y,
      t,
      g;
  return g = {
    next: verb(0),
    "throw": verb(1),
    "return": verb(2)
  }, typeof Symbol === "function" && (g[Symbol.iterator] = function () {
    return this;
  }), g;

  function verb(n) {
    return function (v) {
      return step([n, v]);
    };
  }

  function step(op) {
    if (f) throw new TypeError("Generator is already executing.");

    while (_) {
      try {
        if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
        if (y = 0, t) op = [op[0] & 2, t.value];

        switch (op[0]) {
          case 0:
          case 1:
            t = op;
            break;

          case 4:
            _.label++;
            return {
              value: op[1],
              done: false
            };

          case 5:
            _.label++;
            y = op[1];
            op = [0];
            continue;

          case 7:
            op = _.ops.pop();

            _.trys.pop();

            continue;

          default:
            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
              _ = 0;
              continue;
            }

            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
              _.label = op[1];
              break;
            }

            if (op[0] === 6 && _.label < t[1]) {
              _.label = t[1];
              t = op;
              break;
            }

            if (t && _.label < t[2]) {
              _.label = t[2];

              _.ops.push(op);

              break;
            }

            if (t[2]) _.ops.pop();

            _.trys.pop();

            continue;
        }

        op = body.call(thisArg, _);
      } catch (e) {
        op = [6, e];
        y = 0;
      } finally {
        f = t = 0;
      }
    }

    if (op[0] & 5) throw op[1];
    return {
      value: op[0] ? op[1] : void 0,
      done: true
    };
  }
};




var ExtraFields = [{
  label: 'environmentId',
  field: 'environmentId',
  action: 'DescribeEnvironments'
}, {
  label: 'topicName',
  field: 'topicName',
  action: 'DescribeTopics'
}];
var dropdownTextConfig = {
  DescribeTopics: 'topicName',
  DescribeEnvironments: 'environmentId'
};

var QueryCtrl =
/** @class */
function () {
  QueryCtrl.$inject = ["$scope", "$rootScope"];

  /** @ngInject */
  function QueryCtrl($scope, $rootScope) {
    var _this = this;

    $scope.init = function () {
      $scope.TDMQFilterFieldsDescriptor = _query_def__WEBPACK_IMPORTED_MODULE_1__["TDMQFilterFieldsDescriptor"];
      $scope.ExtraFields = ExtraFields;
      $scope.namespace = _query_def__WEBPACK_IMPORTED_MODULE_1__["namespace"];
    };

    $scope.getInstanceId = function () {
      var instance = $scope.target.instance;
      var service = Object(_common_constants__WEBPACK_IMPORTED_MODULE_2__["GetServiceFromNamespace"])($scope.namespace);
      instance = $scope.datasource.getServiceFn(service, 'getVariable')(instance);

      if (!instance) {
        return '';
      }

      try {
        instance = JSON.parse(instance)[_query_def__WEBPACK_IMPORTED_MODULE_1__["templateQueryIdMap"].instance];
      } catch (error) {// console.log();
      }

      return instance;
    };

    $scope.getExtraFields = function () {
      return ExtraFields.filter(function (item) {
        var _a, _b;

        return item.field in ((_a = $scope.dims) !== null && _a !== void 0 ? _a : {}) || item.label in ((_b = $scope.dims) !== null && _b !== void 0 ? _b : {});
      });
    };

    $scope.getExtraDropdown = function (target, action) {
      return __awaiter(_this, void 0, void 0, function () {
        var service, region, payload, evId, rs, result;
        return __generator(this, function (_a) {
          switch (_a.label) {
            case 0:
              service = Object(_common_constants__WEBPACK_IMPORTED_MODULE_2__["GetServiceFromNamespace"])($scope.namespace);
              region = $scope.datasource.getServiceFn(service, 'getVariable')(target.region);
              payload = {
                Limit: 100,
                ClusterId: $scope.getInstanceId()
              };

              if (action === 'DescribeTopics') {
                evId = $scope.target.environmentId;

                try {
                  evId = JSON.parse(evId);
                  evId = evId[_query_def__WEBPACK_IMPORTED_MODULE_1__["templateQueryIdMap"].environmentId];
                } catch (e) {}

                payload.EnvironmentId = evId;
              }

              return [4
              /*yield*/
              , $scope.datasource.getServiceFn(service, 'getConsumerList')({
                region: region,
                action: action,
                payload: payload
              })];

            case 1:
              rs = _a.sent();
              result = rs.map(function (o) {
                o._InstanceAliasValue = o[_query_def__WEBPACK_IMPORTED_MODULE_1__["templateQueryIdMap"][dropdownTextConfig[action]]];
                return {
                  text: o[_query_def__WEBPACK_IMPORTED_MODULE_1__["templateQueryIdMap"][dropdownTextConfig[action]]],
                  label: o[_query_def__WEBPACK_IMPORTED_MODULE_1__["templateQueryIdMap"][dropdownTextConfig[action]]],
                  value: JSON.stringify(o)
                };
              });
              return [2
              /*return*/
              , result];
          }
        });
      });
    };

    $scope.init();
  }

  return QueryCtrl;
}();


var template = "\n<div>\n  <div class=\"tc-sub-params\" ng-if=\"showDetail\">\n    <label class=\"gf-form-label tc-info-label\">\n      Functions are queried by following params.\n      <a target=\"_blank\" style=\"text-decoration:underline;color:#006eff;font-size:medium\" href=\"https://cloud.tencent.com/document/product/248/50388\">Click here to get API doc.</a>\n    </label>\n    <div class=\"gf-form-inline\" ng-repeat=\"field in TDMQFilterFieldsDescriptor\">\n      <div class=\"gf-form\">\n        <label class=\"gf-form-label width-14\">\n          {{ field.key }}\n          <info-popover mode=\"right-normal\">\n            {{ field.cnDescriptor }}\n            <a target=\"_blank\" href=\"{{field.link}}\" ng-if=\"field.link\">Click here for more information.</a>\n          </info-popover>\n        </label>\n        <input\n          ng-if=\"field.type === 'inputNumber'\"\n          style=\"margin-right:2px\"\n          type=\"number\"\n          ng-model=\"target.queries[field.key]\"\n          ng-change=\"onChange()\"\n          class=\"gf-form-input width-10\"\n          ng-min=\"field.min\"\n          ng-max=\"field.max\"\n        />\n        <input\n          ng-if=\"field.type === 'input'\"\n          style=\"margin-right:2px\"\n          type=\"text\"\n          ng-model=\"target.queries[field.key]\"\n          ng-change=\"onChange()\"\n          class=\"gf-form-input width-10\"\n        />    \n        <multi-condition\n          ng-if=\"field.type === 'inputNumberMulti'\"\n          type=\"'inputNumber'\"\n          max-cond=\"5\"\n          value=\"target.queries.Filters[field.key]\"\n          maxNum=\"field.max\"\n          minNum=\"field.min\"\n          on-change=\"onChange()\"\n        ></multi-condition>\n        <multi-condition\n          ng-if=\"field.type === 'inputMulti'\"\n          type=\"'input'\"\n          value=\"target.queries[field.key]\"\n          on-change=\"onChange()\"\n        ></multi-condition>\n        <custom-select-dropdown\n          ng-if=\"field.type === 'select'\"\n          value=\"target.queries[field.key]\"\n          options=\"field.list\"\n          multiple=\"field.multiple || false\"\n          on-change=\"onChange()\"\n        ></custom-select-dropdown>\n      </div>\n    </div>\n  </div>\n\n<!-- \u8D77\u59CB\u533A\u57DF \u76EE\u7684\u533A\u57DF\u7B49 -->\n  <div>\n    <div class=\"gf-form-inline\" ng-repeat=\"extra in getExtraFields()\">\n      <div class=\"gf-form\">\n        <label class=\"gf-form-label query-keyword width-9\">{{extra.label}}</label>\n        <div class=\"gf-form-select-wrapper gf-form-select-wrapper--caret-indent\">\n          <gf-form-dropdown model=\"target[extra.field]\" allow-custom=\"false\" get-options=\"getExtraDropdown(target, extra.action)\"\n            on-change=\"onRefresh()\" css-class=\"min-width-10\">\n          </gf-form-dropdown>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n";
function sQuery() {
  return {
    template: template,
    controller: QueryCtrl,
    restrict: 'E',
    scope: {
      target: '=',
      showDetail: '=',
      region: '=',
      datasource: '=',
      getDropdownOptions: '&',
      onChange: '&',
      onRefresh: '&',
      dims: '='
    }
  };
}
grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0___default.a.directive(_query_def__WEBPACK_IMPORTED_MODULE_1__["queryEditorName"], sQuery);

/***/ }),

/***/ "./datasource/tc_monitor/tdmq/query_def.ts":
/*!*************************************************!*\
  !*** ./datasource/tc_monitor/tdmq/query_def.ts ***!
  \*************************************************/
/*! exports provided: default, TDMQFilterFieldsDescriptor, templateQueryIdMap, TDMQInstanceAliasList, TDMQInvalidDemensions, namespace, queryEditorName, queryMonitorExtraConfg, keyInStorage, modifyDimensons, regionSupported, TDMQGetInstanceQueryParams */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TDMQFilterFieldsDescriptor", function() { return TDMQFilterFieldsDescriptor; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "templateQueryIdMap", function() { return templateQueryIdMap; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TDMQInstanceAliasList", function() { return TDMQInstanceAliasList; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TDMQInvalidDemensions", function() { return TDMQInvalidDemensions; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "namespace", function() { return namespace; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "queryEditorName", function() { return queryEditorName; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "queryMonitorExtraConfg", function() { return queryMonitorExtraConfg; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "keyInStorage", function() { return keyInStorage; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "modifyDimensons", function() { return modifyDimensons; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "regionSupported", function() { return regionSupported; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TDMQGetInstanceQueryParams", function() { return GetInstanceQueryParams; });
/* harmony import */ var _common_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../common/utils */ "./datasource/common/utils.ts");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lodash */ "lodash");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_1__);


var namespace = 'QCE/TDMQ'; // 组件名称。这里名字要和index.ts中的SERVICES对应，后面会根据SERVICES中service字段拼接这个query组件名称

var queryEditorName = 'tdmqQuery';
var TDMQInvalidDemensions = {
  tenantId: 'ClusterId',
  tenant: 'ClusterId',
  topicName: 'TopicName',
  environmentId: 'EnvironmentId'
}; // 需和文件名对应

var TDMQInstanceAliasList = ['ClusterId', 'ClusterName'];
var templateQueryIdMap = {
  instance: 'ClusterId',
  topicName: 'TopicName',
  environmentId: 'EnvironmentId'
}; // select类型需要注意是{},multi后缀是[],dropdown是''

var TDMQFilterFields = {
  Limit: 20,
  Offset: 0
};
var TDMQFilterFieldsDescriptor = [{
  key: 'Offset',
  enDescriptor: 'Offset',
  cnDescriptor: '偏移量, 例如Offset=20&Limit=20 返回第 20 到 40 项',
  link: '',
  type: 'inputNumber',
  min: 0
}, {
  key: 'Limit',
  enDescriptor: 'Limit',
  cnDescriptor: '单次请求返回的数量，默认为20，最小值为1，最大值为100',
  link: '',
  type: 'inputNumber',
  min: 1,
  max: 100
}];
var CDNPROVINCE_STATE = {
  region: '',
  metricName: '',
  metricUnit: '',
  period: undefined,
  dimensionObject: null,
  instance: '',
  instanceAlias: 'ClusterId',
  // 此处key应该是经过TDMQInvalidDemensions处理后的
  topicName: '',
  environmentId: '',
  queries: TDMQFilterFields
};

function GetInstanceQueryParams(queries) {
  if (queries === void 0) {
    queries = {};
  }

  return Object(_common_utils__WEBPACK_IMPORTED_MODULE_0__["instanceQueryParamsBaseParse"])(queries, true);
}

var regionSupported = [{
  value: 'ap-beijing'
}, {
  value: 'ap-chengdu'
}, {
  value: 'ap-chongqing'
}, {
  value: 'ap-guangzhou'
}, {
  value: 'ap-shenzhen-fsi'
}, {
  value: 'ap-shanghai'
}, {
  value: 'ap-shanghai-fsi'
}, {
  value: 'ap-nanjing'
}, {
  value: 'ap-hongkong'
}, {
  value: 'ap-tokyo'
}, {
  value: 'ap-seoul'
}, {
  value: 'ap-singapore'
}, {
  value: 'ap-bangkok'
}, {
  value: 'ap-jakarta'
}, {
  value: 'ap-mumbai'
}, {
  value: 'eu-frankfurt'
}, {
  value: 'eu-moscow'
}, {
  value: 'na-ashburn'
}, {
  value: 'na-siliconvalley'
}, {
  value: 'na-toronto'
}];

function modifyDimensons(metricItem) {
  var metricTmp = lodash__WEBPACK_IMPORTED_MODULE_1___default.a.cloneDeep(metricItem);

  metricTmp.Dimensions.forEach(function (item) {
    if (item.Dimensions.indexOf('topicName') !== -1 && item.Dimensions.indexOf('environmentId') === -1) {
      item.Dimensions.push('environmentId');
    }
  });
  return metricTmp;
} // 需要缓存到storage的内容的key列表


var keyInStorage = {
  topicName: 'topicName',
  environmentId: 'environmentId'
};
/*
如果有InstanceId额外的维度，原则上都需要传入此map结构配置
key的含义：
  经过InvalidDemensions处理后的string。topicId =》TopicId。
  否则认为指标中维度正确，和指标中维度字段保持一致，即topicId
value的含义：
  1 dim_KeyInStorage 指标中维度dimension对应的storage中的key，获取缓存列表，sourceMapList、
  2 dim_KeyInTarget  通过getVariable方法获取变量中选中项。比如ListnerId为Lis-xxxx；即：STATE中的key。
                    默认取通过InvalidDemsion处理后的key
  3 dim_KeyInMap     保存在模板变量value比如（监听器ID）源自sourceMapList（接口返回内容）的哪个key（ListenerId）。
                    即：templateQueryIdMap中内容。
                    联合上面2的内容筛选出原始sourceMap
*/

var queryMonitorExtraConfg = {
  TopicName: {
    dim_KeyInStorage: keyInStorage.topicName,
    dim_KeyInTarget: 'topicName',
    dim_KeyInMap: templateQueryIdMap.topicName
  },
  EnvironmentId: {
    dim_KeyInStorage: keyInStorage.environmentId,
    dim_KeyInTarget: 'environmentId',
    dim_KeyInMap: templateQueryIdMap.environmentId
  }
};
/* harmony default export */ __webpack_exports__["default"] = (CDNPROVINCE_STATE);


/***/ }),

/***/ "./datasource/tc_monitor/tdmq_rabbitmq/datasource.ts":
/*!***********************************************************!*\
  !*** ./datasource/tc_monitor/tdmq_rabbitmq/datasource.ts ***!
  \***********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _query_def__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./query_def */ "./datasource/tc_monitor/tdmq_rabbitmq/query_def.ts");
/* harmony import */ var _base_datasource__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../_base/datasource */ "./datasource/tc_monitor/_base/datasource.ts");
/* harmony import */ var _common_constants__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../common/constants */ "./datasource/common/constants.ts");
/* harmony import */ var _common_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../common/utils */ "./datasource/common/utils.ts");
/* harmony import */ var _common_datasourceStorage__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../common/datasourceStorage */ "./datasource/common/datasourceStorage.ts");
/* harmony import */ var _locale__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../locale */ "./locale/index.ts");
var __extends = undefined && undefined.__extends || function () {
  var _extendStatics = function extendStatics(d, b) {
    _extendStatics = Object.setPrototypeOf || {
      __proto__: []
    } instanceof Array && function (d, b) {
      d.__proto__ = b;
    } || function (d, b) {
      for (var p in b) {
        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];
      }
    };

    return _extendStatics(d, b);
  };

  return function (d, b) {
    if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");

    _extendStatics(d, b);

    function __() {
      this.constructor = d;
    }

    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();

var __awaiter = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {
  function adopt(value) {
    return value instanceof P ? value : new P(function (resolve) {
      resolve(value);
    });
  }

  return new (P || (P = Promise))(function (resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }

    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }

    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }

    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};

var __generator = undefined && undefined.__generator || function (thisArg, body) {
  var _ = {
    label: 0,
    sent: function sent() {
      if (t[0] & 1) throw t[1];
      return t[1];
    },
    trys: [],
    ops: []
  },
      f,
      y,
      t,
      g;
  return g = {
    next: verb(0),
    "throw": verb(1),
    "return": verb(2)
  }, typeof Symbol === "function" && (g[Symbol.iterator] = function () {
    return this;
  }), g;

  function verb(n) {
    return function (v) {
      return step([n, v]);
    };
  }

  function step(op) {
    if (f) throw new TypeError("Generator is already executing.");

    while (_) {
      try {
        if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
        if (y = 0, t) op = [op[0] & 2, t.value];

        switch (op[0]) {
          case 0:
          case 1:
            t = op;
            break;

          case 4:
            _.label++;
            return {
              value: op[1],
              done: false
            };

          case 5:
            _.label++;
            y = op[1];
            op = [0];
            continue;

          case 7:
            op = _.ops.pop();

            _.trys.pop();

            continue;

          default:
            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
              _ = 0;
              continue;
            }

            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
              _.label = op[1];
              break;
            }

            if (op[0] === 6 && _.label < t[1]) {
              _.label = t[1];
              t = op;
              break;
            }

            if (t && _.label < t[2]) {
              _.label = t[2];

              _.ops.push(op);

              break;
            }

            if (t[2]) _.ops.pop();

            _.trys.pop();

            continue;
        }

        op = body.call(thisArg, _);
      } catch (e) {
        op = [6, e];
        y = 0;
      } finally {
        f = t = 0;
      }
    }

    if (op[0] & 5) throw op[1];
    return {
      value: op[0] ? op[1] : void 0,
      done: true
    };
  }
};








var TDMQDatasource =
/** @class */
function (_super) {
  __extends(TDMQDatasource, _super);

  function TDMQDatasource(instanceSettings, backendSrv, templateSrv) {
    var _this = _super.call(this, instanceSettings, backendSrv, templateSrv) || this;

    _this.Namespace = _query_def__WEBPACK_IMPORTED_MODULE_0__["namespace"];
    _this.InstanceAliasList = _query_def__WEBPACK_IMPORTED_MODULE_0__["TDMQRABBITMQInstanceAliasList"];
    _this.InvalidDimensions = _query_def__WEBPACK_IMPORTED_MODULE_0__["TDMQInvalidDemensions"];
    _this.templateQueryIdMap = _query_def__WEBPACK_IMPORTED_MODULE_0__["templateQueryIdMap"];
    _this.queryMonitorExtraConfg = _query_def__WEBPACK_IMPORTED_MODULE_0__["queryMonitorExtraConfg"];
    _this.keyInStorage = _query_def__WEBPACK_IMPORTED_MODULE_0__["keyInStorage"]; // 此处service是接口的配置参数，需和plugin.json里一致，和constant.ts中SERVICES_API_INFO保持一致

    _this.InstanceReqConfig = {
      service: 'tdmq',
      action: 'DescribeRabbitMQVipInstances',
      responseField: 'Instances'
    };
    _this.extraActionMap = {
      DescribeRabbitMQNodeList: {
        service: 'tdmq',
        action: 'DescribeRabbitMQNodeList',
        responseField: 'NodeList',
        pickKey: 'node'
      }
    };
    return _this;
  }

  TDMQDatasource.prototype.getRegions = function () {
    return Promise.resolve(_query_def__WEBPACK_IMPORTED_MODULE_0__["regionSupported"].map(function (_a) {
      var value = _a.value;
      return {
        value: value,
        text: Object(_locale__WEBPACK_IMPORTED_MODULE_5__["t"])(value)
      };
    }));
  };

  TDMQDatasource.prototype.getConsumerList = function (params) {
    return __awaiter(this, void 0, void 0, function () {
      var region, act, payload, _a, service, action, responseField, serviceInfo, rs;

      var _this = this;

      return __generator(this, function (_b) {
        switch (_b.label) {
          case 0:
            region = params.region, act = params.action, payload = params.payload;
            _a = this.extraActionMap[act], service = _a.service, action = _a.action, responseField = _a.responseField;
            serviceInfo = Object(_common_constants__WEBPACK_IMPORTED_MODULE_2__["GetServiceAPIInfo"])(region, service);
            return [4
            /*yield*/
            , Object(_common_utils__WEBPACK_IMPORTED_MODULE_3__["fetchAllFactory"])(function (data) {
              return _this.doRequest({
                url: _this.url + serviceInfo.path,
                data: data
              }, serviceInfo.service, {
                region: region,
                action: action
              });
            }, payload, responseField)];

          case 1:
            rs = _b.sent();
            return [2
            /*return*/
            , rs[0]];
        }
      });
    });
  };

  TDMQDatasource.prototype.fetchMetricData = function (action, region, instance, query) {
    return __awaiter(this, void 0, void 0, function () {
      var payload, rs, pickKey_1, result;

      var _this = this;

      return __generator(this, function (_a) {
        switch (_a.label) {
          case 0:
            payload = {
              Limit: 100,
              InstanceId: instance[this.templateQueryIdMap.instance]
            };
            if (!(Object.keys(this.extraActionMap).indexOf(action) !== -1)) return [3
            /*break*/
            , 3];
            return [4
            /*yield*/
            , this.getConsumerList({
              region: region,
              action: action,
              payload: payload
            })];

          case 1:
            rs = _a.sent();
            pickKey_1 = this.extraActionMap[action].pickKey;
            result = rs.map(function (o) {
              o._InstanceAliasValue = o[_this.templateQueryIdMap[pickKey_1]];
              return {
                text: o[_this.templateQueryIdMap[pickKey_1]],
                value: o[_this.templateQueryIdMap[pickKey_1]]
              };
            });
            return [4
            /*yield*/
            , _common_datasourceStorage__WEBPACK_IMPORTED_MODULE_4__["default"].setExtraStorage(this.service, this.keyInStorage[pickKey_1], rs)];

          case 2:
            _a.sent();

            return [2
            /*return*/
            , result];

          case 3:
            return [2
            /*return*/
            , []];
        }
      });
    });
  };

  return TDMQDatasource;
}(_base_datasource__WEBPACK_IMPORTED_MODULE_1__["BaseDatasource"]);

/* harmony default export */ __webpack_exports__["default"] = (TDMQDatasource);

/***/ }),

/***/ "./datasource/tc_monitor/tdmq_rabbitmq/query.ts":
/*!******************************************************!*\
  !*** ./datasource/tc_monitor/tdmq_rabbitmq/query.ts ***!
  \******************************************************/
/*! exports provided: QueryCtrl, sQuery */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "QueryCtrl", function() { return QueryCtrl; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "sQuery", function() { return sQuery; });
/* harmony import */ var grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! grafana/app/core/core_module */ "grafana/app/core/core_module");
/* harmony import */ var grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _query_def__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./query_def */ "./datasource/tc_monitor/tdmq_rabbitmq/query_def.ts");
/* harmony import */ var _common_constants__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../common/constants */ "./datasource/common/constants.ts");
var __awaiter = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {
  function adopt(value) {
    return value instanceof P ? value : new P(function (resolve) {
      resolve(value);
    });
  }

  return new (P || (P = Promise))(function (resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }

    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }

    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }

    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};

var __generator = undefined && undefined.__generator || function (thisArg, body) {
  var _ = {
    label: 0,
    sent: function sent() {
      if (t[0] & 1) throw t[1];
      return t[1];
    },
    trys: [],
    ops: []
  },
      f,
      y,
      t,
      g;
  return g = {
    next: verb(0),
    "throw": verb(1),
    "return": verb(2)
  }, typeof Symbol === "function" && (g[Symbol.iterator] = function () {
    return this;
  }), g;

  function verb(n) {
    return function (v) {
      return step([n, v]);
    };
  }

  function step(op) {
    if (f) throw new TypeError("Generator is already executing.");

    while (_) {
      try {
        if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
        if (y = 0, t) op = [op[0] & 2, t.value];

        switch (op[0]) {
          case 0:
          case 1:
            t = op;
            break;

          case 4:
            _.label++;
            return {
              value: op[1],
              done: false
            };

          case 5:
            _.label++;
            y = op[1];
            op = [0];
            continue;

          case 7:
            op = _.ops.pop();

            _.trys.pop();

            continue;

          default:
            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
              _ = 0;
              continue;
            }

            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
              _.label = op[1];
              break;
            }

            if (op[0] === 6 && _.label < t[1]) {
              _.label = t[1];
              t = op;
              break;
            }

            if (t && _.label < t[2]) {
              _.label = t[2];

              _.ops.push(op);

              break;
            }

            if (t[2]) _.ops.pop();

            _.trys.pop();

            continue;
        }

        op = body.call(thisArg, _);
      } catch (e) {
        op = [6, e];
        y = 0;
      } finally {
        f = t = 0;
      }
    }

    if (op[0] & 5) throw op[1];
    return {
      value: op[0] ? op[1] : void 0,
      done: true
    };
  }
};




var ExtraFields = [{
  label: 'Node',
  field: 'node',
  action: 'DescribeRabbitMQNodeList'
}];
var dropdownTextConfig = {
  DescribeRabbitMQNodeList: 'node'
};

var QueryCtrl =
/** @class */
function () {
  QueryCtrl.$inject = ["$scope", "$rootScope"];

  /** @ngInject */
  function QueryCtrl($scope, $rootScope) {
    var _this = this;

    $scope.init = function () {
      $scope.TDMQFilterFieldsDescriptor = _query_def__WEBPACK_IMPORTED_MODULE_1__["TDMQFilterFieldsDescriptor"];
      $scope.ExtraFields = ExtraFields;
      $scope.namespace = _query_def__WEBPACK_IMPORTED_MODULE_1__["namespace"];
    };

    $scope.clearExtrasAlias = function () {
      $scope.target.node = '';
    };

    $scope.getInstanceId = function () {
      var instance = $scope.target.instance;
      var service = Object(_common_constants__WEBPACK_IMPORTED_MODULE_2__["GetServiceFromNamespace"])($scope.namespace);
      instance = $scope.datasource.getServiceFn(service, 'getVariable')(instance);

      if (!instance) {
        return '';
      }

      try {
        instance = JSON.parse(instance)[_query_def__WEBPACK_IMPORTED_MODULE_1__["templateQueryIdMap"].instance];
      } catch (error) {// console.log();
      }

      return instance;
    };

    $scope.getExtraFields = function () {
      return ExtraFields.filter(function (item) {
        var _a, _b;

        return item.field in ((_a = $scope.dims) !== null && _a !== void 0 ? _a : {}) || item.label in ((_b = $scope.dims) !== null && _b !== void 0 ? _b : {});
      });
    };

    $scope.getExtraDropdown = function (target, action) {
      return __awaiter(_this, void 0, void 0, function () {
        var service, region, payload, rs, result;
        return __generator(this, function (_a) {
          switch (_a.label) {
            case 0:
              service = Object(_common_constants__WEBPACK_IMPORTED_MODULE_2__["GetServiceFromNamespace"])($scope.namespace);
              region = $scope.datasource.getServiceFn(service, 'getVariable')(target.region);
              payload = {
                Limit: 100,
                InstanceId: $scope.getInstanceId()
              };
              return [4
              /*yield*/
              , $scope.datasource.getServiceFn(service, 'getConsumerList')({
                region: region,
                action: action,
                payload: payload
              })];

            case 1:
              rs = _a.sent();
              result = rs.map(function (o) {
                o._InstanceAliasValue = o[_query_def__WEBPACK_IMPORTED_MODULE_1__["templateQueryIdMap"][dropdownTextConfig[action]]];
                return {
                  text: o[_query_def__WEBPACK_IMPORTED_MODULE_1__["templateQueryIdMap"][dropdownTextConfig[action]]],
                  label: o[_query_def__WEBPACK_IMPORTED_MODULE_1__["templateQueryIdMap"][dropdownTextConfig[action]]],
                  value: JSON.stringify(o)
                };
              });
              return [2
              /*return*/
              , result];
          }
        });
      });
    };

    $scope.init();
  }

  return QueryCtrl;
}();


var template = "\n<div>\n  <div class=\"tc-sub-params\" ng-if=\"showDetail\">\n    <label class=\"gf-form-label tc-info-label\">\n      Functions are queried by following params.\n      <a target=\"_blank\" style=\"text-decoration:underline;color:#006eff;font-size:medium\" href=\"https://cloud.tencent.com/document/product/248/50388\">Click here to get API doc.</a>\n    </label>\n    <div class=\"gf-form-inline\" ng-repeat=\"field in TDMQFilterFieldsDescriptor\">\n      <div class=\"gf-form\">\n        <label class=\"gf-form-label width-14\">\n          {{ field.key }}\n          <info-popover mode=\"right-normal\">\n            {{ field.cnDescriptor }}\n            <a target=\"_blank\" href=\"{{field.link}}\" ng-if=\"field.link\">Click here for more information.</a>\n          </info-popover>\n        </label>\n        <input\n          ng-if=\"field.type === 'inputNumber'\"\n          style=\"margin-right:2px\"\n          type=\"number\"\n          ng-model=\"target.queries[field.key]\"\n          ng-change=\"onChange()\"\n          class=\"gf-form-input width-10\"\n          ng-min=\"field.min\"\n          ng-max=\"field.max\"\n        />\n        <input\n          ng-if=\"field.type === 'input'\"\n          style=\"margin-right:2px\"\n          type=\"text\"\n          ng-model=\"target.queries[field.key]\"\n          ng-change=\"onChange()\"\n          class=\"gf-form-input width-10\"\n        />    \n        <multi-condition\n          ng-if=\"field.type === 'inputNumberMulti'\"\n          type=\"'inputNumber'\"\n          max-cond=\"5\"\n          value=\"target.queries.Filters[field.key]\"\n          maxNum=\"field.max\"\n          minNum=\"field.min\"\n          on-change=\"onChange()\"\n        ></multi-condition>\n        <multi-condition\n          ng-if=\"field.type === 'inputMulti'\"\n          type=\"'input'\"\n          value=\"target.queries[field.key]\"\n          on-change=\"onChange()\"\n        ></multi-condition>\n        <custom-select-dropdown\n          ng-if=\"field.type === 'select'\"\n          value=\"target.queries[field.key]\"\n          options=\"field.list\"\n          multiple=\"field.multiple || false\"\n          on-change=\"onChange()\"\n        ></custom-select-dropdown>\n      </div>\n    </div>\n  </div>\n\n<!-- \u8D77\u59CB\u533A\u57DF \u76EE\u7684\u533A\u57DF\u7B49 -->\n  <div>\n    <div class=\"gf-form-inline\" ng-repeat=\"extra in getExtraFields()\">\n      <div class=\"gf-form\">\n        <label class=\"gf-form-label query-keyword width-9\">{{extra.label}}</label>\n        <div class=\"gf-form-select-wrapper gf-form-select-wrapper--caret-indent\">\n          <gf-form-dropdown model=\"target[extra.field]\" get-options=\"getExtraDropdown(target, extra.action)\"\n            on-change=\"onRefresh()\" css-class=\"min-width-10\">\n          </gf-form-dropdown>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n";
function sQuery() {
  return {
    template: template,
    controller: QueryCtrl,
    restrict: 'E',
    scope: {
      target: '=',
      showDetail: '=',
      region: '=',
      datasource: '=',
      getDropdownOptions: '&',
      onChange: '&',
      onRefresh: '&',
      dims: '='
    },
    link: function link(scope, element, attrs) {
      scope.$watch('target.instance', function () {
        var _a;

        (_a = scope.clearExtrasAlias) === null || _a === void 0 ? void 0 : _a.call(scope);
      });
      scope.$watch('target.metricName', function () {
        var _a;

        (_a = scope.clearExtrasAlias) === null || _a === void 0 ? void 0 : _a.call(scope);
      });
    }
  };
}
grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0___default.a.directive('tdmqRabbitmqQuery', sQuery);

/***/ }),

/***/ "./datasource/tc_monitor/tdmq_rabbitmq/query_def.ts":
/*!**********************************************************!*\
  !*** ./datasource/tc_monitor/tdmq_rabbitmq/query_def.ts ***!
  \**********************************************************/
/*! exports provided: default, TDMQFilterFieldsDescriptor, templateQueryIdMap, TDMQRABBITMQInstanceAliasList, TDMQInvalidDemensions, namespace, queryEditorName, queryMonitorExtraConfg, keyInStorage, regionSupported, TDMQGetInstanceQueryParams */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TDMQFilterFieldsDescriptor", function() { return TDMQFilterFieldsDescriptor; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "templateQueryIdMap", function() { return templateQueryIdMap; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TDMQRABBITMQInstanceAliasList", function() { return TDMQRABBITMQInstanceAliasList; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TDMQInvalidDemensions", function() { return TDMQInvalidDemensions; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "namespace", function() { return namespace; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "queryEditorName", function() { return queryEditorName; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "queryMonitorExtraConfg", function() { return queryMonitorExtraConfg; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "keyInStorage", function() { return keyInStorage; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "regionSupported", function() { return regionSupported; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TDMQGetInstanceQueryParams", function() { return GetInstanceQueryParams; });
/* harmony import */ var _common_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../common/utils */ "./datasource/common/utils.ts");

var namespace = 'QCE/RABBITMQ'; // 组件名称。这里名字要和index.ts中的SERVICES对应，后面会根据SERVICES中service字段拼接这个query组件名称

var queryEditorName = 'tdmqQuery';
var TDMQInvalidDemensions = {
  instanceid: 'InstanceId',
  node: 'NodeName'
}; // 需和文件名对应

var TDMQRABBITMQInstanceAliasList = ['InstanceId', 'InstanceName'];
var templateQueryIdMap = {
  instance: 'InstanceId',
  node: 'NodeName'
}; // select类型需要注意是{},multi后缀是[],dropdown是''

var TDMQFilterFields = {
  Limit: 20,
  Offset: 0
};
var TDMQFilterFieldsDescriptor = [{
  key: 'Offset',
  enDescriptor: 'Offset',
  cnDescriptor: '偏移量, 例如Offset=20&Limit=20 返回第 20 到 40 项',
  link: '',
  type: 'inputNumber',
  min: 0
}, {
  key: 'Limit',
  enDescriptor: 'Limit',
  cnDescriptor: '单次请求返回的数量，默认为20，最小值为1，最大值为100',
  link: '',
  type: 'inputNumber',
  min: 1,
  max: 100
}];
var TDMQ_STATE = {
  region: '',
  metricName: '',
  metricUnit: '',
  period: undefined,
  dimensionObject: null,
  instance: '',
  instanceAlias: 'InstanceId',
  // 此处key应该是经过TDMQInvalidDemensions处理后的
  node: '',
  queries: TDMQFilterFields
};

function GetInstanceQueryParams(queries) {
  if (queries === void 0) {
    queries = {};
  }

  return Object(_common_utils__WEBPACK_IMPORTED_MODULE_0__["instanceQueryParamsBaseParse"])(queries, true);
}

var regionSupported = [{
  value: 'ap-beijing'
}, {
  value: 'ap-chengdu'
}, {
  value: 'ap-chongqing'
}, {
  value: 'ap-guangzhou'
}, {
  value: 'ap-shenzhen-fsi'
}, {
  value: 'ap-shanghai'
}, {
  value: 'ap-shanghai-fsi'
}, {
  value: 'ap-nanjing'
}, {
  value: 'ap-hongkong'
}, {
  value: 'ap-tokyo'
}, {
  value: 'ap-seoul'
}, {
  value: 'ap-singapore'
}, {
  value: 'ap-bangkok'
}, {
  value: 'ap-jakarta'
}, {
  value: 'ap-mumbai'
}, {
  value: 'eu-frankfurt'
}, {
  value: 'eu-moscow'
}, {
  value: 'na-ashburn'
}, {
  value: 'na-siliconvalley'
}, {
  value: 'na-toronto'
}]; // 需要缓存到storage的内容的key列表

var keyInStorage = {
  node: 'NodeName'
};
/*
如果有InstanceId额外的维度，原则上都需要传入此map结构配置
key的含义：
  经过InvalidDemensions处理后的string。topicId =》TopicId。
  否则认为指标中维度正确，和指标中维度字段保持一致，即topicId
value的含义：
  1 dim_KeyInStorage 指标中维度dimension对应的storage中的key，获取缓存列表，sourceMapList、
  2 dim_KeyInTarget  通过getVariable方法获取变量中选中项。比如ListnerId为Lis-xxxx；即：STATE中的key。
                    默认取通过InvalidDemsion处理后的key
  3 dim_KeyInMap     保存在模板变量value比如（监听器ID）源自sourceMapList（接口返回内容）的哪个key（ListenerId）。
                    即：templateQueryIdMap中内容。
                    联合上面2的内容筛选出原始sourceMap
*/

var queryMonitorExtraConfg = {
  NodeName: {
    dim_KeyInStorage: keyInStorage.node,
    dim_KeyInTarget: 'node',
    dim_KeyInMap: templateQueryIdMap.node
  }
};
/* harmony default export */ __webpack_exports__["default"] = (TDMQ_STATE);


/***/ }),

/***/ "./datasource/tc_monitor/tdmq_rocketmq/datasource.ts":
/*!***********************************************************!*\
  !*** ./datasource/tc_monitor/tdmq_rocketmq/datasource.ts ***!
  \***********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _query_def__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./query_def */ "./datasource/tc_monitor/tdmq_rocketmq/query_def.ts");
/* harmony import */ var _base_datasource__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../_base/datasource */ "./datasource/tc_monitor/_base/datasource.ts");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lodash */ "lodash");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _common_constants__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../common/constants */ "./datasource/common/constants.ts");
/* harmony import */ var _common_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../common/utils */ "./datasource/common/utils.ts");
/* harmony import */ var _common_datasourceStorage__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../common/datasourceStorage */ "./datasource/common/datasourceStorage.ts");
/* harmony import */ var _locale__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../locale */ "./locale/index.ts");
var __extends = undefined && undefined.__extends || function () {
  var _extendStatics = function extendStatics(d, b) {
    _extendStatics = Object.setPrototypeOf || {
      __proto__: []
    } instanceof Array && function (d, b) {
      d.__proto__ = b;
    } || function (d, b) {
      for (var p in b) {
        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];
      }
    };

    return _extendStatics(d, b);
  };

  return function (d, b) {
    if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");

    _extendStatics(d, b);

    function __() {
      this.constructor = d;
    }

    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();

var __assign = undefined && undefined.__assign || function () {
  __assign = Object.assign || function (t) {
    for (var s, i = 1, n = arguments.length; i < n; i++) {
      s = arguments[i];

      for (var p in s) {
        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
      }
    }

    return t;
  };

  return __assign.apply(this, arguments);
};

var __awaiter = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {
  function adopt(value) {
    return value instanceof P ? value : new P(function (resolve) {
      resolve(value);
    });
  }

  return new (P || (P = Promise))(function (resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }

    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }

    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }

    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};

var __generator = undefined && undefined.__generator || function (thisArg, body) {
  var _ = {
    label: 0,
    sent: function sent() {
      if (t[0] & 1) throw t[1];
      return t[1];
    },
    trys: [],
    ops: []
  },
      f,
      y,
      t,
      g;
  return g = {
    next: verb(0),
    "throw": verb(1),
    "return": verb(2)
  }, typeof Symbol === "function" && (g[Symbol.iterator] = function () {
    return this;
  }), g;

  function verb(n) {
    return function (v) {
      return step([n, v]);
    };
  }

  function step(op) {
    if (f) throw new TypeError("Generator is already executing.");

    while (_) {
      try {
        if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
        if (y = 0, t) op = [op[0] & 2, t.value];

        switch (op[0]) {
          case 0:
          case 1:
            t = op;
            break;

          case 4:
            _.label++;
            return {
              value: op[1],
              done: false
            };

          case 5:
            _.label++;
            y = op[1];
            op = [0];
            continue;

          case 7:
            op = _.ops.pop();

            _.trys.pop();

            continue;

          default:
            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
              _ = 0;
              continue;
            }

            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
              _.label = op[1];
              break;
            }

            if (op[0] === 6 && _.label < t[1]) {
              _.label = t[1];
              t = op;
              break;
            }

            if (t && _.label < t[2]) {
              _.label = t[2];

              _.ops.push(op);

              break;
            }

            if (t[2]) _.ops.pop();

            _.trys.pop();

            continue;
        }

        op = body.call(thisArg, _);
      } catch (e) {
        op = [6, e];
        y = 0;
      } finally {
        f = t = 0;
      }
    }

    if (op[0] & 5) throw op[1];
    return {
      value: op[0] ? op[1] : void 0,
      done: true
    };
  }
};









var TDMQDatasource =
/** @class */
function (_super) {
  __extends(TDMQDatasource, _super);

  function TDMQDatasource(instanceSettings, backendSrv, templateSrv) {
    var _this = _super.call(this, instanceSettings, backendSrv, templateSrv) || this;

    _this.Namespace = _query_def__WEBPACK_IMPORTED_MODULE_0__["namespace"];
    _this.InstanceAliasList = _query_def__WEBPACK_IMPORTED_MODULE_0__["TDMQROCKETMQInstanceAliasList"];
    _this.InvalidDimensions = _query_def__WEBPACK_IMPORTED_MODULE_0__["TDMQInvalidDemensions"];
    _this.templateQueryIdMap = _query_def__WEBPACK_IMPORTED_MODULE_0__["templateQueryIdMap"];
    _this.queryMonitorExtraConfg = _query_def__WEBPACK_IMPORTED_MODULE_0__["queryMonitorExtraConfg"];
    _this.keyInStorage = _query_def__WEBPACK_IMPORTED_MODULE_0__["keyInStorage"]; // 此处service是接口的配置参数，需和plugin.json里一致，和constant.ts中SERVICES_API_INFO保持一致

    _this.InstanceReqConfig = {
      service: 'tdmq',
      action: 'DescribeRocketMQClusters',
      responseField: 'ClusterList',
      interceptor: {
        response: function response(result) {
          return lodash__WEBPACK_IMPORTED_MODULE_2___default.a.map(result, function (item) {
            return __assign(__assign({}, item), {
              ClusterId: lodash__WEBPACK_IMPORTED_MODULE_2___default.a.get(item, 'Info.ClusterId', ''),
              ClusterName: lodash__WEBPACK_IMPORTED_MODULE_2___default.a.get(item, 'Info.ClusterName', '')
            });
          });
        }
      }
    };
    _this.extraActionMap = {
      DescribeRocketMQNamespaces: {
        service: 'tdmq',
        action: 'DescribeRocketMQNamespaces',
        responseField: 'Namespaces',
        pickKey: 'namespace'
      },
      DescribeRocketMQGroups: {
        service: 'tdmq',
        action: 'DescribeRocketMQGroups',
        responseField: 'Groups',
        pickKey: 'group'
      }
    };
    return _this;
  }

  TDMQDatasource.prototype.getMetrics = function (region) {
    if (region === void 0) {
      region = 'ap-guangzhou';
    }

    return __awaiter(this, void 0, void 0, function () {
      var rawSet;
      return __generator(this, function (_a) {
        switch (_a.label) {
          case 0:
            return [4
            /*yield*/
            , _super.prototype.getMetrics.call(this, region)];

          case 1:
            rawSet = _a.sent();
            return [2
            /*return*/
            , rawSet.filter(function (item) {
              var _a, _b, _c;

              return !((_c = (_b = (_a = item.Dimensions) === null || _a === void 0 ? void 0 : _a[0]) === null || _b === void 0 ? void 0 : _b.Dimensions) === null || _c === void 0 ? void 0 : _c.includes('rmqcluster'));
            })];
        }
      });
    });
  };

  TDMQDatasource.prototype.getRegions = function () {
    return Promise.resolve(_query_def__WEBPACK_IMPORTED_MODULE_0__["regionSupported"].map(function (_a) {
      var value = _a.value;
      return {
        value: value,
        text: Object(_locale__WEBPACK_IMPORTED_MODULE_6__["t"])(value)
      };
    }));
  };

  TDMQDatasource.prototype.getConsumerList = function (params) {
    return __awaiter(this, void 0, void 0, function () {
      var region, act, payload, _a, service, action, responseField, serviceInfo, rs;

      var _this = this;

      return __generator(this, function (_b) {
        switch (_b.label) {
          case 0:
            region = params.region, act = params.action, payload = params.payload;
            _a = this.extraActionMap[act], service = _a.service, action = _a.action, responseField = _a.responseField;
            serviceInfo = Object(_common_constants__WEBPACK_IMPORTED_MODULE_3__["GetServiceAPIInfo"])(region, service);
            return [4
            /*yield*/
            , Object(_common_utils__WEBPACK_IMPORTED_MODULE_4__["fetchAllFactory"])(function (data) {
              return _this.doRequest({
                url: _this.url + serviceInfo.path,
                data: data
              }, serviceInfo.service, {
                region: region,
                action: action
              });
            }, payload, responseField)];

          case 1:
            rs = _b.sent();
            return [2
            /*return*/
            , rs[0]];
        }
      });
    });
  };

  TDMQDatasource.prototype.fetchMetricData = function (action, region, instance, query) {
    return __awaiter(this, void 0, void 0, function () {
      var payload, rs, pickKey_1, result;

      var _this = this;

      return __generator(this, function (_a) {
        switch (_a.label) {
          case 0:
            payload = {
              Limit: 100,
              ClusterId: instance[this.templateQueryIdMap.instance]
            };
            if (!(Object.keys(this.extraActionMap).indexOf(action) !== -1)) return [3
            /*break*/
            , 3];

            if (action === 'DescribeRocketMQGroups') {
              payload.NamespaceId = this.getVariable(query['clusternamespace']);
            }

            return [4
            /*yield*/
            , this.getConsumerList({
              region: region,
              action: action,
              payload: payload
            })];

          case 1:
            rs = _a.sent();
            pickKey_1 = this.extraActionMap[action].pickKey;
            result = rs.map(function (o) {
              o._InstanceAliasValue = o[_this.templateQueryIdMap[pickKey_1]];
              return {
                text: o[_this.templateQueryIdMap[pickKey_1]],
                value: o[_this.templateQueryIdMap[pickKey_1]]
              };
            });
            return [4
            /*yield*/
            , _common_datasourceStorage__WEBPACK_IMPORTED_MODULE_5__["default"].setExtraStorage(this.service, this.keyInStorage[pickKey_1], rs)];

          case 2:
            _a.sent();

            return [2
            /*return*/
            , result];

          case 3:
            return [2
            /*return*/
            , []];
        }
      });
    });
  };

  return TDMQDatasource;
}(_base_datasource__WEBPACK_IMPORTED_MODULE_1__["BaseDatasource"]);

/* harmony default export */ __webpack_exports__["default"] = (TDMQDatasource);

/***/ }),

/***/ "./datasource/tc_monitor/tdmq_rocketmq/query.ts":
/*!******************************************************!*\
  !*** ./datasource/tc_monitor/tdmq_rocketmq/query.ts ***!
  \******************************************************/
/*! exports provided: TdmqRocketmqQueryCtrl, tdmqRocketmqQuery */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TdmqRocketmqQueryCtrl", function() { return TdmqRocketmqQueryCtrl; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "tdmqRocketmqQuery", function() { return tdmqRocketmqQuery; });
/* harmony import */ var grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! grafana/app/core/core_module */ "grafana/app/core/core_module");
/* harmony import */ var grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _query_def__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./query_def */ "./datasource/tc_monitor/tdmq_rocketmq/query_def.ts");
/* harmony import */ var _common_constants__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../common/constants */ "./datasource/common/constants.ts");
var __awaiter = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {
  function adopt(value) {
    return value instanceof P ? value : new P(function (resolve) {
      resolve(value);
    });
  }

  return new (P || (P = Promise))(function (resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }

    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }

    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }

    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};

var __generator = undefined && undefined.__generator || function (thisArg, body) {
  var _ = {
    label: 0,
    sent: function sent() {
      if (t[0] & 1) throw t[1];
      return t[1];
    },
    trys: [],
    ops: []
  },
      f,
      y,
      t,
      g;
  return g = {
    next: verb(0),
    "throw": verb(1),
    "return": verb(2)
  }, typeof Symbol === "function" && (g[Symbol.iterator] = function () {
    return this;
  }), g;

  function verb(n) {
    return function (v) {
      return step([n, v]);
    };
  }

  function step(op) {
    if (f) throw new TypeError("Generator is already executing.");

    while (_) {
      try {
        if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
        if (y = 0, t) op = [op[0] & 2, t.value];

        switch (op[0]) {
          case 0:
          case 1:
            t = op;
            break;

          case 4:
            _.label++;
            return {
              value: op[1],
              done: false
            };

          case 5:
            _.label++;
            y = op[1];
            op = [0];
            continue;

          case 7:
            op = _.ops.pop();

            _.trys.pop();

            continue;

          default:
            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
              _ = 0;
              continue;
            }

            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
              _.label = op[1];
              break;
            }

            if (op[0] === 6 && _.label < t[1]) {
              _.label = t[1];
              t = op;
              break;
            }

            if (t && _.label < t[2]) {
              _.label = t[2];

              _.ops.push(op);

              break;
            }

            if (t[2]) _.ops.pop();

            _.trys.pop();

            continue;
        }

        op = body.call(thisArg, _);
      } catch (e) {
        op = [6, e];
        y = 0;
      } finally {
        f = t = 0;
      }
    }

    if (op[0] & 5) throw op[1];
    return {
      value: op[0] ? op[1] : void 0,
      done: true
    };
  }
};




var ExtraFields = [{
  label: 'Namespace',
  field: 'namespace',
  action: 'DescribeRocketMQNamespaces'
}, {
  label: 'Group',
  field: 'group',
  action: 'DescribeRocketMQGroups'
}];
var dropdownTextConfig = {
  DescribeRocketMQNamespaces: 'namespace',
  DescribeRocketMQGroups: 'group'
};

var TdmqRocketmqQueryCtrl =
/** @class */
function () {
  TdmqRocketmqQueryCtrl.$inject = ["$scope", "$rootScope"];

  /** @ngInject */
  function TdmqRocketmqQueryCtrl($scope, $rootScope) {
    var _this = this;

    $scope.init = function () {
      $scope.TDMQFilterFieldsDescriptor = _query_def__WEBPACK_IMPORTED_MODULE_1__["TDMQFilterFieldsDescriptor"];
      $scope.ExtraFields = ExtraFields;
      $scope.namespace = _query_def__WEBPACK_IMPORTED_MODULE_1__["namespace"];
    };

    $scope.clearExtrasAlias = function () {
      $scope.target.namespace = '';
      $scope.target.group = '';
    };

    $scope.onChecked = function (srcField, dstField) {
      if ($scope.target.queries[srcField] === true) {
        $scope.target.queries[dstField] = false;
      }

      $scope.onChange();
    };

    $scope.getInstanceId = function () {
      var instance = $scope.target.instance;
      var service = Object(_common_constants__WEBPACK_IMPORTED_MODULE_2__["GetServiceFromNamespace"])($scope.namespace);
      instance = $scope.datasource.getServiceFn(service, 'getVariable')(instance);

      if (!instance) {
        return '';
      }

      try {
        instance = JSON.parse(instance)[_query_def__WEBPACK_IMPORTED_MODULE_1__["templateQueryIdMap"].instance];
      } catch (error) {// console.log();
      }

      return instance;
    };

    $scope.getExtraFields = function () {
      return ExtraFields.filter(function (item) {
        var _a, _b;

        return item.field in ((_a = $scope.dims) !== null && _a !== void 0 ? _a : {}) || item.label in ((_b = $scope.dims) !== null && _b !== void 0 ? _b : {});
      });
    };

    $scope.getExtraDropdown = function (target, action) {
      return __awaiter(_this, void 0, void 0, function () {
        var service, region, payload, namespace_1, rs, result;
        return __generator(this, function (_a) {
          switch (_a.label) {
            case 0:
              service = Object(_common_constants__WEBPACK_IMPORTED_MODULE_2__["GetServiceFromNamespace"])($scope.namespace);
              region = $scope.datasource.getServiceFn(service, 'getVariable')(target.region);
              payload = {
                Limit: 100,
                ClusterId: $scope.getInstanceId()
              };

              if (action === 'DescribeRocketMQGroups') {
                namespace_1 = $scope.target.namespace;

                try {
                  namespace_1 = JSON.parse(namespace_1)[_query_def__WEBPACK_IMPORTED_MODULE_1__["templateQueryIdMap"].namespace];
                } catch (e) {}

                payload.NamespaceId = $scope.datasource.getServiceFn(service, 'getVariable')(namespace_1);
              }

              return [4
              /*yield*/
              , $scope.datasource.getServiceFn(service, 'getConsumerList')({
                region: region,
                action: action,
                payload: payload
              })];

            case 1:
              rs = _a.sent();
              result = rs.map(function (o) {
                o._InstanceAliasValue = o[_query_def__WEBPACK_IMPORTED_MODULE_1__["templateQueryIdMap"][dropdownTextConfig[action]]];
                return {
                  text: o[_query_def__WEBPACK_IMPORTED_MODULE_1__["templateQueryIdMap"][dropdownTextConfig[action]]],
                  value: JSON.stringify(o)
                };
              });
              return [2
              /*return*/
              , result];
          }
        });
      });
    };

    $scope.init();
  }

  return TdmqRocketmqQueryCtrl;
}();


var template = "\n<div>\n  <div class=\"tc-sub-params\" ng-if=\"showDetail\">\n    <label class=\"gf-form-label tc-info-label\">\n      Functions are queried by following params.\n      <a target=\"_blank\" style=\"text-decoration:underline;color:#006eff;font-size:medium\" href=\"https://cloud.tencent.com/document/product/248/50388\">Click here to get API doc.</a>\n    </label>\n    <div class=\"gf-form-inline\">\n      <div class=\"gf-form\">\n        <label class=\"gf-form-label width-14\">\n          Offset\n          <info-popover mode=\"right-normal\">\n            \u504F\u79FB\u91CF, \u4F8B\u5982Offset=20&Limit=20 \u8FD4\u56DE\u7B2C 20 \u5230 40 \u9879\n          </info-popover>\n        </label>\n        <input type=\"number\" ng-model=\"target.queries.Offset\" class=\"gf-form-input width-10\" ng-min=\"0\" ng-change=\"onChange()\">\n      </div>\n    </div>\n    <div class=\"gf-form-inline\">\n      <div class=\"gf-form\">\n        <label class=\"gf-form-label width-14\">\n          Limit\n          <info-popover mode=\"right-normal\">\n            \u5355\u6B21\u8BF7\u6C42\u8FD4\u56DE\u7684\u6570\u91CF\uFF0C\u9ED8\u8BA4\u4E3A20\uFF0C\u6700\u5C0F\u503C\u4E3A1\uFF0C\u6700\u5927\u503C\u4E3A100\n          </info-popover>\n        </label>\n        <input type=\"number\" ng-model=\"target.queries.Limit\" class=\"gf-form-input width-10\" ng-min=\"1\" ng-max=\"100\" ng-change=\"onChange()\">\n      </div>\n    </div>\n    <div class=\"gf-form-inline\">\n      <div class=\"gf-form\">\n        <label class=\"gf-form-label width-9\">\n          ClusterIdList\n          <info-popover mode=\"right-normal\">\n            \u5B9E\u4F8B ID\uFF0C\u6BCF\u6B21\u8BF7\u6C42\u7684\u5B9E\u4F8B\u7684\u4E0A\u9650\u4E3A100\uFF0C\u53C2\u6570\u4E0D\u652F\u6301\u540C\u65F6\u6307\u5B9A ClusterIdList \u548C Filters\n          </info-popover>\n        </label>\n        <gf-form-switch class=\"gf-form tc-switch\" label-class=\"width-7\" checked=\"target.queries.instanceIdsChecked\"\n          switch-class=\"max-width-5\" on-change=\"onChecked('instanceIdsChecked', 'filtersChecked')\"></gf-form-switch>\n      </div>\n    </div>\n    <div class=\"gf-form-inline tc-sub-params\" ng-if=\"target.queries.instanceIdsChecked\">\n      <multi-condition type=\"'input'\" max-cond=\"100\" value=\"target.queries.ClusterIdList\" on-change=\"onChange()\">\n      </multi-condition>\n    </div>\n    <div class=\"gf-form-inline\">\n      <div class=\"gf-form\">\n        <label class=\"gf-form-label width-9\">\n          Filters\n          <info-popover mode=\"right-normal\">\n            \u8FC7\u6EE4\u6761\u4EF6\uFF0C\u6BCF\u6B21\u8BF7\u6C42\u7684 Filters \u7684\u4E0A\u9650\u4E3A10\uFF0CFilter.Values \u7684\u4E0A\u9650\u4E3A5\u3002\u53C2\u6570\u4E0D\u652F\u6301\u540C\u65F6\u6307\u5B9A ClusterIdList \u548C Filters\n          </info-popover>\n        </label>\n        <gf-form-switch class=\"gf-form tc-switch\" label-class=\"width-7\" checked=\"target.queries.filtersChecked\" switch-class=\"max-width-5\"\n          on-change=\"onChecked('filtersChecked','instanceIdsChecked')\"></gf-form-switch>\n      </div>\n    </div>\n    <div ng-if=\"target.queries.filtersChecked\" class=\"tc-sub-params\">\n      <div class=\"gf-form-inline\" ng-repeat=\"field in TDMQFilterFieldsDescriptor\">\n        <label class=\"gf-form-label width-14\">\n          {{ field.key }}\n          <info-popover mode=\"right-normal\">\n            {{ field.cnDescriptor }}\n            <a target=\"_blank\" href=\"{{field.link}}\" ng-if=\"field.link\">Click here for more information.</a>\n          </info-popover>\n        </label>\n        <multi-condition\n          ng-if=\"field.type === 'dropdownmulti'\"\n          type=\"'dropdown'\"\n          max-cond=\"5\"\n          value=\"target.queries.Filters[field.key]\"\n          get-options=\"getDropdown(field.key)\"\n          on-change=\"onChange()\"\n        ></multi-condition>\n        <multi-condition\n          ng-if=\"field.type === 'inputNumbermulti'\"\n          type=\"'inputNumber'\"\n          max-cond=\"5\"\n          value=\"target.queries.Filters[field.key]\"\n          maxNum=\"field.max\"\n          minNum=\"field.min\"\n          on-change=\"onChange()\"\n        ></multi-condition>\n        <multi-condition\n          ng-if=\"field.type === 'inputmulti'\"\n          type=\"'input'\"\n          max-cond=\"5\"\n          value=\"target.queries.Filters[field.key]\"\n          on-change=\"onChange()\"\n        ></multi-condition>\n        <custom-select-dropdown\n          ng-if=\"field.type === 'select'\"\n          value=\"target.queries.Filters[field.key]\"\n          options=\"field.list\"\n          multiple=\"false\"\n          on-change=\"onChange()\"\n        ></custom-select-dropdown>\n      </div>\n    </div>\n  </div>\n\n<!-- \u8D77\u59CB\u533A\u57DF \u76EE\u7684\u533A\u57DF\u7B49 -->\n  <div>\n    <div class=\"gf-form-inline\" ng-repeat=\"extra in getExtraFields()\">\n      <div class=\"gf-form\">\n        <label class=\"gf-form-label query-keyword width-9\">{{extra.label}}</label>\n        <div class=\"gf-form-select-wrapper gf-form-select-wrapper--caret-indent\">\n          <gf-form-dropdown model=\"target[extra.field]\" allow-custom=\"true\" get-options=\"getExtraDropdown(target, extra.action)\"\n            on-change=\"onRefresh()\" css-class=\"min-width-10\">\n          </gf-form-dropdown>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n";
function tdmqRocketmqQuery() {
  return {
    template: template,
    controller: TdmqRocketmqQueryCtrl,
    restrict: 'E',
    scope: {
      target: '=',
      showDetail: '=',
      region: '=',
      datasource: '=',
      getDropdownOptions: '&',
      onChange: '&',
      onRefresh: '&',
      dims: '='
    },
    link: function link(scope, element, attrs) {
      scope.$watch('target.instance', function () {
        var _a;

        (_a = scope.clearExtrasAlias) === null || _a === void 0 ? void 0 : _a.call(scope);
      });
      scope.$watch('target.metricName', function () {
        var _a;

        (_a = scope.clearExtrasAlias) === null || _a === void 0 ? void 0 : _a.call(scope);
      });
    }
  };
}
grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0___default.a.directive('tdmqRocketmqQuery', tdmqRocketmqQuery);

/***/ }),

/***/ "./datasource/tc_monitor/tdmq_rocketmq/query_def.ts":
/*!**********************************************************!*\
  !*** ./datasource/tc_monitor/tdmq_rocketmq/query_def.ts ***!
  \**********************************************************/
/*! exports provided: default, TDMQFilterFieldsDescriptor, templateQueryIdMap, TDMQROCKETMQInstanceAliasList, TDMQInvalidDemensions, namespace, queryMonitorExtraConfg, keyInStorage, regionSupported, TDMQROCKETMQGetInstanceQueryParams */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TDMQFilterFieldsDescriptor", function() { return TDMQFilterFieldsDescriptor; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "templateQueryIdMap", function() { return templateQueryIdMap; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TDMQROCKETMQInstanceAliasList", function() { return TDMQROCKETMQInstanceAliasList; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TDMQInvalidDemensions", function() { return TDMQInvalidDemensions; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "namespace", function() { return namespace; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "queryMonitorExtraConfg", function() { return queryMonitorExtraConfg; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "keyInStorage", function() { return keyInStorage; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "regionSupported", function() { return regionSupported; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TDMQROCKETMQGetInstanceQueryParams", function() { return GetInstanceQueryParams; });
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lodash */ "lodash");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__);

var namespace = 'QCE/ROCKETMQ';
var TDMQInvalidDemensions = {
  tenant: 'ClusterId',
  namespace: 'NamespaceId',
  group: 'Name'
}; // 需和文件名对应

var TDMQROCKETMQInstanceAliasList = ['ClusterId', 'ClusterName'];
var templateQueryIdMap = {
  instance: 'ClusterId',
  namespace: 'NamespaceId',
  group: 'Name'
}; // select类型需要注意是{},multi后缀是[],dropdown是''

var TDMQFilterFields = {
  Limit: 20,
  Offset: 0,
  instanceIdsChecked: false,
  filtersChecked: true,
  ClusterIdList: [''],
  Filters: {
    includeVip: {
      text: '是',
      value: 'true'
    }
  }
};
var TDMQFilterFieldsDescriptor = [{
  key: 'includeVip',
  enDescriptor: 'includeVip',
  cnDescriptor: '包含专享集群',
  link: '',
  type: 'select',
  list: [{
    text: '是',
    value: 'true'
  }, {
    text: '否',
    value: 'false'
  }]
}];
var TDMQ_STATE = {
  region: '',
  metricName: '',
  metricUnit: '',
  period: undefined,
  dimensionObject: null,
  instance: '',
  instanceAlias: 'ClusterId',
  // 此处key应该是经过TDMQInvalidDemensions处理后的
  namespace: '',
  group: '',
  queries: TDMQFilterFields
};

function GetInstanceQueryParams(queries) {
  if (queries === void 0) {
    queries = {};
  }

  var params = {};

  if (!lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isEmpty(queries)) {
    params.Limit = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(queries, 'Limit', 20) || 20;
    params.Offset = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(queries, 'Offset', 0) || 0;

    if (queries.instanceIdsChecked) {
      if (lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isArray(queries.ClusterIdList)) {
        var ClusterIdList = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.compact(queries.ClusterIdList);

        if (lodash__WEBPACK_IMPORTED_MODULE_0___default.a.uniq(ClusterIdList).length > 0) {
          params.ClusterIdList = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.uniq(ClusterIdList).slice(0, 100);
        }
      }
    } else if (queries.filtersChecked) {
      var Filters_1 = [];

      lodash__WEBPACK_IMPORTED_MODULE_0___default.a.forEach(queries.Filters, function (item, key) {
        if (Filters_1.length > 9) {
          return;
        }

        if (lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isArray(item)) {
          item = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.compact(item);

          if (item.length > 0) {
            Filters_1.push({
              Name: key,
              Values: lodash__WEBPACK_IMPORTED_MODULE_0___default.a.uniq(item).slice(0, 5)
            });
          }
        } else if (lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isObject(item)) {
          if (!lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isEmpty(lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(item, 'value', []))) {
            Filters_1.push({
              Name: key,
              Values: [lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(item, 'value', [])].slice(0, 5)
            });
          }
        }
      });

      if (Filters_1.length > 0) {
        params.Filters = Filters_1;
      }
    }
  }

  return params;
}

var regionSupported = [{
  value: 'ap-beijing'
}, {
  value: 'ap-chengdu'
}, {
  value: 'ap-chongqing'
}, {
  value: 'ap-guangzhou'
}, {
  value: 'ap-shenzhen-fsi'
}, {
  value: 'ap-shanghai'
}, {
  value: 'ap-shanghai-fsi'
}, {
  value: 'ap-nanjing'
}, {
  value: 'ap-hongkong'
}, {
  value: 'ap-tokyo'
}, {
  value: 'ap-seoul'
}, {
  value: 'ap-singapore'
}, {
  value: 'ap-bangkok'
}, {
  value: 'ap-jakarta'
}, {
  value: 'ap-mumbai'
}, {
  value: 'eu-frankfurt'
}, {
  value: 'eu-moscow'
}, {
  value: 'na-ashburn'
}, {
  value: 'na-siliconvalley'
}, {
  value: 'na-toronto'
}]; // 需要缓存到storage的内容的key列表

var keyInStorage = {
  namespace: 'NamespaceId',
  group: 'Name'
};
/*
如果有InstanceId额外的维度，原则上都需要传入此map结构配置
key的含义：
  经过InvalidDemensions处理后的string。topicId =》TopicId。
  否则认为指标中维度正确，和指标中维度字段保持一致，即topicId
value的含义：
  1 dim_KeyInStorage 指标中维度dimension对应的storage中的key，获取缓存列表，sourceMapList、
  2 dim_KeyInTarget  通过getVariable方法获取变量中选中项。比如ListnerId为Lis-xxxx；即：STATE中的key。
                    默认取通过InvalidDemsion处理后的key
  3 dim_KeyInMap     保存在模板变量value比如（监听器ID）源自sourceMapList（接口返回内容）的哪个key（ListenerId）。
                    即：templateQueryIdMap中内容。
                    联合上面2的内容筛选出原始sourceMap
*/

var queryMonitorExtraConfg = {
  NamespaceId: {
    dim_KeyInStorage: keyInStorage.namespace,
    dim_KeyInTarget: 'namespace',
    dim_KeyInMap: templateQueryIdMap.namespace
  },
  Name: {
    dim_KeyInStorage: keyInStorage.group,
    dim_KeyInTarget: 'group',
    dim_KeyInMap: templateQueryIdMap.group
  }
};
/* harmony default export */ __webpack_exports__["default"] = (TDMQ_STATE);


/***/ }),

/***/ "./datasource/tc_monitor/tke/datasource.ts":
/*!*************************************************!*\
  !*** ./datasource/tc_monitor/tke/datasource.ts ***!
  \*************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lodash */ "lodash");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _common_constants__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../common/constants */ "./datasource/common/constants.ts");
/* harmony import */ var _common_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../common/utils */ "./datasource/common/utils.ts");
/* harmony import */ var _base_datasource__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../_base/datasource */ "./datasource/tc_monitor/_base/datasource.ts");
var __extends = undefined && undefined.__extends || function () {
  var _extendStatics = function extendStatics(d, b) {
    _extendStatics = Object.setPrototypeOf || {
      __proto__: []
    } instanceof Array && function (d, b) {
      d.__proto__ = b;
    } || function (d, b) {
      for (var p in b) {
        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];
      }
    };

    return _extendStatics(d, b);
  };

  return function (d, b) {
    if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");

    _extendStatics(d, b);

    function __() {
      this.constructor = d;
    }

    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();

var __spreadArray = undefined && undefined.__spreadArray || function (to, from, pack) {
  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {
    if (ar || !(i in from)) {
      if (!ar) ar = Array.prototype.slice.call(from, 0, i);
      ar[i] = from[i];
    }
  }
  return to.concat(ar || Array.prototype.slice.call(from));
};






var variableToArray = function variableToArray(variable) {
  if (Object(lodash__WEBPACK_IMPORTED_MODULE_0__["isEmpty"])(variable)) {
    return [];
  }

  if (Object(lodash__WEBPACK_IMPORTED_MODULE_0__["isArray"])(variable)) {
    return variable;
  }

  if (Object(lodash__WEBPACK_IMPORTED_MODULE_0__["isString"])(variable)) {
    return Object(lodash__WEBPACK_IMPORTED_MODULE_0__["split"])(variable, ',').map(function (item) {
      return Object(lodash__WEBPACK_IMPORTED_MODULE_0__["trim"])(item);
    });
  }

  return [];
};

var TKEDatasource =
/** @class */
function (_super) {
  __extends(TKEDatasource, _super);

  function TKEDatasource(instanceSettings, backendSrv, templateSrv) {
    var _this = _super.call(this, instanceSettings, backendSrv, templateSrv) || this;

    _this.InstanceAliasList = ['ClusterId', 'ClusterName'];
    _this.templateQueryIdMap = {
      instance: 'ClusterId'
    };
    _this.InvalidDimensions = {
      tke_cluster_instance_id: 'ClusterId'
    };
    _this.InstanceReqConfig = {
      service: 'tke',
      action: 'DescribeClusters',
      responseField: 'Clusters'
    };
    return _this;
  }

  TKEDatasource.prototype.getMonitorData = function (params, region, instances, target, options) {
    var _this = this;

    var serviceInfo = Object(_common_constants__WEBPACK_IMPORTED_MODULE_1__["GetServiceAPIInfo"])(region, 'monitor');
    var timeshift = Object(_common_utils__WEBPACK_IMPORTED_MODULE_2__["getTimeShiftInMs"])(target.timeshift);
    var conditions = Object(lodash__WEBPACK_IMPORTED_MODULE_0__["reduce"])(target.conditions, function (prev, item) {
      if (Object(lodash__WEBPACK_IMPORTED_MODULE_0__["isEmpty"])(item.Key) || Object(lodash__WEBPACK_IMPORTED_MODULE_0__["isEmpty"])(item.Operator) || Object(lodash__WEBPACK_IMPORTED_MODULE_0__["isEmpty"])(item.Value)) {
        return prev;
      }

      return __spreadArray(__spreadArray([], Object(lodash__WEBPACK_IMPORTED_MODULE_0__["filter"])(prev, function (e) {
        return e.Key !== item.Key;
      }), true), [{
        Key: Object(_common_constants__WEBPACK_IMPORTED_MODULE_1__["ReplaceVariable"])(_this.templateSrv, options.scopedVars, item.Key, false),
        Operator: Object(_common_constants__WEBPACK_IMPORTED_MODULE_1__["ReplaceVariable"])(_this.templateSrv, options.scopedVars, item.Operator, false),
        Value: variableToArray(Object(_common_constants__WEBPACK_IMPORTED_MODULE_1__["ReplaceVariable"])(_this.templateSrv, options.scopedVars, item.Value, true))
      }], false);
    }, [{
      Key: 'tke_cluster_instance_id',
      Operator: '=',
      Value: instances.map(function (item) {
        return item['ClusterId'];
      })
    }]);
    return this.doRequest({
      url: this.url + serviceInfo.path,
      data: {
        Period: params.Period,
        MetricNames: [params.MetricName],
        Module: 'monitor',
        Namespace: 'QCE/TKE',
        EndTime: params.EndTime,
        StartTime: params.StartTime,
        Conditions: conditions,
        GroupBys: variableToArray(Object(_common_constants__WEBPACK_IMPORTED_MODULE_1__["ReplaceVariable"])(this.templateSrv, options.scopedVars, target.groupBys, true))
      }
    }, serviceInfo.service, {
      action: 'DescribeStatisticData',
      region: region
    }).then(function (response) {
      return Object(lodash__WEBPACK_IMPORTED_MODULE_0__["flatten"])(Object(lodash__WEBPACK_IMPORTED_MODULE_0__["map"])(response.Data, function (data) {
        return Object(lodash__WEBPACK_IMPORTED_MODULE_0__["map"])(data.Points, function (point) {
          var dimensionSort = Object(lodash__WEBPACK_IMPORTED_MODULE_0__["sortBy"])(point.Dimensions, ['Name']);

          var dimensionString = __spreadArray(__spreadArray([], dimensionSort.splice(Object(lodash__WEBPACK_IMPORTED_MODULE_0__["findIndex"])(dimensionSort, {
            Name: 'tke_cluster_instance_id'
          }), 1), true), dimensionSort, true).map(function (dimension) {
            return dimension.Value;
          }).join(' - ');

          var timeshiftString = timeshift > 0 ? "_".concat(target.timeshift) : '';
          return {
            target: "".concat(data.MetricName, " - ").concat(dimensionString).concat(timeshiftString),
            datapoints: Object(lodash__WEBPACK_IMPORTED_MODULE_0__["map"])(point.Values, function (value) {
              return [value.Value, value.Timestamp * 1000 + timeshift];
            })
          };
        });
      }));
    });
  };

  return TKEDatasource;
}(_base_datasource__WEBPACK_IMPORTED_MODULE_3__["BaseDatasource"]);

/* harmony default export */ __webpack_exports__["default"] = (TKEDatasource);

/***/ }),

/***/ "./datasource/tc_monitor/tke/query.ts":
/*!********************************************!*\
  !*** ./datasource/tc_monitor/tke/query.ts ***!
  \********************************************/
/*! exports provided: QueryCtrl, sQuery */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "QueryCtrl", function() { return QueryCtrl; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "sQuery", function() { return sQuery; });
/* harmony import */ var grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! grafana/app/core/core_module */ "grafana/app/core/core_module");
/* harmony import */ var grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lodash */ "lodash");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _query_def__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./query_def */ "./datasource/tc_monitor/tke/query_def.ts");




var QueryCtrl =
/** @class */
function () {
  QueryCtrl.$inject = ["$scope", "$rootScope"];

  /** @ngInject */
  function QueryCtrl($scope, $rootScope) {
    $scope.init = function () {
      $scope.TKEFilterFieldsDescriptor = _query_def__WEBPACK_IMPORTED_MODULE_2__["TKEFilterFieldsDescriptor"];
    };

    $scope.onChecked = function (srcField, dstField) {
      if ($scope.target.queries[srcField] === true) {
        $scope.target.queries[dstField] = false;
      }

      $scope.onChange();
    };

    $scope.addCondition = function () {
      $scope.target.conditions.push({
        Key: '',
        Operator: '=',
        Value: ''
      });
    };

    $scope.deleteCondition = function (index) {
      var targetCondition = $scope.target.conditions[index];

      if (Object(lodash__WEBPACK_IMPORTED_MODULE_1__["isEmpty"])(targetCondition.Key) || Object(lodash__WEBPACK_IMPORTED_MODULE_1__["isEmpty"])(targetCondition.Operator) || Object(lodash__WEBPACK_IMPORTED_MODULE_1__["isEmpty"])(targetCondition.Value)) {
        $scope.target.conditions.splice(index, 1);
      } else {
        $scope.target.conditions.splice(index, 1);
        $scope.onRefresh();
      }
    };

    $scope.getOperator = function () {
      return Promise.resolve([{
        text: '=',
        value: '='
      }, {
        text: 'in',
        value: 'in'
      }]);
    };

    $scope.init();
  }

  return QueryCtrl;
}();


var template = "\n<div>\n  <div class=\"tc-sub-params\" ng-if=\"showDetail\">\n    <label class=\"gf-form-label tc-info-label\">\n      Functions are queried by following params.\n      <a target=\"_blank\" style=\"text-decoration:underline;color:#006eff;font-size:medium\" href=\"https://cloud.tencent.com/document/product/248/50388\">Click here to get API doc.</a>\n    </label>\n    <div class=\"gf-form-inline\">\n      <div class=\"gf-form\">\n        <label class=\"gf-form-label width-14\">\n          Offset\n          <info-popover mode=\"right-normal\">\n            \u504F\u79FB\u91CF, \u4F8B\u5982Offset=20&Limit=20 \u8FD4\u56DE\u7B2C 20 \u5230 40 \u9879\n          </info-popover>\n        </label>\n        <input type=\"number\" ng-model=\"target.queries.Offset\" class=\"gf-form-input width-10\" ng-min=\"0\" ng-change=\"onChange()\">\n      </div>\n    </div>\n    <div class=\"gf-form-inline\">\n      <div class=\"gf-form\">\n        <label class=\"gf-form-label width-14\">\n          Limit\n          <info-popover mode=\"right-normal\">\n            \u5355\u6B21\u8BF7\u6C42\u8FD4\u56DE\u7684\u6570\u91CF\uFF0C\u9ED8\u8BA4\u4E3A20\uFF0C\u6700\u5C0F\u503C\u4E3A1\uFF0C\u6700\u5927\u503C\u4E3A100\n          </info-popover>\n        </label>\n        <input type=\"number\" ng-model=\"target.queries.Limit\" class=\"gf-form-input width-10\" ng-min=\"1\" ng-max=\"100\" ng-change=\"onChange()\">\n      </div>\n    </div>\n    <div class=\"gf-form-inline\">\n      <div class=\"gf-form\">\n        <label class=\"gf-form-label width-9\">\n          ClusterIdList\n          <info-popover mode=\"right-normal\">\n            \u5B9E\u4F8B ID\uFF0C\u6BCF\u6B21\u8BF7\u6C42\u7684\u5B9E\u4F8B\u7684\u4E0A\u9650\u4E3A100\uFF0C\u53C2\u6570\u4E0D\u652F\u6301\u540C\u65F6\u6307\u5B9A ClusterIdList \u548C Filters\n          </info-popover>\n        </label>\n        <gf-form-switch class=\"gf-form tc-switch\" label-class=\"width-7\" checked=\"target.queries.instanceIdsChecked\"\n          switch-class=\"max-width-5\" on-change=\"onChecked('instanceIdsChecked', 'filtersChecked')\"></gf-form-switch>\n      </div>\n    </div>\n    <div class=\"gf-form-inline tc-sub-params\" ng-if=\"target.queries.instanceIdsChecked\">\n      <multi-condition type=\"'input'\" max-cond=\"100\" value=\"target.queries.ClusterIdList\" on-change=\"onChange()\">\n      </multi-condition>\n    </div>\n    <div class=\"gf-form-inline\">\n      <div class=\"gf-form\">\n        <label class=\"gf-form-label width-9\">\n          Filters\n          <info-popover mode=\"right-normal\">\n            \u8FC7\u6EE4\u6761\u4EF6\uFF0C\u6BCF\u6B21\u8BF7\u6C42\u7684 Filters \u7684\u4E0A\u9650\u4E3A10\uFF0CFilter.Values \u7684\u4E0A\u9650\u4E3A5\u3002\u53C2\u6570\u4E0D\u652F\u6301\u540C\u65F6\u6307\u5B9A ClusterIdList \u548C Filters\n          </info-popover>\n        </label>\n        <gf-form-switch class=\"gf-form tc-switch\" label-class=\"width-7\" checked=\"target.queries.filtersChecked\" switch-class=\"max-width-5\"\n          on-change=\"onChecked('filtersChecked','instanceIdsChecked')\"></gf-form-switch>\n      </div>\n    </div>\n    <div ng-if=\"target.queries.filtersChecked\" class=\"tc-sub-params\">\n      <div class=\"gf-form-inline\" ng-repeat=\"field in TKEFilterFieldsDescriptor\">\n        <label class=\"gf-form-label width-14\">\n          {{ field.key }}\n          <info-popover mode=\"right-normal\">\n            {{ field.cnDescriptor }}\n            <a target=\"_blank\" href=\"{{field.link}}\" ng-if=\"field.link\">Click here for more information.</a>\n          </info-popover>\n        </label>\n        <input\n          ng-if=\"field.type === 'input'\"\n          style=\"margin-right:2px\"\n          type=\"text\"\n          ng-model=\"target.queries[field.key]\"\n          ng-change=\"onChange()\"\n          class=\"gf-form-input width-10\"\n        />   \n        <multi-condition\n          ng-if=\"field.type === 'dropdownmulti'\"\n          type=\"'dropdown'\"\n          max-cond=\"5\"\n          value=\"target.queries.Filters[field.key]\"\n          get-options=\"getDropdown(field.key)\"\n          on-change=\"onChange()\"\n        ></multi-condition>\n        <multi-condition\n          ng-if=\"field.type === 'inputNumbermulti'\"\n          type=\"'inputNumber'\"\n          max-cond=\"5\"\n          value=\"target.queries.Filters[field.key]\"\n          maxNum=\"field.max\"\n          minNum=\"field.min\"\n          on-change=\"onChange()\"\n        ></multi-condition>\n        <multi-condition\n          ng-if=\"field.type === 'inputmulti'\"\n          type=\"'input'\"\n          max-cond=\"5\"\n          value=\"target.queries.Filters[field.key]\"\n          on-change=\"onChange()\"\n        ></multi-condition>\n        <custom-select-dropdown\n          ng-if=\"field.type === 'select'\"\n          value=\"target.queries.Filters[field.key]\"\n          options=\"field.list\"\n          multiple=\"false\"\n          on-change=\"onChange()\"\n        ></custom-select-dropdown>\n      </div>\n    </div>\n  </div>\n\n  <div class=\"gf-form-inline\">\n    <div class=\"gf-form\">\n      <label class=\"gf-form-label query-keyword width-9\">Conditions</label>\n      <div>\n        <div class=\"gf-form\" ng-repeat=\"condition in target.conditions\">\n          <input class=\"gf-form-input width-10 tc-condition-input\" type=\"text\" ng-model=\"target.conditions[$index].Key\" ng-blur=\"onRefresh()\"></input>\n          <div class=\"gf-form-select-wrapper gf-form-select-wrapper--caret-indent\">\n            <gf-form-dropdown model=\"target.conditions[$index].Operator\" get-options=\"getOperator()\" on-change=\"onRefresh()\" allow-custom=\"true\" css-class=\"min-width-5\">\n            </gf-form-dropdown>\n          </div>\n          <input class=\"gf-form-input width-10 tc-condition-input\" type=\"text\" ng-model=\"target.conditions[$index].Value\" ng-blur=\"onRefresh()\"></input>\n          <label class=\"gf-form-label pointer\" ng-click=\"deleteCondition($index)\">\n            <i class=\"fa fa-minus\"></i>\n          </label>\n          <label class=\"gf-form-label pointer\" ng-click=\"addCondition()\" ng-if=\"$last\">\n            <i class=\"fa fa-plus\"></i>\n          </label>\n        </div>\n        <div class=\"gf-form\" ng-if=\"target.conditions.length === 0\">\n          <label class=\"gf-form-label pointer\" ng-click=\"addCondition()\">\n            <i class=\"fa fa-plus\"></i>\n          </label>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class=\"gf-form-inline\">\n    <div class=\"gf-form\">\n      <label class=\"gf-form-label query-keyword width-9\">GroupBy</label>\n      <input class=\"gf-form-input width-15\" type=\"text\" ng-model=\"target.groupBys\" ng-blur=\"onRefresh()\"></input>\n    </div>\n  </div>\n</div>\n";
function sQuery() {
  return {
    template: template,
    controller: QueryCtrl,
    restrict: 'E',
    scope: {
      target: '=',
      showDetail: '=',
      region: '=',
      datasource: '=',
      getDropdownOptions: '&',
      onChange: '&',
      onRefresh: '&',
      dims: '='
    }
  };
}
grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0___default.a.directive('tkeQuery', sQuery);

/***/ }),

/***/ "./datasource/tc_monitor/tke/query_def.ts":
/*!************************************************!*\
  !*** ./datasource/tc_monitor/tke/query_def.ts ***!
  \************************************************/
/*! exports provided: default, TKEFilterFieldsDescriptor, TKEInstanceAliasList, TKEGetInstanceQueryParams */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TKEFilterFieldsDescriptor", function() { return TKEFilterFieldsDescriptor; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TKEInstanceAliasList", function() { return TKEInstanceAliasList; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TKEGetInstanceQueryParams", function() { return GetInstanceQueryParams; });
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lodash */ "lodash");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__);

var TKE_STATE = {
  region: '',
  metricName: '',
  metricUnit: '',
  period: undefined,
  dimensionObject: null,
  instance: '',
  instanceAlias: 'ClusterId',
  conditions: [],
  groupBys: '',
  queries: {
    Limit: 20,
    Offset: 0,
    instanceIdsChecked: false,
    filtersChecked: true,
    ClusterIds: [''],
    Filters: {
      ClusterName: [],
      ClusterType: [],
      ClusterStatus: [],
      'tag-key': []
    }
  }
};
var TKEFilterFieldsDescriptor = [{
  key: 'ClusterName',
  enDescriptor: 'Cluster Name',
  cnDescriptor: '集群名',
  link: '',
  type: 'input'
}, {
  key: 'ClusterType',
  enDescriptor: 'Cluster Type',
  cnDescriptor: '集群类型',
  link: '',
  type: 'inputmulti'
}, {
  key: 'ClusterStatus',
  enDescriptor: 'Cluster Status',
  cnDescriptor: '集群状态',
  link: '',
  type: 'inputmulti'
}, {
  key: 'Tags',
  enDescriptor: 'Tags',
  cnDescriptor: '标签键值对',
  link: '',
  type: 'inputmulti'
}, {
  key: 'vpc-id',
  enDescriptor: 'VPC',
  cnDescriptor: 'VPC',
  link: '',
  type: 'input'
}, {
  key: 'tag-key',
  enDescriptor: 'Tag Key',
  cnDescriptor: '标签键',
  link: '',
  type: 'inputmulti'
}, {
  key: 'tag-value',
  enDescriptor: 'Tag Value',
  cnDescriptor: '标签值',
  link: '',
  type: 'inputmulti'
}];
var TKEInstanceAliasList = ['ClusterId', 'ClusterName'];

function GetInstanceQueryParams(queries) {
  if (queries === void 0) {
    queries = {};
  }

  var params = {};

  if (!lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isEmpty(queries)) {
    params.Limit = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(queries, 'Limit', 20) || 20;
    params.Offset = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(queries, 'Offset', 0) || 0;

    if (queries.instanceIdsChecked) {
      if (lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isArray(queries.InstanceIds)) {
        var InstanceIds = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.compact(queries.InstanceIds);

        if (lodash__WEBPACK_IMPORTED_MODULE_0___default.a.uniq(InstanceIds).length > 0) {
          params.InstanceIds = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.uniq(InstanceIds).slice(0, 100);
        }
      }
    } else if (queries.filtersChecked) {
      var Filters_1 = [];

      lodash__WEBPACK_IMPORTED_MODULE_0___default.a.forEach(queries.Filters, function (item, key) {
        if (Filters_1.length > 9) {
          return;
        }

        if (lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isArray(item)) {
          item = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.compact(item);

          if (item.length > 0) {
            Filters_1.push({
              Name: key,
              Values: lodash__WEBPACK_IMPORTED_MODULE_0___default.a.uniq(item).slice(0, 5)
            });
          }
        } else if (lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isObject(item)) {
          if (!lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isEmpty(lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(item, 'value', []))) {
            Filters_1.push({
              Name: key,
              Values: lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(item, 'value', []).slice(0, 5)
            });
          }
        }
      });

      if (Filters_1.length > 0) {
        params.Filters = Filters_1;
      }
    }
  }

  return params;
}

/* harmony default export */ __webpack_exports__["default"] = (TKE_STATE);


/***/ }),

/***/ "./datasource/tc_monitor/tsf/datasource.ts":
/*!*************************************************!*\
  !*** ./datasource/tc_monitor/tsf/datasource.ts ***!
  \*************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _query_def__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./query_def */ "./datasource/tc_monitor/tsf/query_def.ts");
/* harmony import */ var _base_datasource__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../_base/datasource */ "./datasource/tc_monitor/_base/datasource.ts");
var __extends = undefined && undefined.__extends || function () {
  var _extendStatics = function extendStatics(d, b) {
    _extendStatics = Object.setPrototypeOf || {
      __proto__: []
    } instanceof Array && function (d, b) {
      d.__proto__ = b;
    } || function (d, b) {
      for (var p in b) {
        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];
      }
    };

    return _extendStatics(d, b);
  };

  return function (d, b) {
    if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");

    _extendStatics(d, b);

    function __() {
      this.constructor = d;
    }

    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();




var TSFDatasource =
/** @class */
function (_super) {
  __extends(TSFDatasource, _super);

  function TSFDatasource(instanceSettings, backendSrv, templateSrv) {
    var _this = _super.call(this, instanceSettings, backendSrv, templateSrv) || this;

    _this.Namespace = 'QCE/TSF';
    _this.InstanceAliasList = _query_def__WEBPACK_IMPORTED_MODULE_0__["TSFInstanceAliasList"];
    _this.InvalidDimensions = _query_def__WEBPACK_IMPORTED_MODULE_0__["TSFInvalidDemensions"];
    _this.templateQueryIdMap = _query_def__WEBPACK_IMPORTED_MODULE_0__["templateQueryIdMap"];
    _this.InstanceReqConfig = {
      service: 'tsf',
      action: 'DescribeApplications',
      responseField: 'Content'
    };
    return _this;
  }

  return TSFDatasource;
}(_base_datasource__WEBPACK_IMPORTED_MODULE_1__["BaseDatasource"]);

/* harmony default export */ __webpack_exports__["default"] = (TSFDatasource);

/***/ }),

/***/ "./datasource/tc_monitor/tsf/query.ts":
/*!********************************************!*\
  !*** ./datasource/tc_monitor/tsf/query.ts ***!
  \********************************************/
/*! exports provided: TSFQueryCtrl, tsfQuery */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TSFQueryCtrl", function() { return TSFQueryCtrl; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "tsfQuery", function() { return tsfQuery; });
/* harmony import */ var grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! grafana/app/core/core_module */ "grafana/app/core/core_module");
/* harmony import */ var grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _query_def__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./query_def */ "./datasource/tc_monitor/tsf/query_def.ts");



var TSFQueryCtrl =
/** @class */
function () {
  TSFQueryCtrl.$inject = ["$scope", "$rootScope"];

  /** @ngInject */
  function TSFQueryCtrl($scope, $rootScope) {
    $scope.init = function () {
      $scope.TSFFieldsDescriptor = _query_def__WEBPACK_IMPORTED_MODULE_1__["TSFFieldsDescriptor"];
    };

    $scope.init();
  }

  return TSFQueryCtrl;
}();


var template = "\n<div class=\"tc-sub-params\" ng-if=\"showDetail\">\n  <label class=\"gf-form-label tc-info-label\">\n    Instances are queried by following params.\n    <a target=\"_blank\" style=\"text-decoration:underline;color:#006eff;font-size:medium\" href=\"https://cloud.tencent.com/document/product/649/36090\">Click here to get API doc.</a>\n  </label>\n  <div class=\"gf-form-inline\" ng-repeat=\"field in TSFFieldsDescriptor\">\n    <div class=\"gf-form\">\n      <label class=\"gf-form-label width-14\">\n        {{ field.key }}\n        <info-popover mode=\"right-normal\">\n          {{ field.cnDescriptor }}\n          <a target=\"_blank\" href=\"{{field.link}}\" ng-if=\"field.link\">Click here for more information.</a>\n        </info-popover>\n      </label>\n      <input\n        ng-if=\"field.type === 'inputnumber'\"\n        style=\"margin-right:2px\"\n        type=\"number\"\n        ng-model=\"target.queries[field.key]\"\n        ng-change=\"onChange()\"\n        class=\"gf-form-input width-10\"\n        ng-min=\"field.min\"\n        ng-max=\"field.max\"\n      />\n      <input\n        ng-if=\"field.type === 'input'\"\n        style=\"margin-right:2px\"\n        type=\"text\"\n        ng-model=\"target.queries[field.key]\"\n        ng-change=\"onChange()\"\n        class=\"gf-form-input width-10\"\n      />\n      <multi-condition\n        ng-if=\"field.type === 'inputmulti'\"\n        type=\"'input'\"\n        value=\"target.queries[field.key]\"\n        on-change=\"onChange()\"\n      ></multi-condition>\n      <custom-select-dropdown\n        ng-if=\"field.type === 'select'\"\n        value=\"target.queries[field.key]\"\n        options=\"field.list\"\n        multiple=\"field.multiple || false\"\n        on-change=\"onChange()\"\n      ></custom-select-dropdown>\n    </div>\n  </div>\n\n</div>\n";
function tsfQuery() {
  return {
    template: template,
    controller: TSFQueryCtrl,
    restrict: 'E',
    scope: {
      target: '=',
      showDetail: '=',
      region: '=',
      datasource: '=',
      onChange: '&'
    }
  };
}
grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0___default.a.directive('tsfQuery', tsfQuery);

/***/ }),

/***/ "./datasource/tc_monitor/tsf/query_def.ts":
/*!************************************************!*\
  !*** ./datasource/tc_monitor/tsf/query_def.ts ***!
  \************************************************/
/*! exports provided: default, TSFInvalidDemensions, templateQueryIdMap, TSFInstanceAliasList, TSFFieldsDescriptor, TSFGetInstanceQueryParams */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TSFInvalidDemensions", function() { return TSFInvalidDemensions; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "templateQueryIdMap", function() { return templateQueryIdMap; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TSFInstanceAliasList", function() { return TSFInstanceAliasList; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TSFFieldsDescriptor", function() { return TSFFieldsDescriptor; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TSFGetInstanceQueryParams", function() { return GetInstanceQueryParams; });
/* harmony import */ var _common_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../common/utils */ "./datasource/common/utils.ts");

var ApplicationType = [{
  text: '所有',
  value: ''
}, {
  text: '容器应用',
  value: 'C'
}, {
  text: '普通应用/虚拟机应用',
  value: 'V'
}];
var MicroserviceType = [{
  text: '所有',
  value: ''
}, {
  text: '普通应用',
  value: 'N'
}, {
  text: 'Mesh应用',
  value: 'M'
}, {
  text: '微服务网关应用',
  value: 'G'
}, {
  text: '原生应用',
  value: 'NATIVE'
}];
var ApplicationResourceType = [{
  text: '默认资源类型',
  value: 'DEF'
}, {
  text: '微服务网关资源',
  value: 'GW'
}];
var TSFFieldsDescriptor = [{
  key: 'Offset',
  enDescriptor: 'Offset',
  cnDescriptor: '偏移量, 例如Offset=20&Limit=20 返回第 20 到 40 项',
  link: '',
  type: 'inputnumber',
  min: 0
}, {
  key: 'Limit',
  enDescriptor: 'Limit',
  cnDescriptor: '单次请求返回的数量，默认为20，最小值为1，最大值为100',
  link: '',
  type: 'inputnumber',
  min: 1,
  max: 100
}, {
  key: 'SearchWord',
  enDescriptor: 'SearchWord',
  cnDescriptor: '搜索关键字',
  link: '',
  type: 'input'
}, {
  key: 'ApplicationIdList',
  enDescriptor: 'ApplicationIdList',
  cnDescriptor: '应用ID 组成的数组',
  link: '',
  type: 'inputmulti'
}, {
  key: 'ApplicationType',
  enDescriptor: 'ApplicationType',
  cnDescriptor: '应用类型',
  link: '',
  type: 'select',
  list: ApplicationType
}, {
  key: 'MicroserviceType',
  enDescriptor: 'MicroserviceType',
  cnDescriptor: '应用的微服务类型',
  link: '',
  type: 'select',
  list: MicroserviceType
}, {
  key: 'ApplicationResourceTypeList',
  enDescriptor: 'ApplicationResourceTypeList',
  cnDescriptor: '应用资源类型数组',
  link: '',
  type: 'select',
  multiple: true,
  list: ApplicationResourceType
}];
var TSF_STATE = {
  region: '',
  metricName: '',
  metricUnit: '',
  period: undefined,
  dimensionObject: null,
  instance: '',
  instanceAlias: 'ApplicationId',
  queries: {
    Limit: 20,
    Offset: 0,
    SearchWord: '',
    OrderBy: '',
    OrderType: null,
    ApplicationType: '',
    MicroserviceType: '',
    ApplicationResourceTypeList: [],
    ApplicationIdList: []
  }
};

function GetInstanceQueryParams(queries) {
  if (queries === void 0) {
    queries = {};
  }

  return Object(_common_utils__WEBPACK_IMPORTED_MODULE_0__["instanceQueryParamsBaseParse"])(queries, false);
}

var TSFInstanceAliasList = ['ApplicationId', 'ApplicationName'];
var TSFInvalidDemensions = {
  applicationid: 'ApplicationId'
};
var templateQueryIdMap = {
  instance: 'ApplicationId'
};
/* harmony default export */ __webpack_exports__["default"] = (TSF_STATE);


/***/ }),

/***/ "./datasource/tc_monitor/v_clb/datasource.ts":
/*!***************************************************!*\
  !*** ./datasource/tc_monitor/v_clb/datasource.ts ***!
  \***************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _query_def__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./query_def */ "./datasource/tc_monitor/v_clb/query_def.ts");
/* harmony import */ var _base_datasource__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../_base/datasource */ "./datasource/tc_monitor/_base/datasource.ts");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lodash */ "lodash");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _common_constants__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../common/constants */ "./datasource/common/constants.ts");
/* harmony import */ var _locale__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../locale */ "./locale/index.ts");
var __extends = undefined && undefined.__extends || function () {
  var _extendStatics = function extendStatics(d, b) {
    _extendStatics = Object.setPrototypeOf || {
      __proto__: []
    } instanceof Array && function (d, b) {
      d.__proto__ = b;
    } || function (d, b) {
      for (var p in b) {
        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];
      }
    };

    return _extendStatics(d, b);
  };

  return function (d, b) {
    if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");

    _extendStatics(d, b);

    function __() {
      this.constructor = d;
    }

    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();

var __awaiter = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {
  function adopt(value) {
    return value instanceof P ? value : new P(function (resolve) {
      resolve(value);
    });
  }

  return new (P || (P = Promise))(function (resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }

    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }

    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }

    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};

var __generator = undefined && undefined.__generator || function (thisArg, body) {
  var _ = {
    label: 0,
    sent: function sent() {
      if (t[0] & 1) throw t[1];
      return t[1];
    },
    trys: [],
    ops: []
  },
      f,
      y,
      t,
      g;
  return g = {
    next: verb(0),
    "throw": verb(1),
    "return": verb(2)
  }, typeof Symbol === "function" && (g[Symbol.iterator] = function () {
    return this;
  }), g;

  function verb(n) {
    return function (v) {
      return step([n, v]);
    };
  }

  function step(op) {
    if (f) throw new TypeError("Generator is already executing.");

    while (_) {
      try {
        if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
        if (y = 0, t) op = [op[0] & 2, t.value];

        switch (op[0]) {
          case 0:
          case 1:
            t = op;
            break;

          case 4:
            _.label++;
            return {
              value: op[1],
              done: false
            };

          case 5:
            _.label++;
            y = op[1];
            op = [0];
            continue;

          case 7:
            op = _.ops.pop();

            _.trys.pop();

            continue;

          default:
            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
              _ = 0;
              continue;
            }

            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
              _.label = op[1];
              break;
            }

            if (op[0] === 6 && _.label < t[1]) {
              _.label = t[1];
              t = op;
              break;
            }

            if (t && _.label < t[2]) {
              _.label = t[2];

              _.ops.push(op);

              break;
            }

            if (t[2]) _.ops.pop();

            _.trys.pop();

            continue;
        }

        op = body.call(thisArg, _);
      } catch (e) {
        op = [6, e];
        y = 0;
      } finally {
        f = t = 0;
      }
    }

    if (op[0] & 5) throw op[1];
    return {
      value: op[0] ? op[1] : void 0,
      done: true
    };
  }
};







var DCDatasource =
/** @class */
function (_super) {
  __extends(DCDatasource, _super);

  function DCDatasource(instanceSettings, backendSrv, templateSrv) {
    var _this = _super.call(this, instanceSettings, backendSrv, templateSrv) || this;

    _this.Namespace = _query_def__WEBPACK_IMPORTED_MODULE_0__["namespace"];
    _this.InstanceAliasList = _query_def__WEBPACK_IMPORTED_MODULE_0__["VCLBInstanceAliasList"];
    _this.InvalidDimensions = _query_def__WEBPACK_IMPORTED_MODULE_0__["VCLBInvalidDemensions"];
    _this.templateQueryIdMap = _query_def__WEBPACK_IMPORTED_MODULE_0__["templateQueryIdMap"]; // 此处service是接口的配置参数，需和plugin.json里一致，和constant.ts中SERVICES_API_INFO保持一致

    _this.InstanceReqConfig = {
      service: 'clb',
      action: 'DescribeLoadBalancers',
      responseField: 'LoadBalancerSet'
    };
    return _this;
  }

  DCDatasource.prototype.getRegions = function () {
    return Promise.resolve(_query_def__WEBPACK_IMPORTED_MODULE_0__["regionSupported"].map(function (_a) {
      var value = _a.value;
      return {
        value: value,
        text: Object(_locale__WEBPACK_IMPORTED_MODULE_4__["t"])(value)
      };
    }));
  };

  DCDatasource.prototype.getAllMetrics = function (region) {
    return __awaiter(this, void 0, void 0, function () {
      var serviceInfo, public_metrics, private_metrics, res;
      return __generator(this, function (_a) {
        switch (_a.label) {
          case 0:
            serviceInfo = Object(_common_constants__WEBPACK_IMPORTED_MODULE_3__["GetServiceAPIInfo"])(region, 'monitor');
            return [4
            /*yield*/
            , this.doRequest({
              url: this.url + serviceInfo.path,
              data: {
                Namespace: _query_def__WEBPACK_IMPORTED_MODULE_0__["clbNamespaceMap"]["public"]
              }
            }, serviceInfo.service, {
              region: region,
              action: 'DescribeBaseMetrics'
            })];

          case 1:
            public_metrics = _a.sent().MetricSet;
            return [4
            /*yield*/
            , this.doRequest({
              url: this.url + serviceInfo.path,
              data: {
                Namespace: _query_def__WEBPACK_IMPORTED_MODULE_0__["clbNamespaceMap"]["private"]
              }
            }, serviceInfo.service, {
              region: region,
              action: 'DescribeBaseMetrics'
            })];

          case 2:
            private_metrics = _a.sent().MetricSet;
            res = Object.values(lodash__WEBPACK_IMPORTED_MODULE_2___default.a.keyBy(lodash__WEBPACK_IMPORTED_MODULE_2___default.a.concat(private_metrics, public_metrics), 'MetricName'));
            return [2
            /*return*/
            , res.map(function (t) {
              return Object(_query_def__WEBPACK_IMPORTED_MODULE_0__["modifyDimensons"])(t);
            })];
        }
      });
    });
  };

  DCDatasource.prototype.getMetrics = function (region) {
    if (region === void 0) {
      region = 'ap-guangzhou';
    }

    return __awaiter(this, void 0, void 0, function () {
      var rawSet;
      return __generator(this, function (_a) {
        switch (_a.label) {
          case 0:
            return [4
            /*yield*/
            , this.getAllMetrics(region)];

          case 1:
            rawSet = _a.sent();
            return [2
            /*return*/
            , lodash__WEBPACK_IMPORTED_MODULE_2___default.a.compact(rawSet)];
        }
      });
    });
  };

  return DCDatasource;
}(_base_datasource__WEBPACK_IMPORTED_MODULE_1__["BaseDatasource"]);

/* harmony default export */ __webpack_exports__["default"] = (DCDatasource);

/***/ }),

/***/ "./datasource/tc_monitor/v_clb/query.ts":
/*!**********************************************!*\
  !*** ./datasource/tc_monitor/v_clb/query.ts ***!
  \**********************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _base_query__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../_base/query */ "./datasource/tc_monitor/_base/query.ts");
/* harmony import */ var _query_def__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./query_def */ "./datasource/tc_monitor/v_clb/query_def.ts");


Object(_base_query__WEBPACK_IMPORTED_MODULE_0__["default"])(_query_def__WEBPACK_IMPORTED_MODULE_1__["queryEditorName"], _query_def__WEBPACK_IMPORTED_MODULE_1__["queryEditorConfig"]);

/***/ }),

/***/ "./datasource/tc_monitor/v_clb/query_def.ts":
/*!**************************************************!*\
  !*** ./datasource/tc_monitor/v_clb/query_def.ts ***!
  \**************************************************/
/*! exports provided: default, VCLBFilterFieldsDescriptor, templateQueryIdMap, VCLBInstanceAliasList, VCLBInvalidDemensions, namespace, queryEditorName, queryEditorConfig, clbNamespaceMap, modifyDimensons, regionSupported, BMLBGetInstanceQueryParams */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VCLBFilterFieldsDescriptor", function() { return VCLBFilterFieldsDescriptor; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "templateQueryIdMap", function() { return templateQueryIdMap; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VCLBInstanceAliasList", function() { return VCLBInstanceAliasList; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VCLBInvalidDemensions", function() { return VCLBInvalidDemensions; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "namespace", function() { return namespace; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "queryEditorName", function() { return queryEditorName; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "queryEditorConfig", function() { return queryEditorConfig; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "clbNamespaceMap", function() { return clbNamespaceMap; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "modifyDimensons", function() { return modifyDimensons; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "regionSupported", function() { return regionSupported; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BMLBGetInstanceQueryParams", function() { return GetInstanceQueryParams; });
/* harmony import */ var _common_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../common/utils */ "./datasource/common/utils.ts");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lodash */ "lodash");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_1__);


var namespace = 'QCE/V_CLB'; // 组件名称。这里名字要和index.ts中的SERVICES对应，后面会根据SERVICES中service字段拼接这个query组件名称

var queryEditorName = 'vClbQuery';
var VCLBInvalidDemensions = {
  InstanceId: 'LoadBalancerId' // vip: 'LoadBalancerVips',
  // loadBalancerPort: 'Port',
  // protocol: 'Protocol',

}; // 要和文件名方式一致，ceip_summary=>CEIPSUMMARY

var VCLBInstanceAliasList = ['LoadBalancerId', 'LoadBalancerVips', 'LoadBalancerName'];
var templateQueryIdMap = {
  instance: 'LoadBalancerId'
};
var ForwardTypes = [{
  text: '通用的负载均衡',
  value: 1
}, {
  text: '传统的负载均衡',
  value: 0
}];
var OrderBy = [{
  text: 'LoadBalancerName',
  value: 'LoadBalancerName'
}, {
  text: 'CreateTime',
  value: 'CreateTime'
}, {
  text: 'Domain',
  value: 'Domain'
}, {
  text: 'LoadBalancerType',
  value: 'LoadBalancerType'
}];
var OrderType = [{
  text: '升序',
  value: 0
}, {
  text: '降序',
  value: 1
}];
var WithRs = [{
  text: '没有绑定后端服务',
  value: 0
}, {
  text: '绑定后端服务',
  value: 1
}, {
  text: '查询全部',
  value: -1
}];
var VCLBFilterFieldsDescriptor = [{
  key: 'Offset',
  enDescriptor: 'Offset',
  cnDescriptor: '偏移量, 例如Offset=20&Limit=20 返回第 20 到 40 项',
  link: '',
  type: 'inputNumber',
  min: 0
}, {
  key: 'Limit',
  enDescriptor: 'Limit',
  cnDescriptor: '单次请求返回的数量，默认为20，最小值为1',
  link: '',
  type: 'inputNumber',
  min: 1
}, {
  key: 'LoadBalancerIds',
  enDescriptor: 'LoadBalancer ID',
  cnDescriptor: '实例ID',
  link: '',
  type: 'inputMulti'
}, {
  key: 'LoadBalancerName',
  enDescriptor: 'LoadBalancer Name',
  cnDescriptor: '实例名称',
  link: '',
  type: 'input'
}, {
  key: 'Forward',
  enDescriptor: 'Forward',
  cnDescriptor: '负载均衡实例类型',
  link: '',
  type: 'select',
  list: ForwardTypes
}, {
  key: 'Domain',
  enDescriptor: 'Domain',
  cnDescriptor: '域名，腾讯云为负载均衡实例分配的域名，本参数仅对传统型公网负载均衡才有意义',
  link: '',
  type: 'input'
}, {
  key: 'LoadBalancerVips',
  enDescriptor: 'LoadBalancer Vips',
  cnDescriptor: '负载均衡实例的 VIP 地址',
  link: '',
  type: 'inputMulti'
}, {
  key: 'BackendPrivateIps',
  enDescriptor: 'BackendPrivate Ips',
  cnDescriptor: '负载均衡绑定的后端服务的内网 IP',
  link: '',
  type: 'inputMulti'
}, {
  key: 'BackendPublicIps',
  enDescriptor: 'BackendPublic Ips',
  cnDescriptor: '负载均衡绑定的后端服务的外网 IP',
  link: '',
  type: 'inputMulti'
}, {
  key: 'ProjectId',
  enDescriptor: 'Project ID',
  cnDescriptor: '负载均衡实例所属的项目 ID',
  link: '',
  type: 'inputNumber'
}, {
  key: 'VpcId',
  enDescriptor: 'Vpc ID',
  cnDescriptor: '负载均衡实例所属私有网络',
  link: '',
  type: 'input'
}, {
  key: 'SecurityGroup',
  enDescriptor: 'Security Group',
  cnDescriptor: '安全组ID',
  link: '',
  type: 'input'
}, {
  key: 'MasterZone',
  enDescriptor: 'Master Zone',
  cnDescriptor: '主可用区ID',
  link: '',
  type: 'input'
}, {
  key: 'WithRs',
  enDescriptor: 'WithRs',
  cnDescriptor: '负载均衡是否绑定后端服务',
  link: '',
  type: 'select',
  list: WithRs
}, {
  key: 'OrderBy',
  enDescriptor: 'OrderBy',
  cnDescriptor: '排序字段',
  link: '',
  type: 'select',
  list: OrderBy
}, {
  key: 'OrderType',
  enDescriptor: 'OrderByType',
  cnDescriptor: '排序方式',
  link: '',
  type: 'select',
  list: OrderType
}]; // 各产品实例列表detail配置

var queryEditorConfig = {
  instanceDocUrl: 'https://cloud.tencent.com/document/api/214/30685',
  namespace: namespace,
  fieldDescriptor: VCLBFilterFieldsDescriptor
};
var LBFields = {
  LoadBalancerIds: [],
  Forward: undefined,
  LoadBalancerName: '',
  Domain: '',
  LoadBalancerVips: [],
  BackendPublicIps: [],
  BackendPrivateIps: [],
  Limit: 20,
  Offset: 0,
  ProjectId: undefined,
  WithRs: {},
  VpcId: '',
  SecurityGroup: '',
  MasterZone: '',
  OrderBy: {},
  OrderType: {}
};
var VCLB_STATE = {
  region: '',
  metricName: '',
  metricUnit: '',
  period: undefined,
  dimensionObject: null,
  instance: '',
  instanceAlias: 'LoadBalancerId',
  Port: '',
  Protocol: '',
  listener: '',
  // listenerAlias: 'ListenerId',
  queries: LBFields
};

function GetInstanceQueryParams(queries) {
  if (queries === void 0) {
    queries = {};
  }

  return Object(_common_utils__WEBPACK_IMPORTED_MODULE_0__["instanceQueryParamsBaseParse"])(queries, false);
} // regions for dropdown


var regionSupported = [{
  value: 'ap-bangkok'
}, {
  value: 'ap-beijing'
}, {
  value: 'ap-chengdu'
}, {
  value: 'ap-chongqing'
}, {
  value: 'ap-guangzhou'
}, {
  value: 'ap-hongkong'
}, {
  value: 'ap-jakarta'
}, {
  value: 'ap-mumbai'
}, {
  value: 'ap-seoul'
}, {
  value: 'ap-nanjing'
}, {
  value: 'ap-shanghai'
}, {
  value: 'ap-shanghai-fsi'
}, {
  value: 'ap-shenzhen-fsi'
}, {
  value: 'ap-singapore'
}, {
  value: 'ap-tokyo'
}, {
  value: 'eu-frankfurt'
}, {
  value: 'eu-moscow'
}, {
  value: 'na-ashburn'
}, {
  value: 'na-siliconvalley'
}, {
  value: 'na-toronto'
}];
var clbNamespaceMap = {
  "public": 'QCE/LB_PUBLIC',
  "private": 'QCE/LB_PRIVATE'
};

function modifyDimensons(metricItem) {
  var metricTmp = lodash__WEBPACK_IMPORTED_MODULE_1___default.a.cloneDeep(metricItem);

  metricTmp.Dimensions.forEach(function (item) {
    item.Dimensions = ['InstanceId'];
  });
  return metricTmp;
}

/* harmony default export */ __webpack_exports__["default"] = (VCLB_STATE);


/***/ }),

/***/ "./datasource/tc_monitor/vbc/datasource.ts":
/*!*************************************************!*\
  !*** ./datasource/tc_monitor/vbc/datasource.ts ***!
  \*************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _query_def__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./query_def */ "./datasource/tc_monitor/vbc/query_def.ts");
/* harmony import */ var _base_datasource__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../_base/datasource */ "./datasource/tc_monitor/_base/datasource.ts");
var __extends = undefined && undefined.__extends || function () {
  var _extendStatics = function extendStatics(d, b) {
    _extendStatics = Object.setPrototypeOf || {
      __proto__: []
    } instanceof Array && function (d, b) {
      d.__proto__ = b;
    } || function (d, b) {
      for (var p in b) {
        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];
      }
    };

    return _extendStatics(d, b);
  };

  return function (d, b) {
    if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");

    _extendStatics(d, b);

    function __() {
      this.constructor = d;
    }

    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();




var DCDatasource =
/** @class */
function (_super) {
  __extends(DCDatasource, _super);

  function DCDatasource(instanceSettings, backendSrv, templateSrv) {
    var _this = _super.call(this, instanceSettings, backendSrv, templateSrv) || this;

    _this.Namespace = _query_def__WEBPACK_IMPORTED_MODULE_0__["namespace"];
    _this.InstanceAliasList = _query_def__WEBPACK_IMPORTED_MODULE_0__["VBCInstanceAliasList"];
    _this.InvalidDimensions = _query_def__WEBPACK_IMPORTED_MODULE_0__["VBCInvalidDemensions"];
    _this.templateQueryIdMap = _query_def__WEBPACK_IMPORTED_MODULE_0__["templateQueryIdMap"]; // 此处service是接口的配置参数，需和plugin.json里一致，和constant.ts中SERVICES_API_INFO保持一致

    _this.InstanceReqConfig = {
      service: 'vpc',
      action: 'DescribeCcns',
      responseField: 'CcnSet'
    };
    return _this;
  }

  DCDatasource.prototype.getFilterDropdown = function (_a) {
    var field = _a.field;
    return _super.prototype.getRegions.call(this);
  };

  return DCDatasource;
}(_base_datasource__WEBPACK_IMPORTED_MODULE_1__["BaseDatasource"]);

/* harmony default export */ __webpack_exports__["default"] = (DCDatasource);

/***/ }),

/***/ "./datasource/tc_monitor/vbc/query.ts":
/*!********************************************!*\
  !*** ./datasource/tc_monitor/vbc/query.ts ***!
  \********************************************/
/*! exports provided: VBCQueryCtrl, scfQuery */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VBCQueryCtrl", function() { return VBCQueryCtrl; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "scfQuery", function() { return scfQuery; });
/* harmony import */ var grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! grafana/app/core/core_module */ "grafana/app/core/core_module");
/* harmony import */ var grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _query_def__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./query_def */ "./datasource/tc_monitor/vbc/query_def.ts");
/* harmony import */ var _common_constants__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../common/constants */ "./datasource/common/constants.ts");



var ExtraFields = [// {
  //   label: 'SRegion',
  //   field: 'SRegion',
  // },
  // {
  //   label: 'DRegion',
  //   field: 'DRegion',
  // },
];

var VBCQueryCtrl =
/** @class */
function () {
  VBCQueryCtrl.$inject = ["$scope", "$rootScope"];

  /** @ngInject */
  function VBCQueryCtrl($scope, $rootScope) {
    $scope.init = function () {
      $scope.VBCFilterFieldsDescriptor = _query_def__WEBPACK_IMPORTED_MODULE_1__["VBCFilterFieldsDescriptor"];
      $scope.namespace = _query_def__WEBPACK_IMPORTED_MODULE_1__["namespace"];
    };

    $scope.getExtraFields = function () {
      return ExtraFields.filter(function (item) {
        var _a;

        return item.field in ((_a = $scope.dims) !== null && _a !== void 0 ? _a : {});
      });
    };

    $scope.getExtraDropdown = function (field) {
      var service = Object(_common_constants__WEBPACK_IMPORTED_MODULE_2__["GetServiceFromNamespace"])($scope.namespace); // return $scope.datasource.getServiceFn(service, 'getFilterDropdown')({ field })

      return $scope.datasource.getFilterDropdown(service, {
        field: field
      });
    };

    $scope.init();
  }

  return VBCQueryCtrl;
}();


var template = "\n<div>\n<div class=\"tc-sub-params\" ng-if=\"showDetail\">\n  <label class=\"gf-form-label tc-info-label\">\n    Functions are queried by following params.\n    <a target=\"_blank\" style=\"text-decoration:underline;color:#006eff;font-size:medium\" href=\"https://cloud.tencent.com/document/product/248/45073\">Click here to get API doc.</a>\n  </label>\n  <div class=\"gf-form-inline\" ng-repeat=\"field in VBCFilterFieldsDescriptor\">\n    <div class=\"gf-form\">\n      <label class=\"gf-form-label width-14\">\n        {{ field.key }}\n        <info-popover mode=\"right-normal\">\n          {{ field.cnDescriptor }}\n          <a target=\"_blank\" href=\"{{field.link}}\" ng-if=\"field.link\">Click here for more information.</a>\n        </info-popover>\n      </label>\n      <input\n        ng-if=\"field.type === 'inputNumber'\"\n        style=\"margin-right:2px\"\n        type=\"number\"\n        ng-model=\"target.queries[field.key]\"\n        ng-change=\"onChange()\"\n        class=\"gf-form-input width-10\"\n        ng-min=\"field.min\"\n        ng-max=\"field.max\"\n      />\n      <input\n        ng-if=\"field.type === 'input'\"\n        style=\"margin-right:2px\"\n        type=\"text\"\n        ng-model=\"target.queries[field.key]\"\n        ng-change=\"onChange()\"\n        class=\"gf-form-input width-10\"\n      />    \n      <multi-condition\n        ng-if=\"field.type === 'inputNumberMulti'\"\n        type=\"'inputNumber'\"\n        max-cond=\"5\"\n        value=\"target.queries.Filters[field.key]\"\n        maxNum=\"field.max\"\n        minNum=\"field.min\"\n        on-change=\"onChange()\"\n      ></multi-condition>\n      <multi-condition\n        ng-if=\"field.type === 'inputMulti'\"\n        type=\"'input'\"\n        value=\"target.queries[field.key]\"\n        on-change=\"onChange()\"\n      ></multi-condition>\n      <custom-select-dropdown\n        ng-if=\"field.type === 'select'\"\n        value=\"target.queries[field.key]\"\n        options=\"field.list\"\n        multiple=\"field.multiple || false\"\n        on-change=\"onChange()\"\n      ></custom-select-dropdown>\n    </div>\n  </div>\n</div>\n\n<!-- \u8D77\u59CB\u533A\u57DF \u76EE\u7684\u533A\u57DF\u7B49 -->\n  <div>\n    <div class=\"gf-form-inline\" ng-repeat=\"extra in getExtraFields()\">\n      <div class=\"gf-form\">\n        <label class=\"gf-form-label query-keyword width-9\">{{extra.label}}</label>\n        <div class=\"gf-form-select-wrapper gf-form-select-wrapper--caret-indent\">\n          <gf-form-dropdown model=\"target[extra.field]\" allow-custom=\"false\" get-options=\"getExtraDropdown(extra.field)\"\n            on-change=\"onRefresh()\" css-class=\"min-width-10\">\n          </gf-form-dropdown>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n";
function scfQuery() {
  return {
    template: template,
    controller: VBCQueryCtrl,
    restrict: 'E',
    scope: {
      target: '=',
      showDetail: '=',
      region: '=',
      datasource: '=',
      getDropdownOptions: '&',
      onChange: '&',
      onRefresh: '&',
      dims: '='
    }
  };
}
grafana_app_core_core_module__WEBPACK_IMPORTED_MODULE_0___default.a.directive('vbcQuery', scfQuery);

/***/ }),

/***/ "./datasource/tc_monitor/vbc/query_def.ts":
/*!************************************************!*\
  !*** ./datasource/tc_monitor/vbc/query_def.ts ***!
  \************************************************/
/*! exports provided: default, VBCFilterFieldsDescriptor, templateQueryIdMap, VBCInstanceAliasList, VBCInvalidDemensions, namespace, queryEditorName, queryEditorConfig, VBCGetInstanceQueryParams */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VBCFilterFieldsDescriptor", function() { return VBCFilterFieldsDescriptor; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "templateQueryIdMap", function() { return templateQueryIdMap; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VBCInstanceAliasList", function() { return VBCInstanceAliasList; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VBCInvalidDemensions", function() { return VBCInvalidDemensions; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "namespace", function() { return namespace; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "queryEditorName", function() { return queryEditorName; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "queryEditorConfig", function() { return queryEditorConfig; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VBCGetInstanceQueryParams", function() { return GetInstanceQueryParams; });
/* harmony import */ var _common_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../common/utils */ "./datasource/common/utils.ts");

var namespace = 'QCE/VBC'; // 组件名称。这里名字要和index.ts中的SERVICES对应，后面会根据SERVICES中service字段拼接这个query组件名称

var queryEditorName = 'vbcQuery';
var VBCInvalidDemensions = {// CcnId: 'CcnId',
}; // 需和文件名对应

var VBCInstanceAliasList = ['CcnId', 'CcnName'];
var templateQueryIdMap = {
  instance: 'CcnId'
}; // select类型需要注意是{},multi后缀是[],dropdown是''

var VBCFilterFields = {
  Limit: 20,
  Offset: 0,
  'ccn-id': [],
  'ccn-name': [],
  'ccn-description': [],
  state: {}
};
var VBCFilterFieldsDescriptor = [{
  key: 'Offset',
  enDescriptor: 'Offset',
  cnDescriptor: '偏移量, 例如Offset=20&Limit=20 返回第 20 到 40 项',
  link: '',
  type: 'inputNumber',
  min: 0
}, {
  key: 'Limit',
  enDescriptor: 'Limit',
  cnDescriptor: '单次请求返回的数量，默认为20，最小值为1，最大值为100',
  link: '',
  type: 'inputNumber',
  min: 1,
  max: 100
}, {
  key: 'ccn-id',
  enDescriptor: 'ccn-id',
  cnDescriptor: 'CCN实例ID',
  link: '',
  type: 'inputMulti'
}, {
  key: 'ccn-name',
  enDescriptor: 'ccn-name',
  cnDescriptor: 'CCN名称',
  link: '',
  type: 'inputMulti'
}, {
  key: 'ccn-description',
  enDescriptor: 'ccn-description',
  cnDescriptor: 'CCN描述',
  link: '',
  type: 'inputMulti'
}, {
  key: 'state',
  enDescriptor: 'state',
  cnDescriptor: '实例状态',
  link: '',
  type: 'select',
  multiple: true,
  list: [{
    text: '隔离中',
    value: 'ISOLATED'
  }, {
    text: '运行中',
    value: 'AVAILABLE'
  }]
}]; // 各产品实例列表detail配置

var queryEditorConfig = {
  instanceDocUrl: 'https://cloud.tencent.com/document/api/215/19199',
  namespace: namespace,
  fieldDescriptor: VBCFilterFieldsDescriptor
};
var VBC_STATE = {
  region: '',
  metricName: '',
  metricUnit: '',
  period: undefined,
  dimensionObject: null,
  instance: '',
  instanceAlias: 'CcnId',
  DRegion: '',
  SRegion: '',
  queries: VBCFilterFields
};

function GetInstanceQueryParams(queries) {
  if (queries === void 0) {
    queries = {};
  }

  return Object(_common_utils__WEBPACK_IMPORTED_MODULE_0__["instanceQueryParamsBaseParse"])(queries, false);
} // const regionSupported = [
//   { text: '华北地区(北京)', value: 'ap-beijing' },
//   { text: '西南地区(成都)', value: 'ap-chengdu' },
//   { text: '西南地区(重庆)', value: 'ap-chongqing' },
//   { text: '华南地区(广州)', value: 'ap-guangzhou' },
//   { text: '港澳台地区(中国香港)', value: 'ap-hongkong' },
//   { text: '亚太南部(孟买)', value: 'ap-mumbai' },
//   { text: '华东地区(南京)', value: 'ap-nanjing' },
//   { text: '华东地区(上海)', value: 'ap-shanghai' },
//   { text: '华东地区(上海金融)', value: 'ap-shanghai-fsi' },
//   { text: '华南地区(深圳金融)', value: 'ap-shenzhen-fsi' },
//   { text: '亚太东南(新加坡)', value: 'ap-singapore' },
//   { text: '亚太东北(东京)', value: 'ap-tokyo' },
//   { text: '欧洲地区(法兰克福)', value: 'eu-frankfurt' },
//   { text: '美国东部(弗吉尼亚)', value: 'na-ashburn' },
//   { text: '美国西部(硅谷)', value: 'na-siliconvalley' },
//   { text: '北美地区(多伦多)', value: 'na-toronto' },
// ];


/* harmony default export */ __webpack_exports__["default"] = (VBC_STATE);


/***/ }),

/***/ "./datasource/tc_monitor/vpc_net_detect/datasource.ts":
/*!************************************************************!*\
  !*** ./datasource/tc_monitor/vpc_net_detect/datasource.ts ***!
  \************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _query_def__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./query_def */ "./datasource/tc_monitor/vpc_net_detect/query_def.ts");
/* harmony import */ var _base_datasource__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../_base/datasource */ "./datasource/tc_monitor/_base/datasource.ts");
var __extends = undefined && undefined.__extends || function () {
  var _extendStatics = function extendStatics(d, b) {
    _extendStatics = Object.setPrototypeOf || {
      __proto__: []
    } instanceof Array && function (d, b) {
      d.__proto__ = b;
    } || function (d, b) {
      for (var p in b) {
        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];
      }
    };

    return _extendStatics(d, b);
  };

  return function (d, b) {
    if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");

    _extendStatics(d, b);

    function __() {
      this.constructor = d;
    }

    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();




var DCDatasource =
/** @class */
function (_super) {
  __extends(DCDatasource, _super);

  function DCDatasource(instanceSettings, backendSrv, templateSrv) {
    var _this = _super.call(this, instanceSettings, backendSrv, templateSrv) || this;

    _this.Namespace = _query_def__WEBPACK_IMPORTED_MODULE_0__["namespace"];
    _this.InstanceAliasList = _query_def__WEBPACK_IMPORTED_MODULE_0__["VPCNETDETECTInstanceAliasList"];
    _this.InvalidDimensions = _query_def__WEBPACK_IMPORTED_MODULE_0__["VPCNETInvalidDemensions"];
    _this.templateQueryIdMap = _query_def__WEBPACK_IMPORTED_MODULE_0__["templateQueryIdMap"]; // 此处service是接口的配置参数，需和plugin.json里一致，和constant.ts中SERVICES_API_INFO保持一致

    _this.InstanceReqConfig = {
      service: 'vpc',
      action: 'DescribeNetDetects',
      responseField: 'NetDetectSet',
      interceptor: {// response: (data: unknown[]) =>[
        //   {
        //     "NetDetectId": "netd-12345678",
        //   },
        // ],
      }
    };
    _this.MetricReqConfig = {
      resultFilter: _query_def__WEBPACK_IMPORTED_MODULE_0__["modifyDimensons"]
    };
    return _this;
  }

  return DCDatasource;
}(_base_datasource__WEBPACK_IMPORTED_MODULE_1__["BaseDatasource"]);

/* harmony default export */ __webpack_exports__["default"] = (DCDatasource);

/***/ }),

/***/ "./datasource/tc_monitor/vpc_net_detect/query.ts":
/*!*******************************************************!*\
  !*** ./datasource/tc_monitor/vpc_net_detect/query.ts ***!
  \*******************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _base_query__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../_base/query */ "./datasource/tc_monitor/_base/query.ts");
/* harmony import */ var _query_def__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./query_def */ "./datasource/tc_monitor/vpc_net_detect/query_def.ts");


Object(_base_query__WEBPACK_IMPORTED_MODULE_0__["default"])(_query_def__WEBPACK_IMPORTED_MODULE_1__["queryEditorName"], _query_def__WEBPACK_IMPORTED_MODULE_1__["queryEditorConfig"]);

/***/ }),

/***/ "./datasource/tc_monitor/vpc_net_detect/query_def.ts":
/*!***********************************************************!*\
  !*** ./datasource/tc_monitor/vpc_net_detect/query_def.ts ***!
  \***********************************************************/
/*! exports provided: default, VPCNETFilterFieldsDescriptor, templateQueryIdMap, VPCNETDETECTInstanceAliasList, VPCNETInvalidDemensions, namespace, queryEditorName, queryEditorConfig, modifyDimensons, VPCNETDETECTGetInstanceQueryParams */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VPCNETFilterFieldsDescriptor", function() { return VPCNETFilterFieldsDescriptor; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "templateQueryIdMap", function() { return templateQueryIdMap; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VPCNETDETECTInstanceAliasList", function() { return VPCNETDETECTInstanceAliasList; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VPCNETInvalidDemensions", function() { return VPCNETInvalidDemensions; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "namespace", function() { return namespace; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "queryEditorName", function() { return queryEditorName; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "queryEditorConfig", function() { return queryEditorConfig; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "modifyDimensons", function() { return modifyDimensons; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VPCNETDETECTGetInstanceQueryParams", function() { return GetInstanceQueryParams; });
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lodash */ "lodash");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _common_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../common/utils */ "./datasource/common/utils.ts");


var namespace = 'QCE/VPC_NET_DETECT'; // 组件名称。这里名字要和index.ts中的SERVICES对应，后面会根据SERVICES中service字段拼接这个query组件名称

var queryEditorName = 'vpcNetDetectQuery';
var VPCNETInvalidDemensions = {
  netdetectid: 'NetDetectId',
  netDetectId: 'NetDetectId'
};
var VPCNETDETECTInstanceAliasList = ['NetDetectId', 'NetDetectName'];
var templateQueryIdMap = {
  instance: 'NetDetectId'
}; // select类型需要注意是{},multi后缀是[]

var VPCNETFilterFields = {
  Limit: 20,
  Offset: 0,
  'vpc-id': [],
  'net-detect-id': [],
  'subnet-id': [],
  'net-detect-name': []
};
var VPCNETFilterFieldsDescriptor = [{
  key: 'Offset',
  enDescriptor: 'Offset',
  cnDescriptor: '偏移量, 例如Offset=20&Limit=20 返回第 20 到 40 项',
  link: '',
  type: 'inputNumber',
  min: 0
}, {
  key: 'Limit',
  enDescriptor: 'Limit',
  cnDescriptor: '单次请求返回的数量，默认为20，最小值为1，最大值为100',
  link: '',
  type: 'inputNumber',
  min: 1,
  max: 100
}, {
  key: 'vpc-id',
  enDescriptor: 'vpc-id',
  cnDescriptor: 'VPC实例ID',
  link: '',
  type: 'inputMulti'
}, {
  key: 'net-detect-id',
  enDescriptor: 'net-detect-id',
  cnDescriptor: '网络探测实例ID',
  link: '',
  type: 'inputMulti'
}, {
  key: 'subnet-id',
  enDescriptor: 'subnet-id',
  cnDescriptor: '子网实例ID',
  link: '',
  type: 'inputMulti'
}, {
  key: 'net-detect-name',
  enDescriptor: 'net-detect-name',
  cnDescriptor: '网络探测名称',
  link: '',
  type: 'inputMulti'
}]; // 各产品实例列表detail配置

var queryEditorConfig = {
  instanceDocUrl: 'https://cloud.tencent.com/document/api/215/38696',
  namespace: namespace,
  fieldDescriptor: VPCNETFilterFieldsDescriptor
};
var VPCNET_STATE = {
  region: '',
  metricName: '',
  metricUnit: '',
  period: undefined,
  dimensionObject: null,
  instance: '',
  instanceAlias: 'NetDetectId',
  queries: VPCNETFilterFields
};

function GetInstanceQueryParams(queries) {
  if (queries === void 0) {
    queries = {};
  }

  return Object(_common_utils__WEBPACK_IMPORTED_MODULE_1__["instanceQueryParamsBaseParse"])(queries, true);
}

function modifyDimensons(metricItem) {
  var metricTmp = lodash__WEBPACK_IMPORTED_MODULE_0___default.a.cloneDeep(metricItem);

  metricTmp.Dimensions.forEach(function (item) {
    item.Dimensions = ['netDetectId'];
  });
  return metricTmp;
}

/* harmony default export */ __webpack_exports__["default"] = (VPCNET_STATE);


/***/ }),

/***/ "./datasource/tc_monitor/vpngw/datasource.ts":
/*!***************************************************!*\
  !*** ./datasource/tc_monitor/vpngw/datasource.ts ***!
  \***************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _query_def__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./query_def */ "./datasource/tc_monitor/vpngw/query_def.ts");
/* harmony import */ var _base_datasource__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../_base/datasource */ "./datasource/tc_monitor/_base/datasource.ts");
/* harmony import */ var _common_constants__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../common/constants */ "./datasource/common/constants.ts");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! lodash */ "lodash");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_3__);
var __extends = undefined && undefined.__extends || function () {
  var _extendStatics = function extendStatics(d, b) {
    _extendStatics = Object.setPrototypeOf || {
      __proto__: []
    } instanceof Array && function (d, b) {
      d.__proto__ = b;
    } || function (d, b) {
      for (var p in b) {
        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];
      }
    };

    return _extendStatics(d, b);
  };

  return function (d, b) {
    if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");

    _extendStatics(d, b);

    function __() {
      this.constructor = d;
    }

    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();






var DCDatasource =
/** @class */
function (_super) {
  __extends(DCDatasource, _super);

  function DCDatasource(instanceSettings, backendSrv, templateSrv) {
    var _this = _super.call(this, instanceSettings, backendSrv, templateSrv) || this;

    _this.Namespace = _query_def__WEBPACK_IMPORTED_MODULE_0__["namespace"];
    _this.InstanceAliasList = _query_def__WEBPACK_IMPORTED_MODULE_0__["VPNGWInstanceAliasList"];
    _this.InvalidDimensions = _query_def__WEBPACK_IMPORTED_MODULE_0__["VPNGWInvalidDemensions"];
    _this.templateQueryIdMap = _query_def__WEBPACK_IMPORTED_MODULE_0__["templateQueryIdMap"]; // 此处service是接口的配置参数，需和plugin.json里一致，和constant.ts中SERVICES_API_INFO保持一致

    _this.InstanceReqConfig = {
      service: 'vpc',
      action: 'DescribeVpnGateways',
      responseField: 'VpnGatewaySet'
    };
    return _this;
  }

  DCDatasource.prototype.getFilterDropdown = function (_a) {
    var field = _a.field,
        region = _a.region;

    if (field === 'zone') {
      var serviceInfo = Object(_common_constants__WEBPACK_IMPORTED_MODULE_2__["GetServiceAPIInfo"])(region, 'cvm');
      return this.doRequest({
        url: this.url + serviceInfo.path
      }, serviceInfo.service, {
        region: region,
        action: 'DescribeZones'
      }).then(function (response) {
        return lodash__WEBPACK_IMPORTED_MODULE_3___default.a.filter(lodash__WEBPACK_IMPORTED_MODULE_3___default.a.map(response.ZoneSet || [], function (item) {
          return {
            text: item.ZoneName,
            value: item.Zone,
            ZoneState: item.ZoneState,
            Zone: item.Zone
          };
        }), function (item) {
          return item.ZoneState === 'AVAILABLE';
        });
      });
    }

    return [];
  };

  return DCDatasource;
}(_base_datasource__WEBPACK_IMPORTED_MODULE_1__["BaseDatasource"]);

/* harmony default export */ __webpack_exports__["default"] = (DCDatasource);

/***/ }),

/***/ "./datasource/tc_monitor/vpngw/query.ts":
/*!**********************************************!*\
  !*** ./datasource/tc_monitor/vpngw/query.ts ***!
  \**********************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _base_query__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../_base/query */ "./datasource/tc_monitor/_base/query.ts");
/* harmony import */ var _query_def__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./query_def */ "./datasource/tc_monitor/vpngw/query_def.ts");


Object(_base_query__WEBPACK_IMPORTED_MODULE_0__["default"])(_query_def__WEBPACK_IMPORTED_MODULE_1__["queryEditorName"], _query_def__WEBPACK_IMPORTED_MODULE_1__["queryEditorConfig"]);

/***/ }),

/***/ "./datasource/tc_monitor/vpngw/query_def.ts":
/*!**************************************************!*\
  !*** ./datasource/tc_monitor/vpngw/query_def.ts ***!
  \**************************************************/
/*! exports provided: default, VPNGWFilterFieldsDescriptor, templateQueryIdMap, VPNGWInstanceAliasList, VPNGWInvalidDemensions, namespace, queryEditorName, queryEditorConfig, VPNGWGetInstanceQueryParams */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VPNGWFilterFieldsDescriptor", function() { return VPNGWFilterFieldsDescriptor; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "templateQueryIdMap", function() { return templateQueryIdMap; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VPNGWInstanceAliasList", function() { return VPNGWInstanceAliasList; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VPNGWInvalidDemensions", function() { return VPNGWInvalidDemensions; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "namespace", function() { return namespace; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "queryEditorName", function() { return queryEditorName; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "queryEditorConfig", function() { return queryEditorConfig; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VPNGWGetInstanceQueryParams", function() { return GetInstanceQueryParams; });
/* harmony import */ var _common_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../common/utils */ "./datasource/common/utils.ts");

var namespace = 'QCE/VPNGW';
var queryEditorName = 'vpngwQuery';
var VPNGWInvalidDemensions = {
  vpnGwId: 'VpnGatewayId'
};
var VPNGWInstanceAliasList = ['VpnGatewayId', 'VpnGatewayName'];
var templateQueryIdMap = {
  instance: 'VpnGatewayId'
}; // select类型需要注意是{},multi后缀是[]

var VPNGWFilterFields = {
  Limit: 20,
  Offset: 0,
  'vpc-id': [],
  'vpn-gateway-id': [],
  'vpn-gateway-name': [],
  type: {},
  'public-ip-address': [],
  'renew-flag': {},
  zone: []
};
var VPNGWFilterFieldsDescriptor = [{
  key: 'Offset',
  enDescriptor: 'Offset',
  cnDescriptor: '偏移量, 例如Offset=20&Limit=20 返回第 20 到 40 项',
  link: '',
  type: 'inputNumber',
  min: 0
}, {
  key: 'Limit',
  enDescriptor: 'Limit',
  cnDescriptor: '单次请求返回的数量，默认为20，最小值为1，最大值为100',
  link: '',
  type: 'inputNumber',
  min: 1,
  max: 100
}, {
  key: 'vpc-id',
  enDescriptor: 'vpc-id',
  cnDescriptor: 'VPC实例ID',
  link: '',
  type: 'inputMulti'
}, {
  key: 'vpn-gateway-id',
  enDescriptor: 'vpn-gateway-id',
  cnDescriptor: 'VPN实例ID',
  link: '',
  type: 'inputMulti'
}, {
  key: 'vpn-gateway-name',
  enDescriptor: 'vpn-gateway-name',
  cnDescriptor: 'VPN实例名称',
  link: '',
  type: 'inputMulti'
}, {
  key: 'type',
  enDescriptor: 'type',
  cnDescriptor: 'VPN网关类型',
  link: '',
  type: 'select',
  multiple: true,
  list: [{
    text: 'IPSEC',
    value: 'IPSEC'
  }, {
    text: 'SSL',
    value: 'SSL'
  }]
}, {
  key: 'public-ip-address',
  enDescriptor: 'public-ip-address',
  cnDescriptor: '公网IP',
  link: '',
  type: 'inputMulti'
}, {
  key: 'renew-flag',
  enDescriptor: 'renew-flag',
  cnDescriptor: '网关续费类型',
  link: '',
  type: 'select',
  multiple: true,
  list: [{
    text: '手动续费',
    value: 'NOTIFY_AND_MANUAL_RENEW'
  }, {
    text: '自动续费',
    value: 'NOTIFY_AND_AUTO_RENEW'
  }]
}, {
  key: 'zone',
  enDescriptor: 'zone',
  cnDescriptor: 'VPN所在可用区',
  link: '',
  type: 'dropdownMulti'
}];
var queryEditorConfig = {
  instanceDocUrl: 'https://cloud.tencent.com/document/api/215/17514',
  namespace: namespace,
  fieldDescriptor: VPNGWFilterFieldsDescriptor
};
var VPNGW_STATE = {
  region: '',
  metricName: '',
  metricUnit: '',
  period: undefined,
  dimensionObject: null,
  instance: '',
  instanceAlias: 'VpnGatewayId',
  queries: VPNGWFilterFields
};

function GetInstanceQueryParams(queries) {
  if (queries === void 0) {
    queries = {};
  }

  return Object(_common_utils__WEBPACK_IMPORTED_MODULE_0__["instanceQueryParamsBaseParse"])(queries, true);
}

/* harmony default export */ __webpack_exports__["default"] = (VPNGW_STATE);


/***/ }),

/***/ "./datasource/tc_monitor/vpnx/datasource.ts":
/*!**************************************************!*\
  !*** ./datasource/tc_monitor/vpnx/datasource.ts ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _query_def__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./query_def */ "./datasource/tc_monitor/vpnx/query_def.ts");
/* harmony import */ var _base_datasource__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../_base/datasource */ "./datasource/tc_monitor/_base/datasource.ts");
var __extends = undefined && undefined.__extends || function () {
  var _extendStatics = function extendStatics(d, b) {
    _extendStatics = Object.setPrototypeOf || {
      __proto__: []
    } instanceof Array && function (d, b) {
      d.__proto__ = b;
    } || function (d, b) {
      for (var p in b) {
        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];
      }
    };

    return _extendStatics(d, b);
  };

  return function (d, b) {
    if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");

    _extendStatics(d, b);

    function __() {
      this.constructor = d;
    }

    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();




var DCDatasource =
/** @class */
function (_super) {
  __extends(DCDatasource, _super);

  function DCDatasource(instanceSettings, backendSrv, templateSrv) {
    var _this = _super.call(this, instanceSettings, backendSrv, templateSrv) || this;

    _this.Namespace = _query_def__WEBPACK_IMPORTED_MODULE_0__["namespace"];
    _this.InstanceAliasList = _query_def__WEBPACK_IMPORTED_MODULE_0__["VPNXInstanceAliasList"];
    _this.InvalidDimensions = _query_def__WEBPACK_IMPORTED_MODULE_0__["VPNXInvalidDemensions"];
    _this.templateQueryIdMap = _query_def__WEBPACK_IMPORTED_MODULE_0__["templateQueryIdMap"]; // 此处service是接口的配置参数，需和plugin.json里一致，和constant.ts中SERVICES_API_INFO保持一致

    _this.InstanceReqConfig = {
      service: 'vpc',
      action: 'DescribeVpnConnections',
      responseField: 'VpnConnectionSet'
    };
    return _this;
  }

  return DCDatasource;
}(_base_datasource__WEBPACK_IMPORTED_MODULE_1__["BaseDatasource"]);

/* harmony default export */ __webpack_exports__["default"] = (DCDatasource);

/***/ }),

/***/ "./datasource/tc_monitor/vpnx/query.ts":
/*!*********************************************!*\
  !*** ./datasource/tc_monitor/vpnx/query.ts ***!
  \*********************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _base_query__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../_base/query */ "./datasource/tc_monitor/_base/query.ts");
/* harmony import */ var _query_def__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./query_def */ "./datasource/tc_monitor/vpnx/query_def.ts");


Object(_base_query__WEBPACK_IMPORTED_MODULE_0__["default"])(_query_def__WEBPACK_IMPORTED_MODULE_1__["queryEditorName"], _query_def__WEBPACK_IMPORTED_MODULE_1__["queryEditorConfig"]);

/***/ }),

/***/ "./datasource/tc_monitor/vpnx/query_def.ts":
/*!*************************************************!*\
  !*** ./datasource/tc_monitor/vpnx/query_def.ts ***!
  \*************************************************/
/*! exports provided: default, VPNXFilterFieldsDescriptor, templateQueryIdMap, VPNXInstanceAliasList, VPNXInvalidDemensions, namespace, queryEditorName, queryEditorConfig, VPNXGetInstanceQueryParams */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VPNXFilterFieldsDescriptor", function() { return VPNXFilterFieldsDescriptor; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "templateQueryIdMap", function() { return templateQueryIdMap; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VPNXInstanceAliasList", function() { return VPNXInstanceAliasList; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VPNXInvalidDemensions", function() { return VPNXInvalidDemensions; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "namespace", function() { return namespace; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "queryEditorName", function() { return queryEditorName; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "queryEditorConfig", function() { return queryEditorConfig; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VPNXGetInstanceQueryParams", function() { return GetInstanceQueryParams; });
/* harmony import */ var _common_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../common/utils */ "./datasource/common/utils.ts");

var namespace = 'QCE/VPNX';
var queryEditorName = 'vpnxQuery';
var VPNXInvalidDemensions = {
  vpnConnId: 'VpnConnectionId'
};
var VPNXInstanceAliasList = ['VpnConnectionId', 'VpnConnectionName'];
var templateQueryIdMap = {
  instance: 'VpnConnectionId'
}; // select类型需要注意是{},multi后缀是[]

var VPNXFilterFields = {
  Limit: 20,
  Offset: 0,
  'vpc-id': [],
  'vpn-gateway-id': [],
  'customer-gateway-id': [],
  'vpn-connection-name': [],
  'vpn-connection-id': []
};
var VPNXFilterFieldsDescriptor = [{
  key: 'Offset',
  enDescriptor: 'Offset',
  cnDescriptor: '偏移量, 例如Offset=20&Limit=20 返回第 20 到 40 项',
  link: '',
  type: 'inputNumber',
  min: 0
}, {
  key: 'Limit',
  enDescriptor: 'Limit',
  cnDescriptor: '单次请求返回的数量，默认为20，最小值为1，最大值为100',
  link: '',
  type: 'inputNumber',
  min: 1,
  max: 100
}, {
  key: 'vpc-id',
  enDescriptor: 'vpc-id',
  cnDescriptor: 'VPC实例ID',
  link: '',
  type: 'inputMulti'
}, {
  key: 'vpn-gateway-id',
  enDescriptor: 'vpn-gateway-id',
  cnDescriptor: 'VPN实例ID',
  link: '',
  type: 'inputMulti'
}, {
  key: 'customer-gateway-id ',
  enDescriptor: 'customer-gateway-id ',
  cnDescriptor: '对端网关实例ID',
  link: '',
  type: 'inputMulti'
}, {
  key: 'vpn-connection-name',
  enDescriptor: 'vpn-connection-name',
  cnDescriptor: '通道名称',
  link: '',
  type: 'inputMulti'
}, {
  key: 'vpn-connection-id',
  enDescriptor: 'vpn-connection-id',
  cnDescriptor: '通道实例ID',
  link: '',
  type: 'inputMulti'
}]; // 各产品实例列表detail配置

var queryEditorConfig = {
  instanceDocUrl: 'https://cloud.tencent.com/document/api/215/17515',
  namespace: namespace,
  fieldDescriptor: VPNXFilterFieldsDescriptor
};
var VPNX_STATE = {
  region: '',
  metricName: '',
  metricUnit: '',
  period: undefined,
  dimensionObject: null,
  instance: '',
  instanceAlias: 'VpnConnectionId',
  queries: VPNXFilterFields
};

function GetInstanceQueryParams(queries) {
  if (queries === void 0) {
    queries = {};
  }

  return Object(_common_utils__WEBPACK_IMPORTED_MODULE_0__["instanceQueryParamsBaseParse"])(queries, true);
}

/* harmony default export */ __webpack_exports__["default"] = (VPNX_STATE);


/***/ }),

/***/ "./datasource/tc_monitor/waf/datasource.ts":
/*!*************************************************!*\
  !*** ./datasource/tc_monitor/waf/datasource.ts ***!
  \*************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _query_def__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./query_def */ "./datasource/tc_monitor/waf/query_def.ts");
/* harmony import */ var _base_datasource__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../_base/datasource */ "./datasource/tc_monitor/_base/datasource.ts");
/* harmony import */ var _locale__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../locale */ "./locale/index.ts");
var __extends = undefined && undefined.__extends || function () {
  var _extendStatics = function extendStatics(d, b) {
    _extendStatics = Object.setPrototypeOf || {
      __proto__: []
    } instanceof Array && function (d, b) {
      d.__proto__ = b;
    } || function (d, b) {
      for (var p in b) {
        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];
      }
    };

    return _extendStatics(d, b);
  };

  return function (d, b) {
    if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");

    _extendStatics(d, b);

    function __() {
      this.constructor = d;
    }

    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();

var __assign = undefined && undefined.__assign || function () {
  __assign = Object.assign || function (t) {
    for (var s, i = 1, n = arguments.length; i < n; i++) {
      s = arguments[i];

      for (var p in s) {
        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
      }
    }

    return t;
  };

  return __assign.apply(this, arguments);
};

var __awaiter = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {
  function adopt(value) {
    return value instanceof P ? value : new P(function (resolve) {
      resolve(value);
    });
  }

  return new (P || (P = Promise))(function (resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }

    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }

    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }

    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};

var __generator = undefined && undefined.__generator || function (thisArg, body) {
  var _ = {
    label: 0,
    sent: function sent() {
      if (t[0] & 1) throw t[1];
      return t[1];
    },
    trys: [],
    ops: []
  },
      f,
      y,
      t,
      g;
  return g = {
    next: verb(0),
    "throw": verb(1),
    "return": verb(2)
  }, typeof Symbol === "function" && (g[Symbol.iterator] = function () {
    return this;
  }), g;

  function verb(n) {
    return function (v) {
      return step([n, v]);
    };
  }

  function step(op) {
    if (f) throw new TypeError("Generator is already executing.");

    while (_) {
      try {
        if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
        if (y = 0, t) op = [op[0] & 2, t.value];

        switch (op[0]) {
          case 0:
          case 1:
            t = op;
            break;

          case 4:
            _.label++;
            return {
              value: op[1],
              done: false
            };

          case 5:
            _.label++;
            y = op[1];
            op = [0];
            continue;

          case 7:
            op = _.ops.pop();

            _.trys.pop();

            continue;

          default:
            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
              _ = 0;
              continue;
            }

            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
              _.label = op[1];
              break;
            }

            if (op[0] === 6 && _.label < t[1]) {
              _.label = t[1];
              t = op;
              break;
            }

            if (t && _.label < t[2]) {
              _.label = t[2];

              _.ops.push(op);

              break;
            }

            if (t[2]) _.ops.pop();

            _.trys.pop();

            continue;
        }

        op = body.call(thisArg, _);
      } catch (e) {
        op = [6, e];
        y = 0;
      } finally {
        f = t = 0;
      }
    }

    if (op[0] & 5) throw op[1];
    return {
      value: op[0] ? op[1] : void 0,
      done: true
    };
  }
};





var CDNDatasource =
/** @class */
function (_super) {
  __extends(CDNDatasource, _super);

  function CDNDatasource(instanceSettings, backendSrv, templateSrv) {
    var _this = _super.call(this, instanceSettings, backendSrv, templateSrv) || this;

    _this.Namespace = _query_def__WEBPACK_IMPORTED_MODULE_0__["namespace"];
    _this.InstanceAliasList = _query_def__WEBPACK_IMPORTED_MODULE_0__["WAFInstanceAliasList"];
    _this.InvalidDimensions = _query_def__WEBPACK_IMPORTED_MODULE_0__["WAFInvalidDemensions"];
    _this.templateQueryIdMap = _query_def__WEBPACK_IMPORTED_MODULE_0__["templateQueryIdMap"];
    _this.InstanceReqConfig = {
      // service: 'waf',
      action: 'DescribeDomains',
      responseField: 'Domains'
    };
    return _this;
  }

  CDNDatasource.prototype.getRegions = function () {
    return Promise.resolve(_query_def__WEBPACK_IMPORTED_MODULE_0__["regionSupported"].map(function (_a) {
      var value = _a.value;
      return {
        value: value,
        text: Object(_locale__WEBPACK_IMPORTED_MODULE_2__["t"])(value)
      };
    }));
  };

  CDNDatasource.prototype.metricFindQuery = function (query, regex) {
    return __awaiter(this, void 0, void 0, function () {
      return __generator(this, function (_a) {
        return [2
        /*return*/
        , _super.prototype.metricFindQuery.call(this, __assign(__assign({}, query), {
          region: 'ap-guangzhou'
        }), regex)];
      });
    });
  };

  return CDNDatasource;
}(_base_datasource__WEBPACK_IMPORTED_MODULE_1__["BaseDatasource"]);

/* harmony default export */ __webpack_exports__["default"] = (CDNDatasource);

/***/ }),

/***/ "./datasource/tc_monitor/waf/query.ts":
/*!********************************************!*\
  !*** ./datasource/tc_monitor/waf/query.ts ***!
  \********************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _base_query__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../_base/query */ "./datasource/tc_monitor/_base/query.ts");
/* harmony import */ var _query_def__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./query_def */ "./datasource/tc_monitor/waf/query_def.ts");


Object(_base_query__WEBPACK_IMPORTED_MODULE_0__["default"])(_query_def__WEBPACK_IMPORTED_MODULE_1__["queryEditorName"], _query_def__WEBPACK_IMPORTED_MODULE_1__["queryEditorConfig"]);

/***/ }),

/***/ "./datasource/tc_monitor/waf/query_def.ts":
/*!************************************************!*\
  !*** ./datasource/tc_monitor/waf/query_def.ts ***!
  \************************************************/
/*! exports provided: default, WAFFilterFieldsDescriptor, templateQueryIdMap, WAFInstanceAliasList, WAFInvalidDemensions, namespace, regionSupported, queryEditorName, queryEditorConfig, WAFGetInstanceQueryParams */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "WAFFilterFieldsDescriptor", function() { return WAFFilterFieldsDescriptor; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "templateQueryIdMap", function() { return templateQueryIdMap; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "WAFInstanceAliasList", function() { return WAFInstanceAliasList; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "WAFInvalidDemensions", function() { return WAFInvalidDemensions; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "namespace", function() { return namespace; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "regionSupported", function() { return regionSupported; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "queryEditorName", function() { return queryEditorName; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "queryEditorConfig", function() { return queryEditorConfig; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "WAFGetInstanceQueryParams", function() { return GetInstanceQueryParams; });
/* harmony import */ var _common_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../common/utils */ "./datasource/common/utils.ts");

var namespace = 'QCE/WAF';
var queryEditorName = 'wafQuery';
var WAFFilterFields = {
  Limit: 20,
  Offset: 0,
  origin: [],
  domain: [],
  resourceId: [],
  status: {},
  serviceType: {},
  projectId: [],
  domainType: {},
  fullUrlCache: {},
  https: {},
  originPullProtocol: {},
  tagKey: []
};
var WAFFilterFieldsDescriptor = [{
  key: 'Offset',
  enDescriptor: 'Offset',
  cnDescriptor: '偏移量, 例如Offset=20&Limit=20 返回第 20 到 40 项',
  link: '',
  type: 'inputNumber',
  min: 0
}, {
  key: 'Limit',
  enDescriptor: 'Limit',
  cnDescriptor: '单次请求返回的数量，默认为20，最小值为1，最大值为100',
  link: '',
  type: 'inputNumber',
  min: 1,
  max: 100
}, {
  key: 'origin',
  enDescriptor: 'origin',
  cnDescriptor: '主源站',
  link: '',
  type: 'inputMulti'
}, {
  key: 'domain',
  enDescriptor: 'domain',
  cnDescriptor: '域名',
  link: '',
  type: 'inputMulti'
}, {
  key: 'resourceId',
  enDescriptor: 'resourceId',
  cnDescriptor: '域名id',
  link: '',
  type: 'inputMulti'
}, {
  key: 'status',
  enDescriptor: 'status',
  cnDescriptor: '域名状态',
  link: '',
  type: 'select',
  list: [{
    text: 'online',
    value: 'online'
  }, {
    text: 'offline',
    value: 'offline'
  }, {
    text: 'processing',
    value: 'processing'
  }]
}, {
  key: 'serviceType',
  enDescriptor: 'serviceType',
  cnDescriptor: '业务类型',
  link: '',
  type: 'select',
  list: [{
    text: 'web',
    value: 'web'
  }, {
    text: 'download',
    value: 'download'
  }, {
    text: 'media',
    value: 'media'
  }]
}, {
  key: 'projectId',
  enDescriptor: 'projectId',
  cnDescriptor: '项目ID',
  link: '',
  type: 'inputNumberMulti'
}, {
  key: 'domainType',
  enDescriptor: 'domainType',
  cnDescriptor: '主源站类型',
  link: '',
  type: 'select',
  list: [{
    text: '自有源',
    value: 'cname'
  }, {
    text: 'cos接入',
    value: 'cos'
  }]
}, {
  key: 'fullUrlCache',
  enDescriptor: 'fullUrlCache',
  cnDescriptor: '全路径缓存',
  link: '',
  type: 'select',
  list: [{
    text: '打开',
    value: 'on'
  }, {
    text: '关闭',
    value: 'off'
  }]
}, {
  key: 'https',
  enDescriptor: 'https',
  cnDescriptor: '是否配置https',
  link: '',
  type: 'select',
  list: [{
    text: 'on',
    value: 'on'
  }, {
    text: 'off',
    value: 'off'
  }, {
    text: 'processing',
    value: 'processing'
  }]
}, {
  key: 'originPullProtocol',
  enDescriptor: 'originPullProtocol',
  cnDescriptor: '回源协议类型',
  link: '',
  type: 'select',
  list: [{
    text: 'http',
    value: 'http'
  }, {
    text: 'follow',
    value: 'follow'
  }, {
    text: 'https',
    value: 'https'
  }]
}, {
  key: 'tagKey',
  enDescriptor: 'tagKey',
  cnDescriptor: '标签键',
  link: '',
  type: 'inputMulti'
}]; // 各产品实例列表detail配置

var queryEditorConfig = {
  instanceDocUrl: 'https://cloud.tencent.com/document/api/228/41118',
  namespace: namespace,
  fieldDescriptor: WAFFilterFieldsDescriptor
};
var WAF_STATE = {
  region: 'ap-guangzhou',
  metricName: '',
  metricUnit: '',
  period: undefined,
  dimensionObject: null,
  instance: '',
  instanceAlias: 'Domain',
  queries: WAFFilterFields
};
var regionSupported = [{
  value: 'ap-beijing'
}, {
  value: 'ap-chengdu'
}, {
  value: 'ap-chongqing'
}, {
  value: 'ap-guangzhou'
}, {
  value: 'ap-hongkong'
}, {
  value: 'ap-nanjing'
}, {
  value: 'ap-shanghai'
}, {
  value: 'ap-shanghai-fsi'
}, {
  value: 'ap-seoul'
}, {
  value: 'ap-singapore'
}];

function GetInstanceQueryParams(queries) {
  if (queries === void 0) {
    queries = {};
  }

  return Object(_common_utils__WEBPACK_IMPORTED_MODULE_0__["instanceQueryParamsBaseParse"])(queries, true);
}

var WAFInstanceAliasList = ['Domain', 'ProjectId'];
var WAFInvalidDemensions = {
  projectId: 'ProjectId',
  domain: 'Domain'
};
var templateQueryIdMap = {
  instance: 'Domain'
};
/* harmony default export */ __webpack_exports__["default"] = (WAF_STATE);


/***/ }),

/***/ "./datasource/types.ts":
/*!*****************************!*\
  !*** ./datasource/types.ts ***!
  \*****************************/
/*! exports provided: ServiceType, ServiceTypeOptions, defaultQueryInfo, queryInfoRuntime */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ServiceType", function() { return ServiceType; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ServiceTypeOptions", function() { return ServiceTypeOptions; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "defaultQueryInfo", function() { return defaultQueryInfo; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "queryInfoRuntime", function() { return queryInfoRuntime; });
/* harmony import */ var _locale__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../locale */ "./locale/index.ts");
/* harmony import */ var _log_service_common_constants__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./log-service/common/constants */ "./datasource/log-service/common/constants.tsx");


var ServiceType;

(function (ServiceType) {
  ServiceType["monitor"] = "monitor";
  ServiceType["logService"] = "logService";
  ServiceType["RUMService"] = "RUMService";
  ServiceType["APMService"] = "APMService";
})(ServiceType || (ServiceType = {}));

var ServiceTypeOptions = [{
  value: ServiceType.monitor,

  get label() {
    return Object(_locale__WEBPACK_IMPORTED_MODULE_0__["t"])('cloud_monitor');
  }

}, {
  value: ServiceType.logService,

  get label() {
    return Object(_locale__WEBPACK_IMPORTED_MODULE_0__["t"])('cloud_log_service');
  }

}, {
  value: ServiceType.RUMService,

  get label() {
    return Object(_locale__WEBPACK_IMPORTED_MODULE_0__["t"])('real_user_monitoring');
  }

}, {
  value: ServiceType.APMService,

  get label() {
    return Object(_locale__WEBPACK_IMPORTED_MODULE_0__["t"])('apm_monitoring');
  }

}];
var defaultQueryInfo = {
  serviceType: ServiceType.logService,
  logServiceParams: {
    region: '',
    TopicId: '',
    Query: '',
    SyntaxRule: _log_service_common_constants__WEBPACK_IMPORTED_MODULE_1__["SearchSyntaxRule"].CQL
  },
  RUMServiceParams: {
    policy: 'default',
    resultFormat: 'time_series',
    orderByTime: 'ASC',
    tags: [],
    groupBy: [{
      type: 'time',
      params: ['$__interval']
    }, {
      type: 'fill',
      params: ['null']
    }],
    select: [[{
      type: 'field',
      params: ['value']
    }, {
      type: 'mean',
      params: []
    }]]
  },
  APMServiceParams: {
    policy: 'default',
    resultFormat: 'time_series',
    orderType: 'time',
    orderBy: 'ASC',
    tags: [],
    groupBy: [{
      type: 'time',
      params: ['$__interval']
    }, {
      type: 'fill',
      params: ['null']
    }],
    select: [[{
      type: 'field',
      params: ['value']
    }, {
      type: 'mean',
      params: []
    }]]
  }
};
/** QueryInfo的运行时版本，用于将query中的不合法字段进去移除，保证query是个QueryInfo类型的数据 */

var queryInfoRuntime = {
  refId: '',
  hide: false,
  key: '',
  queryType: '',
  dataTopic: null,
  datasource: '',
  serviceType: defaultQueryInfo.serviceType,
  logServiceParams: defaultQueryInfo.logServiceParams,
  RUMServiceParams: defaultQueryInfo.RUMServiceParams,
  APMServiceParams: defaultQueryInfo.APMServiceParams
};

/***/ }),

/***/ "./locale/en_US.ts":
/*!*************************!*\
  !*** ./locale/en_US.ts ***!
  \*************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
var en_US = {
  language: 'Language',
  enable_intranet_API_mode: 'Enable Intranet API Mode',
  cloud_database: 'Cloud Database',
  cloud_load_balancer: 'Cloud Load Balancer',
  virtual_private_cloud: 'Virtual Private Cloud',
  content_delivery_network: 'Content Delivery Network',
  message_queue: 'Message Queue',
  direct_connect: 'Direct Connect',
  cloud_physical_machine: 'Cloud Physical Machine',
  elastic_mapReduce: 'Elastic MapReduce',
  edge_computing_machine: 'Edge Computing Machine',
  // namespace
  RUM: 'Real User Monitoring(RUM)',
  CLS: 'Cloud Log Service(CLS)',
  CVM: 'Cloud Virtual Machine(CVM)',
  CDB: 'TencentDB for MySQL(CDB)',
  CMONGO: 'TencentDB for MongoDB(CMONGO)',
  POSTGRES: 'TencentDB for PostgreSQL(POSTGRES)',
  REDIS: 'TencentDB for Redis(REDIS)',
  REDIS_MEM: 'TencentDB for Redis(Memory Edition, 5-Second)(REDIS_MEM)',
  SQLSERVER: 'TencentDB for SQL Server(SQLSERVER)',
  CYNOSDB_MYSQL: 'TencentDB for CYNOSDB_MYSQL(CYNOSDB_MYSQL)',
  TCAPLUS: 'TencentDB for TcaplusDB(TCAPLUS)',
  TDMYSQL: 'TDSQL for MySQL(TDMYSQL)',
  PCX: 'Peering Connection(PCX)',
  BWP: 'Bandwidth Packet(BWP)',
  NAT_GATEWAY: 'NAT Gateway(NAT_GATEWAY)',
  VPNGW: 'VPN Gateway(VPNGW)',
  VPNX: 'VPN Tunnel(VPNX)',
  DCG: 'Direct Connect Gateway(DCG)',
  CEIP_SUMMARY: 'Anycast EIP(CEIP_SUMMARY)',
  VPC_NET_DETECT: 'Network Detection(VPC_NET_DETECT)',
  VBC: 'Cloud Connect Network(VBC)',
  LB: 'Elastic IP(LB)',
  LB_PUBLIC: 'Public Network CLB(LB_PUBLIC)',
  LB_PRIVATE: 'Private Network CLB Layer-4 Protocol(LB_PRIVATE)',
  LOADBALANCE: 'Private Network CLB Layer-7 Protocol(LOADBALANCE)',
  CDN: 'Chinese Mainland Domain(CDN)',
  CDN_LOG_DATA: 'Province(CDN_LOG_DATA)',
  OV_CDN: 'Overseas Domain(OV_CDN)',
  SCF_V2: 'Serverless Cloud Function(SCF)',
  CFS: 'Cloud File Storage(CFS)',
  COS: 'Cloud Object Storage(COS)',
  CKAFKA: 'Message Queue CKafka(CKAFKA)',
  CMQ: 'Message Queue for Queue Service(CMQ)',
  CMQTOPIC: 'Message Queue for Topic Subscription(CMQTOPIC)',
  TDMQ: 'Tencent Distributed Message Queue for Pulsar(TDMQ)',
  TDMQ_ROCKETMQ: 'Tencent Distributed Message Queue for RocketMQ(ROCKETMQ)',
  TDMQ_RABBITMQ: 'Tencent Distributed Message Queue for RabbitMQ(RABBITMQ)',
  DCX: 'Direct Connect for Dedicated Tunnel(DCX)',
  DC: 'Direct Connect for Connection(DC)',
  CPM: 'Cloud Physical Machine(CPM)',
  BM_PCX: 'Cloud Physical Machine for Peering Connection(BM_PCX)',
  BM_LB: 'Cloud Physical Machine for Public Network CLB(BM_LB)',
  BM_INTRA_LB: 'Cloud Physical Machine for Private Network CLB(BM_INTRA_LB)',
  CES: 'Elasticsearch Service(CES)',
  BLOCK_STORAGE: 'Cloud Block Storage(BLOCK_STORAGE)',
  APIGATEWAY: 'API Gateway(APIGATEWAY)',
  QAAP: 'Global Application Acceleration Platform(GAAP)',
  ECM: 'Edge Computing Machine for Computation and Networking(ECM)',
  ECM_BLOCK_STORAGE: 'Edge Computing Machine for Block Storage(ECM_BLOCK_STORAGE)',
  ECM_LB: 'Edge Computing Machine for Layer-4 CLB(ECM_LB)',
  GSE: 'Game Server Elastic-scaling(GSE)',
  TKE: 'Tencent Kubernetes Engine(TKE)',
  ECDN: 'Enterprise Content Delivery Network(ECDN)',
  WAF: 'Web Application Firewall(WAF)',
  // others
  multi_scene: 'Multi-Scene',
  lite: 'Lite',
  cloud_monitor: 'Cloud Monitor',
  cloud_log_service: 'Cloud Log Service',
  real_user_monitoring: 'Real User Monitoring',
  apm_monitoring: 'Application Monitoring',
  region: 'Region',
  log_topic: 'Log Topic',
  syntax_rule: 'Syntax Rule',
  max_result_num: 'Maximum result number',
  search_statement: 'Search Statement',
  time_unit: 'Time unit',
  seconds: 'seconds',
  search_description: 'Search for instances according to specific query conditions, and pull the first 20 instances by default',
  // region
  'ap-guangzhou': 'South China(Guangzhou)',
  'ap-shenzhen-fsi': 'South China(Shenzhen Finance)',
  'ap-guangzhou-open': 'South China(Guangzhou OPEN)',
  'ap-shenzhen': 'South China(Shenzhen)',
  'ap-qingyuan': 'South China(Qingyuan)',
  'ap-shanghai': 'East China(Shanghai)',
  'ap-shanghai-fsi': 'East China(Shanghai Finance)',
  'ap-jinan-ec': 'East China(Jinan)',
  'ap-hangzhou-ec': 'East China(Hangzhou)',
  'ap-nanjing': 'East China(Nanjing)',
  'ap-fuzhou-ec': 'East China(Fuzhou)',
  'ap-hefei-ec': 'East China(Hefei)',
  'ap-beijing': 'North China region(Beijing)',
  'ap-tianjin': 'North China region(Tianjin)',
  'ap-beijing-fsi': 'North China region(Beijing Finance)',
  'ap-shijiazhuang-ec': 'North China region(Shijiazhuang)',
  'ap-wuhan-ec': 'Central China(Wuhan)',
  'ap-changsha-ec': 'Central China(Changsha)',
  'ap-zhengzhou-ec': 'Central China(Zhengzhou)',
  'ap-chengdu': 'Southwest China(Chengdu)',
  'ap-chongqing': 'Southwest China(Chongqing)',
  'ap-xian-ec': "Northwest region(Xi'an)",
  'ap-shenyang-ec': 'Northeast China(Shenyang)',
  'ap-taipei': 'Hong Kong, Macau and Taiwan (China)(Taipei, China)',
  'ap-hongkong': 'Hong Kong, Macau and Taiwan (China)(Hong Kong, China)',
  'ap-seoul': 'Northeast Asia(Seoul)',
  'ap-tokyo': 'Northeast Asia(Tokyo)',
  'ap-singapore': 'Southeast Asia(Singapore)',
  'ap-bangkok': 'Southeast Asia(Bangkok)',
  'ap-jakarta': 'Southeast Asia(Jakarta)',
  'na-siliconvalley': 'US West(Silicon Valley)',
  'eu-frankfurt': 'Europe(Frankfurt)',
  'eu-moscow': 'Europe(Northeastern Europe)',
  'ap-mumbai': 'South Asia(Mumbai)',
  'na-ashburn': 'US East(Virginia)',
  'sa-saopaulo': 'South America(São Paulo)',
  'na-toronto': 'North America(Toronto)'
};
/* harmony default export */ __webpack_exports__["default"] = (en_US);

/***/ }),

/***/ "./locale/index.ts":
/*!*************************!*\
  !*** ./locale/index.ts ***!
  \*************************/
/*! exports provided: Language, t, setLanguage, getLanguage */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Language", function() { return Language; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "t", function() { return t; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "setLanguage", function() { return setLanguage; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getLanguage", function() { return getLanguage; });
/* harmony import */ var _zh_CN__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./zh_CN */ "./locale/zh_CN.ts");
/* harmony import */ var _en_US__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./en_US */ "./locale/en_US.ts");


var locale_language = 'zh-CN';
var Language;

(function (Language) {
  Language["Chinese"] = "zh-CN";
  Language["English"] = "en-US";
})(Language || (Language = {}));

var t = function t(key) {
  if (locale_language === Language.Chinese) {
    return _zh_CN__WEBPACK_IMPORTED_MODULE_0__["default"][key];
  }

  return _en_US__WEBPACK_IMPORTED_MODULE_1__["default"][key];
};
var setLanguage = function setLanguage(language) {
  locale_language = language;
};
var getLanguage = function getLanguage() {
  return locale_language;
};

/***/ }),

/***/ "./locale/zh_CN.ts":
/*!*************************!*\
  !*** ./locale/zh_CN.ts ***!
  \*************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
var zh_CN = {
  language: '语言',
  enable_intranet_API_mode: '开启内网API模式',
  cloud_database: '云数据库',
  cloud_load_balancer: '负载均衡',
  virtual_private_cloud: '私有网络',
  content_delivery_network: '内容分发网络',
  message_queue: '消息队列',
  direct_connect: '专线接入',
  cloud_physical_machine: '黑石物理服务器',
  elastic_mapReduce: '弹性 MapReduce',
  edge_computing_machine: '边缘计算机器',
  // namespace
  RUM: '前端性能监控(RUM)',
  APM: '应用性能监控(APM)',
  CLS: '日志服务(CLS)',
  CVM: '云服务器(CVM)',
  CDB: '云数据库 MySQL(CDB)',
  CMONGO: '云数据库 MongoDB(CMONGO)',
  POSTGRES: '云数据库 PostgreSQL(POSTGRES)',
  REDIS: '云数据库 Redis(REDIS)',
  REDIS_MEM: '云数据库 Redis内存版(5s)(REDIS_MEM)',
  SQLSERVER: '云数据库 SQL Server(SQLSERVER)',
  CYNOSDB_MYSQL: '云数据库 CYNOSDB_MYSQL(CYNOSDB_MYSQL)',
  TCAPLUS: '云数据库 TcaplusDB(TCAPLUS)',
  TDMYSQL: '分布式数据库 TDSQL MySQL(TDMYSQL)',
  PCX: '私有网络-对等连接(PCX)',
  BWP: '私有网络-带宽包(BWP)',
  NAT_GATEWAY: '私有网络-NAT 网关(NAT_GATEWAY)',
  VPNGW: '私有网络-VPN 网关(VPNGW)',
  VPNX: '私有网络-VPN 通道(VPNX)',
  DCG: '私有网络-专线网关(DCG)',
  CEIP_SUMMARY: '私有网络-Anycast 弹性公网IP(CEIP_SUMMARY)',
  VPC_NET_DETECT: '私有网络-网络探测(VPC_NET_DETECT)',
  VBC: '私有网络-云联网(VBC)',
  LB: '私有网络-弹性公网IP(LB)',
  LB_PUBLIC: '公网负载均衡监控指标(LB_PUBLIC)',
  LB_PRIVATE: '内网负载均衡四层协议监控指标(LB_PRIVATE)',
  LOADBALANCE: '内网负载均衡七层协议监控指标(LOADBALANCE)',
  CDN: '国内域名(CDN)',
  CDN_LOG_DATA: '省份域名(CDN_LOG_DATA)',
  OV_CDN: '国外域名(OV_CDN)',
  SCF_V2: '云函数(SCF)',
  CFS: '文件存储(CFS)',
  COS: '对象存储(COS)',
  CKAFKA: '消息队列 CKafka(CKAFKA)',
  CMQ: '消息队列-队列服务监控(CMQ)',
  CMQTOPIC: '消息队列-主题订阅监控(CMQTOPIC)',
  TDMQ: '消息队列 Pulsar 版(TDMQ)',
  TDMQ_ROCKETMQ: '消息队列 RocketMQ 版(ROCKETMQ)',
  TDMQ_RABBITMQ: '消息队列 RabbitMQ 版(RABBITMQ)',
  DCX: '专线接入-专用通道(DCX)',
  DC: '专线接入-物理专线(DC)',
  CPM: '黑石物理服务器(CPM)',
  BM_PCX: '黑石对等连接(BM_PCX)',
  BM_LB: '黑石外网负载均衡(BM_LB)',
  BM_INTRA_LB: '黑石内网负载均衡(BM_INTRA_LB)',
  CES: 'Elasticsearch指标(CES)',
  BLOCK_STORAGE: '云硬盘(BLOCK_STORAGE)',
  APIGATEWAY: 'API 网关(APIGATEWAY)',
  QAAP: '全球应用加速(GAAP)',
  ECM: '边缘计算和网络监控(ECM)',
  ECM_BLOCK_STORAGE: '边缘计算存储监控(ECM_BLOCK_STORAGE)',
  ECM_LB: '边缘计算负载均衡(ECM_LB)',
  GSE: '游戏服务器伸缩(GSE)',
  TKE: '容器服务(TKE)',
  ECDN: '全站加速网络(ECDN)',
  WAF: 'Web 应用防火墙(WAF)',
  // others
  multi_scene: '多场景版',
  lite: '精简版',
  cloud_monitor: '云监控',
  cloud_log_service: '日志服务',
  real_user_monitoring: '前端性能监控',
  apm_monitoring: '应用性能监控',
  region: '地域',
  log_topic: '日志主题',
  syntax_rule: '语法规则',
  max_result_num: '最大结果条数',
  search_statement: '检索语句',
  time_unit: 'Time unit',
  seconds: 'seconds',
  search_description: '按照具体的查询条件搜索实例，默认拉取前 20 条实例',
  // region
  'ap-guangzhou': '华南地区(广州)',
  'ap-shenzhen-fsi': '华南地区(深圳金融)',
  'ap-guangzhou-open': '华南地区(广州OPEN)',
  'ap-shenzhen': '华南地区(深圳)',
  'ap-qingyuan': '华南地区(清远)',
  'ap-shanghai': '华东地区(上海)',
  'ap-shanghai-fsi': '华东地区(上海金融)',
  'ap-jinan-ec': '华东地区(济南)',
  'ap-hangzhou-ec': '华东地区(杭州)',
  'ap-nanjing': '华东地区(南京)',
  'ap-fuzhou-ec': '华东地区(福州)',
  'ap-hefei-ec': '华东地区(合肥)',
  'ap-beijing': '华北地区(北京)',
  'ap-tianjin': '华北地区(天津)',
  'ap-beijing-fsi': '华北地区(北京金融)',
  'ap-shijiazhuang-ec': '华北地区(石家庄)',
  'ap-wuhan-ec': '华中地区(武汉)',
  'ap-changsha-ec': '华中地区(长沙)',
  'ap-zhengzhou-ec': '华中地区(郑州)',
  'ap-chengdu': '西南地区(成都)',
  'ap-chongqing': '西南地区(重庆)',
  'ap-xian-ec': '西北地区(西安)',
  'ap-shenyang-ec': '东北地区(沈阳)',
  'ap-taipei': '港澳台地区(中国台北)',
  'ap-hongkong': '港澳台地区(中国香港)',
  'ap-seoul': '亚太东北(首尔)',
  'ap-tokyo': '亚太东北(东京)',
  'ap-singapore': '亚太东南(新加坡)',
  'ap-bangkok': '亚太东南(曼谷)',
  'ap-jakarta': '亚太东南(雅加达)',
  'na-siliconvalley': '美国西部(硅谷)',
  'eu-frankfurt': '欧洲地区(法兰克福)',
  'eu-moscow': '欧洲地区(莫斯科)',
  'ap-mumbai': '亚太南部(孟买)',
  'na-ashburn': '美国东部(弗吉尼亚)',
  'sa-saopaulo': '南美地区(圣保罗)',
  'na-toronto': '北美地区(多伦多)'
};
/* harmony default export */ __webpack_exports__["default"] = (zh_CN);

/***/ }),

/***/ "@grafana/data":
/*!********************************!*\
  !*** external "@grafana/data" ***!
  \********************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = __WEBPACK_EXTERNAL_MODULE__grafana_data__;

/***/ }),

/***/ "@grafana/runtime":
/*!***********************************!*\
  !*** external "@grafana/runtime" ***!
  \***********************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = __WEBPACK_EXTERNAL_MODULE__grafana_runtime__;

/***/ }),

/***/ "@grafana/ui":
/*!******************************!*\
  !*** external "@grafana/ui" ***!
  \******************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = __WEBPACK_EXTERNAL_MODULE__grafana_ui__;

/***/ }),

/***/ "angular":
/*!**************************!*\
  !*** external "angular" ***!
  \**************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = __WEBPACK_EXTERNAL_MODULE_angular__;

/***/ }),

/***/ "emotion":
/*!**************************!*\
  !*** external "emotion" ***!
  \**************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = __WEBPACK_EXTERNAL_MODULE_emotion__;

/***/ }),

/***/ "grafana/app/core/core_module":
/*!***************************************!*\
  !*** external "app/core/core_module" ***!
  \***************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = __WEBPACK_EXTERNAL_MODULE_grafana_app_core_core_module__;

/***/ }),

/***/ "grafana/app/core/table_model":
/*!***************************************!*\
  !*** external "app/core/table_model" ***!
  \***************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = __WEBPACK_EXTERNAL_MODULE_grafana_app_core_table_model__;

/***/ }),

/***/ "grafana/app/core/utils/kbn":
/*!*************************************!*\
  !*** external "app/core/utils/kbn" ***!
  \*************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = __WEBPACK_EXTERNAL_MODULE_grafana_app_core_utils_kbn__;

/***/ }),

/***/ "grafana/app/plugins/sdk":
/*!**********************************!*\
  !*** external "app/plugins/sdk" ***!
  \**********************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = __WEBPACK_EXTERNAL_MODULE_grafana_app_plugins_sdk__;

/***/ }),

/***/ "lodash":
/*!*************************!*\
  !*** external "lodash" ***!
  \*************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = __WEBPACK_EXTERNAL_MODULE_lodash__;

/***/ }),

/***/ "moment":
/*!*************************!*\
  !*** external "moment" ***!
  \*************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = __WEBPACK_EXTERNAL_MODULE_moment__;

/***/ }),

/***/ "react":
/*!************************!*\
  !*** external "react" ***!
  \************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = __WEBPACK_EXTERNAL_MODULE_react__;

/***/ }),

/***/ "react-dom":
/*!****************************!*\
  !*** external "react-dom" ***!
  \****************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = __WEBPACK_EXTERNAL_MODULE_react_dom__;

/***/ }),

/***/ "rxjs":
/*!***********************!*\
  !*** external "rxjs" ***!
  \***********************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = __WEBPACK_EXTERNAL_MODULE_rxjs__;

/***/ })

/******/ })});;
//# sourceMappingURL=module.js.map